{"aardvark": {"name": "aardvark", "description": "Aardvark is a multi-account AWS IAM Access Advisor API", "repository": "git@github.com:lyft/aardvark-private.git", "image_type": "service", "service_tier": 3, "slack": "#security", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "team_email": "security-engineering@lyft.com", "pagerduty_escalation_policy": "Security", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "aardvark.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "aardvark.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "aardvark"}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "version": "3a767c42b57a70bad919ae99aa9e887bae182908", "images": [{"parent": {"name": "opsbase", "version": "7217bb50d71d786ef58610aafb6403846a9e518b", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "7217bb50d71d786ef58610aafb6403846a9e518b", "sub_image": null, "external": false}}, "abacus": {"name": "abacus", "description": "A calculator service for fare &amp; tax calculations", "repository": "git@github.com:lyft/abacus.git", "image_type": "service", "service_tier": 0, "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent --worker-connections=1 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/abacus", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}], "facets": [{"name": "main", "member": "abacus.service", "type": "service", "requirements": {"mongo": true}, "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 13, "max_size": 68}}}}, {"name": "canary", "member": "abacus.service", "type": "service", "canary": true, "requirements": {"mongo": true}, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "abacus.legacy", "idl.server", "envoy.server"]}, {"name": "integration", "members": ["abacus.dev", "regions.dev", "tolls.dev", "venues.dev", "envoy.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "abacus.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "abacus.integration", "container": "abacus.legacy", "command": "make test_integration", "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#pricing-xp-public", "notification_overrides": {"deploy": {"slack": "#pricing-xp-bots"}, "deploy_failure": {"slack": "#pricing-xp-bots"}, "test_failure": {"slack": "#pricing-xp-bots"}, "master_failure": {"slack": "#pricing-xp-bots"}, "pr_merge": {"slack": "#pricing-xp-bots"}, "behind_notifications": {"slack": "#pricing-xp-bots"}}, "team_email": "pricing-xp@lyft.com", "pagerduty_escalation_policy": "Pricing Experience", "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "abacus"}], "common_settings": {"internal_hosts": {"regions": null, "tcs": null, "tolls": null, "venues": null}, "external_hosts": {"vertex": null}}}}, "logging": {"abacus": {"fields": {"type": "keyword", "error": "keyword", "ride_id": "keyword", "tip_amount": "long", "passenger_id": "long", "driver_id": "long", "user_id": "long", "calculated_tip": "long", "driver_pay_amount": "long", "calculator": "keyword", "tip": "long", "ride_amount": "long", "note": "keyword", "route_id": "keyword", "new_li": "keyword", "existing_li": "keyword", "variable": "keyword", "amount_diff": "long", "shadow": "boolean", "original_amount": "long"}}}, "version": "c3dca30763bcf3f97967cd4d00fd9f9667e4668b", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "acceptancerate": {"name": "acceptancerate", "description": "Uses driver cancels, lapses, and rides given to calculate a driver's acceptance rate.", "repository": "git@github.com:lyft/acceptancerate.git", "image_type": "service", "service_tier": 1, "pagerduty_escalation_policy": "Driving Team", "team_email": "driving-eng@lyft.com", "slack": "#driving-backend", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "acceptancerate.legacy"]}, {"name": "integration", "members": ["abacus.dev", "acceptancerate.dev", "account.dev", "ats.qa_approve", "auth.dev", "coupons.dev", "dispatch.dev", "drivermode.dev", "etaproxy.dev", "fare.dev", "green.dev", "grow.dev", "jobscheduler.dev", "karma.dev", "ledger.dev", "legacyapi.dev", "legacyridetypes.dev", "locations.dev", "rides.dev", "ridesapi.dev", "routes.dev", "payapi.dev", "pricing.dev", "ratings.dev", "ridexppredictor.dev", "supply.dev", "tcs.dev", "trips.dev", "tripsapi.dev", "users.dev", "venues.dev", "viewport.dev", "wallet.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "acceptancerate.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "skip_threshold": 5, "command": "make test_integration", "group": "acceptancerate.integration", "target": "tests/integration", "virtualenv": "integration_venv", "container": "acceptancerate.legacy", "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "acceptancerate"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"rides": null, "supply": null, "tcs": null, "users": null}, "external_hosts": {"firehose_iad": null}}}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}]}}, "logging": {"acceptancerate": {"fields": {"driver_id": "keyword", "end_time_ms": "keyword", "start_time_ms": "keyword", "exception_class": "keyword", "exception_code": "long", "error_message": "keyword", "results": "keyword"}}}, "version": "224d5d8dab04f877b4458b234fad0ec978a4ad04", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "accessportalint": {"name": "accessportalint", "description": "Frontend service for managing team member access to tools at Lyft", "repository": "git@github.com:lyft/accessportalint.git", "slack": "#security-deploys", "team_email": "privacy-eng@lyft.com", "pagerduty_escalation_policy": "Data Privacy", "image_type": "service", "service_tier": 2, "languages": ["javascript"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1"}}, {"name": "s2i", "params": {"builder": "lyft/s2inode:service.57f3a09ac66875bed7c715a7fd6b2d36d5177ca8", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "cdnupload", "command": "/code/accessportalint/cdn-upload", "sub_image": "k8s"}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "accessportalint.legacy"]}, {"name": "service_group", "members": ["accessportalint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "accessportalint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "facets": [{"name": "assets", "member": "feexample.cdnupload", "type": "job"}, {"name": "main", "member": "accessportalint.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "accessportalint.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "bake_time_minutes": 0, "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "accessportalint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null, "team": {"tls_enabled": true}}}}}, "version": "b6b4cebac03e9a23a65fcae7e787fc2c70dfa1f6", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2inode", "version": "57f3a09ac66875bed7c715a7fd6b2d36d5177ca8", "sub_image": "service", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "accidentlabels": {"name": "accidentlabels", "description": "Service that hosts a tool for doing historical accident labeling", "repository": "git@github.com:lyft/accidentlabels.git", "slack": "#insurance", "team_email": "insurance-tech@lists.lyft.com", "pagerduty_escalation_policy": "Insurance", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:68547afa9d7dbf0c41d37c8e1d4661607d6f674b", "packages": ["pkg-config", "libxmlsec1-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": "k8s", "packages": ["pkg-config", "libxmlsec1-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/accidentlabels", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "accidentlabels.legacy"]}, {"name": "service_group", "members": ["accidentlabels.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "accidentlabels.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "accidentlabels.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "accidentlabels.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "accidentlabels"}]}}, "version": "0bdea3fff989fa615b53b24641f1342c8a26a549", "images": [{"parent": {"name": "opsbase", "version": "68547afa9d7dbf0c41d37c8e1d4661607d6f674b", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "68547afa9d7dbf0c41d37c8e1d4661607d6f674b", "sub_image": null, "external": false}}, "accidentrisk": {"name": "accidentrisk", "description": "Computes predictions for driver accident risk such as accidents per thousand miles", "repository": "git@github.com:lyft/accidentrisk.git", "slack": "#insurance", "team_email": "insurance-tech@lists.lyft.com", "pagerduty_escalation_policy": "Insurance", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit", "packages": ["libkrb5-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s", "packages": ["libkrb5-dev"]}}]}}, "containers": [{"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/accidentrisk", "limits": {"cpu": 0.5, "memory": "256Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "accidentrisk.legacy"]}, {"name": "service_group", "members": ["accidentrisk.service"]}, {"name": "integration", "members": ["accidentrisk.dev", "modelexecupdate.dev", "dsfeatures.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "accidentrisk.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "accidentrisk.integration", "container": "accidentrisk.legacy", "command": "make test_integration"}], "facets": [{"name": "main", "member": "accidentrisk.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "accidentrisk.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "links": [{"text": "AccidentRisk Runbook", "url": "https://github.com/lyft/accidentrisk/blob/master/docs/RUNBOOK.md"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}], "links": [{"text": "AccidentRisk Runbook", "url": "https://github.com/lyft/accidentrisk/blob/master/docs/RUNBOOK.md"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "accidentrisk"}], "common_settings": {"internal_hosts": {"ats": {"tls_enabled": true}, "backgroundcheck": {"tls_enabled": true}, "dsfeatures": null, "dsfeatureswrites": null, "jobschedulernormalweb": null, "modelexecupdate": {"tls_enabled": true}, "rentals": null, "supply": null, "supplyrecords": {"tls_enabled": true}, "users": null}}}}, "version": "9563604bf71d744f97e54244d7d2172df51a7001", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "accidents": {"name": "accidents", "description": "Service to manage accident reports and insurance claims", "repository": "git@github.com:lyft/accidents.git", "image_type": "service", "service_tier": 1, "slack": "#insurance", "team_email": "insurance-tech@lists.lyft.com", "pagerduty_escalation_policy": "Insurance", "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "idl.server", "accidents.legacy"]}, {"name": "integration", "members": ["abacus.dev", "accidents.dev", "account.dev", "ats.qa_approve", "cetconcessions.dev", "chromeheadless.service", "dispatch.dev", "driverloyalty.dev", "drivermode.dev", "driverridesinfo.dev", "etaproxy.dev", "fare.dev", "fleetmanagement.dev", "green.dev", "guardian.dev", "inspolicies.dev", "jobscheduler.dev", "karma.dev", "ledger.dev", "legacyapi.dev", "legacyoauth.dev", "locations.dev", "messaging.dev", "payapi.dev", "places.dev", "push.dev", "ratelimit.dev", "ridehistory.dev", "rides.dev", "ridesapi.dev", "routes.dev", "staticmaps.dev", "supply.dev", "supplyrecords.dev", "supportcontact.dev", "switchboard.dev", "tcs.dev", "telematicsingest.dev", "tripsapi.dev", "usergroups.dev", "userpreferences.dev", "users.dev", "viewport.dev", "wallet.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "accidents.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "accidents.integration", "container": "accidents.legacy", "command": "make test_integration"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "logging": {"accidents": {"fields": {"applicant_is_deactivated": "boolean", "assignment_id": "long", "assignment_created_at": "date", "claim": "keyword", "claim_id": "keyword", "intake_channel": "keyword", "message_template_id": "long", "occurrence_number": "keyword", "claim_number": "keyword", "feature_number": "keyword", "report_id": "long", "response_text": "text", "route_id": "keyword", "telematics_request_id": "long", "ticket_id": "integer", "type": "keyword", "user_id": "long", "vehicle_id": "long", "vehicle_temporarily_deactivated": "boolean", "zendesk_ticket_id": "integer"}}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "accidents"}], "common_settings": {"internal_hosts": {"ats": {"tls_enabled": true}, "cetconcessions": null, "chromeheadless": null, "claims": null, "dispatch": null, "driverridesinfo": null, "fare": null, "fleetmanagement": null, "guardian": null, "inspolicies": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "karma": null, "locations": null, "messaging": null, "places": null, "push": null, "ratelimit": null, "rentals": null, "ridehistory": null, "rides": null, "routes": null, "staticmaps": null, "supply": null, "supplyrecords": {"tls_enabled": true}, "supportcontact": null, "tcs": null, "telematicsingest": null, "users": null}, "external_hosts": {"dynamodb_iad": null}}}}, "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "version": "f5a326a5d6214e46b40d888cac88fb92536af287", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "accidentsint": {"name": "accidentsint", "description": "Web frontend for managing accidents", "repository": "git@github.com:lyft/accidentsint.git", "image_type": "service", "service_tier": 2, "slack": "#insurance", "team_email": "insurance-tech@lists.lyft.com", "pagerduty_escalation_policy": "Insurance FE", "frontend": {"node_version": "10.14.1-1nodesource1"}, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "groups": [{"name": "dev", "members": ["control.dev", "accidents.dev", "accidentsint.legacy"]}, {"name": "e2e", "members": ["accidents.dev", "accidentsint.dev", "acl.dev", "fleetlocations.dev", "fleetmanagement.dev", "places.dev", "rentals.dev", "ridehistory.dev", "supply.dev", "users.dev", "tom.dev", "privacyaudit.dev", "e2etest.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "accidentsint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "cypress", "type": "execution", "group": "accidentsint.e2e", "container": "accidentsint.legacy", "command": "make test_cypress", "autotrigger": false}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "accidentsint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"accidents": null, "acl": null, "fleetlocations": null, "fleetmanagement": null, "places": null, "rentals": null, "ridehistory": null, "supply": null, "users": null, "tom": null, "privacyaudit": null}}}}, "version": "41fb0701627d8f4d8b513d5bd611a8e298cd7ba7", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "account": {"name": "account", "description": "account", "repository": "git@github.com:lyft/account.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "packages": ["libkrb5-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s", "packages": ["libkrb5-dev", "libspatialindex-dev"]}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/account", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "3.5Gi"}}], "facets": [{"name": "main", "member": "account.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 80}}}}, {"name": "canary", "member": "account.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "configsets": ["lbsdata"], "groups": [{"name": "minimal", "members": ["control.dev", "dynamodb.dev", "account.legacy", "regions.dev"]}, {"name": "dev", "members": ["auth.dev", "jobscheduler.dev", "taskqueue.dev", "legacyapi.dev", "legacyoauth.dev", "routesapi.dev", "usergroups.dev", "users.dev", "supply.dev", "publicapi.dev", "account.minimal"]}, {"name": "integration", "members": ["lyfttestlib.ride", "challenges.legacy", "karma.legacy", "lastmile.legacy", "messaging.legacy", "notes.legacy", "push.legacy", "ratelimit.legacy", "switchboard.legacy", "taskqueue.service", "tcs.legacy", "account.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "account.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "virtualenv": "integration_venv", "markers": "not unit_legacy"}, {"name": "integration", "type": "sharded", "group": "account.minimal", "container": "account.legacy", "target": "tests/integration", "virtualenv": "integration_venv", "float_dependencies": "*/30 * * * *", "reports": {"junit": "build/integration.xml"}}, {"name": "karma-upstream-integration", "type": "execution", "group": "account.integration", "container": "account.legacy", "command": "make test_karma_upstream_integration", "autotrigger": false, "reports": {"junit": "build/integration.xml"}}, {"name": "unit_legacy", "type": "execution", "command": "env TEST_TAGS=\"unit_legacy\" make test_unit", "container": "account.legacy", "group": "account.dev", "reports": {"junit": "build/unit.xml"}}], "slack": "#identity-eng", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "identity-eng@lyft.com", "pagerduty_escalation_policy": "Identity Eng", "notification_overrides": {"pr_open": {"slack": "#identity-prs"}, "deploy": {"slack": "#identity-bots"}, "deploy_failure": {"slack": "#identity-bots"}, "test_failure": {"slack": "#identity-bots"}, "master_failure": {"slack": "#identity-bots"}, "pr_merge": {"slack": "#identity-bots"}, "behind_notifications": {"slack": "#identity-bots"}}, "deploy": [{"name": "staging", "bake_time_minutes": 15, "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "bake_time_minutes": 15, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "bake_time_minutes": 15, "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "bake_time_minutes": 15, "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1d"}], {"name": "production", "bake_time_minutes": 15, "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}], "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "service_tier": 0, "languages": ["python"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "account"}], "common_settings": {"internal_hosts": {"auth": null, "account": null, "autonomous": null, "supply": null, "usergroups": null, "users": null, "ratelimit": null, "karma": null, "switchboard": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "jobschedulerurgentweb": null, "taskqueuebulkweb": null, "taskqueuenormalweb": null, "taskqueueurgentweb": null, "lastmile": null, "notes": null, "push": null, "ratings": null, "regions": null, "robocop": null, "routes": null, "routesapi": null, "messaging": null, "tcs": null, "trips": null, "tripsapi": null, "wallet": null, "walletapi": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "authorization": {"permissions": {"v1": {"paths": ["/v1/*"]}, "oauth2": {"paths": ["/oauth2/*"]}, "legacy": {"paths": ["/legacy/*"]}, "authorization_codes": {"paths": ["/v1/authorization_codes"], "methods": ["POST"]}, "phoneauth": {"paths": ["/v1/phoneauth"]}, "update_phonenumber": {"paths": ["/internal/users/phone_number", "/v1/phonenumber"]}, "urm": {"paths": ["/internal/urm_erasure"]}, "v1_readonly": {"paths": ["/v1/*"], "methods": ["GET"]}, "update_email_tokens": {"paths": ["/v1/email/*"], "methods": ["PUT"]}, "cet_authentication": {"paths": ["/internal/email/verification/agent_invalidate", "/internal/phone_tokens*"]}, "shell_users": {"paths": ["/internal/users/shell*"]}, "provisioned": {"paths": ["/internal/users"]}, "scopedurls": {"paths": ["/internal/scopedurls"]}, "read_phone_verification_codes": {"paths": ["/internal/phone_verifications/*"], "methods": ["GET"]}, "connected_identities": {"paths": ["/internal/connected_identities/*"]}, "profiles": {"paths": ["/v1/profiles*"]}, "internal": {"paths": ["/internal/*"], "not_paths": ["/internal/email/verification/agent_invalidate", "/internal/phone_tokens*", "/internal/users/shell*", "/internal/users/phone_number", "/internal/phone_verifications/*", "/internal/connected_identities/*", "/internal/urm_erasure", "/internal/duplicates/*"]}, "duplicate_accounts": {"paths": ["/internal/duplicates/*"]}}, "bindings": {"envoy": ["v1", "oauth2", "legacy"], "*": ["internal"], "accountfrontend": ["authorization_codes", "v1_readonly", "phoneauth", "update_email_tokens", "profiles"], "tom": ["phoneauth", "cet_authentication", "update_phonenumber", "connected_identities", "profiles"], "enterprise": ["shell_users", "provisioned", "scopedurls"], "legacyapi": ["phoneauth", "update_phonenumber"], "simulatedrides": ["read_phone_verification_codes", "update_phonenumber"], "testusermanager": ["read_phone_verification_codes", "update_phonenumber"], "lastmile": ["connected_identities", "shell_users"], "taskqueuenormal": ["urm"], "bikesharefe": ["oauth2"], "riderweb": ["oauth2", "v1_readonly"], "userprivacyrights": ["duplicate_accounts"], "migrationworkers": ["update_phonenumber"]}}}}}, "logging": {"account": {"fields": {"error": "keyword", "error_class": "keyword", "error_stat": "keyword", "error_description": "keyword", "error_code": "long", "error_grpc_code": "long", "error_message": "text", "ip_address": "keyword", "platform_version": "keyword", "user_agent": "keyword", "http_id": "keyword", "forwarded_for": "keyword", "downstream_service_cluster": "keyword", "app_name": "keyword", "platform": "keyword", "event_name": "keyword", "app_version": "keyword", "display_locale_config_country": "keyword", "accept_language": "keyword", "request_client_id": "keyword", "user_lyft_id": "keyword", "device": "keyword", "carrier": "keyword", "lat": "float", "lng": "float", "request_session_id": "keyword", "apple_advertising_id": "keyword", "vendor_id": "keyword", "refresh_token_hash": "keyword", "status": "keyword", "client_id": "keyword", "grant_type": "keyword", "session_id": "keyword", "scope_names": "keyword", "access_token_hash": "keyword", "scope_bitmap_str": "keyword", "expires_in": "long", "endpoint": "keyword", "method": "keyword", "response_code": "long", "android_id": "keyword", "android_advertising_id": "keyword", "input_refresh_token_hash": "keyword", "phone_number": "keyword", "os_version": "keyword", "email": "keyword", "sticky_lyft_browser_id": "keyword", "source": "keyword", "purpose": "keyword", "action": "keyword", "token_public_key": "keyword", "token_private_key": "keyword", "origin": "keyword", "url": "keyword", "phone_code": "keyword", "request_headers": "keyword", "response_headers": "keyword", "is_simulated_ride": "boolean", "user_id": "keyword", "transformed_type": "keyword", "response_body": "keyword", "expires_at": "date", "phone_code_expected": "keyword", "unique_failed_attempts": "long", "phone_code_attempted": "keyword", "allow": "boolean", "chosen_input_country": "keyword", "chosen_input_parameter": "keyword", "ip_address_lat": "float", "ip_address_lng": "float", "accept_language_country": "keyword", "message_id": "keyword", "ip_address_country": "keyword", "phone": "keyword", "handler": "keyword", "event": "keyword", "side_effect_categories": "keyword", "user_obscured_id": "keyword", "to": "keyword", "success": "boolean", "to_driver": "boolean", "verification_code_length": "long", "verification_code": "keyword", "additional_template_parameters": {"driver": "boolean", "code": "keyword", "hash_string": "keyword", "brand": "keyword"}, "template": "keyword", "phone_code_consumed_at_ms": "keyword", "approved_driver": "boolean", "obscured_id": "keyword", "phone_auth": "boolean", "phone_code_set_at_ms": "keyword", "ms_since_rotation": "long", "reason": "keyword", "auth_type": "keyword", "post_exact_email_match": "boolean", "lyft_com": "boolean", "result": "keyword", "scrresult": "keyword", "expected_scrresult": "keyword", "client_version": "keyword"}}}, "version": "7d0cbb8ded1cb933f17d815521c23c010d0742d8", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "accountfrontend": {"name": "accountfrontend", "description": "This is the frontend service for the login flow of lyft.com", "repository": "git@github.com:lyft/accountfrontend.git", "credentials": true, "languages": ["javascript"], "custom": {"service_type": "nodejs", "internal_service": false, "frontend_service": true, "browserstack": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}], "limits": {"environment": {"development": {"memory": "2Gi"}}}}, {"name": "frontendi18n", "command": "make frontend_i18n"}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "workdir": "/code/accountfrontend", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "cdnupload", "command": "/code/accountfrontend/cdn-upload", "workdir": "/code/accountfrontend", "sub_image": "k8s"}, {"name": "bugsnag", "command": "/code/accountfrontend/bugsnag-upload.js", "workdir": "/code/accountfrontend", "sub_image": "k8s"}], "slack": "#identity-eng", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "identity-eng@lyft.com", "pagerduty_escalation_policy": "Identity Eng", "notification_overrides": {"pr_open": {"slack": "#identity-prs"}, "deploy": {"slack": "#identity-bots"}, "deploy_failure": {"slack": "#identity-bots"}, "test_failure": {"slack": "#identity-bots"}, "master_failure": {"slack": "#identity-bots"}, "pr_merge": {"slack": "#identity-bots"}, "behind_notifications": {"slack": "#identity-bots"}}, "test_logs": ["/code/accountfrontend/test/e2e/cypress/testResults.zip"], "groups": [{"name": "dev", "members": ["control.dev", "accountfrontend.legacy", "account.dev", "challenges.dev", "publicapi.dev"]}, {"name": "only", "members": ["control.dev", "accountfrontend.legacy"]}, {"name": "integration", "members": ["control.dev", "brochure.dev", "accountfrontend.legacy", "account.integration", "challenges.dev", "brandfe.dev", "wwwreferralsfe.dev", "wwwidentityfe.dev", "wwwdriverengagementfe.dev", "driverfrontend.integration"]}, {"name": "e2e", "members": ["accountfrontend.integration", "e2etest.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "accountfrontend.only"}, {"name": "unit", "type": "jailed", "command": "make test_coverage", "reports": {"cobertura": ".coverage/cobertura-coverage.xml"}}, {"name": "lint", "type": "jailed", "command": "make test_lint"}, {"name": "tsc", "type": "execution", "container": "accountfrontend.legacy", "group": "accountfrontend.only", "command": "make test_tsc"}, {"name": "e2e_ie_auth", "type": "execution", "group": "accountfrontend.e2e", "container": "accountfrontend.legacy", "command": "make test_e2e browser=ie suite=auth", "reports": {"junit": "test/results/protractor-results-ie.xml"}, "skip_threshold": null}, {"name": "e2e_chrome_oauth", "type": "execution", "group": "accountfrontend.e2e", "container": "accountfrontend.legacy", "command": "make test_e2e browser=chrome suite=oauth", "reports": {"junit": "test/results/protractor-results-chrome.xml"}, "skip_threshold": null}, {"name": "cypress", "type": "execution", "group": "accountfrontend.e2e", "container": "accountfrontend.legacy", "command": "make test_cypress", "autotrigger": false}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}, {"facet": "bugsnag"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"legacy": false, "name": "production", "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "pulldeploy_components": {"data": ["translationdata"]}, "image_type": "service", "service_tier": 1, "envoy": {"profile": "python", "settings": {"services": [{"name": "accountfrontend"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"account": null, "lastmile": null, "challenges": null, "robocop": null, "www2": null, "users": null, "tcs": null, "userprivacyrights": null}}}}, "logging": {"accountfrontend": {"fields": {"downstreamServiceCluster": "keyword", "eventName": "keyword", "userAgent": "keyword", "httpId": "keyword", "datedLyftVersion": "date", "source": "keyword", "forwardedFor": "keyword", "clientId": "keyword", "ipAddress": "keyword", "path": "keyword", "acceptLanguage": "keyword", "referer": "keyword", "stickyLyftBrowserId": "keyword", "requestSessionId": "keyword", "userLyftId": "keyword", "origin": "keyword", "carrier": "keyword", "payload": "keyword", "tagName": "keyword", "error": "keyword", "errorDescription": "keyword", "status": "keyword", "message": "keyword", "stackTrace": "keyword", "err": "keyword", "droppedParams": "keyword"}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2inode:service.835f87582b1b091b3ef8895d577ba3439540abbe", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/opsbase:bd8615cdc0a53fe60b894b4b0cc3447deeb0e366"}}]}}, "facets": [{"name": "main", "member": "accountfrontend.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 1, "max_size": 10}}}}, {"name": "canary", "member": "accountfrontend.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "assets", "member": "accountfrontend.cdnupload", "type": "job"}, {"name": "bugsnag", "member": "accountfrontend.bugsnag", "type": "job"}], "version": "fd1712368d5769b17baa32851f4603bdaa8b44d1", "images": [{"parent": {"name": "s2inode", "version": "835f87582b1b091b3ef8895d577ba3439540abbe", "sub_image": "service", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "bd8615cdc0a53fe60b894b4b0cc3447deeb0e366", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "bd8615cdc0a53fe60b894b4b0cc3447deeb0e366", "sub_image": null, "external": false}}, "acl": {"name": "acl", "description": "acl", "repository": "git@github.com:lyft/acl.git", "credentials": true, "restricted_ssh": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "elasticsearch5.server", "dynamodb.dev", "dynamostreams.dev", "acl.legacy"]}, {"name": "devextended", "members": ["acl.dev", "team.dev", "tom.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "acl.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy"}, {"name": "integration", "type": "execution", "group": "acl.dev", "container": "acl.legacy", "command": "make test_integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "command": "make test_unit", "container": "acl.legacy", "group": "acl.dev"}], "slack": "#data-privacy", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "team_email": "data-privacy@lyft.com", "pagerduty_escalation_policy": "Data Privacy", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "languages": ["python"], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "acl"}, {"name": "aclbatch"}], "common_settings": {"internal_hosts": {"ats": null, "dataaclsync": null, "team": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "s3_iad": null}, "redis": {"aclmultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}}}}, "logging": {"aclbatch": {"fields": {"access_platform": "keyword", "number": "long", "percentage": "keyword", "status": "keyword", "pending_action_object": "keyword", "roles_count": "long", "policies_count": "long", "user_roles_count": "long", "success": "long", "fail": "long", "user_email": "keyword", "policy_name": "keyword", "action": "keyword", "duration": "float", "role_id": "keyword", "policy": "keyword", "role": "keyword"}}, "acl": {"fields": {"actionName": "keyword", "ipAddress": "keyword", "actor": "keyword", "actionId": "keyword", "field_value": "keyword", "field_name": "keyword", "event_name": "keyword", "error_msg": "keyword", "error_id": "keyword"}}}, "version": "442a7d58e77a7130ed042ff66dbcc3d25af5a114", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "acqincentivesint": {"name": "acqincentivesint", "description": "Internal fe service for Acq Incentives, routed through TOM", "repository": "git@github.com:lyft/acqincentivesint.git", "slack": "#acq-incentives", "team_email": "acq-incentives-referrals@lyft.com", "pagerduty_escalation_policy": "Referrals Team", "notification_overrides": {"deploy": {"slack": "#acq-incentives-bot", "environments": ["production", "canary", "staging"]}, "deploy_failure": {"slack": "#acq-incentives-bot"}, "test_failure": {"slack": "#acq-incentives-bot", "email": "acq-incentives-referrals@lyft.com", "environments": ["production"]}, "master_failure": {"slack": "#acq-incentives-bot"}, "pr_merge": {"slack": "#acq-incentives-bot"}, "pr_open": {"slack": "#acq-incentives-bot"}}, "image_type": "service", "service_tier": 2, "languages": ["javascript"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1"}}, {"name": "s2i", "params": {"builder": "lyft/s2inode:service.ad369582d1c73c8045efe81df145d6bc035819bc", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "cdnupload", "command": "/code/acqincentivesint/cdn-upload", "sub_image": "k8s"}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "acqincentivesint.legacy"]}, {"name": "service_group", "members": ["acqincentivesint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "acqincentivesint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "facets": [{"name": "assets", "member": "feexample.cdnupload", "type": "job"}, {"name": "main", "member": "acqincentivesint.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "acqincentivesint.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "acqincentivesint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null, "tom": null, "flexibleincentives": null}}}}, "version": "e6df727956f7ab35e346256c87be85993b423c99", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2inode", "version": "ad369582d1c73c8045efe81df145d6bc035819bc", "sub_image": "service", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "acquisitionbonuses": {"name": "acquisitionbonuses", "description": "Service that handles acquisition bonuses management, validation and opt-in", "repository": "git@github.com:lyft/acquisitionbonuses.git", "slack": "#acq-incentives", "team_email": "acq-incentives-referrals@lyft.com", "pagerduty_escalation_policy": "Referrals Team", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "notification_overrides": {"deploy": {"slack": "#acq-incentives-bot", "environments": ["production", "canary", "staging"]}, "deploy_failure": {"slack": "#acq-incentives-bot"}, "test_failure": {"slack": "#acq-incentives-bot", "email": "acq-incentives-referrals@lyft.com", "environments": ["production"]}, "master_failure": {"slack": "#acq-incentives-bot"}, "pr_merge": {"slack": "#acq-incentives-bot"}, "pr_open": {"slack": "#acq-incentives-bot"}}, "credentials": false, "pulldeploy_components": {"data": ["regioncfgdata"]}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/acquisitionbonuses", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}], "logging": {"format": "pythonkv"}}], "groups": [{"name": "dev", "members": ["control.dev", "flexibleincentives.dev", "acquisitionbonuses.legacy", "dynamodb.server"]}, {"name": "oneboxtest", "members": ["acquisitionbonuses.dev", "driverfrontend.integration", "brochure.dev", "adtechint.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "acquisitionbonuses.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "acquisitionbonuses.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 10}}}}, {"name": "canary", "member": "acquisitionbonuses.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "python": {"exclude": ["tests", "ops"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "acquisitionbonuses"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"flexibleincentives": null, "regions": null, "tcs": null, "usergroups": null, "users": null}}}}, "version": "8577ee8ebd7abf798af6e48ae9e8e71a5a80a015", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "acquisitionguarantees": {"name": "acquisitionguarantees", "description": "service used to orchestrate paid-acq, referral guarantees for acquisition", "repository": "git@github.com:lyft/acquisitionguarantees.git", "image_type": "service", "service_tier": 1, "slack": "#acq-incentives", "team_email": "acq-incentives-referrals@lyft.com", "pagerduty_escalation_policy": "Referrals Team", "languages": ["python"], "notification_overrides": {"deploy": {"slack": "#acq-incentives-bot", "environments": ["production", "canary", "staging"]}, "deploy_failure": {"slack": "#acq-incentives-bot"}, "test_failure": {"slack": "#acq-incentives-bot", "email": "acq-incentives-referrals@lyft.com", "environments": ["production"]}, "master_failure": {"slack": "#acq-incentives-bot"}, "pr_merge": {"slack": "#acq-incentives-bot"}, "pr_open": {"slack": "#acq-incentives-bot"}}, "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi"}}], "facets": [{"name": "main", "member": "acquisitionguarantees.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 10}}}}, {"name": "canary", "member": "acquisitionguarantees.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "acquisitionguarantees.legacy", "incentiveguarantees.dev", "mailer.dev"]}, {"name": "integration", "members": ["acquisitionguarantees.legacy", "incentiveguarantees.dev", "mailer.dev", "users.dev", "jobscheduler.dev", "tcs.dev", "usergroups.dev", "ats.qa_approve"]}], "tests": [{"name": "startup", "type": "startup", "group": "acquisitionguarantees.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "container": "acquisitionguarantees.legacy", "group": "acquisitionguarantees.integration", "command": "make test_integration", "reports": {"junit": "build/local_integration.xml"}}, {"name": "coverage", "type": "execution", "container": "acquisitionguarantees.legacy", "group": "acquisitionguarantees.integration", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "acquisitionguarantees"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 900}}}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "internal_hosts": {"mailer": null, "messaging": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "users": null, "regions": null, "tcs": null, "incentiveguarantees": null, "supply": null, "supplyrecords": {"tls_enabled": true}}}}}, "logging": {"acquisitionguarantees": {"fields": {"exception": {"class": "keyword", "message": "keyword"}, "data": {"from": "keyword", "subject": "keyword", "to": "keyword", "body": "keyword"}, "code": "keyword", "guarantees_type": "keyword"}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}, {"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "version": "718c29e43478f94d11863a6e18344b658ee06a6c", "images": [{"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "adhocinfra": {"name": "adhocinfra", "repository": "git@github.com:lyft/adhocinfra.git", "description": "Interface to handle ad-hoc infrastructure modifications", "service_tier": 1, "team_email": "server-resilience-team@lyft.com", "pagerduty_escalation_policy": "Resilience", "slack": "#server-resilience-bots", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2igo:2ec402e660186711ad25f0b91c107ae9dc33d312", "sources": [{"name": "confluent", "source": "deb https://packages.confluent.io/deb/5.2 stable main", "keyid": 41468433}, {"name": "yarnpkg", "source": "deb https://dl.yarnpkg.com/debian/ stable main", "keyid": "72ECF46A56B4AD39C907BBB71646B01B86E50310"}, {"name": "nodesource", "source": "deb https://deb.nodesource.com/node_12.x bionic main", "keyid": "9FD3B784BC1C6FC31A8A0A1C1655A0AB68576280"}], "packages": ["git", "unzip", "librdkafka-dev", "nodejs", "pkg-config", "yarn"]}}]}}, "containers": [{"name": "service", "command": "dumb-init -- adhocinfra", "workdir": "/code/adhocinfra", "limits": {"cpu": 2, "memory": "2Gi"}, "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "adhocinfra.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "adhocinfra.dev"}, {"name": "unit", "type": "jailed", "command": "make unit", "autotrigger": false}, {"name": "integration", "type": "jailed", "command": "make integration", "autotrigger": false}, {"name": "coverage", "type": "jailed", "command": "make backend-coverage", "reports": {"cobertura": "build/coverage.xml"}, "autotrigger": false}], "facets": [{"name": "main", "member": "adhocinfra.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "adhocinfra.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "rtds", "member": "adhocinfra.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/rtds.yaml"], "sidecars": ["iamwait", "heka", "fluentbit", "statsd", "runtimepull"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}, {"facet": "rtds"}], "automatic": true}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {"internal_hosts": {"acl": null, "omnibot": null}}, "services": [{"name": "adhocinfra"}]}}, "version": "d4abeecd83673d069772c317739b159f8067797d", "images": [{"parent": {"name": "s2igo", "version": "2ec402e660186711ad25f0b91c107ae9dc33d312", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igo", "version": "2ec402e660186711ad25f0b91c107ae9dc33d312", "sub_image": null, "external": false}}, "adtech": {"name": "adtech", "description": "adtech", "repository": "git@github.com:lyft/adtech.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "redis.server", "kinesis.server", "adtech.legacy", "jobscheduler.dev", "analyticsingest.dev", "fanner.dev"]}, {"name": "integration", "members": ["adtech.dev", "taskqueue.dev"]}], "tests": [{"name": "start", "type": "startup", "group": "adtech.dev"}, {"name": "unit", "type": "execution", "group": "adtech.dev", "container": "adtech.legacy", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "adtech.integration", "container": "adtech.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "team_email": "symphony-team@lyft.com", "pagerduty_escalation_policy": "AdTech", "slack": "#symphony-eng", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "pulldeploy_components": {"data": ["regioncfgdata"]}, "languages": ["python"], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "adtech"}, {"name": "adtechbatch"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "kinesis_iad": null, "firehose_iad": null}, "internal_hosts": {"adtech": null, "jobschedulerbulkweb": null, "taskqueuebulkweb": null, "places": null, "regions": null, "mailer": null}, "redis": {"adtechmultiredis": {"port": 6380}}}, "override_settings": [{"services": [{"name": "adtech"}], "settings": {"internal_hosts": {"ats": null, "adtechworkflows": null, "venues": null, "users": null}}}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}]}}, "logging": {"adtech": {"fields": {"search_result_path": "keyword", "parsed_post_url_path": "keyword", "search_result_path_match_groups": "keyword", "post_path_match_groups": "keyword", "position": "long", "range": "keyword", "majorDimension": "keyword", "values": "keyword", "partner": "keyword", "region": "keyword", "campaign_id": "keyword", "campaign": "keyword", "account_id": "keyword"}}}, "version": "068bcce81d1c3304d29622b535a70166fa228af8", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "adtechint": {"name": "adtechint", "description": "TODO short description of the service", "repository": "git@github.com:lyft/adtechint.git", "credentials": false, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "groups": [{"name": "dev", "members": ["control.dev", "adtechint.legacy", "tom.dev"]}, {"name": "symphony", "members": ["adtechint.dev", "martechscoring.dev"]}, {"name": "adtech", "members": ["adtechint.dev", "adtech.legacy"]}], "slack": "#symphony-eng", "team_email": "symphony-team@lyft.com", "pagerduty_escalation_policy": "AdTech", "tests": [{"name": "startup", "type": "startup", "group": "adtechint.dev"}, {"name": "unit", "type": "execution", "group": "adtechint.dev", "container": "adtechint.legacy", "command": "make test_coverage"}, {"name": "lint", "type": "execution", "group": "adtechint.dev", "container": "adtechint.legacy", "command": "make test_lint"}], "deploy": [{"name": "staging", "automatic": true, "legacy": true}, {"name": "canary", "legacy": true}, {"name": "production", "legacy": true}], "service_tier": 2, "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "adtechint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"tom": null}}}}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "version": "ccc2f4fe20b5359daa58b3c6c69352ab9208e6ac", "images": [{"parent": {"name": "opsbase", "version": "0c837dfacbd7f05fcf198360f85e539c2ae9b297", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "0c837dfacbd7f05fcf198360f85e539c2ae9b297", "sub_image": null, "external": false}}, "adtechworkflows": {"name": "adtechworkflows", "description": "adtechworkflows", "repository": "git@github.com:lyft/adtechworkflows.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "sqs.server", "adtechworkflows.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "adtechworkflows.dev"}, {"name": "unit", "type": "execution", "group": "adtechworkflows.dev", "container": "adtechworkflows.legacy", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#organic-traffic-bots", "team_email": "organic-traffic@lyft.com", "pagerduty_escalation_policy": "Web UX", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "pulldeploy_components": {"data": ["regioncfgdata"]}, "languages": ["python"], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "adtechworkflows"}], "common_settings": {"internal_hosts": {"adtech": null, "coupons": null, "enterprise": null, "gmapsmobile": null, "jobschedulernormalweb": null, "jobschedulerbulkweb": null, "messaging": null, "regions": null, "users": null, "usergroups": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null, "firehose_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "version": "380fbb2fbe85af934169fcb4feb510ef56987ed6", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "airflowinfra": {"name": "airflowinfra", "description": "Defines the infrastructure for Airflow at Lyft", "repository": "git@github.com:lyft/airflowinfra.git", "slack": "#data-platform", "team_email": "dp-tools@lyft.com", "pagerduty_escalation_policy": "Data Platform Tools", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s", "packages": ["libmysqlclient-dev", "libsasl2-dev", "libcurl4-openssl-dev", "libssl-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "web", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn \"airflow.www_rbac.app:cached_app()\" -b 0.0.0.0:8080 --workers=1 -k gevent --worker-connections=1000 --backlog=1000 -c /etc/gunicorn/gunicorn.conf -t 90", "workdir": "/code/airflowinfra", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "web", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "airflowinfra.legacy", "sqs.dev"]}, {"name": "service_group", "members": ["airflowinfra.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "airflowinfra.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "dag_bag", "command": "service_venv python3 -m pytest tests/dag_bag/", "type": "execution", "group": "airflowinfra.dev", "container": "airflowinfra.legacy"}, {"name": "terraform-checkformat", "type": "tool", "tool": "terraform.checkformat"}, {"name": "terraform-validate", "type": "tool", "tool": "terraform.validate"}], "facets": [{"name": "main", "member": "airflowinfra.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "airflowinfra.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "orca": [{"region": "iad"}], "legacy": true, "bake_time_minutes": 5, "kubernetes": {"enabled": false}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "production", "orca": [{"region": "iad"}], "legacy": true, "kubernetes": {"enabled": false}, "targets": [{"facet": "main"}]}], "orchestrate": {"types": [{"name": "terraform"}], "steps": [{"name": "staging"}, {"name": "production"}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "airflowinfra"}, {"name": "airflowinfraweb"}, {"name": "airflowinfrascheduler"}, {"name": "airflowinfraworker"}, {"name": "airflowinfrazippyworker"}, {"name": "airflowinfracdwworker"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080"}}, "override_settings": [{"services": [{"name": "airflowinfraweb"}], "settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "health_check_endpoint": "/health"}}]}}, "configsets": ["dataplatformairflow", "corpdataetl", "zippyworkflows"], "version": "589badc1ac98ff9e3bdaa21381679cd21fe20212", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "airflowk8s": {"name": "airflowk8s", "description": "Build Airflow infrastructure on Kubernetes", "repository": "git@github.com:lyft/airflowk8s.git", "slack": "#data-platform-dev", "team_email": "dp-exp@lyft.com", "pagerduty_escalation_policy": "Data Platform Tools", "image_type": "service", "service_tier": 2, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:c3d1ec589b89ef05df07a19a1469f415656d1414", "packages": ["libmysqlclient-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit", "packages": ["libmysqlclient-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "k8s", "packages": ["libmysqlclient-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "airflowk8s.legacy"]}, {"name": "service_group", "members": ["airflowk8s.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "airflowk8s.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "airflowk8s.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "airflowk8s.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "airflowk8s"}]}}, "version": "8e9d2ad9a126ce15f2da56ed9fad84df902bbc19", "images": [{"parent": {"name": "opsbase", "version": "c3d1ec589b89ef05df07a19a1469f415656d1414", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "c3d1ec589b89ef05df07a19a1469f415656d1414", "sub_image": null, "external": false}}, "airportreport": {"name": "airportreport", "description": "airportreport", "repository": "git@github.com:lyft/airportreport.git", "image_type": "service", "service_tier": 3, "slack": "#airportreporting", "team_email": "bnorquist@lyft.com", "pagerduty_escalation_policy": "Airports and Venues", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/airportreport", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "256Mi"}}, {"name": "ingestjob", "command": "dumb-init -- service_venv python manage.py ingest_config", "workdir": "/code/airportreport", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "128Mi"}}, {"name": "syncjob", "command": "dumb-init -- service_venv rclone_sync.sh", "workdir": "/code/airportreport", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}], "facets": [{"name": "main", "member": "airportreport.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 1, "max_size": 2}}}}, {"name": "canary", "member": "airportreport.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "ingestcron", "member": "airportreport.ingestjob", "type": "cron", "schedule": "*/10 * * * *"}, {"name": "synccron", "member": "airportreport.syncjob", "type": "cron", "schedule": "0,30 * * * *", "concurrency_policy": "Replace"}], "groups": [{"name": "dev", "members": ["control.dev", "airportreport.legacy", "omnibot.dev", "acl.dev"]}, {"name": "integration", "members": ["airportreport.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "airportreport.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "sharded", "group": "airportreport.integration", "container": "airportreport.legacy", "virtualenv": "service_venv", "skip_threshold": 3, "target": "tests/integration/", "command": "make test_integration", "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "ingestcron"}], "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "ingestcron"}, {"facet": "synccron"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "airportreport"}, {"name": "airportreportbatch"}], "common_settings": {"external_hosts": {"s3_iad": null}, "internal_hosts": {"omnibot": null, "acl": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:deb42d25da0e6d5fe565c019883e458b4b31b696", "packages": ["openssl", "unzip"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:2e7f74dccb4f71399c43b46feeaf2f6ce89561f9", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s", "packages": ["openssl", "unzip"]}}]}}, "logging": {"airportreport": {"fields": {"message": "keyword"}}, "airportreportbatch": {"fields": {"worksheet_name": "keyword", "credential_path": "keyword", "error": "keyword"}}}, "version": "5ed85fd1bfd640d190c6443c4fa51590e1b7e596", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "2e7f74dccb4f71399c43b46feeaf2f6ce89561f9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "alerts": {"name": "alerts", "repository": "git@github.com:lyft/alerts.git", "description": "Service to schedule and perform evaluations of alert conditions", "service_tier": 2, "team_email": "observability-visibility-team@lyft.com", "pagerduty_escalation_policy": "Observability Visibility", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#observabot"}, "pr_merge": {"slack": "#observabot"}}, "slack_deploy_notification_environments": ["staging", "canary", "production"], "image_type": "service", "languages": ["go"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s", "packages": ["postgresql-client-10"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "scheduler", "command": "dumb-init -- alerts", "workdir": "/code/alerts", "limits": {"cpu": 1, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600}, {"name": "evaluator", "command": "dumb-init -- evaluator", "workdir": "/code/alerts", "limits": {"cpu": 1, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "postgresql10.dev", "alerts.legacy", "distributedlock.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "alerts.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "alerts.dev", "container": "alerts.legacy", "command": "make integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "scheduler", "member": "alerts.scheduler", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "canaryevaluator", "member": "alerts.evaluator", "type": "service", "envoy_service": "alertsevaluator", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "evaluator", "member": "alerts.evaluator", "type": "service", "envoy_service": "alertsevaluator", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 4}}}}], "deploy": [[{"name": "staging-scheduler", "legacy": false, "automatic": false, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "scheduler"}], "bake_time_minutes": 0}, {"name": "staging-evaluator", "legacy": false, "automatic": false, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "evaluator"}], "bake_time_minutes": 0}], [{"name": "production-us-east-1a-scheduler", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "scheduler"}], "availability_zone": "us-east-1a", "bake_time_minutes": 0}, {"name": "canary-evaluator", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canaryevaluator"}], "orca": [{"region": "iad"}], "bake_time_minutes": 0}], [{"name": "production-us-east-1a-evaluator", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "evaluator"}], "availability_zone": "us-east-1a", "bake_time_minutes": 0}, {"name": "production-us-east-1d-evaluator", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "evaluator"}], "availability_zone": "us-east-1d", "bake_time_minutes": 0}, {"name": "production-scheduler", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "scheduler"}], "bake_time_minutes": 0}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "evaluator"}], "bake_time_minutes": 0}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "alerts"}, {"name": "alertsevaluator"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"distributedlock": null, "alerts": null, "alertsevaluator": null}}}}, "logging": {"alerts": {"fields": {"query": "keyword"}}}, "version": "c92568ebe7c0464c8194f602d8748134de11d5ee", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "alertsapi": {"name": "alertsapi", "repository": "git@github.com:lyft/alertsapi.git", "description": "Storage service that provides an API to manage alerts", "service_tier": 1, "team_email": "observability-visibility-team@lyft.com", "pagerduty_escalation_policy": "Observability Visibility", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#observabot"}, "pr_merge": {"slack": "#observabot"}}, "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2igocli:bbd7ec3456c618780036beaa76fd599b54a538f3", "sub_image": "k8s", "packages": ["postgresql-client-10"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- alertsapi", "workdir": "/code/alertsapi", "limits": {"cpu": 1, "memory": "512Mi"}, "exports": [{"port": 8080}, {"port": 8081}], "sub_image": "k8s", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600}, {"name": "slajob", "command": "go run cron/create_daily_sla_report.go", "workdir": "/code/alertsapi", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "postgresql10.dev", "alertsapi.legacy"]}, {"name": "integration", "members": ["control.dev", "dynamodb.dev", "postgresql10.dev", "alertsapi.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "alertsapi.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "alertsapi.integration", "container": "alertsapi.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "alertsapi.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls"], "sidecars": ["statsd", "envoy"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "alertsapi.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls"], "sidecars": ["statsd", "envoy"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "slacronjob", "member": "alertsapi.slajob", "type": "cron", "schedule": "0 10 * * *"}], "deploy": [[{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true, "mode": "mixed"}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}, {"facet": "slacronjob"}]}], {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], [{"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "slacronjob"}]}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "alertsapi"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}}}}, "version": "431141b5f6379ed7e3d7087c92b938ebc230e85f", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "bbd7ec3456c618780036beaa76fd599b54a538f3", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "alertsint": {"name": "alertsint", "description": "Internal front end for alerts service", "repository": "git@github.com:lyft/alertsint.git", "team_email": "observability-visibility-team@lyft.com", "pagerduty_escalation_policy": "Observability Visibility", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#observabot"}, "pr_merge": {"slack": "#observabot"}}, "image_type": "service", "service_tier": 2, "languages": ["javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "workdir": "/code/alertsint", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "cdnupload", "command": "/code/alertsint/cdn-upload", "workdir": "/code/alertsint", "sub_image": "k8s"}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "alertsapi.dev", "alertsint.legacy"]}, {"name": "service_group", "members": ["alertsint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "alertsint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "automatic": true, "bake_time_minutes": 10, "orca": [{"region": "iad"}], "legacy": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": true, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}], "deploy_settings": {"window_start": "08:30 America/New_York", "window_end": "16:00 America/Los_Angeles"}, "envoy": {"profile": "python", "settings": {"services": [{"name": "alertsint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null, "alertsapi": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2inode:service.f633733a7fe0e80669ecd9bb6ee09b12d06a9666", "sub_image": "k8s"}}, {"name": "docker_build"}]}}, "facets": [{"name": "main", "member": "alertsint.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 5, "max_size": 5}}}}, {"name": "canary", "member": "alertsint.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "assets", "member": "alertsint.cdnupload", "type": "job"}], "version": "0556ed24c06d34b8280e2168cc06ae14f2eefdbc", "images": [{"parent": {"name": "s2inode", "version": "f633733a7fe0e80669ecd9bb6ee09b12d06a9666", "sub_image": "service", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "alertslib": {"name": "alertslib", "repository": "git@github.com:lyft/alertslib.git", "description": "Shared alerts code", "team_email": "observability-visibility-team@lyft.com", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#observabot"}, "pr_merge": {"slack": "#observabot"}}, "image_type": "library", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "provision": "/code/ops/base/starters/post_starters.sh", "command": "/code/ops/base/entrypoint.sh"}, {"name": "service", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "postgresql10.dev", "alertslib.legacy"]}], "tests": [{"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "alertslib.dev", "container": "alertslib.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false}, {"name": "production", "legacy": false, "automatic": true}], "envoy": {"profile": "go", "settings": {"services": [{"name": "alertslib"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}}}}, "version": "8ade3fdba80ff0aecc3265c0306c28f2b6726338", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "ambassador": {"name": "ambassador", "description": "ambassador", "repository": "git@github.com:lyft/ambassador.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:1de17b2c133a84a6096806ef9ba985a9ac009b54", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "notification_overrides": {"deploy": {"slack": "#acq-incentives-bot", "environments": ["production", "canary", "staging"]}, "deploy_failure": {"slack": "#acq-incentives-bot"}, "test_failure": {"slack": "#acq-incentives-bot", "email": "acq-incentives-referrals@lyft.com", "environments": ["production"]}, "master_failure": {"slack": "#acq-incentives-bot"}, "pr_merge": {"slack": "#acq-incentives-bot"}, "pr_open": {"slack": "#acq-incentives-bot"}}, "groups": [{"name": "dev", "members": ["control.dev", "redis.server", "mongodb.server", "usergroups.dev", "sqs.server", "ambassador.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "ambassador.dev"}, {"name": "unit", "type": "execution", "group": "ambassador.dev", "container": "ambassador.legacy", "command": "make test_unit", "reports": {"junit": "build/unit.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#acq-incentives", "team_email": "acquisition-eng@lyft.com", "pagerduty_escalation_policy": "Referrals Team", "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d"}, {"legacy": false, "name": "production"}]], "pulldeploy_components": {"data": ["regioncfgdata"]}, "languages": ["python"], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "ambassador"}], "common_settings": {"internal_hosts": {"ambassador": null, "ats": null, "coupons": null, "enterprise": null, "invites": null, "jobschedulerbulkweb": null, "jobschedulerbulkwebloadtest": null, "ledger": null, "mailer": null, "regions": null, "rentals": null, "rides": null, "supply": null, "tcs": null, "usergroups": null, "users": null, "www2": null}, "external_hosts": {"kinesis_iad": null}}}}, "version": "cf40d3b2be6dd9e4ee55d95070f43d257ac0ae74", "images": [{"parent": {"name": "opsbase", "version": "ce84eccb6431b0bcb1d7cc365ed8b131f35a748c", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "1de17b2c133a84a6096806ef9ba985a9ac009b54", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "ce84eccb6431b0bcb1d7cc365ed8b131f35a748c", "sub_image": null, "external": false}}, "amp": {"name": "amp", "description": "amp", "slack": "#driver-labs-bot", "team_email": "driver-labs-eng@lyft.com", "pagerduty_escalation_policy": "Amp service", "repository": "git@github.com:lyft/amp.git", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "idl.server", "amp.legacy"]}, {"name": "integration", "members": ["amp.dev", "usergroups.dev", "driverridesinfo.dev", "supplyrecords.dev", "logistics.dev", "loyaltytiers.dev"]}], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "tests": [{"name": "startup", "type": "startup", "group": "amp.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "env TEST_TAGS=\"not unit_legacy\" make test_unit"}, {"name": "unit_legacy", "type": "execution", "group": "amp.integration", "container": "amp.legacy", "command": "env TEST_TAGS=\"unit_legacy\" make test_unit", "reports": {"junit": "build/unit.xml"}}, {"name": "coverage", "type": "execution", "container": "amp.legacy", "group": "amp.integration", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "command": "make test_integration", "container": "amp.legacy", "group": "amp.integration", "run_in_pr": true, "run_in_dev": true, "reports": {"junit": "build/integration.xml"}}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "amp"}, {"name": "ampbatch"}], "common_settings": {"internal_hosts": {"ledger": null, "logistics": null, "push": null, "ratelimit": null, "regions": null, "rentals": null, "rides": null, "supply": null, "usergroups": null, "driverridesinfo": null, "loyaltytiers": null, "messaging": null, "jobschedulerbulkweb": null, "tcs": null, "supplyrecords": null, "users": null, "ats": null}, "external_hosts": {"firehose_iad": null, "dynamodb_iad": null}}}}, "logging": {"amp": {"fields": {"service": "keyword", "error": "keyword", "ride_id": "keyword", "user_id": "keyword", "status_code": "long", "sent_delight_notification": "boolean", "amp_incentive_id": "keyword", "driver_id": "keyword", "message": "keyword", "error_code": "long", "response": "keyword"}}}, "version": "baf32a6852a459fb7f884dfba7f5d07542508669", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "amundsendatabuilderprivate": {"name": "amundsendatabuilderprivate", "description": "databuilder that is only related to lyft", "repository": "git@github.com:lyft/amundsendatabuilder-private.git", "image_type": "library", "team_email": "dp-tools@lyft.com", "slack": "#amundsen-dev", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "087cb234193a8090e69593ab288424c24d9c28b8", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "amundsenfrontend": {"name": "amundsenfrontend", "description": "Lyft's Data Discovery Portal", "repository": "git@github.com:lyft/amundsenfrontend-private.git", "image_type": "service", "service_tier": 3, "slack": "#amundsen-dev", "team_email": "dp-tools@lyft.com", "pagerduty_escalation_policy": "Data Platform Tools", "frontend": {"node_version": "10.14.1-1nodesource1"}, "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "start_time": 120, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "amundsensearch.dev", "amundsenmetadata.dev", "jobscheduler.dev", "mailer.dev", "superset.dev", "amundsenfrontend.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "amundsenfrontend.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "bake_time_minutes": 3, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "amundsenfrontend"}], "common_settings": {"internal_hosts": {"amundsenmetadata": null, "amundsensearch": null, "dataplatformadmin": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "mailer": null, "superset": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "logging": {"amundsenfrontend": {"fields": {"attempt_num": "long", "exception": "keyword", "traceback": "keyword", "failed_record": "keyword"}}}, "version": "7850c4cabc07e6fcf952bb379f3f97fd3b39fc46", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "amundsenmetadata": {"name": "amundsenmetadata", "description": "Metadata service for Amundsen", "repository": "git@github.com:lyft/amundsenmetadata-private.git", "image_type": "service", "service_tier": 3, "slack": "#amundsen-dev", "team_email": "dp-tools@lyft.com", "pagerduty_escalation_policy": "Data Platform Tools", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "amundsenneo4j.dev", "amundsenmetadata.legacy", "kafka.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "amundsenmetadata.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "bake_time_minutes": 1, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "automatic": false, "bake_time_minutes": 1, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "amundsenmetadata"}], "common_settings": {"authorization": {"permissions": {"read": {"methods": ["GET", "HEAD", "OPTIONS"]}, "write": {"methods": ["POST", "PUT", "PATCH", "DELETE"]}}, "bindings": {"*": ["read", "write"]}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "version": "e6944247010ee0350f215fecae9cd4d0d4999939", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "amundsenneo4j": {"name": "amundsenneo4j", "description": "Neo4j for Amundsen", "repository": "git@github.com:lyft/amundsenneo4j.git", "image_type": "service", "service_tier": 3, "languages": ["bash"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 7474, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "amundsenneo4j.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "amundsenneo4j.dev"}], "team_email": "dp-tools@lyft.com", "pagerduty_escalation_policy": "Data Platform Tools", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "amundsenneo4j"}]}}, "slack": "#amundsen-dev", "version": "705f132f8c6fc676b1fcdcad1e5ac2c83170cdba", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "amundsensearch": {"name": "amundsensearch", "description": "Search service for amundsen", "repository": "git@github.com:lyft/amundsensearch-private.git", "image_type": "service", "service_tier": 3, "slack": "#amundsen-dev", "team_email": "dp-tools@lyft.com", "pagerduty_escalation_policy": "Data Platform Tools", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "elasticsearch6.server", "amundsensearch.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "amundsensearch.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "bake_time_minutes": 1, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "bake_time_minutes": 1, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "amundsensearch"}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "version": "74094fa247b27fb87746ac8179eb7d67f6531d53", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "analyticsclient": {"name": "analyticsclient", "description": "analyticsclient - Analytics event definitions and python client.", "repository": "git@github.com:lyft/analyticsclient.git", "credentials": true, "slack": "#streaming-pubsubalert", "team_email": "dataingest@lyft.com", "pagerduty_escalation_policy": "Streaming-PubSub", "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "staging", "command": "bash -c 'make -C /code/analyticsclient release_staging'", "limits": {"cpu": 16, "memory": "16Gi"}}, {"name": "production", "command": "bash -c 'make -C /code/analyticsclient release_production'", "limits": {"cpu": 16, "memory": "16Gi"}}], "facets": [{"name": "staging", "member": "analyticsclient.staging", "type": "job", "iam": {"roles": {"staging": "lyftpypi-staging-iad-deploy"}}}, {"name": "production", "member": "analyticsclient.production", "type": "job", "iam": {"roles": {"production": "lyftpypi-production-iad-deploy"}}}], "tests": [{"name": "python2", "type": "jailed", "command": "make test_python2"}, {"name": "python3", "type": "jailed", "command": "make test_python3"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true}, "automatic": true, "targets": [{"facet": "staging"}], "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "automatic": true, "targets": [{"facet": "production"}], "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["bash", "python"], "image_type": "library", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "notification_overrides": {"deploy_failure": {"slack": "#analyticsclient-fails"}}, "version": "f4f6a6c296b41bcb6f00f21c1afc766a2caf15d8", "images": [{"parent": {"name": "pythonlibraryjava8", "version": "cc753162f503a42e13ac366da4f2b0bbdc343fe2", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibraryjava8", "version": "cc753162f503a42e13ac366da4f2b0bbdc343fe2", "sub_image": null, "external": false}}, "analyticsingest": {"name": "analyticsingest", "description": "analyticsingest", "repository": "git@github.com:lyft/analyticsingest.git", "credentials": true, "configsets": ["kafkaconfigdata"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn analyticsingest.app:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi"}}], "facets": [{"autoscaling": {"environment": {"production": {"max_size": 50, "min_size": 1}, "staging": {"max_size": 4, "min_size": 1}}}, "member": "analyticsingest.service", "name": "main", "type": "service"}, {"autoscaling": {"max_size": 1, "min_size": 1}, "canary": true, "member": "analyticsingest.service", "name": "canary", "type": "service"}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "dynamodb.server", "postgresql.server", "sqs.server", "analyticsingest.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "analyticsingest.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "analyticsingest.dev", "container": "analyticsingest.legacy", "command": "make test_int"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#streaming-pubsubalert", "team_email": "dataingest@lyft.com", "pagerduty_escalation_policy": "Streaming-PubSub", "service_tier": 1, "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": {"facet": "main"}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": {"facet": "canary"}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}, "targets": {"facet": "main"}}, {"name": "production-us-east-1b", "legacy": false, "availability_zone": "us-east-1b", "kubernetes": {"enabled": true}, "targets": {"facet": "main"}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true}, "targets": {"facet": "main"}}, {"name": "production-us-east-1f", "legacy": false, "availability_zone": "us-east-1f", "kubernetes": {"enabled": true}, "targets": {"facet": "main"}}, {"name": "production-us-east-1e", "legacy": false, "availability_zone": "us-east-1e", "kubernetes": {"enabled": true}, "targets": {"facet": "main"}}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "languages": ["python"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "analyticsingest"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"kinesis_iad": null, "kinesis_pdx": null, "firehose_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s", "sources": [{"name": "confluent", "source": "deb https://packages.confluent.io/deb/5.3 stable main", "keyid": 41468433}], "packages": ["librdkafka-dev", "pkg-config", "build-essential", "default-jre", "libffi-dev", "libgeos-dev", "liblog4j1.2-java", "libpq-dev", "libssl-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "logging": {"analyticsingest": {"fields": {"failed_record_count": "long", "attempt_num": "long", "failed_record": "keyword", "error_id": "keyword", "error_msg": "keyword", "event_name": "keyword", "field_name": "keyword"}}}, "version": "a355d27396f8c0e1ba0ed6a8ac04abc78af4e4be", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "analyticsmetrics": {"name": "analyticsmetrics", "description": "analyticsmetrics", "repository": "git@github.com:lyft/analyticsmetrics.git", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "kclworker", "sub_image": "k8s", "command": "dumb-init -- service_venv /code/kcl/kcl-worker.sh", "limits": {"cpu": 1, "memory": "2Gi", "environment": {"development": {"memory": "512Mi", "cpu": 1}, "staging": {"memory": "2Gi", "cpu": 1}}}}], "facets": [{"name": "kcl", "member": "analyticsmetrics.kclworker", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 12, "max_size": 24}}}}, {"name": "kclcanary", "member": "analyticsmetrics.kclworker", "type": "worker", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "kinesis.server", "analyticsmetrics.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "analyticsmetrics.dev"}, {"name": "unit", "type": "jailed", "command": "make test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "team_email": "obs-analysis@lyft.com", "pagerduty_escalation_policy": "Observability-Analysis", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "targets": [{"facet": "kcl"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "targets": [{"facet": "kclcanary"}], "kubernetes": {"enabled": true}}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a", "targets": [{"facet": "kcl"}], "kubernetes": {"enabled": true}}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d", "targets": [{"facet": "kcl"}], "kubernetes": {"enabled": true}}, {"legacy": true, "name": "production", "orca": [{"region": "iad"}], "targets": [{"facet": "kcl"}], "kubernetes": {"enabled": true}}]], "languages": ["python"], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "analyticsmetrics"}], "common_settings": {"internal_hosts": {"regions": null, "tcs": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"sub_image": "k8s", "builder": "lyft/s2ipython3:9d2b2eee63d87498a44e0192b78609ba7518f41e", "packages": ["default-jre-headless", "liblog4j1.2-java", "lbzip2", "libgeos-dev", "libspatialindex-dev"]}}]}}, "version": "7e6ba9c53e2cfe7f64e7df3d72f938061d1e44c1", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "analyticsquerybench": {"name": "analyticsquerybench", "description": "Data platform query performance service for hive/redshift/presto based on presto-benchto", "repository": "git@github.com:lyft/analyticsquerybench.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "http", "port": 8080}]}, {"name": "run", "command": "/code/analyticsquerybench/entrypoint.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.dev", "mysql.dev", "analyticsquerybench.run"]}, {"name": "test", "members": ["control.dev", "postgresql.dev", "mysql.dev", "analyticsquerybench.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "analyticsquerybench.dev"}, {"name": "nightlybuildtest", "type": "execution", "group": "analyticsquerybench.test", "container": "analyticsquerybench.legacy", "command": "./entrypoint.sh replay 1", "autotrigger": false, "run_in_pr": true, "schedule": "10 20 * * *", "slack": {"room": "#prestly-test", "post_on_success": true}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#presto-dev-bot", "team_email": "presto-dev@lyft.com", "pagerduty_escalation_policy": "Data Infra Interactive", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "languages": ["python"], "image_type": "service", "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "analyticsquerybench"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211]}, "health_check_endpoint": "/"}}}, "version": "b28e6807c7c3b23023adbe5229e64e342a5c50dc", "images": [{"parent": {"name": "java8", "version": "d98ad58c19a6adb7886d960af43e02126075558d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "java8", "version": "d98ad58c19a6adb7886d960af43e02126075558d", "sub_image": null, "external": false}}, "analyticstagger": {"name": "analyticstagger", "description": "Repo to maintain audit of analytics tags during various phases of analytics tagging", "repository": "git@github.com:lyft/analyticstagger.git", "slack": "#data-platform-dev", "team_email": "data-platform-security-dev@lyft.com", "pagerduty_escalation_policy": "Data Security", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "redshift", "command": "dumb-init -- service_venv python manage.py execute_tagger --execute", "sub_image": "k8s", "workdir": "/code/analyticstagger"}, {"name": "dbusage", "command": "dumb-init -- sleep infinity", "sub_image": "k8s", "workdir": "/code/analyticstagger"}, {"name": "workers", "command": "dumb-init -- service_venv python manage.py workers", "sub_image": "k8s", "workdir": "/code/analyticstagger"}, {"name": "emailer", "command": "dumb-init -- service_venv python manage.py email_report --execute --emails data-platform-security-dev@lyft.com", "sub_image": "k8s", "workdir": "/code/analyticstagger"}, {"name": "deleteconfigs", "command": "dumb-init -- service_venv python manage.py delete_unused_configs --send-prs", "sub_image": "k8s", "workdir": "/code/analyticstagger"}], "groups": [{"name": "dev", "members": ["control.dev", "analyticstagger.legacy", "postgresql.server"]}, {"name": "service_group", "members": ["analyticstagger.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "analyticstagger.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "analyticstagger.dev", "container": "analyticstagger.legacy", "command": "service_venv pytest --cov=app --junitxml=build/unit.xml --cov-report=xml tests/integration", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml"}}], "facets": [{"name": "deleteconfigs", "type": "cron", "member": "analyticstagger.deleteconfigs", "concurrency_policy": "forbid", "schedule": "0 0 * * *"}, {"name": "redshifttagger", "type": "cron", "member": "analyticstagger.redshift", "concurrency_policy": "forbid", "schedule": "0 * * * *"}, {"name": "emailer", "type": "cron", "member": "analyticstagger.emailer", "concurrency_policy": "replace", "schedule": "30 0 * * *"}, {"name": "dbusage", "member": "analyticstagger.dbusage", "type": "batch"}, {"name": "workers", "member": "analyticstagger.workers", "type": "worker", "envoy_service": "analyticstagger", "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "redshifttagger"}, {"facet": "dbusage"}, {"facet": "workers"}]}, {"name": "production", "automatic": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "redshifttagger"}, {"facet": "dbusage"}, {"facet": "workers"}, {"facet": "emailer"}, {"facet": "deleteconfigs"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "analyticstagger", "traffic_type": "egress_only"}], "common_settings": {"internal_hosts": {"mozartgateway": null}}}}, "version": "7104692c34a53455d0101fa6691718fce58ca11e", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "analyticsupr": {"name": "analyticsupr", "description": "Orchestrate delete and export operations on Analytics Store to support user privacy rights", "repository": "git@github.com:lyft/analyticsupr.git", "slack": "#gdpr-analytics-deploy", "team_email": "data-platform-security-dev@lyft.com", "pagerduty_escalation_policy": "gdpr-orchetration-pod", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:2d1498e02586301db3e040ff3d9bcb838a0d3141"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/analyticsupr", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "metrics", "command": "dumb-init -- service_venv python manage.py emit_metrics", "workdir": "/code/analyticsupr", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "128Mi"}}], "groups": [{"name": "dev", "members": ["control.dev", "metadataproxy.server", "dynamodb.dev", "analyticsupr.legacy"]}, {"name": "integration", "members": ["control.dev", "metadataproxy.server", "dynamodb.dev", "analyticsupr.legacy"]}, {"name": "service_group", "members": ["control.dev", "metadataproxy.server", "dynamodb.dev", "analyticsupr.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "analyticsupr.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "analyticsupr.dev", "container": "analyticsupr.legacy", "command": "service_venv pytest --junit-xml=build/integration.xml tests/integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "analyticsupr.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "analyticsupr.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}, {"name": "metrics", "member": "analyticsupr.metrics", "type": "cron", "schedule": "*/5 * * * *"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "metrics"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "metrics"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "analyticsupr"}], "common_settings": {"internal_hosts": {"userprivacyrights": null, "jobschedulernormalweb": null}, "local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"dynamodb_iad": null}}}}, "version": "f939f8584ddc08b07ab9a72f197051fbc1546565", "images": [{"parent": {"name": "opsbase", "version": "2d1498e02586301db3e040ff3d9bcb838a0d3141", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "2d1498e02586301db3e040ff3d9bcb838a0d3141", "sub_image": null, "external": false}}, "anodotallevents": {"name": "anodotallevents", "description": null, "repository": "git@github.com:lyft/anodotallevents.git", "report_ci": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "anodotallevents.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "anodotallevents.dev"}], "slack": "dp-sp-eng", "team_email": "data-eng@lyft.com", "pagerduty_escalation_policy": "Anomaly Detection Service", "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": false}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "languages": ["java", "bash"], "image_type": "service", "service_tier": 3, "streamingplatform": {"jobmanagers": [{"name": "anodotallevents", "development": {"num_taskmanagers": 1, "taskmanager": {"num_slots": 2}}, "staging": {"num_taskmanagers": 3, "taskmanager": {"num_slots": 4}}, "production": {"num_taskmanagers": 18, "taskmanager": {"num_slots": 4}}, "jobs": [{"name": "anodotallevents", "jar": "anodotallevents-1.0.0-SNAPSHOT.jar", "class": "com.lyft.anomalydetection.AnomalyDetection", "description": null, "development": {"parallelism": 2}, "staging": {"parallelism": 8}, "production": {"parallelism": 64}}]}]}, "version": "16cd56f6780a959576c6a4eaa86292c42f4ce9c9", "images": [{"parent": {"name": "opsbase", "version": "1bd5934c75f98d3723e46318ab69159d3c8c290e", "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "1bd5934c75f98d3723e46318ab69159d3c8c290e", "external": false}}, "anodotpipeline": {"name": "anodotpipeline", "description": "Service that feeds real time analytics events into Anodot for Anomaly Detection.", "repository": "git@github.com:lyft/anodotpipeline.git", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "anodotpipeline.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "anodotpipeline.dev"}], "slack": "#streaming-apps", "team_email": "data-eng@lyft.com", "pagerduty_escalation_policy": "Anomaly Detection Service", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "languages": ["java"], "image_type": "service", "streamingplatform": {"version": "1.2-SNAPSHOT", "flink_config_overrides": [{"key": "state.backend.incremental", "value": false}, {"key": "akka.ask.timeout", "value": "120 s"}, {"key": "akka.tcp.timeout", "value": "120 s"}, {"key": "web.timeout", "value": 60000}], "jobmanagers": [{"name": "anodotpipeline", "development": {"num_taskmanagers": 1, "taskmanager": {"num_slots": 2}}, "staging": {"num_taskmanagers": 1, "taskmanager": {"num_slots": 16, "instance_type_override": "r5.4xlarge"}, "instance_type_override": "r5.xlarge"}, "production": {"num_taskmanagers": 17, "taskmanager": {"num_slots": 16, "instance_type_override": "r5.4xlarge"}, "instance_type_override": "r5.xlarge"}, "jobs": [{"name": "flinkjob", "jar": "anodotpipeline-1.0.0-SNAPSHOT.jar", "class": "com.lyft.anomalydetection.AnomalyDetection", "description": "too legit", "development": {"parallelism": 2}, "staging": {"parallelism": 16}, "production": {"parallelism": 256}}]}]}, "service_tier": 3, "version": "3ed637c86ba4619cc6658e91176c611cfe60a24f", "images": [{"parent": {"name": "opsbase", "version": "49dd0dfae9cc8fb0ead221682d5a4e774b7fc089", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "49dd0dfae9cc8fb0ead221682d5a4e774b7fc089", "sub_image": null, "external": false}}, "appboy": {"name": "appboy", "description": "appboy", "repository": "git@github.com:lyft/appboy.git", "image_type": "service", "service_tier": 3, "pagerduty_escalation_policy": "Rider Incentives", "slack": "#rider-incentives-dev", "team_email": "rider-incentives-eng@lyft.com", "envoy": {"profile": "python", "settings": {"services": [{"name": "appboy"}], "common_settings": {"local_service": {"enable_gzip": true}, "internal_hosts": {"jobschedulernormalweb": {"external_hosts": {"appboy": null}}}, "external_hosts": {"kinesis_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "kinesis.server", "appboy.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "appboy.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "appboy.dev", "container": "appboy.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "kubernetes": {"enabled": false, "clusterLabels": {"cluster.lyft.net/role": "infra"}}}, {"name": "canary", "legacy": true, "kubernetes": {"enabled": false, "clusterLabels": {"cluster.lyft.net/role": "infra"}}}, {"name": "production", "legacy": true, "kubernetes": {"enabled": false, "clusterLabels": {"cluster.lyft.net/role": "infra"}}}], "logging": {"appboy": {"fields": {"reporter_hostname": "keyword", "source_pipeline": "keyword", "event_name": "keyword", "event_id": "keyword", "reporter_ip_address": "keyword", "occurred_at": "keyword", "http_request_id": "keyword", "status": "keyword", "logged_at": "keyword", "id": "keyword", "type": "keyword", "amount_currency": "keyword", "amount": "long", "region": "keyword", "auto_retry_attempt_count": "long", "payment_method": "keyword", "indebted": "boolean", "bill_charge_count": "long", "has_charge_token": "boolean", "participant_domain": "keyword", "normalized_amount": "long", "fee": "long", "created_at": "keyword", "participant_identifier": "keyword", "normalized_fee": "long", "capture": "boolean", "charge_account_id": "keyword", "ride_id": "keyword", "actor": "keyword", "order_id": "keyword", "order_type": "keyword", "invoice_id": "keyword", "succeeded_at": "keyword", "route_id": "keyword", "fee_currency": "keyword", "charge_account_organization_id": "keyword", "__metadata__": {"aic_time": "keyword", "fanner_time": "keyword", "logged_at": "keyword", "is_priority": "keyword", "ingest_library_version": "keyword"}, "failure_reason": "keyword", "user_id": "keyword", "card_provider": "keyword", "card_fingerprint": "keyword", "card_type": "keyword", "card_card_id": "keyword", "card_last_four": "long", "card_billing_type": "keyword", "debt_collection": "boolean", "card_description": "keyword", "failed_attempts_0_created_at": "keyword", "failed_attempts_0_error_code": "keyword", "failed_attempts_0_error_detail": "keyword", "failed_attempts_0_decline_code": "keyword", "failed_attempts_1_created_at": "date", "debt_collection_initiator": "keyword", "method_identifier": "keyword", "card_product_code": "keyword", "modified_by_charge_account_updater": "keyword", "chargeaccount_method": "keyword", "chargeaccount_failed": "keyword", "chargeaccount_commuter_network": "keyword", "organization_id": "keyword", "chargeaccount_cc_fingerprint": "keyword", "chargeaccount_cc_card_id": "keyword", "chargeaccount_cc_last_4": "keyword", "chargeaccount_created_at": "keyword", "chargeaccount_is_default_business": "keyword", "chargeaccount_provider": "keyword", "chargeaccount_cc_issuer": "keyword", "chargeaccount_cc_expired": "keyword", "chargeaccount_default": "keyword", "chargeaccount_cc_iin": "keyword", "chargeaccount_cc_country": "keyword", "is_direct_billing": "keyword", "chargeaccount_cc_billing_type": "keyword", "chargeaccount_id": "keyword", "chargeaccount_fingerprint": "keyword", "chargeaccount_cc_valid_cvc": "keyword", "chargeaccount_cc_funding": "keyword", "chargeaccount_cc_expiration_date": "keyword", "chargeaccount_cc_type": "keyword", "chargeaccount_cc_brand": "keyword", "chargeaccount_customer_id": "keyword", "chargeaccount_cc_valid_address_zip": "keyword", "chargeaccount_cc_address_zip": "keyword", "chargeaccount_cc_description": "keyword", "chargeaccount_cc_product_code": "keyword", "internal_note": "keyword", "external_note": "keyword", "app_version": "keyword", "locale": "keyword", "sample_rate": "keyword", "longitude": "keyword", "os": "keyword", "device_id": "keyword", "dispatchable": "keyword", "latitude": "keyword", "user_mode": "keyword", "event_version": "keyword", "manufacturer": "keyword", "accuracy": "keyword", "os_version": "keyword", "background": "keyword", "session_id": "keyword", "app_id": "keyword", "model": "keyword", "sampled_at": "keyword", "speed": "keyword", "altitude": "keyword", "action_id": "keyword", "action": "keyword", "network_type": "keyword", "duration_ms": "keyword", "result": "keyword", "carrier": "keyword", "carrier_mcc": "keyword", "carrier_mnc": "keyword", "ride_type": "keyword", "carrier_iso": "keyword", "design_id": "keyword", "coupon_usage_type": "keyword", "coupon_coupon_code": "keyword", "bearing": "keyword", "charge_account_credit_line_id": "keyword", "display_locale": "keyword", "source": "keyword", "experiment": "keyword", "variant": "keyword", "parameter": "keyword", "radio_type": "keyword", "tag": "keyword"}}}, "languages": ["python"], "version": "ae0f5695e4bcb39fb05fbf781e9e3e1edbdc3d38", "images": [{"parent": {"name": "opsbase", "version": "ce84eccb6431b0bcb1d7cc365ed8b131f35a748c", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "ce84eccb6431b0bcb1d7cc365ed8b131f35a748c", "sub_image": null, "external": false}}, "appliedmloffline": {"name": "appliedmloffline", "description": "projects for applied ML projects", "repository": "git@github.com:lyft/appliedmloffline.git", "slack": "#appliedmloffline", "team_email": "ds-platform@lyft.com", "pagerduty_escalation_policy": "DS Platform", "image_type": "service", "service_tier": 3, "languages": ["python"], "containers": [{"name": "spin", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["control.dev", "appliedmloffline.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "appliedmloffline.dev", "container": "appliedmloffline.spin", "command": "service_venv mbadmin register-workflows new"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "development", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f769f96d9c865b2a10affa0f21862d3148afce21", "sub_image": "precommit"}}]}}, "version": "5f26f8f7d5784b02b56a21844003090f6e1b61da", "images": [{"parent": {"name": "flytebase", "version": "7897d397cd7c1a091c357abeed57aeea78c36725", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f769f96d9c865b2a10affa0f21862d3148afce21", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "flytebase", "version": "7897d397cd7c1a091c357abeed57aeea78c36725", "sub_image": null, "external": false}}, "appointmentmanager": {"name": "appointmentmanager", "description": "Service to manage check-in, appointments, and calendars at Lyft locations", "repository": "git@github.com:lyft/appointmentmanager.git", "slack": "#fp-hub", "team_email": "fp-eng@lyft.com", "pagerduty_escalation_policy": "Fleet Management", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["pkg-config", "libxmlsec1-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/appointmentmanager", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "appointmentmanager.legacy"]}, {"name": "service_group", "members": ["appointmentmanager.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "appointmentmanager.dev"}, {"name": "unit", "type": "jailed", "run_in_pr": true, "run_in_dev": true, "framework": "pytest"}, {"name": "component", "type": "execution", "group": "appointmentmanager.dev", "container": "appointmentmanager.legacy", "command": "make test_component", "target": "tests/component", "virtual_env": "service_venv", "run_in_pr": true, "run_in_dev": true, "skip_threshold": 10, "reports": {"junit": "build/component.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "appointmentmanager.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "appointmentmanager.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "appointmentmanager"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"fleetlocations": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "vehicleservicecenters": null}}}}, "version": "cb7e2b70b1c60bd427a079057dcf080b95c89749", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "appreleases": {"name": "appreleases", "description": "release portal for Lyft iOS and Android Apps", "repository": "git@github.com:lyft/appreleases.git", "credentials": true, "custom": {"frontend_service": true}, "docs": {"disable": true}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s", "packages": ["libpq-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "appreleases.legacy", "redis.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "appreleases.dev"}, {"name": "unit", "type": "execution", "group": "appreleases.dev", "container": "appreleases.legacy", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "appreleases.dev", "container": "appreleases.legacy", "command": "make test_integration", "target": "tests/integration", "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "eslint", "type": "execution", "group": "appreleases.dev", "container": "appreleases.legacy", "command": "make ensure_deps test_lint"}], "team_email": "client-productivity@lyft.com", "slack": "#client-tooling-prs", "pagerduty_escalation_policy": "Mobile CI", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "languages": ["python"], "image_type": "service", "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "appreleases"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"clientbuilds": null}, "redis_clusters": {"appreleases": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "logging": {"appreleases": {"fields": {"release_numbers": "keyword", "schedule": "keyword"}}}, "version": "082eac8b65430c7258e8f0d7c141348d678ba5ee", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "aptly": {"name": "aptly", "description": "aptly for managing our private repo", "repository": "git@github.com:lyft/containers.git:aptly", "credentials": true, "credentials_legacy": false, "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "containers": [{"name": "publish", "command": "/code/containers/aptly/publish.sh", "network": "host"}], "docs": {"section": "Infrastructure"}, "deploy": [{"name": "staging", "legacy": true, "role": "aptly-production-iad-image", "orca": [{"orca_location": "ops", "region": "iad"}], "links": [{"text": "Deployment runbook", "url": "https://docs.lyft.net/eng/aptly/README.html#publishing-the-repo"}]}, {"name": "production", "legacy": true, "role": "aptly-production-iad-image", "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["bash", "python"], "image_type": "tool", "python": {"mypy": {"python_versions": ["3.6"]}}, "version": "82a710df40d32c3a7aa789b33a90e6261c8a0302", "images": [{"parent": {"name": "imagebase", "version": "3d05522cd0526907149ca4c05273c28771c398bf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "3d05522cd0526907149ca4c05273c28771c398bf", "sub_image": null, "external": false}}, "artifactory": {"name": "artifactory", "description": "Deployment of JFrog Artifactory Enterprise+ for Internal Use", "repository": "git@github.com:lyft/artifactory.git", "credentials": true, "slack": "#artifactory", "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "docs": {"disable": true}, "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "mode": "direct", "clusterLabels": [{"cluster.lyft.net/role": "infra"}, {"cluster.lyft.net/clustername": "infrastaging"}], "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "acl": {"admin_policies": ["kubernetes-client-tooling-admin"]}}, "automatic": true}, {"name": "production", "legacy": false, "orca": [{"iam_role": "orca-admin", "region": "iad"}], "kubernetes": {"enabled": true, "mode": "direct", "clusterLabels": [{"cluster.lyft.net/role": "infra"}, {"cluster.lyft.net/cluster_name": "infra"}], "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "acl": {"admin_policies": ["kubernetes-client-tooling-admin"]}}}], "languages": ["bash"], "image_type": "service", "service_tier": 3, "version": "c3f4e63f9b2078cd91e0b43c94ca4e17da72a5da", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "asgreplace": {"name": "asgreplace", "description": "Tool for performing replacement of instances in a given ASG", "repository": "git@github.com:lyft/asgreplace.git", "image_type": "tool", "slack": "#deploys-bots", "team_email": "deploys-team@lyft.com", "credentials_legacy": false, "languages": ["python", "bash"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipython3:7fe5cd633bb95dd4c36b0c509381178e4003cbb4"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6eb9bbd0880d5165c087b614ad412fc65a4543d1", "sub_image": "precommit"}}]}}, "containers": [{"name": "run", "command": "python -m asgreplace.asg_replace"}], "groups": [{"name": "dev", "members": ["dnsmasq.server", "metadataproxy.server", "asgreplace.run"]}], "tests": [{"name": "unit", "type": "jailed", "command": "pytest -vvv tests/unit"}, {"name": "startup", "type": "startup", "group": "asgreplace.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"account_name": "zimride", "region": "iad"}], "automatic": true}, {"name": "production", "legacy": false, "orca": [{"account_name": "zimride", "region": "iad"}]}], "version": "5b392fd35e45ed805235644f402a3fefb27255db", "images": [{"parent": {"name": "s2ipython3", "version": "7fe5cd633bb95dd4c36b0c509381178e4003cbb4", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6eb9bbd0880d5165c087b614ad412fc65a4543d1", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipython3", "version": "7fe5cd633bb95dd4c36b0c509381178e4003cbb4", "sub_image": null, "external": false}}, "athens": {"name": "athens", "description": "Athens gomod proxy", "repository": "git@github.com:lyft/athens-private.git", "credentials": false, "containers": [{"name": "service", "command": "/athens"}], "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "slack": "#compute-bots", "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "kubernetes": {"enabled": true, "mode": "direct", "clusterLabels": [{"cluster.lyft.net/role": "infra"}, {"cluster.lyft.net/clustername": "infrastaging"}], "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"legacy": false, "name": "production", "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "mode": "direct", "clusterLabels": [{"cluster.lyft.net/role": "infra"}, {"cluster.lyft.net/cluster_name": "infra"}], "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}], "languages": ["bash"], "image_type": "service", "service_tier": 2, "version": "18907f180b077e12e4732c9df8c58b96e8e4d191", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "atlantisdata": {"name": "atlantisdata", "description": "Runtime configuration data for atlantisdata", "repository": "git@github.com:lyft/atlantisdata.git", "image_type": "data", "service_tier": 2, "team_email": "locations@lyft.com", "slack": "#atlantis", "pagerduty_escalation_policy": "devnull", "languages": ["bash", "python"], "builder": {"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, "credentials": false, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/atlantisdata"]}, {"name": "spin", "command": "sleep infinity", "mounts": ["/srv/regioncfgdata"]}], "groups": [{"name": "dev", "members": ["regioncfgdata.run", "atlantisdata.spin"]}], "tests": [{"name": "integration", "type": "execution", "group": "atlantisdata.dev", "virtualenv": "service_venv", "container": "atlantisdata.spin", "command": "make test_integration"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "1ac6ca09fc4f29ad78c65916c274d65fb33f3ede", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "ats": {"name": "ats", "description": "ats", "repository": "git@github.com:lyft/ats.git", "credentials": true, "service_tier": 1, "pagerduty_escalation_policy": "Driver Applicant Onboarding", "slack": "#do-eng-all", "team_email": "do-funnel@lyft.com", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "frontend", "port": 9211}], "limits": {"environment": {"development": {"memory": "3Gi", "cpu": 0.7}}}}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "groups": [{"name": "minimum", "members": ["control.dev", "dynamodb.server", "elasticsearch.dev", "redis.dev", "ats.legacy"]}, {"name": "dev", "members": ["ats.minimum", "idl.server"]}, {"name": "qa_approve", "members": ["account.dev", "acquisitionguarantees.dev", "ats.dev", "auth.dev", "backgroundcheck.dev", "compliance.dev", "drivermode.qa", "driverridesinfo.dev", "drivestat.dev", "green.dev", "jobscheduler.dev", "karma.dev", "leadplatform.legacy", "locations.dev", "logistics.dev", "regions.dev", "sqs.dev", "supply.dev", "supplyrecords.dev", "switchboard.dev", "usergroups.legacy", "users.dev", "vehiclemetadata.dev", "walletapi.dev"]}, {"name": "integration", "members": ["account.legacy", "acquisitionguarantees.legacy", "amp.legacy", "ats.legacy", "auth.legacy", "backgroundcheck.legacy", "compliance.service", "control.dev", "dborchestrator.legacy", "dbproxyauth.legacy", "dispatch.legacy", "dispatchavailability.legacy", "drivermode.legacy", "driverridesinfo.legacy", "dynamodb.server", "elasticsearch.server", "elasticsearch5.server", "enterprise.legacy", "envoy.server", "featurebuilderdata.run", "green.legacy", "jobscheduler.legacy", "karma.legacy", "kinesis.server", "leadplatform.legacy", "legacyapi.legacy", "legacyoauth.legacy", "legacyridescheduler.legacy", "legacyridetypes.legacy", "locations.legacy", "logistics.legacy", "lyftidl.server", "mongodb.server", "postgresql.server", "publicapi.legacy", "ratelimit.legacy", "ratings.legacy", "redis.server", "regions.legacy", "rentals.legacy", "routes.dev", "sqs.server", "supply.legacy", "supplypartners.legacy", "supplyrecords.service", "switchboard.legacy", "taskqueue.service", "tripsapi.legacy", "trips.dev", "usergroups.legacy", "users.dev", "vehiclemetadata.dev", "viewport.legacy", "wallet.legacy", "walletapi.legacy"]}], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "start", "type": "startup", "group": "ats.dev"}, {"name": "unit", "type": "jailed", "command": "make strictunit", "reports": {"junit": "build/unit.xml"}}, {"name": "e2e", "type": "execution", "group": "ats.integration", "container": "ats.legacy", "command": "make e2e_test", "reports": {"junit": "build/e2e.xml"}}, {"name": "unit_legacy", "type": "execution", "group": "ats.dev", "container": "ats.legacy", "command": "make unit_test", "reports": {"junit": "build/legacyunit.xml"}}], "upstream_tests": {"on_commit": true, "test_set": {"rentals": ["ats_upstream", "goldenpath"], "onboardingflow": ["integration"]}}, "test_logs": ["/var/log/lyft/ats-web-access.log"], "notification_overrides": {"behind_notifications": {"slack": "#do-funnel-bots"}, "pr_merge": {"slack": "#do-funnel-bots"}, "deploy": {"slack": "#do-funnel-bots"}, "deploy_failure": {"slack": "#do-funnel-bots"}, "test_failure": {"slack": "#do-funnel-bots"}, "master_failure": {"slack": "#do-funnel-bots"}}, "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}], "links": [{"text": "Deploying ATS Runbook", "url": "https://github.com/lyft/ats/blob/master/docs/runbook.md#how-to-deploy"}, {"text": "Deploy dashboards readme", "url": "https://github.com/lyft/ats/blob/master/docs/dashboards.md#deployment-dashboards"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}], "links": [{"text": "Deploying ATS Runbook", "url": "https://github.com/lyft/ats/blob/master/docs/runbook.md#how-to-deploy"}, {"text": "Deploy Dashboards readme", "url": "https://github.com/lyft/ats/blob/master/docs/dashboards.md#deployment-dashboards"}, {"text": "Product Health Dashboards readme", "url": "https://confluence.lyft.net/display/DO/Metrics+and+Dashboards#MetricsandDashboards-ProductOperationalDashboards"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": true}, [{"name": "production-us-east-1d", "availability_zone": "us-east-1d", "legacy": true}, {"name": "production", "legacy": true, "links": [{"text": "Deploying ATS Runbook", "url": "https://github.com/lyft/ats/blob/master/docs/runbook.md#how-to-deploy"}, {"text": "Deploy Dashboards readme", "url": "https://github.com/lyft/ats/blob/master/docs/dashboards.md#deployment-dashboards"}, {"text": "Product Health Dashboards readme", "url": "https://confluence.lyft.net/display/DO/Metrics+and+Dashboards#MetricsandDashboards-ProductOperationalDashboards"}]}]], "languages": ["python", "bash"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "ats"}, {"name": "atsbatch"}, {"name": "atssearchworkers"}, {"name": "atsworkers"}], "common_settings": {"internal_hosts": {"account": null, "acquisitionbonuses": null, "acquisitionguarantees": null, "amp": null, "ats": null, "backgroundcheck": {"tls_enabled": true}, "compliance": null, "coupons": null, "drivermode": null, "drivermonitor": null, "driverloyalty": null, "drivernotification": null, "driverridesinfo": null, "drivestat": null, "flexibleincentives": null, "green": {"tls_enabled": true}, "jobschedulerbulkweb": null, "jobschedulermigrationweb": null, "jobschedulernormalweb": null, "karma": null, "leadplatform": null, "ledger": {"tls_enabled": true}, "legacyapi": null, "logistics": null, "mailer": null, "messaging": null, "migrations": null, "notes": null, "payapi": null, "places": null, "publicapi": null, "ratelimit": null, "ratings": null, "referrals": null, "regions": null, "regulatoryintegrations": {"tls_enabled": true}, "rentals": null, "rides": null, "ridescheduler": null, "ridevalidations": null, "routes": null, "supply": null, "supplypartners": null, "supplyrecords": {"tls_enabled": true}, "switchboard": null, "tcs": null, "users": null, "usergroups": null, "userprivacyrights": null, "vehiclemetadata": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null, "sqs_iad": null}, "redis": {"atsmultiredis": {"port": 6380}}, "authorization": {"permissions": {"bgc_copy": {"paths": ["/api/v1/background_check_copy*"]}, "applicant_save": {"paths": ["/api/v1/applicant_save/*"]}, "applicant_private_data": {"paths": ["/api/v1/applicant_private_data/*"]}, "applicant_ride_stats": {"paths": ["/api/v1/applicant_ride_stats/*"]}, "applicant_driver_referral": {"paths": ["/api/v1/applicant_driver_referral/*"]}, "applicant_requirements": {"paths": ["/api/v1/applicant_requirements/*"]}, "applicant_blocks": {"paths": ["/api/v1/applicant_blocks/*"]}, "applicant_dmv_check": {"paths": ["/api/v1/applicant_dmv_check/*"]}, "applicant_background_check": {"paths": ["/api/v1/applicant_background_check/*"]}, "applicant_sms": {"paths": ["/api/v1/applicant_sms/*"]}, "applicant_locations": {"paths": ["/api/v1/applicant_locations/*"]}, "applicant_schedule_inspection": {"paths": ["/api/v1/applicant_schedule_inspection/*"]}, "applicant_idverification": {"paths": ["/api/v1/applicant_idverification/*"]}, "applicant_amp_order": {"paths": ["/api/v1/applicant_amp_order/*"]}, "applicant_onboardingcheckin": {"paths": ["/api/v1/applicant_onboardingcheckin/*"]}, "applicant_funnel_xd": {"paths": ["/api/v1/applicant_funnel_xd/*"]}, "applicant_consent_record": {"paths": ["/api/v1/applicant_consentrecord/*"]}, "applicant_nudge": {"paths": ["/api/v1/applicant_nudge/*"]}, "applicant_lead": {"paths": ["/api/v1/applicant_lead/*"]}, "applicant_regulatory_integration_requests": {"paths": ["/api/v1/applicant_regulatory_integration_requests/*"]}, "applicant_get": {"paths": ["/api/v1/applicant/*"], "methods": ["GET"]}, "applicant_put": {"paths": ["/api/v1/applicant/*"], "methods": ["PUT"]}, "applicant_delete": {"paths": ["/api/v1/applicant/*"], "methods": ["DELETE"]}, "inspection_appts": {"paths": ["/api/v1/inspectionappts*"]}, "drivermessage_templates": {"paths": ["/api/v1/drivermessagetemplates*"]}, "users": {"paths": ["/api/v1/users*"]}, "search": {"paths": ["/api/v1/search*"]}, "driver_vehicles": {"paths": ["/api/driver_vehicles/*"]}, "driver_vehicle": {"paths": ["/api/driver_vehicle/*"]}, "driver_vehicle_activate": {"paths": ["/api/driver_vehicle_activate/*"]}, "vehicle_blocks": {"paths": ["/api/v1/vehicles_blocks/*"]}, "vehicle_ridetypes": {"paths": ["/api/v1/vehicles_ridetypes/*"]}, "vehicle_emblem": {"paths": ["/api/driver_vehicle_lyft_emblem_orders/*"]}, "vehicle_emblem_eligibility": {"paths": ["/api/driver_vehicles_lyft_emblem_order_eligibility/*"]}, "driver_get_tax_info": {"paths": ["/api/v1/driver_get_tax_info/*"]}, "driver1": {"paths": ["/api/v1/driver/*"]}, "vehicles0": {"paths": ["/api/vehicles*"]}, "driver_referral_meta": {"paths": ["/api/driverreferralmeta/*"]}, "driver_referral": {"paths": ["/api/driverreferral/*"]}, "driver_referrals": {"paths": ["/api/driverreferrals*"]}, "driver_referral_payment": {"paths": ["/api/driver_referral_payment*"]}, "webleads": {"paths": ["/api/webleads/*"]}, "training_courses": {"paths": ["/api/v1/trainingcourses*"]}, "funnel_dead_ends": {"paths": ["/api/v1/funnel-dead-ends*"]}, "documents0": {"paths": ["/api/documents*"]}, "documents1": {"paths": ["/api/v1/documents*"]}, "document0": {"paths": ["/api/document/*"]}, "document1": {"paths": ["/api/v1/document/*"]}, "inspection_locations": {"paths": ["/api/v1/inspectionlocations*"]}, "tom_migration": {"paths": ["/api/v1/tom_migration*"]}, "qr_code_generate": {"paths": ["/api/v1/qr_code_generate*"]}, "mass_dpu": {"paths": ["/api/integrations/*"]}, "jobscheduler": {"paths": ["/webhooks/*", "/jobscheduler/*"]}, "bkn_insurance_upload": {"paths": ["/api/v1/upload_bkn_insurance_doc"]}, "webhook_dedup": {"paths": ["/webhooks/deduplicate/acknowledge*"]}, "client_vehicles": {"paths": ["/client/vehicles*"]}, "client_leads": {"paths": ["/client/api/leads/me*"]}, "client_drivermessages": {"paths": ["/client/drivermessages*"]}, "client_referral": {"paths": ["/client/referral*"]}, "client_consents": {"paths": ["/client/driverconsents*"]}, "client_profile": {"paths": ["/client/driverprofilev2*"]}, "client_goals": {"paths": ["/client/driver-goal-choices*", "/client/driver-goal-progress*", "/client/driver-goal-increase-choices*"]}, "client_shipping": {"paths": ["/client/shippingaddress*"]}, "client_education": {"paths": ["/client/new-driver-education*"]}, "client_eligible_vehicles": {"paths": ["/client/eligiblevehicles*"]}, "onboarding_locations": {"paths": ["/onboarding/v1/applicant-inspection-locations*"]}, "app_status": {"paths": ["/api/v1/application-status*"]}, "blocking_app_status": {"paths": ["/api/v1/blocking-application-status*"], "methods": ["POST"]}, "driver_audits": {"paths": ["/v1/driver_audits_ttl/*"]}, "blueprints_applicantportal_get": {"paths": ["/_api/applicantportal*"], "methods": ["GET"]}, "blueprints_applicantportal_put": {"paths": ["/_api/applicantportal*"], "methods": ["PUT"]}, "blueprints_applicants": {"paths": ["/api/applicants*"]}, "blueprints_app_data": {"paths": ["/api/application_data*"]}, "blueprints_car_selects": {"paths": ["/api/evox_car_selects*"]}, "blueprints_email": {"paths": ["/api/email*"]}, "blueprints_sms": {"paths": ["/api/sms*"]}, "blueprints_app_permission": {"paths": ["/api/application_permission*"]}, "blueprints_onboarding": {"paths": ["/api/onboarding*"]}, "blueprints_consent": {"paths": ["/api/driver_consent*"]}, "blueprints_flow_control": {"paths": ["/api/flow_control*"]}, "blueprints_inspections": {"paths": ["/api/inspections*"]}, "blueprints_id_verification": {"paths": ["/api/id_verification*"]}, "blueprints_shipping_address": {"paths": ["/api/shipping_address*"]}, "blueprints_unconfirmed_shipping_addresses": {"paths": ["/api/shipping_address/unconfirmed_addresses"]}, "healthcheck": {"paths": ["/healthcheck*"]}, "test-endpoints": {"paths": ["/test*"]}, "images": {"paths": ["/_s3_images/*", "/_svc_images/*"]}, "userrightsmanagement": {"paths": ["/urm/sanction*"]}, "urmendpoints": {"paths": ["/urm/erasure*", "/urm/production*"]}}, "bindings": {"accidentrisk": ["applicant_get"], "accidents": ["applicant_get"], "accidentsbatch": ["applicant_get"], "adtech": ["applicant_driver_referral", "applicant_get"], "amp": ["client_drivermessages"], "ats": ["applicant_save", "applicant_dmv_check", "applicant_background_check", "applicant_idverification", "blueprints_app_permission", "blueprints_consent", "blueprints_flow_control", "blueprints_inspections", "blueprints_id_verification", "blueprints_shipping_address", "onboarding_locations", "documents1", "inspection_appts", "applicant_schedule_inspection", "applicant_locations", "driver_vehicle", "driver_vehicles", "applicant_get", "applicant_driver_referral", "applicant_put", "inspection_locations", "test-endpoints", "blueprints_applicants", "client_leads"], "atsbatch": ["applicant_save", "applicant_dmv_check", "applicant_background_check", "applicant_idverification", "blueprints_app_permission", "blueprints_consent", "blueprints_flow_control", "blueprints_inspections", "blueprints_id_verification", "blueprints_shipping_address", "onboarding_locations", "documents1", "inspection_appts", "applicant_schedule_inspection", "applicant_locations", "driver_vehicle", "driver_vehicles", "applicant_get", "applicant_driver_referral"], "atssearchworkers": ["applicant_save", "applicant_dmv_check", "applicant_background_check", "applicant_idverification", "blueprints_app_permission", "blueprints_consent", "blueprints_flow_control", "blueprints_inspections", "blueprints_id_verification", "blueprints_shipping_address", "onboarding_locations", "documents1", "inspection_appts", "applicant_schedule_inspection", "applicant_locations", "driver_vehicle", "driver_vehicles", "applicant_get", "applicant_driver_referral"], "atsworkers": ["applicant_save", "applicant_dmv_check", "applicant_background_check", "applicant_idverification", "blueprints_app_permission", "blueprints_consent", "blueprints_flow_control", "blueprints_inspections", "blueprints_id_verification", "blueprints_shipping_address", "onboarding_locations", "documents1", "inspection_appts", "applicant_schedule_inspection", "applicant_locations", "driver_vehicle", "driver_vehicles", "applicant_get", "applicant_driver_referral"], "autonomous": ["applicant_background_check", "applicant_get"], "acquisitionbonuses": ["applicant_get"], "acquisitionguarantees": ["applicant_get", "applicant_lead"], "campaigns": ["applicant_get"], "coupons": ["applicant_driver_referral", "applicant_ride_stats", "driver_referrals", "applicant_get"], "declientapi": ["driver_referral", "driver_referrals"], "dispatch": ["documents1", "vehicles0", "applicant_get"], "dispatchcompliance": ["documents1", "vehicles0", "applicant_get"], "dispatchdropoffsworkers": ["documents1", "vehicles0", "applicant_get"], "dispatchgeofenceworkers": ["documents1", "vehicles0", "applicant_get"], "dispatchglobalmatchingworkers": ["documents1", "vehicles0", "applicant_get"], "dispatchmatchingworkerssmall": ["documents1", "vehicles0", "applicant_get"], "dispatchworkers": ["documents1", "vehicles0", "applicant_get"], "drivermode": ["client_consents", "blocking_app_status"], "drivermonitor": ["applicant_delete", "applicant_blocks", "client_drivermessages"], "drivernotification": ["client_profile", "client_goals"], "driverloyalty": ["blueprints_applicantportal_get", "client_shipping", "applicant_amp_order", "applicant_get"], "driveronboardingint": ["applicant_get", "applicant_put", "applicant_schedule_inspection", "inspection_appts", "inspection_locations"], "enterprisedispatch": ["document1"], "expressdrivefeapi": ["blueprints_applicantportal_get", "client_consents", "applicant_get", "applicant_funnel_xd", "applicant_put", "applicant_background_check"], "envoy": ["blueprints_app_data", "blueprints_email", "blueprints_sms", "healthcheck", "client_vehicles", "client_leads", "client_drivermessages", "client_referral", "client_consents", "client_profile", "client_goals", "mass_dpu", "client_shipping", "client_education", "client_eligible_vehicles", "onboarding_locations", "app_status"], "financial": ["driver_get_tax_info", "blueprints_shipping_address"], "financialairflow": ["driver_get_tax_info", "blueprints_shipping_address"], "financialairflowworkers": ["driver_get_tax_info", "blueprints_shipping_address"], "flexibleincentives": ["applicant_get"], "green": ["applicant_private_data", "documents1", "applicant_get", "blueprints_unconfirmed_shipping_addresses"], "greenbatch": ["applicant_private_data", "documents1", "applicant_get"], "greenworkers": ["applicant_private_data", "documents1", "applicant_get"], "grow": ["blueprints_applicantportal_get", "applicant_nudge", "driver_referral", "driver_referrals", "applicant_get"], "guardian": ["blueprints_applicantportal_get", "applicant_get"], "help": ["blueprints_applicantportal_get", "documents0", "applicant_get"], "images": ["images"], "inspolicies": ["bkn_insurance_upload"], "jobscheduler": ["jobscheduler", "client_drivermessages", "onboarding_locations", "applicant_amp_order", "driver1", "urmendpoints", "driver_referral_payment"], "karma": ["applicant_get"], "leadplatform": ["applicant_get"], "leadplatformint": ["document1", "documents1", "inspection_appts", "applicant_schedule_inspection", "applicant_locations", "applicant_put", "applicant_get"], "messaging": ["applicant_driver_referral", "applicant_requirements", "blueprints_applicantportal_get", "documents1", "onboarding_locations", "client_drivermessages", "client_goals", "applicant_ride_stats", "inspection_appts", "driver_referrals", "applicant_get"], "migrationworkers": ["driver_audits"], "nexus": ["applicant_driver_referral"], "onboardingflow": ["applicant_save", "applicant_dmv_check", "applicant_background_check", "applicant_idverification", "blueprints_app_permission", "blueprints_onboarding", "blueprints_consent", "blueprints_flow_control", "blueprints_inspections", "blueprints_id_verification", "blueprints_shipping_address", "onboarding_locations", "documents1", "inspection_appts", "applicant_schedule_inspection", "applicant_locations", "driver_vehicle", "driver_vehicles", "applicant_get", "applicant_driver_referral", "applicant_put", "inspection_locations"], "payapi": ["applicant_private_data", "blueprints_applicantportal_get", "blueprints_applicantportal_put", "applicant_get", "blueprints_unconfirmed_shipping_addresses"], "referrals": ["applicant_lead"], "rentals": ["applicant_save", "applicant_background_check", "driver_vehicle_activate", "documents0", "document0", "documents1", "driver_vehicle", "driver_vehicles", "applicant_get", "blueprints_applicantportal_get", "test-endpoints"], "rentalsbatch": ["applicant_background_check", "driver_vehicle_activate", "documents0", "document0", "documents1", "driver_vehicle", "driver_vehicles", "applicant_get"], "regulatoryintegrations": ["applicant_background_check", "bgc_copy", "applicant_get", "qr_code_generate"], "regulatoryintegrationsairflow": ["applicant_background_check", "bgc_copy", "applicant_get", "qr_code_generate"], "regulatoryintegrationsworkers": ["applicant_background_check", "bgc_copy", "applicant_get", "qr_code_generate"], "ridehistory": ["blueprints_applicantportal_get"], "ridescheduler": ["applicant_get"], "simulatedrides": ["blueprints_applicants"], "supportdataingest": ["applicant_get"], "taskqueuebulk": ["jobscheduler", "client_drivermessages", "onboarding_locations", "applicant_amp_order", "driver1", "urmendpoints"], "taskqueuemigration": ["jobscheduler", "client_drivermessages", "onboarding_locations", "applicant_amp_order", "driver1", "urmendpoints"], "taskqueuenormal": ["jobscheduler", "client_drivermessages", "onboarding_locations", "applicant_amp_order", "driver1", "urmendpoints"], "test": ["blueprints_applicants", "blueprints_applicantportal_put", "client_leads", "test-endpoints"], "tom": ["bgc_copy", "applicant_delete", "applicant_driver_referral", "applicant_blocks", "applicant_dmv_check", "applicant_background_check", "applicant_sms", "applicant_idverification", "applicant_onboardingcheckin", "drivermessage_templates", "users", "search", "driver_referral_meta", "inspection_locations", "tom_migration", "driver_get_tax_info", "driver_vehicle_activate", "vehicle_blocks", "applicant_consent_record", "applicant_regulatory_integration_requests", "blueprints_applicants", "blueprints_applicantportal_get", "blueprints_car_selects", "document0", "documents0", "inspection_appts", "applicant_amp_order", "applicant_schedule_inspection", "applicant_locations", "driver_vehicle", "driver_vehicles", "driver_referrals", "applicant_put", "applicant_get", "qr_code_generate"], "userprivacyrights": ["userrightsmanagement"], "vehicleinspection": ["inspection_locations", "applicant_get", "search", "driver_vehicles"], "www2": ["webleads", "blueprints_applicantportal_get", "blueprints_applicantportal_put"], "wwwbrochurefe": ["webleads", "blueprints_applicantportal_get"], "wwwdriveronboardingfe": ["bgc_copy", "blueprints_applicantportal_get", "blueprints_applicantportal_put", "webleads", "training_courses", "driver_vehicle_activate", "vehicle_ridetypes", "applicant_idverification", "documents0", "document0", "vehicle_emblem_eligibility", "vehicle_emblem", "applicant_schedule_inspection", "applicant_locations", "funnel_dead_ends", "driver_vehicle", "driver_vehicles", "driver_referral", "qr_code_generate"], "wwwdriverengagementfe": ["blueprints_applicantportal_get"], "wwwdriverxpfe": ["blueprints_applicantportal_get", "documents0", "applicant_get", "webhook_dedup"], "wwwidentityfe": ["blueprints_applicantportal_get"], "wwwpayxpfe": ["webleads", "blueprints_applicantportal_get", "blueprints_applicantportal_put"], "wwwratecardfe": ["blueprints_applicantportal_get"], "wwwreferralsfe": ["driver_referral", "driver_referrals"], "wwwsupportxpfe": ["blueprints_applicantportal_get"]}}}, "override_settings": [{"services": [{"name": "ats", "service_instance": "development"}], "settings": {"authorization": {"bindings": {"*": ["blueprints_applicants", "blueprints_applicantportal_put", "client_leads", "test-endpoints"]}}}}]}}, "logging": {"ats": {"fields": {"lyft_id": "keyword", "applicant_id": "keyword", "applicant_lyft_id": "keyword", "applicant": {"lyftId": "keyword", "user": "keyword", "id": "keyword"}, "params": {"id": "keyword", "vehicle_lyft_id": "keyword"}, "email": "keyword", "exception_type": "keyword", "phone_number": "keyword", "driver_id": "keyword", "is_rental": "boolean", "obscured_id": "keyword", "user_id": "keyword", "user": "keyword", "vehicle_id": "keyword", "vehicle_lyft_id": "keyword", "vehicle": {"lyftId": "keyword", "id": "keyword", "make": "keyword", "year": "long", "model": "keyword"}, "document": {"documentType": "keyword", "id": "keyword"}, "document_id": "keyword", "document_type": "keyword", "document_name": "keyword", "attribute_name": "keyword", "check_type": "keyword", "region": "keyword", "new_region": "keyword", "old_region": "keyword", "region_code": "keyword", "applicant_region": "keyword", "action": "keyword", "step_name": "keyword", "funnel_type": "keyword", "quick_identifier": "keyword", "label": "keyword", "source": "keyword", "name": "keyword", "request_id": "keyword", "status": "keyword", "method": "keyword", "user_agent": "keyword", "actor": "keyword", "url": "keyword", "code": "keyword", "value": "keyword", "reason": "keyword", "error": "keyword", "error_code": "long", "error_message": "keyword", "grpc_error": {"msg": "keyword", "service": "keyword", "endpoint": "keyword", "aws_request_id": "keyword"}, "app_version": "keyword", "platform": "keyword", "migration_name": "keyword", "queue_name": "keyword", "status_code": "long", "request_path": "keyword", "request_method": "keyword", "event_name": "keyword", "referrer_lyft_id": "keyword", "incentive": "keyword", "recovered_applicant_id": "keyword", "recovered_lyft_id": "keyword", "frozen_applicant_id": "keyword", "frozen_lyft_id": "keyword", "older_lyft_id": "keyword", "newer_lyft_id": "keyword", "new_applicant": {"lyftId": "keyword", "id": "keyword"}, "existing_applicant": {"id": "keyword", "lyftId": "keyword"}, "ticket_external_id": "keyword", "template_id": "keyword", "zendesk_ticket_id": "keyword", "zd_ticket_id": "keyword", "internal_ticket_id": "keyword", "ticket_id": "keyword", "requirement": "keyword", "downstream_service_cluster": "keyword", "partner_id": "keyword"}}}, "version": "ee4bcc8d082ee8afc504cc62a916b0080998cd6d", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "audience": {"name": "audience", "description": "Define groups of Lyft users based on many different attributes, typically using them for criteria based targeting", "repository": "git@github.com:lyft/audience.git", "image_type": "service", "service_tier": 2, "slack": "#notifications-bots", "team_email": "notifications-eng@lyft.com", "pagerduty_escalation_policy": "Notifications", "languages": ["bash", "python"], "configsets": ["audiencedata"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/audience", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1.5Gi"}}, {"name": "computecsvcounts", "command": "dumb-init -- service_venv python manage.py compute_csv_counts --wetrun", "sub_image": "k8s", "workdir": "/code/audience"}], "facets": [{"name": "main", "member": "audience.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"criteria": {"cpu_target": 40}, "environment": {"staging": {"min_size": 1, "max_size": 5}, "production": {"min_size": 1, "max_size": 50}}}}, {"name": "canary", "member": "audience.service", "type": "service", "canary": true, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "csvaudiencecountcron", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "member": "audience.computecsvcounts", "concurrency_policy": "allow", "schedule": "*/2 * * * *"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "redis.dev", "redis.server", "audience.legacy"]}, {"name": "integration", "members": ["audience.dev", "envoy.server", "jobscheduler.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "audience.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "target": "tests/integration", "group": "audience.integration", "virtualenv": "service_venv", "container": "audience.legacy", "command": "make test_integration", "float_dependencies": "30 5-22 * * *", "reports": {"junit": "build/integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}, {"facet": "csvaudiencecountcron"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "csvaudiencecountcron"}], "kubernetes": {"enabled": true}}]], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "audience"}], "common_settings": {"internal_hosts": {"campaignscheduler": null, "dsfeatures": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "ratelimit": null, "dsfeatureswrites": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "s3_iad": null}, "redis_clusters": {"audience": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "logging": {"audience": {"fields": {"query": "keyword", "request_id": "keyword", "max_slices": "long", "slice_id": "long", "job_id": "keyword", "audience_id": "keyword", "additional_query": "keyword", "parent_request_id": "keyword", "exception": "keyword", "request_ids": "keyword", "should_retry": "boolean", "status": "keyword"}}}, "version": "d71ea9de0bd62104d38af39891892e2a6f76294b", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "audiencedata": {"name": "audiencedata", "description": "Runtime configuration data for audiencedata", "repository": "git@github.com:lyft/audiencedata.git", "image_type": "data", "service_tier": 2, "slack": "#notifications-bots", "team_email": "notifications-eng@lyft.com", "pagerduty_escalation_policy": "devnull", "languages": ["bash", "python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "credentials": false, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/audiencedata"]}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}, {"name": "unit", "type": "jailed", "run_in_dev": false, "command": "python3 -m pytest tests/unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "029d436f71f1d0180e0ae08a0a2ed465e3b0b2ea", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "auroratailer": {"name": "auroratailer", "description": "auroratailer", "repository": "git@github.com:lyft/auroratailer.git", "slack": "#ds-data-pod", "service_tier": 3, "pagerduty_escalation_policy": "DS Data Pipeline", "team_email": "mackenziewilson@lyft.com", "slack_deploy_notification_environments": ["staging", "canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "kafka.server", "auroratailer.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "auroratailer.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "coverage_files", "type": "jailed", "run_in_pr": false, "command": "make coverage_files", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "auroratailer.dev", "container": "auroratailer.legacy", "command": "make integration"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "auroratailer"}], "common_settings": {"internal_hosts": {"analyticsingest": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null}}}}, "version": "78b52fd90d9363e14c7a866988c8061c26fec4a1", "images": [{"parent": {"name": "opsbase", "version": "ce84eccb6431b0bcb1d7cc365ed8b131f35a748c", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "ce84eccb6431b0bcb1d7cc365ed8b131f35a748c", "sub_image": null, "external": false}}, "auth": {"name": "auth", "description": "auth", "repository": "git@github.com:lyft/auth.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igocli:c1e2d5c25643b7ca394caded92a0d09d2896b2fc", "sub_image": "k8s"}}, {"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_phase": "sequential_service"}, {"name": "service", "command": "dumb-init -- auth", "workdir": "/code/auth", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}], "facets": [{"name": "main", "member": "auth.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 4, "max_size": 180}}}}, {"name": "canary", "member": "auth.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "auth.legacy", "dbproxyauth.dev", "ratelimit.dev", "idl.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "auth.dev"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "unit", "type": "execution", "group": "auth.dev", "container": "auth.legacy", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "auth.dev", "container": "auth.legacy", "command": "make integration"}, {"name": "coverage", "type": "execution", "group": "auth.dev", "container": "auth.legacy", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#identity-eng", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "identity-eng@lyft.com", "pagerduty_escalation_policy": "Identity Eng", "notification_overrides": {"pr_open": {"slack": "#identity-prs"}, "deploy": {"slack": "#identity-bots"}, "deploy_failure": {"slack": "#identity-bots"}, "test_failure": {"slack": "#identity-bots"}, "master_failure": {"slack": "#identity-bots"}, "pr_merge": {"slack": "#identity-bots"}, "behind_notifications": {"slack": "#identity-bots"}}, "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}], "service_tier": 0, "languages": ["go"], "image_type": "service", "docs": {"godoc_packages": ["github.com/lyft/auth", "github.com/lyft/auth/script", "github.com/lyft/auth/config"]}, "envoy": {"profile": "go", "settings": {"services": [{"name": "auth"}], "common_settings": {"authorization": {"permissions": {"create-session": {"paths": ["/pb.lyft.auth.Authentication/CreateSession"]}, "refresh-session": {"paths": ["/pb.lyft.auth.Authentication/RefreshSession"]}, "authenticate": {"paths": ["/pb.lyft.auth.Authentication/Authenticate"]}, "invalidate-session": {"paths": ["/pb.lyft.auth.Authentication/InvalidateSession", "/pb.lyft.auth.Authentication/InvalidateSessions"]}, "force-refresh": {"paths": ["/pb.lyft.auth.Authentication/ForceRefresh"]}, "force-upgrade": {"paths": ["/pb.lyft.auth.Authentication/ForceUpgrade"]}, "get-refresh-token-hash": {"paths": ["/pb.lyft.auth.Authentication/GetRefreshTokenHash"]}, "expand-scope": {"paths": ["/pb.lyft.auth.Authentication/ExpandScope"]}, "lookup-sessions": {"paths": ["/pb.lyft.auth.Authentication/GetSession", "/pb.lyft.auth.Authentication/GetSessionForToken", "/pb.lyft.auth.Authentication/GetSessions"]}, "get-client": {"paths": ["/pb.lyft.auth.ClientManager/GetClient"]}, "manage-clients": {"paths": ["/pb.lyft.auth.ClientManager/CreateClient", "/pb.lyft.auth.ClientManager/SuspendClient", "/pb.lyft.auth.ClientManager/ResumeClient", "/pb.lyft.auth.ClientManager/SetClientPrivileges", "/pb.lyft.auth.ClientManager/SetClientVersion", "/pb.lyft.auth.ClientManager/SetClientWebhookUrl", "/pb.lyft.auth.ClientManager/InvalidateClient"]}}, "bindings": {"account": ["create-session", "force-refresh", "force-upgrade", "get-client", "invalidate-session", "lookup-sessions", "manage-clients", "refresh-session", "expand-scope"], "autonomous": ["create-session"], "challenges": ["force-upgrade", "lookup-sessions"], "enterprise": ["lookup-sessions"], "enterprisedispatch": ["get-client", "lookup-sessions"], "envoy": ["authenticate"], "graphql": ["lookup-sessions"], "legacyoauth": ["create-session", "get-client", "invalidate-session", "lookup-sessions", "manage-clients", "refresh-session"], "loyaltypartnerships": ["lookup-sessions"], "migrationworkers": ["create-session", "invalidate-session", "lookup-sessions"], "tom": ["lookup-sessions"], "*": ["authenticate", "get-refresh-token-hash"], "tests": ["*"]}}, "internal_hosts": {"dbproxyauth": null, "ratelimit": null}}}}, "logging": {"auth": {"fields": {"requestId": "keyword", "service": "keyword", "request_id": "keyword", "code": "keyword", "endpoint": "keyword", "lyft_user_id": "keyword", "error": "keyword", "downstream_cluster": "keyword", "method": "keyword", "session_id": "keyword", "client_id": "keyword", "occurred_at": "date", "event_id": "keyword", "event_name": "keyword", "http_id": "keyword", "user_id": "keyword", "exception": "keyword", "attempt_num": "long", "traceback": "keyword", "failed_record": "keyword", "path": "keyword", "host": "keyword", "err": "keyword", "operation": "keyword", "dbproxy": "keyword", "original": "long", "count": "long", "invalidated": "long", "skipped": "long"}}}, "version": "dc2214565a9f7000fa103d2d98e88a0d6b2b3022", "images": [{"parent": {"name": "s2igocli", "version": "c1e2d5c25643b7ca394caded92a0d09d2896b2fc", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "bd8615cdc0a53fe60b894b4b0cc3447deeb0e366", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "bd8615cdc0a53fe60b894b4b0cc3447deeb0e366", "sub_image": null, "external": false}}, "autograder": {"name": "autograder", "description": "Autograder for Lyft laptop interview questions", "repository": "git@github.com:lyft/autograder.git", "slack": "#laptop-autograder", "slack_deploy_notification_environments": ["production", "staging"], "pagerduty_escalation_policy": "devnull", "team_email": "egoh@lyft.com", "image_type": "service", "languages": ["bash", "java", "javascript", "python"], "frontend": {"node_version": "8.12.0-1nodesource1"}, "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "spin", "command": "sleep infinity"}], "custom": {"frontend_service": true, "internal_service": true}, "groups": [{"name": "dev", "members": ["control.dev", "autograder.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "autograder.dev"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}], "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "autograder"}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:1de17b2c133a84a6096806ef9ba985a9ac009b54", "sub_image": "precommit"}}]}}, "version": "16063952dcc5c10ac3421661342687fcceb2ad14", "images": [{"parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "1de17b2c133a84a6096806ef9ba985a9ac009b54", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}}, "autonomous": {"name": "autonomous", "description": "autonomous", "repository": "git@github.com:lyft/autonomous.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}}, {"name": "checketapolling", "command": "/usr/local/bin/service_venv python /code/autonomous/manage.py check-eta-polling >> /var/log/lyft/cron-check-polling.log 2>&1", "workdir": "/code/autonomous", "sub_image": "k8s"}, {"name": "checkpollingheartbeat", "command": "/usr/local/bin/service_venv python /code/autonomous/manage.py check-polling-heartbeat >> /var/log/lyft/cron-check-polling-heartbeat.log 2>&1", "workdir": "/code/autonomous", "sub_image": "k8s"}, {"name": "queryprovideranalyticsaptiv", "command": "/usr/local/bin/service_venv python /code/autonomous/manage.py query-provider-analytics -p aptiv >> /var/log/lyft/cron-query-provider-analytics-aptiv.log 2>&1", "workdir": "/code/autonomous", "sub_image": "k8s"}, {"name": "heartbeatdocuments", "command": "/usr/local/bin/service_venv python /code/autonomous/manage.py heartbeat-documents >> /var/log/lyft/cron-heartbeat-documents.log 2>&1", "workdir": "/code/autonomous", "sub_image": "k8s"}, {"name": "recomputeprepositioning", "command": "/usr/local/bin/service_venv python /code/autonomous/manage.py recompute-preposition >> /var/log/lyft/cron-recompute-prepositioning.log 2>&1", "workdir": "/code/autonomous"}, {"name": "checkdriverheartbeat", "command": "/usr/local/bin/service_venv python /code/autonomous/manage.py check-driver-heartbeat >> /var/log/lyft/cron-check-driver-heartbeat.log 2>&1", "workdir": "/code/autonomous", "sub_image": "k8s"}, {"name": "updatedisengagementreportaccuracy", "command": "/usr/local/bin/service_venv python /code/autonomous/manage.py update-disengagement-report-accuracy >> /var/log/lyft/cron-update-disengagement-report-accuracy.log 2>&1", "workdir": "/code/autonomous", "sub_image": "k8s"}, {"name": "ensuredisengagementreportaccuracyrecency", "command": "/usr/local/bin/service_venv python /code/autonomous/manage.py ensure-disengagement-report-accuracy-recency >> /var/log/lyft/cron-ensure-disengagement-report-accuracy-recency.log 2>&1", "workdir": "/code/autonomous", "sub_image": "k8s"}, {"name": "updatetimesinvehicle", "command": "/usr/local/bin/service_venv python /code/autonomous/manage.py update-times-in-vehicle >> /var/log/lyft/cron-update-times-in-vehicle.log 2>&1", "workdir": "/code/autonomous", "sub_image": "k8s"}, {"name": "ensureupdatetimesinvehiclerecency", "command": "/usr/local/bin/service_venv python /code/autonomous/manage.py ensure-times-in-vehicle-recency >> /var/log/lyft/cron-ensure-times-in-vehicle-recency.log 2>&1", "workdir": "/code/autonomous", "sub_image": "k8s"}], "facets": [{"name": "main", "member": "autonomous.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 5}}}}, {"name": "canary", "member": "autonomous.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "checketapolling", "member": "autonomous.checketapolling", "type": "cron", "schedule": "*/1 * * * *", "concurrency_policy": "Forbid"}, {"name": "checkpollingheartbeat", "member": "autonomous.checkpollingheartbeat", "type": "cron", "schedule": "*/1 * * * *", "concurrency_policy": "Forbid"}, {"name": "queryprovideranalyticsaptiv", "member": "autonomous.queryprovideranalyticsaptiv", "type": "cron", "schedule": "* */6 * * *"}, {"name": "heartbeatdocuments", "member": "autonomous.heartbeatdocuments", "type": "cron", "schedule": "0 0 * * *"}, {"name": "recomputeprepositioning", "member": "autonomous.recomputeprepositioning", "type": "cron", "schedule": "*/15 * * * *"}, {"name": "checkdriverheartbeat", "member": "autonomous.checkdriverheartbeat", "type": "cron", "schedule": "@hourly"}, {"name": "updatedisengagementreportaccuracy", "member": "autonomous.updatedisengagementreportaccuracy", "type": "cron", "schedule": "* */12 * * *"}, {"name": "ensuredisengagementreportaccuracyrecency", "member": "autonomous.ensuredisengagementreportaccuracyrecency", "type": "cron", "schedule": "0 18 * * *"}, {"name": "updatetimesinvehicle", "member": "autonomous.updatetimesinvehicle", "type": "cron", "schedule": "* */12 * * *"}, {"name": "ensureupdatetimesinvehiclerecency", "member": "autonomous.ensureupdatetimesinvehiclerecency", "type": "cron", "schedule": "0 18 * * *"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "redis.dev", "autonomous.legacy"]}, {"name": "integration", "members": ["account.dev", "acquisitionguarantees.dev", "analyticsingest.dev", "autonomous.dev", "ats.dev", "auth.dev", "backgroundcheck.dev", "compliance.dev", "dispatch.dev", "drivermode.dev", "driverridesinfo.dev", "dsfeatures.dev", "etaproxy.dev", "fare.dev", "fleetmanagement.dev", "ghostmatching.dev", "green.dev", "jobscheduler.dev", "locations.dev", "lyfttestlib.ride", "mailer.dev", "matching.dev", "matchingsolver.legacy", "matchingexecution.dev", "regions.dev", "rides.dev", "ridesapi.dev", "routes.dev", "routesapi.dev", "supply.dev", "supplyrecords.dev", "tcs.dev", "tripsapi.dev", "usergroups.dev", "users.dev", "vehiclemetadata.dev", "venues.dev", "viewport.dev", "wallet.dev", "walletapi.dev", "trips.dev"]}, {"name": "qa", "members": ["autonomous.integration", "publicapi.dev", "tom.dev", "ridescheduler.dev", "ats.qa_approve", "karma.dev", "ridelocations.dev", "venues.dev", "coupons.dev", "ridesapi.dev", "routesapi.dev"]}], "tests": [{"name": "start", "type": "startup", "group": "autonomous.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy"}, {"name": "integration", "type": "execution", "group": "autonomous.integration", "container": "autonomous.legacy", "command": "make test_integration", "skip_threshold": 17, "reports": {"junit": "build/int.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "command": "env TEST_TAGS=\"unit_legacy\" make test_unit", "container": "autonomous.legacy", "group": "autonomous.dev", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml"}}], "team_email": "Autonomous-Team@lyft.com", "pagerduty_escalation_policy": "Autonomous", "service_tier": 2, "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "main"}, {"facet": "checketapolling"}, {"facet": "checkpollingheartbeat"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "availability_zone": "us-east-1d", "legacy": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": true, "targets": [{"facet": "canary"}, {"facet": "main"}, {"facet": "checketapolling"}], "kubernetes": {"enabled": true}}]], "languages": ["python"], "image_type": "service", "slack": "#autonomous-server", "envoy": {"profile": "python", "settings": {"services": [{"name": "autonomous"}, {"name": "autonomousworkers"}], "common_settings": {"internal_hosts": {"ats": {"tls_enabled": true}, "auth": null, "autonomous": null, "autonomousfleetmanagement": null, "avingestrealtime": null, "dispatch": null, "dsfeatures": null, "dsfeatureswrites": null, "etaproxy": null, "fleetmanagement": null, "jobschedulernormalweb": null, "jobschedulerbulkweb": null, "locations": null, "locationsingest": null, "mailer": null, "messaging": null, "notes": null, "regions": null, "rides": null, "ridesapi": null, "routes": null, "routesapi": null, "superset": null, "supply": null, "supplyrecords": {"tls_enabled": true}, "switchboard": null, "tcs": null, "tripsapi": null, "usergroups": null, "users": null, "venues": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "redis_clusters": {"autonomous": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "pulldeploy_components": {"data": ["marketplaceconfig", "regioncfgdata", "translationdata"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "packages": ["libgeos-dev", "libspatialindex-dev"], "sub_image": "k8s"}}]}}, "logging": {"autonomous": {"fields": {"passenger_id": "keyword", "origin": "keyword", "destination": "keyword", "provider_id": "keyword", "ride_id": "keyword", "circuit_id": "keyword", "driver_id": "keyword", "ride_type": "keyword", "ext_vehicle_id": "keyword", "occurred_at": "keyword", "lyft_vehicle_id": "keyword", "user_id": "keyword", "destination_lat": "float", "origin_lng": "float", "region": "keyword", "destination_lng": "float", "origin_lat": "float", "external_vehicle_id": "keyword", "dispatch_model": "keyword", "sign_out_reason": "keyword", "vehicle_id": "keyword", "stop": "keyword", "doc_id": "keyword", "created_at_ns": "keyword", "type": "keyword", "external_ride_id": "keyword", "region_code": "keyword", "twilio_number": "keyword", "photo_uri": "keyword", "in_driver_mode": "boolean", "traceback": "keyword", "exception": "keyword", "attempt_num": "long", "dispatch_failure_reason": "keyword", "paired_at": "date", "shift_start": "date", "event_start": "date", "failed_record": "keyword", "message": "keyword", "channel": "keyword", "username": "keyword"}}, "autonomousworkers": {"fields": {"provider_id": "keyword", "region_code": "keyword", "vehicle_id": "keyword", "destination": "keyword", "origin": "keyword", "driver_id": "keyword", "created_at_ns": "keyword", "doc_id": "keyword", "in_ride_vehicles": "long", "idle_vehicles": "long", "active_vehicles": "long", "n_assigned_tasks": "long", "expected_demand": "float", "n_tasks": "long", "n_tasks_pushed": "long", "n_unassigned_tasks": "long", "n_active_tasks": "long", "prepositioning_vehicles": "long", "prepositioning": "long", "ride_id": "keyword", "attempt_num": "long", "traceback": "keyword", "exception": "keyword", "failed_record": "keyword"}}}, "version": "98299f00682791f8d6b1c22265d0c47a3414e66a", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "autonomousfleetmanagement": {"name": "autonomousfleetmanagement", "description": "R&D concerns for autonomous fleet management", "repository": "git@github.com:lyft/autonomousfleetmanagement.git", "slack": "#autonomous-server", "team_email": "open-platform@lyft.com", "pagerduty_escalation_policy": "Autonomous", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/autonomousfleetmanagement", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "autonomousfleetmanagement.legacy", "dynamodb.server"]}, {"name": "integration", "members": ["autonomousfleetmanagement.dev", "avingestrealtime.dev", "autonomous.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "autonomousfleetmanagement.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "autonomousfleetmanagement.integration", "container": "autonomousfleetmanagement.legacy", "command": "make test_integration", "skip_threshold": 1, "reports": {"junit": "build/int.xml"}}], "facets": [{"name": "main", "member": "autonomousfleetmanagement.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "autonomousfleetmanagement.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "autonomousfleetmanagement"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"autonomous": null}, "external_hosts": {"dynamodb_iad": null}}}}, "logging": {"autonomousfleetmanagement": {"fields": {"vehicle_id": "keyword", "level5_vehicle_id": "keyword"}}}, "version": "0ce4877d79df2d0cb10171050f1758b886316849", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "autonomousfleetmgmtext": {"name": "autonomousfleetmgmtext", "description": "An external facing react frontend service that is accessed by business partners to view their autonomous fleets.", "repository": "git@github.com:lyft/autonomousfleetmgmtext.git", "image_type": "service", "service_tier": 2, "slack": "#autonomous-server", "team_email": "open-platform@lyft.com", "pagerduty_escalation_policy": "Autonomous", "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "groups": [{"name": "dev", "members": ["control.dev", "autonomousfleetmgmtext.legacy", "autonomous.dev"]}, {"name": "integration", "members": ["autonomousfleetmgmtext.dev", "accountfrontend.integration", "autonomousfleetmgmtint.dev", "supplyrecords.dev", "notes.dev", "supply.dev", "fleetmanagement.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "autonomousfleetmgmtext.dev"}, {"name": "dist", "type": "jailed", "command": "npm run dist"}, {"name": "unit", "type": "jailed", "command": "npm run test"}, {"name": "lint", "type": "jailed", "command": "npm run lint"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "frontend": {"node_version": "10.14.1-1nodesource1"}, "envoy": {"profile": "python", "settings": {"services": [{"name": "autonomousfleetmgmtext"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"autonomous": null}}}}, "version": "73f430214eb72acd063dabba99e1403ecc4eb464", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "autonomousfleetmgmtint": {"name": "autonomousfleetmgmtint", "description": "An internal react frontend service for management needs of autonomous fleets", "repository": "git@github.com:lyft/autonomousfleetmgmtint.git", "image_type": "service", "service_tier": 2, "slack": "#autonomous-server", "team_email": "open-platform@lyft.com", "pagerduty_escalation_policy": "Autonomous", "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "groups": [{"name": "dev", "members": ["control.dev", "autonomousfleetmgmtint.legacy", "tom.dev", "autonomous.dev", "supply.dev", "fleetmanagement.dev"]}, {"name": "integration", "members": ["autonomousfleetmgmtint.dev", "supplyrecords.dev", "notes.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "autonomousfleetmgmtint.dev"}, {"name": "dist", "type": "jailed", "command": "npm run dist"}, {"name": "unit", "type": "jailed", "command": "npm run test"}, {"name": "lint", "type": "jailed", "command": "npm run lint"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "frontend": {"node_version": "10.14.1-1nodesource1"}, "envoy": {"profile": "python", "settings": {"services": [{"name": "autonomousfleetmgmtint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"tom": null}}}}, "version": "5953f965fd9d438c9be1e34f9c5ae3ccc4b149d4", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "autonomousinridefe": {"name": "autonomousinridefe", "description": "External front-end service for AV Open Platform's new inride tablet experience", "repository": "git@github.com:lyft/autonomousinridefe.git", "slack": "#aop-inride-xp", "team_email": "aop-inride-xp@lyft.com", "pagerduty_escalation_policy": "Autonomous", "image_type": "service", "service_tier": 2, "languages": ["javascript"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1"}}, {"name": "s2i", "params": {"builder": "lyft/s2inode:service.7f8eae0490b5aaea769ca5a6e587af0f727e965e", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "cdnupload", "command": "/code/autonomousinridefe/cdn-upload", "sub_image": "k8s"}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "autonomousinridefe.legacy"]}, {"name": "service_group", "members": ["autonomousinridefe.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "autonomousinridefe.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "facets": [{"name": "assets", "member": "feexample.cdnupload", "type": "job"}, {"name": "main", "member": "autonomousinridefe.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "autonomousinridefe.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "autonomousinridefe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}}}}, "version": "56cd3af6e587277681c2a8a97c79ae7a770d6010", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2inode", "version": "7f8eae0490b5aaea769ca5a6e587af0f727e965e", "sub_image": "service", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "autonomouspartners": {"name": "autonomouspartners", "repository": "git@github.com:lyft/autonomouspartners.git", "description": "Open Platform Partner API service", "service_tier": 2, "team_email": "aop-engineering@lyft.com", "pagerduty_escalation_policy": "Autonomous", "slack": "#autonomous-server", "slack_deploy_notification_environments": ["staging", "canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:8ad0040e2e37145a4ff8cdfc6669f48462d32b14", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- autonomouspartners", "limits": {"cpu": 4, "memory": "512Mi"}, "sub_image": "k8s", "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "autonomouspartners.legacy", "autonomous.dev", "routesapi.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "autonomouspartners.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "autonomouspartners.dev", "container": "autonomouspartners.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "autonomouspartners.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "autonomouspartners.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {"internal_hosts": {"autonomous": null, "routesapi": null}}, "services": [{"name": "autonomouspartners"}]}}, "version": "cb37d88b77ff8e659035a8b2e6b4a46e3bd20fdf", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "8ad0040e2e37145a4ff8cdfc6669f48462d32b14", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "avarvideos": {"name": "avarvideos", "description": "Serves video clips overlaying semantic elements on video recorded by autonomous vehicles.", "repository": "git@github.com:lyft/avarvideos.git", "slack": "#av-mapping-bots", "team_email": "kzhang@lyft.com", "pagerduty_escalation_policy": "AV Mapping Platform", "image_type": "service", "service_tier": 3, "languages": ["python", "bash"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build", "params": {"sub_image": "av", "dockerfile": "Dockerfile.av"}}, {"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "avservice", "command": "/app/src/map/web/ar_video_server --avingest_url=https://avdata.lyft.net/api/v2 --avds_client=library", "sub_image": "av", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "service", "command": "service_venv gunicorn app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/avarvideos", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "servicegroup", "members": ["avarvideos.service", "avarvideos.avservice"]}, {"name": "dev", "members": ["control.dev", "avarvideos.legacy"]}, {"name": "service_group", "members": ["avarvideos.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "avarvideos.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "avarvideos.servicegroup", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "avarvideos.servicegroup", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "avarvideos"}], "common_settings": {"external_hosts": {"s3_iad": null}}}}, "version": "16dfe1b9fde03a5ff37f233462c5463ae22083f6", "images": [{"parent": {"name": "library.iad.aws.core.av.lyft.net", "version": "5301/tool/map_arvideo:1.1.56205", "sub_image": null, "external": true}, "sub_image": "av"}, {"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "avbqetl": {"name": "avbqetl", "description": "AV BigQuery ETL", "repository": "git@github.com:lyft/avbqetl.git", "slack": "#av-bots", "team_email": "av-analytics-dev@lyft.com", "credentials": true, "pagerduty_escalation_policy": "AV Data Infra", "image_type": "service", "service_tier": 3, "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "avbqetl.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "avbqetl.dev", "container": "avbqetl.spin", "command": "make register_for_pr"}], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "version": "557a308ba75113e9d11eb74e52ad2b6a1fe6eaff", "images": [{"parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}}, "avdatacuration": {"name": "avdatacuration", "description": "Data curation platform", "repository": "git@github.com:lyft/avdatacuration.git", "slack": "#av-kn-viz-bots", "team_email": "av-talos@lyft.com", "pagerduty_escalation_policy": "AV Knowledge Visualization", "image_type": "service", "service_tier": 2, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "avdatacuration.legacy"]}, {"name": "service_group", "members": ["avdatacuration.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "avdatacuration.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "avdatacuration.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "avdatacuration.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "avdatacuration"}], "common_settings": {"external_hosts": {"s3_iad": null, "kinesis_iad": null, "dynamodb_iad": null}}}}, "version": "6507a22a3d88b3336a930ebf2159cf0c60a8d08e", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "avetl": {"name": "avetl", "description": "Repository for L5 ETL jobs", "repository": "git@github.com:lyft/avetl.git", "slack": "#av-mapping-bots", "team_email": "akumar@lyft.com", "pagerduty_escalation_policy": "AV Mapping Platform", "image_type": "flyteworkflow", "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "avetl.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "avetl.dev", "container": "avetl.spin", "command": "make register_for_pr"}], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "version": "732bc93d324805e2a686c8f3cca4f737772178ef", "images": [{"parent": {"name": "flytebase", "version": "c72959ac85ee74224bdc9c8f774c5f1790240ba0", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "flytebase", "version": "c72959ac85ee74224bdc9c8f774c5f1790240ba0", "sub_image": null, "external": false}}, "avfe": {"name": "avfe", "description": "Level 5 autonomous vehicle frontend. Search, review, and perform actions on AV data.", "repository": "git@github.com:lyft/avfe.git", "image_type": "service", "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"service_type": "nodejs", "frontend_service": true, "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "avfe.legacy", "tom.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "avfe.dev"}, {"name": "unit", "type": "execution", "group": "avfe.dev", "container": "avfe.legacy", "command": "make test_unit", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml"}}, {"name": "lint", "type": "execution", "group": "avfe.dev", "container": "avfe.legacy", "command": "make test_lint"}, {"name": "build_dist", "type": "execution", "group": "avfe.dev", "container": "avfe.legacy", "command": "make build_dist"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "slack": "#av-web-deploys", "team_email": "av-frontend@lyft.com", "pagerduty_escalation_policy": "AV Frontend", "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "avfe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"avarvideos": null, "privacyaudit": null}}}}, "version": "0e5bb5810078736fcdfb12e413d478d11b5e97a5", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "avfleettrajectories": {"name": "avfleettrajectories", "description": "trajectories", "repository": "git@github.com:lyft/avfleettrajectories.git", "slack": "#av-trajectories-flyte", "team_email": "av-london-trajectories@lyft.com", "pagerduty_escalation_policy": "FleetTrajectories", "image_type": "flyteworkflow", "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "avfleettrajectories.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "avfleettrajectories.dev", "container": "avfleettrajectories.spin", "command": "make register_for_pr"}], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "version": "fe66b136ab24fe6be6d1f577cde499648f1dda8a", "images": [{"parent": {"name": "flytebase", "version": "0849e7d3b296b36c5780dabaaa0575f1ebb65822", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "flytebase", "version": "0849e7d3b296b36c5780dabaaa0575f1ebb65822", "sub_image": null, "external": false}}, "avgoshifu": {"name": "avgoshifu", "description": "avgoshifu", "repository": "git@github.com:lyft/avgoshifu.git", "slack": "#av-munich-bots", "team_email": "akumar@lyft.com", "pagerduty_escalation_policy": "Av Example", "service_tier": 3, "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "avgoshifu.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "avgoshifu.dev"}, {"name": "unit", "type": "jailed", "group": "avgoshifu.dev", "container": "avgoshifu.service", "command": "make test_unit"}, {"name": "coverage_files", "type": "jailed", "group": "avgoshifu.dev", "container": "avgoshifu.service", "run_in_pr": false, "command": "make coverage_files", "reports": {"cobertura": "build/coverage.xml"}}], "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "avgoshifu"}], "common_settings": {"internal_hosts": {"avingest": null}}}}, "version": "4e26c7f4c743b138fb4e76ff167468af2965f548", "images": [{"parent": {"name": "opsbase", "version": "acbb886d4e7a7273355460f4ceb3762be651357a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "acbb886d4e7a7273355460f4ceb3762be651357a", "sub_image": null, "external": false}}, "avgrandslam": {"name": "avgrandslam", "description": "Grand SLAM service setup", "repository": "git@github.com:lyft/avgrandslam.git", "image_type": "service", "service_tier": 3, "slack": "#av-munich-bots", "team_email": "av-sw-slam@lyft.com", "pagerduty_escalation_policy": "AV Grand SLAM", "languages": ["python", "bash"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "controllerservice", "command": "/usr/bin/controller_main", "workdir": "/code/avgrandslam", "sub_image": "controller", "limits": {"cpu": 4, "memory": "7.5Gi"}}, {"name": "workers", "command": "/usr/bin/worker_main", "workdir": "/code/avgrandslam", "sub_image": "controller", "limits": {"cpu": 8, "memory": "15Gi"}}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.controller", "sub_image": "controller"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:33730d35bcd2ee744288051c2813d85e8faeafea", "sub_image": "precommit"}}]}}, "groups": [{"name": "dev", "members": ["control.dev", "avgrandslam.legacy"]}, {"name": "service_group", "members": ["avgrandslam.controllerservice", "avgrandslam.workers"]}], "tests": [{"name": "startup", "type": "startup", "group": "avgrandslam.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "kubernetes": {"enabled": false}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "kubernetes": {"enabled": false}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": false}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": false}}, {"name": "production", "legacy": false, "automatic": true, "kubernetes": {"enabled": false}}]], "python": {"mypy": {"python_versions": ["3.6"], "exclude": ["ops"]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "avgrandslam"}], "common_settings": {"internal_hosts": {"avingest": null}}}}, "version": "2fc596309d442a6efe5bbe29d21d0e3dd3fb404f", "images": [{"parent": {"name": "opsbase", "version": "f4a12a66a5e245afa278f779a1ba96cdeb066ccc", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "ubuntu", "version": "xenial", "sub_image": null, "external": true}, "sub_image": "controller"}, {"parent": {"name": "precommit", "version": "33730d35bcd2ee744288051c2813d85e8faeafea", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "f4a12a66a5e245afa278f779a1ba96cdeb066ccc", "sub_image": null, "external": false}}, "avincarperceptionscience": {"name": "avincarperceptionscience", "description": "models for in car perception", "repository": "git@github.com:lyft/avincarperceptionscience.git", "image_type": "service", "service_tier": 3, "slack": "#open-platform-in-ride", "team_email": "open-platform-in-ride@lyft.com", "pagerduty_escalation_policy": "open-platform-inride", "languages": ["python", "bash"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "avincarperceptionscience.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "avincarperceptionscience.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml"}}, {"name": "integration", "type": "restricted", "group": "avincarperceptionscience.dev", "container": "avincarperceptionscience.legacy", "command": "make test_integration", "whitelist": ["s3.amazonaws.com.", "s3-1-w.amazonaws.com.", "avincarperceptionscience-development-iad-onebox.lyft.net."], "reports": {"junit": "build/int.xml"}}, {"name": "workflow_registration", "type": "execution", "group": "avincarperceptionscience.dev", "container": "avincarperceptionscience.legacy", "command": "service_venv mbadmin register-workflows new -n avincarperceptionscience -i development"}], "deploy": [{"name": "development", "automatic": true, "legacy": true, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "python": {"mypy": {"python_versions": ["3.6"], "exclude": ["ops"]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "avincarperceptionscience"}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:996596c91bc930bf95d38675b6d82bd82b3198c3", "sub_image": "precommit"}}]}}, "version": "9bba03f5af6adc4fbbb380c4e066b961500bca0a", "images": [{"parent": {"name": "opsbase", "version": "ce65e7b7f0f600bc8d17b21773592d2361e7aa33", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "996596c91bc930bf95d38675b6d82bd82b3198c3", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "ce65e7b7f0f600bc8d17b21773592d2361e7aa33", "sub_image": null, "external": false}}, "avingest": {"name": "avingest", "description": "The Autonomous Vehicle Data Ingestion Pipeline. Propagate, store and index the data collected by our SDSs in the cloud(TM)", "repository": "git@github.com:lyft/avingest.git", "image_type": "service", "languages": ["bash", "python"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "credentials": true, "credentials_legacy": true, "pagerduty_escalation_policy": "AV Data Infra", "team_email": "av-sw@lyft.com", "slack": "#av-bots", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "kafka.server", "dynamodb.server", "sqs.server", "elasticsearch5.server", "ratelimit.dev", "avingest.legacy", "places.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "avingest.dev"}, {"name": "format", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "execution", "group": "avingest.dev", "container": "avingest.legacy", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "avingest.dev", "container": "avingest.legacy", "command": "make test_integration"}, {"name": "regression", "type": "execution", "group": "avingest.dev", "container": "avingest.legacy", "command": "make test_regression"}], "deploy": [{"name": "staging", "legacy": true, "bake_time_minutes": 0, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "validate_staging", "legacy": true, "automatic": true, "orca": []}, {"name": "canary", "legacy": true, "bake_time_minutes": 10, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "orca": [{"region": "iad"}]}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], {"name": "validate_production", "legacy": true, "automatic": true, "orca": []}], "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "avingest"}, {"name": "avingestbackfill"}, {"name": "avingestbackfillscheduler"}, {"name": "avingestbatch"}, {"name": "avingestfleetcamdata"}, {"name": "avingestindex"}, {"name": "avingestlyftbagconsumer"}, {"name": "avingestnotifications"}, {"name": "avingestkafkadataconsumer"}], "common_settings": {"internal_hosts": {"jobschedulernormalweb": null, "ratelimit": null, "places": null}, "external_hosts": {"dynamodb_iad": null, "sqs_iad": null, "s3_iad": null, "s3_pdx": null, "s3_sfo": null}}}}, "logging": {"avingest": {"fields": {"log_type": "keyword", "from": "text", "client_ip": "keyword", "endpoint_descriptor": "keyword", "base_url": "text", "url": "text", "user_agent": "text", "http_method": "keyword", "resource": "keyword"}}}, "version": "3e2107126d7f5da19ce4598cdfa79db09eb7cdc5", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "avingestrealtime": {"name": "avingestrealtime", "description": "Ingestion of real time data from autonomous vehicles.", "repository": "git@github.com:lyft/avingestrealtime.git", "image_type": "service", "service_tier": 2, "slack": "#autonomous-server", "team_email": "open-platform-supply@lyft.com", "pagerduty_escalation_policy": "Autonomous", "languages": ["python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/avingestrealtime", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}], "groups": [{"name": "dev", "members": ["control.dev", "avingestrealtime.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "avingestrealtime.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "avingestrealtime"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"autonomous": null, "autonomousfleetmanagement": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:d310de40ce5dcd06ff19f9d7cebd1527447c301b"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "logging": {"avingestrealtime": {"fields": {"location_topic": "keyword", "mission_topic": "keyword", "car_id": "keyword"}}}, "facets": [{"name": "main", "member": "avingestrealtime.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 5, "max_size": 5}}}}, {"name": "canary", "member": "avingestrealtime.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "version": "cceaff178ea42768e86e1269f0f2f40f2f627527", "images": [{"parent": {"name": "opsbase", "version": "d310de40ce5dcd06ff19f9d7cebd1527447c301b", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "d310de40ce5dcd06ff19f9d7cebd1527447c301b", "sub_image": null, "external": false}}, "avlidardata": {"name": "avlidardata", "description": "Serves LiDAR data for Talos frontend and other AV services", "repository": "git@github.com:lyft/avlidardata.git", "slack": "#av-kn-viz-bots", "team_email": "av-talos@lyft.com", "pagerduty_escalation_policy": "AV Knowledge Visualization", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:ce84eccb6431b0bcb1d7cc365ed8b131f35a748c"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/avlidardata", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "avlidardata.legacy"]}, {"name": "service_group", "members": ["avlidardata.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "avlidardata.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "avlidardata.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "avlidardata.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "avlidardata"}], "common_settings": {"external_hosts": {"s3_iad": null}}}}, "version": "3bbcf709db5800eb21e5c6cf706ec7ef2310d070", "images": [{"parent": {"name": "opsbase", "version": "ce84eccb6431b0bcb1d7cc365ed8b131f35a748c", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "ce84eccb6431b0bcb1d7cc365ed8b131f35a748c", "sub_image": null, "external": false}}, "avmap": {"name": "avmap", "description": "Microservice to build semantic maps for autonomous cars", "repository": "git@github.com:lyft/avmap.git", "slack": "#av-auto-map", "team_email": "av-mapping-platform@lyft.com", "pagerduty_escalation_policy": "AV Mapping Platform", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:348e2b17a31a41ab74261d5f93e6e0c90cff2bd2", "buildargs": ["PY3_MIGRATE=true", "PIP_EXTRA_INDEX_URL=https://nexus.iad.aws.core.av.lyft.net:5302/repository/pypi-internal/simple"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d1cb9c056a95d78685702e724b485de3870be5c2", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s", "buildargs": ["PIP_EXTRA_INDEX_URL=https://nexus.iad.aws.core.av.lyft.net:5302/repository/pypi-internal/simple"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/avmap", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "kafkaconsumer", "command": "exec service_venv python3.6 /srv/service/next/app/workers/avautomap_kafka_consumer.py", "workdir": "/code/avmap", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "avmap.legacy"]}, {"name": "service_group", "members": ["avmap.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "avmap.dev"}, {"name": "unit", "type": "jailed", "command": "service_venv pytest --cov=app --junitxml=build/unit.xml --cov-report=xml tests/unit", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "avmap.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "lyftbagconsumer", "member": "avmap.kafkaconsumer", "type": "worker", "autoscaling": {"environment": {"production": {"min_size": 2, "max_size": 4}, "staging": {"min_size": 1, "max_size": 1}}}}, {"name": "canary", "member": "avmap.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "avmap"}]}}, "version": "1179f39fff7c28980c07078e24de1877312c14bb", "images": [{"parent": {"name": "opsbase", "version": "348e2b17a31a41ab74261d5f93e6e0c90cff2bd2", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d1cb9c056a95d78685702e724b485de3870be5c2", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "348e2b17a31a41ab74261d5f93e6e0c90cff2bd2", "sub_image": null, "external": false}}, "avmapfrontend": {"name": "avmapfrontend", "description": "Internal frontend for viewing AV map assets", "repository": "git@github.com:lyft/avmapfrontend.git", "slack": "#av-munich-bots", "team_email": "av-mapping-geometry@lyft.com", "pagerduty_escalation_policy": "AV Map Frontend", "image_type": "service", "service_tier": 3, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "avmapfrontend.legacy"]}, {"name": "service_group", "members": ["avmapfrontend.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "avmapfrontend.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "unit-plugin", "type": "jailed", "command": "make test_unit_plugin"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "avmapfrontend"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"avxrays": null}}}}, "version": "f475b6e5012eaa5c8b15efe1e8b5de8e0b591427", "images": [{"parent": {"name": "opsbase", "version": "49dd0dfae9cc8fb0ead221682d5a4e774b7fc089", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "49dd0dfae9cc8fb0ead221682d5a4e774b7fc089", "sub_image": null, "external": false}}, "avmapworkflows": {"name": "avmapworkflows", "description": "workflows to generate maps for autonomous vehicles.", "repository": "git@github.com:lyft/avmapworkflows.git", "image_type": "service", "slack": "#avknowledge-flyte", "team_email": "av-mapping-platform@lyft.com", "pagerduty_escalation_policy": "AV Mapping Platform", "service_tier": 3, "languages": ["python"], "credentials": true, "containers": [{"name": "spin", "command": "/bin/bash", "provision": "echo \"what hath god wrought\""}], "groups": [{"name": "dev", "members": ["control.dev", "avmapworkflows.spin"]}, {"name": "integration", "members": ["avmapworkflows.dev"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "avmapworkflows.integration", "container": "avmapworkflows.spin", "command": "make test_integration"}, {"name": "workflow_registration", "type": "execution", "group": "avmapworkflows.dev", "container": "avmapworkflows.spin", "command": "make register_for_pr"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "workflow_registration_master", "type": "execution", "group": "avmapworkflows.dev", "container": "avmapworkflows.spin", "run_in_pr": false, "command": "make release_production"}], "deploy": [[{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true, "bake_time_minutes": 0}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_staging"}], [{"name": "production", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_production"}]], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "version": "9c35ef5e4ea4cd07d2e8c8b0cb42646a94205ad9", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "avmdcnavigation": {"name": "avmdcnavigation", "description": "Service to manage navigation for our AV Mapping Manual Data Collection (MDC) runs", "repository": "git@github.com:lyft/avmdcnavigation.git", "slack": "#av-mdc-navigation", "team_email": "razvanor@lyft.com", "pagerduty_escalation_policy": "av-mdc-navigation", "image_type": "service", "service_tier": 3, "pulldeploy_components": {"data": ["regioncfgdata"]}, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:83013638189350b4de7ae868376885e18ab96a0b", "packages": ["pkg-config", "libxmlsec1-dev", "libgeos-c1", "libspatialindex-c3"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:64b9eee6a3a28f977b42d3a263db43009607e69d", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/avmdcnavigation", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "mapelement.legacy", "metadataproxy.server", "mapelement.legacy", "routingengine.dev", "avmdcnavigation.legacy"]}, {"name": "service_group", "members": ["avmdcnavigation.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "avmdcnavigation.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "restricted", "group": "avmdcnavigation.dev", "container": "avmdcnavigation.legacy", "command": "make test_integration", "whitelist": ["avmdcnavigation-development-iad-onebox.lyft.net.", "dynamodb-development-iad-onebox.lyft.net.", "routingengine-development-iad-onebox.lyft.net.", "mapelement-development-iad-onebox.lyft.net."], "reports": {"junit": "build/int.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "avmdcnavigation.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "avmdcnavigation.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "bake_time_minutes": 8}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "bake_time_minutes": 8}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "envoy": {"profile": "python", "settings": {"services": [{"name": "avmdcnavigation"}], "common_settings": {"internal_hosts": {"mapelement": null, "routingengine": null, "routingenginena20180101": null, "routingenginena20190710": null, "regions": null}, "external_hosts": {"google_maps_https": null, "dynamodb_iad": null}}}}, "version": "70a3cbdfbb9d30a0ec15075fcdd4f49a006d1c2e", "images": [{"parent": {"name": "opsbase", "version": "83013638189350b4de7ae868376885e18ab96a0b", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "64b9eee6a3a28f977b42d3a263db43009607e69d", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "83013638189350b4de7ae868376885e18ab96a0b", "sub_image": null, "external": false}}, "avmetricsetl": {"name": "avmetricsetl", "description": "Metrics ETL for AV data", "repository": "git@github.com:lyft/avmetricsetl.git", "image_type": "service", "service_tier": 2, "slack": "#av-bots", "team_email": "av-analytics-dev@lyft.com", "pagerduty_escalation_policy": "AV Data Infra", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "kafka.server", "avmetricsetl.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "avmetricsetl.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "avmetricsetl"}, {"name": "avmetricsetllyftbagconsumer"}, {"name": "avmetricsetlmissioningest"}, {"name": "avmetricsetlretryconsumer"}, {"name": "avmetricsetlderivedconsumer"}, {"name": "avmetricsetlcron"}], "common_settings": {"external_hosts": {"s3_iad": null, "s3_pdx": null}, "internal_hosts": {"jobschedulernormalweb": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}]}}, "version": "ce093d35be5016725122b14d229b13b889a8c603", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "avmlworkflows": {"name": "avmlworkflows", "description": "Workflows for AV machine learning at Lyft Level 5", "repository": "git@github.com:lyft/avmlworkflows.git", "slack": "#av-mlp-bots", "team_email": "av-ml-platform@lyft.com", "pagerduty_escalation_policy": "av-ml-platform", "image_type": "service", "service_tier": 3, "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "avmlworkflows.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "version": "369c7bc13344939f76eda88f233e821dfe0eb680", "images": [{"parent": {"name": "ubuntu", "version": "bionic", "sub_image": null, "external": true}, "sub_image": null}], "parent": {"name": "ubuntu", "version": "bionic", "sub_image": null, "external": true}}, "avpoints": {"name": "avpoints", "description": "An Http service that serves octrees from S3", "repository": "git@github.com:lyft/avpoints.git", "slack": "#av-munich-bots", "team_email": "cvitadello@lyft.com", "pagerduty_escalation_policy": "avpoints", "service_tier": 3, "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "avpoints.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "avpoints.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "coverage_files", "type": "jailed", "run_in_pr": false, "command": "make coverage_files", "reports": {"cobertura": "build/coverage.xml"}}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "avpoints"}]}}, "version": "91c6cb18da801f43258e060b756e90451fd112bf", "images": [{"parent": {"name": "opsbase", "version": "68547afa9d7dbf0c41d37c8e1d4661607d6f674b", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "68547afa9d7dbf0c41d37c8e1d4661607d6f674b", "sub_image": null, "external": false}}, "avpyshifu": {"name": "avpyshifu", "description": "AV Mapping's example python service to run in Core lyft infra.", "repository": "git@github.com:lyft/avpyshifu.git", "slack": "#av-munich-bots", "team_email": "akumar@lyft.com", "pagerduty_escalation_policy": "Av Example", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/avpyshifu", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "avpyshifu.legacy"]}, {"name": "service_group", "members": ["avpyshifu.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "avpyshifu.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "avpyshifu.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "avpyshifu.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "orca": [{"region": "iad"}], "legacy": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "avpyshifu"}], "common_settings": {"internal_hosts": {"avingest": null, "avgoshifu": null, "avxrays": null}}}}, "version": "ff072a3bb62effbbcb5404c4b7f97cd71d21f9b9", "images": [{"parent": {"name": "opsbase", "version": "68547afa9d7dbf0c41d37c8e1d4661607d6f674b", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "68547afa9d7dbf0c41d37c8e1d4661607d6f674b", "sub_image": null, "external": false}}, "avscenariosexpo": {"name": "avscenariosexpo", "description": "Service for AV Scenarios Exposure", "repository": "git@github.com:lyft/avscenariosexpo.git", "slack": "#av-scenarios-notify", "team_email": "av-scenarios@lyft.com", "pagerduty_escalation_policy": "avscenarios", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:431b58e72ff19dbc9960ab39037ad568711359fa"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:c749320158a68b1cb4bb944264033635ec49d2fa", "sub_image": "k8s", "packages": ["openssl", "libssl-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/avscenariosexpo", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "job", "command": "dumb-init -- service_venv python manage.py calc_scenarios_frequency", "workdir": "/code/avscenariosexpo", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "3.5Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "avscenariosexpo.legacy", "idl.server", "sqs.server"]}, {"name": "service_group", "members": ["avscenariosexpo.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "avscenariosexpo.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "avscenariosexpo.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 3, "max_size": 5}}}}, {"name": "canary", "member": "avscenariosexpo.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "cronjob", "member": "avscenariosexpo.job", "type": "cron", "schedule": "0 19 * * 1-5"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "cronjob"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "avscenariosexpo"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "sqs_iad": null}, "internal_hosts": {"avscenariosexpo": null}}}}, "version": "1e034d51b8108db4b2b0ab9aa3f215a4ad4304ed", "images": [{"parent": {"name": "opsbase", "version": "431b58e72ff19dbc9960ab39037ad568711359fa", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c749320158a68b1cb4bb944264033635ec49d2fa", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "431b58e72ff19dbc9960ab39037ad568711359fa", "sub_image": null, "external": false}}, "avscenariosteamimage": {"name": "avscenariosteamimage", "description": "image for av scenarios", "repository": "git@github.com:lyft/tensorflowbase.git:avscenariosteamimage", "image_type": "tool", "slack": "#av-scenarios", "team_email": "av-scenarios@lyft.com", "deploy": [{"name": "production", "legacy": false}], "containers": [{"name": "notebook", "command": "/venv/bin/jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password='' --notebook-dir=/mnt/user-home", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}], "lyftlearn": {"notebook_templates": [{"template_name": "av-scenarios-team", "long_description": "- awscli>=1.15.46\n - pulp>=1.6.8\n - numpy>=1.14.0\n - pandas>=0.22.0\n - lyft-analysis>=2.22.0\n - qds-sdk==1.9.8post1\n - lyft-dsp-features>=1.0.0\n - lyft-idl>=241.15.2\n - lyftlearn==3.1.24\n - lyftlearnclient>=0.6.8\n - keras>=2.1.0\n - torchvision>=0.2.1\n - matplotlib\n - psutil>=5.4.6\n - folium>=0.5.0\n - seaborn>=0.8.1\n - py3-ortools>=6.0.0\n - statsmodels>=0.9.0\n - joblib>=0.11\n - plotly>=3.2.0\n - pytest-cov>=2.5.1\n - pytest-mock>=1.6.3\n - pytest>=3.3.0\n", "short_description": "Python 3, Tensorflow, GPU Drivers", "owner": "ttsai2", "additional_containers": {"tensorboard": {"image": "docker.io/tensorflow/tensorflow", "version": "1.8.0", "command": ["/usr/local/bin/tensorboard"], "args": ["--logdir=/tmp/tensorflow"]}}, "network": {"notebook": {"port": 8888, "public": true}, "tensorboard": {"port": 6006, "public": true}}}]}, "version": "6d0bffb06ac0993ae6abbc9b814275b15c89c36d", "images": [{"parent": {"name": "tf110gpupy3xenial", "version": "3abab70408df4e984aa7b0871503afdafc1d1b3e", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "tf110gpupy3xenial", "version": "3abab70408df4e984aa7b0871503afdafc1d1b3e", "sub_image": null, "external": false}}, "avstapling": {"name": "avstapling", "description": "AV Stapling service repo to serve optimized semantic map in geometric map frame.", "repository": "git@github.com:lyft/avstapling.git", "image_type": "service", "service_tier": 3, "slack": "#av-munich-bots", "team_email": "akumar@lyft.com", "pagerduty_escalation_policy": "AV Stapling", "languages": ["bash", "javascript", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "avstapling.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "avstapling.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "env make test_unit", "reports": {"junit": "build/unit.xml"}, "autotrigger": false}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true, "bake_time_minutes": 6}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}], "bake_time_minutes": 6}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "avstapling"}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "logging": {"avstapling": {"fields": {"method": "keyword", "content": "keyword"}}}, "version": "8e3adc25c8bd3cc950c0417784c5ffab75f24c6c", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "avtrajectories": {"name": "avtrajectories", "description": "A GRPC service which stores and serves trajectories.", "repository": "git@github.com:lyft/avtrajectories.git", "slack": "#av-munich-bots", "team_email": "kpopielarz@lyft.com", "pagerduty_escalation_policy": "avtrajectories_policy", "service_tier": 3, "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "avtrajectories.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "avtrajectories.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "coverage_files", "type": "jailed", "run_in_pr": false, "command": "make coverage_files", "reports": {"cobertura": "build/coverage.xml"}}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "avtrajectories"}]}}, "version": "a21991b02a76147d181c744e756a3b5fbaa8e607", "images": [{"parent": {"name": "opsbase", "version": "dbe0423a8b6a2e50819b9da1f10b628ac70bbc34", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "dbe0423a8b6a2e50819b9da1f10b628ac70bbc34", "sub_image": null, "external": false}}, "avxrays": {"name": "avxrays", "description": "Tiled top-down views synthesized from AV image & lidar collects", "repository": "git@github.com:lyft/avxrays.git", "image_type": "service", "service_tier": 3, "slack": "#av-munich-bots", "team_email": "av-mapping-geometry@lyft.com", "pagerduty_escalation_policy": "AV Xrays", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "avxrays.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "avxrays.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "avxrays"}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:2ce6d22d2593683967e2d381e8e026dc0868e62f", "sub_image": "precommit"}}]}}, "logging": {"avxrays": {"fields": {"exception": {"class": "keyword", "message": "keyword"}}}}, "version": "8abd8c239f57da17854998d4277a8bc58e67ea66", "images": [{"parent": {"name": "opsbase", "version": "e6298e7b6ba0c062918e656d651de3ad48092f2a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "2ce6d22d2593683967e2d381e8e026dc0868e62f", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "e6298e7b6ba0c062918e656d651de3ad48092f2a", "sub_image": null, "external": false}}, "awsuserportal": {"name": "awsuserportal", "description": "Self-service tools for AWS user maintenance.", "repository": "git@github.com:lyft/awsuserportal.git", "slack": "#security", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "team_email": "security-engineering@lyft.com", "pagerduty_escalation_policy": "Security", "image_type": "service", "restricted_ssh": true, "languages": ["bash", "javascript", "python"], "credentials": true, "containers": [{"name": "legacy", "start_time": 90, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "samlbridge.dev", "team.dev", "acl.dev", "awsuserportal.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "awsuserportal.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true}, {"name": "canary", "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "awsuserportal"}], "common_settings": {"internal_hosts": {"acl": null, "team": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "logging": {"awsuserportal": {"fields": {"email": "keyword", "user": "keyword"}}}, "version": "c7bf2a901d3028ec7346a466792dbbae1d9aa0ed", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "backgroundcheck": {"name": "backgroundcheck", "description": "Background checks for driver applicants.", "repository": "git@github.com:lyft/backgroundcheck.git", "image_type": "service", "credentials": true, "languages": ["bash", "java", "python"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s", "packages": ["libkrb5-dev", "default-jre-headless", "libspatialindex-dev", "libgeos-dev"]}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- service_venv gunicorn wsgi:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}}, {"name": "printcronhealthcheck", "command": "dumb-init -- service_venv python run_cron.py python -c \"print('CRON-healthcheck')\"", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "rotatesambapassword", "command": "dumb-init -- service_venv python run_cron.py python manage.py rotate_samba_password", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "fadvhealthcarescp", "command": "dumb-init -- service_venv python run_cron.py python manage.py fadv_healthcare_scp", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "cmprestoqueryupdatecriminal", "command": "dumb-init -- service_venv python run_cron.py python manage.py continuousmonitoring_presto_queries -q updates -t continuous_criminal", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "cmprestoqueryupdatehealthcare", "command": "dumb-init -- service_venv python run_cron.py python manage.py continuousmonitoring_presto_queries -q updates -t continuous_healthcare", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "cmprestoqueryupdatedmv", "command": "dumb-init -- service_venv python run_cron.py python manage.py continuousmonitoring_presto_queries -q updates -t continuous_dmv", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "cmprestoquerydisenrollcriminal", "command": "dumb-init -- service_venv python run_cron.py python manage.py continuousmonitoring_presto_queries -q disenroll -t continuous_criminal", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "cmprestoquerydisenrollhealthcare", "command": "dumb-init -- service_venv python run_cron.py python manage.py continuousmonitoring_presto_queries -q disenroll -t continuous_healthcare", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "cmprestoquerydisenrolldmv", "command": "dumb-init -- service_venv python run_cron.py python manage.py continuousmonitoring_presto_queries -q disenroll -t continuous_dmv", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "cmprestoqueryenrollhealthcare", "command": "dumb-init -- service_venv python run_cron.py python manage.py continuousmonitoring_presto_queries -q enroll -t continuous_healthcare", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "cmprestoqueryenrolldmv", "command": "dumb-init -- service_venv python run_cron.py python manage.py continuousmonitoring_presto_queries -q enroll -t continuous_dmv", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "cmprestoqueryrefreshcriminal", "command": "dumb-init -- service_venv python run_cron.py python manage.py continuousmonitoring_presto_queries -q refresh -t continuous_criminal", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "auditfailedbgcemail", "command": "dumb-init -- service_venv python run_cron.py python manage.py audit_failed_bgc_email", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "handleinvestigatechecks", "command": "dumb-init -- service_venv python run_cron.py python manage.py handle_investigate_checks", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "retrievesambaresults", "command": "dumb-init -- service_venv python run_cron.py python manage.py retrieve_samba_results", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "checkrworker", "command": "dumb-init -- service_venv python -m app.workers.backgroundcheckworker --provider checkr", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "continuousmonitoringworker", "command": "dumb-init -- service_venv python -m app.workers.backgroundcheckworker --provider continuousmonitoring", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "idologyworker", "command": "dumb-init -- service_venv python -m app.workers.backgroundcheckworker --provider idology", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "processingworker", "command": "dumb-init -- service_venv python -m app.workers.backgroundcheckworker --provider processing", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "refreshworker", "command": "dumb-init -- service_venv python -m app.workers.backgroundcheckworker --provider refresh", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "sambaworker", "command": "dumb-init -- service_venv python -m app.workers.backgroundcheckworker --provider samba", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "sterlingworker", "command": "dumb-init -- service_venv python -m app.workers.backgroundcheckworker --provider sterling", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "updatesrworker", "command": "dumb-init -- service_venv python -m app.workers.backgroundcheckworker --provider updatesupplyrecords", "workdir": "/code/backgroundcheck", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}], "facets": [{"name": "main", "type": "service", "member": "backgroundcheck.service", "autoscaling": {"environment": {"production": {"max_size": 40, "min_size": 8}, "staging": {"max_size": 2, "min_size": 2}}}}, {"name": "canary", "type": "service", "member": "backgroundcheck.service", "canary": true, "autoscaling": {"max_size": 1, "min_size": 1}}, {"name": "printcronhealthcheck", "member": "backgroundcheck.printcronhealthcheck", "type": "cron", "concurrency_policy": "forbid", "schedule": "* * * * *"}, {"name": "rotatesambapassword", "member": "backgroundcheck.rotatesambapassword", "type": "cron", "concurrency_policy": "forbid", "schedule": "30 16 10,20 * *"}, {"name": "fadvhealthcarescp", "member": "backgroundcheck.fadvhealthcarescp", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 17 * * *"}, {"name": "cmprestoqueryupdatecriminal", "member": "backgroundcheck.cmprestoqueryupdatecriminal", "type": "cron", "concurrency_policy": "forbid", "schedule": "15 17 * * *"}, {"name": "cmprestoqueryupdatehealthcare", "member": "backgroundcheck.cmprestoqueryupdatehealthcare", "type": "cron", "concurrency_policy": "forbid", "schedule": "30 17 * * *"}, {"name": "cmprestoqueryupdatedmv", "member": "backgroundcheck.cmprestoqueryupdatedmv", "type": "cron", "concurrency_policy": "forbid", "schedule": "45 17 * * *"}, {"name": "cmprestoquerydisenrollcriminal", "member": "backgroundcheck.cmprestoquerydisenrollcriminal", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 18 * * *"}, {"name": "cmprestoquerydisenrollhealthcare", "member": "backgroundcheck.cmprestoquerydisenrollhealthcare", "type": "cron", "concurrency_policy": "forbid", "schedule": "15 18 * * *"}, {"name": "cmprestoquerydisenrolldmv", "member": "backgroundcheck.cmprestoquerydisenrolldmv", "type": "cron", "concurrency_policy": "forbid", "schedule": "30 18 * * *"}, {"name": "cmprestoqueryenrollhealthcare", "member": "backgroundcheck.cmprestoqueryenrollhealthcare", "type": "cron", "concurrency_policy": "forbid", "schedule": "45 18 * * *"}, {"name": "cmprestoqueryenrolldmv", "member": "backgroundcheck.cmprestoqueryenrolldmv", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 19 * * *"}, {"name": "cmprestoqueryrefreshcriminal", "member": "backgroundcheck.cmprestoqueryrefreshcriminal", "type": "cron", "concurrency_policy": "forbid", "schedule": "15 19 * * *"}, {"name": "auditfailedbgcemail", "member": "backgroundcheck.auditfailedbgcemail", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 20 * * *"}, {"name": "handleinvestigatechecks", "member": "backgroundcheck.handleinvestigatechecks", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 21 * * *"}, {"name": "retrievesambaresults", "member": "backgroundcheck.retrievesambaresults", "type": "cron", "concurrency_policy": "forbid", "schedule": "@hourly"}, {"name": "checkrworker", "member": "backgroundcheck.checkrworker", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "continuousmonitoringworker", "member": "backgroundcheck.continuousmonitoringworker", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "idologyworker", "member": "backgroundcheck.idologyworker", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "processingworker", "member": "backgroundcheck.processingworker", "type": "worker", "autoscaling": {"min_size": 2, "max_size": 2}}, {"name": "refreshworker", "member": "backgroundcheck.refreshworker", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "sambaworker", "member": "backgroundcheck.sambaworker", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "sterlingworker", "member": "backgroundcheck.sterlingworker", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "updatesrworker", "member": "backgroundcheck.updatesrworker", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "sqs.dev", "backgroundcheck.legacy"]}], "tests": [{"name": "unit", "type": "jailed", "command": "env TEST_TAGS=\"not unit_legacy\" make test_unit_jail"}, {"name": "unit_legacy", "type": "execution", "group": "backgroundcheck.dev", "container": "backgroundcheck.legacy", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "backgroundcheck.dev", "container": "backgroundcheck.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#do-cities-eng", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "cities@lyft.com", "pagerduty_escalation_policy": "Cities", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "service_tier": 1, "pulldeploy_components": {"data": ["regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "backgroundcheck"}, {"name": "backgroundcheckbatch"}, {"name": "backgroundcheckworkers"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"driverridesinfo": {"tls_enabled": true}, "jobschedulerbulkweb": {"tls_enabled": true}, "jobschedulernormalweb": {"tls_enabled": true}, "logistics": {"tls_enabled": true}, "messaging": {"tls_enabled": true}, "ratelimit": {"tls_enabled": true}, "regions": {"tls_enabled": true}, "supply": {"tls_enabled": true}, "supplyrecords": {"tls_enabled": true}, "users": {"tls_enabled": true}}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null, "firehose_iad": null, "s3_iad": null, "sqs_iad": null, "sterling": null, "firstadvantage": null, "qorta": null}, "authorization": {"permissions": {"checks_read": {"paths": ["/checks/*"], "methods": ["GET"]}, "checks_start": {"paths": ["/checks/*"], "methods": ["POST"]}, "checks_update": {"paths": ["/checks/*"], "methods": ["PUT"]}, "eta": {"paths": ["/eta/*"]}, "pdf": {"paths": ["/pdf/*"]}, "invite": {"paths": ["/invite/*"]}, "verification": {"paths": ["/verification/*"]}, "history": {"paths": ["/history/*"]}, "disclosures": {"paths": ["/disclosures/*"]}, "bgc_result": {"paths": ["/bgc/*"]}, "dmv_result": {"paths": ["/dmv/*"]}, "dmv_report": {"paths": ["/dmv_report/*"]}, "dmv_score": {"paths": ["/score_latest_dmv/*"]}, "idv": {"paths": ["/idv/*"]}, "idv_kba": {"paths": ["/idv_kba/*"]}, "jobscheduler": {"paths": ["/jobscheduler/*"]}, "public": {"paths": ["/integrations/*"]}, "consents_get": {"paths": ["/consents/*"], "methods": ["GET"]}, "consents_post": {"paths": ["/consents/*"], "methods": ["POST"]}, "messaging": {"paths": ["/messaging/*"]}, "temp_backfill": {"paths": ["/backfill/*"]}}, "bindings": {"envoy": ["public"], "accidentrisk": ["checks_read", "dmv_report"], "ats": ["temp_backfill", "bgc_result", "checks_read", "checks_start", "checks_update", "eta", "pdf", "invite", "verification", "disclosures", "dmv_report", "dmv_result", "dmv_score", "idv", "idv_kba", "consents_get", "consents_post"], "atsbatch": ["temp_backfill", "bgc_result", "checks_read", "checks_start", "checks_update", "eta", "pdf", "invite", "verification", "disclosures", "dmv_report", "dmv_result", "dmv_score", "consents_get", "consents_post"], "atssearchworkers": ["temp_backfill", "bgc_result", "checks_read", "checks_start", "checks_update", "eta", "pdf", "invite", "verification", "disclosures", "dmv_result", "dmv_score", "idv", "idv_kba", "consents_get", "consents_post"], "atsworkers": ["temp_backfill", "bgc_result", "checks_read", "checks_start", "checks_update", "eta", "pdf", "invite", "verification", "disclosures", "dmv_result", "dmv_score", "idv", "consents_get", "consents_post"], "driveronboardingint": ["bgc_result", "checks_read", "checks_start", "checks_update", "history", "pdf", "dmv_report"], "expressdriveint": ["checks_read", "bgc_result", "dmv_result"], "jobscheduler": ["jobscheduler"], "leadplatformint": ["bgc_result", "dmv_result", "checks_read"], "onboardingflow": ["checks_read", "eta", "invite"], "tom": ["checks_read", "checks_start", "checks_update", "history", "pdf", "dmv_report"], "taskqueuebulk": ["jobscheduler"], "taskqueuenormal": ["jobscheduler"], "messaging": ["messaging"], "regulatoryintegrations": ["checks_read", "pdf", "disclosures", "dmv_report", "dmv_result"], "regulatoryintegrationsairflow": ["checks_read", "pdf", "disclosures", "dmv_report", "dmv_result"], "regulatoryintegrationsworkers": ["checks_read", "pdf", "disclosures", "dmv_report", "dmv_result"]}}}}}, "logging": {"backgroundcheckbatch": {"fields": {"status": "keyword", "type": "keyword", "code": "long", "error": "keyword", "candidate": {"provider": "keyword", "driver_id": "keyword", "created_at": "keyword", "provider_candidate_id": "keyword"}, "check_type": "keyword", "check": {"provider_check_id": "keyword", "provider": "keyword", "check_type": "keyword", "created_at": "keyword", "driver_id": "keyword", "check_region": "keyword"}, "driver_id": "keyword", "message_body": {"job_type": "keyword", "created_at": "keyword", "driver_id": "keyword"}, "message_template_id": "keyword", "query": "keyword", "queue_name": "keyword", "role": "keyword", "provider": "keyword", "allowed_roles": "keyword", "provider_check_id": "keyword", "response": "keyword", "bucket": "keyword", "is_tom_user": "keyword"}}, "backgroundcheckworkers": {"fields": {"status": "keyword", "type": "keyword", "code": "long", "error": "keyword", "candidate": {"provider": "keyword", "driver_id": "keyword", "created_at": "keyword", "provider_candidate_id": "keyword"}, "check_type": "keyword", "check": {"provider_check_id": "keyword", "provider": "keyword", "check_type": "keyword", "created_at": "keyword", "driver_id": "keyword", "check_region": "keyword"}, "driver_id": "keyword", "message_body": {"job_type": "keyword", "created_at": "keyword", "driver_id": "keyword"}, "message_template_id": "keyword", "query": "keyword", "queue_name": "keyword", "role": "keyword", "provider": "keyword", "allowed_roles": "keyword", "provider_check_id": "keyword", "response": "keyword", "bucket": "keyword", "is_tom_user": "keyword"}}, "backgroundcheck": {"fields": {"status": "keyword", "type": "keyword", "code": "long", "error": "keyword", "candidate": {"provider": "keyword", "driver_id": "keyword", "created_at": "keyword", "provider_candidate_id": "keyword"}, "check_type": "keyword", "check": {"provider_check_id": "keyword", "provider": "keyword", "check_type": "keyword", "created_at": "keyword", "driver_id": "keyword", "check_region": "keyword"}, "driver_id": "keyword", "message_body": {"job_type": "keyword", "created_at": "keyword", "driver_id": "keyword"}, "message_template_id": "keyword", "query": "keyword", "queue_name": "keyword", "role": "keyword", "provider": "keyword", "allowed_roles": "keyword", "provider_check_id": "keyword", "response": "keyword", "bucket": "keyword", "is_tom_user": "keyword"}}}, "version": "8d17b07595c70e2f1e24e2c1d1cc50a0f483ffb8", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "badcompanions": {"name": "badcompanions", "description": "badcompanions", "repository": "git@github.com:lyft/badcompanions.git", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "workdir": "/go/src/github.com/lyft/badcompanions", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- badcompanions", "workdir": "/code/badcompanions", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}, "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}}], "groups": [{"name": "dev", "members": ["control.dev", "badcompanions.legacy", "dynamodb.dev", "redis.dev"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}]}}, "tests": [{"name": "startup", "type": "startup", "group": "badcompanions.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "coverage_files", "type": "jailed", "run_in_pr": false, "command": "make coverage_files", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "badcompanions.dev", "container": "badcompanions.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#dispatch-bots", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "dispatch@lyft.com", "pagerduty_escalation_policy": "Dispatch", "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}]}], "facets": [{"name": "main", "member": "badcompanions.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 40}, "environment": {"staging": {"min_size": 1, "max_size": 5}, "production": {"min_size": 2, "max_size": 60}}}}, {"name": "canary", "member": "badcompanions.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "service_tier": 0, "languages": ["go"], "image_type": "service", "envoy": {"profile": "go", "settings": {"services": [{"name": "badcompanions"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 900}}}, "authorization": {"permissions": {"read": {"paths": ["/pb.lyft.badcompanions.BadCompanions/GetBadCompanions", "/pb.lyft.badcompanions.BadCompanions/AreBadCompanions"], "methods": ["POST"]}, "write": {"paths": ["/pb.lyft.badcompanions.BadCompanions/AddBadCompanions", "/pb.lyft.badcompanions.BadCompanions/DeleteBadCompanions"], "methods": ["POST"]}, "gdprpatch": {"paths": ["/pb.lyft.badcompanions.BadCompanions/GdprPatch"], "methods": ["POST"]}}, "bindings": {"tom": ["read", "write"], "dispatch": ["read", "write"], "dispatchforesight": ["read"], "ratings": ["write"], "courier": ["read"], "graphql": ["read"], "marketstate": ["read"], "matchingstate": ["read"], "ridesapi": ["write"], "karma": ["read", "write"], "karmaupdate": ["read", "write"], "ridescheduler": ["read", "write"], "cancels": ["write"], "help": ["write"], "userprivacyrights": ["gdprpatch"], "tests": ["*"]}}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "redis": {"badcompanionsmultiredis": {"port": 6380, "op_timeout_ms": 200, "health_check": {"timeout_ms": 1000, "interval_ms": 5000}, "outlier_detection": {"consecutive_5xx": 200, "enforcing_success_rate": 0}}}}}}, "logging": {"badcompanions": {"fields": {"requestId": "keyword"}}}, "version": "2f23912937e3230fcfa2efcf86ed955357ad92d1", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "bandit": {"name": "bandit", "repository": "git@github.com:lyft/bandit.git", "description": "Multi-Armed Bandit Experimentation Platform", "service_tier": 1, "team_email": "bhan@lyft.com", "pagerduty_escalation_policy": "Bandit Platform", "slack": "#bandits-platform", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:77c41f39b1d42fc3b3fdf97d08edaed8fe4f7b0e", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- bandit", "workdir": "/code/bandit", "limits": {"cpu": 4, "memory": "8Gi"}, "sub_image": "k8s", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600}, {"name": "batch", "command": "dumb-init -- bandit batch", "workdir": "/code/bandit", "limits": {"cpu": 4, "memory": "8Gi", "environment": {"development": {"cpu": 1, "memory": "1Gi"}}}, "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "bandit.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "bandit.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "bandit.dev", "container": "bandit.legacy", "command": "make integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "bandit.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 8}}}}, {"name": "canary", "member": "bandit.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "batch", "member": "bandit.batch", "type": "batch"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}, {"facet": "batch"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "batch"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "bandit"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}}}}, "version": "1faf87e31283bee2a1eb5d1dfc45a50f53adb074", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "77c41f39b1d42fc3b3fdf97d08edaed8fe4f7b0e", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "banners": {"name": "banners", "description": "Service for controlling banners shown on the client", "repository": "git@github.com:lyft/banners.git", "slack": "#notifications-bots", "team_email": "notifications-eng@lyft.com", "pagerduty_escalation_policy": "Notifications", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": false, "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "packages": ["libspatialindex-dev", "libgeos-dev"], "sub_image": "k8splus"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/banners", "limits": {"cpu": 2, "memory": "3Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "minimal", "members": ["control.dev", "banners.legacy"]}, {"name": "dev", "members": ["dynamodb.dev", "banners.minimal", "bandit.dev", "tcs.dev", "usereligibilities.dev"]}, {"name": "service_group", "members": ["banners.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "banners.minimal"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "banners.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 10}}}}, {"name": "canary", "member": "banners.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "banners"}], "common_settings": {"internal_hosts": {"acquisitionguarantees": null, "audience": null, "autonomous": null, "bandit": null, "banners": null, "coupons": null, "dispatchavailability": null, "dsfeatures": null, "enterprise": null, "fare": null, "flexibleincentives": null, "grow": null, "loyaltypartnerships": null, "messaging": null, "offeringsapi": null, "passengerxpapi": null, "payapi": null, "push": null, "regions": null, "ridehistory": null, "ridelocations": null, "ridepasses": null, "riderperks": null, "rides": null, "ridesapi": null, "ridetimeestimator": null, "tcs": null, "tripsapi": null, "usereligibilities": null, "usergroups": null, "userpreferences": null, "users": null, "supply": null, "venues": null, "wallet": null, "walletapi": null}, "external_hosts": {"firehose_iad": null, "dynamodb_iad": null}}}}, "logging": {"banners": {"fields": {"country": "keyword", "incentive_type": "keyword", "region": "keyword", "user_id": "keyword", "ids": "keyword"}}}, "version": "ecef260f8c499537262183a89c7d3a1922851f2b", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8splus"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "basemapcatalog": {"name": "basemapcatalog", "description": "Backend service that exposes Basemap datasets and artifacts via the Catalog library.", "repository": "git@github.com:lyft/basemapcatalog.git", "slack": "#base-maps-bot", "team_email": "basemap-eng@lyft.com", "pagerduty_escalation_policy": "basemap-service", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/basemapcatalog", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "basemapcatalog.legacy"]}, {"name": "service_group", "members": ["basemapcatalog.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "basemapcatalog.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "basemapcatalog.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "basemapcatalog.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "basemapcatalog"}]}}, "version": "db8ea18e9692af4635ebb6092936b3ee1e01cb5b", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "basemapexplorer": {"name": "basemapexplorer", "description": "Frontend service for exploring Basemap data and releases.", "repository": "git@github.com:lyft/basemapexplorer.git", "slack": "#base-maps-bot", "team_email": "basemap-eng@lyft.com", "pagerduty_escalation_policy": "basemap-service", "image_type": "service", "service_tier": 3, "languages": ["javascript"], "credentials": false, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "workdir": "/code/basemapexplorer", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "cdnupload", "command": "/code/basemapexplorer/cdn-upload", "workdir": "/code/basemapexplorer", "sub_image": "k8s"}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "basemapexplorer.legacy"]}, {"name": "service_group", "members": ["basemapexplorer.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "basemapexplorer.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}], "envoy": {"profile": "python", "settings": {"services": [{"name": "basemapexplorer"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null, "privacyaudit": null, "basemapcatalog": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2inode:service.c613d468388654eeca11d9a11603d9872a559e38", "sub_image": "k8s"}}, {"name": "docker_build"}]}}, "facets": [{"name": "main", "member": "basemapexplorer.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 5, "max_size": 5}}}}, {"name": "canary", "member": "basemapexplorer.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "assets", "member": "basemapexplorer.cdnupload", "type": "job"}], "version": "567437e02537e9bcf4563c34db5142741edb8505", "images": [{"parent": {"name": "s2inode", "version": "c613d468388654eeca11d9a11603d9872a559e38", "sub_image": "service", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "basictest": {"name": "basictest", "description": "Regularly scheduled cluster test that ensures pods can be spun up and shut down properly.", "repository": "git@github.com:lyft/basictest.git", "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "credentials": false, "docs": {"section": "Infrastructure"}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igocli:117a4e318a5047db256d090dcfdee8ee6c76189c"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.1a814f8e5a589baad8b69a9f6489ac85969aff98", "sub_image": "precommit"}}]}}, "deploy": [[{"name": "staging-provtest", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "provtest"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "provtest"}, "interpolation_vars": {"test_suite": "basictest-core"}}}, {"name": "staging-sidecar-test1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "sidecar-test1"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "sidecar-test1"}, "interpolation_vars": {"test_suite": "basictest-core"}}}], [{"name": "staging-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "core"}, "interpolation_vars": {"test_suite": "basictest-core"}}}, {"name": "staging-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "omnicron"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "omnicron"}, "interpolation_vars": {"test_suite": "basictest-cron"}}}], [{"name": "production-core-0", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "core", "cluster.lyft.net/cluster_name": "core-prod-0"}, "interpolation_vars": {"test_suite": "basictest-core"}}}, {"name": "production-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "omnicron"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "omnicron"}, "interpolation_vars": {"test_suite": "basictest-cron"}}}], {"name": "production-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "core"}, "interpolation_vars": {"test_suite": "basictest-core"}}}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test"}], "logging": {"basictest": {"fields": {"healthcheck": "keyword"}}}, "languages": ["go"], "image_type": "service", "service_tier": 3, "version": "d5148e93b24473423f7b390d463b38b36488eaf2", "images": [{"parent": {"name": "s2igocli", "version": "117a4e318a5047db256d090dcfdee8ee6c76189c", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "1a814f8e5a589baad8b69a9f6489ac85969aff98", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2igocli", "version": "117a4e318a5047db256d090dcfdee8ee6c76189c", "sub_image": null, "external": false}}, "bblheadless": {"name": "bblheadless", "repository": "git@github.com:lyft/bblheadless.git", "description": "Creates and manages headless bubble clients, primarily for use with automated testing", "service_tier": 3, "team_email": "devx@lyft.com", "pagerduty_escalation_policy": "bubble", "slack": "#bubble-bots", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- bblheadless", "workdir": "/code/bblheadless", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "bblheadless.legacy", "redis.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "bblheadless.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "bblheadless.dev", "container": "bblheadless.legacy", "command": "make integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "bblheadless.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 3, "max_size": 5}}}}, {"name": "canary", "member": "bblheadless.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "mode": "mixed"}, "orca": [{"iam_role": "orca-admin", "region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "mode": "mixed"}, "targets": [{"facet": "canary"}], "orca": [{"iam_role": "orca-admin", "region": "iad"}]}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "mode": "mixed"}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {"redis_clusters": {"bblheadlessec": {"aws_random_identifier": "vngjnv", "port": 6381, "op_timeout_ms": 400}}}, "services": [{"name": "bblheadless"}]}}, "version": "71045967fd25d2dfde1e9e8e96fef2ac7f81e614", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "beam": {"name": "beam", "description": "Lyft version of Apache Beam python package", "repository": "git@github.com:lyft/beam.git", "slack": "#noop", "team_email": "no-reply@lyft.com", "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy"}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true}], "languages": ["python"], "image_type": "library", "version": "56cd8e20bd805b846b9972192ed9df7071f59388", "images": [{"parent": {"name": "pythonlibrary", "version": "aade5cd71241b7e490cd9d576154a013298a0892", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "pythonlibrary", "version": "aade5cd71241b7e490cd9d576154a013298a0892", "sub_image": null, "external": false}}, "beamperf": {"name": "beamperf", "description": "perf testing environment for beam", "repository": "git@github.com:lyft/streamperfbench.git:beamperf", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "beamperf.legacy"]}], "slack": "#streaming-compute", "team_email": "streaming-compute@lyft.com", "pagerduty_escalation_policy": "devnull", "deploy": [{"name": "staging-k8s", "legacy": false, "automatic": false}, {"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "streamingplatform": {"version": "1.4-SNAPSHOT", "beam_version": "2.18.0-lyft20200121", "jobmanagers": [{"name": "beamperf", "production": {"num_taskmanagers": 10, "taskmanager": {"num_slots": 16}}, "jobs": [{"name": "beamperf", "type": "beam-python", "pipeline": "beamperf.kinesis_pipeline", "description": "Test pipeline for testing pipelines", "development": {"parallelism": 2}, "staging": {"parallelism": 8}, "production": {"parallelism": 128}}]}]}, "languages": ["bash", "python"], "image_type": "service", "service_tier": 3, "python": {"py3k": {"linters": ["modernize", "pylint"]}, "mypy": {"python_versions": ["3.6"]}}, "version": "8a89ad16ddda0580b43878b98d21d35e7cd27d59", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "beamperfk8s": {"name": "beamperfk8s", "description": "perf testing environment for beam", "repository": "git@github.com:lyft/streamperfbench.git:beamperfk8s", "slack": "#streaming-compute", "team_email": "streaming-compute@lyft.com", "pagerduty_escalation_policy": "devnull", "image_type": "service", "service_tier": 3, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ibeampython:e083de4f14c8574af4e23f140626ed77bdbc48e2"}}]}}, "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}, [{"name": "beamperfk8s1-staging", "legacy": false, "automatic": false}, {"name": "beamperfk8s2-staging", "legacy": false, "automatic": false}], {"name": "production", "legacy": false, "automatic": false, "orca": [{"region": "iad"}]}, [{"name": "beamperfk8s1-production", "legacy": false, "automatic": false}, {"name": "beamperfk8s2-production", "legacy": false, "automatic": false}]], "streamingplatform": {"kubernetes": true, "stages": {"beamperfk8s1-staging": {"configuration": "beamperfk8s1-staging.jsonnet"}, "beamperfk8s2-staging": {"configuration": "beamperfk8s2-staging.jsonnet"}, "beamperfk8s1-production": {"configuration": "beamperfk8s1-production.jsonnet"}, "beamperfk8s2-production": {"configuration": "beamperfk8s2-production.jsonnet"}}}, "languages": ["bash", "python"], "python": {"py3k": {"linters": ["modernize", "pylint"]}, "mypy": {"python_versions": ["3.6"]}}, "containers": [{"name": "service", "command": "/usr/local/s2i/flink-run local"}], "groups": [{"name": "dev", "members": ["control.dev", "beamperfk8s.service"]}], "tests": [{"name": "unit", "type": "jailed", "framework": "pytest", "coverage": false, "target": "tests/unit"}, {"name": "integration", "type": "execution", "framework": "pytest", "coverage": false, "group": "beamperfk8s.dev", "container": "beamperfk8s.service", "target": "tests/integration"}], "version": "c3259bb32cc9f794ad288f54ad7020171c72a4f8", "images": [{"parent": {"name": "s2ibeampython", "version": "e083de4f14c8574af4e23f140626ed77bdbc48e2", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ibeampython", "version": "e083de4f14c8574af4e23f140626ed77bdbc48e2", "sub_image": null, "external": false}}, "behavioraleng": {"name": "behavioraleng", "description": "Promoting secure behaviors", "repository": "git@github.com:lyft/behavioraleng.git", "slack": "#behavioraleng", "team_email": "redteam@lyft.com", "pagerduty_escalation_policy": "Security Intelligence", "image_type": "service", "service_tier": 3, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.cac3baf704d97ad18fdbd9c698656473254455d5", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "syncusers", "command": "dumb-init -- service_venv python manage.py sync", "workdir": "/code/behavioraleng", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "behavioraleng.legacy", "dynamodb.dev", "elasticsearch5.server"]}, {"name": "service_group", "members": ["behavioraleng.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "behavioraleng.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "behavioraleng.dev", "container": "behavioraleng.legacy", "command": "make test_integration", "autotrigger": false}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "behavioraleng.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 2}}}}, {"name": "dynamodbcronjob", "member": "behavioraleng.syncusers", "type": "cron", "schedule": "0 13 * * *"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "behavioraleng"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}}}}, "version": "16825ed20c2d9445682172aa00081e7416e023cb", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "cac3baf704d97ad18fdbd9c698656473254455d5", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "bikesharefe": {"name": "bikesharefe", "description": "fe for bikeshare", "repository": "git@github.com:lyft/bikesharefe.git", "slack": "#lbs-deploy", "team_email": "lbs-web@lyft.com", "pagerduty_escalation_policy": "LBS Rider XP", "image_type": "service", "credentials": true, "service_tier": 1, "languages": ["bash", "javascript"], "links": [{"text": "runbook", "url": "https://github.com/lyft/bikesharefe/blob/master/docs/runbook.md"}], "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "bikesharefe.legacy", "lastmile.legacy"]}, {"name": "integration", "members": ["control.dev", "bikesharefe.legacy", "lastmile.integration", "ridepasses.integration", "www2.dev", "ridepassesfe.legacy"]}, {"name": "service_group", "members": ["bikesharefe.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "bikesharefe.dev", "autotrigger": false}, {"name": "unit", "type": "jailed", "command": "make test_coverage", "whitelist": ["bikesharefe-development-iad-onebox.lyft.net.", "statsd-iad-onebox.lyft.net."], "reports": {"coverage": "build/coverage.xml"}}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "configsets": ["lbsdata"], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "16:00 America/New_York"}, "envoy": {"profile": "python", "settings": {"services": [{"name": "bikesharefe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"lastmile": null, "account": null, "ridepasses": null, "users": null, "walletapi": null, "wallet": null, "payapi": null, "userpreferences": null}}}}, "version": "2b75a5890f546d34c9fcd34dd7c3675c2a44dd2a", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "billingaggregator": {"name": "billingaggregator", "description": "Platform to batch together financial transactions", "repository": "git@github.com:lyft/billingaggregator.git", "image_type": "service", "service_tier": 1, "slack": "#pay-platform", "team_email": "pay-platform-eng@lists.lyft.com", "pagerduty_escalation_policy": "Pay Platform", "languages": ["python", "bash"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "billingaggregator.legacy", "dynamodb.server"]}, {"name": "integration", "members": ["billingaggregator.dev", "ledger.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "billingaggregator.dev"}, {"name": "test", "type": "execution", "group": "billingaggregator.integration", "container": "billingaggregator.legacy", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "notification_overrides": {"deploy": {"slack": "#pay-platform-deploys", "environments": ["production", "staging"]}, "pr_open": {"slack": "#pay-platform"}, "test_failure": {"slack": "#pay-platform-deploys", "environments": ["production"]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "billingaggregator"}, {"name": "billingaggregatorbatch"}], "override_settings": [{"services": [{"name": "billingaggregatorbatch"}], "settings": {"internal_hosts": {"jobschedulermigrationweb": null, "jobschedulernormalweb": null}}}], "common_settings": {"internal_hosts": {"billingaggregator": null, "green": null, "ledger": null, "wallet": null, "txnhub": null, "tcs": null, "jobschedulermigrationweb": null, "jobschedulernormalweb": null, "jobschedulerbulkweb": null}, "external_hosts": {"dynamodb_iad": null}, "authorization": {"permissions": {"post_batch_invoice": {"paths": ["/v1/batch-invoices"], "methods": ["POST"]}, "get_uninvoiced_batches": {"paths": ["/v1/uninvoiced-batches*"], "methods": ["GET"]}, "get_batch_invoice": {"paths": ["/v1/batch-invoices/*"], "methods": ["GET"]}, "get_batch_invoices": {"paths": ["/v1/batch-invoices*"], "methods": ["GET"]}, "get_billing_transactions": {"paths": ["/v1/billing-transactions/*"], "methods": ["GET"]}, "put_ledger_order": {"paths": ["/v1/ledger-order"], "methods": ["PUT"]}}, "bindings": {"billingaggregator": ["post_batch_invoice", "put_ledger_order"], "enterprise": ["post_batch_invoice", "get_batch_invoice", "get_uninvoiced_batches", "get_batch_invoices"], "enterprisebatch": ["post_batch_invoice", "get_batch_invoice", "get_uninvoiced_batches", "get_batch_invoices"], "taskqueuenormal": ["post_batch_invoice", "put_ledger_order"], "payapi": ["get_batch_invoice"], "messaging": ["get_batch_invoice"], "tom": ["get_batch_invoice", "get_billing_transactions"]}}}}}, "logging": {"billingaggregator": {"fields": {"shadow": "boolean", "participant_id": "keyword", "participant_domain": "keyword", "invoice_date": "date", "batch_ids": "keyword", "batch_invoice_id": "keyword", "batch_invoice_type": "keyword", "ledger_order_id": "keyword", "ledger_invoice_id": "keyword", "was_created": "boolean", "aggregation": "keyword"}}}, "version": "60b8b6c16f5cad167bde4523fa99d55049f7a24d", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "bizmetrics": {"name": "bizmetrics", "description": "Backend service for business metric reporting", "repository": "git@github.com:lyft/bizmetrics.git", "slack": "#decision-apps-eng", "team_email": "decision-apps@lyft.com", "pagerduty_escalation_policy": "Command Center Services", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "packages": ["postgresql-client"], "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/bizmetrics", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "bizmetrics.legacy", "postgresql.dev"]}, {"name": "service_group", "members": ["bizmetrics.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "bizmetrics.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "bizmetrics.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "bizmetrics.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "bizmetrics"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"regions": null}}}}, "logging": {"bizmetrics": {"fields": {"metric": "keyword", "metrics": "keyword", "count": "integer", "tags": "keyword", "exception": "keyword", "message": "keyword", "data": "keyword", "params": "keyword"}}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "version": "26d0216b94828c65b0bbce0da26e2fea3fd4a39b", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "bizmetricsint": {"name": "bizmetricsint", "description": "Backend service for business metric reporting", "repository": "git@github.com:lyft/bizmetricsint.git", "slack": "#decision-apps-eng", "team_email": "decision-apps@lyft.com", "pagerduty_escalation_policy": "Command Center Services", "image_type": "service", "service_tier": 2, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "bizmetrics.dev", "bizmetricsint.legacy"]}, {"name": "service_group", "members": ["bizmetricsint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "bizmetricsint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "bizmetricsint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null, "bizmetrics": null, "privacyaudit": null}}}}, "version": "7eca46368f241c6458e5df3d9ee8c71f4a34c783", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "blobstoreconfig": {"name": "blobstoreconfig", "description": "A service that centralizes our use of S3/GCS to support encryption at rest and disaster recovery", "repository": "git@github.com:lyft/blobstoreconfig.git", "image_type": "service", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "start_time": 60, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "blobstoreconfig.legacy", "dbproxy.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "blobstoreconfig.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#ds-aws-pod", "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS AWS", "deploy": [{"name": "staging", "automatic": true, "legacy": true}, {"name": "canary", "legacy": true}, {"name": "production", "legacy": true}], "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "blobstoreconfig"}], "common_settings": {"internal_hosts": {"dbproxy": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "version": "9cdb3cfcc3950f1b97ce6f11025655ece20c3664", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "bookkeeper": {"name": "bookkeeper", "description": "Pricing service for managing geographical accounting inflow and outflow", "repository": "git@github.com:lyft/bookkeeper.git", "slack": "#pricing-adaptive-dep", "team_email": "adaptive-pricing@lyft.com", "pagerduty_escalation_policy": "bookkeeper", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libspatialindex-dev", "libgeos-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s", "packages": ["default-jre-headless", "liblog4j1.2-java", "lbzip2", "libspatialindex-dev", "libgeos-dev"]}}]}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/bookkeeper", "limits": {"cpu": 1, "memory": "2Gi", "environment": {"development": {"memory": "1Gi", "cpu": 1}}}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "kclworker", "command": "/code/kcl/kcl-worker.sh", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi", "environment": {"development": {"memory": "4Gi", "cpu": 1}}}}, {"name": "localtoregionworker", "command": "dumb-init -- service_venv python -m manage cleanup.finalized", "workdir": "/code/bookkeeper", "sub_image": "k8s", "limits": {"cpu": 0.6, "memory": "1Gi"}}, {"name": "regionttlworker", "command": "dumb-init -- service_venv python -m manage region_ttl", "workdir": "/code/bookkeeper", "sub_image": "k8s", "limits": {"cpu": 0.6, "memory": "1Gi"}}, {"name": "unfinalizedpruningworker", "command": "dumb-init -- service_venv python -m manage cleanup.unfinalized", "workdir": "/code/bookkeeper", "sub_image": "k8s", "limits": {"cpu": 0.6, "memory": "1Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "bookkeeper.legacy", "redis.dev"]}, {"name": "integration", "members": ["bookkeeper.dev"]}, {"name": "e2e", "members": ["bookkeeper.dev"]}, {"name": "service_group", "members": ["bookkeeper.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "bookkeeper.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "bookkeeper.integration", "container": "bookkeeper.legacy", "command": "make test_integration", "reports": {"junit": "build/integration.xml"}}, {"name": "e2e", "type": "execution", "group": "bookkeeper.e2e", "container": "bookkeeper.legacy", "command": "make test_e2e", "reports": {"junit": "build/integration.xml"}}], "facets": [{"name": "main", "member": "bookkeeper.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 5, "max_size": 5}}}}, {"name": "bookkeeperkcl", "member": "bookkeeper.kclworker", "type": "worker", "envoy_service": "bookkeeperkcl", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 10, "max_size": 20}}}}, {"name": "canary", "member": "bookkeeper.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "bookkeeperkclcanary", "member": "bookkeeper.kclworker", "type": "worker", "canary": true, "envoy_service": "bookkeeperkcl", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "localtoregionworker", "member": "bookkeeper.localtoregionworker", "type": "worker", "envoy_service": "bookkeeperworker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 30, "max_size": 30}}}}, {"name": "localtoregionworkercanary", "member": "bookkeeper.localtoregionworker", "type": "worker", "canary": true, "envoy_service": "bookkeeperworker", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "regionttlworker", "member": "bookkeeper.regionttlworker", "type": "worker", "envoy_service": "bookkeeperworker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 30, "max_size": 30}}}}, {"name": "regionttlworkercanary", "member": "bookkeeper.regionttlworker", "type": "worker", "canary": true, "envoy_service": "bookkeeperworker", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "unfinalizedpruningworker", "member": "bookkeeper.unfinalizedpruningworker", "type": "worker", "envoy_service": "bookkeeperworker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 30, "max_size": 30}}}}, {"name": "unfinalizedpruningworkercanary", "member": "bookkeeper.unfinalizedpruningworker", "type": "worker", "canary": true, "envoy_service": "bookkeeperworker", "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "bookkeeperkcl"}, {"facet": "localtoregionworker"}, {"facet": "regionttlworker"}, {"facet": "unfinalizedpruningworker"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "bookkeeperkclcanary"}, {"facet": "localtoregionworkercanary"}, {"facet": "regionttlworkercanary"}, {"facet": "unfinalizedpruningworker"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "bookkeeperkcl"}], "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "bookkeeperkcl"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "bookkeeperkcl"}, {"facet": "bookkeeperkclcanary"}, {"facet": "localtoregionworker"}, {"facet": "localtoregionworkercanary"}, {"facet": "regionttlworker"}, {"facet": "regionttlworkercanary"}, {"facet": "unfinalizedpruningworker"}, {"facet": "unfinalizedpruningworkercanary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "bookkeeper"}, {"name": "bookkeeperkcl"}, {"name": "bookkeeperworker"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"flexppz": null, "ledger": null, "ppzconfig": null, "regions": null, "rides": null, "supply": null, "tcs": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "redis_clusters": {"bookkeeper": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "logging": {"bookkeeper": {"fields": {"acquired_at_ms": "long", "bookkeeper_region": "keyword", "completed": "boolean", "driver_id": "long", "error": "keyword", "error_type": "keyword", "event_id": "keyword", "event_name": "keyword", "job_id": "keyword", "lock_key": "keyword", "messages": "keyword", "policy": "keyword", "policy_name": "keyword", "prev_policy_name": "keyword", "region": "keyword", "rollover_type": "keyword", "size_in_bytes": "long", "source_event": "keyword", "status": "keyword", "total": "long"}}}, "version": "151b4a3132111fa0e95ee9d558e0cb347f2142e2", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "bookmark": {"name": "bookmark", "description": "Bunny1 implementation for Lyft employees", "repository": "git@github.com:lyft/bookmark.git", "image_type": "service", "service_tier": 3, "credentials": true, "languages": ["bash", "python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:deb42d25da0e6d5fe565c019883e458b4b31b696"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:1de17b2c133a84a6096806ef9ba985a9ac009b54", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv uwsgi --gevent 100 --processes 4 --enable-threads\n    --protocol http --buffer-size 8192\n    --socket /run/gunicorn/gunicorn.sock --socket [::]:8080\n    --stats [::]:9090\n    --thunder-lock --wsgi-file /code/bookmark/wsgi.py --callable app\n", "workdir": "/code/bookmark", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "2Gi"}}], "facets": [{"name": "main", "member": "bookmark.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "canary", "member": "bookmark.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "bookmark.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "bookmark.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt", "cobertura": "build/coverage.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#bunny", "pagerduty_escalation_policy": "Bookmark", "team_email": "oshaked@lyft.com", "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "bookmark"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "ingress_ports": [9211, 80]}, "internal_hosts": {"dsfeatures": null, "dsfeatureswrites": null}}}}, "version": "9ecb4f292c75323ae8537bfa407a3515484c09bf", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "1de17b2c133a84a6096806ef9ba985a9ac009b54", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "bootartifact": {"name": "bootartifact", "description": "bootartifact", "repository": "git@github.com:lyft/ops.git:bootartifact", "team_email": "compute-team@lyft.com", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "bootartifact.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "bootartifact.dev"}], "slack": "#compute-bots", "pagerduty_escalation_policy": "Provisioning", "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "canary", "legacy": true}, {"name": "staging", "legacy": true}, {"name": "production", "legacy": true}], "image_type": "tool", "languages": ["python"], "version": "3fd52312ab723aa5b7f76c83b16ca2734125cf57", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "brandfe": {"name": "brandfe", "description": "A platform to orchestrate the creation of web pages from external content sources.", "repository": "git@github.com:lyft/brandfe.git", "image_type": "service", "service_tier": 2, "slack": "#lyftcom", "team_email": "frontend-platform@lyft.com", "pagerduty_escalation_policy": "Web UX", "languages": ["javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "workdir": "/code/brandfe", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "cdnupload", "command": "/code/brandfe/cdn-upload", "workdir": "/code/brandfe", "sub_image": "k8s"}, {"name": "publishtranslations", "command": "dumb-init -- npm run publish-translations", "workdir": "/code/brandfe", "sub_image": "k8s"}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false, "browserstack": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "brandfe.legacy"]}, {"name": "e2e", "members": ["e2etest.server", "brandfe.dev", "www2.dev", "wwwbrochurefe.legacy"]}, {"name": "e2e_homepage", "members": ["e2etest.server", "brandfe.dev", "www2.dev", "places.dev", "accountfrontend.dev", "ats.dev", "wwwbrochurefe.dev", "wwwdriveronboardingfe.dev", "regions.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "brandfe.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "e2e_chrome", "type": "execution", "group": "brandfe.e2e", "container": "brandfe.legacy", "command": "make test_e2e browser=chrome suite=pages", "reports": {"junit": "test/results/protractor-results-chrome.xml"}, "skip_threshold": null}, {"name": "e2e_homepage", "type": "execution", "group": "brandfe.e2e_homepage", "container": "brandfe.legacy", "command": "make test_e2e browser=chrome suite=homepage", "run_in_pr": false, "reports": {"junit": "test/results/protractor-results-chrome.xml"}, "skip_threshold": null}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}, {"facet": "translationscron"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "brandfe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"account": null, "acl": null, "graphql": null, "regions": null, "tcs": null, "wwwbrochurefe": null, "wwwdriveronboardingfe": null, "www2": null, "privacyaudit": null, "robocop": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2inode:service.c613d468388654eeca11d9a11603d9872a559e38", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}]}}, "facets": [{"name": "translationscron", "member": "brandfe.publishtranslations", "type": "cron", "schedule": "0 16,23 * * 1-5"}, {"name": "main", "member": "brandfe.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 2}}}}, {"name": "canary", "member": "brandfe.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "assets", "member": "brandfe.cdnupload", "type": "job"}], "version": "7b9f9980cf8e534423cbd950a302d6d4e38ea92f", "images": [{"parent": {"name": "s2inode", "version": "c613d468388654eeca11d9a11603d9872a559e38", "sub_image": "service", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "brochure": {"name": "brochure", "description": "brochure", "repository": "git@github.com:lyft/brochure.git", "credentials": true, "languages": ["javascript", "python"], "image_type": "service", "custom": {"service_type": "nodejs", "internal_service": false, "frontend_service": true}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 80}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}], "groups": [{"name": "dev", "members": ["control.dev", "brochure.legacy"]}, {"name": "integration", "members": ["ats.dev", "www2.dev", "accountfrontend.dev", "brochure.dev", "tcs.dev", "brandfe.dev", "wwwbrochurefe.dev", "wwwenterprisefe.dev", "robocop.dev", "switchboard.dev", "grow.dev", "wwwdriveronboardingfe.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "brochure.dev"}, {"name": "unit", "type": "execution", "group": "brochure.dev", "container": "brochure.legacy", "command": "make test_coverage"}, {"name": "lint", "type": "execution", "group": "brochure.dev", "container": "brochure.legacy", "command": "make test_lint"}, {"name": "e2e_chrome", "type": "execution", "group": "brochure.integration", "container": "brochure.legacy", "command": "make test_e2e browser=chrome suite=all", "reports": {"junit": "test/results/protractor-results-chrome.xml"}, "skip_threshold": null}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#lyftcom", "team_email": "frontend-platform@lyft.com", "pagerduty_escalation_policy": "Web UX", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, [{"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "service_tier": 1, "pulldeploy_components": {"data": ["translationdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "brochure"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"account": null, "expressdrivefeapi": null, "www2": null, "users": null, "robocop": null, "tcs": null, "grow": null, "wwwbrochurefe": null, "wwwdriveronboardingfe": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "version": "2ac8ac92dbcda0e24a812a7f2736321a223b90f9", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "bubble": {"name": "bubble", "description": "Bubble packages", "repository": "git@github.com:lyft/bubble.git", "slack": "#bubble-bots", "pagerduty_escalation_policy": "bubble", "team_email": "devx-team@lyft.com", "languages": ["bash", "javascript"], "image_type": "service", "service_tier": 3, "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "pkgdeploy", "command": "yarn deploy"}, {"name": "bubbleclirelease", "command": "yarn release-bubble-cli"}, {"name": "githubrelease", "command": "yarn create-github-release"}, {"name": "headlessworkersvc", "command": "dumb-init -- node /code/bubble/packages/bblheadlessworker/build/server/index.js", "workdir": "/code/bubble/packages/bblheadlessworker", "limits": {"cpu": 1, "memory": "512Mi"}, "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600}, {"name": "updateserversvc", "command": "dumb-init -- node /code/bubble/packages/updateserver/build/server/index.js", "workdir": "/code/bubble/packages/updateserver", "limits": {"cpu": 1, "memory": "512Mi"}, "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "bubble.spin"]}, {"name": "headlessworkerdev", "members": ["control.dev", "bubble.headlessworkersvc"]}, {"name": "updateserverdev", "members": ["control.dev", "bubble.updateserversvc"]}], "facets": [{"name": "bblheadlessworker", "envoy_service": "bblheadlessworker", "member": "bubble.headlessworkersvc", "type": "worker", "environment_files": ["ops/config/pillar/env-bblheadlessworker.yaml"], "autoscaling": {"environment": {"staging": {"min_size": 5, "max_size": 10}, "production": {"min_size": 10, "max_size": 20}}}}, {"name": "headlessworkerdirect", "type": "direct", "direct": {"paths": ["bblheadlessworker"]}}, {"name": "updateserver", "envoy_service": "bubbleupdateserver", "member": "bubble.updateserversvc", "type": "service", "environment_files": ["ops/config/pillar/env-updateserver.yaml"], "autoscaling": {"environment": {"staging": {"min_size": 2, "max_size": 3}, "production": {"min_size": 3, "max_size": 6}}}}, {"name": "pkgdeploy", "member": "bubble.pkgdeploy", "type": "job", "sidecars": []}, {"name": "bubbleclirelease", "member": "bubble.bubbleclirelease", "type": "job", "sidecars": []}, {"name": "githubrelease", "member": "bubble.githubrelease", "type": "job", "sidecars": []}], "facet_groups": [{"name": "headlessworker", "members": ["bblheadlessworker", "headlessworkerdirect"]}], "deploy": [[{"name": "staging-headlessworker", "automatic": true, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}, "orca": [{"region": "iad"}], "targets": [{"facet_group": "headlessworker"}]}, {"name": "staging-updateserver", "automatic": true, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}, "orca": [{"region": "iad"}], "targets": [{"facet": "updateserver"}]}], {"name": "staging", "automatic": true, "legacy": false, "bake_time_minutes": 0, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}, "orca": [{"region": "iad"}], "targets": [{"facet_group": "headlessworker"}, {"facet": "updateserver"}]}, [{"name": "production-headlessworker", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}, "orca": [{"region": "iad"}], "targets": [{"facet_group": "headlessworker"}]}, {"name": "production-updateserver", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}, "orca": [{"region": "iad"}], "targets": [{"facet": "updateserver"}]}, {"name": "production-packages", "automatic": true, "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "pkgdeploy"}]}, {"name": "production-bubble-cli-release", "automatic": true, "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "bubbleclirelease"}]}, {"name": "production-github-release", "automatic": true, "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "githubrelease"}]}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}, "orca": [{"region": "iad"}], "targets": [{"facet_group": "headlessworker"}, {"facet": "updateserver"}, {"facet": "pkgdeploy"}, {"facet": "bubbleclirelease"}, {"facet": "githubrelease"}]}], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "tests": [{"name": "headlessworkerstartup", "type": "startup", "group": "bubble.headlessworkerdev"}, {"name": "updateserverstartup", "type": "startup", "group": "bubble.updateserverdev"}, {"name": "unit", "type": "execution", "group": "bubble.dev", "container": "bubble.spin", "command": "yarn test"}, {"name": "lint", "type": "jailed", "command": "yarn lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "envoy": {"profile": "python", "settings": {"services": [{"name": "bubbleupdateserver"}, {"name": "bblheadlessworker"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null, "privacyaudit": null}}}}, "version": "9dff4839d5e7f555f66a2ceb5cb95d514031d56a", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "bubblesrv": {"name": "bubblesrv", "description": "Bubble server written in go that supports grpc and http/2", "repository": "git@github.com:lyft/bubble-server.git", "languages": ["go"], "image_type": "service", "slack": "#bubble-bots", "pagerduty_escalation_policy": "bubble", "team_email": "devx-team@lyft.com", "service_tier": 3, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igocli:8ad0040e2e37145a4ff8cdfc6669f48462d32b14"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}]}}, "containers": [{"name": "interactive", "command": "/bin/bash"}, {"name": "run", "command": "bubble-server", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}}], "groups": [{"name": "dev", "members": ["bubblesrv.run"]}], "tests": [{"name": "startup", "type": "startup", "group": "bubblesrv.dev"}, {"name": "unit", "type": "jailed", "command": "make test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "bubblesrv.run", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}, "orca": [{"region": "iad"}]}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "16:00 America/New_York"}, "envoy": {"profile": "go", "settings": {"services": [{"name": "bubblesrv"}], "common_settings": {"internal_hosts": {"bubblesrv": null}, "local_service": {"grpc_streaming": true, "circuit_breakers": {"default": {"max_connections": 2048}}}}}}, "version": "b4f5f996c370795c86bf89b04f5806044a12ff5d", "images": [{"parent": {"name": "s2igocli", "version": "8ad0040e2e37145a4ff8cdfc6669f48462d32b14", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2igocli", "version": "8ad0040e2e37145a4ff8cdfc6669f48462d32b14", "sub_image": null, "external": false}}, "bugsnaglistener": {"name": "bugsnaglistener", "description": "Listens to bugsnags webhooks and generates metrics", "repository": "git@github.com:lyft/bugsnaglistener.git", "image_type": "service", "service_tier": 3, "docs": {"disable": true}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipython3:d4951b013fa4b105fabdc812d4485cbca62df50c"}}, {"name": "s2i", "params": {"builder": "lyft/opsbase:89fa8b66419579eaf9b7422dc1c0bf43b005d183", "sub_image": "opsbase"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:af64b60f3384eafa7549817db1211abb06208703", "sub_image": "precommit"}}]}}, "languages": ["python"], "credentials": false, "slack": "#client-tooling-prs", "pagerduty_escalation_policy": "Mobile CI", "team_email": "client-productivity@lyft.com", "containers": [{"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/bugsnaglistener", "limits": {"cpu": 2, "memory": "2Gi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}}, {"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "workdir": "/code/bugsnaglistener", "sub_image": "opsbase", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "bugsnaglistener.legacy"]}], "tests": [{"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "startup", "type": "startup", "group": "bugsnaglistener.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "bugsnaglistener.service", "type": "service", "autoscaling": {"min_size": 1, "environment": {"staging": {"max_size": 1}, "production": {"max_size": 3}}}}], "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "bugsnaglistener"}]}}, "version": "ac81193503c3bc1145a6db92104d3a42481c4bcd", "images": [{"parent": {"name": "s2ipython3", "version": "d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "opsbase", "version": "89fa8b66419579eaf9b7422dc1c0bf43b005d183", "sub_image": null, "external": false}, "sub_image": "opsbase"}, {"parent": {"name": "precommit", "version": "af64b60f3384eafa7549817db1211abb06208703", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipython3", "version": "d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": null, "external": false}}, "buildcache": {"name": "buildcache", "description": "Distributed Build Cache for Buck and Gradle Build Systems", "repository": "git@github.com:lyft/buildcache.git", "slack": "#buildcache", "team_email": "client-tooling@lyft.com", "pagerduty_escalation_policy": "Mobile CI", "image_type": "service", "credentials": true, "docs": {"disable": true}, "service_tier": 3, "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "mode": "direct", "clusterLabels": [{"cluster.lyft.net/role": "infra"}, {"cluster.lyft.net/cluster_name": "infrastaging"}], "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "acl": {"admin_policies": ["kubernetes-client-tooling-admin"]}}, "automatic": true}, {"name": "production", "legacy": false, "orca": [{"iam_role": "orca-admin", "region": "iad"}], "kubernetes": {"enabled": true, "mode": "direct", "clusterLabels": [{"cluster.lyft.net/role": "infra"}, {"cluster.lyft.net/cluster_name": "infra"}], "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "acl": {"admin_policies": ["kubernetes-client-tooling-admin"]}}}], "version": "2b4ef542037be157fec52d8aecf51f89f70571ab", "images": [{"parent": {"name": "bionicbase", "version": "1e528f4b38210368cdf8837ac5d8060c4a8fe90b", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "1e528f4b38210368cdf8837ac5d8060c4a8fe90b", "sub_image": null, "external": false}}, "buildnotify": {"name": "buildnotify", "description": "buildnotify", "repository": "git@github.com:lyft/buildnotify.git", "credentials": true, "credentials_legacy": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:81f3a62b033eff99133851326875cb87f53b6de1", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "validatestaging", "command": "make test_validate_staging", "workdir": "/code/buildnotify", "sub_image": "k8s"}, {"name": "validatestagingghe", "command": "make test_validate_staging_on_ghe_staging", "workdir": "/code/buildnotify", "sub_image": "k8s"}, {"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 80}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --bind unix:/run/gunicorn/gunicorn.sock --bind 0.0.0.0:20004 --workers=4 -k gevent --worker-connections=1000 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/buildnotify", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi"}, "readiness_probe": {"http_get": {"path": "/healthcheck", "port": 20004, "scheme": "HTTP"}}}, {"name": "serviceghe", "command": "service_venv gunicorn wsgi:app --bind unix:/run/gunicorn/gunicorn.sock --bind 0.0.0.0:20005 --workers=4 -k gevent --worker-connections=1000 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/buildnotify", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi"}, "readiness_probe": {"http_get": {"path": "/healthcheck", "port": 20005, "scheme": "HTTP"}}}], "facets": [{"name": "main", "member": "buildnotify.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 3, "max_size": 10}}}, "requirements": {"nlbingress": true}}, {"name": "canary", "member": "buildnotify.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}, "requirements": {"nlbingress": true}}, {"name": "mainghe", "member": "buildnotify.serviceghe", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s-ghe.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 3, "max_size": 10}}}, "requirements": {"nlbingress": true}}, {"name": "canaryghe", "member": "buildnotify.serviceghe", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s-ghe.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}, "requirements": {"nlbingress": true}}, {"name": "validatestaging", "member": "buildnotify.validatestaging", "type": "job"}, {"name": "validatestagingghe", "member": "buildnotify.validatestagingghe", "type": "job"}], "groups": [{"name": "dev", "members": ["control.dev", "buildnotify.legacy", "dynamodb.dev", "redis.dev"]}], "tests": [{"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "mainghe"}]}, [{"name": "staging-validate", "automatic": true, "legacy": false, "kubernetes": {"enabled": true, "mode": "synth"}, "targets": [{"facet": "validatestaging"}], "orca": []}, {"name": "staging-validate-ghe", "automatic": true, "legacy": false, "kubernetes": {"enabled": true, "mode": "synth"}, "targets": [{"facet": "validatestagingghe"}], "orca": []}], {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true}], "slack": "#ci-bots", "pagerduty_escalation_policy": "Continuous Integration", "team_email": "automation-team@lyft.com", "languages": ["python"], "image_type": "service", "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "buildnotify"}], "common_settings": {"internal_hosts": {"team": null, "laser": null, "family": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "redis_clusters": {"buildnotify": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "logging": {"buildnotify": {"fields": {"job": {"context": "keyword", "state": "long", "name": "keyword", "url": "keyword", "sha": "keyword", "repo": "keyword"}, "event_guid": "keyword", "event_type": "keyword", "org": "keyword", "repo": "keyword", "sha": "keyword", "id": "keyword", "context": "keyword", "state": "keyword", "repository": "keyword", "commit_status": "keyword", "revision": "keyword", "url": "keyword", "author": "keyword", "all_finished": "boolean", "all_passed": "boolean", "task_id": "keyword", "task_state": "keyword", "parent_task_id": "keyword", "jenkins_phase": "keyword", "options": {"caching": {"read_on_success": "boolean", "write_on_success": "boolean"}, "created_for": "keyword", "dependencies": "keyword"}, "command_name": "keyword", "user": "keyword", "params": {"revision": "keyword", "ref": "keyword", "repo": "keyword", "pr": "keyword", "image": "keyword", "repo_url": "keyword", "manifest_dir": "keyword", "github_url": "keyword", "pull_request_number": "keyword", "plus_ones_received_by": "keyword", "soft": "keyword", "pr_branch": "keyword", "github_repository_name": "keyword", "destination_branch": "keyword", "pr_author_github_username": "keyword", "tarball_download": "keyword", "push_ecr": "keyword", "sub_images": "keyword", "provider": "keyword", "provider_build_id": "keyword", "sha": "keyword", "repository": "keyword", "hotfix_branch": "keyword", "base_tag": "keyword", "service_data": "keyword", "default_service_data": "keyword", "buildnotify_metadata": "keyword"}, "head": "keyword", "ref": "keyword", "repo_name": "keyword", "notification": {"task_state": "long", "jenkins_url": "keyword", "command_name": "keyword", "jenkins_internal_url": "keyword", "url": "keyword", "status": "keyword", "build_number": "long", "repo_name": "keyword"}, "pr": {"base": {"ref": "keyword", "sha": "keyword"}, "updated_at": "date", "deletions": "long", "created_at": "date", "repo_name": "keyword", "state": "keyword", "merged": "boolean", "title": "keyword", "commits": "long", "comments": "long", "additions": "long", "html_url": "keyword", "locked": "boolean", "number": "long", "user": {"login": "keyword"}, "head": {"sha": "keyword", "ref": "keyword"}, "changed_files": "long", "merge_commit_sha": "keyword", "mergeable": "boolean", "closed_at": "date", "merged_at": "date", "merged_by": {"login": "keyword"}}, "run_all_tests": "boolean", "username": "keyword", "pr_num": "long", "reviewer": "keyword", "review": "long", "service": "keyword", "stage": "keyword", "missing_upstream_tests": "keyword", "previous_sha": "keyword", "deployed_sha": "keyword", "comparison": {"repo": "keyword", "head": "keyword", "base": "keyword"}, "name": "keyword", "status": "keyword", "az": "keyword", "job_url": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "service_names": "keyword", "branch": "keyword", "description": "keyword", "userid": "keyword", "test_name": "keyword", "slack_user": "keyword", "library": "keyword", "artifact": "keyword", "commit": {"html_url": "keyword", "committer": {"login": "keyword"}, "author": {"login": "keyword"}, "sha": "keyword"}, "version": "keyword", "upstream_services": "keyword", "archive_url": "keyword", "failed_record_count": "long", "attempt_num": "long", "commit_metadata": {"revert_status": "keyword"}}}}, "version": "7dafd8a285d841a880ac8c866fc641ce309469be", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "81f3a62b033eff99133851326875cb87f53b6de1", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "bulkmapmatching": {"name": "bulkmapmatching", "description": "Bulk Map-Matching", "repository": "git@github.com:lyft/bulkmapmatching.git", "image_type": "service", "languages": ["python"], "credentials": true, "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "bulkmapmatching.spin"]}], "pagerduty_escalation_policy": "Locations", "service_tier": 2, "slack": "#localization-driver", "team_email": "locations@lyft.com", "tests": [{"name": "unit_and_integration", "type": "jailed", "command": "make test_all2"}, {"name": "unit_and_integration3", "type": "jailed", "command": "make test_all3"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "workflow_registration", "type": "execution", "group": "bulkmapmatching.dev", "container": "bulkmapmatching.spin", "command": "service_venv mbadmin register-workflows new"}], "deploy": [[{"name": "staging", "legacy": true, "automatic": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_staging"}], [{"name": "production", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_production"}]], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "version": "1fa1b0cddc312315ddcc8df98e2d9638972a87b6", "images": [{"parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}}, "campaigns": {"name": "campaigns", "description": "campaigns service", "repository": "git@github.com:lyft/campaigns.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 120, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "elasticsearch5.dev", "jobscheduler.dev", "redis.dev", "dynamostreams.dev", "supply.dev", "users.dev", "campaigns.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "campaigns.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "campaigns.dev", "container": "campaigns.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#notifications-bots", "team_email": "notifications-eng@lyft.com", "pagerduty_escalation_policy": "Notifications", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "pulldeploy_components": {"data": ["regioncfgdata"]}, "languages": ["python"], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "campaigns"}, {"name": "campaignsbatch"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"adtechworkflows": null, "campaigns": null, "jobschedulernormalweb": null, "jobschedulerbulkweb": null, "mailer": null, "regions": null, "rides": null, "supply": null, "switchboard": null, "usergroups": null, "users": null}, "external_hosts": {"dynamodb_iad": null}, "redis": {"campaignsmultiredis": {"port": 6380}}}, "override_settings": [{"services": [{"name": "campaigns"}], "settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 200}}}, "internal_hosts": {"ats": null, "tcs": null}, "external_hosts": {"firehose_iad": null}}}, {"services": [{"name": "campaignsbatch"}], "settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}}}}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}]}}, "logging": {"campaigns": {"fields": {"campaign_id": "keyword", "user_id": "keyword", "to": "keyword", "from_status": "keyword", "to_status": "keyword", "phone_number": "keyword", "message_status": "keyword", "message_sid": "keyword", "status": "keyword", "exc": "keyword", "post_data": {"to_number": "keyword", "status": "keyword", "from_number": "keyword", "provider_occurred_at": "keyword", "message_provider_id": "keyword", "error_code": "keyword", "message_id": "keyword", "sid": "keyword", "raw_status": "keyword"}}}, "campaignsbatch": {"fields": {"campaign_id": "keyword", "campaigns_number": "long", "new_size": "long", "prev_size": "long", "num_updated": "long", "deleted_number": "long", "num_deleted": "long", "execution_complete_time_ms": "keyword", "prev_status": "keyword", "to": "keyword", "to_status": "keyword", "success": "boolean", "from_status": "keyword"}}}, "version": "612436d44c194fe3ff6ac68ed604992fc8c2ae7b", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "campaignscheduler": {"name": "campaignscheduler", "description": "Execute scheduled and on-event campaigns", "repository": "git@github.com:lyft/campaignscheduler.git", "image_type": "service", "service_tier": 2, "slack": "#notifications-bots", "team_email": "notifications-eng@lyft.com", "pagerduty_escalation_policy": "Notifications", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/campaignscheduler", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "1.5Gi"}}, {"name": "poller", "command": "dumb-init -- service_venv python manage.py poller", "sub_image": "k8s", "workdir": "/code/campaignscheduler"}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "campaignscheduler.legacy", "redis.dev"]}, {"name": "integration", "members": ["campaignscheduler.dev", "envoy.server", "jobscheduler.dev", "audience.dev", "campaignstorage.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "campaignscheduler.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "target": "tests/integration", "group": "campaignscheduler.integration", "virtualenv": "service_venv", "container": "campaignscheduler.legacy", "command": "make test_integration", "float_dependencies": "30 5-22 * * *", "reports": {"junit": "build/integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "campaignscheduler.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"criteria": {"cpu_target": 30}, "environment": {"staging": {"min_size": 1, "max_size": 10}, "production": {"min_size": 1, "max_size": 80}}}}, {"name": "canary", "member": "campaignscheduler.service", "type": "service", "canary": true, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "poller", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "member": "campaignscheduler.poller", "schedule": "*/2 * * * *", "concurrency_policy": "replace"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}, {"facet": "poller"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": true, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "poller"}], "kubernetes": {"enabled": true}}]], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "campaignscheduler"}, {"name": "campaignschedulerbatch"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080", "circuit_breakers": {"default": {"max_connections": 200}}}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "s3_iad": null}, "internal_hosts": {"acquisitionbonuses": null, "audience": null, "campaignscheduler": null, "campaignstorage": null, "engagementplatform": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "leadplatform": null, "marketweather": null, "paxrewardsview": null, "pricing": null, "coupons": null, "regions": null, "rides": null, "ridesapi": null, "ridehistory": null, "ridescheduler": null, "ridetimeestimator": null, "tcs": null, "tripsapi": null, "users": null, "usereligibilities": null}, "redis_clusters": {"campaignschedule": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "logging": {"campaignscheduler": {"fields": {"campaign_instance_id": "keyword", "job_id": "keyword", "event": {"event_name": "keyword"}, "campaign_id": "keyword", "participant_id": "keyword", "pretend": "boolean", "participant_type": "keyword", "step": "long", "action_name": "keyword", "action": {"action_params": {"message_template_name": "keyword", "message_template_id": "keyword"}, "action_name": "keyword"}, "user_id": "keyword", "message_template_id": "keyword", "triggered_time_ms": "keyword", "message_id": "keyword", "step_number": "long", "instance_id": "keyword", "campaign_status": "keyword", "request_id": "keyword", "audience_id": "keyword", "request_status": "keyword", "updated_at_ms": "keyword", "status": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "audience_ids": "keyword", "error": "keyword", "delay_sec": "long"}}, "campaignschedulerbatch": {"fields": {"job_id": "keyword", "campaign_instance_id": "keyword"}}}, "version": "3422df1487af9ec84e8de8ae161116fe45a22256", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "campaignstorage": {"name": "campaignstorage", "description": "Handle creation and launching engagement campaigns.", "repository": "git@github.com:lyft/campaignstorage.git", "image_type": "service", "service_tier": 2, "slack": "#notifications-bots", "team_email": "notifications-eng@lyft.com", "pagerduty_escalation_policy": "Notifications", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/campaignstorage", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1.25Gi"}}, {"name": "createrecurringcampaigninstances", "command": "dumb-init -- service_venv python manage.py create_recurring_campaign_instances", "sub_image": "k8s", "workdir": "/code/campaignstorage"}, {"name": "sendcampaignexpirationemail", "command": "dumb-init -- service_venv python manage.py send_campaign_expiration_email", "sub_image": "k8s", "workdir": "/code/campaignstorage"}, {"name": "markpretendcampaignasdone", "command": "dumb-init -- service_venv python manage.py mark_pretend_campaign_as_done", "sub_image": "k8s", "workdir": "/code/campaignstorage"}, {"name": "enforcetntbusinessrules", "command": "dumb-init -- service_venv python manage.py enforce_tnt_business_rules", "sub_image": "k8s", "workdir": "/code/campaignstorage"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "elasticsearch6.server", "campaignstorage.legacy"]}, {"name": "integration", "members": ["campaignstorage.dev", "campaignscheduler.dev", "audience.dev", "envoy.server", "jobscheduler.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "campaignstorage.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "target": "tests/integration", "group": "campaignstorage.integration", "virtualenv": "service_venv", "container": "campaignstorage.legacy", "command": "make test_integration", "float_dependencies": "30 5-22 * * *", "reports": {"junit": "build/integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "campaignstorage.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"criteria": {"cpu_target": 18}, "environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 1, "max_size": 50}}}}, {"name": "canary", "member": "campaignstorage.service", "type": "service", "canary": true, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "recurringcampaigninstancescron", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "member": "campaignstorage.createrecurringcampaigninstances", "concurrency_policy": "forbid", "schedule": "*/20 * * * *"}, {"name": "campaignexpirationemailcron", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "member": "campaignstorage.sendcampaignexpirationemail", "concurrency_policy": "forbid", "schedule": "0 21 * * *"}, {"name": "markpretendcampaignasdone", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "member": "campaignstorage.markpretendcampaignasdone", "concurrency_policy": "forbid", "schedule": "0 21 * * *"}, {"name": "enforcetntbusinessrules", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "member": "campaignstorage.enforcetntbusinessrules", "concurrency_policy": "forbid", "schedule": "0 * * * *"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}, {"facet": "recurringcampaigninstancescron"}, {"facet": "markpretendcampaignasdone"}, {"facet": "enforcetntbusinessrules"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "recurringcampaigninstancescron"}, {"facet": "campaignexpirationemailcron"}, {"facet": "markpretendcampaignasdone"}, {"facet": "enforcetntbusinessrules"}], "kubernetes": {"enabled": true}}]], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "campaignstorage"}, {"name": "campaignstoragebatch"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "external_hosts": {"dynamodb_iad": null}}, "override_settings": [{"services": [{"name": "campaignstorage"}], "settings": {"internal_hosts": {"audience": null, "campaignscheduler": null, "jobschedulerbulkweb": null, "mailer": null, "messaging": null, "tcseditor": null, "tcsresults": null}}}]}}, "logging": {"campaignstorage": {"fields": {"campaign_instance_id": "keyword", "last_action_time_ms": "keyword", "status": "keyword", "campaign_id": "keyword", "error": "keyword"}}}, "version": "dd689312bac238bb26046a7df117dbcb2724d5d4", "images": [{"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "cancelmitigation": {"name": "cancelmitigation", "description": "Triggers features for mitigating pax and driver cancels", "repository": "git@github.com:lyft/cancelmitigation.git", "image_type": "service", "service_tier": 1, "slack": "#cancel-policy-server", "team_email": "cancel-xp-eng@lyft.com", "pagerduty_escalation_policy": "CancelsExperience", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/cancelmitigation", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "3Gi"}}], "facets": [{"name": "main", "member": "cancelmitigation.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 5}}}}, {"name": "canary", "member": "cancelmitigation.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "ratelimit.dev", "cancelmitigation.legacy"]}, {"name": "integration", "members": ["account.dev", "ats.dev", "auth.dev", "backgroundcheck.dev", "cancelmitigation.dev", "coupons.dev", "dispatch.integration", "dispatchavailability.dev", "drivermode.dev", "dynamodb.dev", "green.dev", "jobscheduler.dev", "ledger.dev", "locations.dev", "messaging.dev", "payapi.dev", "postgresql.dev", "pricing.dev", "publicapi.dev", "push.dev", "regions.dev", "rides.dev", "ridesapi.dev", "ridetimeestimator.dev", "ridexppredictor.dev", "supplyrecords.dev", "tcs.dev", "trips.dev", "tripsapi.dev", "userpreferences.dev", "users.dev", "vehiclemetadata.dev", "viewport.dev", "wallet.dev", "walletapi.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "cancelmitigation.dev"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "sharded", "target": "tests/integration", "virtualenv": "service_venv", "float_dependencies": "0 5-22 * * *", "group": "cancelmitigation.integration", "container": "cancelmitigation.legacy", "skip_threshold": 5, "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "cancelmitigation"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}, "internal_hosts": {"cancelmitigation": null, "coupons": null, "jobschedulernormalweb": null, "jobschedulerbulkweb": null, "messaging": null, "ratelimit": null, "rides": null, "tcs": null}}}}, "logging": {"cancelmitigation": {"fields": {"endpoint": "keyword", "response_text": "keyword", "ride_id": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "endpoint_data": {"attempt_count": "long", "ride_id": "keyword", "user_id": "keyword"}, "status_code": "long", "deliver_after": "date", "user_id": "keyword", "message_template_name": "keyword", "message_template_id": "keyword", "response": "keyword"}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "version": "f97f98f6b7eba56206e459701da61bf5c06e0a41", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "cancels": {"name": "cancels", "description": "A service to handle cancel penalty calculation and other cancel related business logic", "repository": "git@github.com:lyft/cancels.git", "image_type": "service", "service_tier": 1, "slack": "#cancel-policy-server", "team_email": "cancel-xp-eng@lyft.com", "pagerduty_escalation_policy": "CancelsExperience", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/cancels", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "3072Mi"}}], "facets": [{"name": "main", "member": "cancels.service", "type": "service", "envoy_service": "cancels", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 3, "max_size": 30}}}}, {"name": "canary", "member": "cancels.service", "type": "service", "envoy_service": "cancels", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "cancels.legacy"]}, {"name": "integration_full", "members": ["cancels.integration_api", "cancels.integration_services"]}, {"name": "integration_api", "members": ["lyfttestlib.ride", "cancels.dev"]}, {"name": "integration_db", "members": ["cancels.dev"]}, {"name": "integration_services", "members": ["lyfttestlib.ride", "karma.legacy", "modelexec.legacy", "ratelimit.legacy", "supportcontact.legacy", "switchboard.legacy", "cancels.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "cancels.dev"}, {"name": "lint", "type": "jailed", "command": "make test_lint", "reports": {"pylint": "build/flake8.txt", "cobertura": "build/coverage.xml", "isort": "build/isort.txt"}}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml"}}, {"name": "integration_full", "type": "sharded", "target": "tests/integration", "group": "cancels.dev", "execution_group": "cancels.integration_full", "virtualenv": "service_venv", "container": "cancels.legacy", "float_dependencies": "H 5-22 * * *", "run_in_dev": false, "run_in_pr": false, "reports": {"junit": "build/integration.xml"}}, {"name": "integration_db", "type": "execution", "group": "cancels.integration_db", "container": "cancels.legacy", "command": "make test_integration_db", "run_in_dev": false, "run_in_pr": true, "reports": {"junit": "build/integration_db.xml"}}, {"name": "integration_routes", "type": "execution", "group": "cancels.integration_api", "container": "cancels.legacy", "command": "make test_integration_routes", "reports": {"junit": "build/integration_routes.xml"}}, {"name": "integration_services", "type": "execution", "group": "cancels.integration_services", "container": "cancels.legacy", "command": "make test_integration_services", "run_in_dev": false, "run_in_pr": false, "reports": {"junit": "build/integration_services.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "cancels"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "internal_hosts": {"badcompanions": null, "dispatchavailability": null, "dsfeatures": null, "ghostmatching": null, "jobschedulernormalweb": null, "jobschedulerbulkweb": null, "karma": null, "locations": null, "messaging": null, "modelexecmisc": null, "ratecards": null, "ratelimit": null, "regions": null, "riderperks": null, "rides": null, "ridesapi": null, "ridescheduler": null, "ridetimeestimator": null, "routes": null, "supportcontact": null, "switchboard": null, "tcs": null, "users": null, "venues": null}, "local_service": {"circuit_breakers": {"default": {"max_connections": 200}}}}}}, "logging": {"cancels": {"fields": {"region": "keyword", "failure_reason": "keyword", "reason": "keyword", "code": "long", "features": {"hour_of_week": "long", "pax_sms_char_len": "long", "dvr_sum_call_duration": "long", "dvr_total_rides": "long", "driver_distance_at_cancellation_meters": "float", "upfront_fare_amount": "long", "dvr_voice": "long", "pickup_pin_selection_method": "keyword", "hour": "long", "pax_no_show_rate": "float", "pax_voice": "long", "is_scheduled_ride": "boolean", "pax_sum_call_duration": "long", "gh6_total_rides": "long", "region": "keyword", "hour_of_week_shifted": "long", "pax_total_rides": "long", "request_started_at_to_arrived_at_sec": "float", "hour_shifted": "long", "ride_type": "keyword", "arrived_at_to_cancelled_at_sec": "long", "driver_distance_at_arrival_meters": "float", "dvr_no_show_rate": "float"}, "exception": {"message": "keyword", "class": "keyword"}, "time_elapsed_since_accept": "long", "driver_id": "keyword", "location_age_before_request_seconds": "float", "passenger_id": "keyword", "ride_id": "keyword", "waived_fee": "boolean", "existing_cancel_penalty": {"passenger_blocked_reasons": "keyword", "passenger_applied_reason": "keyword", "passenger_amount": "long", "driver_blocked_reasons": "keyword", "driver_applied_reason": "keyword", "driver_amount": "long", "blocked_reason": "keyword", "applied_reason": "keyword"}, "upfront_fare_amount": "long", "dvr_voice": "long", "updated_cancel_penalty": {"passenger_blocked_reasons": "keyword", "passenger_applied_reason": "keyword", "passenger_amount": "long", "driver_blocked_reasons": "keyword", "driver_applied_reason": "keyword", "driver_amount": "long", "blocked_reason": "keyword", "applied_reason": "keyword"}, "current_etd": "float", "current_eta": "float", "driver_distance_at_cancellation_meters": "float", "ride_type": "keyword", "gh6_total_rides": "long", "use_default": "boolean", "probability_threshold": "float", "request_started_at_to_arrived_at_sec": "float", "dvr_no_show_rate": "float", "passenger_lyft_id": "keyword", "accepted_at": "date", "event_name": "keyword", "picked_up_at": "keyword", "last_post_pickup_cancel": "keyword", "arrived_at_to_cancelled_at_sec": "long", "probability": "float", "pax_no_show_rate": "float", "user_id": "keyword", "hour_shifted": "long", "hour_of_week": "long", "pax_sum_call_duration": "long", "pax_voice": "long", "accepted_eta": "long", "function": "keyword", "time_elapsed_since_pickup": "keyword", "pax_sms_char_len": "long", "canceled_at_ms": "keyword", "dvr_sum_call_duration": "long", "hour": "long", "is_scheduled_ride": "boolean", "pickup_pin_selection_method": "keyword", "ride_status": "keyword", "timezone": "keyword", "driver_distance_at_arrival_meters": "float", "driver_lyft_id": "keyword", "is_persist_enabled": "boolean", "dvr_total_rides": "long", "code_num": "long", "code_name": "keyword", "pax_total_rides": "long", "requester_id": "keyword", "hour_of_week_shifted": "long", "model": "keyword", "model_name": "keyword"}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s"}}]}}, "version": "3d2f73e96477407cc13ac98c253a2da2a5459193", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "capsule8": {"name": "capsule8", "description": "capsule8 security sensor", "repository": "git@github.com:lyft/k8s-sidecars.git:capsule8", "pagerduty_escalation_policy": "Security", "team_email": "security-engineering@lyft.com", "slack": "#security-deploys", "deploy": [{"name": "staging-sidecar-test1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sidecar-test1"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sidecar-test1"]}}}, {"name": "staging", "legacy": false, "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}}], "image_type": "service", "service_tier": 3, "version": "464c44fe4155634c89274310eb44f790198236df", "images": [{"parent": {"name": "bionicbase", "version": "415b66b1bc328299e2f76b318cca3a0b4a8e3acf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "415b66b1bc328299e2f76b318cca3a0b4a8e3acf", "sub_image": null, "external": false}}, "ccbot": {"name": "ccbot", "description": "A bot that cc's the respective oncalls based on keywords in the incoming questions in a channel", "repository": "git@github.com:lyft/ccbot.git", "slack": "#scrumbot-dev", "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "Datastores", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:2b5a476d830adfe9c66ec33dce50d14125b10d54"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d1f0a787cd99ae420aa7640e9dd2f935f316864e", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.82c178d4c602bd85be2445e9e2405af2ac8ec73f", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/ccbot", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "ccbot.legacy"]}, {"name": "service_group", "members": ["ccbot.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "ccbot.dev"}, {"name": "unit", "type": "jailed", "command": "service_venv pytest --cov=app --junitxml=build/unit.xml --cov-report=xml tests/unit", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "ccbot.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "ccbot.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "ccbot"}]}}, "version": "46736d5538eaca298dee8d2207f4077c9c023cb5", "images": [{"parent": {"name": "opsbase", "version": "2b5a476d830adfe9c66ec33dce50d14125b10d54", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d1f0a787cd99ae420aa7640e9dd2f935f316864e", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "82c178d4c602bd85be2445e9e2405af2ac8ec73f", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "2b5a476d830adfe9c66ec33dce50d14125b10d54", "sub_image": null, "external": false}}, "cdcadapters": {"name": "cdcadapters", "repository": "git@github.com:lyft/cdcadapters.git", "description": "2nd half of CDC Event Bus, Move data from Kafka to sinks", "service_tier": 3, "team_email": "ds-data@lyft.com", "pagerduty_escalation_policy": "DS Data Pipeline", "slack": "#ds-data-pod", "image_type": "service", "languages": ["go"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sources": [{"name": "confluent", "source": "deb https://packages.confluent.io/deb/5.3 stable main", "keyid": 41468433}], "packages": ["librdkafka-dev", "pkg-config", "vim", "redis-tools"]}}, {"name": "s2iplus", "params": {"sub_image": "k8s", "builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sources": [{"name": "confluent", "source": "deb https://packages.confluent.io/deb/5.3 stable main", "keyid": 41468433}], "packages": ["librdkafka-dev", "pkg-config", "vim", "redis-tools"]}}, {"name": "s2iplus", "params": {"sub_image": "precommit", "builder": "lyft/precommit:go.0354713f9920346a505b0c133c02def7fb74cda9", "sources": [{"name": "confluent", "source": "deb https://packages.confluent.io/deb/5.3 stable main", "keyid": 41468433}], "packages": ["librdkafka-dev", "pkg-config", "redis-tools"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "worker", "command": "dumb-init -- cdcadapters worker", "workdir": "/go/src/github.com/lyft/cdcadapters", "limits": {"cpu": 1, "memory": "2Gi", "environment": {"development": {"cpu": 1, "memory": "1Gi"}}}, "sub_image": "k8s", "start_time": 600}, {"name": "batch", "command": "cdcadapters batch _ARGS_", "workdir": "/go/src/github.com/lyft/cdcadapters", "limits": {"cpu": 2, "memory": "10Gi", "environment": {"development": {"cpu": 1, "memory": "1Gi"}}}, "sub_image": "k8s", "start_time": 600}, {"name": "batchstate", "command": "batchstate", "workdir": "/go/src/github.com/lyft/cdcadapters"}], "groups": [{"name": "dev", "members": ["control.dev", "kafka.server", "redis.dev", "dynamodb.server", "elasticsearch6.server", "kinesis.server", "minio.server", "elasticsearch6.server", "metadataproxy.server", "cdcadapters.legacy"]}, {"name": "status", "members": ["control.dev", "metadataproxy.server", "cdcadapters.batchstate"]}], "tests": [{"name": "startup", "type": "startup", "group": "cdcadapters.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "cdcadapters.dev", "container": "cdcadapters.legacy", "command": "make integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "live", "member": "cdcadapters.worker", "type": "worker", "environment_files": ["ops/config/pillar/live.yaml"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1, "criteria": {"cpu_target": 60}}, "production": {"min_size": 1, "max_size": 10, "criteria": {"cpu_target": 60}}}}}, {"name": "backup", "member": "cdcadapters.worker", "type": "worker", "environment_files": ["ops/config/pillar/backup.yaml"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1, "criteria": {"cpu_target": 60}}, "production": {"min_size": 1, "max_size": 10, "criteria": {"cpu_target": 60}}}}}, {"name": "replay", "member": "cdcadapters.batch", "type": "batch", "environment_files": ["ops/config/pillar/replay.yaml"]}], "facet_groups": [{"name": "staging", "members": ["live", "backup", "replay"]}, {"name": "production", "members": ["live", "backup", "replay"]}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet_group": "staging"}]}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet_group": "production"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "cdcadapters", "traffic_type": "egress_only"}], "common_settings": {"internal_hosts": {"analyticsingest": null, "streamcheck": null, "dsfeatures": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "jobschedulerurgentweb": null, "jobschedulermigrationweb": null, "taskqueuemigrationweb": null, "taskqueuenormalweb": null, "taskqueuebulkweb": null, "cdctransformation": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "s3_iad": null}, "redis_clusters": {"cdcadaptersec": {"aws_random_identifier": "vngjnv", "port": 6381, "op_timeout_ms": 400}}}}}, "version": "c8111f7c2c4dcd9d74e829cd48c701062915dfa1", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "cdcpersisterdyn": {"name": "cdcpersisterdyn", "description": "Streaming job which reads events and writes to s3", "repository": "git@github.com:lyft/cdcpersisterdyn.git", "pagerduty_escalation_policy": "fusion-dev", "slack": "#f2-dev", "team_email": "f2-dev@lyft.com", "image_type": "service", "service_tier": 3, "credentials": true, "languages": ["bash", "java"], "containers": [{"name": "service", "command": "/docker-entrypoint.sh local"}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "cdcpersisterdyn.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "cdcpersisterdyn.dev"}, {"name": "integration", "type": "execution", "group": "cdcpersisterdyn.dev", "container": "cdcpersisterdyn.service", "command": "mvn verify --settings /settings.xml -P '!disable-integration-tests' -Dcheckstyle.skip=true"}, {"name": "unittest", "type": "execution", "group": "cdcpersisterdyn.dev", "container": "cdcpersisterdyn.service", "command": "mvn test --settings /settings.xml surefire-report:report -Dcheckstyle.skip=true"}, {"name": "checkstyle", "type": "execution", "group": "cdcpersisterdyn.dev", "container": "cdcpersisterdyn.service", "command": "mvn --settings /settings.xml checkstyle:check"}], "builder": {"name": "s2i", "params": {"builder": "lyft/s2istreamingplatformflink:sp20.e7ff259c7ba6843ae339496819df7d443d843872"}}, "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}, [{"name": "cdcpersisterdyn-staging", "legacy": false, "automatic": false}, {"name": "cdcmongorides-staging", "legacy": false, "automatic": false}, {"name": "cdcmongoroutes-staging", "legacy": false, "automatic": false}], {"name": "production", "legacy": false, "automatic": false, "orca": [{"region": "iad"}]}, [{"name": "cdcpersisterdyn-production", "legacy": false, "automatic": false}, {"name": "cdcmongorides-production", "legacy": false, "automatic": false}, {"name": "cdcmongoroutes-production", "legacy": false, "automatic": false}]], "streamingplatform": {"kubernetes": true, "applications": ["cdcpersisterdyn"], "stages": {"cdcpersisterdyn-staging": {"configuration": "cdcpersisterdyn-staging.jsonnet"}, "cdcmongorides-staging": {"configuration": "cdcmongorides-staging.jsonnet"}, "cdcmongoroutes-staging": {"configuration": "cdcmongoroutes-staging.jsonnet"}, "cdcpersisterdyn-production": {"configuration": "cdcpersisterdyn-production.jsonnet"}, "cdcmongorides-production": {"configuration": "cdcmongorides-production.jsonnet"}, "cdcmongoroutes-production": {"configuration": "cdcmongoroutes-production.jsonnet"}}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "cdcpersisterdyn"}, {"name": "cdcpersisterdynjobmanager", "traffic_type": "egress_only"}, {"name": "cdcpersisterdyntaskmanager", "traffic_type": "egress_only"}], "common_settings": {"external_hosts": {"kinesis_iad": null}}}}, "version": "beb6d822143bfe2b100244b22d04ad046811d1bd", "images": [{"parent": {"name": "s2istreamingplatformflink", "version": "e7ff259c7ba6843ae339496819df7d443d843872", "sub_image": "sp20", "external": false}, "sub_image": null}], "parent": {"name": "s2istreamingplatformflink", "version": "e7ff259c7ba6843ae339496819df7d443d843872", "sub_image": "sp20", "external": false}}, "cdcspark": {"name": "cdcspark", "description": "F2 CDC Jobs by Spark", "repository": "git@github.com:lyft/cdcspark.git", "slack": "#f2-dev", "team_email": "f2-dev@lyft.com", "pagerduty_escalation_policy": "fusion-dev", "image_type": "flyteworkflow", "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "cdcspark.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "cdcspark.dev", "container": "cdcspark.spin", "command": "make register_for_pr"}], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "version": "10df2a4bd1a09765a748bba4f3850ee1795d5971", "images": [{"parent": {"name": "flytebase", "version": "30a8a14c89838a5212145bc4df6c255ee85a5d47", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "flytebase", "version": "30a8a14c89838a5212145bc4df6c255ee85a5d47", "sub_image": null, "external": false}}, "cdctransformation": {"name": "cdctransformation", "description": "the python service which support cdc event bus data transformation", "repository": "git@github.com:lyft/cdctransformation.git", "slack": "#ds-data-pod", "team_email": "ds-data@lyft.com", "pagerduty_escalation_policy": "DS Data Pipeline", "image_type": "service", "service_tier": 1, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "cdctransformation.legacy"]}, {"name": "service_group", "members": ["cdctransformation.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "cdctransformation.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "cdctransformation.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "cdctransformation.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "cdctransformation"}], "common_settings": {"local_service": {"hosts_url": "http://127.0.0.1:8080"}, "health_check_endpoint": "/healthcheck", "internal_hosts": {"dsfeatures": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "jobschedulerurgentweb": null, "jobschedulermigrationweb": null, "taskqueuebulkweb": null, "taskqueuenormalweb": null, "taskqueueurgentweb": null, "taskqueuemigrationweb": null, "places": null, "ledger": null}, "external_hosts": {"dynamodb_iad": null, "dynamodb_cmh": null, "firehose_iad": null}}}}, "version": "ca1459f1f7b3ed20c3c8a791406fe00afe998b52", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "cdpclusterconfigs": {"name": "cdpclusterconfigs", "description": "Repository of the compute data platform (hive, spark, etc.) cluster configurations and associated tools.", "repository": "git@github.com:lyft/cdpclusterconfigs.git", "slack": "#data-platform-dev", "team_email": "dp-infra-compute@lyft.com", "image_type": "tool", "credentials": true, "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.9486047ea0b6ba93bc464ac5334cab946de5454c"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:1de17b2c133a84a6096806ef9ba985a9ac009b54", "sub_image": "precommit"}}]}}, "facets": [{"name": "fstaging", "member": "cdpclusterconfigs.pushstaging", "type": "job"}, {"name": "fproduction", "member": "cdpclusterconfigs.pushproduction", "type": "job"}, {"name": "fcronexperimentation", "type": "cron", "member": "cdpclusterconfigs.restartexperimentation", "concurrency_policy": "replace", "schedule": "0 16 */10 * *"}, {"name": "fcronhiveflytescheduled", "type": "cron", "member": "cdpclusterconfigs.restarthiveflytescheduled", "concurrency_policy": "replace", "schedule": "0 16 */5 * *"}, {"name": "fcronhiveprodadhoc", "type": "cron", "member": "cdpclusterconfigs.restarthiveprodadhoc", "concurrency_policy": "replace", "schedule": "0 16 */4 * *"}, {"name": "fcronhiveprodscheduled", "type": "cron", "member": "cdpclusterconfigs.restarthiveprodscheduled", "concurrency_policy": "replace", "schedule": "0 16 */4 * *"}, {"name": "fcleanupstaging", "type": "cron", "member": "cdpclusterconfigs.cleanupstaging", "concurrency_policy": "replace", "schedule": "0 * * * *"}, {"name": "fcleanupproduction", "type": "cron", "member": "cdpclusterconfigs.cleanupproduction", "concurrency_policy": "replace", "schedule": "0 * * * *"}, {"name": "fsonatadevelopment", "type": "job", "member": "cdpclusterconfigs.sonatadevelopment"}, {"name": "fsonatastaging", "type": "job", "member": "cdpclusterconfigs.sonatastaging"}, {"name": "fsonataproduction", "type": "job", "member": "cdpclusterconfigs.sonataproduction"}], "containers": [{"name": "run", "command": "sleep 3600"}, {"name": "liststaging", "command": "service_venv python -m tools.list --qubole-config=conf/qubole/staging.ini"}, {"name": "listproduction", "command": "service_venv python -m tools.list --qubole-config=conf/qubole/production.ini"}, {"name": "pullstaging", "command": "service_venv python -m tools.pull --all --qubole-config=conf/qubole/staging.ini"}, {"name": "pullproduction", "command": "service_venv python -m tools.pull --all --qubole-config=conf/qubole/production.ini"}, {"name": "pushstaging", "command": "service_venv python -m tools.push /code/cdpclusterconfigs/output --qubole-config=conf/qubole/staging.ini --ignore-missing-provider", "workdir": "/code/cdpclusterconfigs"}, {"name": "pushproduction", "command": "service_venv python -m tools.push /code/cdpclusterconfigs/output --qubole-config=conf/qubole/production.ini --ignore-missing-provider", "workdir": "/code/cdpclusterconfigs"}, {"name": "restartexperimentation", "command": "service_venv python -m tools.restart --qubole-config=conf/qubole/production.ini experimentation-production-iad", "workdir": "/code/cdpclusterconfigs"}, {"name": "restarthiveflytescheduled", "command": "service_venv python -m tools.restart --qubole-config=conf/qubole/production.ini hiveflyte-scheduled-production-iad", "workdir": "/code/cdpclusterconfigs"}, {"name": "restarthiveprodadhoc", "command": "service_venv python -m tools.restart --qubole-config=conf/qubole/production.ini hive_prod_adhoc", "workdir": "/code/cdpclusterconfigs"}, {"name": "restarthiveprodscheduled", "command": "service_venv python -m tools.restart --qubole-config=conf/qubole/production.ini hive_prod_scheduled", "workdir": "/code/cdpclusterconfigs"}, {"name": "cleanupstaging", "command": "service_venv python -m tools.cleanup --qubole-config=conf/qubole/staging.ini", "workdir": "/code/cdpclusterconfigs"}, {"name": "cleanupproduction", "command": "service_venv python -m tools.cleanup --qubole-config=conf/qubole/production.ini", "workdir": "/code/cdpclusterconfigs"}, {"name": "sonatadevelopment", "command": "service_venv python -m tools.s3_upload /code/cdpclusterconfigs/output/sonata/development --key-prefix=configs/development", "workdir": "/code/cdpclusterconfigs"}, {"name": "sonatastaging", "command": "service_venv python -m tools.s3_upload /code/cdpclusterconfigs/output/sonata/staging --key-prefix=configs/staging", "workdir": "/code/cdpclusterconfigs"}, {"name": "sonataproduction", "command": "service_venv python -m tools.s3_upload /code/cdpclusterconfigs/output/sonata/production --key-prefix=configs/production", "workdir": "/code/cdpclusterconfigs"}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "py.test tests/unit", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml", "pylint": "build/flake8.txt"}}, {"name": "integration", "type": "jailed", "command": "py.test tests/integration", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml", "pylint": "build/flake8.txt"}}], "deploy": [[{"name": "staging-orca", "automatic": true, "legacy": false, "kubernetes": {"enabled": false}, "orca": [{"region": "iad"}]}], [{"name": "staging-development-sonata", "automatic": true, "legacy": false, "targets": [{"facet": "fsonatadevelopment"}], "kubernetes": {"enabled": true}}], [{"name": "staging-cron", "automatic": true, "legacy": false, "targets": [{"facet": "fcleanupstaging"}], "kubernetes": {"enabled": true}}, {"name": "staging-qubole", "automatic": true, "legacy": false, "targets": [{"facet": "fstaging"}], "kubernetes": {"enabled": true}}, {"name": "staging-sonata", "automatic": true, "legacy": false, "targets": [{"facet": "fsonatastaging"}], "kubernetes": {"enabled": true}}], [{"name": "staging", "automatic": true, "legacy": false, "kubernetes": {"enabled": false}}], [{"name": "production-orca", "automatic": true, "legacy": false, "kubernetes": {"enabled": false}, "orca": [{"region": "iad"}]}], [{"name": "production-cron", "automatic": true, "legacy": false, "targets": [{"facet": "fproduction"}, {"facet": "fcronexperimentation"}, {"facet": "fcronhiveflytescheduled"}, {"facet": "fcronhiveprodadhoc"}, {"facet": "fcronhiveprodscheduled"}, {"facet": "fcleanupproduction"}], "kubernetes": {"enabled": true}}, {"name": "production-qubole", "automatic": true, "legacy": false, "targets": [{"facet": "fproduction"}], "kubernetes": {"enabled": true}}, {"name": "production-sonata", "automatic": true, "legacy": false, "targets": [{"facet": "fsonataproduction"}], "kubernetes": {"enabled": true}}], [{"name": "production", "automatic": true, "legacy": false, "kubernetes": {"enabled": false}}]], "version": "8d8c2bdd87b64b1517f30cb648bdec38be286eb8", "images": [{"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "py37", "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "1de17b2c133a84a6096806ef9ba985a9ac009b54", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "py37", "external": false}}, "cdpclusterprovisioning": {"builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.9486047ea0b6ba93bc464ac5334cab946de5454c"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "python"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfiles/hadoop.dockerfile", "sub_image": "hadoop"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfiles/hive.dockerfile", "sub_image": "hive"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfiles/knox.dockerfile", "sub_image": "knox"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfiles/tezui.dockerfile", "sub_image": "tezui"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfiles/jmx_prometheus.dockerfile", "sub_image": "jmx-prometheus"}}]}}, "containers": [{"command": "sleep infinity", "name": "sleep", "sub_image": "hive"}], "credentials": true, "deploy": [[{"automatic": true, "kubernetes": {"enabled": false}, "legacy": false, "name": "staging-orca", "orca": [{"region": "iad"}], "targets": [{"facet": "fsleep"}]}], [{"automatic": false, "kubernetes": {"cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}, "enabled": true, "mode": "direct", "path": "staging/amalakar"}, "legacy": false, "name": "staging-amalakar"}, {"automatic": false, "kubernetes": {"cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}, "enabled": true, "mode": "direct", "path": "staging/astahlman"}, "legacy": false, "name": "staging-astahlman"}, {"automatic": false, "kubernetes": {"cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}, "enabled": true, "mode": "direct", "path": "staging/don"}, "legacy": false, "name": "staging-don"}, {"automatic": false, "kubernetes": {"cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}, "enabled": true, "mode": "direct", "path": "staging/dorian"}, "legacy": false, "name": "staging-dorian"}, {"automatic": false, "kubernetes": {"cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}, "enabled": true, "mode": "direct", "path": "staging/michaela"}, "legacy": false, "name": "staging-michaela"}, {"automatic": false, "kubernetes": {"cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}, "enabled": true, "mode": "direct", "path": "staging/rob"}, "legacy": false, "name": "staging-rob"}, {"automatic": false, "kubernetes": {"cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}, "enabled": true, "mode": "direct", "path": "staging/rohit"}, "legacy": false, "name": "staging-rohit"}, {"automatic": false, "kubernetes": {"cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}, "enabled": true, "mode": "direct", "path": "staging/shashank"}, "legacy": false, "name": "staging-shashank"}], [{"automatic": false, "kubernetes": {"cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}, "enabled": true, "mode": "direct", "path": "staging/staging"}, "legacy": false, "name": "staging"}], [{"automatic": false, "kubernetes": {"cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}, "enabled": true, "mode": "direct", "path": "production/prototype"}, "legacy": false, "name": "production-prototype", "orca": [{"region": "iad"}], "targets": [{"facet": "fsleep"}]}, {"automatic": false, "kubernetes": {"cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}, "enabled": true, "mode": "direct", "path": "production/production"}, "legacy": false, "name": "production-production", "orca": [{"region": "iad"}], "targets": [{"facet": "fsleep"}]}]], "description": "This repo contains all the deployment rules for Sonata (Hive running in Kubernetes)", "envoy": {"profile": "python", "settings": {"common_settings": {}, "services": [{"name": "hiveserver", "traffic_type": "egress_only"}]}}, "facets": [{"member": "cdpclusterprovisioning.sleep", "name": "fsleep", "type": "job"}], "image_type": "tool", "languages": [], "name": "cdpclusterprovisioning", "pagerduty_escalation_policy": "Data Infra Compute", "repository": "git@github.com:lyft/cdpclusterprovisioning.git", "slack": "#data-platform-dev", "team_email": "dp-infra-compute@lyft.com", "tests": [{"command": "pre-commit run --all-files --show-diff-on-failure", "name": "lint", "sub_image": "precommit", "type": "jailed"}], "version": "66eab6cb080732e0e7b04391d2b4045f4d4e19c3", "images": [{"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "py37", "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "py37", "external": false}, "sub_image": "python"}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": "hadoop"}, {"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": "hive"}, {"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": "knox"}, {"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": "tezui"}, {"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": "jmx-prometheus"}], "parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "py37", "external": false}}, "certauditor": {"name": "certauditor", "description": "Audits certs to check for expiry", "repository": "git@github.com:lyft/certauditor.git", "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "credentials": false, "docs": {"section": "Infrastructure"}, "builder": {"name": "s2i", "params": {"builder": "lyft/s2igo:b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6"}}, "tests": [{"name": "unit", "type": "jailed", "command": "make all"}], "deploy": [[{"name": "dev-sla", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "development"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], [{"name": "infra-dev-sla", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "infra-dev"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], [{"name": "staging-sla", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "staging"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "staging-us-east-1", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "staging"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "staging-us-east-1b", "legacy": false, "availability_zone": "us-east-1b", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "staging-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "staging"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "staging-us-east-1e", "legacy": false, "availability_zone": "us-east-1e", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "staging"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "staging-us-east-1f", "legacy": false, "availability_zone": "us-east-1f", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "staging"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], [{"name": "production-sla", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "production"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "production"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1b", "legacy": false, "availability_zone": "us-east-1b", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "production"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "production"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1e", "legacy": false, "availability_zone": "us-east-1e", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "production"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1f", "legacy": false, "availability_zone": "us-east-1f", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "production"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], [{"name": "custom-sla", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "custom"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], [{"name": "production", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}]], "languages": ["go"], "image_type": "service", "service_tier": 3, "version": "f3c49ae4c59cac019fcc9a8b68d717aba33bb628", "images": [{"parent": {"name": "s2igo", "version": "b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igo", "version": "b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6", "sub_image": null, "external": false}}, "cetconcessions": {"name": "cetconcessions", "description": "Service for generating, tracking and reporting on CET Concession Spend", "repository": "git@github.com:lyft/cetconcessions.git", "image_type": "service", "service_tier": 2, "slack": "#support-bots", "team_email": "support-eng-ast@lyft.com", "pagerduty_escalation_policy": "Associate Tools", "languages": ["python"], "credentials": true, "docs": {"autogen_modules": ["cetconcessions"]}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn cetconcessions:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/cetconcessions", "limits": {"cpu": 1, "memory": "256Mi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "facets": [{"name": "main", "member": "cetconcessions.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-cetconcessions-env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 1, "max_size": 10}}}}, {"name": "canary", "member": "cetconcessions.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-cetconcessions-env.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "cetconcessions.legacy", "jobscheduler.dev", "rides.dev"]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "tests": [{"name": "startup", "type": "startup", "group": "cetconcessions.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "deploy_settings": {"window_start": "09:00 US/Central", "window_end": "18:00 US/Central"}, "configsets": ["cetconcessionsdata"], "envoy": {"profile": "python", "settings": {"services": [{"name": "cetconcessions"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "internal_hosts": {"coupons": null, "green": null, "guardian": null, "ledger": null, "supportactions": null, "tcs": null, "payapi": null, "tom": null, "txnhub": null, "users": null, "jobschedulerbulkweb": null, "rides": null, "routes": null}}}}, "logging": {"cetconcessions": {"fields": {"user_id": "keyword", "include_restrictions_enabled": "boolean", "num_rides": "long", "summary": {"total_recent_passenger_concessions": "long", "total_passenger_rides": "long", "previous_concession_for_ride": "boolean", "restrict_passenger": {"restricted": "boolean", "reasons": "keyword"}, "total_driver_rides": "long", "total_recent_driver_concessions": "long"}, "ride_id": "keyword", "currency": "keyword", "is_automated": "boolean", "issued_at": "date", "amount_cents": "long", "agent_email": "keyword", "concession_reason": "keyword", "issuing_service": "keyword", "concession_type": "keyword", "coupon_code": "keyword", "submission_reason": "keyword", "id": "keyword", "zendesk_ticket_id": "long", "restrict": "boolean", "source": "keyword", "charge_adjustment_id": "keyword", "automation_name": "keyword", "coupon_application_id": "keyword", "route_id": "keyword", "comment": "keyword", "role": "keyword", "bonus_type": "keyword", "bonus_autoapproved": "boolean", "bonus_id": "keyword", "charge_id": "keyword", "current_charge_amount": "long", "type": "keyword", "start": "date", "actor": "keyword", "created_at": "date", "amount_currency": "keyword", "reason": "keyword", "amount": "long", "ride_cost": "long", "next_page_start": "keyword", "remaining_refund_amount": "long", "approver_email": "keyword", "concession_data": {"line_item": "keyword", "refund_type": "keyword"}, "code": "long", "value": "keyword", "bonus_reason": "keyword", "lithium_id": "long", "recommendation": {"concession_data": {"description": "keyword", "amount_cents": "long", "refund_type": "keyword"}, "type": "keyword"}, "refundable_amount": "long", "raw_recommendation": {"concession_data": {"refund_type": "keyword"}, "type": "keyword"}, "end": "date", "exception": {"class": "keyword", "message": "keyword"}, "exception_class": "keyword", "counterparty_id": "keyword", "counterparty_type": "keyword", "exception_code": "long", "start_time": "keyword", "end_time": "keyword", "from_amount": "long", "lyft_user_id": "keyword", "refund_details_type": "keyword", "to_amount": "long", "state": "keyword", "granter": "keyword"}}}, "version": "ea048783e045329229c776ac4151b8eb4e3d8526", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "cetconcessionsdata": {"name": "cetconcessionsdata", "description": "Runtime configuration data for cetconcessionsdata", "repository": "git@github.com:lyft/cetconcessionsdata.git", "image_type": "data", "service_tier": 2, "slack": "#support-bots", "team_email": "support-eng-ast@lyft.com", "pagerduty_escalation_policy": "Associate Tools", "languages": ["bash", "python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "credentials": false, "docs": {"disable": true}, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/cetconcessionsdata"]}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "7915dbe8e51a2aa9c59e4bae5799e6882d596154", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "challenges": {"name": "challenges", "description": "The service which provides access and logic for user-facing flows to gather signals on suspected fraudulent activity (i.e. challenges).", "repository": "git@github.com:lyft/challenges.git", "image_type": "service", "service_tier": 1, "slack": "#persisted-challenges", "team_email": "dev-fraud@lyft.com", "pagerduty_escalation_policy": "Fraud Platform", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "minimal", "members": ["control.dev", "challenges.legacy"]}, {"name": "dev", "members": ["dynamodb.dev", "challenges.minimal", "taskqueue.dev", "redis.dev", "supplyrecords.dev"]}, {"name": "integration", "members": ["challenges.dev", "wallet.dev", "walletapi.dev", "account.integration", "routesapi.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "challenges.minimal"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml", "pylint": "build/flake8.txt"}}, {"name": "integration", "type": "execution", "group": "challenges.integration", "container": "challenges.legacy", "command": "make test_integration", "float_dependencies": "*/30 * * * *", "reports": {"junit": "build/int.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "pulldeploy_components": {"data": ["translationdata"]}, "links": [{"text": "runbook", "url": "https://github.com/lyft/challenges/blob/master/docs/runbook.md"}], "envoy": {"profile": "python", "settings": {"services": [{"name": "challenges"}], "common_settings": {"internal_hosts": {"challenges": null, "ratelimit": null, "auth": null, "karma": null, "supplyrecords": {"tls_enabled": true}, "wallet": null, "taskqueuenormalweb": null, "walletapi": null, "account": null, "users": null, "locations": null, "tcs": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "authorization": {"permissions": {"flow": {"paths": ["/v1/persistedchallenges/*", "/v1/persistedchallenges-idl/*"], "methods": ["GET", "POST", "PUT"]}, "create": {"paths": ["/internal/persistedchallenges"], "methods": ["POST"]}, "query": {"paths": ["/internal/persistedchallenges*"], "methods": ["GET"]}, "release": {"paths": ["/internal/persistedchallenges/*"], "methods": ["PUT"]}}, "bindings": {"accountfrontend": ["flow"], "karma": ["create", "query"], "karmaupdate": ["create", "query"], "envoy": ["flow"], "tom": ["query", "release"], "challenges": ["release"]}}, "redis": {"challengesmultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "logging": {"challenges": {"fields": {"user_id": "keyword", "http_id": "keyword", "ip_address": "keyword", "claim": "keyword", "created_at": "date", "flow": "keyword", "challenge_id": "keyword", "challenge_uuid": "keyword", "event_name": "keyword", "auth_session_id": "keyword", "is_new_challenge": "boolean", "nirvana_execution_id": "keyword", "state": "keyword", "reason": "keyword", "uniqueness_value": "keyword", "original_state": "keyword", "decay_at": "date", "claim_proved": "boolean", "attempt_data": "keyword", "client_id": "keyword", "request_user_id": "keyword", "advanced_state": "keyword", "error_class": "keyword", "failure_reason": "keyword", "stat": "keyword", "exception": "keyword", "confidence_level": "float", "force_upgraded_app_version": "keyword", "exception_message": "keyword", "exception_type": "keyword", "release_success": "boolean", "challenge": {"claim_proved": "boolean", "challenge_uuid": "keyword", "claim": "keyword", "state": "keyword", "reason": "keyword", "flow": "keyword", "uniqueness_value": "keyword", "user_id": "keyword", "handler_data_keys": "keyword", "created_at": "date", "updated_at": "date", "decay_at": "date"}, "handler": "keyword"}}}, "version": "05ac5be03461865fa19aa719bcd3ae48d8d0c782", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "changebot": {"name": "changebot", "description": "A Slack bot to retrieve changes to a service and its dependencies.", "repository": "git@github.com:lyft/changebot.git", "slack": "#resilience", "notification_overrides": {"deploy": {"disabled": true}, "pr_merge": {"disabled": true}}, "team_email": "resilience-team@lyft.com", "pagerduty_escalation_policy": "Resilience", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:348e2b17a31a41ab74261d5f93e6e0c90cff2bd2"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d1cb9c056a95d78685702e724b485de3870be5c2", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/changebot", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "spin", "command": "dumb-init -- service_venv python manage.py spin", "workdir": "/code/changebot", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "cron", "command": "dumb-init -- service_venv python manage.py cron", "workdir": "/code/changebot", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["control.dev", "changebot.legacy"]}, {"name": "service_group", "members": ["changebot.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "changebot.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "changebot.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "changebot.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "spin", "member": "changebot.spin", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "cron", "member": "changebot.cron", "type": "cron", "schedule": "0,10,20,30,40,50 * * * 1-5"}], "deploy": [{"name": "staging", "automatic": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "cron"}]}, {"name": "canary", "automatic": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "spin"}], "availability_zone": "us-east-1d"}, {"name": "production", "automatic": true, "bake_time_minutes": 0, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "cron"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "changebot"}]}}, "version": "860cec63a6010910d9ae08aff4cc8d2ce03fb6d8", "images": [{"parent": {"name": "opsbase", "version": "348e2b17a31a41ab74261d5f93e6e0c90cff2bd2", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d1cb9c056a95d78685702e724b485de3870be5c2", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "348e2b17a31a41ab74261d5f93e6e0c90cff2bd2", "sub_image": null, "external": false}}, "chaosdata": {"name": "chaosdata", "description": "Chaos config data.", "repository": "git@github.com:lyft/chaosdata.git", "image_type": "data", "service_tier": 2, "slack": "#resilience", "slack_deploy_notification_environments": ["staging", "canary", "production"], "notification_overrides": {"deploy": {"slack": "#resilience-bots", "environments": ["production", "staging"]}, "pr_merge": {"slack": "#resilience-bots"}}, "team_email": "resilience-team@lyft.com", "pagerduty_escalation_policy": "Resilience", "languages": ["bash"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/chaosdata"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "configset", "type": "tool", "tool": "configsettest.test"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "canary", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "a785b42c98f3264be385adad2626a797f241ed8b", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "chaosmonkey": {"name": "chaosmonkey", "repository": "git@github.com:lyft/chaosmonkey.git", "description": "A service that terminate services in accordance with the Principles of Chaos", "service_tier": 3, "team_email": "resilience-team@lyft.com", "pagerduty_escalation_policy": "Resilience", "slack": "#resilience-bots", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": true, "configsets": ["chaosdata"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- chaosmonkey server", "limits": {"cpu": 4, "memory": "512Mi"}, "sub_image": "k8s", "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}, {"name": "randomprod0", "command": "dumb-init -- chaosmonkey random -c core-prod-0", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "randomprod1", "command": "dumb-init -- chaosmonkey random -c core-prod-1", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "randomprod2", "command": "dumb-init -- chaosmonkey random -c core-prod-2", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "randomprod3", "command": "dumb-init -- chaosmonkey random -c core-prod-3", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "randomprod4", "command": "dumb-init -- chaosmonkey random -c core-prod-4", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "randomstaging0", "command": "dumb-init -- chaosmonkey random -c core-staging-0", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "randomstaging1", "command": "dumb-init -- chaosmonkey random -c core-staging-1", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "randomstaging2", "command": "dumb-init -- chaosmonkey random -c core-staging-2", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "randomstaging3", "command": "dumb-init -- chaosmonkey random -c core-staging-3", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "randomstaging4", "command": "dumb-init -- chaosmonkey random -c core-staging-4", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "reaperprod0", "command": "dumb-init -- chaosmonkey reaper -c core-prod-0", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "reaperprod1", "command": "dumb-init -- chaosmonkey reaper -c core-prod-1", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "reaperprod2", "command": "dumb-init -- chaosmonkey reaper -c core-prod-2", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "reaperprod3", "command": "dumb-init -- chaosmonkey reaper -c core-prod-3", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "reaperprod4", "command": "dumb-init -- chaosmonkey reaper -c core-prod-4", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "reaperstaging0", "command": "dumb-init -- chaosmonkey reaper -c core-staging-0", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "reaperstaging1", "command": "dumb-init -- chaosmonkey reaper -c core-staging-1", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "reaperstaging2", "command": "dumb-init -- chaosmonkey reaper -c core-staging-2", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "reaperstaging3", "command": "dumb-init -- chaosmonkey reaper -c core-staging-3", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "reaperstaging4", "command": "dumb-init -- chaosmonkey reaper -c core-staging-4", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["control.dev", "incidentassistant.dev", "chaosmonkey.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "chaosmonkey.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "chaosmonkey.dev", "container": "chaosmonkey.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "chaosmonkey.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "chaosmonkey.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "randomprod0", "member": "chaosmonkey.randomprod0", "type": "cron", "schedule": "0 16 * * *"}, {"name": "randomprod1", "member": "chaosmonkey.randomprod1", "type": "cron", "schedule": "0 18 * * *"}, {"name": "randomprod2", "member": "chaosmonkey.randomprod2", "type": "cron", "schedule": "0 20 * * *"}, {"name": "randomprod3", "member": "chaosmonkey.randomprod3", "type": "cron", "schedule": "0 22 * * *"}, {"name": "randomprod4", "member": "chaosmonkey.randomprod4", "type": "cron", "schedule": "0 0 * * *"}, {"name": "randomstaging0", "member": "chaosmonkey.randomstaging0", "type": "cron", "schedule": "0 16 * * *"}, {"name": "randomstaging1", "member": "chaosmonkey.randomstaging1", "type": "cron", "schedule": "0 18 * * *"}, {"name": "randomstaging2", "member": "chaosmonkey.randomstaging2", "type": "cron", "schedule": "0 20 * * *"}, {"name": "randomstaging3", "member": "chaosmonkey.randomstaging3", "type": "cron", "schedule": "0 22 * * *"}, {"name": "randomstaging4", "member": "chaosmonkey.randomstaging4", "type": "cron", "schedule": "0 0 * * *"}, {"name": "reaperprod0", "member": "chaosmonkey.reaperprod0", "type": "cron", "schedule": "0 17 * * *"}, {"name": "reaperprod1", "member": "chaosmonkey.reaperprod1", "type": "cron", "schedule": "0 19 * * *"}, {"name": "reaperprod2", "member": "chaosmonkey.reaperprod2", "type": "cron", "schedule": "0 21 * * *"}, {"name": "reaperprod3", "member": "chaosmonkey.reaperprod3", "type": "cron", "schedule": "0 23 * * *"}, {"name": "reaperprod4", "member": "chaosmonkey.reaperprod4", "type": "cron", "schedule": "0 1 * * *"}, {"name": "reaperstaging0", "member": "chaosmonkey.reaperstaging0", "type": "cron", "schedule": "0 17 * * *"}, {"name": "reaperstaging1", "member": "chaosmonkey.reaperstaging1", "type": "cron", "schedule": "0 19 * * *"}, {"name": "reaperstaging2", "member": "chaosmonkey.reaperstaging2", "type": "cron", "schedule": "0 21 * * *"}, {"name": "reaperstaging3", "member": "chaosmonkey.reaperstaging3", "type": "cron", "schedule": "0 23 * * *"}, {"name": "reaperstaging4", "member": "chaosmonkey.reaperstaging4", "type": "cron", "schedule": "0 1 * * *"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}, {"facet": "randomstaging0"}, {"facet": "randomstaging1"}, {"facet": "randomstaging2"}, {"facet": "randomstaging3"}, {"facet": "randomstaging4"}, {"facet": "reaperstaging0"}, {"facet": "reaperstaging1"}, {"facet": "reaperstaging2"}, {"facet": "reaperstaging3"}, {"facet": "reaperstaging4"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "randomprod0"}, {"facet": "randomprod1"}, {"facet": "randomprod2"}, {"facet": "randomprod3"}, {"facet": "randomprod4"}, {"facet": "reaperprod0"}, {"facet": "reaperprod1"}, {"facet": "reaperprod2"}, {"facet": "reaperprod3"}, {"facet": "reaperprod4"}]}]], "logging": {"chaosmonkey": {"fields": {"policy": "keyword", "instance_ids": "text"}}}, "envoy": {"profile": "go", "settings": {"common_settings": {"internal_hosts": {"incidentassistant": null}}, "services": [{"name": "chaosmonkey"}]}}, "version": "392077435379795043fa5b9d20d3193418842f0a", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "chargeback": {"name": "chargeback", "description": "Infrastructure billing and budgets", "repository": "git@github.com:lyft/chargeback.git", "slack": "#capacity", "team_email": "capacity-team@lyft.com", "pagerduty_escalation_policy": "Capacity", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "packages": ["libkrb5-dev"], "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/chargeback", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "spendingreport", "command": "dumb-init -- service_venv python manage.py generate_spending_report --email-owners", "workdir": "/code/chargeback", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "spendingreportcapacity", "command": "dumb-init -- service_venv python manage.py generate_spending_report --email-to capacity-team@lyft.com", "workdir": "/code/chargeback", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "orgteamserviceupload", "command": "dumb-init -- service_venv python manage.py org_team_service_mappings --upload", "workdir": "/code/chargeback", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "ratechangereportcapacity", "command": "dumb-init -- service_venv python manage.py generate_ec2_rate_change_report --email-to capacity-team@lyft.com", "workdir": "/code/chargeback", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}], "groups": [{"name": "dev", "members": ["control.dev", "chargeback.legacy", "jobscheduler.dev", "mailer.dev", "runtime.run", "servicecatalog.dev"]}, {"name": "service_group", "members": ["chargeback.legacy", "runtime.run"]}], "tests": [{"name": "startup", "type": "startup", "group": "chargeback.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "chargeback.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "chargeback.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "spendingreport", "member": "chargeback.spendingreport", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 19 * * 2"}, {"name": "spendingreportcapacity", "member": "chargeback.spendingreportcapacity", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 16 * * 2"}, {"name": "orgteamserviceupload", "member": "chargeback.orgteamserviceupload", "type": "cron", "concurrency_policy": "forbid", "schedule": "@hourly"}, {"name": "ratechangereportcapacity", "member": "chargeback.ratechangereportcapacity", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 16 * * *"}], "deploy": [{"name": "staging", "bake_time_minutes": 0, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "bake_time_minutes": 0, "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "spendingreport"}, {"facet": "spendingreportcapacity"}, {"facet": "orgteamserviceupload"}, {"facet": "ratechangereportcapacity"}], "automatic": true}], "deploy_settings": {"window_start": "06:00 America/Los_Angeles", "window_end": "22:00 America/Los_Angeles"}, "envoy": {"profile": "python", "settings": {"services": [{"name": "chargeback"}], "common_settings": {"internal_hosts": {"team": null, "jobschedulerbulkweb": null, "servicecatalog": null}}}}, "version": "0dedd6c6272fa4cf6af03c9bd59eaeddef529272", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "chat": {"name": "chat", "description": "A unified chat interface for all chat sessions", "repository": "git@github.com:lyft/chat.git", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/chat", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "1Gi"}}], "configsets": ["supportcontactdata"], "groups": [{"name": "dev", "members": ["control.dev", "envoy.server", "redis.dev", "chat.legacy"]}, {"name": "integration", "members": ["chat.dev", "supportcontact.integration"]}], "tests": [{"name": "startup", "type": "startup", "group": "chat.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "chat.integration", "container": "chat.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "upstream_tests": {"on_commit": true, "test_set": {"supportcontact": ["integration"], "supporttext": ["integration"]}}, "slack": "#support-bots", "team_email": "support-tech@lyft.com", "pagerduty_escalation_policy": "Support Platform", "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "chat"}], "common_settings": {"internal_hosts": {"supportcontact": null, "supporttext": null}, "redis": {"chatmultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 8192}}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s", "packages": ["openssl", "libssl-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["openssl", "libssl-dev"]}}]}}, "facets": [{"name": "main", "member": "chat.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 30}}}}, {"name": "canary", "member": "chat.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "logging": {"chat": {"fields": {"chat_session_id": "keyword", "user_id": "keyword", "query_params": {"limit": "long", "after": "keyword", "before": "keyword"}, "message_id": "keyword", "message": {"text": "keyword", "sender": "keyword", "seq": "long", "time_stamp": "keyword", "client_guid": "keyword", "client_timestamp_ms": "keyword", "action": {"cards": "keyword", "type": "keyword"}, "message_id": "keyword"}, "ride_id": "keyword", "message_dict": {"client_guid": "keyword", "text": "keyword", "client_timestamp_ms": "keyword", "message_id": "keyword"}, "user_agent": "keyword", "session_id": "keyword", "messages": "keyword", "response": {"responses": "keyword", "end": "long", "chat_session_id": "keyword", "status": "keyword", "last_active": "long", "start": "keyword", "bot_id": "keyword", "messages": "keyword"}, "context": "keyword", "service": "keyword", "is_first_time_user": "boolean", "error_msg": "keyword"}}}, "version": "39b72cb38631ba77af2bb85eb4347290a8ef9abe", "images": [{"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "chromeheadless": {"name": "chromeheadless", "description": "Headless Google Chromium doing things like rendering PDFs", "repository": "git@github.com:lyft/chromeheadless.git", "image_type": "service", "languages": ["go"], "credentials": false, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh"}, {"name": "srv", "sub_image": "k8s", "command": "chromeheadless", "limits": {"cpu": 1, "memory": "512Mi"}, "workdir": "/code/chromeheadless", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "exports": [{"name": "api", "port": 8080}]}, {"name": "googlechrome", "sub_image": "k8s", "command": "env FONTCONFIG_PATH=/go/src/github.com/lyft/chromeheadless/fonts /usr/bin/google-chrome --headless --remote-debugging-port=9222 --no-first-run --user-data-dir=/dev/null --blink-settings=scriptEnabled=false --block-new-web-contents --proxy-server=localhost:4750 --proxy-bypass-list=\"<-loopback>\"", "limits": {"cpu": 1, "memory": "512Mi"}, "liveness_probe": {"exec_probe": {"command": ["curl", "--silent", "--output", "/dev/null", "http://localhost:9222/"]}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"exec_probe": {"command": ["curl", "--silent", "--output", "/dev/null", "http://localhost:9222/"]}, "initial_delay_seconds": 30, "timeout_seconds": 5}}, {"name": "smokescreen", "sub_image": "k8s", "command": "smokescreen", "limits": {"cpu": 1, "memory": "256Mi"}, "liveness_probe": {"exec_probe": {"command": ["curl", "--proxy", "localhost:4750", "--silent", "--output", "/dev/null", "https://www.example.com/"]}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"exec_probe": {"command": ["curl", "--proxy", "localhost:4750", "--silent", "--output", "/dev/null", "https://www.example.com/"]}, "initial_delay_seconds": 30, "timeout_seconds": 5}}], "pagerduty_escalation_policy": "Enterprise Admin", "service_tier": 1, "team_email": "enterprise-platform-portal-eng@lists.lyft.com", "slack": "#enterprise-dev", "notification_overrides": {"deploy": {"slack": "#enterprise-deploy"}, "deploy_failure": {"slack": "#enterprise-deploy"}, "test_failure": {"slack": "#enterprise-deploy"}, "master_failure": {"slack": "#enterprise-deploy"}, "pr_merge": {"slack": "#enterprise-deploy"}}, "facets": [{"name": "main", "member": "chromeheadless.k8service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 5}, "production": {"min_size": 1, "max_size": 30}}}}, {"name": "canary", "member": "chromeheadless.k8service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "chromeheadless.service"]}, {"name": "k8service", "members": ["chromeheadless.srv", "chromeheadless.googlechrome", "chromeheadless.smokescreen"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.1de17b2c133a84a6096806ef9ba985a9ac009b54", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2igocli:117a4e318a5047db256d090dcfdee8ee6c76189c", "sub_image": "k8s", "packages": ["google-chrome-stable", "poppler-utils"], "sources": [{"name": "chrome", "source": "deb http://dl.google.com/linux/chrome/deb/ stable main", "keyid": "EB4C1BFD4F042F6DDDCCEC917721F63BD38B4796"}]}}]}}, "tests": [{"name": "startup", "type": "startup", "group": "chromeheadless.dev"}, {"name": "lint", "type": "jailed", "command": "pre-commit run --all-files --show-diff-on-failure", "sub_image": "precommit"}, {"name": "integration", "type": "execution", "group": "chromeheadless.dev", "container": "chromeheadless.service", "command": "make integration"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1a", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "chromeheadless"}]}}, "version": "2693f4ccc003aa9f5f2dd8af5e1b0e32223d5f11", "images": [{"parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "1de17b2c133a84a6096806ef9ba985a9ac009b54", "sub_image": "go", "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2igocli", "version": "117a4e318a5047db256d090dcfdee8ee6c76189c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}}, "ciarchive": {"name": "ciarchive", "description": "Archive CI artifacts into S3", "repository": "git@github.com:lyft/ciarchive.git", "report_ci": true, "image_type": "tool", "slack": "#continuousintegration", "team_email": "automation-team@lyft.com", "docs": {"section": "Infrastructure"}, "containers": [{"name": "run", "command": "/code/ciarchive/entrypoint.sh", "mounts": ["/srv/workspace"]}], "groups": [{"name": "dev", "members": ["dnsmasq.server", "metadataproxy.server", "ciarchive.run"]}], "tests": [{"name": "unit", "type": "jailed", "command": "py.test -vvv ."}, {"name": "startup", "type": "startup", "group": "ciarchive.dev"}], "python": {"py3k": {"linters": ["modernize", "pylint"]}}, "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false}], "credentials_legacy": false, "version": "38912c026b4f1563fda7c7adf835fbc4c780c2da", "images": [{"parent": {"name": "python", "version": "9363ba5b1a0a8be2926885672cbda585cc2463e3", "external": false}, "sub_image": null}], "parent": {"name": "python", "version": "9363ba5b1a0a8be2926885672cbda585cc2463e3", "external": false}}, "ciarchiveagent": {"name": "ciarchiveagent", "description": "CI agent for archiving logs and other artifacts to s3", "repository": "git@github.com:lyft/ci-agents.git:archive-agent", "team_email": "automation-team@lyft.com", "slack": "#ci-on-k8s", "pagerduty_escalation_policy": "Continuous Integration", "credentials": false, "credentials_legacy": false, "image_type": "tool", "containers": [{"name": "archiver", "command": "/code/ci-agents/archive-agent/archiver/archive.sh"}], "groups": [{"name": "dev", "members": ["ciarchiveagent.archiver"]}], "tests": [{"name": "unit", "type": "jailed", "command": "pytest -vvv archiver"}], "deploy": [{"name": "production", "legacy": false, "automatic": true}], "languages": ["python"], "version": "61216bf5c20e3d8b9920c441119a165c5d8744e8", "images": [{"parent": {"name": "bionicbase", "version": "c2a5970d2276529c105f9a5a3ba623eb5faecd8c", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "c2a5970d2276529c105f9a5a3ba623eb5faecd8c", "sub_image": null, "external": false}}, "ciartifactproxy": {"name": "ciartifactproxy", "repository": "git@github.com:lyft/ciartifactproxy.git", "description": "Expose CI artifacts to users ", "service_tier": 2, "team_email": "automation-team@lyft.com", "pagerduty_escalation_policy": "Continuous Integration", "slack": "#ci-bots", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- ciartifactproxy", "workdir": "/code/ciartifactproxy", "limits": {"cpu": 4, "memory": "512Mi"}, "sub_image": "k8s", "exports": [{"name": "api", "port": 8080}], "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "ciartifactproxy.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "ciartifactproxy.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "ciartifactproxy.dev", "container": "ciartifactproxy.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "ciartifactproxy.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "ciartifactproxy.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {}, "services": [{"name": "ciartifactproxy"}]}}, "logging": {"ciartifactproxy": {"fields": {"err": "keyword", "error": "keyword", "key": "keyword", "fullKey": "keyword"}}}, "version": "fe225733de3ee462c0f0c36ab48fcd529276c56e", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "cibuildahagent": {"name": "cibuildahagent", "description": "CI agent for building container images", "repository": "git@github.com:lyft/ci-agents.git:buildah-agent", "team_email": "automation-team@lyft.com", "slack": "#ci-on-k8s", "pagerduty_escalation_policy": "Continuous Integration", "credentials": false, "credentials_legacy": false, "image_type": "tool", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "buildah_arm64", "params": {"sub_image": "arm64"}}]}}, "containers": [{"name": "run", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["cibuildahagent.run"]}], "deploy": [{"name": "production", "legacy": false, "automatic": true}], "version": "c7a6122408b6352117ba585161c9e0a2ff1130b0", "images": [{"parent": {"name": "fedora", "version": "31", "sub_image": null, "external": true}, "sub_image": null}], "parent": {"name": "fedora", "version": "31", "sub_image": null, "external": true}}, "cicheckagent": {"name": "cicheckagent", "description": "CI agent for running checks, such as owners checks", "repository": "git@github.com:lyft/ci-agents.git:check-agent", "team_email": "automation-team@lyft.com", "slack": "#ci-on-k8s", "pagerduty_escalation_policy": "Continuous Integration", "credentials": false, "credentials_legacy": false, "image_type": "tool", "containers": [{"name": "owners", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["cicheckagent.owners"]}], "tests": [{"name": "unit", "type": "jailed", "command": "python -m pytest -vvv owners/tests/"}], "deploy": [{"name": "production", "legacy": false, "automatic": true}], "languages": ["python"], "python": {"mypy": {"python_versions": ["3.6"]}}, "version": "03d75b3735aae8c135f97f2fad920072433da854", "images": [{"parent": {"name": "bionicbase", "version": "8c2ee38dd25834443649279762bb5c187682e799", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "8c2ee38dd25834443649279762bb5c187682e799", "sub_image": null, "external": false}}, "cicostagent": {"name": "cicostagent", "description": "CI agent to check cost of the resources such as EC2 or dynamodb", "repository": "git@github.com:lyft/ci-agents.git:cost-agent", "team_email": "citeam@lyft.com", "slack": "#ci-on-k8s", "pagerduty_escalation_policy": "Continuous Integration", "credentials": false, "credentials_legacy": false, "image_type": "tool", "containers": [{"name": "cost", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["cicostagent.cost"]}], "tests": [{"name": "unit", "type": "jailed", "command": "python3 -m pytest /code/ci-agents/cost-agent/tests", "autotrigger": false}], "deploy": [{"name": "production", "legacy": false, "automatic": true}], "languages": ["python"], "version": "51fd49199ab621fbf816ed812ca39dd23ba97e6b", "images": [{"parent": {"name": "bionicbase", "version": "7429ae5b01e2aac2877dae7909e273227cc4b87d", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "7429ae5b01e2aac2877dae7909e273227cc4b87d", "sub_image": null, "external": false}}, "ciexec": {"name": "ciexec", "description": "ciexec", "repository": "git@github.com:lyft/ciexec.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igocli:ec435a099f988d66e59915cfa63b377e20254ef7", "sub_image": "k8s"}}, {"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "workdir": "/go/src/github.com/lyft/ciexec", "exports": [{"name": "http", "port": 8080}, {"name": "debug", "port": 6070}]}, {"name": "service", "command": "dumb-init -- ciexec", "workdir": "/code/ciexec", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "16Gi"}, "readiness_probe": {"http_get": {"path": "/healthcheck", "port": 20049, "scheme": "HTTP"}}, "exports": [{"name": "http", "port": 20049}, {"name": "debug", "port": 6070}]}], "facets": [{"name": "staging", "member": "ciexec.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s-staging.sls", "ops/config/pillar/k8s-execs-config-staging-remote-jenkins-true.yaml"], "autoscaling": {"min_size": 1, "max_size": 1}, "requirements": {"nlbingress": true}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "ciexec.legacy"]}, {"name": "endtoend", "members": ["control.dev", "jenkins.dev", "jnode.images0", "jenkinsjobs.run", "dynamodb.server", "ciexec.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "ciexec.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "ciexec.dev", "container": "ciexec.legacy", "command": "make integration"}, {"name": "jailed_integration", "type": "jailed", "command": "make jailed_integration"}, {"name": "endtoend", "group": "ciexec.endtoend", "container": "ciexec.legacy", "type": "execution", "command": "make test_end_to_end", "autotrigger": false}], "slack": "#ci-bots", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "continuous-integration@lyft.com", "pagerduty_escalation_policy": "Continuous Integration", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "staging"}], "kubernetes": {"enabled": true}}, {"name": "validate_staging", "automatic": true, "legacy": true, "role": "ciexec-staging-iad", "orca": []}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "languages": ["go"], "image_type": "service", "service_tier": 3, "envoy": {"profile": "go", "settings": {"services": [{"name": "ciexec"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}}}}, "logging": {"ciexec": {"fields": {"task_id": "keyword", "url": "keyword", "method": "keyword", "build_id": {"jobName": "keyword", "buildNumber": "long"}, "n": "long", "notification": {"name": "keyword", "build": {"number": "long", "phase": "keyword"}}, "state": "keyword", "status": "keyword", "build_status": "keyword", "target_task_id": "keyword", "desc": "keyword", "shard": "long", "last": "keyword", "iter": "long", "raw": "keyword", "mux": "keyword", "num_retries_attempted": "long", "downstream_task_id": "keyword", "downstream_build_id": {"jobName": "keyword", "buildNumber": "long"}, "has_done": "boolean", "retry": "long", "age": "float", "content_type": "keyword", "default_protocol_type": "keyword", "endpoint": "keyword", "http_status": "keyword", "op": "keyword", "dependency_task_id": "keyword", "ready": "boolean", "fail": "boolean", "target_status": "keyword", "command": "keyword", "options": "keyword", "artifacts": "keyword", "body": "keyword", "phase": "keyword", "resume_of": "keyword", "rebuild_of": "keyword", "upstream_build_id": "keyword", "queue_id": "long", "next": "keyword", "curr": "keyword", "limit": "long", "obj": "keyword", "s3_root_path": "keyword", "s3_bucket": "keyword", "size": "long", "code": "keyword", "is_transient": "boolean", "metadata": "keyword", "error": "keyword", "data": {"error": "keyword", "status": "keyword", "code": "keyword", "message": "keyword", "prevRev": "keyword", "nextRev": "keyword", "id": "keyword", "exec": "keyword"}, "cache_key": "keyword", "exec": "keyword", "user": "keyword", "job_name": "keyword", "reason": "keyword", "args": {"ciexec_data": "keyword", "artifacts_s3_uri": "keyword", "revision": "keyword", "ref": "keyword", "repo": "keyword", "pr": "keyword", "repo_url": "keyword", "image": "keyword", "manifest_dir": "keyword", "github_url": "keyword", "pull_request_number": "keyword", "pr_branch": "keyword", "plus_ones_received_by": "keyword", "pr_author_github_username": "keyword", "github_repository_name": "keyword", "destination_branch": "keyword", "soft": "keyword", "default_service_data": "keyword", "service_data": "keyword", "service_under_test": "keyword", "test_names": "keyword", "delay": "keyword", "always_collect_logs": "keyword", "sha1": "keyword", "build_download_tar": "keyword", "push_ecr": "keyword", "sub_images": "keyword", "skip_tests": "keyword", "provider": "keyword", "provider_build_id": "keyword", "author": "keyword", "is_hammer": "keyword", "pr_revision": "keyword", "buildnotify_metadata": "keyword", "repository": "keyword", "sha": "keyword", "base_tag": "keyword", "hotfix_branch": "keyword", "version": "keyword", "library": "keyword", "services": "keyword", "run_all_tests": "keyword", "channels": "keyword", "hammer_time": "keyword"}, "abort": "boolean", "details": "keyword", "ids": "keyword", "key": "keyword", "desired_state": "keyword", "desired_reason": "keyword", "current_reason": "keyword", "current_state": "keyword", "spec": "keyword", "downstream_stateError": "keyword", "path": "keyword", "original_task_id": "keyword", "ignored": {"URL": "keyword", "Name": "keyword", "DownstreamJobs": "keyword", "UpstreamJobs": "keyword"}, "execs": "keyword", "transient": "boolean", "username": "keyword", "infra_error": {"text_pattern": "keyword", "job_name_pattern": "keyword", "description": "keyword", "tags": {"code": "keyword", "should_retry": "keyword", "explicit": "keyword", "aborted": "keyword", "executor_gone": "keyword", "docker": "keyword", "prov": "keyword"}}, "why": "keyword", "host": "keyword", "t": "float", "resumed_task_id": "keyword", "upstream_build_id_number": "long", "target_state": "keyword", "settings": {"ExecsConfigFile": "keyword", "Reconciler": {"TimerInitialJitter": "keyword", "TimerEnabled": "boolean", "TimerInterval": "keyword", "BatchSize": "long", "StaleTime": "keyword"}, "RuntimeRootDir": "keyword", "AuthDummyEnabled": "boolean", "ACLFile": "keyword", "InstanceID": "keyword", "AuthSecureSessionCookieHashKey": "keyword", "AuthSecureSessionCookieEnabled": "boolean", "WatchdogEnabled": "boolean", "AuthDummyDefaultUsername": "keyword", "AuthOAuth2Enabled": "boolean", "AuthBasicSecretsFile": "keyword", "FakeJenkinsServersConfigFile": "keyword", "FwdHTTPRedir": "boolean", "WatchdogDurationJitter": "keyword", "AuthBasicRealm": "keyword", "ApplicationEnv": "keyword", "ExecsStateS3Path": "keyword", "StaleStateAge": "keyword", "AuthOktaOAuth2ClientID": "keyword", "FrontendURL": "keyword", "BaseURL": "keyword", "AuthSecureSessionCookieBlockKey": "keyword", "AuthBasicEnabled": "boolean", "ExecsStatesRuntimeSubdir": "keyword", "DefaultExecState": "keyword", "RootDir": "keyword", "WatchdogDurationConst": "keyword", "AuthOktaOAuth2ClientSecret": "keyword", "AuthOktaOauth2Endpoint": "keyword", "DevLogger": "boolean"}, "config": {"Type": "keyword", "TasksCacheTableName": "keyword", "TasksActiveTableName": "keyword", "NumArtifactsPerWorkerPut": "long", "TasksRelationsTableName": "keyword", "ES": {"Disabled": "boolean", "ExpiryWindow": "keyword", "Host": "keyword", "MaxRetries": "long", "Sign": "boolean", "Region": "keyword", "RetryTimeout": "long"}, "Host": "keyword", "Disabled": "boolean", "ExpiryWindow": "keyword", "Endpoint": "keyword", "Region": "keyword", "TasksMainArtifactsTableName": "keyword", "RetryTimeout": "long", "TasksTableName": "keyword", "MaxRetries": "long", "Sign": "boolean", "Names": "keyword"}, "service": "keyword", "filename": "keyword", "backoff": "long", "s3_path": "keyword", "subdir": "keyword", "runtime_root": "keyword", "default_state": "keyword", "prev": "keyword", "requestId": "keyword", "req": "keyword", "earliest_time": "float", "description": "keyword", "err": "keyword", "string": "keyword"}}}, "version": "8ca3f5f6430dc129a93c37f1b73a4252afb1455c", "images": [{"parent": {"name": "s2igocli", "version": "ec435a099f988d66e59915cfa63b377e20254ef7", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "ciexecctl": {"name": "ciexecctl", "description": "CLI tool for CIExec", "repository": "git@github.com:lyft/ciexecctl.git", "team_email": "automation-team@lyft.com", "slack": "#ci-bots", "pagerduty_escalation_policy": "CI and Deployments", "credentials": true, "credentials_legacy": false, "builder": {"name": "s2i", "params": {"builder": "lyft/s2igocli:a56c49fa925cf72944ecb39b406777b18a101f35"}}, "containers": [{"name": "cli", "command": "./scripts/setup/entrypoint.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "ciexecctl.cli"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false}], "languages": ["go", "bash"], "image_type": "tool", "version": "3365e3c9bfa6216953d38a41560af4dfdb4efc2e", "images": [{"parent": {"name": "s2igocli", "version": "a56c49fa925cf72944ecb39b406777b18a101f35", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "a56c49fa925cf72944ecb39b406777b18a101f35", "sub_image": null, "external": false}}, "cifleet": {"name": "cifleet", "description": "cifleet", "repository": "git@github.com:lyft/cifleet.git", "image_type": "service", "service_tier": 3, "languages": ["go", "golang"], "credentials": false, "docs": {"section": "Infrastructure"}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "cifleet.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "cifleet.dev"}, {"name": "unit", "type": "execution", "group": "cifleet.dev", "container": "cifleet.legacy", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#ci-bots", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "automation-team@lyft.com", "pagerduty_escalation_policy": "Continuous Integration", "deploy": [{"name": "staging", "legacy": true, "automatic": true}, {"name": "canary", "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "cifleet"}]}}, "version": "3cf875e11e4f59b31798dd5ceb1e8a625fb25052", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "cigitagent": {"name": "cigitagent", "description": "CI agent for running git operations", "repository": "git@github.com:lyft/ci-agents.git:git-agent", "team_email": "automation-team@lyft.com", "slack": "#ci-on-k8s", "pagerduty_escalation_policy": "Continuous Integration", "credentials": false, "credentials_legacy": false, "image_type": "tool", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "buildah_arm64", "params": {"sub_image": "arm64"}}]}}, "containers": [{"name": "run", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["cigitagent.run"]}], "deploy": [{"name": "production", "legacy": false, "automatic": true}], "version": "b224c9e1383d32c9f0a713c81d4bd70cff2cad8f", "images": [{"parent": {"name": "bionicbase", "version": "6042eef4338792ed36b4cdddf11a63776bd2feab", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "6042eef4338792ed36b4cdddf11a63776bd2feab", "sub_image": null, "external": false}}, "ciinfra": {"name": "ciinfra", "description": "CI infrastructure declarations", "repository": "git@github.com:lyft/ci-infra.git", "team_email": "automation-team@lyft.com", "slack": "#ci-bots", "pagerduty_escalation_policy": "Continuous Integration", "credentials": false, "credentials_legacy": false, "image_type": "service", "service_tier": 2, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "run", "command": "/bin/bash"}], "docs": {"section": "Infrastructure"}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "common", "legacy": false, "automatic": true, "kubernetes": {"enabled": true, "disable_interpolation": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterlabels": {"cluster.lyft.net/role": "ciinfra", "cluster.lyft.net/environment": "production"}, "path": "common"}}, [{"name": "config-build0", "legacy": false, "automatic": true, "kubernetes": {"enabled": true, "disable_interpolation": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/name": "build0", "cluster.lyft.net/environment": "production"}, "path": "build0"}}, {"name": "config-build1", "legacy": false, "automatic": true, "kubernetes": {"enabled": true, "disable_interpolation": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/name": "build1", "cluster.lyft.net/environment": "production"}, "path": "build1"}}, {"name": "config-build2", "legacy": false, "automatic": true, "kubernetes": {"enabled": true, "disable_interpolation": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/name": "build2", "cluster.lyft.net/environment": "production"}, "path": "build2"}}, {"name": "config-build3", "legacy": false, "automatic": true, "kubernetes": {"enabled": true, "disable_interpolation": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/name": "build3", "cluster.lyft.net/environment": "production"}, "path": "build3"}}], {"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "disable_interpolation": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterlabels": {"cluster.lyft.net/role": "ciinfra", "cluster.lyft.net/environment": "production"}, "path": "staging"}}, [{"name": "production-build0", "legacy": false, "kubernetes": {"enabled": true, "disable_interpolation": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/name": "build0", "cluster.lyft.net/environment": "production"}, "path": "production"}}, {"name": "production-build1", "legacy": false, "kubernetes": {"enabled": true, "disable_interpolation": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/name": "build1", "cluster.lyft.net/environment": "production"}, "path": "production"}}, {"name": "production-build2", "legacy": false, "kubernetes": {"enabled": true, "disable_interpolation": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/name": "build2", "cluster.lyft.net/environment": "production"}, "path": "production"}}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "disable_interpolation": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/name": "build3", "cluster.lyft.net/environment": "production"}, "path": "production"}}], "languages": ["python"], "version": "e819c54630507e1747185e8fc879a83eddf7c359", "images": [{"parent": {"name": "fedora", "version": "latest", "sub_image": null, "external": true}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "fedora", "version": "latest", "sub_image": null, "external": true}}, "cirsyncagent": {"name": "cirsyncagent", "description": "CI agent for syncing Jenkins jobs from the config map to Jenkins", "repository": "git@github.com:lyft/ci-agents.git:rsync-agent", "team_email": "automation-team@lyft.com", "slack": "#ci-on-k8s", "pagerduty_escalation_policy": "Continuous Integration", "credentials": false, "credentials_legacy": false, "image_type": "tool", "containers": [{"name": "rsync", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["cirsyncagent.rsync"]}], "deploy": [{"name": "production", "legacy": false, "automatic": true}], "version": "9be124c6c38fea0cbabb5fd13b49d37a9abe6eb6", "images": [{"parent": {"name": "bionicbase", "version": "5fe8989bbb7b0c5bf937176f5293c25709d3233f", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "5fe8989bbb7b0c5bf937176f5293c25709d3233f", "sub_image": null, "external": false}}, "ciupdateagent": {"name": "ciupdateagent", "description": "CI agent for updating source code, such as python library versions", "repository": "git@github.com:lyft/ci-agents.git:update-agent", "team_email": "automation-team@lyft.com", "slack": "#ci-on-k8s", "pagerduty_escalation_policy": "Continuous Integration", "credentials": false, "credentials_legacy": false, "image_type": "tool", "containers": [{"name": "run", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["ciupdateagent.run"]}], "tests": [{"name": "unit", "type": "jailed", "command": "python3 -m pytest /code/ci-agents/update-agent/version_updater/tests"}], "deploy": [{"name": "production", "legacy": false, "automatic": true}], "languages": ["python"], "version": "151a1ce47550c6918907237c83769bb3f64314e4", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "claims": {"name": "claims", "description": "A service for handling incoming accident reports and managing claims", "repository": "git@github.com:lyft/claims.git", "slack": "#insurance", "team_email": "insurance-tech@lists.lyft.com", "pagerduty_escalation_policy": "Insurance", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "packages": ["libgeos-dev", "libspatialindex-dev", "libmagic-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev", "libmagic-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/claims", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "claims.legacy", "idl.server"]}, {"name": "integration", "members": ["claims.dev", "elasticsearch6.server"]}, {"name": "partner_integrations", "members": ["claims.dev"]}, {"name": "service_group", "members": ["claims.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "claims.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "claims.integration", "container": "claims.legacy", "command": "make test_integration"}, {"name": "partner_travelers", "type": "execution", "group": "claims.partner_integrations", "container": "claims.legacy", "command": "service_venv pytest tests/partner_integrations --enable-partner Travelers -vv", "autotrigger": false, "float_dependencies": "H 5-17 * * *"}, {"name": "partner_statefarm", "type": "execution", "group": "claims.partner_integrations", "container": "claims.legacy", "command": "service_venv pytest tests/partner_integrations --enable-partner State_farm -vv", "autotrigger": false, "float_dependencies": "H 5-17 * * *"}, {"name": "partner_progressive", "type": "execution", "group": "claims.partner_integrations", "container": "claims.legacy", "command": "service_venv pytest tests/partner_integrations --enable-partner Progressive -vv", "autotrigger": false, "float_dependencies": "H 5-17 * * *"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "claims.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "claims.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "logging": {"claims": {"fields": {"zendesk_id": "keyword", "claim_id": "keyword", "previously_submitted_to_tpa": "boolean"}}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "configsets": ["inspolicydata"], "envoy": {"profile": "python", "settings": {"services": [{"name": "claims"}], "common_settings": {"internal_hosts": {"dispatch": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "locations": null, "mailer": null, "places": null, "rides": null, "routes": null, "users": null}, "external_hosts": {"dynamodb_iad": null}}}}, "version": "7f767ef7e1e0902dd7eddc0115ea1a2827988ba9", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "claimsflyte": {"name": "claimsflyte", "description": "Processes daily loss run updates sent from York", "repository": "git@github.com:lyft/claimsflyte.git", "slack": "#insurance", "team_email": "insurance-science@lyft.com", "pagerduty_escalation_policy": "Insurance Data", "image_type": "flyteworkflow", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "claimsflyte.spin"]}, {"name": "esload", "members": ["control.dev", "elasticsearch6.server", "claimsflyte.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "claimsflyte.dev", "container": "claimsflyte.spin", "command": "make register_for_pr"}], "deploy": [[{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_development"}], [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_staging"}], [{"name": "production", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_production"}]], "credentials": true, "version": "22322954132481d456db86faf79774ba33848daf", "images": [{"parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}}, "claimsint": {"name": "claimsint", "description": "Web frontend for managing claims", "repository": "git@github.com:lyft/claimsint.git", "slack": "#insurance", "team_email": "insurance-tech@lists.lyft.com", "pagerduty_escalation_policy": "Insurance FE", "image_type": "service", "service_tier": 2, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "claimsint.legacy"]}, {"name": "service_group", "members": ["claimsint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "claimsint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "claimsint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null, "claims": null}}}}, "version": "f975d9fc4d7f6e5ce0a9ea23869dfd207d93b6da", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "clientassets": {"name": "clientassets", "description": "client asset store", "repository": "git@github.com:lyft/client-assets.git", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "command": "pre-commit run --all-files --show-diff-on-failure", "sub_image": "precommit"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"pylint": "build/pytest-results.txt"}}], "slack": "#rider-preference", "team_email": "rider-pref-team@lists.lyft.com", "pagerduty_escalation_policy": "Rider Preference Engineering", "deploy": [{"name": "production", "automatic": true, "legacy": true, "orca": [{"region": "iad"}]}], "image_type": "tool", "languages": ["python"], "version": "70b1981f020a2324075ce58f2336c21a56655dd7", "images": [{"parent": {"name": "python", "version": "1af4dede3343b86204a78134646e08798cab04de", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "python", "version": "1af4dede3343b86204a78134646e08798cab04de", "sub_image": null, "external": false}}, "clientbuilds": {"name": "clientbuilds", "description": "clientbuilds", "repository": "git@github.com:lyft/clientbuilds.git", "credentials": true, "docs": {"disable": true}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 80}]}, {"name": "service", "command": "service_venv gunicorn index:app --workers=2 -k gevent --worker-connections=1000 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/clientbuilds", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}], "facets": [{"name": "main", "member": "clientbuilds.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 10}}}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "clientbuilds.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "clientbuilds.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#client-tooling-prs", "team_email": "client-productivity@lyft.com", "pagerduty_escalation_policy": "Mobile CI", "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}], "languages": ["python"], "image_type": "service", "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "clientbuilds"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:1a814f8e5a589baad8b69a9f6489ac85969aff98", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:b8721d85c16c63bb499a13a3586050d42a255d16", "sub_image": "k8s"}}, {"name": "s2iplus", "params": {"builder": "lyft/opsbase:deb42d25da0e6d5fe565c019883e458b4b31b696", "packages": ["libxmlsec1-dev", "pkg-config"]}}]}}, "version": "cc80916005bf40cd5300fda75d9863aa27782ff0", "images": [{"parent": {"name": "precommit", "version": "1a814f8e5a589baad8b69a9f6489ac85969aff98", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "b8721d85c16c63bb499a13a3586050d42a255d16", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "clientlocalizationworkflows": {"name": "clientlocalizationworkflows", "description": "Workflows for client localization", "repository": "git@github.com:lyft/clientlocalizationworkflows.git", "slack": "#mapping-nav-bots", "team_email": "navxp-eng@lyft.com", "pagerduty_escalation_policy": "devnull", "image_type": "flyteworkflow", "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "clientlocalizationworkflows.spin"]}], "tests": [{"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "workflow_registration", "type": "execution", "group": "clientlocalizationworkflows.dev", "container": "clientlocalizationworkflows.spin", "command": "make register_for_pr"}], "deploy": [[{"name": "development", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_development"}], [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_staging"}], [{"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_production"}]], "version": "35c2794c6c250926cd895b8799772ef3823ce177", "images": [{"parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}}, "clientreleasebackend": {"name": "clientreleasebackend", "description": "Backend service that manages the releases of Android and iOS applications", "repository": "git@github.com:lyft/clientreleasebackend.git", "slack": "#client-tooling-prs", "team_email": "client-tooling@lyft.com", "pagerduty_escalation_policy": "Mobile CI", "image_type": "service", "service_tier": 3, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py38.c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "clientreleasebackend.legacy"]}, {"name": "service_group", "members": ["clientreleasebackend.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "clientreleasebackend.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "clientreleasebackend.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "clientreleasebackend.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "clientreleasebackend"}]}}, "docs": {"disable": true}, "version": "792e74989dffa9193bd30091dac5496f2c5f2a17", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "py38", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "clientsignalsingest": {"name": "clientsignalsingest", "description": "Ingests events for keeping user client metadata up-to-date.", "repository": "git@github.com:lyft/clientsignalsingest.git", "image_type": "service", "service_tier": 2, "slack": "#identity-eng", "team_email": "identity-eng@lyft.com", "pagerduty_escalation_policy": "Identity Eng", "notification_overrides": {"pr_open": {"slack": "#identity-prs"}, "deploy": {"slack": "#identity-bots"}, "deploy_failure": {"slack": "#identity-bots"}, "test_failure": {"slack": "#identity-bots"}, "master_failure": {"slack": "#identity-bots"}, "pr_merge": {"slack": "#identity-bots"}, "behind_notifications": {"slack": "#identity-bots"}}, "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "clientsignalsingest.legacy"]}, {"name": "integration", "members": ["account.integration", "idgraph.dev", "clientsignalsingest.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "clientsignalsingest.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml", "pylint": "build/flake8.txt"}}, {"name": "integration", "type": "execution", "group": "clientsignalsingest.integration", "container": "clientsignalsingest.legacy", "command": "make test_integration", "float_dependencies": "*/30 * * * *", "reports": {"junit": "build/int.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], [{"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "clientsignalsingest"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"idgraph": null, "ratelimit": null, "supply": null, "users": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "logging": {"clientsignalsingest": {"fields": {"user_id": "keyword", "apple_advertising_id": "keyword", "vendor_id": "keyword", "android_id": "keyword", "android_advertising_id": "keyword", "service": "keyword", "new_versionArray": "long", "old_versionArray": "long", "old_device": "keyword", "new_device": "keyword", "new_clientId": "keyword", "old_clientId": "keyword", "old_osVersion": "keyword", "new_osVersion": "keyword", "new_carrier": "keyword", "old_carrier": "keyword", "exception_message": "keyword", "exception_type": "keyword", "new_locale": "keyword", "old_locale": "keyword", "old_appName": "keyword", "new_appName": "keyword", "old_os": "keyword", "new_os": "keyword", "stat": "keyword", "handler": "keyword", "event": "keyword", "old_country": "keyword", "old_language": "keyword", "new_language": "keyword", "new_country": "keyword", "new_appType": "keyword", "old_appType": "keyword", "shard_info": "keyword", "reason": "keyword"}}}, "version": "806306232cd3646513234cf2330e4aaccfee156a", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "clienttoolingevents": {"name": "clienttoolingevents", "description": "Mobile tooling analytics endpoint", "repository": "git@github.com:lyft/clienttoolingevents.git", "image_type": "service", "service_tier": 3, "slack": "#client-tooling-prs", "team_email": "client-tooling@lyft.com", "pagerduty_escalation_policy": "Mobile CI", "docs": {"disable": true}, "languages": ["python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "clienttoolingevents.legacy", "lyftidl.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "clienttoolingevents.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "clienttoolingevents"}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}]}}, "logging": {"clienttoolingevents": {"fields": {"exception": {"class": "keyword", "message": "keyword"}}}}, "version": "353d07d20fa3ec942c66edb1bd8f085319793483", "images": [{"parent": {"name": "opsbase", "version": "c17c530bb56bd092a79f652fedb68d1209d98d2c", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "c17c530bb56bd092a79f652fedb68d1209d98d2c", "sub_image": null, "external": false}}, "clustergrafana": {"name": "clustergrafana", "description": "Cluster local grafana instance", "repository": "git@github.com:lyft/k8s-sidecars.git:cluster-grafana", "pagerduty_escalation_policy": "Provisioning", "team_email": "provisioning-team@lyft.com", "slack": "#dev-k8s", "credentials": false, "docs": {"section": "Infrastructure"}, "deploy": [[{"name": "staging", "legacy": false, "kubernetes": {"enabled": true}}, {"name": "staging-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}}}, {"name": "staging-sidecar-test1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sidecar-test1"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sidecar-test1"]}}}], [{"name": "production-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}}}, {"name": "production-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra", "k8sbox"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["k8sbox"]}}}, {"name": "production-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}}}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}}], "languages": ["bash"], "image_type": "service", "service_tier": 3, "version": "2f8c7d07525482195510601aca54808841dd94a4", "images": [{"parent": {"name": "bionicbase", "version": "5f7249d63620e19bf83bffed07176a998047e3e4", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "5f7249d63620e19bf83bffed07176a998047e3e4", "sub_image": null, "external": false}}, "clusterprometheus": {"name": "clusterprometheus", "description": "Prometheus for cluster monitoring", "repository": "git@github.com:lyft/prometheus.git", "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "slack": "#compute-bots", "credentials": false, "docs": {"section": "Infrastructure"}, "deploy": [{"name": "staging-dross", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "development"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infratesting"}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 3, "prometheus_memory_req": "2000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 8, "prometheus_memory_req": "36000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "staging-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 8, "prometheus_memory_req": "36000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "staging-core-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 8, "prometheus_memory_req": "36000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "staging-core-1b", "legacy": false, "availability_zone": "us-east-1b", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 8, "prometheus_memory_req": "36000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "staging-core-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 8, "prometheus_memory_req": "36000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "staging-core-1e", "legacy": false, "availability_zone": "us-east-1e", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 8, "prometheus_memory_req": "36000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "staging-core-1f", "legacy": false, "availability_zone": "us-east-1f", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 8, "prometheus_memory_req": "36000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "staging-infra-dev-sla", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "infra-dev"}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["boba", "boba2", "sidecar-test1", "testing", "obs-dev", "sonata", "allegro"]}, "interpolation_vars": {"prometheus_cpu_limit": 1, "prometheus_memory_limit": "6000Mi", "prometheus_cpu_req": 1, "prometheus_memory_req": "6000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "staging-provtest", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["provtest"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["provtest"]}, "interpolation_vars": {"prometheus_cpu_limit": 1, "prometheus_memory_limit": "6000Mi", "prometheus_cpu_req": 1, "prometheus_memory_req": "6000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "staging-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 3, "prometheus_memory_req": "20000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "staging-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}, "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}, "interpolation_vars": {"kiam_env": "staging", "prometheus_cpu_limit": 8, "prometheus_memory_limit": "60000Mi", "prometheus_cpu_req": 8, "prometheus_memory_req": "60000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "staging-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 8, "prometheus_memory_req": "36000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "staging-stateful", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}, "interpolation_vars": {"prometheus_cpu_limit": 3, "prometheus_memory_limit": "6000Mi", "prometheus_cpu_req": 3, "prometheus_memory_req": "6000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "staging-flink", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flink"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["flink"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 3, "prometheus_memory_req": "2000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "staging-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flyte"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 3, "prometheus_memory_req": "2000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "staging-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 3, "prometheus_memory_req": "2000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "staging-trustnetwork", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["trustnetwork"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["trustnetwork"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 3, "prometheus_memory_req": "2000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}], [{"name": "production-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 8, "prometheus_memory_req": "36000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "production-ciinfra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["ciinfra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 3, "prometheus_memory_req": "2000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "production-trustnetwork", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["trustnetwork"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["trustnetwork"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 3, "prometheus_memory_req": "2000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "production-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "85000Mi", "prometheus_cpu_req": 8, "prometheus_memory_req": "85000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "production-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flyte"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"prometheus_cpu_limit": 32, "prometheus_memory_limit": "200Gi", "prometheus_cpu_req": 32, "prometheus_memory_req": "200Gi", "telegraf_cpu_limit": 4, "telegraf_memory_limit": "8000Mi", "telegraf_cpu_req": 4, "telegraf_memory_req": "8000Mi"}}}, {"name": "production-critical-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flytecritical"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"prometheus_cpu_limit": 16, "prometheus_memory_limit": "250Gi", "prometheus_cpu_req": 16, "prometheus_memory_req": "250Gi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "production-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 3, "prometheus_memory_req": "2000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "production-stateful", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 8, "prometheus_memory_req": "36000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "production-devkube", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "36000Mi", "prometheus_cpu_req": 3, "prometheus_memory_req": "2000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "production-devkubestaging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkubestaging"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}, "interpolation_vars": {"prometheus_cpu_limit": 5, "prometheus_memory_limit": "8000Mi", "prometheus_cpu_req": 3, "prometheus_memory_req": "2000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "production-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}, "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}, "interpolation_vars": {"kiam_env": "production", "prometheus_cpu_limit": 8, "prometheus_memory_limit": "60000Mi", "prometheus_cpu_req": 8, "prometheus_memory_req": "60000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "production-lyftlearn-av", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn-av"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml-av"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "48000Mi", "prometheus_cpu_req": 4, "prometheus_memory_req": "24000Mi", "telegraf_cpu_limit": 4, "telegraf_memory_limit": "8000Mi", "telegraf_cpu_req": 4, "telegraf_memory_req": "8000Mi"}}}, {"name": "production-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "48000Mi", "prometheus_cpu_req": 4, "prometheus_memory_req": "24000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}, {"name": "production-sonata", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "48000Mi", "prometheus_cpu_req": 4, "prometheus_memory_req": "24000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "interpolation_vars": {"prometheus_cpu_limit": 8, "prometheus_memory_limit": "85000Mi", "prometheus_cpu_req": 8, "prometheus_memory_req": "85000Mi", "telegraf_cpu_limit": 1, "telegraf_memory_limit": "1000Mi", "telegraf_cpu_req": 1, "telegraf_memory_req": "1000Mi"}}}], "languages": ["bash"], "image_type": "service", "service_tier": 3, "version": "3a5a50e8f9222add32b45d48d69048b58ad06ea7", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "cniipvlanvpck8s": {"name": "cniipvlanvpck8s", "description": "PaulNet", "repository": "git@github.com:lyft/cni-ipvlan-vpc-k8s-private.git", "image_type": "service", "team_email": "compute-team@lyft.com", "slack": "#compute-bots", "pagerduty_escalation_policy": "Provisioning", "service_tier": 3, "deploy": [{"name": "production", "legacy": true, "automatic": true}], "version": "c4d24658903111b79146f7b4006423f2f969a688", "images": [{"parent": {"name": "fedora", "version": "30", "sub_image": null, "external": true}, "sub_image": null}], "parent": {"name": "fedora", "version": "30", "sub_image": null, "external": true}}, "codecov": {"name": "codecov", "description": "Deployment of codecov.io for collecting code coverage", "repository": "git@github.com:lyft/codecov.git", "credentials": true, "languages": [], "image_type": "service", "slack": "#source-control-bots", "pagerduty_escalation_policy": "devnull", "team_email": "gheel@lyft.com", "service_tier": 3, "builder": {"name": "docker_build", "params": {"dockerfile": "Dockerfile", "sub_image": null}}, "containers": [{"name": "interactive", "command": "/bin/bash"}], "tests": [{"name": "terraform-checkformat", "type": "tool", "tool": "terraform.checkformat"}, {"name": "terraform-validate", "type": "tool", "tool": "terraform.validate"}], "deploy": [{"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "mode": "direct", "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "cluster_labels": {"cluster.lyft.net/role": "infra"}}}], "orchestrate": {"types": [{"name": "terraform"}], "steps": [{"name": "production"}]}, "version": "8c2bd1fd94686322aa8572bdca191260bd91d3bb", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "compi": {"name": "compi", "description": "Gathers competitive intelligence data", "repository": "git@github.com:lyft/compi.git", "credentials": true, "languages": ["python"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=10 -k gevent -c /etc/gunicorn/gunicorn.conf --timeout 300", "workdir": "/code/compi", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "4.00Gi"}}, {"name": "scraperatecards", "command": "dumb-init -- service_venv python manage.py scrape_rate_cards", "workdir": "/code/compi", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "competitiveroutequery", "command": "dumb-init -- service_venv python manage.py route_query", "workdir": "/code/compi", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}], "facets": [{"name": "main", "member": "compi.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 12}}}}, {"name": "canary", "member": "compi.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "scraperatecards", "member": "compi.scraperatecards", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 19 * * *"}, {"name": "competitiveroutequery", "member": "compi.competitiveroutequery", "type": "cron", "concurrency_policy": "forbid", "schedule": "*/30 * * * *"}], "image_type": "service", "service_tier": 2, "pulldeploy_components": {"data": ["regioncfgdata"]}, "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "redis.dev", "ratelimit.dev", "jobscheduler.dev", "places.dev", "compi.legacy"]}, {"name": "integration", "members": ["compi.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "compi.dev"}, {"name": "unit", "type": "execution", "group": "compi.dev", "container": "compi.legacy", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "compi.integration", "container": "compi.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#decision-apps-eng", "pagerduty_escalation_policy": "Command Center Services", "team_email": "decision-apps@lyft.com", "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "main"}, {"facet": "scraperatecards"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}, {"facet": "scraperatecards"}, {"facet": "competitiveroutequery"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "compi"}, {"name": "compibatch"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"jobschedulernormalweb": null, "jobschedulerbulkweb": null, "ratelimit": null, "dispatch": null, "fare": null, "compi": null, "regions": null, "places": null, "venues": null}, "external_hosts": {"dynamodb_iad": null, "google_maps_https": null, "firehose_iad": null}, "redis": {"compimultiredis": {"port": 6380}}, "redis_clusters": {"compiec": {"aws_random_identifier": "vngjnv", "port": 6381, "op_timeout_ms": 400}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s", "packages": ["libsm6", "libxrender1", "libxext6", "libxtst6"]}}, {"name": "s2iplus", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "packages": ["libgeos-dev", "libspatialindex-dev", "libsm6", "libxrender1", "libxext6", "libxtst6", "tesseract-ocr", "tesseract-ocr-eng", "tesseract-ocr-ell"]}}]}}, "logging": {"compi": {"fields": {"chain_id": "keyword", "route_id": "keyword", "name": "keyword", "competitor": "keyword", "event_name": "keyword", "dest_lat": "float", "detected_at": "keyword", "region": "keyword", "origin_address": "keyword", "promo_is_applied": "boolean", "origin_lat": "float", "ride_pass_is_applied": "boolean", "product_name": "keyword", "dest_lng": "float", "company_name": "keyword", "data_source": "keyword", "currency": "keyword", "campaign": "keyword", "check_type": "keyword", "dest_address": "keyword", "origin_lng": "float", "price_lower_bound": "float", "price_upper_bound": "float", "surge_multiplier": "float", "eta_seconds": "long", "is_ocr_generated": "boolean", "accurate_eta_seconds": "long", "original_event_id": "keyword", "base_url": "keyword", "url": "keyword", "venue_name_destination": "keyword", "venue_id_destination": "keyword", "venue_name_pickup": "keyword", "venue_id_pickup": "keyword", "error_msg": "keyword", "field_value": "long", "error_id": "keyword", "field_name": "keyword", "venue_id": "keyword", "sample_rate": "float", "attempt_num": "long", "failed_record_count": "long", "error": "keyword", "event": "keyword", "message": "keyword", "failed_record": "keyword", "nsq_num": "long", "nsq_topic": "keyword"}}}, "version": "cffb19873320cb16d1bba89ecda8c0477fb88a97", "images": [{"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "compilerworks": {"name": "compilerworks", "description": "CompierWorks, an external tool for the data lineage model", "repository": "git@github.com:lyft/compilerworks.git", "image_type": "service", "service_tier": 3, "slack": "#compilerworks", "team_email": "data-eng@lyft.com", "pagerduty_escalation_policy": "CompilerWorks Service", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "compilerworks.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "compilerworks.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "compilerworks"}, {"name": "compilerworksbuilder"}, {"name": "compilerworksgdpr"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8090"}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "version": "c458cc94a671a4f1e0a64928f74c902fcfd63e21", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "compliance": {"name": "compliance", "description": "compliance", "service_tier": 0, "pagerduty_escalation_policy": "Cities", "team_email": "cities@lyft.com", "repository": "git@github.com:lyft/compliance.git", "image_type": "service", "languages": ["go"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "k8sservice", "command": "dumb-init -- compliance", "limits": {"cpu": 4, "memory": "4Gi"}, "sub_image": "k8s"}], "facets": [{"name": "main", "member": "compliance.k8sservice", "type": "service", "autoscaling": {"environment": {"production": {"max_size": 15, "min_size": 5}, "staging": {"max_size": 2, "min_size": 1}}}}, {"name": "canary", "member": "compliance.k8sservice", "type": "service", "canary": true, "autoscaling": {"max_size": 1, "min_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "compliance.service", "redis.dev"]}, {"name": "integration", "members": ["control.dev", "regions.dev", "compliance.service", "redis.dev", "supplyrecords.dev", "supply.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "compliance.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "compliance.integration", "container": "compliance.service", "command": "make integration"}, {"name": "coverage", "type": "jailed", "command": "make -f Makefile-k8s coverage", "reports": {"cobertura": "build/coverage.xml"}, "sub_image": "k8s"}, {"name": "precommit", "type": "jailed", "command": "pre-commit run --all-files --show-diff-on-failure", "sub_image": "precommit"}], "slack": "#do-cities-eng", "slack_deploy_notification_environments": ["canary", "production"], "deploy": [{"name": "staging", "legacy": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true, "links": [{"text": "Runbook", "url": "https://github.com/lyft/compliance/blob/master/docs/runbook.md"}], "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true, "links": [{"text": "Runbook", "url": "https://github.com/lyft/compliance/blob/master/docs/runbook.md"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "compliance"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 900}}}, "internal_hosts": {"usergroups": {"tls_enabled": true}, "regions": {"tls_enabled": true}, "supply": {"tls_enabled": true}, "supplyrecords": {"tls_enabled": true}}, "external_hosts": {"firehose_iad": null}, "redis": {"compliancemultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}, "authorization": {"permissions": {"dobi": {"paths": ["/pb.lyft.compliance.v2.Compliance/GetRequirementsJSON"]}, "is_compliant": {"paths": ["/pb.lyft.compliance.v2.Compliance/IsCompliant", "/pb.lyft.compliance.Compliance/IsCompliant", "/pb.lyft.compliance.Compliance/IsCompliantBatch"], "methods": ["POST"]}, "get_missing": {"paths": ["/pb.lyft.compliance.v2.Compliance/GetMissingRequirements", "/pb.lyft.compliance.Compliance/GetMissingRequirements", "/pb.lyft.compliance.Compliance/GetMissingVehicleRequirements", "/pb.lyft.compliance.Compliance/GetMissingDriverRequirements"], "methods": ["POST"]}, "get_applicable": {"paths": ["/pb.lyft.compliance.v2.Compliance/GetApplicableRequirements", "/pb.lyft.compliance.Compliance/GetApplicableRequirements"], "methods": ["POST"]}, "validate_configs": {"paths": ["/pb.lyft.compliance.v2.Compliance/ValidateRegionsConfigs", "/pb.lyft.compliance.Compliance/ValidateRegionsConfigs"], "methods": ["POST"]}}, "bindings": {"ats": ["is_compliant", "get_missing", "get_applicable"], "atsbatch": ["is_compliant", "get_missing", "get_applicable"], "atssearchworkers": ["is_compliant", "get_missing", "get_applicable"], "atsworkers": ["is_compliant", "get_missing", "get_applicable"], "driveronboardingint": ["is_compliant", "get_missing", "get_applicable", "dobi"], "drivermode": ["is_compliant"], "ghostmatching": ["is_compliant"], "matching": ["is_compliant"], "matchingsmall": ["is_compliant"], "matchingsimulated": ["is_compliant"], "matchingplayback": ["is_compliant"], "onboardingflow": ["get_missing", "get_applicable"], "regions": ["validate_configs"], "regionsworkers": ["validate_configs"], "regulatoryintegrations": ["is_compliant", "get_missing", "get_applicable"], "regulatoryintegrationsairflow": ["is_compliant", "get_missing", "get_applicable"], "regulatoryintegrationsworkers": ["is_compliant", "get_missing", "get_applicable"], "rentals": ["is_compliant", "get_missing"], "rentalsbatch": ["is_compliant", "get_missing"], "ridescheduler": ["is_compliant"], "supplypartners": ["is_compliant"]}}}}}, "logging": {"compliance": {"fields": {"host": "keyword", "request_id": "keyword", "caller": "keyword", "region": "keyword", "method": "keyword", "requestId": "keyword", "count": "long", "action": "keyword", "lyft_user_id": "keyword", "service": "keyword", "code": "keyword", "endpoint": "keyword", "error": "keyword", "downstream_cluster": "keyword", "path": "keyword", "signal": "keyword", "mapId": "long", "missing_requirements_count": "long", "vehicleId": "keyword", "driverId": "keyword", "request": "keyword", "longitude": "float", "latitude": "float", "pickupLongitude": "float", "pickupLatitude": "float", "dropoffLongitude": "float", "dropoffLatitude": "float", "requirement": "keyword", "satisfied": "boolean", "driverComplianceGroupId": "long", "vehicleComplianceGroupId": "long", "type": "keyword", "satisfaction": "keyword", "shadowed": "boolean", "pickupRegion": "keyword", "dropoffRegion": "keyword"}}}, "version": "af1edb106294de6dd0de972f5486df9cfe652a5b", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "conciergefe": {"name": "conciergefe", "description": "Web Frontend for Lyft Enterprise's Concierge service", "repository": "git@github.com:lyft/conciergefe.git", "image_type": "service", "service_tier": 1, "pagerduty_escalation_policy": "Enterprise Concierge", "team_email": "enterprise-concierge-eng@lists.lyft.com", "slack": "#enterprise-deploy", "languages": ["javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "workdir": "/code/conciergefe", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "256Mi"}}, {"name": "cdnupload", "command": "/code/conciergefe/cdn-upload", "workdir": "/code/conciergefe", "sub_image": "k8s"}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "conciergefe.legacy"]}, {"name": "integration", "members": ["conciergefe.dev", "accountfrontend.dev", "ats.qa_approve", "autonomous.dev", "brandfe.dev", "custodian.dev", "dispatch.integration", "enterprisedispatch.integration", "enterprisepayapi.dev", "messaging.dev", "www2.dev", "wwwbrochurefe.dev"]}, {"name": "onebox", "members": ["conciergefe.integration", "developerportal.dev", "enterprisecustomfields.dev", "enterprisefrontend.dev", "offerings.integration", "tom.dev", "wwwenterprisefe.dev"]}, {"name": "e2e", "members": ["e2etest.server", "places.dev", "conciergefe.integration"]}], "tests": [{"name": "startup", "type": "startup", "group": "conciergefe.dev"}, {"name": "unit", "type": "execution", "group": "conciergefe.dev", "container": "conciergefe.legacy", "command": "make test_coverage"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}, {"name": "e2e_chrome_concierge", "type": "execution", "group": "conciergefe.e2e", "container": "conciergefe.legacy", "command": "make test_e2e browser=chrome suite=concierge", "reports": {"junit": "test/results/protractor-results-chrome.xml"}, "skip_threshold": 5}, {"name": "e2e_chrome_concierge_extended", "type": "execution", "group": "conciergefe.e2e", "container": "conciergefe.legacy", "command": "make test_e2e browser=chrome suite=conciergeExtended", "reports": {"junit": "test/results/protractor-results-chrome.xml"}, "skip_threshold": 5, "autotrigger": false}, {"name": "e2e_chrome_concierge_golden_path", "type": "execution", "group": "conciergefe.e2e", "container": "conciergefe.legacy", "command": "make test_e2e browser=chrome suite=conciergeGoldenPath", "reports": {"junit": "test/results/protractor-results-chrome.xml"}, "float_dependencies": "H 5-22 * * *", "autotrigger": false}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "conciergefe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"wwwbrochurefe": null}}}}, "links": [{"text": "Runbook"}, {"url": "https://github.com/lyft/conciergefe/blob/master/docs/runbook.md"}], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2inode:service.c613d468388654eeca11d9a11603d9872a559e38", "sub_image": "k8s"}}, {"name": "docker_build"}]}}, "facets": [{"name": "main", "member": "conciergefe.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "conciergefe.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "assets", "member": "conciergefe.cdnupload", "type": "job"}], "version": "dc5d056428513c618e13e55b814f5270c70a2157", "images": [{"parent": {"name": "s2inode", "version": "c613d468388654eeca11d9a11603d9872a559e38", "sub_image": "service", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "confidant": {"name": "confidant", "description": "confidant", "repository": "git@github.com:lyft/confidant-private.git", "restricted_ssh": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 30, "exports": [{"name": "api", "port": 80}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "confidant.legacy"]}, {"name": "jailed", "members": ["confidant.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "confidant.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"cobertura": "upstream/build/coverage.xml", "junit": "upstream/build/nosetests.xml", "pylint": "upstream/build/flake8.txt"}}, {"name": "integration", "type": "execution", "group": "confidant.dev", "container": "confidant.legacy", "command": "make test_integration", "reports": {"junit": "upstream/build/nosetests.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "slack": "#security", "team_email": "security-engineering@lyft.com", "pagerduty_escalation_policy": "Security", "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "orca": [{"region": "iad"}, {"region": "sfo"}]}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d", "orca": [{"region": "iad"}, {"region": "sfo"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}, {"region": "sfo"}]}]], "languages": ["javascript", "python"], "image_type": "service", "service_tier": 1, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "version": "802f659a516eea7d342c8ca2b1640780dc742b73", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "configsetexample": {"name": "configsetexample", "description": "An example of a configset", "repository": "git@github.com:lyft/configsetexample.git", "image_type": "data", "service_tier": 2, "slack": "#deploys-bots", "team_email": "deploys-team@lyft.com", "pagerduty_escalation_policy": "Deploys", "languages": ["bash"], "docs": {"disable": true}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "configset", "params": {"embedded": false}}]}}, "credentials": false, "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "734db78e7eb58ec60fc57f78c2a2a164dd948d9f", "images": [{"parent": {"name": "scratch", "version": "", "sub_image": null, "external": true}, "sub_image": null}, {"parent": {"name": "scratch", "version": "", "sub_image": "", "external": true}, "sub_image": "data"}], "parent": {"name": "scratch", "version": "", "sub_image": null, "external": true}}, "consumerrentals": {"name": "consumerrentals", "description": "Service to power Lyft Rentals", "repository": "git@github.com:lyft/consumerrentals.git", "slack": "#lr-eng-bots", "team_email": "lr-eng@lyft.com", "pagerduty_escalation_policy": "rentals-eng", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/consumerrentals", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "consumerrentals.legacy", "idl.server"]}, {"name": "service_group", "members": ["consumerrentals.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "consumerrentals.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "consumerrentals.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "consumerrentals.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "consumerrentals"}], "common_settings": {"internal_hosts": {"coupons": null, "hqproxy": null, "push": null, "regions": null, "tcs": null, "usergroups": null, "users": null, "venues": null}, "external_hosts": {"firehose_iad": null, "dynamodb_iad": null, "kinesis_iad": null}}}}, "logging": {"consumerrentals": {"fields": {"user_id": "keyword"}}}, "version": "f14f075ebe64bc202d30d6b726d1ba5a6aa88722", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "consumerrentalsint": {"name": "consumerrentalsint", "description": "frontend service for Lyft Rentals", "repository": "git@github.com:lyft/consumerrentalsint.git", "slack": "#lr-eng-bots", "team_email": "lr-eng@lyft.com", "pagerduty_escalation_policy": "rentals-eng", "image_type": "service", "service_tier": 2, "languages": ["javascript"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093"}}, {"name": "s2i", "params": {"builder": "lyft/s2inode:service.71bdbf2950fdbe4a4a16ea47d04d15214967ff56", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "cdnupload", "command": "/code/consumerrentalsint/cdn-upload", "sub_image": "k8s"}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "consumerrentalsint.legacy"]}, {"name": "service_group", "members": ["consumerrentalsint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "consumerrentalsint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "facets": [{"name": "assets", "member": "feexample.cdnupload", "type": "job"}, {"name": "main", "member": "consumerrentalsint.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "consumerrentalsint.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "consumerrentalsint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null}}}}, "version": "58805e23e9c265e5924087a2f332c909a504c4f5", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2inode", "version": "71bdbf2950fdbe4a4a16ea47d04d15214967ff56", "sub_image": "service", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "consumerrentalspay": {"name": "consumerrentalspay", "description": "Service for handling consumer rentals payments", "repository": "git@github.com:lyft/consumerrentalspay.git", "slack": "#lr-eng-bots", "team_email": "lr-eng@lyft.com", "pagerduty_escalation_policy": "rentals-eng", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/consumerrentalspay", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "consumerrentalspay.legacy", "idl.server"]}, {"name": "service_group", "members": ["consumerrentalspay.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "consumerrentalspay.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "consumerrentalspay.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "consumerrentalspay.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "consumerrentalspay"}], "common_settings": {"internal_hosts": {"fleetlocations": null, "green": null, "hqproxy": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "ledger": null, "mailer": null, "txnhub": null, "users": null, "wallet": null}, "external_hosts": {"firehose_iad": null, "dynamodb_iad": null, "kinesis_iad": null}}}}, "version": "4c0a7e0b6ee65e970cd9d88296321b4e1f1660f1", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "containercp": {"name": "containercp", "description": "Copy container images between registries", "repository": "git@github.com:lyft/containers.git:containercp", "slack": "#ci-bots", "team_email": "automation-team@lyft.com", "service_tier": 3, "image_type": "tool", "languages": ["python"], "containers": [{"name": "run", "command": "/code/containers/containercp/ccp"}], "groups": [{"name": "dev", "members": ["containercp.run"]}], "deploy": [{"name": "production", "legacy": false, "automatic": true}], "version": "04a082910c62220e003904d164117fdbbf141c1e", "images": [{"parent": {"name": "fedora", "version": "31", "sub_image": null, "external": true}, "sub_image": null}], "parent": {"name": "fedora", "version": "31", "sub_image": null, "external": true}}, "control": {"name": "control", "description": "control toolkit for interacting with images", "repository": "git@github.com:lyft/control.git", "slack": "#devx-bots", "team_email": "devx-team@lyft.com", "pagerduty_escalation_policy": "DevX", "image_type": "tool", "service_tier": 2, "languages": ["bash", "python"], "docs": {"section": "Infrastructure"}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:1de17b2c133a84a6096806ef9ba985a9ac009b54", "sub_image": "precommit"}}]}}, "containers": [{"name": "run", "start_phase": "parallel_init"}, {"name": "commands", "command": "/code/control/commands"}, {"name": "publish", "command": "python -m control.cli publish-manifest", "once": true, "mounts": ["/root/.aws"]}, {"name": "clean", "command": "/srv/control/current/control clean", "mounts": ["/srv/control", "/var/run/docker_sockets"]}], "groups": [{"name": "dev", "members": ["dnsmasq.server", "metadataproxy.server", "envoy.dev", "runtime.run"]}, {"name": "minimal", "members": ["dnsmasq.server", "metadataproxy.server"]}], "tests": [{"name": "unit", "type": "jailed", "command": "pytest tests"}, {"name": "startup", "type": "startup", "group": "control.dev"}, {"name": "simrides", "type": "startup", "group": "simulatedrides.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "v3verify", "type": "tool", "tool": "v3verify.run"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": true, "links": [{"text": "Control runbook", "url": "https://docs.lyft.net/eng/control/runbook.html#deploying-through-jenkins"}]}, {"name": "canary", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false}], "version": "993a387cee1c48babc5c883e0df44664a97b026d", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "1de17b2c133a84a6096806ef9ba985a9ac009b54", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "coreinfratoolsint": {"name": "coreinfratoolsint", "description": "UI to manage migrations and taskqueue jobs", "repository": "git@github.com:lyft/coreinfratoolsint.git", "slack": "#async-tasks-platform", "notification_overrides": {"deploy": {"slack": "#async-tasks-deploy"}, "pr_merge": {"slack": "#async-tasks-deploy"}, "test_failure": {"slack": "#async-tasks-deploy", "environments": ["production"]}}, "team_email": "async-tasks-platform@lyft.com", "pagerduty_escalation_policy": "Async Tasks Platform", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:bd8615cdc0a53fe60b894b4b0cc3447deeb0e366", "packages": ["libxmlsec1-dev", "pkg-config"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "frontend", "port": 9211}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/coreinfratoolsint", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "topicscanjob", "command": "dumb-init -- service_venv python manage.py taskqueue_topic_scan --sendalert >> /var/log/lyft/cron-taskqueue_topic_scan.log 2>&1", "workdir": "/code/coreinfratoolsint", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "256Mi"}}], "groups": [{"name": "dev", "members": ["control.dev", "coreinfratoolsint.legacy", "migrations.dev", "minio.server"]}, {"name": "service_group", "members": ["coreinfratoolsint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "coreinfratoolsint.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "coreinfratoolsint.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "coreinfratoolsint.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "taskqueuetopicscancron", "member": "coreinfratoolsint.topicscanjob", "type": "cron", "schedule": "0 21 * * 1"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "taskqueuetopicscancron"}], "bake_time_minutes": 1}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "bake_time_minutes": 1, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "taskqueuetopicscancron"}, {"facet": "main"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "coreinfratoolsint"}], "common_settings": {"internal_hosts": {"migrations": null, "taskqueuebulkweb": null, "taskqueuemigrationweb": null, "taskqueuenormalweb": null, "taskqueueurgentweb": null, "jobschedulerbulkweb": null, "jobschedulermigrationweb": null, "jobschedulernormalweb": null, "jobschedulerurgentweb": null}}}}, "version": "5e14f64486dbced3881dbfbed23d8d42c419039b", "images": [{"parent": {"name": "opsbase", "version": "bd8615cdc0a53fe60b894b4b0cc3447deeb0e366", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "bd8615cdc0a53fe60b894b4b0cc3447deeb0e366", "sub_image": null, "external": false}}, "coreui": {"name": "coreui", "description": "Core LPL Web style and component library", "repository": "git@github.com:lyft/coreui.git", "slack": "#frontend-bots", "team_email": "webux-team@lists.lyft.com", "pagerduty_escalation_policy": "Design Systems Web", "image_type": "service", "service_tier": 3, "languages": ["bash", "javascript"], "credentials": false, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "coreui.legacy"]}, {"name": "service_group", "members": ["coreui.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "coreui.dev"}, {"name": "lint", "type": "jailed", "command": "npm run lint"}, {"name": "unit", "type": "jailed", "command": "npm run test"}], "deploy": [{"name": "staging", "orca": [{"region": "iad"}], "legacy": true, "automatic": true}, {"name": "production", "orca": [{"region": "iad"}], "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "coreui"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}}}}, "version": "dc4a756f4789032790327330818a8bba41f8b644", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "corpdataetl": {"name": "corpdataetl", "description": "Corporate Data Warehouse - centralized secure data warehouse environment for data flowing from various corporate systems (Coupa, Netsuite, etc.)", "repository": "git@github.com:lyft/corpdataetl.git", "image_type": "data", "service_tier": 2, "slack": "#fin-data-eng", "team_email": "fin-data-eng@lyft.com", "pagerduty_escalation_policy": "Data Engineering On-call", "languages": ["bash", "python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/configsetbase:576154b0c88e062c351a03f0c25a814d0536f4c7", "packages": ["libmysqlclient-dev", "libsasl2-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "credentials": false, "groups": [{"name": "dev", "members": ["airflowinfra.dev"]}], "containers": [{"name": "run", "command": "/bin/bash -c '[[ \"$IS_JENKINS_JOB\" == 1 ]] && /code/configset/base/entrypoint.sh || :'", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/corpdataetl"]}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "unit", "command": "make test_unit", "type": "jailed"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "/bin/bash -c 'PYTHONPATH=data/ pre-commit run --all-files --show-diff-on-failure'"}, {"name": "dag_bag", "command": "service_venv python3 -m pytest /code/airflowinfra/tests/dag_bag/", "type": "execution", "group": "corpdataetl.dev", "container": "airflowinfra.legacy"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": false, "orca": []}], "version": "dc1273433717b1e985e937ef76f9052590d9df7d", "images": [{"parent": {"name": "configsetbase", "version": "576154b0c88e062c351a03f0c25a814d0536f4c7", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "configsetbase", "version": "576154b0c88e062c351a03f0c25a814d0536f4c7", "sub_image": null, "external": false}}, "coupons": {"name": "coupons", "description": "coupons", "repository": "git@github.com:lyft/coupons.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 50, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "limits": {"environment": {"development": {"cpu": 0.8, "memory": "0.8Gi"}}}, "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --reuse-port --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/coupons", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "5Gi"}}, {"name": "elasticsearchsync", "command": "dumb-init -- service_venv python manage.py elasticsearch_sync", "workdir": "/code/coupons", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "elasticsearchmonitor", "command": "dumb-init -- service_venv python manage.py elasticsearch_monitor", "workdir": "/code/coupons", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}], "facets": [{"name": "main", "member": "coupons.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 4}, "production": {"min_size": 1, "max_size": 200}}}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-coupons-env.sls"]}, {"name": "canary", "member": "coupons.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "elasticsearchsyncworker", "member": "coupons.elasticsearchsync", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 8}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-coupons-env.sls"]}, {"name": "elasticsearchmonitorworker", "member": "coupons.elasticsearchmonitor", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 8}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-coupons-env.sls"]}], "groups": [{"name": "minimal", "members": ["control.dev", "dynamodb.dev", "elasticsearch.dev", "taskqueue.dev", "coupons.legacy"]}, {"name": "dev", "members": ["account.dev", "auth.dev", "redis.dev", "ridepasses.legacy", "sqs.server", "usereligibilities.legacy", "coupons.minimal", "idl.server"]}, {"name": "integration", "members": ["lyfttestlib.ride", "adtechworkflows.legacy", "coupons.dev"]}, {"name": "ridepasstesting", "members": ["accountfrontend.dev", "couponsfrontend.dev", "coupons.dev", "paxgrowthinternal.dev", "www2.dev", "usereligibilities.dev"]}, {"name": "badgingtesting", "members": ["messaging.dev", "coupons.dev", "nexus.dev", "push.dev"]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "coupons"}, {"name": "couponsbatch"}, {"name": "couponsworker"}, {"name": "couponssearchworkers"}], "common_settings": {"local_service": {"enable_gzip": true}, "internal_hosts": {"acquisitionguarantees": null, "adtechworkflows": null, "ats": null, "coupons": null, "driverridesinfo": null, "enterprise": null, "fare": null, "firstdata": null, "godfather": null, "green": null, "grow": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "ledger": null, "locations": null, "ratelimit": null, "regions": null, "rentals": null, "ridelocations": null, "ridepasses": null, "rides": null, "routes": null, "supply": null, "switchboard": null, "taskqueuebulkweb": null, "taskqueuenormalweb": null, "tcs": null, "team": null, "tripsapi": null, "usergroups": null, "users": null, "karma": null, "usereligibilities": null, "wallet": null, "www2": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null, "firehose_iad": null, "mailgun": null}, "redis": {"couponsmultiredis": {"port": 6380}}}}}, "upstream_tests": {"on_commit": true, "test_set": {"growthe2etests": ["integration"]}}, "tests": [{"name": "startup", "type": "startup", "group": "coupons.minimal"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml"}}, {"name": "integration", "type": "execution", "group": "coupons.dev", "container": "coupons.legacy", "command": "make test_integration", "reports": {"junit": "build/local_integration.xml"}}, {"name": "coupons_e2e_set_1", "type": "sharded", "group": "coupons.minimal", "container": "coupons.legacy", "target": "tests/e2e/bulk_coupon_creation tests/e2e/coupon_spend", "virtualenv": "integration_venv", "float_dependencies": "H 5-22 * * *", "skip_threshold": 15, "reports": {"junit": "build/integration.xml"}}, {"name": "coupons_e2e_set_2", "type": "sharded", "group": "coupons.minimal", "container": "coupons.legacy", "target": "tests/e2e/coupon_claim tests/e2e/coupon_creation tests/e2e/map_banner tests/e2e/test_actor_relations.py", "virtualenv": "integration_venv", "float_dependencies": "H 5-22 * * *", "skip_threshold": 15, "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "notification_overrides": {"test_failure": {"disabled": true}}, "slack": "#rider-incentives-dev", "team_email": "rider-incentives-eng@lyft.com", "pagerduty_escalation_policy": "Rider Incentives", "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "elasticsearchsyncworker"}, {"facet": "elasticsearchmonitorworker"}], "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "elasticsearchsyncworker"}, {"facet": "elasticsearchmonitorworker"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "elasticsearchsyncworker"}, {"facet": "elasticsearchmonitorworker"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "elasticsearchsyncworker"}, {"facet": "elasticsearchmonitorworker"}, {"facet": "canary"}]}], "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "languages": ["python"], "image_type": "service", "service_tier": 1, "logging": {"coupons": {"fields": {"text": "keyword", "referred_user_id": "keyword", "ride_id": "keyword", "coupon_code": "keyword", "error": "keyword", "user_id": "keyword", "referred_user_phone_number": "keyword", "code": "keyword", "is_reward_and_complete": "boolean", "referring_user_id": "keyword", "region_used_for_referral": "keyword", "referred_user_region": "keyword", "referring_user_region": "keyword", "error_description": "keyword", "referral_id": "keyword", "time_interval_seconds": "long", "claim_count": "long", "coupons_claimed_in_past_day": "long", "non_claimable_coupons_claimed_in_past_hour": "long", "len_ccas": "long", "phone_number": "keyword", "id": "keyword", "cca_id": "keyword", "num_usable_redeemed_coupons": "long", "has_available_for_new_users": "boolean", "pay_period_start": "keyword", "pay_period_count": "long", "pay_period_amount": "long", "pay_period_end": "keyword", "amount": "long", "granter": "keyword", "currency": "keyword", "error_detail": "keyword", "order_id": "keyword", "user": "keyword", "tcs_response_code": "long", "department": "keyword", "user_email": "keyword", "external_code": "keyword", "internal_code": "keyword", "status_code": "keyword", "redemption_pin": "keyword", "exception_class": "keyword", "exception_code": "long", "alert_threshold": "long", "attempt_num": "long", "organization_id": "keyword", "failed_record_count": "long", "creator": "keyword", "stackable_len_reaches_max": "boolean", "is_drop_off": "boolean", "stacking_details": "keyword", "amount_with_stacking": "long", "coupon_order_type": "keyword", "app_coupon_id": "keyword", "ride_currency": "keyword", "p_invoice": "keyword", "endpoint": "keyword", "method": "keyword", "request_args": "keyword", "response_code": "long", "calling_service": "keyword"}}}, "version": "7a3f680e5f0da307112c53859119bbe866248ca5", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "couponsfrontend": {"name": "couponsfrontend", "description": "Frontend for public facing coupons related feature funnels", "repository": "git@github.com:lyft/couponsfrontend.git", "credentials": false, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}], "custom": {"internal_service": false, "frontend_service": true, "frontend_i18n": true}, "slack": "#memberships", "team_email": "rider-memberships-eng@lyft.com", "pagerduty_escalation_policy": "Memberships", "groups": [{"name": "dev", "members": ["accountfrontend.dev", "control.dev", "couponsfrontend.legacy", "dborchestrator.legacy", "users.dev", "www2.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "couponsfrontend.dev"}, {"name": "unit", "type": "execution", "group": "couponsfrontend.dev", "container": "couponsfrontend.legacy", "command": "make test_coverage"}, {"name": "lintelado", "type": "jailed", "command": "make test_lint"}], "deploy": [{"name": "staging", "automatic": true, "legacy": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}], {"legacy": true, "name": "production"}], "languages": ["javascript"], "image_type": "service", "service_tier": 1, "envoy": {"profile": "python", "settings": {"services": [{"name": "couponsfrontend"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"www2": null, "users": null, "regionsadmin": null, "ridepasses": null, "coupons": null, "tcs": null, "wwwbrochurefe": null}}}}, "pulldeploy_components": {"data": ["translationdata"]}, "version": "d7fcf49b337856cfcab30441937130eadd1c6aaf", "images": [{"parent": {"name": "opsbase", "version": "ce84eccb6431b0bcb1d7cc365ed8b131f35a748c", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "ce84eccb6431b0bcb1d7cc365ed8b131f35a748c", "sub_image": null, "external": false}}, "courier": {"name": "courier", "description": "Lyft Line matching (being deprecated in favor of matching platform)", "repository": "git@github.com:lyft/courier.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 180, "exports": [{"name": "api", "port": 80}]}, {"name": "service", "command": "service_venv gunicorn courier_service:app --workers=4 -k gevent --worker-connections=1000 --max-requests=1000000 --backlog=1000 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/courier", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}}, {"name": "redis", "command": "/usr/bin/redis-server /etc/redis/redis.conf", "workdir": "/srv/redis/python", "sub_image": "redis", "limits": {"cpu": 1, "memory": "2Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "mongodb.server", "dynamodb.server", "redis.server", "courier.legacy"]}, {"name": "integration", "members": ["courier.dev", "etaproxy.dev"]}, {"name": "web", "members": ["courier.service", "courier.redis"]}], "facets": [{"name": "main", "member": "courier.web", "type": "service", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/k8s-courier-env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"criteria": {"cpu_target": 40}, "min_size": 10, "max_size": 50}}}}, {"name": "canary", "member": "courier.web", "type": "service", "canary": true, "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/k8s-courier-env.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}], "pulldeploy_components": {"data": ["marketplaceconfig", "regioncfgdata"]}, "tests": [{"name": "start", "type": "startup", "group": "courier.dev"}, {"name": "unit", "type": "execution", "group": "courier.dev", "container": "courier.legacy", "command": "make test_unit"}, {"name": "integration", "type": "sharded", "group": "courier.dev", "container": "courier.legacy", "target": "tests/integration", "virtualenv": "integration_venv", "float_dependencies": "*/30 2-22 * * *", "skip_threshold": 8, "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#sharedrides-server", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "sharedrides-eng@lyft.com", "pagerduty_escalation_policy": "Marketplace XP", "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}], "automatic": true}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], {"name": "production", "legacy": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "service_tier": 1, "languages": ["bash", "python"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "courier"}, {"name": "courieroraclescheduler", "traffic_type": "egress_only"}, {"name": "courieroracleschedulersaver", "traffic_type": "egress_only"}, {"name": "courieroraclesolver"}], "common_settings": {"internal_hosts": {"courier": null, "courieroraclesolver": null, "dispatch": null, "dispatchavailability": null, "etaproxy": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "locations": null, "matchingstate": null, "ratelimit": null, "regions": null, "rides": null, "ridetimeestimator": null, "routesapi": null, "tcs": null, "users": null, "viewport": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "redis": {"couriermultiredis": {"port": 6380}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.redis", "sub_image": "redis"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s", "packages": ["python-numpy", "python-scipy", "python-sklearn", "libgeos-dev", "libspatialindex-dev", "zip", "unzip"]}}]}}, "logging": {"courier": {"fields": {"Id": "keyword", "routeMongoId": "keyword", "stops": "keyword", "ride_id": "keyword", "args": {"stops": "keyword", "routeMongoId": "keyword"}, "ordered_ride_ids": "keyword", "courier_route_id": "keyword", "reason": "keyword", "driver": "keyword", "ride_id_responsible": "keyword", "courier_request_id": "keyword", "dispatch_timeout": "keyword", "pax_mongo_id": "keyword", "locked_until": "keyword", "status": "keyword", "has_timed_out": "keyword", "redispatched_at": "keyword", "dispatched_at": "keyword", "created_at": "keyword", "version": "keyword", "is_in_route": "keyword", "error_message": "keyword", "origin_str": "keyword", "shadow_origin_str": "keyword", "origin": {"lng": "float", "lat": "float", "region": "keyword", "routableAddress": "keyword", "address": "keyword"}, "limit": "long", "destination_str": "keyword", "shadow_destination_str": "keyword", "destination": {"lng": "float", "lat": "float", "routableAddress": "keyword", "address": "keyword"}, "pax_user_id": "keyword", "route_id": "keyword", "requests_not_in_pending_state": "keyword", "matching_status": "long", "courier_request": "keyword", "route_mongo_id": "keyword", "primetime": "long", "error": {"error_code": "long", "message": {"error": "keyword"}, "error_class": "keyword", "client_type": "keyword", "is_internal": "boolean", "major_app_version": "keyword", "os": "keyword", "endpoint": "keyword"}, "total_wait_sec": "float", "lat": "float", "lng": "float", "total_tries": "long", "mongo_id": "keyword", "try_num": "long", "courier_route": "keyword", "id": "keyword", "rideId": "keyword", "post_data": {"region": "keyword", "destination_lat": "float", "request_lat": "float", "request_lng": "float", "destination_lng": "float"}, "request_id": "keyword", "user_id": "keyword", "num_objects": "keyword", "new_party_size": "long", "batching_window_sec": "long", "batching_window_rounded": "long", "min_batching_window_sec": "long", "max_batching_window_sec": "long", "file_last_modified": "float", "courier_match_window_seconds": "long", "discard_seconds": "long", "region": "keyword", "solver_type": "keyword", "lookback_seconds": "long", "bad_response": "keyword", "bad_response_error_code": "long", "trip_estimator_model_path": "keyword", "last_sync": "float", "Error": "keyword", "cluster": "keyword", "duration_ms": "float", "command": "keyword", "pipeline": "keyword", "courier_regions": "keyword", "match_window_seconds": "keyword", "endpoint": "keyword", "missing_args": "keyword", "region_code": "keyword", "shared_knn_prediction": "keyword", "predictions_by_bw": "keyword", "request": "keyword"}}}, "version": "ab69c7f7913d8567db376aa3ef2323b5bc9d6b5a", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "bionicbase", "version": "3fbc2558f2845db9b1cd7e06276b062ca3ae63b1", "sub_image": null, "external": false}, "sub_image": "redis"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "cronjobcontroller": {"name": "cronjobcontroller", "description": "cronjob controller", "repository": "git@github.com:lyft/cronjobcontroller.git", "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "slack": "#compute-bots", "docs": {"section": "Infrastructure"}, "image_type": "service", "service_tier": 3, "languages": ["go"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igo:b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "bash -c \"GO111MODULE=on go test ./...\""}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging-obs-dev", "legacy": false, "automatic": true, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["obs-dev"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["obs-dev"]}, "interpolation_vars": {"kiam_env": "staging"}}}, [{"name": "staging-lyftlearn", "legacy": false, "automatic": true, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"kiam_env": "staging"}}}, {"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true, "mode": "direct", "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}, "interpolation_vars": {"kiam_env": "staging"}}}], [{"name": "production-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"kiam_env": "production"}}}, {"name": "production-lyftlearn-av", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn-av"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml-av"]}, "interpolation_vars": {"kiam_env": "production"}}}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "mode": "direct", "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}, "interpolation_vars": {"kiam_env": "production"}}}], "version": "40064a0e1e961f7b96944ae4dd39dec955537d6a", "images": [{"parent": {"name": "s2igo", "version": "b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2igo", "version": "b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6", "sub_image": null, "external": false}}, "custodian": {"name": "custodian", "description": "Internal service that listens to events and triggers cleanup actions on rides and routes", "repository": "git@github.com:lyft/custodian.git", "image_type": "service", "service_tier": 1, "slack": "#custodian", "team_email": "core-services@lyft.com", "pagerduty_escalation_policy": "API", "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/custodian", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "6Gi"}}], "facets": [{"name": "main", "member": "custodian.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 5, "max_size": 160}}}}, {"name": "canary", "member": "custodian.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "groups": [{"name": "dev", "members": ["control.dev", "custodian.legacy"]}, {"name": "integration", "members": ["custodian.dev", "goldentests.integration", "ridexppredictor.dev", "tcs.dev", "pusher.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "custodian.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "sharded", "group": "custodian.dev", "container": "custodian.legacy", "target": "tests/integration", "virtualenv": "service_venv", "reports": {"junit": "build/integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "custodian"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 127}}}, "internal_hosts": {"dbproxyroutes": null, "lastmile": null, "locations": null, "matchingstate": null, "messaging": null, "push": null, "pusher": null, "regions": null, "rides": null, "ridesapi": null, "routes": null, "routesapi": null, "supply": null, "tcs": null, "trips": null, "tripsapi": null, "users": null}, "external_hosts": {"firehose_iad": null}}}}, "logging": {"custodian": {"fields": {"ride_id": "keyword", "driver_id": "keyword", "route_id": "keyword", "ride_ids": "keyword", "status_code": "keyword", "bad_response": "keyword", "url": "keyword", "service_name": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "expected_driver_id": "keyword", "expected_route_id": "keyword", "code": "long", "response": "keyword", "value": "keyword"}}}, "version": "8feb2fa7215e469de5ad8d3226f1a28e60f9e138", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "cybermon": {"name": "cybermon", "description": "packet analyser", "repository": "git@github.com:lyft/cyberprobe-private.git", "restricted_ssh": true, "containers": [{"name": "server", "command": "cybermon --port=9000 --transport=tcp --config=/etc/cyberprobe/json.lua"}], "builder": {"name": "docker_build", "params": {"buildargs": ["CYBERPROBE_VERSION=1.13.4"]}}, "slack": "#tnw-bots", "team_email": "ahassall@lyft.com", "service_tier": 3, "image_type": "tool", "orchestrate": {"types": [{"name": "terraform"}], "steps": [{"name": "production"}]}, "deploy": [{"name": "development", "legacy": false}, {"name": "production", "automatic": false, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "version": "bc473539b45f6e5f071977fc4cc1eba69cae4574", "images": [{"parent": {"name": "bionicbase", "version": "e4bd72a4b0feff782e1f609553b56c72689a8f19", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "e4bd72a4b0feff782e1f609553b56c72689a8f19", "sub_image": null, "external": false}}, "dashboards": {"name": "dashboards", "description": "dashboards", "repository": "git@github.com:lyft/dashboards.git", "credentials_legacy": true, "credentials": true, "docs": {"disable": true}, "containers": [{"name": "service", "once": true, "command": "/code/dashboards/service.sh"}, {"name": "dashboard", "once": true, "command": "/code/dashboards/dashboard.sh"}, {"name": "interactive", "start_time": 60, "command": "/bin/bash"}, {"name": "spin", "command": "sleep infinity"}, {"name": "bulkorca", "once": true, "command": "python /code/dashboards/tools/bulk_pagerduty_orca.py"}], "groups": [{"name": "dev", "members": ["control.minimal", "runtime.run", "dashboards.spin"]}, {"name": "push_dashboard", "members": ["control.minimal", "runtime.run", "dashboards.dashboard"]}, {"name": "push_service", "members": ["control.minimal", "runtime.run", "dashboards.service"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "execution", "group": "dashboards.dev", "container": "dashboards.spin", "command": "make test_unit"}, {"name": "syntax", "type": "execution", "group": "dashboards.dev", "container": "dashboards.spin", "command": "make test_syntax", "autotrigger": false}], "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#observabot", "environments": ["production", "extra"]}, "deploy_failure": {"slack": "#observability"}, "test_failure": {"slack": "#observability", "environments": ["production"]}, "pr_merge": {"slack": "#observabot"}}, "team_email": "observability-visibility-team@lyft.com", "pagerduty_escalation_policy": "Observability Visibility", "no_alarms": true, "deploy": [{"name": "production", "automatic": true, "legacy": true}, {"name": "extra", "legacy": true, "schedule": "H 0 * * 1-5"}], "languages": ["bash", "javascript", "python"], "image_type": "tool", "service_tier": 2, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "version": "5e3a828b4135666f8465ce4717701b4044858fde", "images": [{"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}}, "dataaclsync": {"name": "dataaclsync", "description": "Ingest ACL policy events and reflect those in data tools", "repository": "git@github.com:lyft/dataaclsync.git", "slack": "#viz-dev", "team_email": "vap-eng@lyft.com", "pagerduty_escalation_policy": "Superset", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:c3d1ec589b89ef05df07a19a1469f415656d1414"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/dataaclsync", "limits": {"cpu": 2, "memory": "5Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "workflowworker", "command": "dumb-init -- service_venv python manage.py workflow_worker", "workdir": "/code/dataaclsync", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "reconciliationworker", "command": "dumb-init -- service_venv python manage.py reconciliation_worker", "workdir": "/code/dataaclsync", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "dataaclsync.legacy", "dataaclsync.workflowworker", "dataaclsync.reconciliationworker"]}, {"name": "service_group", "members": ["dataaclsync.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "dataaclsync.dev"}, {"name": "unit", "type": "execution", "group": "dataaclsync.dev", "container": "dataaclsync.legacy", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "dataaclsync.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 10}, "production": {"min_size": 1, "max_size": 10}}}}, {"name": "canary", "member": "dataaclsync.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "workflowworker", "member": "dataaclsync.workflowworker", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 10}}, {"name": "reconciliationworker", "member": "dataaclsync.reconciliationworker", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 2}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "workflowworker"}, {"facet": "reconciliationworker"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "workflowworker"}, {"facet": "reconciliationworker"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "workflowworker"}, {"facet": "reconciliationworker"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "workflowworker"}, {"facet": "reconciliationworker"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "dataaclsync"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"dynamodb_iad": null, "tableauapi_internal": null, "modeanalytics": null}, "internal_hosts": {"acl": null, "team": null}}}}, "version": "99102c65136f7eccc365ff2b7da3c5ffc2147220", "images": [{"parent": {"name": "opsbase", "version": "c3d1ec589b89ef05df07a19a1469f415656d1414", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "c3d1ec589b89ef05df07a19a1469f415656d1414", "sub_image": null, "external": false}}, "dataauditor": {"name": "dataauditor", "description": "Service that audits various compliance policies retaining to data stored in various datastores", "repository": "git@github.com:lyft/dataauditor.git", "slack": "#data-privacy", "notification_overrides": {"deploy": {"slack": "#privacy-deploys"}, "pr_merge": {"slack": "#privacy-deploys"}}, "team_email": "privacy-eng@lyft.com", "pagerduty_escalation_policy": "Data Privacy", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "dynamodbcronjob", "command": "dumb-init -- service_venv python manage.py dynamodb_auditor", "workdir": "/code/dataauditor", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "1Gi"}}, {"name": "dynamodbdatacronjob", "command": "dumb-init -- service_venv python manage.py dynamodb_data_auditor", "workdir": "/code/dataauditor", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "1Gi"}}, {"name": "hivecronjob", "command": "dumb-init -- service_venv python manage.py hive_auditor", "workdir": "/code/dataauditor", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}, {"name": "redshiftcronjob", "command": "dumb-init -- service_venv python manage.py redshift_auditor", "workdir": "/code/dataauditor", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}, {"name": "bigquerycronjob", "command": "dumb-init -- service_venv python manage.py bigquery_auditor", "workdir": "/code/dataauditor", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}, {"name": "lyftpgcronjob", "command": "dumb-init -- service_venv python manage.py lyftpg_auditor", "workdir": "/code/dataauditor", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/dataauditor", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dataauditor.legacy"]}, {"name": "service_group", "members": ["dataauditor.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "dataauditor.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "dataauditor.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "dataauditor.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}, {"name": "dynamodbcronjob", "member": "dataauditor.dynamodbcronjob", "type": "cron", "schedule": "0 19 * * 1"}, {"name": "dynamodbdatacronjob", "member": "dataauditor.dynamodbdatacronjob", "type": "cron", "schedule": "0 20 * * 1"}, {"name": "hivecronjob", "member": "dataauditor.hivecronjob", "type": "cron", "schedule": "0 21 * * 1"}, {"name": "redshiftcronjob", "member": "dataauditor.redshiftcronjob", "type": "cron", "schedule": "0 21 * * 1"}, {"name": "bigquerycronjob", "member": "dataauditor.bigquerycronjob", "type": "cron", "schedule": "0 21 * * 1"}], "deploy": [{"name": "staging", "automatic": true, "bake_time_minutes": 2, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "bake_time_minutes": 2, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "dynamodbcronjob"}, {"facet": "dynamodbdatacronjob"}, {"facet": "hivecronjob"}, {"facet": "redshiftcronjob"}, {"facet": "bigquerycronjob"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "dataauditor"}], "common_settings": {"internal_hosts": {"mozartgateway": null}}}}, "version": "07152354a3468aa99130d2df5b4234ac724e71fe", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "datacatalog": {"name": "datacatalog", "description": "wrapper for open source datacatalog project", "repository": "git@github.com:lyft/datacatalog-private.git", "image_type": "service", "service_tier": 3, "slack": "#flyte-eng", "team_email": "flyte-eng@lyft.com", "pagerduty_escalation_policy": "Data Platform Flyte", "languages": ["bash"], "credentials": true, "containers": [{"name": "service", "command": "/code/datacatalog-private/entrypoint.sh"}, {"name": "spin", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["control.dev", "datacatalog.spin"]}], "tests": [{"name": "startup", "type": "startup", "group": "datacatalog.dev"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], "facets": [{"name": "main", "member": "datacatalog.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 8}}}}], "envoy": {"profile": "go", "settings": {"services": [{"name": "datacatalog"}], "common_settings": {}}}, "version": "fac15f9f2ced63c04b1019fdf8f319d2bfc265a3", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "dataplatformadmin": {"name": "dataplatformadmin", "description": "Command Center for dataplatform", "repository": "git@github.com:lyft/dataplatformadmin.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "web", "port": 80}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "dataplatformadmin"}], "common_settings": {"internal_hosts": {"team": null, "etlexpiration": null}}}}, "groups": [{"name": "dev", "members": ["control.dev", "postgresql.dev", "sqs.dev", "dataplatformadmin.legacy", "team.dev", "etlexpiration.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "dataplatformadmin.dev"}, {"name": "unit", "type": "execution", "group": "dataplatformadmin.dev", "container": "dataplatformadmin.legacy", "command": "make -j2 test_unit"}, {"name": "integration", "type": "execution", "group": "dataplatformadmin.dev", "container": "dataplatformadmin.legacy", "command": "make -j2 test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "bake_time_minutes": 3, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "bake_time_minutes": 3, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "slack": "#data-platform-dev", "team_email": "data-platform@lyft.com", "pagerduty_escalation_policy": "Data Platform Tools", "languages": ["javascript", "python"], "image_type": "service", "service_tier": 2, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "logging": {"dataplatformadmin": {"fields": {"user": "keyword"}}}, "version": "ed119f339b8edd8531c478450efe0493e3ea5b93", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "dataplatformairflow": {"name": "dataplatformairflow", "description": "Runtime configuration data for dataplatformairflow", "repository": "git@github.com:lyft/dataplatformairflow.git", "image_type": "data", "service_tier": 2, "slack": "#data-platform", "team_email": "dp-tools@lyft.com@lyft.com", "pagerduty_escalation_policy": "Data Platform Tools", "languages": ["bash", "python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/configsetbase:18d10480e15a193e3deffe0458a22b86530c1dc2", "packages": ["libmysqlclient-dev", "libsasl2-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}]}}, "credentials": false, "groups": [{"name": "dev", "members": ["airflowinfra.dev"]}], "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/dataplatformairflow"]}], "tests": [{"name": "unit", "command": "make test_unit", "type": "jailed"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "/bin/bash -c 'PYTHONPATH=data/ pre-commit run --all-files --show-diff-on-failure'"}, {"name": "dag_bag", "command": "service_venv python3 -m pytest /code/airflowinfra/tests/dag_bag/", "type": "execution", "group": "dataplatformairflow.dev", "container": "airflowinfra.legacy"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": false, "orca": []}], "version": "53fb316f0cb43535a3885cdc3f67fe673da7749c", "images": [{"parent": {"name": "configsetbase", "version": "18d10480e15a193e3deffe0458a22b86530c1dc2", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "configsetbase", "version": "18d10480e15a193e3deffe0458a22b86530c1dc2", "sub_image": null, "external": false}}, "datatagger": {"name": "datatagger", "description": "Service to sample and identify personal data from variety of Lyft data stores", "repository": "git@github.com:lyft/datatagger.git", "slack": "#data-privacy", "team_email": "privacy-team@lyft.com", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "pagerduty_escalation_policy": "Data Privacy", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:7217bb50d71d786ef58610aafb6403846a9e518b", "packages": ["libxmlsec1-dev", "pkg-config"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:3ff3e12c0c0504538f77083e63156b8f8531bcff", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:c749320158a68b1cb4bb944264033635ec49d2fa", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/datatagger", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "regexworker", "command": "service_venv python manage.py regex_worker", "workdir": "/code/datatagger", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "sqs.server", "datatagger.legacy", "envoy.server", "postgresql.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "datatagger.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "datatagger.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 3, "max_size": 3}}}}, {"name": "canary", "member": "datatagger.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}, {"name": "regexworker", "member": "datatagger.regexworker", "type": "worker", "autoscaling": {"min_size": 2, "max_size": 4}}], "deploy": [{"name": "staging", "automatic": true, "bake_time_minutes": 2, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "regexworker"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "bake_time_minutes": 2, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "bake_time_minutes": 2, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "regexworker"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "bake_time_minutes": 2, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "regexworker"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "regexworker"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "datatagger"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "s3_iad": null}}}}, "version": "aad015ec8a409e8d0984dde66f38289ad04fc143", "images": [{"parent": {"name": "opsbase", "version": "7217bb50d71d786ef58610aafb6403846a9e518b", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "3ff3e12c0c0504538f77083e63156b8f8531bcff", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c749320158a68b1cb4bb944264033635ec49d2fa", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "7217bb50d71d786ef58610aafb6403846a9e518b", "sub_image": null, "external": false}}, "datatoolkit": {"name": "datatoolkit", "description": "library for data science interactive use", "repository": "git@github.com:lyft/data-toolkit.git", "slack": "#data-platform", "team_email": "dp-infra-compute@lyft.com", "pagerduty_escalation_policy": "Data Infra Compute", "image_type": "library", "languages": ["python"], "notification_overrides": {"deploy": {"slack": "#data-platform-dev", "environments": ["canary", "production"]}, "test_failure": {"slack": "#data-platform-dev", "environments": ["production"]}, "pr_merge": {"slack": "#data-platform-dev"}}, "credentials": true, "credentials_legacy": false, "audit_blacklist": ["envoyAudit"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipythonlibrary:f2a98d180628850d25ce7fac6fc4c05c92439fb0", "packages": ["libkrb5-dev", "libpq-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "precommit"}}]}}, "containers": [{"name": "devel", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["control.dev", "datatoolkit.devel"]}], "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "flake8.txt", "cobertura": "build/coverage.xml"}}, {"name": "unit3", "type": "jailed", "command": "make test_unit3", "reports": {"junit": "build/unit.xml", "pylint": "flake8.txt", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "datatoolkit.dev", "container": "datatoolkit.devel", "virtualenv": "service_venv", "command": "make test_integration", "reports": {"junit": "build/integration.xml"}}, {"name": "integration3", "type": "execution", "group": "datatoolkit.dev", "container": "datatoolkit.devel", "virtualenv": "service_venv", "command": "make test_integration3", "reports": {"junit": "build/integration.xml"}}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "automatic": false, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "version": "14b1880a17c03556938c4b6f7698478b8339afee", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "f2a98d180628850d25ce7fac6fc4c05c92439fb0", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "f2a98d180628850d25ce7fac6fc4c05c92439fb0", "sub_image": null, "external": false}}, "datum": {"name": "datum", "description": "Create manifests for Kubernetes runnable services from Lyft manifests", "repository": "git@github.com:lyft/datum.git", "slack": "#deploys-bots", "team_email": "deploys-team@lyft.com", "containers": [{"name": "run", "command": "datum"}], "languages": ["go"], "image_type": "library", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igo:fa0c4921e2e8481015324ac1a2b841013a1a2fdf"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false}, {"name": "production", "legacy": false, "automatic": true}], "version": "d1a2c977bd495a643357d339b50ffb0c6599ae4a", "images": [{"parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}}, "dbbenchmark": {"name": "dbbenchmark", "description": "dbbenchmark", "repository": "git@github.com:lyft/dbbenchmark.git", "slack": "#stash", "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS Stash", "slack_deploy_notification_environments": ["staging", "canary", "production"], "image_type": "service", "service_tier": 3, "languages": ["go"], "credentials": false, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "dbproxybenchmark.dev", "discovery.dev", "dbbenchmark.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "dbbenchmark.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "coverage_files", "type": "jailed", "run_in_pr": false, "command": "make coverage_files", "reports": {"cobertura": "build/coverage.xml"}}], "deploy": [{"name": "staging", "bake_time_minutes": 0, "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "bake_time_minutes": 0, "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "bake_time_minutes": 0, "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "bake_time_minutes": 0, "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "bake_time_minutes": 0, "legacy": true}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "dbbenchmark"}], "common_settings": {"internal_hosts": {"dbproxybenchmark": null}}}}, "logging": {"dbbenchmark": {"fields": {"err": "keyword"}}}, "version": "c9bf40b9c10c3d1e52ad5b6c493568c0ae61cbb0", "images": [{"parent": {"name": "opsbase", "version": "0c837dfacbd7f05fcf198360f85e539c2ae9b297", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "0c837dfacbd7f05fcf198360f85e539c2ae9b297", "sub_image": null, "external": false}}, "dborchestrator": {"name": "dborchestrator", "description": "dborchestrator", "repository": "git@github.com:lyft/dborchestrator.git", "image_type": "service", "service_tier": 0, "languages": ["go"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_phase": "parallel_storage"}, {"name": "regeneratefromidl", "command": "/code/dborchestrator/gen_db/generate_from_idl.sh", "workdir": "/code/dborchestrator/gen_db"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "dborchestrator.legacy", "idl.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "dborchestrator.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "stashyamlvalidate", "type": "jailed", "command": "/code/dborchestrator/gen_db/validate_stashyaml.sh"}, {"name": "regeneratefromidltest", "type": "execution", "group": "dborchestrator.dev", "container": "dborchestrator.legacy", "command": "make regeneratefromidl"}, {"name": "dynamotablecreationtest", "type": "execution", "group": "dborchestrator.dev", "container": "dborchestrator.legacy", "command": "make dynamotablecreation"}], "slack": "#stash", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS Stash", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "dborchestrator"}, {"name": "stashctl"}], "common_settings": {"internal_hosts": {"dborchestrator": null}, "external_hosts": {"dynamodb_iad": null}}}}, "logging": {"dborchestrator": {"fields": {"method": "keyword", "path": "keyword", "host": "keyword", "service": "keyword", "signal": "keyword"}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "version": "c221df81acb9c7950c5507b36d063556c9ef332c", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "dbproxy": {"name": "dbproxy", "description": "dbproxy", "repository": "git@github.com:lyft/dbproxy.git", "image_type": "service", "service_tier": 1, "languages": ["go"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_phase": "parallel_storage"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "dbproxy.legacy", "dborchestrator.dev", "idl.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "dbproxy.dev"}], "slack": "#stash", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS Stash", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "go", "settings": {"services": [{"name": "dbproxy"}], "common_settings": {"external_hosts": {"spannergoogleapis": null, "interconnectpoc": null, "dynamodb_iad": null}, "internal_hosts": {"dborchestrator": null}}}}, "logging": {"dbproxy": {"fields": {"requestId": "keyword"}}}, "version": "f51fdd86abe2555d8895317b4e43ad5cd2d11872", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "dbproxyauth": {"name": "dbproxyauth", "description": "dbproxy for auth integration tests", "repository": "git@github.com:lyft/dbproxyauth.git", "image_type": "service", "service_tier": 0, "languages": ["go"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_phase": "parallel_storage"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "dbproxyauth.legacy", "mongodb.dev", "dborchestrator.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "dbproxyauth.dev"}, {"name": "unit", "type": "jailed", "command": "make tests"}, {"name": "integration", "type": "execution", "group": "dbproxyauth.dev", "container": "dbproxyauth.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "command": "./script/lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#stash", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS Stash", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "go", "settings": {"services": [{"name": "dbproxyauth"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"dborchestrator": null}}}}, "logging": {"dbproxyauth": {"fields": {"src": "keyword", "table": "keyword", "dest": "keyword", "requestId": "keyword", "err": "keyword", "service": "keyword", "method": "keyword", "path": "keyword", "error": "keyword", "lyft_user_id": "keyword", "code": "keyword", "endpoint": "keyword", "downstream_cluster": "keyword", "request_id": "keyword", "host": "keyword", "primarykeyValue": "keyword", "primarykey": "keyword", "signal": "keyword", "errVerbose": "keyword", "stack": "keyword", "panic": "boolean"}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "version": "d77eab0b7e0125b56859268e5ee202b88c34ac39", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "dbproxybenchmark": {"name": "dbproxybenchmark", "description": "dbproxy for benchmarking", "repository": "git@github.com:lyft/dbproxybenchmark.git", "image_type": "service", "service_tier": 3, "languages": ["go"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_phase": "parallel_storage"}, {"name": "service", "command": "dumb-init -- dbproxybenchmark", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}}], "facets": [{"name": "main", "member": "dbproxybenchmark.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 10, "max_size": 300}}}, "requirements": {"mongo": true}}, {"name": "canary", "member": "dbproxybenchmark.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}, "requirements": {"mongo": true}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "dbproxybenchmark.legacy", "dborchestrator.dev"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": "k8s"}}]}}, "tests": [{"name": "startup", "type": "startup", "group": "dbproxybenchmark.dev"}], "slack": "#stash", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS Stash", "deploy": [{"name": "staging", "legacy": false, "bake_time_minutes": 0, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": true, "bake_time_minutes": 0, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d", "bake_time_minutes": 0, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": true, "bake_time_minutes": 0, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}], "envoy": {"profile": "go", "settings": {"services": [{"name": "dbproxybenchmark"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"dborchestrator": null}}}}, "logging": {"dbproxybenchmark": {"fields": {"requestId": "keyword"}}}, "version": "24fa05fda87635b2a2511fba9ad5729e22307336", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "dbproxyclienttest": {"name": "dbproxyclienttest", "description": "Python service to test dbproxy", "repository": "git@github.com:lyft/dbproxyclienttest.git", "image_type": "service", "service_tier": 2, "slack": "#ds-stash-pod", "team_email": "ds-stash@lyft.com", "pagerduty_escalation_policy": "DS Stash", "languages": ["python", "bash"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dbproxyclienttest.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "dbproxyclienttest.dev"}], "deploy": [{"name": "development", "automatic": true, "legacy": false, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "python": {"mypy": {"python_versions": ["3.6"], "exclude": ["ops"]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "dbproxyclienttest"}], "common_settings": {"internal_hosts": {"dbproxy": null, "dbproxyenterprise": null}}}}, "version": "82c61dc076b247667ce634dbe5ea7042556e1fac", "images": [{"parent": {"name": "opsbase", "version": "be15551ec923d766f35792d16021d265fca9e318", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "be15551ec923d766f35792d16021d265fca9e318", "sub_image": null, "external": false}}, "dbproxyenterprise": {"name": "dbproxyenterprise", "description": "dbproxy for enterprise service", "repository": "git@github.com:lyft/dbproxyenterprise.git", "image_type": "service", "service_tier": 1, "languages": ["go"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_phase": "parallel_storage"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "dbproxyenterprise.legacy", "dborchestrator.dev", "mongodb.server", "dynamodb.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "dbproxyenterprise.dev"}], "slack": "#stash", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS Stash", "deploy": [{"name": "staging", "automatic": true, "legacy": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "go", "settings": {"services": [{"name": "dbproxyenterprise"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "mongos": {"enterprise": {"development": {"clusters": [{"port": 27046, "hosts": ["local-development-iad-onebox.lyft.net:27017"]}]}, "staging": {"ratelimit": true, "clusters": [{"port": 27027, "hosts": ["r143043-a0.mlab.com:27817", "r143043-a1.mlab.com:27817"]}, {"port": 27052, "hosts": ["r143043-a0.mlab.com:27817", "r143043-a1.mlab.com:27817"]}], "circuit_breakers": {"default": {"max_connections": 200}}}, "production": {"ratelimit": true, "clusters": [{"port": 27027, "hosts": ["r351557-10.mlab.com:27817", "r351557-11.mlab.com:27817"]}, {"port": 27052, "hosts": ["r059373-10.mlab.com:27817", "r059373-11.mlab.com:27817", "r059373-12.mlab.com:27817", "r059373-13.mlab.com:27817"]}], "circuit_breakers": {"default": {"max_connections": 200}}}}}, "internal_hosts": {"dborchestrator": null}}}}, "logging": {"dbproxyenterprise": {"fields": {"src": "keyword", "table": "keyword", "dest": "keyword", "requestId": "keyword", "err": "keyword", "service": "keyword", "method": "keyword", "path": "keyword", "error": "keyword", "lyft_user_id": "keyword", "code": "keyword", "endpoint": "keyword", "downstream_cluster": "keyword", "request_id": "keyword", "host": "keyword", "primarykeyValue": "keyword", "primarykey": "keyword", "signal": "keyword", "errVerbose": "keyword", "stack": "keyword", "panic": "boolean"}}}, "version": "ffb93a14cc36d8f8711da24d8d2ce0d4e4491b0e", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "dbproxyfare": {"name": "dbproxyfare", "description": "dbproxy for fare", "repository": "git@github.com:lyft/dbproxyfare.git", "image_type": "service", "service_tier": 0, "languages": ["go"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_phase": "parallel_storage"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "dbproxyfare.legacy", "dborchestrator.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "dbproxyfare.dev"}], "slack": "#stash", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS Stash", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "go", "settings": {"services": [{"name": "dbproxyfare"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"dborchestrator": null}}}}, "version": "b2f2f782b2f2d318afb8844761e9435c2ad32c31", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "dbproxypaymentgateway": {"name": "dbproxypaymentgateway", "description": "dbproxy for payment gateway", "repository": "git@github.com:lyft/dbproxypaymentgateway.git", "image_type": "service", "service_tier": 1, "languages": ["go"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_phase": "parallel_storage"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "dbproxypaymentgateway.legacy", "dborchestrator.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "dbproxypaymentgateway.dev"}], "slack": "#stash", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS Stash", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "go", "settings": {"services": [{"name": "dbproxypaymentgateway"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"dborchestrator": null}}}}, "logging": {"dbproxypaymentgateway": {"fields": {"requestId": "keyword"}}}, "version": "e5886421c315c44312485702701c871dbd392ee1", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "dbproxypodie": {"name": "dbproxypodie", "description": "dbproxy for podie integration tests", "repository": "git@github.com:lyft/dbproxypodie.git", "image_type": "service", "service_tier": 3, "languages": ["go"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_phase": "parallel_storage"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "dbproxypodie.legacy", "mongodb.dev", "dborchestrator.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "dbproxypodie.dev"}], "slack": "#stash", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS Stash", "deploy": [{"name": "staging", "automatic": true, "legacy": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "bake_time_minutes": 0}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d", "bake_time_minutes": 0}], {"name": "production", "legacy": true, "bake_time_minutes": 0}], "envoy": {"profile": "go", "settings": {"services": [{"name": "dbproxypodie"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "spannergoogleapis": null, "interconnectpoc": null}, "internal_hosts": {"dborchestrator": null}, "mongos": {"auth": {"development": {"clusters": [{"port": 27046, "hosts": ["local-development-iad-onebox.lyft.net:27017"]}]}, "staging": {"ratelimit": true, "clusters": [{"port": 27026, "hosts": ["r055605-a0.mlab.com:27817", "r055605-a1.mlab.com:27817"]}]}, "production": {"ratelimit": true, "clusters": [{"port": 27026, "hosts": ["r023824-20.mlab.com:27817", "r023824-21.mlab.com:27817", "r023824-22.mlab.com:27817", "r023824-23.mlab.com:27817", "r023824-24.mlab.com:27817", "r023824-25.mlab.com:27817", "r023824-26.mlab.com:27817", "r023824-27.mlab.com:27817", "r023824-28.mlab.com:27817", "r023824-29.mlab.com:27817", "r023824-30.mlab.com:27817", "r023824-31.mlab.com:27817", "r023824-32.mlab.com:27817", "r023824-33.mlab.com:27817", "r023824-34.mlab.com:27817", "r023824-35.mlab.com:27817", "r023824-36.mlab.com:27817", "r023824-37.mlab.com:27817"]}]}}}}}}, "version": "152fa812458f701ac09ae80b4686a78098acca89", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "dbproxyrides": {"name": "dbproxyrides", "description": "dbproxy for rides", "repository": "git@github.com:lyft/dbproxyrides.git", "image_type": "service", "service_tier": 0, "languages": ["go"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_phase": "parallel_storage"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "mongodb.dev", "dborchestrator.dev", "dbproxyrides.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "dbproxyrides.dev"}], "upstream_tests": {"on_commit": true, "test_set": {"rides": ["integration"]}}, "slack": "#stash", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS Stash", "deploy": [{"name": "staging", "legacy": true, "automatic": true}, {"name": "canary", "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "go", "settings": {"services": [{"name": "dbproxyrides"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"dborchestrator": null}, "mongos": {"dbproxyrides": {"development": {"clusters": [{"port": 27046, "hosts": ["local-development-iad-onebox.lyft.net:27017"]}, {"port": 27049, "hosts": ["local-development-iad-onebox.lyft.net:27017"]}]}, "staging": {"ratelimit": true, "clusters": [{"port": 27046, "hosts": ["r153054-a0.mlab.com:27817", "r153054-a1.mlab.com:27817"]}, {"port": 27049, "hosts": ["r055605-a0.mlab.com:27817", "r055605-a1.mlab.com:27817"]}]}, "production": {"ratelimit": true, "clusters": [{"port": 27046, "hosts": ["r241088-50.mlab.com:27817", "r241088-51.mlab.com:27817", "r241088-52.mlab.com:27817", "r241088-53.mlab.com:27817", "r241088-54.mlab.com:27817", "r241088-55.mlab.com:27817", "r241088-56.mlab.com:27817", "r241088-57.mlab.com:27817"]}, {"port": 27049, "hosts": ["r027189-10.mlab.com:27817", "r027189-11.mlab.com:27817", "r027189-12.mlab.com:27817", "r027189-13.mlab.com:27817", "r027189-14.mlab.com:27817", "r027189-15.mlab.com:27817", "r027189-16.mlab.com:27817", "r027189-17.mlab.com:27817", "r027189-18.mlab.com:27817", "r027189-19.mlab.com:27817", "r027189-20.mlab.com:27817", "r027189-21.mlab.com:27817", "r027189-22.mlab.com:27817", "r027189-23.mlab.com:27817", "r027189-24.mlab.com:27817", "r027189-25.mlab.com:27817", "r027189-26.mlab.com:27817", "r027189-27.mlab.com:27817", "r027189-28.mlab.com:27817", "r027189-29.mlab.com:27817", "r027189-30.mlab.com:27817", "r027189-31.mlab.com:27817", "r027189-32.mlab.com:27817", "r027189-33.mlab.com:27817", "r027189-34.mlab.com:27817", "r027189-35.mlab.com:27817", "r027189-36.mlab.com:27817", "r027189-37.mlab.com:27817", "r027189-38.mlab.com:27817", "r027189-39.mlab.com:27817"]}]}}}}}}, "version": "456c4e6751f1f0365ed095f08a1d6bee75e96cc7", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "dbproxyroutes": {"name": "dbproxyroutes", "description": "dbproxy for routes", "repository": "git@github.com:lyft/dbproxyroutes.git", "image_type": "service", "service_tier": 0, "languages": ["go"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_phase": "parallel_storage"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "dbproxyroutes.legacy", "dborchestrator.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "dbproxyroutes.dev"}], "upstream_tests": {"on_commit": true, "test_set": {"routes": ["integration"]}}, "slack": "#stash", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS Stash", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "go", "settings": {"services": [{"name": "dbproxyroutes"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"dborchestrator": null}, "mongos": {"dbproxyroutes": {"development": {"clusters": [{"port": 27048, "hosts": ["local-development-iad-onebox.lyft.net:27017"]}, {"port": 27051, "hosts": ["local-development-iad-onebox.lyft.net:27017"]}]}, "staging": {"ratelimit": true, "clusters": [{"port": 27048, "hosts": ["r153054-a0.mlab.com:27817", "r153054-a1.mlab.com:27817"]}, {"port": 27051, "hosts": ["r055605-a0.mlab.com:27817", "r055605-a1.mlab.com:27817"]}]}, "production": {"ratelimit": true, "clusters": [{"port": 27048, "hosts": ["r241088-50.mlab.com:27817", "r241088-51.mlab.com:27817", "r241088-52.mlab.com:27817", "r241088-53.mlab.com:27817", "r241088-54.mlab.com:27817", "r241088-55.mlab.com:27817", "r241088-56.mlab.com:27817", "r241088-57.mlab.com:27817"]}, {"port": 27051, "hosts": ["r027189-10.mlab.com:27817", "r027189-11.mlab.com:27817", "r027189-12.mlab.com:27817", "r027189-13.mlab.com:27817", "r027189-14.mlab.com:27817", "r027189-15.mlab.com:27817", "r027189-16.mlab.com:27817", "r027189-17.mlab.com:27817", "r027189-18.mlab.com:27817", "r027189-19.mlab.com:27817", "r027189-20.mlab.com:27817", "r027189-21.mlab.com:27817", "r027189-22.mlab.com:27817", "r027189-23.mlab.com:27817", "r027189-24.mlab.com:27817", "r027189-25.mlab.com:27817", "r027189-26.mlab.com:27817", "r027189-27.mlab.com:27817", "r027189-28.mlab.com:27817", "r027189-29.mlab.com:27817", "r027189-30.mlab.com:27817", "r027189-31.mlab.com:27817", "r027189-32.mlab.com:27817", "r027189-33.mlab.com:27817", "r027189-34.mlab.com:27817", "r027189-35.mlab.com:27817", "r027189-36.mlab.com:27817", "r027189-37.mlab.com:27817", "r027189-38.mlab.com:27817", "r027189-39.mlab.com:27817"]}]}}}}}}, "logging": {"dbproxyroutes": {"fields": {"requestId": "keyword"}}}, "version": "25651d1bf3cfced33050ad35d6b1390c5876d7e1", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "dbproxytrips": {"name": "dbproxytrips", "description": "dbproxy for trips", "repository": "git@github.com:lyft/dbproxytrips.git", "image_type": "service", "service_tier": 0, "languages": ["go"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_phase": "parallel_storage"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "dbproxytrips.legacy", "dborchestrator.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "dbproxytrips.dev"}], "slack": "#stash", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS Stash", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "go", "settings": {"services": [{"name": "dbproxytrips"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"dborchestrator": null}}}}, "version": "916330a789c0d01a63856d1fdecf6a07c3ba0e7c", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "dbproxyusers": {"name": "dbproxyusers", "description": "dbproxy for users", "repository": "git@github.com:lyft/dbproxyusers.git", "image_type": "service", "service_tier": 0, "languages": ["go"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_phase": "parallel_storage"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "mongodb.dev", "dborchestrator.dev", "dbproxyusers.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "dbproxyusers.dev"}], "slack": "#stash", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS Stash", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "go", "settings": {"services": [{"name": "dbproxyusers"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"dborchestrator": null}, "mongos": {"dbproxyusers": {"development": {"clusters": [{"port": 27047, "hosts": ["local-development-iad-onebox.lyft.net:27017"]}, {"port": 27050, "hosts": ["local-development-iad-onebox.lyft.net:27017"]}]}, "staging": {"ratelimit": true, "clusters": [{"port": 27047, "hosts": ["r153054-a0.mlab.com:27817"]}, {"port": 27050, "hosts": ["r055605-a0.mlab.com:27817", "r055605-a1.mlab.com:27817"]}]}, "production": {"ratelimit": true, "clusters": [{"port": 27047, "hosts": ["r153054-a0.mlab.com:27817"]}]}}}}}}, "version": "e1f30afe58240d1b269688dc1abdcf75282b27d8", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "dbtools": {"name": "dbtools", "description": "TODO short description of the service", "repository": "git@github.com:lyft/dbtools.git", "docs": {"navigation_depth": 4}, "credentials": true, "restricted_ssh": true, "credentials_legacy": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "mongoruntime", "command": "/code/dbtools/mongoruntime/entrypoint.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "sqs.server", "dbtools.legacy", "dbbenchmark.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "dbtools.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "terraform-checkformat", "type": "tool", "tool": "terraform.checkformat"}, {"name": "terraform-validate", "type": "tool", "tool": "terraform.validate"}], "slack": "#core-datastores-bots", "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "Datastores AWS and Mongo", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "bake_time_minutes": 1, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "bake_time_minutes": 1, "orca": [{"region": "iad"}]}], "languages": ["python", "javascript", "bash"], "image_type": "service", "service_tier": 2, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "dbtools"}], "common_settings": {"external_hosts": {"s3_iad": null}, "internal_hosts": {"distributedlock": null, "dbbenchmark": null}}}}, "logging": {"dbtools": {"fields": {"port": "keyword", "cluster_id": "keyword", "context": "keyword", "cluster_name": "keyword", "id": "keyword", "original_ts": "date", "cluster": "keyword", "server": "keyword", "shard": "keyword", "name": "keyword", "query": "boolean", "duration_ms": "long", "keyUpdates": "long", "numYields": "long", "reslen": "long", "r": "long", "nreturned": "long", "nscannedObjects": "long", "nscanned": "long", "ntoskip": "long", "ntoreturn": "long", "cursorid": "keyword", "nModified": "long", "nMatched": "long", "w": "long", "fastmod": "long", "cs033197-0": {"mongolab": {"com": "long"}}, "writeConflicts": "long", "upsert": "long", "keysExamined": "long", "docsExamined": "long", "idhack": "long"}}}, "version": "e2fc724cfda260cb18bc8449c091f55a07565eba", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "declientapi": {"name": "declientapi", "description": "API supporting mobile and web client endpoints for Driver Engagement incentives", "repository": "git@github.com:lyft/declientapi.git", "slack": "#driver-engagement-dev", "team_email": "driver-engagement@lyft.com", "pagerduty_escalation_policy": "Driver Engagement", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/declientapi", "limits": {"cpu": 2.5, "memory": "4Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "declientapi.legacy"]}, {"name": "service_group", "members": ["declientapi.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "declientapi.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "container": "declientapi.legacy", "group": "declientapi.dev", "framework": "pytest", "coverage": false, "targets": ["tests/unit"], "markers": "unit_legacy"}], "facets": [{"name": "main", "member": "declientapi.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 90}}}}, {"name": "canary", "member": "declientapi.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "declientapi"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"ats": null, "driverbonus": null, "drivernotification": null, "driverridesinfo": null, "flexibleincentives": null, "green": null, "incentiveguarantees": null, "incentiveshistory": null, "ledger": null, "localevents": null, "payapi": null, "push": null, "regions": null, "rentals": null, "ridestreaks": null, "ridechallenges": null, "ridehistory": null, "rides": null, "routes": null, "supply": null, "tcs": null, "users": null, "pricing": null, "locations": null}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}}}}, "version": "bdf42ee834f40eb5a74bc3b7b3e15b1d7424e302", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "demand": {"name": "demand", "description": "demand", "repository": "git@github.com:lyft/demand.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "limits": {"environment": {"development": {"memory": "1.5Gi", "cpu": 1.2}}}}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/demand", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "1.5Gi"}}, {"name": "aggregationworker", "command": "dumb-init -- service_venv python -m manage aggregation_worker", "workdir": "/code/demand", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "1.5Gi"}}, {"name": "kclworker", "command": "dumb-init -- /code/kcl/kcl-worker.sh", "workdir": "/code/demand", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "5Gi"}}], "facets": [{"name": "main", "member": "demand.service", "type": "service", "envoy_service": "demandk8s", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-demand-env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 6}}}}, {"name": "canary", "member": "demand.service", "type": "service", "envoy_service": "demandk8s", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-demand-env.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "aggregationworker", "member": "demand.aggregationworker", "type": "worker", "envoy_service": "demandworkers", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-demand-env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 32, "max_size": 48}}}}, {"name": "aggregationworkercanary", "member": "demand.aggregationworker", "type": "worker", "envoy_service": "demandworkers", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-demand-env.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "kcl", "member": "demand.kclworker", "type": "worker", "envoy_service": "demandkcl", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-demand-env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 13, "max_size": 13}}}}, {"name": "kclcanary", "member": "demand.kclworker", "type": "worker", "envoy_service": "demandkcl", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-demand-env.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "demand.legacy", "postgresql.server", "lyftidl.server", "locations.dev", "pricingdata.run", "regions.dev", "tcs.dev"]}], "pulldeploy_components": {"data": ["pricingdata", "regioncfgdata"]}, "configsets": ["demanddata"], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "startup", "type": "startup", "group": "demand.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "virtualenv": "service_venv", "markers": "not unit_legacy"}, {"name": "integration", "type": "execution", "group": "demand.dev", "container": "demand.legacy", "command": "make test_integration"}, {"name": "unit_legacy", "type": "execution", "container": "demand.legacy", "group": "demand.dev", "framework": "pytest", "coverage": false, "targets": ["tests/unit"], "virtualenv": "service_venv", "markers": "unit_legacy"}], "slack": "#pricing-adaptive-dep", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "adaptive-pricing@lyft.com", "upstream_tests": {"on_commit": true, "test_set": {"pricing": ["integration"]}}, "pagerduty_escalation_policy": "Adaptive-Pricing", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "aggregationworker"}, {"facet": "kcl"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "aggregationworkercanary"}, {"facet": "kclcanary"}]}, {"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "aggregationworker"}, {"facet": "kcl"}]}, [{"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "aggregationworker"}, {"facet": "kcl"}]}, {"legacy": true, "name": "production", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "aggregationworker"}, {"facet": "aggregationworkercanary"}, {"facet": "kcl"}, {"facet": "kclcanary"}]}]], "languages": ["python"], "image_type": "service", "service_tier": 1, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s", "packages": ["python-numpy", "python-pandas", "python-shapely", "default-jre-headless", "liblog4j1.2-java"]}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "demand"}, {"name": "demandworkers"}, {"name": "demandkcl"}, {"name": "demandk8s"}], "common_settings": {"local_service": {"enable_gzip": true}, "internal_hosts": {"demand": null, "supply": null, "users": null, "locations": null, "regions": null, "tcs": null}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}, "redis": {"demandmultiredis": {"port": 6380}, "demandk8smultiredis": {"port": 6381}}}}}, "logging": {"demandworkers": {"fields": {"count": "long", "region_code": "keyword", "window": "long", "demand_region": "keyword", "conversion_method": "keyword", "region": "keyword", "current_ts": "long"}}, "demandkcl": {"fields": {"expected_bucketing": "long", "original_prime_time_percent": "long"}}, "demand": {"fields": {"impl_method": "keyword", "route_name": "keyword", "demand_region": "keyword"}}}, "version": "5f588e7c33bf13cdb9b79311f8f5545977dc19bc", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "demanddata": {"name": "demanddata", "description": "Runtime configuration data for demanddata", "repository": "git@github.com:lyft/demanddata.git", "image_type": "data", "service_tier": 2, "slack": "#pricing-adaptive-dep", "team_email": "adaptive-pricing@lyft.com", "pagerduty_escalation_policy": "devnull", "languages": ["bash", "python"], "builder": {"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, "credentials": false, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/demanddata"]}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "12bb115dc6000b207d747da975847f7ca87d6f6a", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "deployapi": {"name": "deployapi", "description": "Deployment visualizations", "repository": "git@github.com:lyft/deployapi.git", "credentials": true, "languages": ["go"], "image_type": "service", "slack": "#deploys-bots", "pagerduty_escalation_policy": "Deploys", "team_email": "deploys-team@lyft.com", "service_tier": 2, "docs": {"section": "Infrastructure", "disable": true}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2igo:b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6", "packages": ["postgresql-client-10"]}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile", "sub_image": "legacy"}}, {"name": "configset", "params": {"embedded": true}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "buildah_arm64", "params": {"sub_image": "arm64"}}]}}, "containers": [{"name": "interactive", "command": "/bin/bash"}, {"name": "run", "command": "deployapi -mode=server"}, {"name": "enrichmentworker", "command": "deployapi -mode=enrichmentworker -frequency=1s"}, {"name": "ballworker", "command": "deployapi -mode=ballworker -frequency=2m"}, {"name": "rdsenrichmentworker", "command": "deployapi -mode=rdsenrichmentworker -frequency=1m"}, {"name": "complianceworker", "command": "deployapi -mode=complianceworker -frequency=1m"}, {"name": "autodeployerv2", "command": "deployapi -mode=autodeployerv2 -frequency=10s -work-timeout=120s"}, {"name": "jenkinssyncworker", "command": "deployapi -mode=jenkinssyncworker -frequency=30s -batch-size=32"}, {"name": "queueworker", "command": "deployapi -mode=queueworker"}, {"name": "rdsmanager", "command": "deployapi -mode=rdsmanager", "limits": {"cpu": 0.5, "memory": "256Mi"}}, {"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "sub_image": "legacy", "exports": [{"name": "api", "port": 9211}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "jenkins.server", "sqs.server", "deployapi.legacy", "postgresql10.dev", "redis.server"]}, {"name": "integration", "members": ["deployapi.dev", "jenkins.dev", "dynamodb.viewer", "team.dev"]}, {"name": "inttest", "members": ["deployapi.dev", "postgresql10.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "deployapi.dev"}, {"name": "unit", "type": "jailed", "framework": "go", "coverage_options": {"omit": "(main.go|pkg/postgres/pgsql/query_adapter.go|mock_|mocks|internal/mocktime|idlcode|cmd/server/server|pkg/postgres/store|pkg/postgres/schema.go|cmd/rdsenrichmentworker|pkg/jenkins/jenkins_transport.go|pkg/flush/flush|pkg/team/team|pkg/postgres/migrations/migrate_generated.go)"}}, {"name": "integration", "type": "execution", "framework": "go", "group": "deployapi.inttest", "container": "deployapi.legacy", "coverage_options": {"omit": "(main.go|pkg/postgres/pgsql/query_adapter.go|mock_|mocks|internal/mocktime|idlcode|cmd/server/server|pkg/postgres/store|pkg/postgres/schema.go|cmd/rdsenrichmentworker|pkg/jenkins/jenkins_transport.go|pkg/flush/flush|pkg/team/team|pkg/postgres/migrations/migrate_generated.go)"}}, {"name": "configset", "type": "tool", "tool": "configsettest.test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "configsets": ["deployapi"], "facets": [{"name": "main", "member": "deployapi.run", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 3, "max_size": 3}}}}, {"name": "canary", "member": "deployapi.run", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "jenkinssyncworker", "member": "deployapi.jenkinssyncworker", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "enrichmentworker", "member": "deployapi.enrichmentworker", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "ballworker", "member": "deployapi.ballworker", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "rdsenrichmentworker", "member": "deployapi.rdsenrichmentworker", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "complianceworker", "member": "deployapi.complianceworker", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "autodeployer", "member": "deployapi.autodeployerv2", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 2, "max_size": 2}, "production": {"min_size": 2, "max_size": 2}}}}, {"name": "queueworker", "member": "deployapi.queueworker", "type": "cron", "schedule": "*/2 * * * *"}, {"name": "rdsmanager", "member": "deployapi.rdsmanager", "type": "batch"}, {"name": "orca", "type": "legacyorca", "member": "deployapi.legacy"}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "17:00 America/Los_Angeles"}, "deploy": [{"name": "staging-orca", "automatic": true, "legacy": false, "targets": [{"facet": "orca"}], "kubernetes": {"enabled": true, "mode": "synth"}, "orca": []}, {"name": "staging-cron", "legacy": false, "automatic": true, "targets": [{"facet": "queueworker"}], "kubernetes": {"enabled": true, "mode": "synth"}, "orca": []}, {"name": "staging", "legacy": false, "automatic": true, "targets": [{"facet": "main"}, {"facet": "enrichmentworker"}, {"facet": "ballworker"}, {"facet": "rdsmanager"}, {"facet": "rdsenrichmentworker"}, {"facet": "autodeployer"}, {"facet": "complianceworker"}, {"facet": "jenkinssyncworker"}], "kubernetes": {"enabled": true, "mode": "mixed", "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "cluster_labels": {"cluster.lyft.net/role": "deploys"}}, "orca": []}, {"name": "production-orca", "legacy": false, "targets": [{"facet": "orca"}], "kubernetes": {"enabled": true, "mode": "synth"}, "orca": []}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true, "mode": "mixed", "path": "staging", "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "cluster_labels": {"cluster.lyft.net/role": "deploys"}}, "orca": []}, {"name": "production-cron", "legacy": false, "targets": [{"facet": "queueworker"}], "kubernetes": {"enabled": true, "mode": "synth"}, "orca": []}, {"name": "production", "automatic": true, "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "enrichmentworker"}, {"facet": "ballworker"}, {"facet": "rdsenrichmentworker"}, {"facet": "rdsmanager"}, {"facet": "autodeployer"}, {"facet": "complianceworker"}, {"facet": "jenkinssyncworker"}], "kubernetes": {"enabled": true, "mode": "mixed", "path": "prod", "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "cluster_labels": {"cluster.lyft.net/role": "deploys"}}, "orca": []}], "envoy": {"profile": "go", "settings": {"services": [{"name": "deployapi"}], "common_settings": {"internal_hosts": {"team": null, "family": null}, "external_hosts": {"dynamodb_iad": null, "sqs_iad": null}, "redis": {"deployapimultiredis": {"port": 6380, "op_timeout_ms": 400}}}}}, "logging": {"deployapi": {"fields": {"error": "text", "message_id": "keyword", "num_commits": "integer", "project": "keyword", "reason": "keyword", "record_id": "keyword", "revision": "keyword", "service": "keyword", "duration": "double", "env": "keyword", "granularity": "keyword", "lookback": "integer", "numProjects": "integer", "projects": "text"}}}, "version": "e968f6eee15d52f3e2eec972e009cf00caf7e089", "images": [{"parent": {"name": "s2igo", "version": "b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": "legacy"}, {"parent": {"name": "scratch", "version": "", "sub_image": "", "external": true}, "sub_image": "data"}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2igo", "version": "b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6", "sub_image": null, "external": false}}, "deploybot": {"name": "deploybot", "description": "A slackbot for working with deployments", "repository": "git@github.com:lyft/deploybot.git", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}, {"name": "configset", "params": {"embedded": true}}]}}, "containers": [{"name": "service", "command": "service_venv gunicorn app_wsgi:app --workers=2 -k aiohttp.worker.GunicornWebWorker -c gunicorn.conf", "workdir": "/code/deploybot", "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["curl", "-m", 1, "--unix-socket", "/run/gunicorn/gunicorn.sock", "http://localhost/healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}}, {"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 80}]}], "configsets": ["deploybot"], "facets": [{"name": "main", "member": "deploybot.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 3, "max_size": 9}}}}, {"name": "canary", "member": "deploybot.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "groups": [{"name": "dev", "members": ["control.dev", "omnibot.dev", "deploybot.legacy", "redis.dev"]}, {"name": "integration", "members": ["deploybot.dev", "deployapi.integration"]}], "slack": "#deploys-bots", "team_email": "deploys-team@lyft.com", "pagerduty_escalation_policy": "Deploys", "tests": [{"name": "startup", "type": "startup", "group": "deploybot.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "configset", "type": "tool", "tool": "configsettest.test"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "cluster_labels": {"cluster.lyft.net/role": "deploys"}}, "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "cluster_labels": {"cluster.lyft.net/role": "deploys"}}, "targets": [{"facet": "canary"}]}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "cluster_labels": {"cluster.lyft.net/role": "deploys"}}, "targets": [{"facet": "canary"}, {"facet": "main"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "deploybot"}], "common_settings": {"internal_hosts": {"deployapi": null, "team": null}, "external_hosts": {"dynamodb_iad": null}, "redis": {"deploybotmultiredis": {"port": 6380, "op_timeout_ms": 400}}}}}, "version": "fb7822097785d9953d293ae9e163f641f5b5927d", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "py37", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "scratch", "version": "", "sub_image": "", "external": true}, "sub_image": "data"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "deploysentry": {"name": "deploysentry", "description": "deploysentry", "repository": "git@github.com:lyft/deploysentry.git", "image_type": "service", "service_tier": 3, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "languages": ["go"], "credentials": true, "containers": [{"name": "service", "command": "dumb-init -- deploysentry", "workdir": "/go/src/github.com/lyft/deploysentry", "sub_image": "k8s"}, {"name": "cron", "command": "dumb-init -- deploysentry -run-cron=true", "workdir": "/go/src/github.com/lyft/deploysentry", "sub_image": "k8s"}, {"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "web", "port": 9211}]}], "facets": [{"name": "main", "member": "deploysentry.service", "type": "service", "autoscaling": {"min_size": 3, "max_size": 5}}, {"name": "cronprocess", "member": "deploysentry.cron", "type": "cron", "schedule": "* * * * *"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "deploysentry.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "deploysentry.dev"}, {"name": "unit", "type": "jailed", "command": "make tests"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#deploys-bots", "team_email": "deploys-team@lyft.com", "pagerduty_escalation_policy": "Deploys", "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "17:00 America/Los_Angeles"}, "deploy": [{"name": "staging-cron", "legacy": false, "automatic": true, "targets": [{"facet": "cronprocess"}], "kubernetes": {"enabled": true, "mode": "synth"}, "orca": []}, {"name": "staging", "automatic": true, "legacy": false, "kubernetes": {"enabled": true, "mode": "mixed", "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "cluster_labels": {"cluster.lyft.net/role": "deploys"}}, "targets": [{"facet": "main"}], "orca": [{"region": "iad"}]}, {"name": "production-cron", "legacy": false, "targets": [{"facet": "cronprocess"}], "kubernetes": {"enabled": true, "mode": "synth"}, "orca": []}, {"name": "production", "automatic": true, "legacy": false, "kubernetes": {"enabled": true, "mode": "mixed", "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "cluster_labels": {"cluster.lyft.net/role": "deploys"}}, "targets": [{"facet": "main"}], "orca": [{"region": "iad"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "deploysentry"}], "common_settings": {"internal_hosts": {"team": null}, "external_hosts": {"dynamodb_iad": null}}}}, "logging": {"deploysentry": {"fields": {"revision": "keyword", "url": "text", "path": "keyword", "params": {"buildId": "integer", "project": "text", "upstream": "text"}}}}, "version": "5759384d0fe1304a53f7984613cfdfe267b21d32", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "deployview": {"name": "deployview", "description": "Deployment visualizations", "credentials": true, "repository": "git@github.com:lyft/deployview.git", "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2igo:fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "packages": ["nodejs", "npm", "git"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "containers": [{"name": "interactive", "command": "/bin/bash"}, {"name": "service", "command": "deployview", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 5, "timeout_seconds": 5}}, {"name": "run", "command": "dumb-init npm run start", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["deployapi.dev", "deployview.run"]}], "languages": ["javascript", "go"], "image_type": "service", "docs": {"section": "Infrastructure"}, "slack": "#deploys-bots", "team_email": "deploys-team@lyft.com", "pagerduty_escalation_policy": "Deploys", "service_tier": 2, "facets": [{"name": "main", "member": "deployview.service", "type": "service", "sidecars": ["statsd", "heka", "fluentbit", "envoy"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 5}}}}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "17:00 America/Los_Angeles"}, "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}], "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "mode": "mixed", "path": "staging", "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "cluster_labels": {"cluster.lyft.net/role": "deploys"}}}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "mode": "mixed", "path": "prod", "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "cluster_labels": {"cluster.lyft.net/role": "deploys"}}}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "npm run test:unit"}], "envoy": {"profile": "go", "settings": {"services": [{"name": "deployview"}]}}, "version": "6310e90ff4e51445cf347fac06e8bfa139655e57", "images": [{"parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}}, "destination": {"name": "destination", "description": "Service that powers Trending Destination Feature, return meta information of a location from various of data sources.", "repository": "git@github.com:lyft/destination.git", "slack": "#destinations-eng", "team_email": "social-eng@lyft.com", "pagerduty_escalation_policy": "Destinations", "notification_overrides": {"deploy": {"slack": "#destinations-eng", "environments": ["production", "canary", "staging"]}, "deploy_failure": {"slack": "#destinations-eng"}, "test_failure": {"slack": "#destinations-eng", "email": "social-eng@lyft.com", "environments": ["production"]}, "master_failure": {"slack": "#destinations-eng"}, "pr_merge": {"slack": "#destinations-eng"}, "pr_open": {"slack": "#destinations-eng"}}, "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": false, "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093", "packages": ["libspatialindex-c3", "libgeos-c1"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/destination", "limits": {"cpu": 1, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}], "logging": {"format": "pythonkv"}}, {"name": "job", "command": "dumb-init -- service_venv python manage.py ingest_ride_events --file /code/destination/archive/sfo_sep_2019_import.csv -n 50 -m 10", "workdir": "/code/destination", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "256Mi"}}, {"name": "trendingridecountaggregator", "command": "dumb-init -- service_venv python manage.py aggregate_ride_counts --namespace trending", "workdir": "/code/destination", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "256Mi"}}, {"name": "lastmonthridecountaggregator", "command": "dumb-init -- service_venv python manage.py aggregate_ride_counts --namespace last_month", "workdir": "/code/destination", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "256Mi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "destination.legacy", "redis.dev"]}, {"name": "service_group", "members": ["destination.legacy"]}, {"name": "integration", "members": ["destination.dev", "ridelocations.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "destination.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "destination.integration", "container": "destination.legacy", "command": "service_venv pytest --junit-xml=build/integration.xml tests/integration"}], "facets": [{"name": "main", "member": "destination.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 10}}}}, {"name": "canary", "member": "destination.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}, {"name": "cronjob", "member": "destination.job", "type": "cron", "schedule": "0 * * * *"}, {"name": "crontrendingridecountaggregator", "member": "destination.trendingridecountaggregator", "type": "cron", "schedule": "*/5 * * * *"}, {"name": "cronlastmonthridecountaggregator", "member": "destination.lastmonthridecountaggregator", "type": "cron", "schedule": "0 14 * * *"}], "deploy": [{"name": "staging", "automatic": true, "bake_time_minutes": 1, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "cronjob"}, {"facet": "crontrendingridecountaggregator"}, {"facet": "cronlastmonthridecountaggregator"}]}, {"name": "canary", "bake_time_minutes": 1, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "bake_time_minutes": 1, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "bake_time_minutes": 1, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "crontrendingridecountaggregator"}, {"facet": "cronlastmonthridecountaggregator"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "destination"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"regions": null, "tcs": null, "ridelocations": null, "ridesapi": null, "coupons": null}, "external_hosts": {"kinesis_iad": null, "dynamodb_iad": null}, "redis_clusters": {"destination": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "logging": {"destination": {"fields": {"key": "keyword", "name": "keyword", "size": "keyword", "user_id": "keyword", "destination_region": "keyword", "ride_id": "long", "destination_place_name": "keyword", "destination_routable_address": "keyword", "payer_id": "long"}}}, "version": "d5385627a03449503167c5bd98beca555050bca0", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "destinationsandbox": {"name": "destinationsandbox", "description": "experiment service for destination", "repository": "git@github.com:lyft/destinationsandbox.git", "slack": "#acq-incentives", "team_email": "acq-incentives-referrals@lyft.com", "pagerduty_escalation_policy": "Referrals Team", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "notification_overrides": {"deploy": {"slack": "#destination-pr", "environments": ["production", "canary", "staging"]}, "deploy_failure": {"slack": "#destination-pr"}, "test_failure": {"slack": "#destination-pr", "email": "acq-incentives-referrals@lyft.com", "environments": ["production"]}, "master_failure": {"slack": "#destination-pr"}, "pr_merge": {"slack": "#destination-pr"}, "pr_open": {"slack": "#destination-pr"}}, "credentials": false, "pulldeploy_components": {"data": ["regioncfgdata"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:0c837dfacbd7f05fcf198360f85e539c2ae9b297", "packages": ["libspatialindex-dev", "libgeos-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:b54507db7d1876e36dddb77ccb73610775ac0477", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/destinationsandbox", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "destinationsandbox.legacy"]}, {"name": "service_group", "members": ["destinationsandbox.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "destinationsandbox.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "destinationsandbox.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "destinationsandbox.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "bake_time_minutes": 1, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "bake_time_minutes": 1, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "bake_time_minutes": 1, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "bake_time_minutes": 1, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "destinationsandbox"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"regions": null}}}}, "version": "19ba23a4a2a0591e807aadcd3a839b8e0706fd8c", "images": [{"parent": {"name": "opsbase", "version": "0c837dfacbd7f05fcf198360f85e539c2ae9b297", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "b54507db7d1876e36dddb77ccb73610775ac0477", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "0c837dfacbd7f05fcf198360f85e539c2ae9b297", "sub_image": null, "external": false}}, "detaccumulo1": {"name": "detaccumulo1", "description": "accumulo cluster inside k8s", "repository": "git@github.com:lyft/detaccumulo1.git", "image_type": "tool", "service_tier": 2, "team_email": "security-detection@lyft.com", "slack": "#security", "pagerduty_escalation_policy": "Detection Primary", "notification_overrides": {"deploy": {"slack": "#tnw-bots"}, "pr_merge": {"slack": "#tnw-bots"}}, "languages": ["java"], "credentials": true, "restricted_ssh": true, "builder": {"name": "docker_build", "params": {"buildargs": ["ZOOKEEPER_VERSION=3.5.6", "ACCUMULO_VERSION=1.9.3", "GAFFER_VERSION=1.10.1", "KORYPHE_VERSION=1.8.1"]}}, "containers": [{"name": "main", "command": "/opt/accumulo/bin/start-all-dev.sh", "workdir": "/opt/accumulo", "limits": {"cpu": 1, "memory": "2048Mi"}, "start_time": 300, "exports": [{"name": "master", "port": 9999}, {"name": "gc", "port": 9998}, {"name": "monitor", "port": 9995}, {"name": "tracer", "port": 12234}, {"name": "replication", "port": 10002}, {"name": "coordinator", "port": 10001}, {"name": "tserver", "port": 9997}, {"name": "log4j", "port": 4560}]}], "groups": [{"name": "dev", "members": ["control.dev", "dethdfs3.dev", "detzookeeper3.dev", "detaccumulo1.main"]}], "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}, {"name": "production", "automatic": false, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "version": "2743b9f2e4c152d7b917cffee43fe99aebf6bdc8", "images": [{"parent": {"name": "dethdfs3", "version": "145891b98c5eee36c795300440cc52582a5a3c82", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "dethdfs3", "version": "145891b98c5eee36c795300440cc52582a5a3c82", "sub_image": null, "external": false}}, "detargeting": {"name": "detargeting", "description": "Clone this repo to start using the Model Builder Platform!", "repository": "git@github.com:lyft/detargeting.git", "image_type": "flyteworkflow", "languages": ["python"], "credentials": true, "containers": [{"name": "legacy", "command": "/bin/bash", "provision": "echo \"What hath god wrought\""}, {"name": "jupyter", "command": "env PYTHONPATH=$PYTHONPATH:/code/detargeting service_venv start_jupyter.sh 8080 /code/detargeting/notebooks", "exports": [{"name": "jupyter", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "detargeting.legacy"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "detargeting.dev", "container": "detargeting.legacy", "command": "make release_register_current_env"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [[{"name": "development", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_development"}], [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_staging"}], [{"name": "production", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_production"}]], "slack": "#market-automation-bots", "pagerduty_escalation_policy": "DE Conversion", "team_email": "de-conversion@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "version": "a808de34004ec8555edc81dce606da6c1f232584", "images": [{"parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}}, "detargetingapi": {"name": "detargetingapi", "description": "Service for exposing incentives targeting recommendations.", "repository": "git@github.com:lyft/detargetingapi.git", "image_type": "service", "service_tier": 2, "slack": "#market-automation-bots", "team_email": "de-conversion@lyft.com", "pagerduty_escalation_policy": "Driver Engagement", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "detargetingapi.legacy", "sqs.server", "redis.dev"]}, {"name": "integration", "members": ["detargetingapi.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "detargetingapi.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "detargetingapi.integration", "container": "detargetingapi.legacy", "command": "make test_integration", "reports": {"junit": "build/local_integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "bake_time_minutes": 5, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "bake_time_minutes": 5, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "detargetingapi"}, {"name": "detargetingapibatch", "traffic_type": "egress_only"}, {"name": "detargetingapiworkers", "traffic_type": "egress_only"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "internal_hosts": {"detargetingapi": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "mailer": null, "regions": null}}}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "logging": {"detargetingapibatch": {"fields": {"pay_period": "date", "execution_id": "keyword", "region": "keyword", "incentive_type": "keyword", "warning_msgs": "keyword", "recommendation_id": "keyword", "budget_amount_minor": "long", "time_categories": "keyword", "calculated_at_ms": "keyword", "id": "keyword", "budget_currency": "keyword", "run_date": "date", "regions": "keyword", "budget_minor": "long"}}}, "version": "01f34ca822871db344a6124c959994d1e7e823b4", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "detectionesloader": {"name": "detectionesloader", "repository": "git@github.com:lyft/detectionesloader.git", "description": "Service to receive detection observations and load them into the detection ES", "service_tier": 2, "team_email": "security-detection@lyft.com", "pagerduty_escalation_policy": "Detection Primary", "slack": "#security", "notification_overrides": {"deploy": {"slack": "#tnw-bots"}, "pr_merge": {"slack": "#tnw-bots"}}, "image_type": "service", "languages": ["go"], "credentials": true, "restricted_ssh": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit", "sources": [{"name": "confluent", "source": "deb https://packages.confluent.io/deb/5.3 stable main", "keyid": 41468433}], "packages": ["librdkafka-dev", "pkg-config", "protobuf-compiler"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2igo:fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sources": [{"name": "confluent", "source": "deb https://packages.confluent.io/deb/5.3 stable main", "keyid": 41468433}], "packages": ["librdkafka-dev", "pkg-config", "protobuf-compiler"]}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- detectionesloader", "workdir": "/code/detectionesloader", "limits": {"cpu": 1, "memory": "512Mi"}, "start_time": 600}], "groups": [{"name": "dev", "members": ["kafka.server", "detectionesloader.service"]}], "tests": [{"name": "startup", "type": "startup", "autotrigger": false, "group": "detectionesloader.dev"}, {"name": "unit", "type": "jailed", "command": "make test"}, {"name": "integration", "type": "execution", "group": "detectionesloader.dev", "container": "detectionesloader.legacy", "command": "make integration", "autotrigger": false}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "detectionesloader.service", "type": "worker", "sidecars": ["statsd"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 10}}}}, {"name": "canary", "member": "detectionesloader.service", "sidecars": ["statsd"], "type": "worker", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}, {"name": "canary", "legacy": false, "automatic": false, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "version": "2b3c7a1a885dab0791c69ee0ab7101ee25f697ce", "images": [{"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}}, "detectionfeatureextract": {"name": "detectionfeatureextract", "description": "Extract features from windowed data", "repository": "git@github.com:lyft/detectionfeatureextract.git", "slack": "#security-detection", "team_email": "security-detection@lyft.com", "pagerduty_escalation_policy": "Detection Primary", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:49dd0dfae9cc8fb0ead221682d5a4e774b7fc089"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:a06f16257c38c4deb0b2cd2a4ee91727cfaa8c6a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.5961d27671714f73f732dabc38eb121465ac8330", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "extractor", "command": "dumb-init -- service_venv flask extraction start -c aggsum_extractor -n 4 -t stalking_windows -p features", "workdir": "/code/detectionfeatureextract", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "detectionfeatureextract.legacy"]}, {"name": "service_group", "members": ["detectionfeatureextract.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "detectionfeatureextract.dev"}, {"name": "unit", "type": "jailed", "command": "service_venv pytest --cov=app --junitxml=build/unit.xml --cov-report=xml tests/unit", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "extraction", "member": "detectionfeatureextract.extractor", "type": "worker", "canary": true, "sidecars": ["statsd", "envoy"], "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "canary", "automatic": false, "legacy": false, "targets": [{"facet": "extraction"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "envoy": {"profile": "python", "settings": {"services": [{"name": "detectionfeatureextract"}]}}, "version": "b515d41b741ccd017ab157f432c95a2ed1225b04", "images": [{"parent": {"name": "opsbase", "version": "49dd0dfae9cc8fb0ead221682d5a4e774b7fc089", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "a06f16257c38c4deb0b2cd2a4ee91727cfaa8c6a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "5961d27671714f73f732dabc38eb121465ac8330", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "49dd0dfae9cc8fb0ead221682d5a4e774b7fc089", "sub_image": null, "external": false}}, "detectionpredictor": {"name": "detectionpredictor", "description": "A service for running detection ML predictions on feature data", "repository": "git@github.com:lyft/detectionpredictor.git", "slack": "#security-detection", "team_email": "security-detection@lyft.com", "pagerduty_escalation_policy": "Detection Primary", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:a5f506e642e87706bc86124d006587f56a81bc83"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:011ed95866f28687724361a0ec4fbb85f52ef10f", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.53c1fcd0802a76d61805f43de43b8c21b4dda361", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "stalking", "command": "dumb-init -- service_venv flask prediction start -c stalking -t features", "workdir": "/code/detectionfeatureextract", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "detectionpredictor.legacy"]}, {"name": "service_group", "members": ["detectionpredictor.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "detectionpredictor.dev"}, {"name": "unit", "type": "jailed", "command": "service_venv pytest --cov=app --junitxml=build/unit.xml --cov-report=xml tests/unit", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "stalking", "member": "detectionpredictor.stalking", "type": "worker", "canary": true, "sidecars": ["statsd", "envoy"], "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "canary", "automatic": false, "legacy": false, "targets": [{"facet": "stalking"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "envoy": {"profile": "python", "settings": {"services": [{"name": "detectionpredictor"}]}}, "version": "80412abfaec2b54ef96558b9694c469f9a3a8c63", "images": [{"parent": {"name": "opsbase", "version": "a5f506e642e87706bc86124d006587f56a81bc83", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "011ed95866f28687724361a0ec4fbb85f52ef10f", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "53c1fcd0802a76d61805f43de43b8c21b4dda361", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "a5f506e642e87706bc86124d006587f56a81bc83", "sub_image": null, "external": false}}, "detectionriskalerts": {"name": "detectionriskalerts", "repository": "git@github.com:lyft/detectionriskalerts.git", "description": "Service to poll the riskgraph for changes to risk and raise alerts", "service_tier": 2, "team_email": "security-detection@lyft.com", "pagerduty_escalation_policy": "Detection Primary", "slack": "#security", "notification_overrides": {"deploy": {"slack": "#tnw-bots"}, "pr_merge": {"slack": "#tnw-bots"}}, "image_type": "service", "languages": ["go"], "credentials": true, "restricted_ssh": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:go.0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2igo:fa0c4921e2e8481015324ac1a2b841013a1a2fdf"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "worker", "command": "detectionriskalerts", "workdir": "/code/detectionriskalerts", "limits": {"cpu": 1, "memory": "2Gi"}, "start_time": 100}], "groups": [{"name": "dev", "members": ["detectionriskgraph.dev", "detectionriskalerts.legacy"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "coverage", "type": "jailed", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}], "facets": [{"name": "main", "member": "detectionriskalerts.worker", "type": "worker", "envoy_service": "detectionriskalertsworker", "sidecars": ["statsd", "envoy-worker"], "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}], "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "envoy": {"profile": "go", "settings": {"common_settings": {"internal_hosts": {"detectionriskgraph": null}}, "services": [{"name": "detectionriskalertsworker", "traffic_type": "egress_only"}]}}, "version": "2c92b9912260e84d13547d568844313fe732e5b1", "images": [{"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "go", "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}}, "detectionriskgraph": {"name": "detectionriskgraph", "description": "Summary graph to describe risk", "repository": "git@github.com:lyft/detectionriskgraph.git", "team_email": "security-detection@lyft.com", "service_tier": 2, "image_type": "service", "slack": "#security", "pagerduty_escalation_policy": "Detection Primary", "notification_overrides": {"deploy": {"slack": "#tnw-bots"}, "pr_merge": {"slack": "#tnw-bots"}}, "languages": ["java"], "credentials": true, "restricted_ssh": true, "builder": {"name": "docker_build"}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "/entrypoint.sh", "exports": [{"name": "api", "port": 8080}], "limits": {"cpu": 2.5, "memory": "2Gi"}, "liveness_probe": {"failure_threshold": 3, "http_get": {"path": "/rest/v2/graph/status", "port": 8080, "scheme": "HTTP"}, "initial_delay_seconds": 45, "period_seconds": 10, "success_threshold": 1, "timeout_seconds": 1}, "readiness_probe": {"failure_threshold": 3, "http_get": {"path": "/rest/v2/graph/status", "port": 8080, "scheme": "HTTP"}, "initial_delay_seconds": 15, "period_seconds": 5, "success_threshold": 1, "timeout_Seconds": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "detectionriskgraph.service", "detaccumulo1.dev"]}], "facets": [{"name": "main", "member": "detectionriskgraph.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls"], "sidecars": ["statsd", "envoy"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 10}}}}, {"name": "canary", "member": "detectionriskgraph.service", "type": "service", "sidecars": ["statsd", "envoy"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}, {"name": "canary", "automatic": false, "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}, {"name": "production", "automatic": false, "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "envoy": {"profile": "go", "settings": {"services": [{"name": "detectionriskgraph"}], "common_settings": {}}}, "version": "b339473e081666d210d9121e036f4576c9d5f377", "images": [{"parent": {"name": "detgaffer2", "version": "b40c245e36b6cdb6b2aa97c212fa8fe8773f0c8c", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "detgaffer2", "version": "b40c245e36b6cdb6b2aa97c212fa8fe8773f0c8c", "sub_image": null, "external": false}}, "detectionriskgraphloader": {"name": "detectionriskgraphloader", "repository": "git@github.com:lyft/detectionriskgraphloader.git", "description": "Service to receive detection observations and load them into the detectionriskgraph", "service_tier": 2, "team_email": "security-detection@lyft.com", "pagerduty_escalation_policy": "Detection Primary", "slack": "#security", "notification_overrides": {"deploy": {"slack": "#tnw-bots"}, "pr_merge": {"slack": "#tnw-bots"}}, "image_type": "service", "languages": ["go"], "credentials": true, "restricted_ssh": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/precommit:go.4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit", "sources": [{"name": "confluent", "source": "deb https://packages.confluent.io/deb/5.3 stable main", "keyid": 41468433}], "packages": ["librdkafka-dev", "pkg-config", "protobuf-compiler"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2igo:fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sources": [{"name": "confluent", "source": "deb https://packages.confluent.io/deb/5.3 stable main", "keyid": 41468433}], "packages": ["librdkafka-dev", "pkg-config", "protobuf-compiler"]}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "detectionriskgraphloader", "workdir": "/code/detectionriskgraphloader", "limits": {"cpu": 1, "memory": "512Mi"}, "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "kafka.server", "detectionriskgraph.dev", "detectionriskgraphloader.service"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "detectionriskgraphloader.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls"], "sidecars": ["statsd", "envoy"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 10}}}}, {"name": "canary", "member": "detectionriskgraphloader.service", "type": "service", "sidecars": ["statsd", "envoy"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "envoy": {"profile": "go", "settings": {"common_settings": {"internal_hosts": {"detectionriskgraph": null}}, "services": [{"name": "detectionriskgraphloader"}]}}, "version": "9cc257d17982499bb20383582ef877ce4034e914", "images": [{"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "go", "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}}, "detectionwindower": {"name": "detectionwindower", "description": "A utility for generating time-windowed batches of events from a stream", "repository": "git@github.com:lyft/detectionwindower.git", "slack": "#security-detection", "team_email": "security-detection@lyft.com", "pagerduty_escalation_policy": "Detection Primary", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:68547afa9d7dbf0c41d37c8e1d4661607d6f674b"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:dc86039c4191edb4dd5908d5a1b36c56794c46a1", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.c749320158a68b1cb4bb944264033635ec49d2fa", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "windower", "command": "dumb-init -- service_venv flask windower start -p stalking_windows -c audit_event_log -g windower_audit", "workdir": "/code/detectionwindower", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "1Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "detectionwindower.legacy"]}, {"name": "service_group", "members": ["detectionwindower.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "detectionwindower.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "windowing", "member": "detectionwindower.windower", "type": "worker", "sidecars": ["statsd", "envoy"], "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "windowingcanary", "member": "detectionwindower.windower", "type": "worker", "canary": true, "sidecars": ["statsd", "envoy"], "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "windowing"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}, {"name": "canary", "automatic": false, "legacy": false, "targets": [{"facet": "windowingcanary"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}, {"name": "production", "automatic": false, "legacy": false, "targets": [{"facet": "windowing"}, {"facet": "windowingcanary"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "envoy": {"profile": "python", "settings": {"services": [{"name": "detectionwindower"}]}}, "version": "8032d80615413efec1e7d8061901a175293c3a89", "images": [{"parent": {"name": "opsbase", "version": "68547afa9d7dbf0c41d37c8e1d4661607d6f674b", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dc86039c4191edb4dd5908d5a1b36c56794c46a1", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c749320158a68b1cb4bb944264033635ec49d2fa", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "68547afa9d7dbf0c41d37c8e1d4661607d6f674b", "sub_image": null, "external": false}}, "detector": {"name": "detector", "description": "Service that matches documents against boolean expressions", "repository": "git@github.com:lyft/detector.git", "team_email": "security-detection@lyft.com", "service_tier": 2, "image_type": "service", "slack": "#security", "pagerduty_escalation_policy": "Detection Primary", "notification_overrides": {"deploy": {"slack": "#tnw-bots"}, "pr_merge": {"slack": "#tnw-bots"}}, "languages": ["go"], "credentials": true, "restricted_ssh": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/precommit:go.f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit", "sources": [{"name": "confluent", "source": "deb https://packages.confluent.io/deb/5.3 stable main", "keyid": 41468433}], "packages": ["librdkafka-dev", "pkg-config", "protobuf-compiler"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2igo:fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sources": [{"name": "confluent", "source": "deb https://packages.confluent.io/deb/5.3 stable main", "keyid": 41468433}], "packages": ["librdkafka-dev", "pkg-config", "protobuf-compiler"]}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "static", "command": "dumb-init -- detector static", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "dyanamicprocessor", "command": "dumb-init -- detector dynamic --raft-voter=false", "limits": {"cpu": 2, "memory": "512Mi"}}, {"name": "dyanamicmaster", "command": "dumb-init -- detector dynamic --raft-voter=true", "limits": {"cpu": 2, "memory": "512Mi"}}], "groups": [{"name": "dev", "members": ["control.dev", "kafka.server", "detector.static"]}], "tests": [{"name": "startup", "type": "startup", "group": "detector.dev"}, {"name": "unit", "type": "jailed", "autotrigger": false, "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "coverage", "type": "jailed", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}], "facets": [{"name": "static", "member": "detector.static", "type": "worker", "sidecars": ["statsd"], "watch_remote_files": {"staging": [{"name": "rulefiles", "s3_url": "s3://detectorrules-staging/touch.txt"}], "production": [{"name": "rulefiles", "s3_url": "s3://detectorrules-production/touch.txt"}]}, "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 10}}}}, {"name": "staticcanary", "member": "detector.static", "type": "worker", "sidecars": ["statsd"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "static"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}, {"name": "canary", "automatic": false, "legacy": false, "targets": [{"facet": "staticcanary"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}, {"name": "production", "automatic": false, "legacy": false, "targets": [{"facet": "static"}, {"facet": "staticcanary"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "envoy": {"profile": "go", "settings": {"common_settings": {}, "services": [{"name": "detectordynamic"}]}}, "version": "f0bbfcf1146ed0301fbe111553ad8ee6fcd20933", "images": [{"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "go", "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}}, "detgaffer2": {"name": "detgaffer2", "description": "large scale distributed graph database", "repository": "git@github.com:lyft/detgaffer2.git", "builder": {"name": "docker_build", "params": {"buildargs": ["GAFFER_VERSION=1.9.1"]}}, "slack": "#tnw-bots", "team_email": "dudell@lyft.com", "service_tier": 3, "image_type": "tool", "deploy": [{"name": "production", "automatic": false, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "version": "af29c30a761ef2fb6cfcf747acdced77f4d30d48", "images": [{"parent": {"name": "java8", "version": "3a0ee9507cdad0759f69cf8758b134e1cee629cd", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "3a0ee9507cdad0759f69cf8758b134e1cee629cd", "sub_image": null, "external": false}}, "dethdfs3": {"name": "dethdfs3", "description": "hdfs cluster inside k8s", "repository": "git@github.com:lyft/dethdfs3.git", "image_type": "tool", "service_tier": 2, "team_email": "security-detection@lyft.com", "slack": "#security", "pagerduty_escalation_policy": "Detection Primary", "notification_overrides": {"deploy": {"slack": "#tnw-bots"}, "pr_merge": {"slack": "#tnw-bots"}}, "languages": ["java"], "credentials": false, "restricted_ssh": true, "builder": {"name": "docker_build", "params": {"buildargs": ["HADOOP_VERSION=3.2.1"]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "nn", "command": "/entrypoint.sh /opt/hadoop/sbin/start-nn.sh", "workdir": "/opt/hadoop", "limits": {"cpu": 1, "memory": "1024Mi"}, "exports": [{"name": "dfs", "port": 9000}, {"name": "webhdfs", "port": 9870}], "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/", "port": 9870}, "initial_delay_seconds": 5, "timeout_seconds": 2}, "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/", "port": 9870}, "initial_delay_seconds": 10, "timeout_seconds": 2}, "start_time": 60}, {"name": "dn1", "command": "/entrypoint.sh /opt/hadoop/sbin/start-dn.sh", "workdir": "/opt/hadoop", "limits": {"cpu": 1, "memory": "1024Mi"}, "liveness_probe": {"exec_probe": {"command": ["/opt/hadoop/sbin/check-dn-status.sh"]}, "initial_delay_seconds": 60, "period_seconds": 10, "timeout_seconds": 2}, "readiness_probe": {"exec_probe": {"command": ["/opt/hadoop/sbin/check-dn-status.sh"]}, "initial_delay_seconds": 60, "period_seconds": 5, "timeout_seconds": 2}, "start_time": 60}, {"name": "dn2", "command": "/entrypoint.sh /opt/hadoop/sbin/start-dn.sh", "workdir": "/opt/hadoop", "limits": {"cpu": 1, "memory": "1024Mi"}, "liveness_probe": {"exec_probe": {"command": ["/opt/hadoop/sbin/check-dn-status.sh"]}, "initial_delay_seconds": 60, "period_seconds": 10, "timeout_seconds": 2}, "readiness_probe": {"exec_probe": {"command": ["/opt/hadoop/sbin/check-dn-status.sh"]}, "initial_delay_seconds": 60, "period_seconds": 5, "timeout_seconds": 2}, "start_time": 60}], "groups": [{"name": "dev", "members": ["control.dev", "dethdfs3.nn", "dethdfs3.dn1", "dethdfs3.dn2"]}], "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}, {"name": "production", "automatic": false, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "version": "145891b98c5eee36c795300440cc52582a5a3c82", "images": [{"parent": {"name": "java8", "version": "0055f9559b7d9c0c8ad4ab7ff4d3e5a710420800", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "0055f9559b7d9c0c8ad4ab7ff4d3e5a710420800", "sub_image": null, "external": false}}, "detja3": {"name": "detja3", "description": "Security Detection analytic to create JA3 signatures for events", "repository": "git@github.com:lyft/detja3.git", "slack": "#tnw-bots", "image_type": "tool", "languages": ["go"], "builder": {"name": "s2i", "params": {"builder": "lyft/s2igocli:6ef32d501eb63a638e3e54c628c5fcefd1d3b301"}}, "deploy": [{"name": "development", "legacy": false}, {"name": "production", "automatic": false, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "team_email": "ahassall@lyft.com", "version": "9696e17d30bf95ead8d6eb743aad4acf36103a01", "images": [{"parent": {"name": "s2igocli", "version": "6ef32d501eb63a638e3e54c628c5fcefd1d3b301", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "6ef32d501eb63a638e3e54c628c5fcefd1d3b301", "sub_image": null, "external": false}}, "detkibana7": {"name": "detkibana7", "description": "kibana7 inside k8s", "repository": "git@github.com:lyft/detkibana7.git", "builder": {"name": "docker_build", "params": {"buildargs": ["KIBANA_VERSION=7.1.1"]}}, "slack": "#tnw-bots", "team_email": "dudell@lyft.com", "service_tier": 3, "image_type": "tool", "deploy": [{"name": "development", "legacy": false}, {"name": "production", "automatic": false, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "version": "47d466b440a2ded12d991f482304783ed13ac7fe", "images": [{"parent": {"name": "bionicbase", "version": "e4bd72a4b0feff782e1f609553b56c72689a8f19", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "e4bd72a4b0feff782e1f609553b56c72689a8f19", "sub_image": null, "external": false}}, "detriskgraphcache": {"name": "detriskgraphcache", "description": "Cacheing service for the risk graph", "repository": "git@github.com:lyft/tnw-risk-graph-service.git", "slack": "#tnw-bots", "image_type": "tool", "languages": ["go"], "builder": {"name": "s2i", "params": {"builder": "lyft/s2igocli:359c70999eadeb5d8dba93c841092d2df9d05867"}}, "deploy": [{"name": "development", "legacy": false}, {"name": "production", "automatic": false, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "team_email": "dudell@lyft.com", "version": "36d82e9b8fb505af7488d4f4e7c7c22ab922f53e", "images": [{"parent": {"name": "s2igocli", "version": "359c70999eadeb5d8dba93c841092d2df9d05867", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "359c70999eadeb5d8dba93c841092d2df9d05867", "sub_image": null, "external": false}}, "detzookeeper3": {"name": "detzookeeper3", "description": "zk cluster inside k8", "repository": "git@github.com:lyft/detzookeeper3.git", "image_type": "tool", "service_tier": 2, "team_email": "security-detection@lyft.com", "slack": "#security", "pagerduty_escalation_policy": "Detection Primary", "notification_overrides": {"deploy": {"slack": "#tnw-bots"}, "pr_merge": {"slack": "#tnw-bots"}}, "languages": ["java"], "credentials": false, "restricted_ssh": true, "builder": {"name": "docker_build", "params": {"buildargs": ["ZOO_VERSION=3.5.5"]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "main", "command": "/entrypoint.sh zkServer.sh start-foreground", "workdir": "/opt/zookeeper", "limits": {"cpu": 1, "memory": "512Mi"}, "exports": [{"name": "client", "port": 2181}], "liveness_probe": {"exec_probe": {"command": ["zkOk.sh"]}, "initial_delay_seconds": 15}, "readiness_probe": {"exec_probe": {"command": ["zkOk.sh"]}, "initial_delay_seconds": 15}}], "groups": [{"name": "dev", "members": ["control.dev", "detzookeeper3.main"]}], "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}, {"name": "production", "automatic": false, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "version": "0ef8d8281f3f901200f308c4e4969d4048e15867", "images": [{"parent": {"name": "java8", "version": "0055f9559b7d9c0c8ad4ab7ff4d3e5a710420800", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "0055f9559b7d9c0c8ad4ab7ff4d3e5a710420800", "sub_image": null, "external": false}}, "developerportal": {"name": "developerportal", "description": "Frontend service for the developer portal on lyft.com", "repository": "git@github.com:lyft/developerportal.git", "credentials": false, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"internal_service": false, "frontend_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "developerportal.legacy"]}, {"name": "integration", "members": ["www2.site", "acceptancerate.dev", "accountfrontend.integration", "adtechworkflows.dev", "ats.dev", "auth.dev", "dborchestrator.legacy", "dispatch.dev", "enterprise.dev", "enterprisefrontend.dev", "expressdrivefe.dev", "etaproxy.dev", "fare.dev", "godfather.dev", "jobscheduler.dev", "karma.dev", "ledger.dev", "mailer.dev", "pricing.dev", "publicapi.dev", "regions.dev", "ridescheduler.dev", "ridelocations.dev", "robocop.dev", "streets.dev", "supply.dev", "switchboard.dev", "tcs.dev", "usergroups.dev", "users.dev", "usereligibilities.dev", "venues.dev", "viewport.dev", "wwwbrochurefe.dev", "wwwidentityfe.dev", "publicapi.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "developerportal.dev"}, {"name": "unit", "type": "jailed", "command": "make test_coverage"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "slack": "#partner-engineering", "team_email": "partner-engineering@lyft.com", "pagerduty_escalation_policy": "Developer Platform", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, [{"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "languages": ["javascript"], "image_type": "service", "service_tier": 1, "envoy": {"profile": "python", "settings": {"services": [{"name": "developerportal"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}}}}, "version": "22a7d25182572595b46ee59707b6f94d6230880c", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "devicemanager": {"name": "devicemanager", "description": "A service to manage lyft hardware devices (halo)", "repository": "git@github.com:lyft/devicemanager.git", "slack": "#lyft-media-eng-bot", "team_email": "lyft-media-eng@lyft.com", "pagerduty_escalation_policy": "Lyft Media", "image_type": "service", "service_tier": 1, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa40e3b1994d53fd5ad2ac151b958f9bfab91ede"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py38.b53cef4fa319d93186ad696836fe2985a4b6381d", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "devicemanager.legacy"]}, {"name": "service_group", "members": ["devicemanager.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "devicemanager.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "devicemanager.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "devicemanager.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "devicemanager"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "firehose_iad": null}}}}, "version": "cf1aaff5427246199e2f99cbbe81dc49aa4ffb3b", "images": [{"parent": {"name": "opsbase", "version": "aa40e3b1994d53fd5ad2ac151b958f9bfab91ede", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "b53cef4fa319d93186ad696836fe2985a4b6381d", "sub_image": "py38", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa40e3b1994d53fd5ad2ac151b958f9bfab91ede", "sub_image": null, "external": false}}, "devices": {"name": "devices", "repository": "git@github.com:lyft/devices.git", "description": "Service for keeping track of device-related information", "service_tier": 1, "team_email": "integrity-eng@lyft.com", "pagerduty_escalation_policy": "Fraud Platform", "slack": "#fraudsquad", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:77c41f39b1d42fc3b3fdf97d08edaed8fe4f7b0e", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- devices", "limits": {"cpu": 4, "memory": "512Mi"}, "sub_image": "k8s", "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "devices.legacy", "redis.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "devices.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "devices.dev", "container": "devices.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "devices.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "devices.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "devices"}], "common_settings": {"redis_clusters": {"devices": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "version": "5e620108e9571ca64de9e0d213c3b75f4c27d71d", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "77c41f39b1d42fc3b3fdf97d08edaed8fe4f7b0e", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "devk8sinfra": {"name": "devk8sinfra", "description": "Tools for managing devx kubernetes infrastructure.", "repository": "git@github.com:lyft/dev-k8s-infra.git", "slack": "#devx-bots", "team_email": "devx-team@lyft.com", "image_type": "tool", "builder": {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9"}}, "languages": ["bash"], "tests": [{"name": "precommit", "type": "jailed", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [[{"name": "staging", "legacy": false, "orca": []}, {"name": "production-devkubestaging", "kubernetes": {"enabled": true, "mode": "direct", "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}, "interpolation_vars": {"file_system_id": "fs-23a9f5c1"}, "clusterLabels": {"cluster.lyft.net/role": ["devkubestaging"]}}, "links": [{"text": "devkube runbook", "url": "https://docs.lyft.net/eng/devk8sinfra/runbook.html"}], "legacy": false}], {"name": "production", "kubernetes": {"enabled": true, "mode": "direct", "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}, "interpolation_vars": {"file_system_id": "fs-134f35f3"}, "clusterLabels": {"cluster.lyft.net/role": ["devkube"]}}, "links": [{"text": "devkube runbook", "url": "https://docs.lyft.net/eng/devk8sinfra/runbook.html"}], "legacy": false}], "version": "feb059111f0322e4e7a397a3c8bfad4e495715ea", "images": [{"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}}, "devkubeaggrefestapi": {"name": "devkubeaggrefestapi", "description": "devkubeaggrefestapi", "image_type": "service", "repository": "git@github.com:lyft/devkubeaggrefestapi.git", "slack": "#devx-bots", "service_tier": 2, "team_email": "devx-team@lyft.com", "pagerduty_escalation_policy": "DevX", "languages": ["go"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igo:fa0c4921e2e8481015324ac1a2b841013a1a2fdf"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}]}}, "containers": [{"name": "service", "command": "devkubeaggrefestapi"}], "groups": [{"name": "dev", "members": ["devkubeaggrefestapi.service"]}], "tests": [{"name": "lint", "type": "jailed", "command": "pre-commit run --all-files --show-diff-on-failure", "sub_image": "precommit"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "coverage", "type": "jailed", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}], "deploy": [[{"name": "staging", "legacy": false, "orca": []}, {"name": "production-devkubestaging", "kubernetes": {"enabled": true, "interpolation_vars": {"file_system_id": "fs-23a9f5c1"}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}, "clusterLabels": {"cluster.lyft.net/role": ["devkubestaging"]}}, "legacy": false}], {"name": "production", "orca": [], "kubernetes": {"enabled": true, "interpolation_vars": {"file_system_id": "fs-134f35f3"}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}, "clusterLabels": {"cluster.lyft.net/role": ["devkube"]}}, "legacy": false}], "version": "d7fe1eeedc197ecee5990d59e6a75deca925c31b", "images": [{"parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}}, "devptmodelexec": {"name": "devptmodelexec", "description": "pricing streaming service for model executions", "repository": "git@github.com:lyft/devptmodelexec.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "cpuexecutor", "command": "dumb-init -- service_venv python /code/devptmodelexec/manage.py cpu_orchestrator", "workdir": "/code/devptmodelexec", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}], "facets": [{"name": "cpuexecutor", "member": "devptmodelexec.cpuexecutor", "type": "worker", "envoy_service": "devptmodelexecutor", "autoscaling": {"environment": {"production": {"min_size": 60, "max_size": 60}, "staging": {"min_size": 1, "max_size": 1}}}}], "groups": [{"name": "dev", "members": ["control.dev", "devptmodelexec.legacy", "lyftidl.server", "redis.dev"]}, {"name": "integration", "members": ["devptmodelexec.dev", "ghostmatching.dev", "regions.dev", "pricing.dev", "demand.dev", "pricingdata.run", "kafka.server", "tcs.dev"]}], "configsets": ["devptmodelexecdata"], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "startup", "type": "startup", "group": "devptmodelexec.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "virtualenv": "service_venv", "markers": "not unit_legacy"}, {"name": "integration", "type": "execution", "group": "devptmodelexec.integration", "container": "devptmodelexec.legacy", "command": "make test_int"}, {"name": "unit_legacy", "type": "execution", "container": "devptmodelexec.legacy", "group": "devptmodelexec.dev", "framework": "pytest", "coverage": false, "targets": ["tests/unit"], "virtualenv": "service_venv", "markers": "unit_legacy"}], "slack": "#pricing-adaptive-dep", "team_email": "adaptive-pricing@lyft.com", "pagerduty_escalation_policy": "Adaptive-Pricing", "deploy": [[{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}, {"name": "staging-k8s", "legacy": false, "automatic": false}, {"name": "staging-cpuexecutor", "legacy": false, "automatic": false, "targets": [{"facet": "cpuexecutor"}], "kubernetes": {"enabled": true}}], [{"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}, {"name": "production-k8s", "legacy": false, "automatic": false}, {"name": "production-cpuexecutor", "legacy": false, "automatic": false, "targets": [{"facet": "cpuexecutor"}], "kubernetes": {"enabled": true}}]], "streamingplatform": {"stages": {"staging-k8s": {"configuration": "staging.jsonnet"}, "production-k8s": {"configuration": "production.jsonnet"}}, "version": "1.4-SNAPSHOT", "beam_version": "2.16.0-lyft20200116", "jobmanagers": [{"name": "devptmodelexec", "production": {"num_taskmanagers": 10, "availability_zone": "us-east-1a", "jobmanager": {"instance_type_override": "c5.4xlarge"}, "taskmanager": {"instance_type_override": "c5.4xlarge", "num_slots": 12}}, "staging": {"num_taskmanagers": 2, "availability_zone": "us-east-1a", "taskmanager": {"instance_type_override": "c5.2xlarge", "num_slots": 8}}, "jobs": [{"name": "ptmodelexec", "type": "beam-python", "pipeline": "ptmodelexec.workflow", "description": "To launch the ptmodelexec workflow", "development": {"parallelism": 2}, "staging": {"parallelism": 16}, "production": {"parallelism": 108}}]}]}, "languages": ["bash", "python"], "image_type": "flinkjob", "service_tier": 1, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": "k8s", "packages": ["libblas-dev", "liblapack-dev", "redis-tools"]}}, {"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "pulldeploy_components": {"data": ["pricingdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "devptmodelexec"}, {"name": "devptmodelexectaskmanager"}, {"name": "devptmodelexecjobmanager"}, {"name": "devptmodelexecutor"}], "common_settings": {"local_service": {"enable_gzip": true}, "internal_hosts": {"ghostmatching": null, "locationsregionsearch": null, "pricing": null, "regions": null, "routesapi": null, "supply": null, "users": null, "tcs": null}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}, "redis_clusters": {"devptmodelexec": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400, "outlier_detection": {"consecutive_5xx": 100, "enforcing_success_rate": 0}}}}}}, "logging": {"devptmodelexectaskmanager": {"fields": {"attempt_num": "long", "failed_record_count": "long", "failed_record": "keyword", "pricingrealtime_region": "keyword", "model_version": "keyword", "method": "keyword"}}}, "version": "366a85b040edc4472c1cc59130318c30ba19c669", "images": [{"parent": {"name": "s2ipython3", "version": "8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "devptmodelexecdata": {"name": "devptmodelexecdata", "description": "Runtime configuration data for ptmodelexec", "repository": "git@github.com:lyft/devptmodelexecdata.git", "image_type": "data", "service_tier": 2, "slack": "#pricing-adaptive-dep", "team_email": "adaptive-pricing@lyft.com", "pagerduty_escalation_policy": "devnull", "languages": ["bash", "python"], "builder": {"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, "credentials": false, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/devptmodelexecdata"]}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "121f331a41a8ecadcf9db18601224d81019a57c2", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "directions": {"name": "directions", "repository": "git@github.com:lyft/directions.git", "description": "Service to provide guidance for Navigation purposes", "service_tier": 2, "team_email": "navxp-eng@lyft.com", "pagerduty_escalation_policy": "NavXP", "slack": "#mapping-nav-bots", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2igocli:e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": "k8s", "packages": ["awscli"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- /go/src/github.com/lyft/directions/script/start_service.sh", "limits": {"cpu": 4, "memory": "512Mi"}, "sub_image": "k8s", "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "directions.legacy"]}, {"name": "integration", "members": ["directions.dev", "etaproxy.dev", "mapattributes.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "directions.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "directions.integration", "container": "directions.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "coverage", "type": "jailed", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}], "facets": [{"name": "main", "member": "directions.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "directions.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "23:59 America/Los_Angeles"}, "deploy": [{"name": "staging", "automatic": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "automatic": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production", "automatic": true, "bake_time_minutes": 0, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "directions"}], "common_settings": {"internal_hosts": {"etaproxy": null, "mapattributes": null}, "external_hosts": {"firehose_iad": null}}}}, "logging": {"directions": {"fields": {"end_node_id": "integer", "ids": "keyword", "map_version": "keyword", "req": "keyword", "start_node_id": "integer"}}}, "version": "3d4f9be763a69b6c67eb7fd803cb8380148eda70", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "directorysync": {"name": "directorysync", "description": "Service that handles gathering, syncing, and normalizing corporate directory info.  This is used for onboarding employees by the enterprise service, among other things.", "repository": "git@github.com:lyft/directorysync.git", "team_email": "enterprise@lyft.com", "pagerduty_escalation_policy": "Enterprise Admin", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/directorysync", "limits": {"cpu": 2, "memory": "4Gi"}, "sub_image": "k8s"}, {"name": "worker", "command": "dumb-init -- service_venv celery -A app.celery.celery worker --loglevel=debug --pool=gevent --max-tasks-per-child 10 --without-gossip --without-mingle --without-heartbeat", "workdir": "/code/directorysync", "sub_image": "k8s"}, {"name": "runsync", "command": "dumb-init -- service_venv python manage.py run_sync", "workdir": "/code/directorysync", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}], "facets": [{"name": "main", "member": "directorysync.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 1, "max_size": 10}}}, "requirements": {"mongo": true}}, {"name": "canary", "member": "directorysync.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}, "requirements": {"mongo": true}}, {"name": "workers", "member": "directorysync.worker", "type": "worker", "autoscaling": {"criteria": {"cpu_target": 40}, "environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 1, "max_size": 5}}}, "requirements": {"mongo": true}}, {"name": "cronrunsync", "member": "directorysync.runsync", "type": "cron", "schedule": "0 0 * * *", "requirements": {"mongo": true}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "mongodb.server", "redis.dev", "distributedlock.service", "jobscheduler.dev", "directorysync.legacy"]}, {"name": "integration", "members": ["enterprise.integration", "directorysync.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "directorysync.dev"}, {"name": "unit", "type": "execution", "group": "directorysync.dev", "container": "directorysync.legacy", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "directorysync.dev", "container": "directorysync.legacy", "command": "make test_integration", "reports": {"junit": "build/integration.xml", "cobertura": "build/coverage.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#enterprise-deploy", "service_tier": 1, "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "workers"}, {"facet": "cronrunsync"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": {"facet": "canary"}}, {"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, [{"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"legacy": true, "name": "production", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "workers"}]}]], "languages": ["python"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "directorysync"}, {"name": "directorysyncbatch"}, {"name": "directorysyncworkers"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 500}}}, "internal_hosts": {"distributedlock": null, "enterprise": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "rideexpensing": null, "www2": null, "ratelimit": null}, "external_hosts": {"concur": null, "concur_emea": null, "dynamodb_iad": null, "firehose_iad": null}, "mongos": {"enterprise": {"staging": {"ratelimit": true, "clusters": [{"port": 27027, "hosts": ["r143043-a0.mlab.com:27817"]}, {"port": 27028, "hosts": ["r143043-a1.mlab.com:27817"]}], "circuit_breakers": {"default": {"max_connections": 200}}}, "production": {"ratelimit": true, "clusters": [{"port": 27027, "hosts": ["r059373-10.mlab.com:27817"]}, {"port": 27028, "hosts": ["r059373-11.mlab.com:27817"]}, {"port": 27044, "hosts": ["r059373-12.mlab.com:27817"]}, {"port": 27045, "hosts": ["r059373-13.mlab.com:27817"]}], "circuit_breakers": {"default": {"max_connections": 200}}}}}, "redis_clusters": {"directorysync": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "logging": {"directorysync": {"fields": {"email": "keyword", "metadata": "keyword", "path": "keyword", "bucket": "keyword", "external_user_id": "keyword", "org_id": "keyword", "emails": "keyword", "organization_lyft_id": "keyword", "organization_slug": "keyword", "user": {"primary_email": "keyword"}, "importer_type": "keyword", "organization": "keyword"}}, "directorysyncbatch": {"fields": {"email": "keyword", "metadata": "keyword", "path": "keyword", "bucket": "keyword", "external_user_id": "keyword", "emails": "keyword", "organization_lyft_id": "keyword", "organization_slug": "keyword", "user": {"primary_email": "keyword"}, "importer_type": "keyword"}}, "directorysyncworkers": {"fields": {"num_of_retries": "integer", "parent_id": "keyword", "queue": "keyword", "task_id": "text", "task_name": "keyword", "task_args": "text", "task_kwargs": "text"}, "unindexed_fields": ["is_child_task", "is_retry_attempt", "will_retry", "will_retry_at"]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:b53cef4fa319d93186ad696836fe2985a4b6381d", "sub_image": "k8s", "packages": ["libcurl4-openssl-dev", "libssl-dev", "gnupg1"]}}, {"name": "docker_build"}]}}, "version": "3b0dd9173d79e9f1b5c705ff8653dfd7600bbdde", "images": [{"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "b53cef4fa319d93186ad696836fe2985a4b6381d", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "discovery": {"name": "discovery", "description": "discovery service provides metadata for node ip addresses.", "repository": "git@github.com:lyft/discovery-private.git", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 80}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "discovery.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "discovery.dev"}, {"name": "unit", "type": "execution", "group": "discovery.dev", "container": "discovery.legacy", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "discovery.dev", "container": "discovery.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#networking-bots", "team_email": "network-team@lyft.com", "pagerduty_escalation_policy": "Networking", "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "staging", "legacy": true, "automatic": true}, {"name": "canary", "legacy": true}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "image_type": "service", "service_tier": 1, "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d1f0a787cd99ae420aa7640e9dd2f935f316864e", "sub_image": "precommit"}}]}}, "version": "18255c16b8cd15b61baa2227120aa1c7c63cbc67", "images": [{"parent": {"name": "opsbase", "version": "2b5a476d830adfe9c66ec33dce50d14125b10d54", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d1f0a787cd99ae420aa7640e9dd2f935f316864e", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "2b5a476d830adfe9c66ec33dce50d14125b10d54", "sub_image": null, "external": false}}, "dispatch": {"name": "dispatch", "description": "dispatch", "repository": "git@github.com:lyft/dispatch.git", "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}], "limits": {"environment": {"development": {"memory": "4Gi", "cpu": 1.2}}}}, {"name": "compliance", "command": "service_venv gunicorn wsgi:app --workers=4 --reuse-port --worker-connections=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/dispatch", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 30}}, {"name": "dispatch", "command": "service_venv gunicorn wsgi:app --workers=4 --reuse-port -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/dispatch", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 30}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "idl.server", "redis.dev", "regions.dev", "ghostmatching.dev", "dispatch.legacy"]}, {"name": "integration", "members": ["abacus.dev", "ats.dev", "backgroundcheck.dev", "badcompanions.dev", "compliance.dev", "cancels.dev", "courier.dev", "dispatch.dev", "drivermode.dev", "driverridesinfo.dev", "dsfeatures.dev", "etablender.dev", "etaproxy.dev", "fare.dev", "ghostmatching.dev", "green.dev", "jobscheduler.dev", "karma.dev", "leadplatform.dev", "ledger.dev", "matching.dev", "matchingexecution.dev", "matchingsolver.dev", "matchingstate.dev", "modelexec.dev", "passengerqueues.dev", "payapi.dev", "pickupoptimizer.dev", "predispatchjobs.dev", "pricing.dev", "ratecards.dev", "ratings.dev", "rides.dev", "ridesapi.dev", "ridestate.dev", "routes.dev", "routesapi.dev", "supplyrecords.dev", "trips.dev", "tripsapi.dev", "usereligibilities.dev", "vehiclemetadata.dev", "venues.dev", "viewport.dev", "wallet.dev", "walletapi.dev"]}], "pulldeploy_components": {"data": ["marketplaceconfig", "regioncfgdata", "translationdata"]}, "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "env TEST_TAGS=\"not unit_legacy\" make test_unit", "reports": {"junit": "build/unit.xml"}}, {"name": "unit_legacy", "type": "execution", "group": "dispatch.dev", "container": "dispatch.legacy", "command": "env TEST_TAGS=\"unit_legacy\" make test_unit_without_coverage", "reports": {"junit": "build/unit.xml"}}, {"name": "startup", "type": "startup", "group": "dispatch.dev"}, {"name": "integration", "type": "sharded", "group": "dispatch.dev", "container": "dispatch.legacy", "target": "tests/integration", "virtualenv": "service_venv", "float_dependencies": "*/30 2-22 * * *", "skip_threshold": 999, "reports": {"junit": "build/integration.xml"}}, {"name": "e2e_driverqueues", "autotrigger": false, "type": "sharded", "group": "dispatch.dev", "container": "dispatch.legacy", "target": "tests/e2e/driverqueues", "virtualenv": "service_venv", "float_dependencies": "*/30 2-22 * * *", "skip_threshold": 999, "reports": {"junit": "build/integration.xml"}}, {"name": "e2e_airports", "type": "sharded", "group": "dispatch.dev", "container": "dispatch.legacy", "target": "tests/e2e/airports", "virtualenv": "service_venv", "float_dependencies": "*/30 2-22 * * *", "skip_threshold": 999, "reports": {"junit": "build/integration.xml"}}, {"name": "e2e_dispatch", "type": "sharded", "group": "dispatch.dev", "container": "dispatch.legacy", "target": "tests/e2e/dispatch", "virtualenv": "service_venv", "float_dependencies": "*/30 2-22 * * *", "skip_threshold": 999, "reports": {"junit": "build/integration.xml"}}], "slack": "#dispatch-bots", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "dispatch@lyft.com", "pagerduty_escalation_policy": "Dispatch", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "compliancemain"}, {"facet": "dispatchmain"}], "kubernetes": {"enabled": true}, "links": [{"text": "Runbook", "url": "https://docs.lyft.net/eng/dispatch/runbook.html"}, {"text": "Matching Drilldown (Staging)", "url": "https://grafana.lyft.net/dashboard/db/matching-drilldown?refresh=1m&orgId=1&var-environment=staging&var-region=*"}, {"text": "Simrides (Staging)", "url": "https://grafana.lyft.net/dashboard/db/simulatedrides?refresh=1m&orgId=1&var-environment=staging"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}], "targets": [{"facet": "compliancecanary"}, {"facet": "dispatchcanary"}], "kubernetes": {"enabled": true}, "links": [{"text": "MP Dash", "url": "https://lyft.wavefront.com/dashboard/matching-platform"}, {"text": "DX Dash", "url": "https://grafana.lyft.net/dashboard/db/dispatch-exchange"}, {"text": "Simrides", "url": "https://grafana.lyft.net/dashboard/db/simulatedrides"}]}, [{"name": "production-us-east-1a", "legacy": true, "targets": [{"facet": "compliancemain"}, {"facet": "dispatchmain"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "targets": [{"facet": "compliancemain"}, {"facet": "dispatchmain"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true, "targets": [{"facet": "compliancemain"}, {"facet": "compliancecanary"}, {"facet": "dispatchmain"}, {"facet": "dispatchcanary"}], "kubernetes": {"enabled": true}}], "facets": [{"name": "compliancemain", "member": "dispatch.compliance", "type": "service", "envoy_service": "dispatchcompliance", "environment_files": ["ops/config/pillar/env.sls"], "autoscaling": {"criteria": {"cpu_target": 30}, "environment": {"staging": {"min_size": 5, "max_size": 10}, "production": {"min_size": 40, "max_size": 200}}}}, {"name": "compliancecanary", "member": "dispatch.compliance", "type": "service", "envoy_service": "dispatchcompliance", "canary": true, "environment_files": ["ops/config/pillar/env.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "dispatchmain", "member": "dispatch.dispatch", "type": "service", "envoy_service": "dispatch", "environment_files": ["ops/config/pillar/env.sls"], "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 2, "max_size": 20}, "production": {"min_size": 2, "max_size": 600}}}}, {"name": "dispatchcanary", "member": "dispatch.dispatch", "type": "service", "envoy_service": "dispatch", "canary": true, "environment_files": ["ops/config/pillar/env.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy_settings": {"window_start": "07:00 America/Los_Angeles", "window_end": "16:00 America/Los_Angeles"}, "service_tier": 0, "languages": ["python"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "dispatch"}, {"name": "dispatchcompliance"}, {"name": "dispatchdropoffsworkers"}, {"name": "dispatchgeofenceworkers"}, {"name": "dispatchglobalmatchingworkers"}, {"name": "dispatchmatchingworkerssmall"}, {"name": "dispatchworkers"}], "common_settings": {"local_service": {"enable_gzip": true}, "internal_hosts": {"ats": null, "autonomous": null, "badcompanions": null, "courier": null, "demand": null, "dispatch": null, "dispatchcompliance": null, "driverearnings": null, "driverloyalty": null, "drivermode": null, "dsfeatures": null, "dsfeatureswrites": null, "enterprisedispatch": null, "etaproxy": null, "ghostmatching": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "jobschedulerurgentweb": null, "locations": null, "locationsregionsearch": null, "matching": null, "matchingexecution": null, "matchingsmall": null, "matchingsimulated": null, "matchingstate": null, "messaging": null, "modelexecdispatch": null, "modelexecvenues": null, "passengerqueues": null, "places": null, "powermode": null, "predispatchjobs": null, "priceoptimizerbulk": null, "pricing": null, "publicapi": null, "push": null, "pusher": null, "ratecards": null, "ratelimit": null, "regions": null, "rides": null, "ridescheduler": null, "ridestate": null, "routes": null, "routesapi": null, "supply": null, "supplyrecords": {"tls_enabled": true}, "switchboard": null, "tcs": null, "tripsapi": null, "usergroups": null, "users": null, "venues": null, "viewport": null}, "external_hosts": {"dynamodb_cmh": null, "dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "redis": {"dispatchmultiredis": {"port": 6380, "op_timeout_ms": 700, "health_check": {"timeout_ms": 1000, "interval_ms": 5000}, "outlier_detection": {"consecutive_5xx": 200, "enforcing_success_rate": 0}, "ring_hash_lb_config": {"minimum_ring_size": 256000}, "request_mirror_policy": [{"cluster": "dispatch", "runtime_default_percentage": 1, "runtime_key": "dispatch"}]}}, "redis_clusters": {"dispatch": {"aws_random_identifier": "vngjnv", "port": 6382, "op_timeout_ms": 700, "health_check": {"timeout_ms": 1000, "interval_ms": 5000}, "outlier_detection": {"consecutive_5xx": 200, "enforcing_success_rate": 0}}, "driverqueues": {"aws_random_identifier": "vngjnv", "port": 6381, "op_timeout_ms": 400}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit", "packages": ["g++"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s", "packages": ["libcurl4-openssl-dev"]}}]}}, "logging": {"dispatchdropoffsworkers": {"fields": {"dispatch_region": "keyword", "driver_id": "keyword"}}, "dispatchcompliance": {"fields": {"lat": "float", "lng": "float", "found_required_list": "boolean", "found_restricted_list": "boolean", "exception_class": "keyword", "state_from_regions": "keyword", "exception_code": "long"}}, "dispatch": {"fields": {"supplier_id": "keyword", "ride_id": "keyword", "route_id": "keyword", "driver_id": "keyword", "region": "keyword", "ended_at_reason": "keyword", "origin_lat": "float", "origin_lng": "float", "event_name": "keyword", "error_msg": "keyword", "field_name": "keyword", "error_id": "keyword", "field_value": "long", "ordered_ride_ids": "keyword", "is_swap": "boolean", "auto_accept": "boolean", "should_update_status": "boolean", "first_ride_id": "keyword", "queue_name": "keyword", "driver_ids": "keyword", "ordered_demand_ids": "keyword", "ride_notification_id": "keyword", "initiate_swap": "boolean", "duration": "long", "driver_waypoints_count": "long", "completed_ride_id": "keyword", "ride_type": "keyword", "ride_ids": "keyword", "driver_current_ride_id": "long", "out_of_pool_until": "long", "utcnow": "keyword", "driver_idle_time": "long", "pusher": "keyword", "request": "keyword", "supplier_lat": "float", "supplier_lng": "float", "dispatch_region": "keyword", "demand_id": "keyword", "log_level": "keyword", "accept_source": "keyword", "is_reroutable": "boolean", "args": {"route_id": "keyword", "ride_type": "keyword", "ride_id": "keyword", "ordered_ride_ids": "keyword", "origin_lng": "float", "lapse_timeout": "long", "primetime": "long", "dispatch_params": "keyword", "dispatch_status": "keyword", "origin_lat": "float", "region": "keyword"}, "ride_request": "keyword", "save_response": "keyword", "callers": "keyword", "driver_primetime": "long", "user_id": "keyword", "to_supplier_id": "keyword", "amount": "long", "to_route_id": "keyword", "original_swapped_ride_id": "keyword", "from_route_id": "keyword", "from_supplier_id": "keyword", "exception": "keyword", "success": "boolean", "field": "keyword", "to_route": "keyword", "to_supplier": "keyword", "pre_accept_driver_id": "keyword", "actual_ineligible_ids": "keyword", "expected_ineligible_ids": "keyword", "rides": "keyword", "to_supplier_hot_cache": "keyword", "to_supplier_current_ride": "keyword", "updated_route": "keyword", "reasons_ineligible": "keyword", "caller": "keyword", "ride_notification": {"created_at_ms": "keyword", "auto_accept": "boolean", "is_swap": "boolean", "ordered_ride_ids": "keyword", "timeout_ms": "float", "supplier_data": "keyword", "is_shared": "boolean", "supplier_id": "keyword", "accept_screen_primetime_override": "long"}, "from_supplier": "keyword", "from_route": "keyword", "route": "keyword", "released_route_id": "keyword", "is_new_ride_pickup_before_affected_ride_pickup": "boolean", "is_affected_ride_already_picked_up": "boolean", "new_ride_id": "keyword", "affected_ride_id": "keyword", "error": "keyword", "ride_0": "keyword", "ride_0_id": "keyword", "index": "long", "released_ride_0_id": "keyword", "code": "long", "passenger_id": "keyword", "message_template_id": "keyword", "from_supplier_queued_route_ids": "keyword", "queued_route_ids": "keyword", "primary_ride_id": "keyword", "current_ride_id": "keyword", "to_supplier_lock_key_from_prior_iteration": "keyword", "to_route_lock_key_from_prior_iteration": "keyword", "current_assignments": "keyword", "new_assignments": "keyword", "to_supplier_driver": "keyword", "original_ordered_ride_ids": "keyword", "status": "keyword", "match_loop_id": "keyword", "is_shared_ride": "boolean", "pre_dispatch_manager": "keyword", "ride_request_enabled": "boolean", "num_eligible_supply": "long", "num_pre_dispatched": "long", "active_demand_count": "long", "driver_lyft_id": "keyword", "prioritized_ride_id": "keyword", "ineligible": "keyword", "version": "keyword", "expiration_time": "long", "should_delete": "boolean", "is_shared": "boolean", "timeout_seconds": "float", "exception_class": "keyword", "lat": "float", "lng": "float", "eligible": "keyword", "response_code": "long", "remove_route_from_rides_success": "boolean", "response_data": "keyword", "revision": "long", "errors": "keyword", "status_code": "long", "old_route_id": "keyword", "old_ride_id": "keyword", "old_queued_route_ids": "keyword", "user_ids": "keyword", "queuedRouteIds": "keyword", "pax_id": "keyword", "scheduled_ride_id": "keyword", "upfront_bonus_currency": "keyword", "autonomous_provider_id": "keyword", "method": "keyword", "map_id": "long", "grpc_code": "keyword", "swap_plan": {"current_assignments": "keyword", "new_assignments": "keyword"}, "incentive_type": "keyword", "bucket": "keyword", "s3_key": "keyword", "max_queue_length": "keyword", "caps_by_ride_type": "keyword", "queue_id": "keyword", "hour": "keyword", "stack": "keyword"}}, "dispatchworkers": {"fields": {"request_id": "keyword", "driver_id": "keyword", "ride_types": "keyword"}}, "dispatchglobalmatchingworkers": {"fields": {"partition": "keyword", "supply_id": "keyword", "first_waypoint_changed": "boolean", "is_reroute": "boolean", "is_swap": "boolean", "is_alternate_location_reroute": "boolean", "demand_ids": "keyword", "new_waypoint_job_ids": "keyword", "is_linked": "boolean", "requires_accept": "boolean", "car_capacity": "long", "partition_current_run_timestamp_dt": "date", "is_shared_route": "boolean", "notification_ordered_ride_ids": "keyword", "initiate_swap": "boolean", "route_id": "keyword", "route_created": "boolean", "ride_found": "boolean", "driver_ids": "keyword", "queue_name": "keyword", "ride_id": "keyword", "original_waypoint_job_ids": "keyword", "ride_status": "long", "completed_waypoint_job_ids": "keyword", "linked_waypoint_job_ids": "keyword", "should_create_route": "boolean", "swap_group_type": "keyword", "supply_plan_waypoints": "keyword", "job_waypoints": "keyword", "driver_id": "keyword", "request_region": "keyword", "is_out_region_ride": "boolean", "ordered_ride_ids": "keyword", "num_new_plans": "long", "execution_steps": "keyword", "num_assignments": "long", "out_of_region_request_region": "keyword", "num_driver_shape_ids": "long", "dispatch_region": "keyword", "queue_id": "keyword", "stops": "keyword", "current_ride_job_was_not_created": "boolean", "current_ride_is_in_dx_exec": "boolean", "ride_cancel_actor_role": "keyword", "current_ride_is_canceled_or_lapsed": "boolean", "ride": "boolean", "current_ride_is_being_notified": "boolean", "ride_driver_id": "long", "is_currently_notifying": "boolean", "demand_session_found": "boolean", "demand_id": "keyword", "code": "long", "user_id": "keyword", "message_template_id": "keyword", "canceled_ride_ids": "keyword", "region_code": "keyword", "ride_pt_legacy": "long", "accept_screen_prime_time_method": "keyword", "current_pt": "long", "ride_ids": "keyword", "waypoints_same_location": "boolean", "map_id": "long", "is_divided_into_subregions": "boolean", "should_process_whole_region": "boolean", "subpartition_id": "keyword", "is_cycle_swap": "boolean", "is_chain_swap": "boolean", "contains_shared_job": "boolean", "supply_assignment_group_id": "keyword", "supply_plan_updates": "keyword", "quality": "integer", "user_ids": "keyword"}}, "dispatchmatchingworkerssmall": {"fields": {"partition": "keyword", "supply_id": "keyword", "first_waypoint_changed": "boolean", "is_reroute": "boolean", "is_swap": "boolean", "is_alternate_location_reroute": "boolean", "demand_ids": "keyword", "new_waypoint_job_ids": "keyword", "is_linked": "boolean", "requires_accept": "boolean", "car_capacity": "long", "partition_current_run_timestamp_dt": "date", "is_shared_route": "boolean", "notification_ordered_ride_ids": "keyword", "initiate_swap": "boolean", "route_id": "keyword", "route_created": "boolean", "ride_found": "boolean", "driver_ids": "keyword", "queue_name": "keyword", "ride_id": "keyword", "original_waypoint_job_ids": "keyword", "ride_status": "long", "completed_waypoint_job_ids": "keyword", "linked_waypoint_job_ids": "keyword", "should_create_route": "boolean", "swap_group_type": "keyword", "supply_plan_waypoints": "keyword", "job_waypoints": "keyword", "driver_id": "keyword", "request_region": "keyword", "is_out_region_ride": "boolean", "ordered_ride_ids": "keyword", "num_new_plans": "long", "execution_steps": "keyword", "num_assignments": "long", "out_of_region_request_region": "keyword", "num_driver_shape_ids": "long", "dispatch_region": "keyword", "queue_id": "keyword", "stops": "keyword", "current_ride_job_was_not_created": "boolean", "current_ride_is_in_dx_exec": "boolean", "ride_cancel_actor_role": "keyword", "current_ride_is_canceled_or_lapsed": "boolean", "ride": "boolean", "current_ride_is_being_notified": "boolean", "ride_driver_id": "long", "is_currently_notifying": "boolean", "demand_session_found": "boolean", "demand_id": "keyword", "code": "long", "user_id": "keyword", "message_template_id": "keyword", "canceled_ride_ids": "keyword", "region_code": "keyword", "ride_pt_legacy": "long", "accept_screen_prime_time_method": "keyword", "current_pt": "long", "ride_ids": "keyword", "waypoints_same_location": "boolean", "map_id": "long", "is_divided_into_subregions": "boolean", "should_process_whole_region": "boolean", "subpartition_id": "keyword", "is_cycle_swap": "boolean", "is_chain_swap": "boolean", "contains_shared_job": "boolean", "supply_assignment_group_id": "keyword", "supply_plan_updates": "keyword", "quality": "integer", "user_ids": "keyword"}}, "dispatchgeofenceworkers": {"fields": {"queue_name": "keyword", "driver_id": "keyword", "dispatch_driver": "keyword", "queue_actions": "keyword", "queue_log": "keyword", "queue_entry": "keyword", "is_driver_id_int": "boolean", "queue_action": "keyword", "queue_action_name": "keyword", "driver_ids": "keyword", "result": "keyword", "lyft_region": "keyword", "dispatch_region": "keyword", "linear_model": "keyword", "estimate": "keyword", "session_id": "keyword", "ride_id": "keyword", "bucket": "keyword", "s3_key": "keyword", "max_queue_length": "keyword", "caps_by_ride_type": "keyword", "queue_id": "keyword", "hour": "keyword", "ghost_matching_result_id": "keyword", "log_level": "keyword", "driver_lyft_id": "keyword", "queue_region": "keyword", "fifo_geofence": "keyword", "user_id": "keyword", "fifo_geofence_name": "keyword", "supply_id": "keyword", "pre_dispatch_status": "keyword"}}}, "version": "090fe83220acb55ee23a81a99590839fc85f63df", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "dispatchavailability": {"name": "dispatchavailability", "description": "Returns nearby drivers and their estimated pickup times for a given location", "repository": "git@github.com:lyft/dispatchavailability.git", "image_type": "service", "service_tier": 1, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py38.9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}]}}, "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}], "limits": {"environment": {"development": {"memory": "0.5Gi", "cpu": 0.55}}}}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/dispatchavailability", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}}], "facets": [{"name": "main", "member": "dispatchavailability.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 8, "max_size": 200}}}}, {"name": "canary", "member": "dispatchavailability.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "dispatchavailability.legacy"]}, {"name": "integration", "members": ["ats.qa_approve", "auth.dev", "dispatch.integration", "legacyridetypes.dev", "locations.dev", "publicapi.dev", "ridetimeestimator.dev", "routesapi.dev", "routes.dev", "usergroups.dev", "users.dev", "dispatchavailability.dev"]}], "pulldeploy_components": {"data": ["marketplaceconfig", "translationdata", "regioncfgdata"]}, "tests": [{"name": "startup", "type": "startup", "group": "dispatchavailability.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "virtualenv": "service_venv", "markers": "not unit_legacy"}, {"name": "integration", "type": "execution", "group": "dispatchavailability.integration", "container": "dispatchavailability.legacy", "command": "make test_integration"}, {"name": "unit_legacy", "type": "execution", "container": "dispatchavailability.legacy", "group": "dispatchavailability.dev", "framework": "pytest", "coverage": false, "targets": ["tests/unit"], "virtualenv": "service_venv", "markers": "unit_legacy"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "pagerduty_escalation_policy": "Dispatch", "team_email": "dispatch@lyft.com", "slack": "#dispatch-bots", "slack_deploy_notification_environments": ["staging", "canary", "production"], "envoy": {"profile": "python", "settings": {"services": [{"name": "dispatchavailability"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"etaproxy": null, "dispatch": null, "ridelocations": null, "ridetimeestimator": null, "usergroups": null, "users": null, "tcs": null, "legacyridetypes": null, "offerings": null, "regions": null, "ratelimit": null}, "external_hosts": {"firehose_iad": null, "dynamodb_iad": null}}}}, "logging": {"dispatchavailability": {"fields": {"user_id": "keyword", "major_app_version": "keyword", "is_internal": "boolean", "client_type": "keyword", "os": "keyword", "message": "keyword", "endpoint": "keyword", "error_code": "long", "client_id": "keyword", "error_class": "keyword", "status_code": "long", "region": "keyword", "ride_type": "keyword", "ride_id": "keyword"}}}, "version": "e0562dfeffa1ca025c8eb8a72c0a46c729823c64", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "py38", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "dispatchforesight": {"name": "dispatchforesight", "description": "Predicting rider requests and pre-dispatch drivers to them", "repository": "git@github.com:lyft/dispatchforesight.git", "slack": "#core-dispatch", "team_email": "core-dispatch@lyft.com", "pagerduty_escalation_policy": "dispatchforesight", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/dispatchforesight", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dispatchforesight.legacy", "dynamodb.dev"]}, {"name": "integration", "members": ["dispatchforesight.dev", "ghostmatching.dev", "venues.dev"]}, {"name": "service_group", "members": ["dispatchforesight.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "dispatchforesight.dev"}, {"name": "unit", "type": "jailed", "command": "service_venv pytest --cov=app --junitxml=build/unit.xml --cov-report=xml tests/unit", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "command": "service_venv pytest --junit-xml=build/int.xml tests/integration", "container": "dispatchforesight.legacy", "group": "dispatchforesight.integration"}], "facets": [{"name": "main", "member": "dispatchforesight.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 3, "max_size": 10}}}}, {"name": "canary", "member": "dispatchforesight.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "dispatchforesight"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "internal_hosts": {"badcompanions": null, "dispatchforesight": null, "ghostmatching": null, "places": null, "predispatchjobs": null, "tcs": null, "usergroups": null, "venues": null}}}}, "pulldeploy_components": {"data": ["marketplaceconfig"]}, "version": "68de7dae8289a87c8c5a3a65b7b8cd2dee087259", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "dispatchmodels": {"name": "dispatchmodels", "description": "Provides core datascience models which power dispatch decisions", "repository": "git@github.com:lyft/dispatch-models.git", "image_type": "library", "languages": ["python"], "credentials_legacy": false, "containers": [{"name": "devel", "privileged": true, "command": "/bin/bash -c 'while true; do sleep 3600; done'"}], "groups": [{"name": "dev", "members": ["control.dev", "dispatchmodels.devel"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_python2", "type": "jailed", "command": "python2.7 -3 -m nose --with-doctest --logging-level=INFO"}, {"name": "unit_python3", "type": "jailed", "command": "python3.6 -m nose --with-doctest --logging-level=INFO"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "slack": "#dispatch-bots", "team_email": "dispatch@lyft.com", "version": "245a727ef59420424bba6476cab52aed28b8b6bd", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "dispatchoffline": {"name": "dispatchoffline", "description": "A service to train models and generate static data for dispatch using modelbuilder", "repository": "git@github.com:lyft/dispatchoffline.git", "image_type": "service", "service_tier": 3, "pagerduty_escalation_policy": "Dispatch", "team_email": "dispatch@lyft.com", "languages": ["bash", "python"], "credentials": true, "pulldeploy_components": {"data": ["regioncfgdata", "marketplaceconfig"]}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/dispatchoffline", "limits": {"cpu": 1, "memory": "3.75Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}}, {"name": "sendexperimentupdates", "command": "dumb-init -- service_venv python manage.py send_experiment_updates", "workdir": "/code/dispatchoffline", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dispatchoffline.legacy"]}, {"name": "service_group", "members": ["dispatchoffline.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "dispatchoffline.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "execution", "group": "dispatchoffline.dev", "container": "dispatchoffline.legacy", "command": "make test_unit"}], "slack": "#dispatch-bots", "slack_deploy_notification_environments": ["staging", "canary", "production"], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "staging-k8s", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "acl": {"admin_policies": ["kubernetes-dispatch"]}}}], [{"name": "production", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-k8s", "legacy": false, "kubernetes": {"enabled": true, "acl": {"admin_policies": ["kubernetes-dispatch"]}}, "targets": [{"facet": "main"}, {"facet": "sendexperimentupdatescron"}]}]], "facets": [{"name": "main", "member": "dispatchoffline.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "sendexperimentupdatescron", "member": "dispatchoffline.sendexperimentupdates", "type": "cron", "schedule": "*/2 * * * *"}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:c749320158a68b1cb4bb944264033635ec49d2fa", "sub_image": "k8s"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "dispatchoffline"}]}}, "version": "4de117e17d69115f36a2154a67a6b0d8ccf1a378", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c749320158a68b1cb4bb944264033635ec49d2fa", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "distributedlock": {"name": "distributedlock", "description": "distributedlock", "repository": "git@github.com:lyft/distributedlock.git", "image_type": "service", "languages": ["go"], "credentials": false, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "ratelimit.dev", "distributedlock.service"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igocli:167a543bc75079b04de71df492b54e0b391a6a26", "sub_image": "k8s"}}, {"name": "docker_build", "params": {}}]}}, "tests": [{"name": "startup", "type": "startup", "group": "distributedlock.dev"}, {"name": "unit", "type": "execution", "group": "distributedlock.dev", "container": "distributedlock.service", "command": "make test_unit"}], "service_tier": 2, "slack": "#async-tasks-platform", "team_email": "async-tasks-platform@lyft.com", "pagerduty_escalation_policy": "Async Tasks Platform", "slack_deploy_notification_environments": ["canary", "production"], "deploy": [{"name": "staging", "legacy": true, "automatic": true}, {"name": "canary", "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "distributedlock"}], "common_settings": {"internal_hosts": {"ratelimit": null}, "external_hosts": {"dynamodb_iad": null}}}}, "logging": {"distributedlock": {"fields": {"requestId": "keyword", "ServiceName": "keyword", "ResourceID": "keyword", "MetaData": "keyword", "Lease time in seconds": "long", "LeaseID": "keyword", "method": "keyword", "path": "keyword", "host": "keyword", "Lease extension in seconds": "long", "service": "keyword", "signal": "keyword", "code": "keyword", "request_id": "keyword", "lyft_user_id": "keyword", "error": "keyword", "downstream_cluster": "keyword", "endpoint": "keyword"}}}, "version": "06895e3333f698932eb15ebec662412d248fe845", "images": [{"parent": {"name": "s2igocli", "version": "167a543bc75079b04de71df492b54e0b391a6a26", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "dlcfeatures": {"name": "dlcfeatures", "description": "Service to hold medium size driver lifecycle features", "repository": "git@github.com:lyft/dlcfeatures.git", "slack": "#dvr-lifecycle", "team_email": "driver-lifecycle@lyft.com", "pagerduty_escalation_policy": "Referrals Team", "image_type": "service", "service_tier": 2, "languages": ["python"], "credentials": false, "notification_overrides": {"deploy": {"slack": "#acq-incentives-bot", "environments": ["production", "canary", "staging"]}, "deploy_failure": {"slack": "#acq-incentives-bot"}, "test_failure": {"slack": "#acq-incentives-bot", "email": "acq-incentives-referrals@lyft.com", "environments": ["production"]}, "master_failure": {"slack": "#acq-incentives-bot"}, "pr_merge": {"slack": "#acq-incentives-bot"}, "pr_open": {"slack": "#acq-incentives-bot"}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.949781cc88ec78616c8cd3d9a22f3bba32c7b743", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dlcfeatures.legacy"]}, {"name": "service_group", "members": ["dlcfeatures.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "dlcfeatures.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "dlcfeatures.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "dlcfeatures.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "dlcfeatures"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"places": null, "regions": null, "supply": null, "supplyrecords": {"tls_enabled": true}, "users": null}}}}, "version": "b49b21059c99a63e460a2a107a08722361d3cf8f", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "949781cc88ec78616c8cd3d9a22f3bba32c7b743", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "dnsmasq": {"name": "dnsmasq", "description": "an on node dns server to establish container locations", "repository": "git@github.com:lyft/containers.git:dnsmasq", "slack": "#devx-bots", "team_email": "compute-team@lyft.com", "docs": {"section": "Infrastructure"}, "containers": [{"name": "server", "start_time": 60, "network": "host", "privileged": true, "start_phase": "sequential_init", "mounts": ["/etc/dnsmasq.d"]}], "groups": [{"name": "dev", "members": ["dnsmasq.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "dnsmasq.dev"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false}, {"name": "canary", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false}], "languages": ["bash"], "image_type": "tool", "version": "7add1c54c0f07987f13284c3af07488852e0a8d9", "images": [{"parent": {"name": "imagebase", "version": "7230c6b81f80c82005fd59dcb647149b4767134a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "7230c6b81f80c82005fd59dcb647149b4767134a", "sub_image": null, "external": false}}, "dockerauth": {"name": "dockerauth", "description": "docker authentication server for in-house docker registry", "repository": "git@github.com:lyft/containers.git:dockerauth", "slack": "#provisioning-team-v3", "pagerduty_escalation_policy": "Provisioning", "team_email": "provisioning-team@lyft.com", "languages": ["bash", "go"], "image_type": "service", "service_tier": 3, "docs": {"section": "Infrastructure"}, "builder": {"name": "s2i", "params": {"builder": "lyft/s2igocli:cd9d4ee0e4b25a6f77ef614983fc562dbc20525d"}}, "containers": [{"name": "spin", "command": "sleep infinity"}], "facets": [{"name": "iad", "type": "service", "member": "dockerauth.spin"}, {"name": "pdx", "type": "service", "member": "dockerauth.spin"}, {"name": "lyftlearn", "type": "service", "member": "dockerauth.spin"}], "deploy": [{"name": "production", "legacy": false, "kubernetes": {"enabled": true, "mode": "direct", "clusterLabels": {"cluster.lyft.net/role": "infra"}}, "orca": [{"region": "iad"}], "automatic": false}], "version": "44ea3b71e7589afcd76700ba5b58bd87b5a636d3", "images": [{"parent": {"name": "s2igocli", "version": "cd9d4ee0e4b25a6f77ef614983fc562dbc20525d", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "cd9d4ee0e4b25a6f77ef614983fc562dbc20525d", "sub_image": null, "external": false}}, "dockerpruner": {"name": "dockerpruner", "description": "for deleting out of date docker images in the private registry", "repository": "git@github.com:lyft/containers.git:dockerpruner", "slack": "#provisioning-team-v3", "team_email": "provisioning-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "credentials": false, "docs": {"section": "Infrastructure"}, "deploy": [{"name": "development", "legacy": false}, {"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "mode": "direct", "clusterLabels": {"cluster.lyft.net/role": "infra", "cluster.lyft.net/environment": "production"}}}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "mode": "direct", "clusterLabels": {"cluster.lyft.net/role": "infra"}}}], "languages": ["bash"], "image_type": "service", "service_tier": 3, "version": "e96164bf0317b4a28110920d44eab627f05d04bc", "images": [{"parent": {"name": "python", "version": "b5b9a85909b06f711a550d9580cd00c3b425ee00", "external": false}, "sub_image": null}], "parent": {"name": "python", "version": "b5b9a85909b06f711a550d9580cd00c3b425ee00", "external": false}}, "dockerregistry": {"name": "dockerregistry", "description": "docker registry for k8s", "repository": "git@github.com:lyft/containers.git:docker-registry", "slack": "#provisioning-team-v3", "team_email": "provisioning-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "image_type": "service", "service_tier": 2, "containers": [{"name": "spin", "command": "sleep infinity"}], "facets": [{"name": "iad", "type": "service", "member": "dockerregistry.spin"}, {"name": "pdx", "type": "service", "member": "dockerregistry.spin"}, {"name": "lyftlearn", "type": "service", "member": "dockerregistry.spin"}], "deploy": [{"name": "testing", "legacy": false, "orca": [], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "infra", "cluster.lyft.net/environment": "staging"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}}}, {"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "infra", "cluster.lyft.net/environment": "production"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}}}, [{"name": "production-infra", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"path": "environment/production/infra", "enabled": true, "cluster_labels": {"cluster.lyft.net/role": "infra"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}}}, {"name": "production-lyftlearn-av", "legacy": false, "kubernetes": {"path": "environment/production/lyftlearn-av", "enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml-av"}, "cluster_labels": {"cluster.lyft.net/role": "lyftlearn-av"}}}], {"name": "production", "legacy": false}], "version": "68db8808b616d48e93cea8edef66bc7c08daf0bd", "images": [{"parent": {"name": "imagebase", "version": "2e52f7ae1d92d67dc2f2ef3ebe983793475c4954", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "2e52f7ae1d92d67dc2f2ef3ebe983793475c4954", "sub_image": null, "external": false}}, "docs": {"name": "docs", "description": "a service for docs", "repository": "git@github.com:lyft/docs.git", "credentials": true, "credentials_legacy": true, "frontend": {"node_version": "10.14.1-1nodesource1"}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "web", "port": 8080}]}, {"name": "build", "command": "service_venv python manage.py build", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "reindex", "command": "service_venv python manage.py search reindex", "mounts": ["/var/run/docker_sockets", "/srv/control"]}], "tests": [{"name": "startup", "type": "startup", "group": "docs.dev"}, {"name": "lint", "type": "jailed", "command": "make test_lint", "reports": {"pylint": "test/results/flake8-results.txt"}}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"pylint": "test/results/flake8-results.txt"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "groups": [{"name": "dev", "members": ["control.minimal", "envoy.dev", "docs.legacy"]}, {"name": "builddev", "members": ["docs.dev", "docs.build"]}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "slack": "#devx-bots", "team_email": "devx-team@lyft.com", "pagerduty_escalation_policy": "Fedex", "languages": ["bash", "javascript", "python"], "image_type": "service", "docs": {"autogen_modules": ["docsweb"]}, "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "docs"}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "version": "c68ed7cab3e21e5264af89aed1e209f861fe4d47", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "dotnetlyftanalyticsclient": {"name": "dotnetlyftanalyticsclient", "description": ".NET library to send analytics events", "repository": "git@github.com:lyft/dotnet-lyft-analytics-client.git", "image_type": "library", "slack": "#transit-deploy", "team_email": "transit-server-team@lyft.com", "credentials": false, "languages": ["csharp"], "containers": [{"name": "test", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["dotnetlyftanalyticsclient.test"]}], "tests": [{"name": "start", "type": "startup", "group": "dotnetlyftanalyticsclient.dev", "run_in_pr": true, "run_in_dev": true}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "run_in_pr": true, "run_in_dev": true}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "18:00 America/Los_Angeles"}, "deploy": [{"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad", "service_instance": "production"}]}], "version": "d12a983675052ab5691a1f6c4503502f4ce8de6f", "images": [{"parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}}, "dotnetlyftconfigset": {"name": "dotnetlyftconfigset", "description": ".NET package for Lyft Configsets from Runtime", "repository": "git@github.com:lyft/dotnet-lyft-configset.git", "image_type": "library", "slack": "#transit-deploy", "team_email": "transit-server-team@lyft.com", "credentials": false, "languages": ["csharp"], "containers": [{"name": "test", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["dotnetlyftconfigset.test"]}], "tests": [{"name": "start", "type": "startup", "group": "dotnetlyftconfigset.dev", "run_in_pr": true, "run_in_dev": true}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "run_in_pr": true, "run_in_dev": true}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "18:00 America/Los_Angeles"}, "deploy": [{"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad", "service_instance": "production"}]}], "version": "a57029b2e15233fb71b75bc8513e2876950f2e2b", "images": [{"parent": {"name": "dotnetbase", "version": "644f2bb4a059e4fd62b9709b5f26980f88d4377b", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "644f2bb4a059e4fd62b9709b5f26980f88d4377b", "sub_image": "sdk", "external": false}}, "dotnetlyftgtfs": {"name": "dotnetlyftgtfs", "description": ".NET collection of GTFS helpers", "repository": "git@github.com:lyft/dotnet-lyft-gtfs.git", "image_type": "library", "slack": "#transit-deploy", "team_email": "transit-server-team@lyft.com", "credentials": false, "languages": ["csharp"], "containers": [{"name": "test", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["dotnetlyftgtfs.test"]}], "tests": [{"name": "start", "type": "startup", "group": "dotnetlyftgtfs.dev", "run_in_pr": true, "run_in_dev": true}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "run_in_pr": true, "run_in_dev": true}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "18:00 America/Los_Angeles"}, "deploy": [{"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad", "service_instance": "production"}]}], "version": "ac489fd8af6aeab6c18fdf83d1192fcd612ddd5c", "images": [{"parent": {"name": "dotnetbase", "version": "99874d949925f0d50f8ac154f1534f9eb613da74", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "99874d949925f0d50f8ac154f1534f9eb613da74", "sub_image": "sdk", "external": false}}, "dotnetlyftkinesis": {"name": "dotnetlyftkinesis", "description": ".NET package for StatsD support", "repository": "git@github.com:lyft/dotnet-lyft-kinesis.git", "image_type": "library", "slack": "#transit-deploy", "team_email": "transit-server-team@lyft.com", "credentials": false, "languages": ["csharp"], "containers": [{"name": "test", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["dotnetlyftkinesis.test"]}], "tests": [{"name": "start", "type": "startup", "group": "dotnetlyftkinesis.dev", "run_in_pr": true, "run_in_dev": true}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "run_in_pr": true, "run_in_dev": true}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "18:00 America/Los_Angeles"}, "deploy": [{"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad", "service_instance": "production"}]}], "version": "520015eb57410787a22aa2dbd187078cc3b42063", "images": [{"parent": {"name": "dotnetbase", "version": "644f2bb4a059e4fd62b9709b5f26980f88d4377b", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "644f2bb4a059e4fd62b9709b5f26980f88d4377b", "sub_image": "sdk", "external": false}}, "dotnetlyftlogging": {"name": "dotnetlyftlogging", "description": ".NET package for StatsD support", "repository": "git@github.com:lyft/dotnet-lyft-logging.git", "image_type": "library", "slack": "#transit-deploy", "team_email": "transit-server-team@lyft.com", "credentials": false, "languages": ["csharp"], "containers": [{"name": "test", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["dotnetlyftlogging.test"]}], "tests": [{"name": "start", "type": "startup", "group": "dotnetlyftlogging.dev", "run_in_pr": true, "run_in_dev": true}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "run_in_pr": true, "run_in_dev": true}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "18:00 America/Los_Angeles"}, "deploy": [{"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad", "service_instance": "production"}]}], "version": "8274d57bd8ee476ed23942ddfcff8a7188e5e686", "images": [{"parent": {"name": "dotnetbase", "version": "57b7045a3026d9342723a38b89bf9bc474e000f9", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "57b7045a3026d9342723a38b89bf9bc474e000f9", "sub_image": "sdk", "external": false}}, "dotnetlyftpostgres": {"name": "dotnetlyftpostgres", "description": ".NET package for postgres support", "repository": "git@github.com:lyft/dotnet-lyft-postgres.git", "image_type": "library", "slack": "#transit-deploy", "team_email": "transit-server-team@lyft.com", "credentials": false, "languages": ["csharp"], "containers": [{"name": "test", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "dotnetlyftpostgres.test"]}], "tests": [{"name": "start", "type": "startup", "group": "dotnetlyftpostgres.dev", "run_in_pr": true, "run_in_dev": true}, {"name": "unit", "type": "execution", "command": "make test_unit", "group": "dotnetlyftpostgres.dev", "container": "dotnetlyftpostgres.test", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "run_in_pr": true, "run_in_dev": true}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "18:00 America/Los_Angeles"}, "deploy": [{"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad", "service_instance": "production"}]}], "version": "6f17ec965c339a2f1a8801eac46372541f0f91d3", "images": [{"parent": {"name": "dotnetbase", "version": "17b88ba64e260355b5ef3f0b4e6fb24448f7a262", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "17b88ba64e260355b5ef3f0b4e6fb24448f7a262", "sub_image": "sdk", "external": false}}, "dotnetlyftredis": {"name": "dotnetlyftredis", "description": ".NET package for Redis support", "repository": "git@github.com:lyft/dotnet-lyft-redis.git", "image_type": "library", "slack": "#transit-deploy", "team_email": "transit-server-team@lyft.com", "credentials": false, "languages": ["csharp"], "containers": [{"name": "test", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["dotnetlyftredis.test"]}], "tests": [{"name": "start", "type": "startup", "group": "dotnetlyftredis.dev", "run_in_pr": true, "run_in_dev": true, "autotrigger": false}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "run_in_pr": true, "run_in_dev": true, "autotrigger": false}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "18:00 America/Los_Angeles"}, "deploy": [{"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad", "service_instance": "production"}]}], "version": "358d512d7de4c4b2112bedb74cda70b7c715df11", "images": [{"parent": {"name": "dotnetbase", "version": "cabe023eaff1f729d39c1395936d5c84b11adcac", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "cabe023eaff1f729d39c1395936d5c84b11adcac", "sub_image": "sdk", "external": false}}, "dotnetlyftrequests": {"name": "dotnetlyftrequests", "description": ".NET package for StatsD support", "repository": "git@github.com:lyft/dotnet-lyft-requests.git", "image_type": "library", "slack": "#transit-deploy", "team_email": "transit-server-team@lyft.com", "credentials": false, "languages": ["csharp"], "containers": [{"name": "test", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["dotnetlyftrequests.test"]}], "tests": [{"name": "start", "type": "startup", "group": "dotnetlyftrequests.dev", "run_in_pr": true, "run_in_dev": true}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "run_in_pr": true, "run_in_dev": true}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "18:00 America/Los_Angeles"}, "deploy": [{"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad", "service_instance": "production"}]}], "version": "6fa6fc6f3381a8f9f6c857f3726c0aca9b033581", "images": [{"parent": {"name": "dotnetbase", "version": "ab83daa3891ebb6c4ad82ada34806306b13e15f5", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "ab83daa3891ebb6c4ad82ada34806306b13e15f5", "sub_image": "sdk", "external": false}}, "dotnetlyftstats": {"name": "dotnetlyftstats", "description": ".NET package for StatsD support", "repository": "git@github.com:lyft/dotnet-lyft-stats.git", "image_type": "library", "slack": "#transit-deploy", "team_email": "transit-server-team@lyft.com", "credentials": false, "languages": ["csharp"], "containers": [{"name": "test", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["dotnetlyftstats.test"]}], "tests": [{"name": "start", "type": "startup", "group": "dotnetlyftstats.dev", "run_in_pr": true, "run_in_dev": true}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "run_in_pr": true, "run_in_dev": true}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "18:00 America/Los_Angeles"}, "deploy": [{"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad", "service_instance": "production"}]}], "version": "ee44df393b9c61f89d70aed513f6be5e699f5922", "images": [{"parent": {"name": "dotnetbase", "version": "b83bc220e5e9187f72ed7394dbe30556e74a8b06", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "b83bc220e5e9187f72ed7394dbe30556e74a8b06", "sub_image": "sdk", "external": false}}, "dotnetlyftstdlib": {"name": "dotnetlyftstdlib", "description": ".NET package for StatsD support", "repository": "git@github.com:lyft/dotnet-lyft-stdlib.git", "image_type": "library", "slack": "#transit-deploy", "team_email": "transit-server-team@lyft.com", "credentials": false, "languages": ["csharp"], "containers": [{"name": "test", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["dotnetlyftstdlib.test"]}], "tests": [{"name": "start", "type": "startup", "group": "dotnetlyftstdlib.dev", "run_in_pr": true, "run_in_dev": true, "autotrigger": false}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "run_in_pr": true, "run_in_dev": true, "autotrigger": false}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "18:00 America/Los_Angeles"}, "deploy": [{"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad", "service_instance": "production"}]}], "version": "68d023d37abb990d3943d7c3fe49ab505e99efa3", "images": [{"parent": {"name": "dotnetbase", "version": "644f2bb4a059e4fd62b9709b5f26980f88d4377b", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "644f2bb4a059e4fd62b9709b5f26980f88d4377b", "sub_image": "sdk", "external": false}}, "dotnetlyfttransit": {"name": "dotnetlyfttransit", "description": ".NET package for StatsD support", "repository": "git@github.com:lyft/dotnet-lyft-transit.git", "image_type": "library", "slack": "#transit-deploy", "team_email": "transit-server-team@lyft.com", "credentials": false, "languages": ["csharp"], "containers": [{"name": "test", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "dotnetlyfttransit.test"]}], "tests": [{"name": "start", "type": "startup", "group": "dotnetlyfttransit.dev", "run_in_pr": true, "run_in_dev": true}, {"name": "unit_new", "type": "execution", "command": "make test_unit", "group": "dotnetlyfttransit.dev", "container": "dotnetlyfttransit.test", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "run_in_pr": true, "run_in_dev": true, "autotrigger": false}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "18:00 America/Los_Angeles"}, "deploy": [{"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad", "service_instance": "production"}]}], "version": "55b98ad06ce55a2603d2384047b7e2653cb4051a", "images": [{"parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}}, "drelephant": {"name": "drelephant", "description": "Fork of LinkedIn's Dr. Elephant", "repository": "git@github.com:lyft/dr-elephant.git", "slack": "#data-platform-dev", "team_email": "astahlman@lyft.com", "pagerduty_escalation_policy": "Data Platform Tools", "containers": [{"name": "spin", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["drelephant.spin"]}], "tests": [{"name": "test", "type": "execution", "group": "drelephant.dev", "container": "drelephant.spin", "command": "activator -Dsbt.repository.config=app-conf/resolver.conf test"}], "deploy": [{"name": "development", "automatic": true, "legacy": true}, {"name": "staging", "automatic": true, "legacy": true}, {"name": "production", "automatic": false, "legacy": true}], "languages": ["java"], "image_type": "service", "service_tier": 2, "version": "8b264db2ef26dffc8f00f2793a2ab0315f3aa3ec", "images": [{"parent": {"name": "java8", "version": "e9e63f36a6c9539f0c410ab92de2f55f242a45a3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "e9e63f36a6c9539f0c410ab92de2f55f242a45a3", "sub_image": null, "external": false}}, "driverautopilot": {"name": "driverautopilot", "description": "API for driver autopilot feature", "repository": "git@github.com:lyft/driverautopilot.git", "slack": "#de-positioning-dev", "team_email": "rtsm-eng@lyft.com", "pagerduty_escalation_policy": "Driver Positioning", "image_type": "service", "service_tier": 1, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:ee0bc712bdeac0143a599c68e9ef335e977f91fa", "packages": ["libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py38.b53cef4fa319d93186ad696836fe2985a4b6381d", "sub_image": "k8s", "packages": ["libspatialindex-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "driverautopilot.legacy"]}, {"name": "service_group", "members": ["driverautopilot.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "driverautopilot.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "driverautopilot.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "driverautopilot.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "driverautopilot"}]}}, "version": "268cebbbf4aad3732fc57d99dd58a25e10a4f327", "images": [{"parent": {"name": "opsbase", "version": "ee0bc712bdeac0143a599c68e9ef335e977f91fa", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "b53cef4fa319d93186ad696836fe2985a4b6381d", "sub_image": "py38", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "ee0bc712bdeac0143a599c68e9ef335e977f91fa", "sub_image": null, "external": false}}, "driverbonus": {"name": "driverbonus", "description": "Give bonuses for drivers", "repository": "git@github.com:lyft/driverbonus.git", "slack": "#de-retention", "team_email": "de-retention@lyft.com", "pagerduty_escalation_policy": "DE Retention", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:c749320158a68b1cb4bb944264033635ec49d2fa", "sub_image": "k8s"}}]}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/driverbonus", "limits": {"cpu": 2.5, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "createsimridesoffer", "command": "dumb-init -- service_venv python manage.py create_offers_staging", "workdir": "/code/driverbonus", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}, {"name": "auditoffers", "command": "dumb-init -- service_venv python manage.py audit_offers", "workdir": "/code/driverbonus", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "3.0Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "driverbonus.legacy", "dynamodb.server"]}, {"name": "service_group", "members": ["driverbonus.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "driverbonus.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml"}}, {"name": "coverage", "type": "execution", "container": "driverbonus.legacy", "group": "driverbonus.dev", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "driverbonus.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 3, "max_size": 12}}}}, {"name": "canary", "member": "driverbonus.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "driverbonus"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "internal_hosts": {"driverbonus": null, "jobschedulerbulkweb": null, "ledger": null, "messaging": null, "push": null, "regions": null, "supply": null, "tcs": null, "users": null, "usergroups": null}}}}, "version": "c3663557d04d534f1a25d30dcfb5389c1d64f3c9", "images": [{"parent": {"name": "opsbase", "version": "49dd0dfae9cc8fb0ead221682d5a4e774b7fc089", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c749320158a68b1cb4bb944264033635ec49d2fa", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "49dd0dfae9cc8fb0ead221682d5a4e774b7fc089", "sub_image": null, "external": false}}, "drivercomp": {"name": "drivercomp", "description": "Compensates drivers for bad experiences", "repository": "git@github.com:lyft/drivercomp.git", "image_type": "service", "service_tier": 2, "slack": "#drivercomp", "team_email": "de-conversion@lyft.com", "pagerduty_escalation_policy": "DE Conversion", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "drivercomp.legacy"]}, {"name": "integration", "members": ["drivercomp.dev", "jobscheduler.dev"]}, {"name": "e2e", "members": ["drivercomp.integration", "simulatedrides.qa"]}], "tests": [{"name": "startup", "type": "startup", "group": "drivercomp.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "drivercomp.integration", "container": "drivercomp.legacy", "command": "make test_integration", "reports": {"junit": "build/local_integration.xml", "cobertura": "build/integration_coverage.xml"}}, {"name": "e2e", "type": "execution", "command": "make test_e2e", "group": "drivercomp.e2e", "container": "drivercomp.legacy", "virtualenv": "integration_venv", "target": "e2e_tests", "autotrigger": false, "reports": {"junit": "build/integration.xml"}}, {"name": "coverage", "type": "execution", "container": "drivercomp.legacy", "group": "drivercomp.dev", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "drivercomp"}, {"name": "drivercompbatch"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 900}}}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "internal_hosts": {"drivercomp": null, "incentiveconfig": null, "inspolicies": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "ledger": null, "locations": null, "locationsmapmatch": null, "messaging": null, "mailer": null, "payapi": null, "push": null, "regions": null, "rides": null, "routes": null, "supply": null, "tcs": null, "usergroups": null, "users": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}]}}, "logging": {"drivercomp": {"fields": {"route_id": "keyword", "ride_id": "keyword", "region": "keyword", "ride_type": "keyword", "p2_seconds": "long", "max_p2_fraction": "float", "p3_seconds": "long", "min_p3_seconds": "long", "min_p2_seconds": "long", "min_p2_fraction": "float", "incident_id": "keyword", "driver_id": "keyword", "route_earnings": {"currency": "keyword", "amount": "long"}, "p3_meters": "long", "p2_meters": "long", "adjustment_type": "keyword", "order_id": "keyword", "invoice_data": {"metadata": {"invoice_source": "keyword"}, "currency": "keyword", "counterparties": "keyword", "id": "keyword", "ancillary_id": {"id": "keyword", "domain": "keyword"}, "recognized_at": "date", "line_items": "keyword", "type": "keyword"}, "amount": "long", "max_adjustment_amount_minor": "long", "raw_adjustment_amount_minor": "long", "min_adjustment_amount_minor": "long", "rounded_adjustment_amount_minor": "long", "bonus_amount_minor": "long", "pickup_ride_id": "keyword", "dropoff_ride_id": "keyword", "bonus_currency": "keyword", "vehicle_id": "keyword", "expected_amount_minor": "long", "actual_amount_minor": "long", "sequence_id": "long", "retry_attempts": "long", "actual_bonus_amount_minor": "long", "expected_bonus_amount_minor": "long", "processed_route_ids": "keyword", "adjustment_amount_minor": "long", "currency": "keyword", "insured_at": "keyword", "provider": "keyword", "user_id": "keyword", "message": "keyword", "delight_event": "keyword", "error_code": "long", "route_discrepancies": "keyword", "ride_ids": "keyword", "invoice_id": "keyword", "start_location": "keyword", "end_time_ms": "keyword", "start_time_ms": "keyword", "end_location": "keyword", "include_fields": "keyword"}}, "drivercompbatch": {"fields": {"incident_id": "keyword", "processed_route_count": "long", "expected_route_count": "long", "num_ids": "long"}}}, "version": "5f28688406bae583f02b3bf22986341dca3bf21d", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "driverearnings": {"name": "driverearnings", "description": "Source of truth service for driver earnings accrued in between rides within a personalized heatmap.", "repository": "git@github.com:lyft/driverearnings.git", "image_type": "service", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}}, {"name": "runrecoveryflow", "command": "dumb-init -- service_venv python manage.py run_recovery_flow", "workdir": "/code/driverearnings", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "kclworker", "command": "dumb-init -- service_venv /code/kcl/kcl-worker.sh", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi"}}], "facets": [{"name": "main", "member": "driverearnings.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 80}}}}, {"name": "canary", "member": "driverearnings.service", "type": "service", "canary": true, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "kcl", "member": "driverearnings.kclworker", "type": "worker", "envoy_service": "deuserlocationskcl", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 50, "max_size": 50}}}}, {"name": "kclcanary", "member": "driverearnings.kclworker", "type": "worker", "envoy_service": "deuserlocationskcl", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "runrecoveryflow", "member": "driverearnings.runrecoveryflow", "type": "batch"}], "groups": [{"name": "dev", "members": ["control.dev", "envoy.server", "dynamodb.server", "driverearnings.legacy"]}, {"name": "integration", "members": ["dispatch.integration", "driverearnings.dev", "driverheatmaps.dev", "fanner.dev", "tcs.dev", "compliance.dev"]}, {"name": "e2e_dev", "members": ["abacus.dev", "account.dev", "ats.dev", "courier.integration", "dispatch.integration", "driverearnings.dev", "driverheatmaps.integration", "fanner.dev", "fare.dev", "jobscheduler.dev", "kinesis.server", "ledger.dev", "locations.integration", "passengerqueues.dev", "places.dev", "predispatchjobs.dev", "regions.integration", "rides.dev", "ridesapi.dev", "routes.dev", "routesapi.dev", "supply.dev", "tcs.dev", "trips.dev", "tripsapi.dev", "account.dev", "usergroups.dev", "users.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "driverearnings.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "sharded", "group": "driverearnings.integration", "container": "driverearnings.legacy", "target": "tests/integration", "virtualenv": "integration_venv", "shard_at": "testcase", "reports": {"junit": "build/integration.xml"}}, {"name": "e2e", "type": "sharded", "group": "driverearnings.dev", "execution_group": "driverearnings.e2e_dev", "container": "driverearnings.legacy", "run_in_dev": false, "run_in_pr": false, "target": "tests/e2e", "virtualenv": "integration_venv", "shard_at": "testcase", "float_dependencies": "H 5-22 * * *", "skip_threshold": 999, "reports": {"junit": "build/integration.xml"}}], "slack": "#de-positioning-deploy", "team_email": "driver-positioning-core@lyft.com", "pagerduty_escalation_policy": "Driver Positioning", "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "kcl"}, {"facet": "runrecoveryflow"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "kclcanary"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "kcl"}], "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "kcl"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "kcl"}, {"facet": "canary"}, {"facet": "kclcanary"}, {"facet": "runrecoveryflow"}]}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "service_tier": 1, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": "k8s", "packages": ["default-jre-headless", "liblog4j1.2-java"]}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "driverearnings"}, {"name": "driverearningsbatch"}, {"name": "deuserlocationskcl"}], "common_settings": {"internal_hosts": {"driverheatmaps": null, "jobschedulernormalweb": null, "ledger": null, "locations": null, "passengerqueues": null, "ppzconfig": null, "predispatchjobs": null, "regions": null, "rides": null, "routes": null, "routesapi": null, "matchingexecution": null, "supply": null, "tcs": null, "usergroups": null, "users": null, "venues": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}}, "override_settings": [{"services": [{"name": "driverearnings", "service_instance": "development"}], "settings": {"internal_hosts": {"ats": null, "dispatch": null, "driverearnings": null, "ridesapi": null}}}, {"services": [{"name": "driverearningsbatch"}], "settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"ats": null, "dispatch": null, "driverearnings": null, "jobschedulerbulkweb": null, "ridesapi": null}}}]}}, "logging": {"driverearnings": {"fields": {"driver_id": "keyword", "event_name": "keyword", "event_data": "keyword", "ride_id": "keyword", "route_id": "keyword", "order_region": "keyword", "expected_bonus": "long", "bonus_delta": "long", "actual_bonus": "long", "event_timestamp_ms": "keyword", "earnings_state": "keyword", "state": "keyword", "event": "keyword", "event_region": "keyword", "earnings_multiplier": "long", "total_earnings": "long", "earnings_currency": "keyword", "earnings_exponent": "long", "earnings_amount": "float", "event_id": "keyword", "error": "keyword", "error_type": "keyword", "record_status": "keyword", "last_updated_at_ms": "keyword", "old_state": "keyword", "old_last_updated_at_ms": "keyword", "old_revision": "long", "revision": "long", "previous_state": "keyword", "current_state": "keyword", "age_ms": "long", "ignoring": "boolean", "event_route_id": "keyword", "record_route_id": "keyword", "bonus_amount": "long", "order_id": "keyword", "passenger_id": "keyword", "current_route_id": "keyword", "earnings_cap": "long", "multiplied_earnings": "long", "user_id": "keyword", "bonus_id": "keyword", "currency": "keyword", "accumulated_earnings": "long", "route_in_record": "keyword", "current_ride_id": "keyword", "record_state": "keyword", "event_time_ms": "keyword", "record_updated_ms": "keyword", "map_id": "keyword", "lng": "float", "lat": "float", "request_data": "keyword", "failed_record_count": "long", "attempt_num": "long"}}}, "version": "8b3cd5d2005c9e6e6365ff6f9b564d7dfd8c4700", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "driverfrontend": {"name": "driverfrontend", "description": "Web frontend for driver onboarding", "repository": "git@github.com:lyft/driverfrontend.git", "image_type": "service", "languages": ["bash", "javascript"], "credentials": true, "frontend": {"node_version": "10.14.1-1nodesource1"}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "groups": [{"name": "dev", "members": ["control.dev", "driverfrontend.legacy", "vehicleinspection.dev", "onboardingflow.dev"]}, {"name": "integration", "members": ["driverfrontend.dev", "wwwdriveronboardingfe.integration", "vehicleinspection.dev"]}], "slack": "#do-eng-all", "team_email": "driver-onboarding@lyft.com", "pagerduty_escalation_policy": "Driver Applicant Onboarding", "tests": [{"name": "startup", "type": "startup", "group": "driverfrontend.dev"}, {"name": "unit", "type": "execution", "group": "driverfrontend.dev", "container": "driverfrontend.legacy", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "notification_overrides": {"behind_notifications": {"slack": "#do-funnel-bots"}, "pr_merge": {"slack": "#do-funnel-bots"}, "deploy": {"slack": "#do-funnel-bots"}, "deploy_failure": {"slack": "#do-funnel-bots"}}, "deploy": [{"name": "staging", "legacy": true, "automatic": true}, {"name": "canary", "legacy": true}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "service_tier": 1, "pulldeploy_components": {"data": ["translationdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "driverfrontend"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"ats": null, "users": null, "www2": null, "tcs": null, "wwwdriveronboardingfe": null, "onboardingflow": null}}}}, "version": "7deb5e3fec8b3ea8ecb7de5570cf945a466fccd9", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "driverheatmaps": {"name": "driverheatmaps", "description": "The Driver Heatmaps service manages driver personal heatmaps.", "repository": "git@github.com:lyft/driverheatmaps.git", "image_type": "service", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/driverheatmaps", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}}, {"name": "simregiontemplategeneration", "command": "dumb-init -- service_venv python manage.py sim_region_templates", "workdir": "/code/driverheatmaps", "sub_image": "k8s", "limits": {"cpu": 1}}], "facets": [{"name": "main", "member": "driverheatmaps.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-driverheatmaps-env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 4, "max_size": 100}}}}, {"name": "canary", "member": "driverheatmaps.service", "canary": true, "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-driverheatmaps-env.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "simregiontemplategenerationcron", "member": "driverheatmaps.simregiontemplategeneration", "type": "cron", "schedule": "*/5 * * * *"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "redis.dev", "driverheatmaps.legacy", "idl.server", "spots.dev"]}, {"name": "integration", "members": ["driverheatmaps.dev", "spots.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "driverheatmaps.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "driverheatmaps.dev", "container": "driverheatmaps.legacy", "command": "make test_integration"}], "upstream_tests": {"on_commit": true, "test_set": {"driverearnings": ["integration"]}}, "slack": "#de-positioning-deploy", "team_email": "driver-positioning-core@lyft.com", "pagerduty_escalation_policy": "Driver Positioning", "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "simregiontemplategenerationcron"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "simregiontemplategenerationcron"}]}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "service_tier": 1, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "driverheatmaps"}, {"name": "driverheatmapsbatch"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"dispatch": null, "driverheatmaps": null, "etaproxy": null, "jobschedulernormalweb": null, "jobschedulerbulkweb": null, "matchingexecution": null, "regions": null, "ratelimit": null, "ridelocations": null, "routes": null, "routesapi": null, "spots": null, "supply": null, "supplycontroller": null, "supplycontrollerbatch": null, "tcs": null, "usereligibilities": null, "usergroups": null, "users": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "redis": {"driverheatmapsmultiredis": {"port": 6380}}}}}, "logging": {"driverheatmapsbatch": {"fields": {"key_count": "long", "message": "keyword"}}, "driverheatmaps": {"fields": {"driver_id": "keyword", "ride_id": "keyword", "event_name": "keyword", "event_data": "keyword", "heatmap_id": "keyword", "status": "keyword", "lat": "float", "lng": "float", "lat_min": "float", "lng_min": "float", "lat_max": "float", "lng_max": "float", "origin_geohash": "float", "route_id": "keyword", "invalidation_reason": "keyword", "region": "keyword", "starting_bonus_minor": "float", "bonus_increment_interval_s": "long", "heatmap_level": "long", "max_bonus_minor": "float", "bonus_increment_minor": "float", "scheduled_heatmap_id": "keyword", "padded_geohashes": "keyword", "extra_geohash_count": "long", "combined_geohashes": "keyword", "original_level_1_geohashes": "keyword", "original_level_2_geohashes": "keyword", "error": "keyword", "venue_name": "keyword", "user_eligible": "boolean", "current_level_starting_bonus_minor": "float", "previous_level_starting_bonus_minor": "float", "app_version": "keyword", "user_region": "keyword", "geohash": "keyword", "age_ms": "long", "venue": "keyword", "driver_lng": "float", "driver_lat": "float", "template_id": "keyword", "driver": "keyword", "message": "keyword", "key": "keyword", "event_id": "keyword", "lag_time_ms": "long", "active_map_id": "keyword", "exc_type": "keyword", "call_signature": "keyword", "code": "long", "error_description": "keyword", "map_id": "keyword", "name": "keyword", "heatmap_region": "keyword", "message_type": "keyword", "failed_record_count": "long", "previous_level_max_bonus_minor": "float", "model_join_id": "keyword", "attempt_num": "long", "current_level_max_bonus_minor": "float", "key_count": "long", "config_name": "keyword", "map_name": "keyword", "geohash_4": "keyword", "origin_gh": "keyword", "level1_gh": "keyword", "level2_gh": "keyword", "num_clusters": "integer", "hotspots_region": "keyword", "hotspot": "text", "hotspot_id": "keyword", "hotspot_ids": "text", "hotspots_count": "integer", "distance": "integer", "max_distance_km": "integer", "etas": "text", "eta_threshold_secs": "integer", "start_timestamp_ms": "long", "end_timestamp_ms": "long", "level_index": "short", "level_number": "short", "collection_name": "keyword", "polyline": "text", "var": "keyword", "value": "keyword", "cell_height_degrees": "integer", "cell_width_degrees": "integer", "shortfall": "keyword", "rows": "integer", "cols": "integer", "total_locations": "integer", "num_clusters_formed": "integer", "variable": "keyword", "experiment": "keyword", "model_id": "keyword"}}}, "version": "d1fbe636cd5861d807c080d1d888950fdad91b53", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "driverloyalty": {"name": "driverloyalty", "description": "Driver eligibility for loyalty perks and rewards", "repository": "git@github.com:lyft/driverloyalty.git", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "supply.dev", "driverridesinfo.dev", "driverloyalty.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "driverloyalty.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy"}, {"name": "integration", "type": "execution", "group": "driverloyalty.dev", "container": "driverloyalty.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "container": "driverloyalty.legacy", "group": "driverloyalty.dev", "framework": "pytest", "coverage": false, "targets": ["tests/unit"], "markers": "unit_legacy"}], "slack": "#high-value-drivers-bots", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "high-value-drivers-eng@lyft.com", "pagerduty_escalation_policy": "High Value Drivers", "deploy": [{"name": "staging", "legacy": true, "automatic": true}, {"name": "canary", "legacy": true}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "driverloyalty"}, {"name": "driverloyaltybatch"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"supply": null, "tcs": null, "ats": null, "ratings": null, "driverridesinfo": null, "jobschedulernormalweb": null, "jobschedulerbulkweb": null, "www2": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}}, "override_settings": [{"services": [{"name": "driverloyalty"}], "settings": {"internal_hosts": {"drivernotification": null, "enterprise": null, "grow": null, "jobschedulerbulkweb": null, "logistics": null, "usergroups": null, "users": null}}}, {"services": [{"name": "driverloyaltybatch"}], "settings": {"internal_hosts": {"jobschedulermigrationweb": null, "logistics": null}}}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "logging": {"driverloyalty": {"fields": {"event_name": "keyword", "occurred_at": "keyword", "driver_lyft_id": "keyword", "driver_in_program": "keyword", "ghost_ride": "keyword", "ride_id": "keyword", "user_id": "keyword", "experiment_name": "keyword", "driverId": "keyword", "driver_id": "keyword", "milestone_name": "keyword", "size": "keyword", "error": "keyword", "error_description": "keyword", "path": "keyword", "reason": "keyword", "lyft_id": "keyword", "data": {"ui_template": "keyword", "notification_type": "keyword", "occurred_at": "long", "delight_submessage": "keyword", "delight_message": "keyword", "icon_image_url": "keyword", "lyft_id": "keyword"}, "url": "keyword", "error_code": "long", "sku": "keyword", "response_code": "long", "start_time_ms": "keyword", "driver": "keyword", "current_tier": "keyword", "type of exception": "keyword", "end_time_ms": "keyword"}}}, "version": "da12407f7fb5afd4752e6b09fcc6d9081966569f", "images": [{"parent": {"name": "opsbase", "version": "c17c530bb56bd092a79f652fedb68d1209d98d2c", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "c17c530bb56bd092a79f652fedb68d1209d98d2c", "sub_image": null, "external": false}}, "drivermode": {"name": "drivermode", "description": "Handles entering/exiting driver mode and selection of dispatch preferences", "repository": "git@github.com:lyft/drivermode.git", "image_type": "service", "service_tier": 0, "slack": "#driver-labs-bot", "team_email": "driver-labs-eng@lyft.com", "pagerduty_escalation_policy": "Driver Labs", "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "languages": ["python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/drivermode", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "jobscheduler.dev", "drivermode.legacy"]}, {"name": "regionswitch", "members": ["drivermode.dev", "supply.dev", "locations.dev", "regions.dev", "users.dev", "usergroups.dev", "karma.dev"]}, {"name": "qa", "members": ["drivermode.regionswitch", "rides.dev", "compliance.dev"]}], "facets": [{"name": "main", "member": "drivermode.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 10, "max_size": 400}}}}, {"name": "canary", "member": "drivermode.service", "type": "service", "canary": true, "profiling": {"enabled": false}, "autoscaling": {"min_size": 1, "max_size": 1}}], "tests": [{"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy", "coverage": false}, {"name": "startup", "type": "startup", "group": "drivermode.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "framework": "pytest", "coverage": true, "targets": ["tests/unit"], "container": "drivermode.legacy", "group": "drivermode.dev"}, {"name": "coverage", "type": "execution", "container": "drivermode.legacy", "group": "drivermode.dev", "command": "make coverage", "autotrigger": false, "reports": {"cobertura": "build/coverage.xml"}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}]}], "pulldeploy_components": {"data": ["marketplaceconfig", "translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "drivermode"}], "common_settings": {"internal_hosts": {"acceptancerate": null, "account": null, "ats": null, "compliance": null, "dispatch": null, "driverheatmaps": null, "etaproxy": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "locations": null, "messaging": null, "regions": null, "rides": null, "ridesapi": null, "routes": null, "routesapi": null, "usergroups": null, "users": null, "supply": null, "supplycontroller": null, "tcs": null, "tripsapi": null, "viewport": null, "karma": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "authorization": {"permissions": {"go_online": {"paths": ["/v1/driver-mode/enable*", "/v1/driver-mode/enter*", "/v1/driver-mode/disable*"]}, "last_ride": {"paths": ["/v1/driver-mode/enable-last-ride*", "/v1/driver-mode/disable-last-ride*"]}, "destination_mode": {"paths": ["/v1/driver-mode/enable-destination*", "/v1/driver-mode/disable-destination*", "/v1/driver-mode/destination-mode-status*"]}, "poll_driver_mode": {"paths": ["/v1/driver-mode*"]}, "guarantee": {"paths": ["/v1/driver-mode/guarantee*"]}, "blackout_periods": {"paths": ["/api/driver-mode/get-blackout-periods*", "/api/driver-mode/assign-driving-slots*"]}, "go_online_guarantee": {"paths": ["/api/driver-mode/set-go-online-guarantee*"]}, "ride_types_restricted": {"paths": ["/api/driver-mode/ride-types-restricted*"]}, "destination_check": {"paths": ["/v1/driver-mode/driver-destination-check*"]}, "signout_check": {"paths": ["/v1/driver-mode/signout-check*"]}, "change_regions": {"paths": ["/v1/driver-mode/change-regions*"]}, "driver_info": {"paths": ["/v1/driver-info*"]}}, "bindings": {"*": ["go_online", "last_ride", "destination_mode", "poll_driver_mode", "guarantee", "blackout_periods", "go_online_guarantee", "ride_types_restricted", "destination_check", "signout_check", "change_regions", "driver_info"]}}}}}, "logging": {"drivermode": {"fields": {"user_id": "keyword", "reason": "keyword", "in_driver_mode": "boolean", "ride_id": "keyword", "driver_id": "keyword", "time_ms": "keyword", "shift_type": "keyword", "error": {"endpoint": "keyword", "major_app_version": "keyword", "client_type": "keyword", "os": "keyword", "error_code": "long", "is_internal": "boolean", "user_id": "keyword", "message": {"error": "keyword", "error_description": "keyword"}, "client_id": "keyword", "error_class": "keyword"}, "revision": "long", "override_disable": "boolean", "current_ride_id": "long", "ride_status": "keyword", "enabled": "boolean", "exception_class": "keyword", "exception_code": "long", "exception": {"message": "keyword", "class": "keyword"}, "error_type": "keyword", "region": "keyword", "route_id": "keyword", "errors": "keyword", "request": "keyword", "shift_start_time_ms": "keyword", "error_id": "keyword", "field_name": "keyword", "field_value": "keyword", "event_name": "keyword", "error_msg": "keyword", "user_agent": "keyword"}}}, "version": "39d41f3e56c7c040899368d8f5698fe94ee7449c", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "drivermonitor": {"name": "drivermonitor", "description": "Monitors ride events and tracks driver stats based on actions", "repository": "git@github.com:lyft/drivermonitor.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/drivermonitor", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "1Gi"}}, {"name": "weeklypagerdutyemail", "command": "service_venv python manage.py send_pager_duty_weekly_summary", "workdir": "/code/drivermonitor", "sub_image": "k8s"}], "facets": [{"name": "main", "member": "drivermonitor.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 20}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 40}}}}, {"name": "canary", "member": "drivermonitor.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "weeklypagerdutyemailcron", "member": "drivermonitor.weeklypagerdutyemail", "type": "cron", "schedule": "0 17 * * 1"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "drivermonitor.legacy"]}, {"name": "unit", "members": ["drivermonitor.dev"]}, {"name": "integration", "members": ["drivermonitor.dev", "green.dev", "users.dev", "usergroups.dev", "supply.dev", "jobscheduler.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "drivermonitor.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "drivermonitor.integration", "container": "drivermonitor.legacy", "command": "make test_integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#driving-backend", "service_tier": 2, "team_email": "driving-eng@lyft.com", "pagerduty_escalation_policy": "Driving Team", "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "weeklypagerdutyemailcron"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "links": [{"text": "Business Metrics Dashboard", "url": "https://grafana.lyft.net/dashboard/db/driver-behavior-trackers"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}], "languages": ["python"], "image_type": "service", "pulldeploy_components": {"data": ["marketplaceconfig", "translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "drivermonitor"}, {"name": "drivermonitorbatch"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "internal_hosts": {"acceptancerate": null, "ats": null, "cancels": null, "dispatch": null, "driverearnings": null, "drivermode": null, "driverridesinfo": null, "green": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "ledger": null, "mailer": null, "messaging": null, "notes": null, "ratings": null, "regions": null, "rides": null, "ridestreaks": null, "supply": null, "supplyrecords": {"tls_enabled": true}, "tcs": null, "usergroups": null, "users": null, "venues": null}}}}, "logging": {"drivermonitor": {"fields": {"driver_id": "keyword", "tracker": "keyword", "endpoint": "keyword", "http_cmd": "keyword", "event": "keyword", "version": "long", "version_in_db": "long", "status_code": "long", "ride_id": "long", "pretend": "boolean", "offboard_score": "float", "action": "keyword", "driver_lyft_id": "keyword", "reason": "keyword", "offense_name": "keyword", "excluded": "boolean", "old_offboard_score": "float", "warning_idx": "long", "new_offboard_score": "float", "warning_threshold": "float", "major_app_version": "keyword", "os": "keyword", "error_code": "long", "message": "keyword", "is_internal": "boolean", "client_type": "keyword", "user_id": "keyword", "error_class": "keyword", "client_id": "keyword", "event_id": "keyword", "occurred_at_ms": "float", "reason_detected": "keyword", "num_strikes": "long", "star_rating_tracker": "keyword", "deactivation_score": "float", "penalty_blocked_reason": "keyword", "message_template_id": "keyword", "backup_comms": "keyword", "comms": "keyword", "model": "keyword", "error_id": "keyword", "error_msg": "keyword", "event_name": "keyword", "field_name": "keyword", "issuer": "keyword", "tracker_name": "keyword", "offense_type": "keyword", "num_offenses": "long", "num_follows": "long", "filter": "keyword"}}}, "version": "707a03b3ee19ca26e34b87a2b571753b7564afa5", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "drivernotification": {"name": "drivernotification", "description": "Campaign management and notification sending (through messaging) for driver teams", "repository": "git@github.com:lyft/drivernotification.git", "image_type": "service", "service_tier": 2, "slack": "#dxp-backend", "team_email": "dxp-backend@lyft.com", "pagerduty_escalation_policy": "Driver Earnings XP", "languages": ["python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}], "facets": [{"name": "main", "member": "drivernotification.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 1, "max_size": 15}}}}, {"name": "canary", "member": "drivernotification.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "jobscheduler.dev", "drivernotification.legacy"]}, {"name": "integration", "members": ["drivernotification.dev", "usergroups.dev"]}, {"name": "qa", "members": ["messaging.dev", "tcs.dev", "push.dev", "drivernotification.dev"]}], "configsets": ["kafkaconfigdata"], "tests": [{"name": "startup", "type": "startup", "group": "drivernotification.dev"}, {"name": "unit", "type": "execution", "group": "drivernotification.dev", "container": "drivernotification.legacy", "command": "make test_unit", "reports": {"cobertura": "build/unit_coverage.xml", "junit": "build/unittests.xml"}}, {"name": "integration", "type": "execution", "group": "drivernotification.dev", "container": "drivernotification.legacy", "command": "make test_integration", "reports": {"junit": "build/integrationtests.xml", "cobertura": "build/integration_coverage.xml"}}, {"name": "lint", "type": "execution", "group": "drivernotification.dev", "container": "drivernotification.legacy", "command": "make lint", "reports": {"flake8": "build/flake8.txt", "pylint": "build/pylint.txt"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "drivernotification"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"acceptancerate": null, "ats": null, "jobschedulernormalweb": null, "jobschedulerbulkweb": null, "userpreferences": null, "messaging": null, "push": null, "regions": null, "tcs": null, "users": null, "usergroups": null, "loyaltytiers": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipython3:f158fc443308053a55bb14f70df28b360689df17", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}]}}, "logging": {"drivernotification": {"fields": {"exception": {"message": "keyword", "class": "keyword"}}}}, "version": "43c12b13f00abb438dab4693ccdab1c44938eb32", "images": [{"parent": {"name": "s2ipython3", "version": "f158fc443308053a55bb14f70df28b360689df17", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "driveronboardingint": {"name": "driveronboardingint", "description": "Frontend for Driver Onboarding internal tools.", "repository": "git@github.com:lyft/driveronboardingint.git", "image_type": "service", "service_tier": 2, "slack": "#do-eng-all", "team_email": "do-funnel@lyft.com", "pagerduty_escalation_policy": "Driver Applicant Onboarding", "frontend": {"node_version": "10.14.1-1nodesource1"}, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "groups": [{"name": "dev", "members": ["accountfrontend.dev", "control.dev", "driveronboardingint.legacy", "tcs.legacy", "vehiclemetadata.dev", "vehicleinspection.dev", "www2.dev"]}, {"name": "integration", "members": ["accountfrontend.dev", "control.dev", "driveronboardingint.legacy", "vehiclemetadata.dev", "vehicleinspection.dev"]}, {"name": "livery", "members": ["driveronboardingint.dev", "supplypartnersfe.integration"]}], "tests": [{"name": "startup", "type": "startup", "group": "driveronboardingint.dev"}, {"name": "unit", "type": "execution", "group": "driveronboardingint.dev", "container": "driveronboardingint.legacy", "command": "make test_unit"}, {"name": "lint", "type": "execution", "group": "driveronboardingint.dev", "container": "driveronboardingint.legacy", "command": "make test_lint"}, {"name": "e2e", "type": "execution", "group": "driveronboardingint.integration", "container": "driveronboardingint.legacy", "command": "make test_e2e"}], "notification_overrides": {"behind_notifications": {"slack": "#do-funnel-bots"}, "pr_merge": {"slack": "#do-funnel-bots"}, "deploy": {"slack": "#do-funnel-bots"}, "deploy_failure": {"slack": "#do-funnel-bots"}}, "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["translationdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "driveronboardingint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"acl": {"tls_enabled": true}, "ats": {"tls_enabled": true}, "backgroundcheck": {"tls_enabled": true}, "compliance": {"tls_enabled": true}, "leadplatform": {"tls_enabled": true}, "regions": {"tls_enabled": true}, "regionsadmin": {"tls_enabled": true}, "regulatoryintegrations": {"tls_enabled": true}, "supply": {"tls_enabled": true}, "supplypartners": {"tls_enabled": true}, "supplyrecords": {"tls_enabled": true}, "tcs": {"tls_enabled": true}, "users": {"tls_enabled": true}, "vehicleinspection": {"tls_enabled": true}, "vehiclemetadata": {"tls_enabled": true}, "privacyaudit": null}}}}, "version": "669bef469bd8d97210af36050e05361acf5f6890", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "driverprompts": {"name": "driverprompts", "description": "Service to retrieve and process interactive prompts for driver app", "repository": "git@github.com:lyft/driverprompts.git", "image_type": "service", "service_tier": 1, "slack": "#driving-backend", "team_email": "driving-eng@lyft.com", "pagerduty_escalation_policy": "Driving Team", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "redis.dev", "driverprompts.legacy"]}, {"name": "qa", "members": ["driverprompts.dev", "supply.dev", "rentals.dev", "rides.dev", "regions.dev", "tcs.dev", "users.dev", "ratings.dev"]}, {"name": "integration", "members": ["ridetimeestimator.integration", "driverprompts.qa"]}], "tests": [{"name": "startup", "type": "startup", "group": "driverprompts.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "command": "make test_integration", "group": "driverprompts.integration", "container": "driverprompts.legacy"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "driverprompts"}], "common_settings": {"internal_hosts": {"driverridesinfo": null, "rides": null, "supply": null, "users": null, "regions": null, "tcs": null, "ratelimit": null, "rentals": null, "ratings": null, "usergroups": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "redis": {"driverpromptsmultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "logging": {"driverprompts": {"fields": {"prompt_type": "keyword", "survey_type": "keyword", "driver_id": "keyword", "TEMPLATE_ID": "keyword", "reason": "keyword", "key": "keyword", "exception": {"class": "keyword", "message": "keyword"}}}}, "version": "b5ac442bb3267a41819d413a109fbc837cf946e3", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "driverridesinfo": {"name": "driverridesinfo", "description": "A service to track ride metadata for drivers and answer questions like what rides did a driver take for a given timeframe", "repository": "git@github.com:lyft/driverridesinfo.git", "image_type": "service", "service_tier": 1, "slack": "#driverridesinfo", "team_email": "core-services@lyft.com", "pagerduty_escalation_policy": "API", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}], "facets": [{"name": "main", "member": "driverridesinfo.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 10, "max_size": 30}}}}, {"name": "canary", "member": "driverridesinfo.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-env.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "driverridesinfo.legacy"]}, {"name": "integration", "members": ["driverridesinfo.dev", "jobscheduler.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "driverridesinfo.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "driverridesinfo.integration", "container": "driverridesinfo.legacy", "command": "make test_integration", "reports": {"junit": "build/local_integration.xml", "cobertura": "build/integration_coverage.xml"}}, {"name": "coverage", "type": "execution", "container": "driverridesinfo.legacy", "group": "driverridesinfo.dev", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": true, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "driverridesinfo"}, {"name": "driverridesinfobatch"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 900}}}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "internal_hosts": {"jobschedulerbulkweb": null, "jobschedulermigrationweb": null, "jobschedulernormalweb": null, "rides": null, "routes": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:b3a6d48dc9c6678285cea7a073aeb8b4e0108a85", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:3258c1df880d24734bd34f6704fc48e8ae774688", "sub_image": "k8s"}}]}}, "logging": {"driverridesinfo": {"fields": {"ride_id": "keyword", "route_id": "keyword", "is_backfill": "boolean"}}}, "version": "d82efd6c43cc0432311a00e955632b1baa93a4b3", "images": [{"parent": {"name": "opsbase", "version": "c4b1fc1f3946f518018c6e4570f3de53f4eb880b", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "b3a6d48dc9c6678285cea7a073aeb8b4e0108a85", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "3258c1df880d24734bd34f6704fc48e8ae774688", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "c4b1fc1f3946f518018c6e4570f3de53f4eb880b", "sub_image": null, "external": false}}, "drivestat": {"name": "drivestat", "description": "drivestat", "repository": "git@github.com:lyft/drivestat.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn  wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/drivestat", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}}], "facets": [{"name": "main", "member": "drivestat.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls"], "autoscaling": {"criteria": {"cpu_target": 40}, "environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 200}}}}, {"name": "canary", "member": "drivestat.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "elasticsearch6.server", "mongodb.server", "drivestat.legacy", "push.legacy", "driverridesinfo.dev", "supply.dev", "redis.dev", "pricing.dev", "locations.dev", "localevents.dev", "loyaltypoints.dev", "loyaltytiers.legacy", "marketweather.dev", "idl.server"]}, {"name": "integration", "members": ["ats.dev", "drivestat.dev", "drivernotification.integration", "ridechallenges.dev", "ridehistory.dev", "ridestreaks.dev", "incentiveguarantees.dev", "tcs.dev", "redis.dev", "localevents.dev", "regions.dev"]}], "pulldeploy_components": {"data": ["regioncfgdata", "translationdata", "marketplaceconfig"]}, "tests": [{"name": "startup", "type": "startup", "group": "drivestat.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "sharded", "group": "drivestat.integration", "container": "drivestat.legacy", "target": "tests/integration", "virtualenv": "integration_venv", "autotrigger": false, "float_dependencies": "H 5-22 * * *", "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#dxp-backend", "team_email": "driver-xp-backend@lyft.com", "pagerduty_escalation_policy": "Driver Earnings XP", "deploy": [{"name": "staging", "automatic": true, "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"legacy": false, "name": "production", "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}]], "languages": ["python"], "image_type": "service", "service_tier": 1, "docs": {"autogen_modules": ["app"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "drivestat"}], "common_settings": {"internal_hosts": {"acceptancerate": null, "ats": null, "driverheatmaps": null, "drivermode": null, "drivernotification": null, "driverridesinfo": null, "green": null, "incentiveguarantees": null, "ledger": null, "localevents": null, "loyaltypoints": null, "loyaltytiers": null, "payapi": null, "push": null, "regions": null, "ridestreaks": null, "ridehistory": null, "rides": null, "routes": null, "supply": null, "supplyrecords": {"tls_enabled": true}, "tcs": null, "users": null, "pricing": null, "locations": null, "marketweather": null}, "external_hosts": {"kinesis_iad": null, "firehose_iad": null}, "redis": {"incentivesmultiredis": {"port": 6380}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}, {"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["lbzip2", "libspatialindex-dev", "libgeos-dev"]}}]}}, "logging": {"drivestat": {"fields": {"driver_id": "keyword", "start_ms": "keyword", "end_ms": "keyword", "unended_shift_exists": "boolean", "now_ms": "keyword", "seconds_worked_regular_shifts": "long", "destination_shift_exists": "boolean", "seconds_worked_shifts": "long", "unended_destination_mode_exist": "boolean", "seconds_worked_intervals": "long", "shifts_details": "keyword", "interval_details": "keyword", "user_id": "keyword", "delight_event": "keyword", "event_name": "keyword", "error_code": "long", "line_item": {"created_at": "date", "type": "keyword", "uuid": "keyword", "region": "keyword", "order_id": "keyword", "amount_currency": "keyword", "amount": "long", "id": "keyword", "ride_id": "keyword", "route_id": "keyword", "metadata": {"ratioTaxRate": "float", "displayName": "keyword", "internalNote": "keyword", "layer": "keyword", "tax_attribute": "keyword", "taxable_base": "long", "fee_location": "keyword", "entry_exit_pair_id": "keyword", "return": "boolean", "exit_date_time": "keyword", "fee_name": "keyword"}}, "bucket": "keyword", "error": {"error_code": "long", "is_internal": "boolean", "client_type": "keyword", "endpoint": "keyword", "message": {"error_description": "keyword", "error": "keyword"}, "major_app_version": "keyword", "os": "keyword"}, "message": "keyword", "ride_count": "long", "seconds_worked": "long", "response": "keyword", "status_code": "long", "region": "keyword", "start": "keyword", "end": "keyword", "route_id": "keyword", "nsq_num": "long", "nsq_topic": "keyword", "route_ids": "keyword", "shift_start": "keyword", "current_time": "keyword", "order_ids": "keyword"}}}, "version": "451e909382afd2e22a0e026c34154f202dbe931d", "images": [{"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "drivingintervals": {"name": "drivingintervals", "description": "Service that manages logic for shift sanitization.", "repository": "git@github.com:lyft/drivingintervals.git", "image_type": "service", "service_tier": 1, "slack": "#driver-labs-bot", "team_email": "driver-labs-eng@lyft.com", "pagerduty_escalation_policy": "Driver Labs", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "drivingintervals.legacy"]}, {"name": "integration", "members": ["drivingintervals.dev"]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "tests": [{"name": "startup", "type": "startup", "group": "drivingintervals.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "drivingintervals"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"jobschedulerbulkweb": null, "jobschedulernormalweb": null, "ledger": null, "regions": null, "rides": null, "routes": null, "supply": null, "users": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "logging": {"drivingintervals": {"fields": {"driver_id": "keyword", "start_ms": "keyword", "end_ms": "keyword", "ride_ids": "keyword", "route_id": "keyword", "ride_id": "keyword", "first_ride_id": "keyword", "ride_statuses": "long", "sign_out_reason": "keyword", "start_time_ms": "keyword", "end_lng": "float", "end_lat": "float", "type": "keyword", "old_end_time_ms": "long", "new_end_time_ms": "keyword", "end_time_ms": "keyword", "ride_status": "long", "start": "keyword", "hours_to_rollup": "long", "user_id": "keyword"}}}, "version": "29f1ce0c753c5f54a009bb61a18fcfef40765e4f", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "druid": {"name": "druid", "description": "Repository for provisoning druid a interactive distributed analytical database https://github.com/apache/incubator-druid", "repository": "git@github.com:lyft/druid-private.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 240, "exports": [{"name": "coordinator", "port": 8081, "protocol": "http"}, {"name": "overlord", "port": 8090, "protocol": "http"}, {"name": "broker", "port": 8082, "protocol": "http"}, {"name": "historical", "port": 8083, "protocol": "http"}, {"name": "middlemanager", "port": 8091, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "zookeeper.server", "kafka.server", "druid.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "druid.dev"}, {"name": "unittest", "type": "execution", "group": "druid.dev", "container": "druid.legacy", "command": "mvn test"}, {"name": "integrationtest", "type": "execution", "group": "druid.dev", "container": "druid.legacy", "command": "mvn failsafe:integration-test failsafe:verify"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#druid-dev-bot", "team_email": "druid-dev@lyft.com", "pagerduty_escalation_policy": "Data Infra Interactive", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "languages": ["bash", "java", "python"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "druid"}, {"name": "druidbroker"}, {"name": "druidcoordinator"}, {"name": "druidhistorical"}, {"name": "druidoverlord"}, {"name": "druidbrokerpriority"}, {"name": "druidhistoricalpriority"}], "common_settings": {"external_hosts": {"firehose_iad": null}}, "override_settings": [{"services": [{"name": "druidbroker"}, {"name": "druidbrokerpriority"}], "settings": {"local_service": {"hosts_url": "http://127.0.0.1:8082"}, "health_check_endpoint": "/status"}}, {"services": [{"name": "druidcoordinator"}], "settings": {"local_service": {"hosts_url": "http://127.0.0.1:8081"}, "health_check_endpoint": "/druid/coordinator/v1/isLeader"}}, {"services": [{"name": "druidoverlord"}], "settings": {"local_service": {"hosts_url": "http://127.0.0.1:8090"}, "health_check_endpoint": "/druid/indexer/v1/isLeader"}}, {"services": [{"name": "druid", "service_instance": "development"}, {"name": "druidbroker", "service_instance": "development"}, {"name": "druidcoordinator", "service_instance": "development"}, {"name": "druidhistorical", "service_instance": "development"}, {"name": "druidoverlord", "service_instance": "development"}], "settings": {"local_service": {"hosts_url": "http://127.0.0.1:8090"}, "health_check_endpoint": "/druid/indexer/v1/isLeader"}}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "service_tier": 3, "logging": {"druidhistorical": {"fields": {"failed_record_count": "long", "attempt_num": "long"}}}, "version": "c966c8e10ddeb7352ccd60e80358cd419ff24b55", "images": [{"parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}}, "druidingest": {"name": "druidingest", "description": "Ingestion-related abstractions and tooling for Druid.io", "repository": "git@github.com:lyft/druidingest.git", "image_type": "library", "languages": ["python"], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "slack": "#druid-dev-bot", "team_email": "druid-dev@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "version": "29e124521b62844a5d0ee1f51b7999a6a6e8dc2d", "images": [{"parent": {"name": "pythonlibrary", "version": "84c82cc74ab7a2d2bdde44d273644d7ae69eeae1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "84c82cc74ab7a2d2bdde44d273644d7ae69eeae1", "sub_image": null, "external": false}}, "druidstream": {"name": "druidstream", "description": "Service to stream data from Kinesis/kafka to druid via tranquility libraries", "repository": "git@github.com:lyft/druidstream.git", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kafka.server", "druid.dev", "druidstream.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "druidstream.dev"}, {"name": "unittest", "type": "execution", "group": "druidstream.dev", "container": "druidstream.legacy", "command": "mvn test surefire-report:report -Dcheckstyle.skip=true", "reports": {"surefire": "target/site/surefire-report.html"}}, {"name": "integration", "type": "execution", "group": "druidstream.dev", "container": "druidstream.legacy", "command": "mvn test-compile failsafe:integration-test failsafe:verify -Dcheckstyle.skip=true", "reports": {"failsafe": "target/failsafe-reports/failsafe-summary.xml"}}, {"name": "checkstyle", "type": "execution", "group": "druidstream.dev", "container": "druidstream.legacy", "command": "mvn checkstyle:check", "reports": {"checkstyle": "target/checkstyle-report.txt"}}], "slack": "#druid-dev-bot", "team_email": "dp-analyticsinfra@lyft.com", "pagerduty_escalation_policy": "Data Infra Interactive", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "languages": ["bash", "java"], "image_type": "service", "streamingplatform": {"version": "1.2-SNAPSHOT", "flink_config_overrides": [{"key": "state.backend", "value": "filesystem"}], "jobmanagers": [{"name": "druidstream", "development": {"num_taskmanagers": 2, "taskmanager": {"num_slots": 2}}, "staging": {"num_taskmanagers": 2, "taskmanager": {"num_slots": 4, "instance_type_override": "r5.xlarge"}}, "production": {"num_taskmanagers": 51, "taskmanager": {"num_slots": 4, "instance_type_override": "r5.xlarge"}}, "jobs": [{"name": "flink-kafka", "jar": "flink-kafka-1.0.1-SNAPSHOT-fat.jar", "class": "com.lyft.flinkkafka.flink.Main", "development": {"parallelism": 1}, "staging": {"parallelism": 8}, "production": {"parallelism": 200}}]}]}, "service_tier": 3, "version": "df9a067a58ec3a266a0f32df0db4893431d2f340", "images": [{"parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}}, "dryft": {"name": "dryft", "description": "super awesome real-time data processing engine", "repository": "git@github.com:lyft/dryft.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}, {"name": "service", "command": "/docker-entrypoint.sh local", "sub_image": "k8s"}, {"name": "run", "command": "/code/dryft/entrypoint.sh", "once": true, "start_phase": "sequential_init"}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "dsfeatures.dev", "dryft.service"]}, {"name": "integration", "members": ["control.dev", "dryft.dev", "jobscheduler.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "dryft.dev"}, {"name": "integration", "type": "execution", "group": "dryft.integration", "container": "dryft.service", "command": "mvn verify -P '!disable-integration-tests' --settings /settings.xml"}], "team_email": "streaming-frameworks@lyft.com", "pagerduty_escalation_policy": "dryft-test-low-urgency", "slack": "#dryft-bots", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2istreamingplatformflink:sp14.f2556c4c9097b89daf9b854ade489f42003b63f1", "sub_image": "k8s"}}, {"name": "docker_build"}]}}, "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": false}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}], "automatic": false}], "languages": ["bash", "java", "python"], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "dryft"}], "common_settings": {"external_hosts": {"kinesis_iad": null}, "internal_hosts": {"analyticsingest": null, "streamcheck": null, "dryftadmin": null, "dsfeatures": null, "dsfeatureswrites": null}}}}, "streamingplatform": {"kubernetes": true}, "version": "5313e4dcf0fda7e25033a6a966ea48bbf53dcab5", "images": [{"parent": {"name": "s2istreamingplatformflink", "version": "f2556c4c9097b89daf9b854ade489f42003b63f1", "sub_image": "sp14", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "dryftadmin": {"name": "dryftadmin", "description": "Admin service for Dryft", "repository": "git@github.com:lyft/dryftadmin.git", "image_type": "service", "service_tier": 2, "slack": "#dryft", "team_email": "streaming-frameworks@lyft.com", "pagerduty_escalation_policy": "dryft-test-low-urgency", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "dryftadmin.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "dryftadmin.dev"}, {"name": "unit", "type": "execution", "command": "make test_unit", "group": "dryftadmin.dev", "container": "dryftadmin.legacy"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "kubernetes": {"enabled": true, "mode": "direct", "cluster_tolerations": {"cluster.lyft.net/restricted": "flink"}}, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "kubernetes": {"enabled": true, "mode": "direct"}, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["featurebuilderdata", "dryft"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "dryftadmin"}, {"name": "dryftadminbatch"}], "common_settings": {"internal_hosts": {"dsfeatures": null, "dsfeatureswrites": null, "spapi": null}, "external_hosts": {"dynamodb_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "logging": {"dryftadmin": {"fields": {"exception": {"class": "keyword", "message": "keyword"}}}, "dryftadminbatch": {"fields": {"exception": {"class": "keyword", "message": "keyword"}}}}, "version": "9d06f6c0535d7514b427e5c3fdb0a6af59266246", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "dryftfusion": {"name": "dryftfusion", "description": "super awesome real-time data processing engine for fusion", "repository": "git@github.com:lyft/dryftfusion.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}, {"name": "run", "command": "/code/dryftfusion/entrypoint.sh", "once": true, "start_phase": "sequential_init"}], "groups": [{"name": "basic", "members": ["control.dev", "dsfeatures.dev", "dryftfusion.legacy"]}, {"name": "dev", "members": ["control.dev", "kafka.server", "kinesis.server", "dsfeatures.dev", "dryftfusion.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "dryftfusion.dev"}, {"name": "integration", "type": "execution", "group": "dryftfusion.dev", "container": "dryftfusion.legacy", "command": "mvn verify -P '!disable-integration-tests'"}], "team_email": "streaming-frameworks@lyft.com", "pagerduty_escalation_policy": "dryft-test-low-urgency", "slack": "#dryft-bots", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "languages": ["bash", "java"], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "dryftfusion"}, {"name": "dryftfusionjobmanager"}, {"name": "dryftfusiontaskmanager"}], "common_settings": {"external_hosts": {"kinesis_iad": null}, "internal_hosts": {"analyticsingest": null, "streamcheck": null, "dryftadmin": null, "dsfeatures": null, "dsfeatureswrites": null}}}}, "streamingplatform": {"version": "1.2-SNAPSHOT", "flink_config_overrides": [{"key": "akka.ask.timeout", "value": "240 s"}, {"key": "akka.lookup.timeout", "value": "240 s"}, {"key": "akka.watch.heartbeat.interval", "value": "30 s"}, {"key": "akka.watch.heartbeat.pause", "value": "600 s"}, {"key": "akka.framesize", "value": "40MB"}, {"key": "akka.tcp.timeout", "value": "240 s"}, {"key": "akka.watch.threshold", "value": 30}, {"key": "heartbeat.timeout", "value": 600000}, {"key": "taskmanager.memory.size", "value": 2048}, {"key": "taskmanager.network.memory.max", "value": 2147483648}, {"key": "taskmanager.network.memory.fraction", "value": 0.125}, {"key": "taskmanager.memory.segment-size", "value": "8 KB"}, {"key": "taskmanager.network.request-backoff.max", "value": 60000}, {"key": "jobmanager.web.submit.enable", "value": true}, {"key": "metrics.reporter.app.class", "value": "com.lyft.metrics.StatsDMetricReporter"}, {"key": "metrics.scope.jm", "value": "dryftfusion.jobmanager"}, {"key": "metrics.scope.jm.job", "value": "dryftfusion.jobmanager.job_name.<job_name>"}, {"key": "metrics.scope.tm", "value": "dryftfusion.taskmanager"}, {"key": "metrics.scope.tm.job", "value": "dryftfusion.taskmanager.job_name.<job_name>"}, {"key": "metrics.scope.task", "value": "dryftfusion.task.job_name.<job_name>.task_name.<task_name>"}, {"key": "metrics.scope.operator", "value": "dryftfusion.operator.job_name.<job_name>.task_name.<task_name>.operator_name.<operator_name>"}, {"key": "query.server.enable", "value": false}, {"key": "queryable-state.server.port", "value": 11000}, {"key": "queryable-state.proxy.port", "value": 12000}], "jobmanagers": [{"name": "dryftfusion", "development": {"num_taskmanagers": 1, "taskmanager": {"num_slots": 3}}, "staging": {"num_taskmanagers": 25, "taskmanager": {"num_slots": 4, "instance_type_override": "r5.xlarge"}, "instance_type_override": "r5.12xlarge"}, "production": {"num_taskmanagers": 50, "taskmanager": {"num_slots": 4, "instance_type_override": "r5.xlarge"}, "instance_type_override": "r5.12xlarge"}, "jobs": [{"name": "dryftfusion", "jar": "dryftfusion-1.0.0-SNAPSHOT.jar", "class": "com.lyft.dsp.Dryft", "description": null, "development": {"parallelism": 1}, "staging": {"parallelism": 100}, "production": {"parallelism": 200}}]}]}, "version": "a0869a69530d75e21a8dcd6fb717fbc30403e8d4", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "dsfeatures": {"name": "dsfeatures", "description": "dsfeatures", "service_tier": 0, "repository": "git@github.com:lyft/dsfeatures.git", "image_type": "service", "languages": ["go", "golang"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "elasticsearch6.server", "envoy.server", "dynamodb.server", "ratelimit.dev", "redis.dev", "featurebuilderdata.run", "dsfeatures.legacy"]}], "pulldeploy_components": {"data": ["featurebuilderdata"]}, "tests": [{"name": "startup", "type": "startup", "group": "dsfeatures.dev"}, {"name": "unit", "type": "execution", "group": "dsfeatures.dev", "container": "dsfeatures.legacy", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "dsfeatures.dev", "container": "dsfeatures.legacy", "command": "make test_integration", "schedule": "15 21 * * *"}, {"name": "coverage", "type": "execution", "group": "dsfeatures.dev", "container": "dsfeatures.legacy", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}], "slack": "#ml-platform", "notification_overrides": {"deploy": {"slack": "#ml-platform-bots", "environments": ["staging", "canary", "production"]}, "test_failure": {"slack": "#ml-platform-bots", "environments": ["production"]}, "pr_merge": {"slack": "#ml-platform-bots"}}, "team_email": "ds-platform@lyft.com", "pagerduty_escalation_policy": "DS Platform", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "go", "settings": {"services": [{"name": "dsfeatures"}, {"name": "dsfeaturesingest"}, {"name": "dsfeatureswrites"}, {"name": "dsfeaturesworker"}], "common_settings": {"internal_hosts": {"jobschedulernormalweb": null, "mailer": null, "ratelimit": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "redis": {"dsfeaturesmultiredis": {"port": 6380, "op_timeout_ms": 200}}}}}, "logging": {"dsfeatures": {"fields": {"auth_token_credential": "keyword", "aws": {"code": "keyword", "message": "keyword", "requestid": "keyword", "statuscode": "long"}, "caller": "keyword", "code": "keyword", "downstream_cluster": "keyword", "endpoint": "keyword", "error": "keyword", "feature_group": "keyword", "feature_name": "keyword", "feature_statistics_config": "keyword", "feature_version": "long", "handler": "keyword", "hitsAddend": "keyword", "host": "keyword", "httpmethod": "keyword", "ignored": {"error": "keyword", "handler": "keyword", "key": "keyword", "request": "keyword", "value": "keyword"}, "is_fraud_feature": "keyword", "localpath": "keyword", "lyft_user_id": "keyword", "method": "keyword", "path": "keyword", "bucket": "keyword", "ratelimitType": "keyword", "request": "keyword", "requestId": "keyword", "request_id": "keyword", "s3path": "keyword", "service": "keyword", "signal": "keyword", "table": "keyword"}}, "dsfeaturesingest": {"fields": {"auth_token_credential": "keyword", "aws": {"code": "keyword", "message": "keyword", "requestid": "keyword", "statuscode": "long"}, "caller": "keyword", "code": "keyword", "downstream_cluster": "keyword", "endpoint": "keyword", "error": "keyword", "feature_group": "keyword", "feature_name": "keyword", "feature_statistics_config": "keyword", "feature_version": "long", "handler": "keyword", "hitsAddend": "keyword", "host": "keyword", "httpmethod": "keyword", "ignored": {"error": "keyword", "handler": "keyword", "key": "keyword", "request": "keyword", "value": "keyword"}, "is_fraud_feature": "keyword", "localpath": "keyword", "lyft_user_id": "keyword", "method": "keyword", "path": "keyword", "bucket": "keyword", "ratelimitType": "keyword", "request": "keyword", "requestId": "keyword", "request_id": "keyword", "s3path": "keyword", "service": "keyword", "signal": "keyword", "table": "keyword"}}, "dsfeaturesworker": {"fields": {"caller": "keyword", "datastore": "keyword", "error": "keyword", "host": "keyword", "composite_entity_id": "keyword", "composite_feature_name": "keyword", "entity_id": "keyword", "sort_key": "keyword", "user_id": "keyword"}}, "dsfeatureswrites": {"fields": {"auth_token_credential": "keyword", "aws": {"code": "keyword", "message": "keyword", "requestid": "keyword", "statuscode": "long"}, "caller": "keyword", "code": "keyword", "downstream_cluster": "keyword", "endpoint": "keyword", "error": "keyword", "entity_id": "keyword", "feature_group": "keyword", "feature_name": "keyword", "feature_statistics_config": "keyword", "feature_version": "long", "handler": "keyword", "hitsAddend": "keyword", "host": "keyword", "httpmethod": "keyword", "ignored": {"error": "keyword", "handler": "keyword", "key": "keyword", "request": "keyword", "value": "keyword"}, "is_fraud_feature": "keyword", "localpath": "keyword", "lyft_user_id": "keyword", "method": "keyword", "path": "keyword", "bucket": "keyword", "ratelimitType": "keyword", "request": "keyword", "requestId": "keyword", "request_id": "keyword", "s3path": "keyword", "service": "keyword", "signal": "keyword", "table": "keyword"}}}, "version": "d1fceb5bd3ebb40797e2271dca7566e181d33695", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "dsterraform": {"name": "dsterraform", "description": "Terraform configuration for Datastore projects", "repository": "git@github.com:lyft/dsterraform.git", "credentials": false, "slack": "#ds-aws-pod", "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS AWS", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "containers": [{"name": "tfesshproxy", "command": "./scripts/terraformenterprise/container/tfesshproxy"}, {"name": "tfeorchestrate", "command": "./scripts/terraformenterprise/container/tfeorchestrate"}, {"name": "createworkspacesinptfe", "command": "python -m terraformenterprise create-workspaces"}, {"name": "createemptyworkspaces", "command": "./scripts/terraformenterprise/container/createemptyworkspaces"}, {"name": "compile", "command": "python -m dsterraformcompiler compile"}, {"name": "import", "command": "python -m dsterraformcompiler import"}, {"name": "validate", "command": "python -m dsterraformcompiler validate-yaml"}, {"name": "iscompiled", "command": "python -m dsterraformcompiler is-compiled"}, {"name": "autocapacity", "command": "python -m dsterraformcompiler autocapacity"}, {"name": "printcatalog", "command": "python -m dsterraformcompiler print-catalog"}, {"name": "generatecatalog", "command": "python -m dsterraformcompiler generate-catalogs"}, {"name": "rolloutexperiment", "command": "python -m dsterraformcompiler rollout-experiment"}, {"name": "generateautoscalingparams", "command": "python -m dsterraformcompiler update-autoscaling-parameters"}, {"name": "modifyallocations", "command": "python -m dsterraformcompiler modify-experiment-allocations"}, {"name": "generateanduploadcatalog", "command": "dumb-init -- service_venv python -m dsterraformcompiler generate-catalogs --upload-to-s3", "workdir": "/code/dsterraform", "sub_image": "k8s"}, {"name": "generatedevelopment", "command": "python -m dsterraformcompiler generate_development"}, {"name": "createdevresources", "command": "python ./scripts/create_dev_resources/apply.py"}, {"name": "addjupiterexception", "command": "python -m dsterraformcompiler add-jupiter-exception"}, {"name": "checkdynamodeletion", "command": "python -m dsterraformcompiler.commands.dynamo.check_deletion"}], "groups": [{"name": "dev", "members": ["control.dev", "dsterraform.compile", "dsterraform.import", "dsterraform.validate", "dsterraform.iscompiled", "dsterraform.autocapacity"]}, {"name": "generateanduploadcatalogdev", "members": ["control.dev", "minio.server", "dynamodb.server", "dsterraform.generateanduploadcatalog"]}], "tests": [{"name": "terraform-check-format", "type": "jailed", "command": "python -m dsterraformcompiler terraform-check-format"}, {"name": "unit", "type": "jailed", "command": "pytest --junitxml=build/unit.xml --cov=dsterraformcompiler --cov-report=xml:build/coverage.xml --cov-report=html --no-cov-on-fail tests", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "generated-files", "type": "jailed", "command": "python -m dsterraformcompiler is-compiled"}], "languages": ["python"], "image_type": "tool", "facets": [{"name": "fullcatalogcron", "type": "cron", "concurrency_policy": "Forbid", "member": "dsterraform.generateanduploadcatalog", "schedule": "*/5 * * * *"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "links": [{"text": "dashboard", "url": "https://grafana.lyft.net/dashboard/db/dsterraform?orgId=1&from=1570226653664&to=1570227493664&var-Environment=staging"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "fullcatalogcron"}], "orca": [{"region": "iad"}]}, [{"name": "production", "legacy": false, "automatic": true, "links": [{"text": "dashboard", "url": "https://grafana.lyft.net/dashboard/db/dsterraform?orgId=1&from=1570226653664&to=1570227493664&var-Environment=production"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "fullcatalogcron"}], "orca": [{"region": "iad"}]}, {"name": "production-devkube", "legacy": false, "automatic": true, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}}}, {"name": "production-devkubestaging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkubestaging"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}}}]], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "envoy": {"profile": "python", "settings": {"services": [{"name": "dsterraform"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}}}}, "version": "d620af66c2c58c56b3fc04bf144b9e6b80190c38", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "dummylib": {"name": "dummylib", "description": "TODO short description of the service", "repository": "git@github.com:lyft/python-lyft-dummylib.git", "report_ci": true, "credentials": true, "credentials_legacy": false, "containers": [{"name": "run", "command": "sleep infinity"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "image_type": "library", "slack": "#continuousintegration", "team_email": "automation-team@lyft.com", "version": "0d8d3677ff7c84c30e1fdf54f7c71c75e7175724", "images": [{"parent": {"name": "pythonlibrary", "version": "a99efa8794970fa95073bd7c69cafe226785f7dd", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "pythonlibrary", "version": "a99efa8794970fa95073bd7c69cafe226785f7dd", "sub_image": null, "external": false}}, "duonetworkgateway": {"name": "duonetworkgateway", "description": "duonetworkgateway", "repository": "git@github.com:lyft/duonetworkgateway.git", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "duonetworkgateway.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "duonetworkgateway.dev"}, {"name": "lint", "type": "jailed", "command": "make lint", "reports": {"pylint": "build/flake8.txt"}}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "terraform-checkformat", "type": "tool", "tool": "terraform.checkformat"}, {"name": "terraform-validate", "type": "tool", "tool": "terraform.validate"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#security-deploys", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "pagerduty_escalation_policy": "Security", "team_email": "security-engineering@lyft.com", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, [{"name": "production", "legacy": true}]], "orchestrate": {"types": [{"name": "terraform"}], "steps": [{"name": "staging"}, {"name": "production"}]}, "audit_blacklist": ["envoyAudit"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "version": "ba36949b909a0781c2f6050fee1ec51d67a7a338", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "dynamodb": {"name": "dynamodb", "description": "development version of the dynamodb database", "repository": "git@github.com:lyft/containers.git:dynamodb", "slack": "#ds-aws-pod", "team_email": "datastore-team@lyft.com", "docs": {"section": "Infrastructure"}, "containers": [{"name": "server", "command": "dynalite --port 80 --path /var/run/dynamodb-local --createTableMs 0 --updateTableMs 0 --deleteTableMs 0", "provision": "/code/containers/dynamodb/provision.sh", "start_phase": "sequential_storage", "snapshot": {"dump": "cp -a /var/run/dynamodb-local/", "restore": "/code/containers/dynamodb/restore.sh"}, "exports": [{"name": "api", "port": 80}]}, {"name": "viewer", "command": "/code/containers/dynamodb/viewer-entrypoint.sh", "exports": [{"name": "web", "port": 80}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server"]}], "upstream_tests": {"on_commit": true, "test_set": {"accidents": ["integration"], "account": ["unit", "integration"], "acl": ["unit", "integration"], "acquisitionbonuses": ["startup"], "acquisitionguarantees": ["integration"], "adtech": ["unit", "integration"], "adtechworkflows": ["unit"], "amp": ["unit"], "analyticsingest": ["integration"], "analyticsmetrics": ["startup"], "appboy": ["integration"], "appreleases": ["unit", "integration"], "ats": ["e2e", "legacyunit"], "audience": ["integration"], "autonomous": ["unit", "integration"], "avingest": ["unit", "integration", "regression"], "backgroundcheck": ["unit", "integration"], "badcompanions": ["unit", "integration"], "billingaggregator": ["test"], "campaigns": ["integration"], "campaignscheduler": ["integration"], "campaignstorage": ["integration"], "cancelmitigation": ["integration"], "cancels": ["integration_full"], "cetconcessions": ["startup"], "challenges": ["integration"], "chat": ["integration"], "ciexec": ["startup"], "clientbuilds": ["startup"], "compi": ["unit", "integration"], "confidant": ["integration"], "coupons": ["integration"], "courier": ["start", "unit", "integration"], "dborchestrator": ["startup"], "dbproxy": ["startup"], "dbproxyauth": ["startup"], "dbproxybenchmark": ["startup"], "dbproxyfare": ["startup"], "dbproxypaymentgateway": ["startup"], "dbproxypodie": ["startup"], "dbproxyroutes": ["startup"], "deployapi": ["startup"], "detargetingapi": ["integration"], "directorysync": ["unit", "integration"], "discovery": ["unit", "integration"], "dispatch": ["unit_legacy", "integration", "e2e_airports", "e2e_dispatch"], "dispatchavailability": ["unit", "integration"], "distributedlock": ["unit"], "driverbonus": ["startup"], "drivercomp": ["integration"], "driverearnings": ["unit", "integration"], "driverheatmaps": ["unit", "integration"], "driverloyalty": ["unit", "integration"], "drivermonitor": ["integration"], "drivernotification": ["unit", "integration"], "driverprompts": ["integration"], "driverridesinfo": ["integration"], "drivestat": ["unit"], "dryftadmin": ["startup"], "dsfeatures": ["unit", "integration"], "dynamostreams": ["unit", "elasticsearch-mapper-validator"], "emergencyassist": ["integration"], "engagementplatform": ["integration"], "enterprise": ["unit", "integration"], "enterprisedispatch": ["unit", "integration"], "escrowdriverpay": ["pytests"], "etawatch": ["startup"], "fanner": ["startup", "unit"], "fareerrorcontroller": ["integration"], "financial": ["unit", "integration"], "flaggedtrips": ["unit", "integration"], "fleetlocations": ["unit"], "fleetmanagement": ["unit", "integration"], "flexibleincentives": ["integration"], "flyteresourcemanager": ["startup"], "geofencereporter": ["unit"], "ghostmatching": ["startup"], "gmapsmobile": ["integration"], "green": ["unit", "integration", "expresspay_fixtures", "payout_fixtures"], "grow": ["unit", "integration", "e2e"], "guardian": ["unit", "integration_sharded"], "hammer": ["integration"], "help": ["unit", "integration"], "incentiveconfig": ["integration"], "incentiveguarantees": ["integration"], "invites": ["unit"], "jobscheduler": ["unified"], "karma": ["unit", "integration"], "kibanaproxy": ["startup"], "laser": ["startup"], "lastmile": ["unit", "integration"], "leadplatform": ["integration"], "ledger": ["unit", "integration"], "legacyapi": ["integration"], "legacyoauth": ["unit", "integration"], "legacyridescheduler": ["unit", "integration"], "localevents": ["integration"], "locations": ["start", "unit", "integration"], "locationsint": ["startup"], "logistics": ["unit", "integration"], "loyaltyprograms": ["unit"], "lyfttestlib": ["integration"], "mailer": ["integration"], "mapworkflows": ["spark_integration", "workflow_registration"], "marketdata": ["unit", "integration"], "marketevents": ["unit", "integration"], "martechscoring": ["unit"], "matchingexecution": ["integration"], "matchingstate": ["integration"], "meetingfeedback": ["startup"], "messaging": ["integration"], "migrations": ["integration"], "migrationworkers": ["startup"], "mobiledashboardint": ["startup"], "modelbuilderadmin": ["unit", "integration"], "modeldiscovery": ["unit"], "modes": ["integration"], "mongodbtailer": ["unit"], "mongostreams": ["startup"], "nexus": ["integration"], "notes": ["unit", "integration"], "offerings": ["integration"], "osscla": ["unit", "integration"], "passengerqueues": ["integration"], "paxrewardsview": ["startup"], "paxsavings": ["startup"], "payfingerprint": ["unit"], "pickupcomms": ["integration"], "pickupoptimizer": ["integration"], "platformfeecalculator": ["test"], "ppzconfig": ["integration"], "predispatchjobs": ["integration"], "priceoptimizer": ["unit", "integration"], "push": ["integration"], "ratings": ["integration"], "readonlydb": ["integration"], "regions": ["unit", "integration"], "regulatoryintegrations": ["unit", "integration"], "releasebot": ["startup"], "rentals": ["component", "component_resources", "integration", "goldenpath"], "ridechallenges": ["integration"], "rideexpensing": ["unit"], "ridehistory": ["unit", "integration"], "ridelocations": ["unit", "integration", "validate_modelbuilder_workflows", "workflow_registration"], "ridemonitor": ["integration"], "ridepasses": ["integration_core"], "rides": ["unit"], "ridescheduler": ["start", "unit", "integration"], "ridestreaks": ["integration"], "ridetimeestimator": ["unit", "integration"], "riskonnectproxy": ["startup"], "robocop": ["unit", "integration"], "scrumbot": ["unit", "integration"], "securityalerts": ["unit"], "securitylogingestng": ["startup"], "shardworker": ["startup"], "simulatedrides": ["tsc"], "socialimpact": ["integration"], "streamcheck": ["unit", "integration"], "streamingest": ["integration"], "suggesteddestinations": ["unit"], "supply": ["integration"], "supplyrecords": ["integration"], "supportdataingest": ["integration"], "supportqa": ["startup"], "supporttext": ["startup"], "surveybot2": ["integration"], "switchboard": ["unit", "integration", "fixture"], "taskqueue": ["startup"], "team": ["integration"], "techlearning": ["integration"], "testrunner": ["integration"], "timecard": ["unit", "integration"], "transit": ["integration"], "transitsegment": ["integration"], "translation": ["integration"], "usereligibilities": ["integration"], "usergroups": ["unit", "integration"], "userpreferences": ["integration"], "vehicleinspection": ["unit"], "vehiclemetadata": ["unit"], "vehicleservicecenters": ["component", "integration"], "vpn": ["integration", "highstate"], "wallet": ["unit"]}}, "tests": [{"name": "start", "type": "startup", "group": "dynamodb.dev"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false}, {"name": "canary", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false}], "languages": ["bash"], "image_type": "tool", "version": "dbcf6ebe1110884e171829355fe8eef282841155", "images": [{"parent": {"name": "bionicbase", "version": "c2a5970d2276529c105f9a5a3ba623eb5faecd8c", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "c2a5970d2276529c105f9a5a3ba623eb5faecd8c", "sub_image": null, "external": false}}, "dynamodbquerier": {"name": "dynamodbquerier", "description": "Query DynamoDB in a safe and parallel manner", "repository": "git@github.com:lyft/dynamodbquerier.git", "slack": "#ds-aws-pod", "team_email": "ds-aws@lyft.com", "pagerduty_escalation_policy": "DS AWS", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/dynamodbquerier", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "checkqueuedjobs", "command": "dumb-init -- service_venv python -m app.scripts.check_queued_jobs", "workdir": "/code/dynamodbquerier", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "100Mi"}}, {"name": "checkstartingjobs", "command": "dumb-init -- service_venv python -m app.scripts.check_starting_jobs", "workdir": "/code/dynamodbquerier", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "100Mi"}}, {"name": "checkterminatingjobs", "command": "dumb-init -- service_venv python -m app.scripts.check_terminating_jobs", "workdir": "/code/dynamodbquerier", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "100Mi"}}, {"name": "checkrunningjobs", "command": "dumb-init -- service_venv python -m app.scripts.check_running_jobs", "workdir": "/code/dynamodbquerier", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "100Mi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "dynamodbquerier.legacy"]}, {"name": "service_group", "members": ["dynamodbquerier.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "dynamodbquerier.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "dynamodbquerier.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "dynamodbquerier.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}, {"name": "checkqueuedjobs", "type": "cron", "environment_files": ["ops/config/pillar/env.sls"], "member": "dynamodbquerier.checkqueuedjobs", "schedule": "*/2 * * * *", "concurrency_policy": "forbid"}, {"name": "checkstartingjobs", "type": "cron", "environment_files": ["ops/config/pillar/env.sls"], "member": "dynamodbquerier.checkstartingjobs", "schedule": "*/2 * * * *", "concurrency_policy": "forbid"}, {"name": "checkterminatingjobs", "type": "cron", "environment_files": ["ops/config/pillar/env.sls"], "member": "dynamodbquerier.checkterminatingjobs", "schedule": "*/5 * * * *", "concurrency_policy": "forbid"}, {"name": "checkrunningjobs", "type": "cron", "environment_files": ["ops/config/pillar/env.sls"], "member": "dynamodbquerier.checkrunningjobs", "schedule": "*/5 * * * *", "concurrency_policy": "forbid"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "checkqueuedjobs"}, {"facet": "checkstartingjobs"}, {"facet": "checkterminatingjobs"}, {"facet": "checkrunningjobs"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "checkqueuedjobs"}, {"facet": "checkstartingjobs"}, {"facet": "checkterminatingjobs"}, {"facet": "checkrunningjobs"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "dynamodbquerier"}], "common_settings": {"internal_hosts": {"mailer": null}, "external_hosts": {"dynamodb_iad": null}}}}, "version": "b542464164af102a13faf7e9bc6447e4fdc7c095", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "dynamostreams": {"name": "dynamostreams", "description": "Service to process change logs from DynamoDB and forward the data to other services", "repository": "git@github.com:lyft/dynamostreams.git", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "elasticsearch6.server", "dynamostreams.legacy"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "oncall", "type": "execution", "group": "dynamostreams.dev", "container": "dynamostreams.legacy", "command": "service_venv python -m dynamostreams.scripts.oncall_validation"}, {"name": "elasticsearch-mapper-validator", "type": "execution", "group": "dynamostreams.dev", "container": "dynamostreams.legacy", "command": "service_venv python -m dynamostreams.scripts.es_validation"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "orca_environments": {"development": ["sandbox"], "staging": ["zimride"]}, "slack": "#ds-data-pod", "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS Data Pipeline", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}], {"name": "production", "legacy": true}], "languages": ["python"], "image_type": "service", "service_tier": 0, "envoy": {"profile": "python", "settings": {"services": [{"name": "dynamostreams"}, {"name": "dynamostreamsbatch"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"dsfeatures": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "jobschedulerurgentweb": null, "jobschedulermigrationweb": null, "taskqueuebulkweb": null, "taskqueuenormalweb": null, "taskqueueurgentweb": null, "taskqueuemigrationweb": null, "places": null, "ledger": null}, "external_hosts": {"dynamodb_iad": null, "dynamodb_cmh": null, "firehose_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "logging": {"dynamostreams": {"fields": {"processor_config_key": "keyword", "key": "keyword", "exc": "keyword", "table_name": "keyword"}}}, "version": "340686bc3e5f5428bbeb06caa2656a3276b3efa4", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "dynamostreams2kafka": {"name": "dynamostreams2kafka", "description": "service which sync dynamostreams change log to kafka", "repository": "git@github.com:lyft/dynamostreams2kafka.git", "slack": "#ds-data-pod", "team_email": "ds-data@lyft.com", "pagerduty_escalation_policy": "DS Data Pipeline", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s", "packages": ["liblog4j1.2-java", "openjdk-8-jre-headless", "openjdk-8-jdk", "vim"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "compile", "start_time": 600, "command": "/code/dynamostreams2kafka/compile.sh"}, {"name": "generatekafkatopic", "start_time": 600, "command": "/code/dynamostreams2kafka/generate_kafka_topic.sh"}, {"name": "stagingcontinuoustest", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "command": "dumb-init -- /code/dynamostreams2kafka/staging-continuous-test.sh", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "fullstreamvalidationservicestg", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/full-stream-validation-entrance.sh staging", "limits": {"cpu": 0.8, "memory": "1.5Gi"}}, {"name": "fullstreamvalidationserviceprd", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/full-stream-validation-entrance.sh production", "limits": {"cpu": 0.8, "memory": "1.5Gi"}}, {"name": "kclacquisitionbonusesstagince", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=acquisitionbonuses-staging-incentive HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclacquisitionbonusesstagin01", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=acquisitionbonuses-staging-incentive_reward_record HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclapistagorgdispatchedrides", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=api-staging-orgDispatchedRides HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclautonomousstagsafetydriver", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=autonomous-staging-safety-drivers HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclautonomousstagvehicles", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=autonomous-staging-vehicles HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclavingeststagavdataunified", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=avingest-staging-avdataunified HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclavingeststaglyftautonomous", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=avingest-staging-lyft-autonomous-disengagement-triage HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclavingeststaglyftautonomo01", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=avingest-staging-lyft-autonomous-jira-issue HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclbehavioralengstagmetrics", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=behavioraleng-staging-metrics HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclbehavioralengstagusers", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=behavioraleng-staging-users HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclbookkeeperstagiadaccountba", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=bookkeeper-staging-iad-account-balance HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclcouponsstagiadcouponorders", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=coupons-staging-iad-coupon_orders HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclcouponsstagiadridepasspack", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=coupons-staging-iad-ride_pass_packages HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclcouponsstagridepasssubscri", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=coupons-staging-ride_pass_subscriptions HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kcldeployapistagdeploys", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=deployapi-staging-deploys HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kcldsfeaturesstagfeaturerow", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=dsfeatures-staging-featurerow HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kcldsfeaturesstagonlineaccess", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=dsfeatures-staging-onlineaccess HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kcldynamostreams2kafkastagtes", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=dynamostreams2kafka-staging-test HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclenterprisestaggrants", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=enterprise-staging-grants HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclenterprisestagorganization", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=enterprise-staging-organization HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclenterprisecustomfieldsstag", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=enterprisecustomfields-staging-customfieldvalues HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclfleetstagrideable", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=fleet-staging-rideable HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclfleetstagrideablehistoryen", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=fleet-staging-rideable-history-entry HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclfleetlocationsstaggeoitems", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=fleetlocations-staging-geo-items HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclflexibleincentivesstagiadb", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=flexibleincentives-staging-iad-bonus_records HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclgrowstagnewridersurveyreco", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=grow-staging-new_rider_survey_record HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclincentiveguaranteesstagoff", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=incentiveguarantees-staging-offers HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kcllaserstagiadrepokidroles", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=laser-staging-iad-repokidroles HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kcllastmilestagrideableride", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=lastmile-staging-rideable-ride HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclledgerstaginvoices", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=ledger-staging-invoices HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclledgerstaglastsentwebhooks", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=ledger-staging-last-sent-webhooks HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclloyaltypointsstagpointsbal", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=loyaltypoints-staging-points-balance HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclregionsstagiadmaps", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=regions-staging-iad-maps HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclregionsstagiadreleases", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=regions-staging-iad-releases HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclrentalsstagrental", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=rentals-staging-rental HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclrentalsstagreservation", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=rentals-staging-reservation HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclrideprogramsstagrideprogra", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=rideprograms-staging-ride_program_benefit HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclrideprogramsstagrideprog01", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=rideprograms-staging-ride_program_customer HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclroutesstagcurrentrouteid", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=routes-staging-currentrouteid HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclsupplystagdrivershifts", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=supply-staging-driverShifts HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclsupplystagvehicles", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=supply-staging-vehicles HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kcltestrunnerstagtestcasestat", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=testrunner-staging-test-case-status HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kcltestrunnerstagtestrunevent", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=testrunner-staging-test-run-event HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclvehiclemetadatastagcarsele", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=vehiclemetadata-staging-carselects HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclvehicleservicecentersstago", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=vehicleservicecenters-staging-order HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclworkflowmonitorstagevents", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=staging TABLE_NAME=workflowmonitor-staging-events HEAP_SIZE=512", "limits": {"cpu": 0.5, "memory": "1.5Gi"}}, {"name": "kclacquisitionbonusesprodince", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=acquisitionbonuses-production-incentive HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclacquisitionbonusesprodin01", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=acquisitionbonuses-production-incentive_reward_record HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclautonomousprodsafetydriver", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=autonomous-production-safety-drivers HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclautonomousprodvehicles", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=autonomous-production-vehicles HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclavingestprodavdataunified", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=avingest-production-avdataunified HEAP_SIZE=1024", "limits": {"cpu": 8, "memory": "6Gi"}}, {"name": "kclavingestprodlyftautonomous", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=avingest-production-lyft-autonomous-disengagement-triage HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclavingestprodlyftautonomo01", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=avingest-production-lyft-autonomous-jira-issue HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclbehavioralengprodmetrics", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=behavioraleng-production-metrics HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclbehavioralengprodusers", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=behavioraleng-production-users HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclbillingaggregatorprodbatch", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=billingaggregator-production-batched_transactions HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclbookkeeperprodiadaccountba", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=bookkeeper-production-iad-account-balance HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclcampaignsprodusercampaignr", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=campaigns-production-user_campaign_record HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclciexecprodtasksartifactsv3", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=ciexec-production-tasks-artifacts-v3 HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclcouponsprodcouponchargeacc", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=coupons-production-coupon_charge_accounts HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclcouponsprodcoupontemplates", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=coupons-production-coupon_templates HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclcouponsprodiadcouponorders", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=coupons-production-iad-coupon_orders HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclcouponsprodiadridepasspack", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=coupons-production-iad-ride_pass_packages HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclcouponsprodridepasssubscri", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=coupons-production-ride_pass_subscriptions HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kcldeployapiproddeploys", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=deployapi-production-deploys HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kcldsfeaturesprodfeaturerow", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=dsfeatures-production-featurerow HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kcldsfeaturesprodonlineaccess", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=dsfeatures-production-onlineaccess HEAP_SIZE=1024", "limits": {"cpu": 8, "memory": "6Gi"}}, {"name": "kclenterpriseprodgrants", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=enterprise-production-grants HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclenterpriseprodorganization", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=enterprise-production-organization HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclfleetlocationsprodgeoitems", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=fleetlocations-production-geo-items HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclgrowprodnewridersurveyreco", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=grow-production-new_rider_survey_record HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclledgerprodinvoices", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=ledger-production-invoices HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclledgerprodlastsentwebhooks", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=ledger-production-last-sent-webhooks HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclledgerprodlineitems", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=ledger-production-lineitems HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclregionsprodiadmaps", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=regions-production-iad-maps HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclregionsprodiadreleases", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=regions-production-iad-releases HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclrentalsprodrental", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=rentals-production-rental HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclroutesprodcurrentrouteid", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=routes-production-currentrouteid HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclsupplyproddrivershifts", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=supply-production-driverShifts HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclsupplyprodvehicles", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=supply-production-vehicles HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kcltestrunnerprodtestcasestat", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=testrunner-production-test-case-status HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kcltestrunnerprodtestrunevent", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=testrunner-production-test-run-event HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kcltimecardprodiaddriverphase", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=timecard-production-iad-driver_phase HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclvehiclemetadataprodcarsele", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=vehiclemetadata-production-carselects HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "kclvehicleservicecentersprodo", "sub_image": "k8s", "workdir": "/code/dynamostreams2kafka", "start_time": 600, "command": "dumb-init -- /code/kcl/kcl-worker.sh ENV=production TABLE_NAME=vehicleservicecenters-production-order HEAP_SIZE=512", "limits": {"cpu": 2, "memory": "4Gi"}}], "groups": [{"name": "dev", "members": ["metadataproxy.server", "control.dev", "kafka.server", "dynamostreams2kafka.legacy", "dynamostreams2kafka.compile"]}, {"name": "service_group", "members": ["dynamostreams2kafka.legacy"]}, {"name": "staging_group_validation", "members": ["dynamostreams2kafka.fullstreamvalidationservicestg"]}, {"name": "production_group_validation", "members": ["dynamostreams2kafka.fullstreamvalidationserviceprd"]}, {"name": "staging_group_0", "members": ["dynamostreams2kafka.kclacquisitionbonusesstagince", "dynamostreams2kafka.kclacquisitionbonusesstagin01", "dynamostreams2kafka.kclapistagorgdispatchedrides", "dynamostreams2kafka.kclautonomousstagsafetydriver", "dynamostreams2kafka.kclautonomousstagvehicles", "dynamostreams2kafka.kclavingeststagavdataunified", "dynamostreams2kafka.kclavingeststaglyftautonomous", "dynamostreams2kafka.kclavingeststaglyftautonomo01", "dynamostreams2kafka.kclbehavioralengstagmetrics", "dynamostreams2kafka.kclbehavioralengstagusers", "dynamostreams2kafka.kclbookkeeperstagiadaccountba", "dynamostreams2kafka.kclcouponsstagiadcouponorders", "dynamostreams2kafka.kclcouponsstagiadridepasspack", "dynamostreams2kafka.kclcouponsstagridepasssubscri", "dynamostreams2kafka.kcldeployapistagdeploys", "dynamostreams2kafka.kcldsfeaturesstagfeaturerow", "dynamostreams2kafka.kcldsfeaturesstagonlineaccess", "dynamostreams2kafka.kcldynamostreams2kafkastagtes", "dynamostreams2kafka.kclenterprisestaggrants", "dynamostreams2kafka.kclenterprisestagorganization", "dynamostreams2kafka.kclenterprisecustomfieldsstag", "dynamostreams2kafka.kclfleetstagrideable", "dynamostreams2kafka.kclfleetstagrideablehistoryen", "dynamostreams2kafka.kclfleetlocationsstaggeoitems", "dynamostreams2kafka.kclflexibleincentivesstagiadb", "dynamostreams2kafka.kclgrowstagnewridersurveyreco", "dynamostreams2kafka.kclincentiveguaranteesstagoff", "dynamostreams2kafka.kcllaserstagiadrepokidroles", "dynamostreams2kafka.kcllastmilestagrideableride", "dynamostreams2kafka.kclledgerstaginvoices", "dynamostreams2kafka.kclledgerstaglastsentwebhooks", "dynamostreams2kafka.kclloyaltypointsstagpointsbal", "dynamostreams2kafka.kclregionsstagiadmaps", "dynamostreams2kafka.kclregionsstagiadreleases", "dynamostreams2kafka.kclrentalsstagrental", "dynamostreams2kafka.kclrentalsstagreservation", "dynamostreams2kafka.kclrideprogramsstagrideprogra", "dynamostreams2kafka.kclrideprogramsstagrideprog01", "dynamostreams2kafka.kclroutesstagcurrentrouteid", "dynamostreams2kafka.kclsupplystagdrivershifts", "dynamostreams2kafka.kclsupplystagvehicles", "dynamostreams2kafka.kcltestrunnerstagtestcasestat", "dynamostreams2kafka.kcltestrunnerstagtestrunevent", "dynamostreams2kafka.kclvehiclemetadatastagcarsele", "dynamostreams2kafka.kclvehicleservicecentersstago", "dynamostreams2kafka.kclworkflowmonitorstagevents"]}, {"name": "production_group_0", "members": ["dynamostreams2kafka.kclacquisitionbonusesprodince", "dynamostreams2kafka.kclacquisitionbonusesprodin01", "dynamostreams2kafka.kclautonomousprodsafetydriver", "dynamostreams2kafka.kclautonomousprodvehicles", "dynamostreams2kafka.kclavingestprodlyftautonomous"]}, {"name": "production_group_1", "members": ["dynamostreams2kafka.kclavingestprodlyftautonomo01", "dynamostreams2kafka.kclbehavioralengprodmetrics", "dynamostreams2kafka.kclbehavioralengprodusers", "dynamostreams2kafka.kclbillingaggregatorprodbatch", "dynamostreams2kafka.kclbookkeeperprodiadaccountba"]}, {"name": "production_group_2", "members": ["dynamostreams2kafka.kclcampaignsprodusercampaignr", "dynamostreams2kafka.kclciexecprodtasksartifactsv3", "dynamostreams2kafka.kclcouponsprodcouponchargeacc", "dynamostreams2kafka.kclcouponsprodcoupontemplates", "dynamostreams2kafka.kclcouponsprodiadcouponorders"]}, {"name": "production_group_3", "members": ["dynamostreams2kafka.kclcouponsprodiadridepasspack", "dynamostreams2kafka.kclcouponsprodridepasssubscri", "dynamostreams2kafka.kcldeployapiproddeploys", "dynamostreams2kafka.kcldsfeaturesprodfeaturerow", "dynamostreams2kafka.kclenterpriseprodgrants"]}, {"name": "production_group_4", "members": ["dynamostreams2kafka.kclenterpriseprodorganization", "dynamostreams2kafka.kclfleetlocationsprodgeoitems", "dynamostreams2kafka.kclgrowprodnewridersurveyreco", "dynamostreams2kafka.kclledgerprodinvoices", "dynamostreams2kafka.kclledgerprodlastsentwebhooks"]}, {"name": "production_group_5", "members": ["dynamostreams2kafka.kclledgerprodlineitems", "dynamostreams2kafka.kclregionsprodiadmaps", "dynamostreams2kafka.kclregionsprodiadreleases", "dynamostreams2kafka.kclrentalsprodrental", "dynamostreams2kafka.kclroutesprodcurrentrouteid"]}, {"name": "production_group_6", "members": ["dynamostreams2kafka.kclsupplyproddrivershifts", "dynamostreams2kafka.kclsupplyprodvehicles", "dynamostreams2kafka.kcltestrunnerprodtestcasestat", "dynamostreams2kafka.kcltestrunnerprodtestrunevent", "dynamostreams2kafka.kcltimecardprodiaddriverphase"]}, {"name": "production_group_7", "members": ["dynamostreams2kafka.kclvehiclemetadataprodcarsele", "dynamostreams2kafka.kclvehicleservicecentersprodo"]}, {"name": "production_group_hv0", "members": ["dynamostreams2kafka.kclavingestprodavdataunified", "dynamostreams2kafka.kcldsfeaturesprodonlineaccess"]}], "tests": [{"name": "startup", "type": "startup", "group": "dynamostreams2kafka.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "code-gen-validation", "type": "jailed", "command": "service_venv python -m scripts.code_gen_validation"}, {"name": "compiler_test", "type": "jailed", "command": "make compiler_test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "command": "make test_integration", "group": "dynamostreams2kafka.dev", "container": "dynamostreams2kafka.legacy"}], "facets": [{"name": "facetstreamvalidationstg", "member": "dynamostreams2kafka.staging_group_validation", "type": "cron", "environment_files": ["ops/config/pillar/staging/staging-env-var.yaml"], "concurrency_policy": "allow", "schedule": "25 * * * *"}, {"name": "facetstreamvalidationprd", "member": "dynamostreams2kafka.production_group_validation", "type": "cron", "environment_files": ["ops/config/pillar/production/production-env-var.yaml"], "concurrency_policy": "allow", "schedule": "25 * * * *"}, {"name": "facetstaging0", "member": "dynamostreams2kafka.staging_group_0", "type": "worker", "environment_files": ["ops/config/pillar/staging/staging-env-var.yaml"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 10}}}}, {"name": "facetproduction0", "member": "dynamostreams2kafka.production_group_0", "type": "worker", "environment_files": ["ops/config/pillar/production/production-env-var.yaml"], "autoscaling": {"environment": {"production": {"min_size": 2, "max_size": 20}}}}, {"name": "facetproduction1", "member": "dynamostreams2kafka.production_group_1", "type": "worker", "environment_files": ["ops/config/pillar/production/production-env-var.yaml"], "autoscaling": {"environment": {"production": {"min_size": 2, "max_size": 20}}}}, {"name": "facetproduction2", "member": "dynamostreams2kafka.production_group_2", "type": "worker", "environment_files": ["ops/config/pillar/production/production-env-var.yaml"], "autoscaling": {"environment": {"production": {"min_size": 2, "max_size": 20}}}}, {"name": "facetproduction3", "member": "dynamostreams2kafka.production_group_3", "type": "worker", "environment_files": ["ops/config/pillar/production/production-env-var.yaml"], "autoscaling": {"environment": {"production": {"min_size": 2, "max_size": 20}}}}, {"name": "facetproduction4", "member": "dynamostreams2kafka.production_group_4", "type": "worker", "environment_files": ["ops/config/pillar/production/production-env-var.yaml"], "autoscaling": {"environment": {"production": {"min_size": 2, "max_size": 20}}}}, {"name": "facetproduction5", "member": "dynamostreams2kafka.production_group_5", "type": "worker", "environment_files": ["ops/config/pillar/production/production-env-var.yaml"], "autoscaling": {"environment": {"production": {"min_size": 2, "max_size": 20}}}}, {"name": "facetproduction6", "member": "dynamostreams2kafka.production_group_6", "type": "worker", "environment_files": ["ops/config/pillar/production/production-env-var.yaml"], "autoscaling": {"environment": {"production": {"min_size": 2, "max_size": 20}}}}, {"name": "facetproduction7", "member": "dynamostreams2kafka.production_group_7", "type": "worker", "environment_files": ["ops/config/pillar/production/production-env-var.yaml"], "autoscaling": {"environment": {"production": {"min_size": 2, "max_size": 20}}}}, {"name": "facetproductionhv0", "member": "dynamostreams2kafka.production_group_hv0", "type": "worker", "environment_files": ["ops/config/pillar/production/production-env-var.yaml"], "autoscaling": {"environment": {"production": {"min_size": 4, "max_size": 40}}}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "facetstaging0"}, {"facet": "facetstreamvalidationstg"}]}, {"name": "production", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "facetproduction0"}, {"facet": "facetproduction1"}, {"facet": "facetproduction2"}, {"facet": "facetproduction3"}, {"facet": "facetproduction4"}, {"facet": "facetproduction5"}, {"facet": "facetproduction6"}, {"facet": "facetproduction7"}, {"facet": "facetproductionhv0"}, {"facet": "facetstreamvalidationprd"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "dynamostreams2kafka"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}}}}, "logging": {"dynamostreams2kafka": {"fields": {"exc": "keyword"}}}, "version": "49cf01ee42dd8c7b546af09891bb574d5ed6916d", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "e2etestjslib": {"name": "e2etestjslib", "description": "E2E Test Library for JavaScript", "repository": "git@github.com:lyft/e2e-test-js-lib.git", "slack": "#frontend-platform", "team_email": "frontend-platform@lyft.com", "image_type": "tool", "custom": {"frontend_service": true}, "languages": ["javascript"], "credentials_legacy": false, "containers": [{"name": "test", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["control.dev", "e2etestjslib.test"]}], "tests": [{"name": "startup", "type": "startup", "group": "e2etestjslib.dev"}, {"name": "unit", "type": "execution", "group": "e2etestjslib.dev", "container": "e2etestjslib.test", "command": "npm run test"}, {"name": "lint", "type": "execution", "group": "e2etestjslib.dev", "container": "e2etestjslib.test", "command": "npm run lint"}], "deploy": [{"name": "npm", "legacy": true, "role": "lyftpypi-production-iad-deploy"}], "version": "903dd5e5cb623d01b25cbc8c5a85c2b3c8d90a03", "images": [{"parent": {"name": "nodejs", "version": "6cea7092b8af7e8bc44889ed89d3978eda775874", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "nodejs", "version": "6cea7092b8af7e8bc44889ed89d3978eda775874", "sub_image": null, "external": false}}, "ecmetricscron": {"name": "ecmetricscron", "description": "Cron job to query Elasticache metrics", "repository": "git@github.com:lyft/elasticachemetricscron.git", "slack": "#ds-transientdata-pod", "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "Datastores", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:8e738741d84a4e5507052068fa7dafe771cb111a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d1cb9c056a95d78685702e724b485de3870be5c2", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "metricscron", "command": "dumb-init -- service_venv python3 fetch_elasticache_nodes.py", "sub_image": "k8s", "workdir": "/code/elasticachemetricscron"}], "groups": [{"name": "dev", "members": ["control.dev", "metadataproxy.server", "ecmetricscron.legacy"]}, {"name": "service_group", "members": ["ecmetricscron.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "ecmetricscron.dev"}, {"name": "unit", "type": "jailed", "command": "service_venv pytest --cov=app --junitxml=build/unit.xml --cov-report=xml tests/unit", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "metricscron", "type": "cron", "member": "ecmetricscron.metricscron", "concurrency_policy": "forbid", "schedule": "0 */6 * * *"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "metricscron"}]}, {"name": "production", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "metricscron"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "ecmetricscron"}]}}, "version": "4bf647257d3448fa2130c4093f107f10cfdd5ac1", "images": [{"parent": {"name": "opsbase", "version": "8e738741d84a4e5507052068fa7dafe771cb111a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d1cb9c056a95d78685702e724b485de3870be5c2", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "8e738741d84a4e5507052068fa7dafe771cb111a", "sub_image": null, "external": false}}, "ecrpruner": {"name": "ecrpruner", "description": "ecrpruner", "repository": "git@github.com:lyft/ecrpruner.git", "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "containers": [{"name": "prune", "command": "dumb-init -- service_venv python -m ecrpruner.pruner", "sub_image": "s2i", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "iadprune", "command": "dumb-init -- service_venv python -m ecrpruner.pruner --region=iad --all", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "pdxprune", "command": "dumb-init -- service_venv python -m ecrpruner.pruner --region=pdx --all", "limits": {"cpu": 1, "memory": "1Gi"}}], "facets": [{"name": "iadcron", "member": "ecrpruner.iadprune", "type": "cron", "schedule": "0 0 * * 1-5", "sidecars": ["statsd"]}, {"name": "pdxcron", "member": "ecrpruner.pdxprune", "type": "cron", "schedule": "0 0 * * 1-5", "sidecars": ["statsd"]}, {"name": "iadbatch", "member": "ecrpruner.iadprune", "type": "batch", "sidecars": ["statsd"]}, {"name": "pdxbatch", "member": "ecrpruner.pdxprune", "type": "batch", "sidecars": ["statsd"]}], "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "orca_environments": {"production": "zimride"}, "deploy": [{"name": "canary", "legacy": false, "automatic": false, "targets": [{"facet": "iadbatch"}, {"facet": "pdxbatch"}]}, {"name": "production", "legacy": false, "targets": [{"facet": "iadcron"}, {"facet": "iadbatch"}, {"facet": "pdxcron"}, {"facet": "pdxbatch"}], "orca": [{"orca_location": "ops", "region": "iad"}]}], "image_type": "tool", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3"}}]}}, "version": "f3d35f715e551ab2cb8225a8764f019948015bfc", "images": [{"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}}, "eiloadtest": {"name": "eiloadtest", "description": "Load testing and benchmarking metrics for EventIngest and its client SDKs", "repository": "git@github.com:lyft/eiloadtest.git", "image_type": "service", "service_tier": 3, "slack": "#data-ingest-alerts", "team_email": "dataingest@lyft.com", "pagerduty_escalation_policy": "DataIngest-Email-Only", "languages": ["python"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/eiloadtest", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}], "groups": [{"name": "dev", "members": ["control.dev", "eventingest.service", "eiloadtest.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "eiloadtest.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "eiloadtest"}], "common_settings": {"internal_hosts": {"eventingest": null}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "facets": [{"name": "main", "member": "eiloadtest.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 1, "max_size": 2}}}}], "version": "4731180be762d1ca153dd0e781fb01145962416f", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "elasticachetools": {"name": "elasticachetools", "description": "Tools for managing elasticache clusters", "repository": "git@github.com:lyft/elasticachetools.git", "slack": "#ds-transientdata-pod", "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS Transient Data", "image_type": "service", "service_tier": 3, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s", "packages": ["redis-tools", "vim"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 1, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "autosscalecron", "command": "dumb-init -- service_venv python3 redis_auto_scaling_scheduler.py --target-config-file configs/auto_scaling-prd.yaml", "sub_image": "k8s", "workdir": "/code/elasticachetools", "limits": {"cpu": 4, "memory": "3.5Gi"}}, {"name": "autosscalecronstg", "command": "dumb-init -- service_venv python3 redis_auto_scaling_scheduler.py --target-config-file configs/auto_scaling-stg.yaml", "sub_image": "k8s", "workdir": "/code/elasticachetools", "limits": {"cpu": 4, "memory": "3.5Gi"}}, {"name": "adhoctaskcron", "command": "dumb-init -- service_venv python3 adhoc_task_dispatcher.py", "sub_image": "k8s", "workdir": "/code/elasticachetools"}, {"name": "taskschedulerbatch", "command": "dumb-init -- service_venv python3 redis_task_scheduler.py", "sub_image": "k8s", "workdir": "/code/elasticachetools"}], "groups": [{"name": "dev", "members": ["control.dev", "elasticachetools.legacy"]}, {"name": "service_group", "members": ["elasticachetools.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "elasticachetools.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "elasticachetools.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "autosscalecron", "type": "cron", "member": "elasticachetools.autosscalecron", "schedule": "*/5 * * * *"}, {"name": "autosscalecronstg", "type": "cron", "member": "elasticachetools.autosscalecronstg", "schedule": "*/5 * * * *"}, {"name": "adhoctaskcron", "type": "cron", "member": "elasticachetools.adhoctaskcron", "schedule": "*/15 * * * *"}, {"name": "taskschedulerbatch", "member": "elasticachetools.taskschedulerbatch", "type": "batch"}], "deploy": [{"name": "staging", "bake_time_minutes": 2, "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "autosscalecronstg"}, {"facet": "adhoctaskcron"}, {"facet": "taskschedulerbatch"}]}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "autosscalecron"}, {"facet": "adhoctaskcron"}, {"facet": "taskschedulerbatch"}]}], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "envoy": {"profile": "python", "settings": {"services": [{"name": "elasticachetools"}]}}, "version": "b0c2a1e71782a7402ecb63f3c682024515ceb0e3", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "elasticlogs": {"name": "elasticlogs", "description": "Elasticsearch - for logs", "repository": "git@github.com:lyft/elasticlogs.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "mappings", "command": "service_venv make generate_mappings"}, {"name": "routes", "command": "service_venv make generate_routes"}], "groups": [{"name": "dev", "members": ["control.dev", "elasticlogs.legacy", "elasticsearch6.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "elasticlogs.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "elasticlogs.dev", "container": "elasticlogs.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "team_email": "obs-analysis@lyft.com", "pagerduty_escalation_policy": "Observability-Analysis", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "deploy": [{"name": "staging", "legacy": true, "automatic": false, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "languages": ["bash", "python"], "image_type": "service", "service_tier": 2, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "version": "417ef28ae1d9ced6f36bfdb595ed43138960427e", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "elasticsearch": {"name": "elasticsearch", "description": "development version of the elasticsearch database", "repository": "git@github.com:lyft/containers.git:elasticsearch", "slack": "#ds-aws-pod", "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS AWS", "containers": [{"name": "server", "command": "/code/containers/elasticsearch/entrypoint.sh", "start_phase": "parallel_storage", "start_time": 120, "snapshot": {"dump": "/code/containers/elasticsearch/snapshot.sh", "restore": "/code/containers/elasticsearch/restore.sh"}, "exports": [{"name": "api", "port": 9200}]}], "groups": [{"name": "dev", "members": ["control.dev", "elasticsearch.server"]}], "tests": [{"name": "start", "type": "startup", "group": "elasticsearch.dev"}], "deploy": [{"name": "development", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false}], "languages": ["bash"], "image_type": "tool", "version": "8a8309528d315bed5ac9ad3a012f4a5d30e5e89e", "images": [{"parent": {"name": "java", "version": "fb9f53d43767164e3147deabeff91cdb2deb46e3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java", "version": "fb9f53d43767164e3147deabeff91cdb2deb46e3", "sub_image": null, "external": false}}, "elasticsearch5": {"name": "elasticsearch5", "description": "development version of the elasticsearch 5.x database", "repository": "git@github.com:lyft/containers.git:elasticsearch5", "slack": "#ds-aws-pod", "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS AWS", "containers": [{"name": "server", "privileged": true, "command": "/code/containers/elasticsearch5/entrypoint.sh", "start_phase": "parallel_storage", "start_time": 120, "exports": [{"name": "api", "port": 9200}, {"name": "transport", "port": 9300}]}], "groups": [{"name": "dev", "members": ["control.dev", "elasticsearch5.server"]}], "tests": [{"name": "start", "type": "startup", "group": "elasticsearch5.dev"}], "upstream_tests": {"on_commit": true, "test_set": {"acl": ["unit", "integration"], "ats": ["e2e-unsharded", "unit"], "avingest": ["unit", "integration", "regression"], "campaigns": ["integration"], "clientevent2es": ["integration"], "datatagger": ["startup"], "dynamostreams": ["unit", "elasticsearch-mapper-validator"], "enterprise": ["unit", "integration", "terraform-checkformat", "terraform-validate"], "fleetlocations": ["unit"], "fleetmanagement": ["unit", "integration"], "green": ["unit", "integration", "expresspay_fixtures", "payout_fixtures"], "infraevents": ["startup"], "kibana": ["start"], "legacyapi": ["integration"], "mailer": ["integration"], "messaging": ["integration"], "notes": ["unit", "integration"], "regions": ["unit", "integration"], "rentals": ["component", "component_resources", "integration", "goldenpath"], "securitylogingestng": ["startup"], "streamingplatform": ["integration"], "team": ["integration"]}}, "deploy": [{"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false}, {"name": "canary", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false}], "languages": ["bash"], "image_type": "tool", "version": "e63301719c0e64a5ae84d328cd69c1c9bd5f6e59", "images": [{"parent": {"name": "imagebase", "version": "b16a627a3902206e9cb1f292ee74355d73ad3034", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "b16a627a3902206e9cb1f292ee74355d73ad3034", "sub_image": null, "external": false}}, "elasticsearch6": {"name": "elasticsearch6", "description": "development version of the elasticsearch 6.x database", "repository": "git@github.com:lyft/containers.git:elasticsearch6", "slack": "#ds-aws-pod", "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS AWS", "languages": ["bash"], "image_type": "tool", "containers": [{"name": "server", "privileged": true, "command": "/code/containers/elasticsearch6/entrypoint.sh", "start_phase": "parallel_storage", "start_time": 120, "exports": [{"name": "api", "port": 9200}, {"name": "transport", "port": 9300}]}], "groups": [{"name": "dev", "members": ["control.dev", "elasticsearch6.server"]}], "tests": [{"name": "start", "type": "startup", "group": "elasticsearch6.dev"}], "deploy": [{"name": "staging", "legacy": false, "orca": [], "automatic": true}, {"name": "production", "legacy": false, "orca": []}], "version": "93852de94220bcdecfa0ad89efc987ccf004894b", "images": [{"parent": {"name": "bionicbase", "version": "9b4230fd5cc42c0aa4032f16bc69cbbc3a79e018", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "9b4230fd5cc42c0aa4032f16bc69cbbc3a79e018", "sub_image": null, "external": false}}, "elasticsearch7": {"name": "elasticsearch7", "description": "elasticsearch7 inside k8s", "repository": "git@github.com:lyft/elasticsearch7.git", "builder": {"name": "docker_build", "params": {"buildargs": ["ES_VERSION=7.1.1"]}}, "slack": "#tnw-bots", "team_email": "dudell@lyft.com", "service_tier": 3, "image_type": "tool", "deploy": [{"name": "development", "legacy": false}, {"name": "production", "automatic": false, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "version": "dba2f183f9447a936c394a64831ca0aaef9e6358", "images": [{"parent": {"name": "bionicbase", "version": "60cfd848e5c211c7a0cc63f841917c90af74ae9e", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "60cfd848e5c211c7a0cc63f841917c90af74ae9e", "sub_image": null, "external": false}}, "emergencyassist": {"name": "emergencyassist", "description": "Service that handles emergency assistance interactions with clients", "repository": "git@github.com:lyft/emergencyassist.git", "image_type": "service", "service_tier": 1, "slack": "#community-safety-bots", "team_email": "community-safety-eng@lyft.com", "pagerduty_escalation_policy": "Community Safety", "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "emergencyassist.legacy"]}, {"name": "integration", "members": ["control.dev", "dynamodb.server", "ratelimit.dev", "jobscheduler.dev", "guardian.dev", "supportcontact.dev", "routesapi.dev", "emergencyassist.legacy", "etaproxy.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "emergencyassist.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "emergencyassist.integration", "container": "emergencyassist.legacy", "command": "make test_integration"}, {"name": "adt_integration", "type": "execution", "group": "emergencyassist.integration", "container": "emergencyassist.legacy", "command": "make test_adt", "autotrigger": false, "float_dependencies": "H 5-17 * * *"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "emergencyassist"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 30}}}, "external_hosts": {"adt": null, "dynamodb_iad": null, "firehose_iad": null}, "internal_hosts": {"jobschedulernormalweb": null, "cancels": null, "drivermode": null, "locations": null, "messaging": null, "places": null, "pusher": null, "ratelimit": null, "regions": null, "rides": null, "routes": null, "routesapi": null, "supply": null, "supportcontact": null, "tcs": null, "trips": null, "tripsapi": null, "users": null, "push": null, "notes": null, "etaproxy": null}}}}, "logging": {"emergencyassist": {"fields": {"user_id": "keyword", "session_id": "keyword", "reason": "keyword", "exception": {"message": "keyword", "class": "keyword"}, "attempt_num": "long", "traceback": "keyword", "failed_record": "keyword", "error": {"client_id": "keyword", "is_internal": "boolean", "os": "keyword", "error_class": "keyword", "major_app_version": "keyword", "message": {"error": "keyword"}, "endpoint": "keyword", "error_code": "long", "client_type": "keyword", "user_id": "keyword"}, "incident_id": "keyword", "incident_group_id": "keyword", "exception_message": "text"}}}, "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "version": "5c9f395e76ba7eb704ef3dc8d961102afdb1a179", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "engagementplatform": {"name": "engagementplatform", "description": "Service for running engagement campaigns", "repository": "git@github.com:lyft/engagementplatform.git", "image_type": "service", "service_tier": 2, "slack": "#rider-incentives-dev", "team_email": "rider-incentives-eng@lyft.com", "pagerduty_escalation_policy": "Rider Incentives", "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}, {"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libspatialindex-c3", "libgeos-c1"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/engagementplatform", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "768Mi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}}], "groups": [{"name": "minimal", "members": ["control.dev", "dynamodb.dev", "coupons.minimal", "messaging.dev", "push.dev", "redis.dev", "usereligibilities.minimal", "engagementplatform.legacy"]}, {"name": "dev", "members": ["control.dev", "dynamodb.dev", "coupons.dev", "messaging.dev", "push.dev", "redis.dev", "usereligibilities.dev", "engagementplatform.legacy"]}, {"name": "integration", "members": ["account.dev", "auth.dev", "dispatch.dev", "dispatchavailability.dev", "engagementplatform.dev", "godfather.dev", "green.dev", "jobscheduler.dev", "karma.dev", "ledger.dev", "locations.dev", "pricing.dev", "regions.dev", "rides.dev", "ridesapi.dev", "routes.dev", "switchboard.dev", "tcs.dev", "tripsapi.dev", "trips.dev", "users.dev", "viewport.dev", "wallet.dev", "walletapi.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "engagementplatform.minimal"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "engagementplatform.integration", "container": "engagementplatform.legacy", "command": "make test_integration", "reports": {"junit": "build/local_integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}], "facets": [{"name": "main", "member": "engagementplatform.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 30}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 60}}}}, {"name": "canary", "member": "engagementplatform.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "envoy": {"profile": "python", "settings": {"services": [{"name": "engagementplatform"}], "common_settings": {"internal_hosts": {"coupons": null, "jobschedulerbulkweb": null, "messaging": null, "push": null, "tcs": null, "users": null, "usereligibilities": null, "usergroups": null, "regions": null, "ridepasses": null, "ridestreaks": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "redis": {"engagementplatformmultiredis": {"port": 6379}}}}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "logging": {"engagementplatform": {"fields": {"campaign_id": "keyword", "user_id": "keyword", "action": "keyword", "status": "keyword", "campaign_creator": "keyword", "validator": "keyword", "reason": "keyword", "data": {"action": "keyword", "campaign_variant_name": "keyword", "code": "keyword", "experiment_name": "keyword", "experiment_variant": "keyword", "exposure_options": "keyword"}, "error": "keyword"}}}, "version": "a845bda0f8631ab58a46176f427c385dffeaaab2", "images": [{"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "py37", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "enterprise": {"name": "enterprise", "description": "enterprise", "repository": "git@github.com:lyft/enterprise.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "groups": [{"name": "dev", "members": ["control.dev", "mongodb.server", "dynamodb.server", "redis.dev", "elasticsearch6.server", "enterprise.legacy", "dbproxyenterprise.dev", "idl.server"]}, {"name": "integration", "members": ["lyfttestlib.ride", "account.dev", "adtechworkflows.dev", "auth.dev", "coupons.dev", "dispatch.dev", "dispatchavailability.dev", "enterprise.dev", "enterprisecustomfields.dev", "enterprisedispatch.dev", "fanner.dev", "fare.dev", "green.dev", "jobscheduler.dev", "ledger.dev", "locations.dev", "mailer.dev", "matchingstate.dev", "messaging.dev", "platformfeecalculator.dev", "pricing.dev", "publicapi.dev", "regions.dev", "rideexpensing.dev", "ridehistory.dev", "ridetimeestimator.dev", "rides.dev", "ridesapi.dev", "ridescheduler.dev", "routes.dev", "switchboard.dev", "tcs.dev", "tolls.dev", "tripsapi.dev", "txnhub.dev", "users.dev", "viewport.dev", "wallet.dev", "walletapi.dev", "www2.dev"]}, {"name": "wwwenterprisefe", "members": ["account.dev", "auth.dev", "coupons.dev", "dispatch.dev", "dispatchavailability.dev", "fare.dev", "fanner.dev", "green.dev", "jobscheduler.dev", "ledger.dev", "locations.dev", "mailer.dev", "matchingstate.dev", "messaging.dev", "regions.dev", "ridetimeestimator.dev", "ridesapi.dev", "streamingest.dev", "switchboard.dev", "tcs.dev", "txnhub.dev", "users.dev", "viewport.dev", "wallet.dev", "walletapi.dev"]}, {"name": "enterprisefrontend", "members": ["account.dev", "adtechworkflows.dev", "auth.dev", "coupons.dev", "dispatch.dev", "dispatchavailability.dev", "enterprise.dev", "fanner.dev", "green.dev", "jobscheduler.dev", "locations.dev", "mailer.dev", "matchingstate.dev", "messaging.dev", "regions.dev", "rideexpensing.dev", "ridetimeestimator.dev", "streamingest.dev", "switchboard.dev", "tcs.dev", "users.dev", "viewport.dev", "wallet.dev", "walletapi.dev"]}, {"name": "riderintegration", "members": ["enterprisefrontend.integration", "enterprisepaxfe.dev", "wwwenterprisefe.dev", "loyaltypartnerships.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "enterprise.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "execution", "group": "enterprise.dev", "container": "enterprise.legacy", "command": "make test_unit", "skip_threshold": 9999, "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "sharded", "group": "enterprise.dev", "container": "enterprise.legacy", "target": "tests/e2e", "virtualenv": "service_venv", "float_dependencies": "15,45 * * * *", "reports": {"junit": "build/integration.xml"}}, {"name": "terraform-checkformat", "type": "tool", "tool": "terraform.checkformat"}, {"name": "terraform-validate", "type": "tool", "tool": "terraform.validate"}], "upstream_tests": {"on_commit": true, "test_set": {"enterprisedispatch": ["integration"], "wwwenterprisefe": ["e2e_chrome_work"], "conciergefe": ["e2e_chrome_concierge"], "enterprisefrontend": ["e2e_chrome"]}}, "slack": "#enterprise-dev", "notification_overrides": {"deploy": {"slack": "#enterprise-deploy"}, "deploy_failure": {"slack": "#enterprise-deploy"}, "test_failure": {"slack": "#enterprise-deploy"}, "master_failure": {"slack": "#enterprise-deploy"}, "pr_merge": {"slack": "#enterprise-deploy"}}, "team_email": "enterprise-eng@lyft.com", "pagerduty_escalation_policy": "Enterprise Commerce", "service_tier": 1, "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "languages": ["bash", "python"], "image_type": "service", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "enterprise"}, {"name": "enterprisebatch"}, {"name": "enterpriseworkers", "traffic_type": "egress_only"}], "common_settings": {"authorization": {"permissions": {"common_permissions": {"not_paths": ["/saml/*"]}, "expensing": {"paths": ["/expensing/*", "/v1/enterpriseprofile", "/v1/enterpriseprofile/expensing-provider", "/organizations/*"]}}, "bindings": {"enterpriseint": ["*"], "enterprisepayapi": ["*"], "rideprograms": ["*"], "test": ["*"], "rideexpensing": ["expensing"], "*": ["common_permissions"]}}, "local_service": {"circuit_breakers": {"default": {"max_connections": 1000}}}, "internal_hosts": {"account": null, "adtechworkflows": null, "auth": null, "billingaggregator": null, "chromeheadless": null, "coupons": null, "enterprisecustomfields": null, "enterprisedispatch": null, "green": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "ledger": null, "loyaltypartnerships": null, "mailer": null, "messaging": null, "places": null, "platformfeecalculator": null, "publicapi": null, "ratelimit": null, "regions": null, "rideexpensing": null, "ridehistory": null, "rideprograms": null, "rides": null, "ridesapi": null, "ridescheduler": null, "routesapi": null, "switchboard": null, "txnhub": null, "tripsapi": null, "users": null, "venues": null, "wallet": null, "walletapi": null, "tcs": null, "usereligibilities": null, "dbproxyenterprise": null}, "external_hosts": {"boomi": null, "dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null, "s3_iad": null}, "mongos": {"enterprise": {"staging": {"ratelimit": true, "clusters": [{"port": 27027, "hosts": ["r143043-a0.mlab.com:27817"]}, {"port": 27028, "hosts": ["r143043-a1.mlab.com:27817"]}], "circuit_breakers": {"default": {"max_connections": 200}}}, "production": {"ratelimit": true, "clusters": [{"port": 27027, "hosts": ["r059373-10.mlab.com:27817"]}, {"port": 27028, "hosts": ["r059373-11.mlab.com:27817"]}, {"port": 27044, "hosts": ["r059373-12.mlab.com:27817"]}, {"port": 27045, "hosts": ["r059373-13.mlab.com:27817"]}], "circuit_breakers": {"default": {"max_connections": 200}}}}}, "redis_clusters": {"enterprise": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}, "override_settings": [{"services": [{"name": "enterprisebatch"}], "settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}}}]}}, "logging": {"enterprise": {"fields": {"request": {"upstream_service": "keyword", "user_id": "keyword", "internal_user_email": "keyword"}, "endpoint": "keyword", "data": {"org_id": "keyword", "limit": "long", "include_stats": "boolean", "only_errors": "boolean", "user_id": "keyword", "ride_id": "keyword", "requested_time_ms": "keyword", "passenger_id": "keyword", "organization_slug": "keyword", "requester_id": "keyword", "organization_id": "keyword"}, "contract_id": "keyword", "reason": "keyword", "ride_id": "keyword", "event_id": "keyword", "organization_id": "keyword", "organization_slug": "keyword", "org_member_id": "keyword", "error": "keyword", "payments_to_insert": "keyword", "payments_to_delete": "keyword", "phone_number": "keyword", "user_id": "keyword", "username": "keyword", "status_code": "long", "method": "keyword", "uri_path": "keyword", "bad_response_service": "keyword", "bad_response_path": "keyword", "bad_response_method": "keyword", "bad_response_status_code": "long", "bad_response_grpc_code": "long", "bad_response_grpc_code_name": "keyword", "table": "keyword", "table_pk": "keyword", "table_gsi": "keyword", "function_name": "keyword", "op": "keyword", "event": {"ride_id": "keyword", "event_id": "keyword", "is_business_ride": "boolean", "event_name": "keyword", "route_id": "keyword", "driver_obscured_id": "keyword", "requester_publicapi_client_id": "keyword", "ride_type": "keyword", "is_simulated_ride": "boolean", "driver_lyft_id": "keyword", "ride_count": "long", "payer_domain": "keyword", "requester_id": "keyword", "passenger_app_version": "keyword", "driver_app_version": "keyword", "http_id": "keyword", "is_autonomous": "boolean", "region": "keyword", "is_ghost_ride": "boolean", "is_auto_complete": "boolean", "lng": "float", "source_pipeline": "keyword", "passenger_lyft_id": "keyword", "route_domain": "keyword", "vehicle_lyft_id": "keyword", "organization_slug": "keyword", "is_organization_membership_verified": "boolean", "lyft_commission": "long", "passenger_id": "keyword", "lat": "float", "payer_id": "keyword", "driver_id": "keyword", "business_ride": "keyword", "passenger_obscured_id": "keyword", "http_request_id": "keyword", "passenger_rating": "long"}, "urm_request_id": "keyword", "txnhub_transaction_id": "keyword"}}, "enterpriseworkers": {"fields": {"num_of_retries": "integer", "parent_id": "keyword", "queue": "keyword", "task_id": "text", "task_name": "keyword", "task_args": "text", "task_kwargs": "text"}, "unindexed_fields": ["is_child_task", "is_retry_attempt", "will_retry", "will_retry_at"]}}, "version": "ba6251647c57d1dae795f68ef1d4be7a53ff8932", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "enterpriseapiprovisioning": {"name": "enterpriseapiprovisioning", "description": "Support API provisioning", "repository": "git@github.com:lyft/enterpriseapiprovisioning.git", "slack": "#enterprise-productivity-bot", "team_email": "lb-productivity-eng@lyft.com", "pagerduty_escalation_policy": "business productivity", "image_type": "service", "service_tier": 2, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "enterpriseapiprovisioning.legacy", "legacyoauth.dev"]}, {"name": "service_group", "members": ["enterpriseapiprovisioning.legacy"]}, {"name": "integration", "members": ["enterpriseapiprovisioning.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "enterpriseapiprovisioning.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "enterpriseapiprovisioning.integration", "container": "enterpriseapiprovisioning.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}], "facets": [{"name": "main", "member": "enterpriseapiprovisioning.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "enterpriseapiprovisioning.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "enterpriseapiprovisioning"}], "common_settings": {"internal_hosts": {"legacyoauth": null}, "external_hosts": {"dynamodb_iad": null}}}}, "version": "3a73a89ab6b4901670d9cdcd28e0ad23b1bb6acc", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "enterprisecustomfields": {"name": "enterprisecustomfields", "description": "Service for enterprise customers to store metadata associated with Lyft objects", "repository": "git@github.com:lyft/enterprisecustomfields.git", "pagerduty_escalation_policy": "Enterprise Concierge", "team_email": "enterprise-concierge-eng@lists.lyft.com", "slack": "#enterprise-deploy", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/enterprisecustomfields", "limits": {"cpu": 1, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "enterprisecustomfields.legacy", "idl.server"]}, {"name": "service_group", "members": ["enterprisecustomfields.legacy"]}, {"name": "integration", "members": ["enterprisecustomfields.dev", "account.dev", "auth.dev", "dispatch.dev", "dispatchavailability.dev", "distributedlock.service", "enterprise.dev", "enterprisedispatch.dev", "etaproxy.dev", "green.dev", "jobscheduler.dev", "legacyoauth.dev", "legacyridetypes.dev", "locations.dev", "pricing.dev", "publicapi.dev", "rides.dev", "ridesapi.dev", "ridescheduler.dev", "routes.dev", "routesapi.dev", "supply.dev", "usergroups.dev", "users.dev", "venues.dev", "viewport.dev", "walletapi.dev", "sqs.server", "postgresql.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "enterprisecustomfields.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit-integration", "type": "execution", "group": "enterprisecustomfields.dev", "container": "enterprisecustomfields.legacy", "command": "make test_unit_integration", "reports": {"junit": "build/unit-integration.xml"}}], "facets": [{"name": "main", "member": "enterprisecustomfields.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "enterprisecustomfields.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "enterprisecustomfields"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "kinesis_iad": null}, "internal_hosts": {"enterprise": null, "enterprisedispatch": null, "enterprisecustomfields": null, "rides": null, "ridescheduler": null}}}}, "version": "bdb2f5d35e9711d38947c715b2136962420c9c4a", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "enterprisedispatch": {"name": "enterprisedispatch", "description": "Lyft Enterprise Dispatch Service for Concierge and Dispatch API", "repository": "git@github.com:lyft/enterprisedispatch.git", "image_type": "service", "service_tier": 1, "pagerduty_escalation_policy": "Enterprise Concierge", "team_email": "enterprise-concierge-eng@lists.lyft.com", "slack": "#enterprise-deploy", "languages": ["python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/enterprisedispatch", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "flexstatus", "command": "dumb-init -- service_venv python manage.py expire_old_flex_dispatches --add-random-sleep", "workdir": "/code/enterprisedispatch", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "256Mi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "redis.dev", "enterprisedispatch.legacy", "distributedlock.service", "elasticsearch6.server"]}, {"name": "integration", "members": ["lyfttestlib.ride", "enterprisedispatch.dev", "dbproxyenterprise.legacy", "enterprise.legacy", "messaging.legacy", "ridescheduler.legacy", "switchboard.legacy", "venues.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "enterprisedispatch.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "enterprisedispatch.integration", "container": "enterprisedispatch.legacy", "command": "make test_integration", "skip_threshold": 1, "reports": {"junit": "build/int.xml"}}, {"name": "e2e", "type": "sharded", "group": "enterprisedispatch.dev", "container": "enterprisedispatch.legacy", "target": "tests/e2e", "virtualenv": "service_venv", "reports": {"junit": "build/e2e.xml"}, "float_dependencies": "H/30 * * * *"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "upstream_tests": {"on_commit": true, "test_set": {"enterprise": ["integration"]}}, "facets": [{"name": "main", "member": "enterprisedispatch.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 10}, "production": {"min_size": 2, "max_size": 20}}}}, {"name": "canary", "member": "enterprisedispatch.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "cron", "member": "enterprisedispatch.flexstatus", "type": "cron", "schedule": "0 * * * *"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "targets": [{"facet": "main"}, {"facet": "cron"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:b53cef4fa319d93186ad696836fe2985a4b6381d", "sub_image": "k8s"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "enterprisedispatch"}], "common_settings": {"internal_hosts": {"ats": null, "auth": null, "cancels": null, "distributedlock": null, "enterprise": null, "enterprisedispatch": null, "enterprisecustomfields": null, "fare": null, "ledger": null, "legacyoauth": null, "loyaltypartnerships": null, "messaging": null, "pricing": null, "publicapi": null, "ratelimit": null, "ratings": null, "rides": null, "ridesapi": null, "ridescheduler": null, "usergroups": null, "users": null, "regions": null, "supplyrecords": {"tls_enabled": true}, "switchboard": null, "tcs": null, "telegraph": null, "trips": null, "tripsapi": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "venues": null, "pickupcomms": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "redis_clusters": {"enterprisedispat": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "logging": {"enterprisedispatch": {"fields": {"endpoint": "keyword", "input_parser": "keyword", "is_success": "boolean", "parsed_kwargs": "text", "downstream_service": "keyword", "http_code": "integer", "event_type": "keyword", "args": "text", "request_data": "text", "ride_id": "keyword"}}}, "version": "12f1095bf5e96d533ef650877915f63fefb04798", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "b53cef4fa319d93186ad696836fe2985a4b6381d", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "enterprisefrontend": {"name": "enterprisefrontend", "description": "enterprise frontend", "repository": "git@github.com:lyft/enterprisefrontend.git", "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "workdir": "/code/enterprisefrontend", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "cdnupload", "command": "/code/enterprisefrontend/cdn-upload", "workdir": "/code/enterprisefrontend", "sub_image": "k8s"}], "custom": {"service_type": "nodejs", "internal_service": false, "frontend_service": true}, "pulldeploy_components": {"data": ["translationdata"]}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "enterprisefrontend.legacy", "www2.dev", "tcs.legacy"]}, {"name": "integration", "members": ["accountfrontend.integration", "enterprisefrontend.dev", "enterprise.enterprisefrontend", "mailer.dev", "www2.dev", "wwwbrochurefe.dev"]}, {"name": "e2e", "members": ["e2etest.server", "enterprisefrontend.integration"]}], "tests": [{"name": "startup", "type": "startup", "group": "enterprisefrontend.dev"}, {"name": "unit", "type": "jailed", "command": "make test_coverage", "reports": {"junit": "build/unit.xml", "cobertura": ".coverage/cobertura-coverage.xml"}}, {"name": "lint", "type": "jailed", "command": "make test_lint"}, {"name": "e2e_chrome", "type": "execution", "group": "enterprisefrontend.e2e", "container": "enterprisefrontend.legacy", "command": "make test_e2e browser=chrome suite=all", "reports": {"junit": "test/results/protractor-results-chrome.xml"}, "skip_threshold": null}], "slack": "#enterprise-deploy", "team_email": "enterprise-admin-eng@lyft.com", "pagerduty_escalation_policy": "Enterprise Admin", "service_tier": 1, "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"legacy": false, "name": "production", "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "languages": ["javascript"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "enterprisefrontend"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"wwwbrochurefe": null, "users": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2inode:service.c613d468388654eeca11d9a11603d9872a559e38", "sub_image": "k8s"}}, {"name": "docker_build"}]}}, "facets": [{"name": "main", "member": "enterprisefrontend.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 5, "max_size": 5}}}}, {"name": "canary", "member": "enterprisefrontend.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "assets", "member": "enterprisefrontend.cdnupload", "type": "job"}], "version": "ba9e0457a2840ff3fbc05f421c2e8a2b4d609895", "images": [{"parent": {"name": "s2inode", "version": "c613d468388654eeca11d9a11603d9872a559e38", "sub_image": "service", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "enterpriseint": {"name": "enterpriseint", "description": "Enterprise internal tools", "repository": "git@github.com:lyft/enterpriseint.git", "image_type": "service", "service_tier": 2, "slack": "#enterprise-deploy", "team_email": "enterprise-admin-eng@lyft.com", "pagerduty_escalation_policy": "Enterprise Admin", "languages": ["javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "workdir": "/code/enterpriseint", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "cdnupload", "command": "/code/enterpriseint/cdn-upload", "workdir": "/code/enterpriseint", "sub_image": "k8s"}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "enterpriseint.legacy", "enterprise.dev", "publicapi.dev", "wallet.dev", "walletapi.dev", "jobscheduler.dev", "wwwbrochurefe.dev"]}, {"name": "integration", "members": ["control.dev", "enterpriseint.legacy", "enterprise.integration"]}], "tests": [{"name": "startup", "type": "startup", "group": "enterpriseint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_coverage", "reports": {"cobertura": ".coverage/cobertura-coverage.xml"}}, {"name": "lint", "type": "jailed", "command": "make test_lint", "reports": {"control_extract_hack_1": "test/results/eslint-results.txt", "control_extract_hack_2": "test/results/eslint-modern-results.txt"}}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "enterpriseint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"acl": null, "directorysync": null, "enterprise": null, "places": null, "tom": null, "privacyaudit": null, "rideprograms": null, "enterprisepayapi": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2inode:service.c613d468388654eeca11d9a11603d9872a559e38", "sub_image": "k8s"}}, {"name": "docker_build"}]}}, "facets": [{"name": "main", "member": "enterpriseint.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 5, "max_size": 5}}}}, {"name": "canary", "member": "enterpriseint.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "assets", "member": "enterpriseint.cdnupload", "type": "job"}], "version": "f83a41284cee354fe64e84ffff18b377c91dc7cb", "images": [{"parent": {"name": "s2inode", "version": "c613d468388654eeca11d9a11603d9872a559e38", "sub_image": "service", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "enterpriseorgapi": {"name": "enterpriseorgapi", "description": "manage organization metadata for the enterprise team", "repository": "git@github.com:lyft/enterpriseorgapi.git", "slack": "#ride-programs-dev", "team_email": "enterprise-rp-eng@lists.lyft.com", "pagerduty_escalation_policy": "Ride Programs", "image_type": "service", "service_tier": 3, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "packages": ["libgeos-c1", "libspatialindex-c3", "libcurl4-openssl-dev", "libssl-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py38.b53cef4fa319d93186ad696836fe2985a4b6381d", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "enterpriseorgapi.legacy"]}, {"name": "service_group", "members": ["enterpriseorgapi.legacy"]}, {"name": "integration", "members": ["enterpriseorgapi.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "enterpriseorgapi.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy"}, {"name": "integration", "type": "sharded", "target": "tests/integration/", "virtualenv": "integration_venv", "autotrigger": false}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "autotrigger": false, "container": "enterpriseorgapi.legacy", "group": "enterpriseorgapi.dev", "framework": "pytest", "coverage": false, "targets": ["tests/unit"], "markers": "unit_legacy"}], "facets": [{"name": "main", "member": "enterpriseorgapi.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "enterpriseorgapi.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "enterpriseorgapi"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}}}}, "version": "4d487d084cfe77a9160a586b0ea7e8258bff8786", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "b53cef4fa319d93186ad696836fe2985a4b6381d", "sub_image": "py38", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "enterprisepaxfe": {"name": "enterprisepaxfe", "description": "Enterprise pax facing service", "repository": "git@github.com:lyft/enterprisepaxfe.git", "image_type": "service", "service_tier": 1, "slack": "#enterprise-deploy", "team_email": "enterprise-admin-eng@lyft.com", "pagerduty_escalation_policy": "Enterprise Admin", "languages": ["javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "workdir": "/code/enterprisepaxfe", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "cdnupload", "command": "/code/enterprisepaxfe/cdn-upload", "workdir": "/code/enterprisepaxfe", "sub_image": "k8s"}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "enterprisepaxfe.legacy"]}, {"name": "integration", "members": ["accountfrontend.integration", "enterprisepaxfe.dev", "enterprise.integration", "www2.dev", "wwwbrochurefe.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "enterprisepaxfe.dev"}, {"name": "unit", "type": "jailed", "command": "make test_coverage", "reports": {"cobertura": ".coverage/cobertura-coverage.xml"}}, {"name": "lint", "type": "jailed", "command": "make test_lint", "reports": {"control_extract_hack_1": "test/results/eslint-results.txt", "control_extract_hack_2": "test/results/eslint-modern-results.txt"}}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "pulldeploy_components": {"data": ["translationdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "enterprisepaxfe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"users": null, "tcs": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2inode:service.c613d468388654eeca11d9a11603d9872a559e38", "sub_image": "k8s"}}, {"name": "docker_build"}]}}, "facets": [{"name": "main", "member": "enterprisepaxfe.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 5, "max_size": 5}}}}, {"name": "canary", "member": "enterprisepaxfe.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "assets", "member": "enterprisepaxfe.cdnupload", "type": "job"}], "version": "76ce1cadaa174b4e91d7a9e3c0c4f837c7ae260f", "images": [{"parent": {"name": "s2inode", "version": "c613d468388654eeca11d9a11603d9872a559e38", "sub_image": "service", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "enterprisepayapi": {"name": "enterprisepayapi", "description": "An API layer for managing/retrieving organization payments information", "repository": "git@github.com:lyft/enterprisepayapi.git", "slack": "#enterprise-commerce", "notification_overrides": {"deploy": {"slack": "#enterprise-deploy"}, "deploy_failure": {"slack": "#enterprise-deploy"}, "test_failure": {"slack": "#enterprise-deploy"}, "master_failure": {"slack": "#enterprise-deploy"}, "pr_merge": {"slack": "#enterprise-deploy"}}, "team_email": "enterprise-commerce-eng@lyft.com", "pagerduty_escalation_policy": "Enterprise Commerce", "image_type": "service", "service_tier": 1, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "packages": ["libgeos-dev", "libspatialindex-dev", "libcurl4-openssl-dev", "libssl-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev", "libcurl4-openssl-dev", "libssl-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "worker", "command": "dumb-init -- service_venv celery -A app.celery.celery worker --loglevel=debug --pool=gevent --max-tasks-per-child 10", "workdir": "/code/enterprisepayapi", "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "enterprisepayapi.legacy", "enterprisepayapi.worker"]}, {"name": "service_group", "members": ["enterprisepayapi.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "enterprisepayapi.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "enterprisepayapi.dev", "container": "enterprisepayapi.legacy", "command": "service_venv pytest --junitxml=build/integration.xml tests/integration", "reports": {"junit": "build/integration.xml"}}], "upstream_tests": {"on_commit": true, "test_set": {"conciergefe": ["e2e_chrome_concierge"], "enterprisefrontend": ["e2e_chrome"]}}, "facets": [{"name": "main", "member": "enterprisepayapi.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 3, "max_size": 5}}}}, {"name": "canary", "member": "enterprisepayapi.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}, {"name": "workers", "member": "enterprisepayapi.worker", "type": "worker", "autoscaling": {"criteria": {"cpu_target": 40}, "environment": {"staging": {"min_size": 1, "max_size": 2}}}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "workers"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "enterprisepayapi"}], "common_settings": {"internal_hosts": {"enterprise": null, "karma": null, "jobschedulernormalweb": null, "taskqueuenormalweb": null, "taskqueuebulkweb": null, "messaging": null, "ratelimit": null, "txnhub": null, "wallet": null, "walletapi": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}}}}, "logging": {"enterprisepayapi": {"fields": {"org_id_or_slug": "keyword", "organization_lyft_id": "keyword", "participant_id": "keyword", "data": "text", "bad_response_service": "keyword", "bad_response_path": "keyword", "bad_response_method": "keyword", "bad_response_status_code": "long", "bad_response_grpc_code": "long", "bad_response_grpc_code_name": "keyword"}}}, "version": "65d9cd0eec555515d656f2c2e3f27079c51adafd", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "enterprisesftp": {"name": "enterprisesftp", "description": "Externally accessible SFTP server for Enterprise customer data ingress/egress.", "repository": "git@github.com:lyft/enterprisesftp.git", "image_type": "service", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "enterprisesftp", "port": 9222}]}], "groups": [{"name": "dev", "members": ["control.dev", "enterprisesftp.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "enterprisesftp.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "slack": "#enterprise-dev", "notification_overrides": {"deploy": {"slack": "#enterprise-deploy"}, "deploy_failure": {"slack": "#enterprise-deploy"}, "test_failure": {"slack": "#enterprise-deploy"}, "master_failure": {"slack": "#enterprise-deploy"}, "pr_merge": {"slack": "#enterprise-deploy"}}, "team_email": "enterprise-platform-portal-eng@lists.lyft.com", "pagerduty_escalation_policy": "Enterprise Commerce", "envoy": {"profile": "python", "settings": {"services": [{"name": "enterprisesftp"}], "common_settings": {"internal_hosts": {"enterprise": null}}}}, "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "languages": ["python"], "service_tier": 2, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "precommit"}}]}}, "logging": {"enterprisesftp": {"fields": {"diff": "keyword"}}}, "version": "28d3ed632353fba4a9e08cdeeb90dc202b2894d3", "images": [{"parent": {"name": "opsbase", "version": "ce84eccb6431b0bcb1d7cc365ed8b131f35a748c", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "ce84eccb6431b0bcb1d7cc365ed8b131f35a748c", "sub_image": null, "external": false}}, "envoy": {"name": "envoy", "description": "general network ingress and egress router", "repository": "git@github.com:lyft/envoy-private.git", "restricted_ssh": true, "configsets": ["envoydata"], "containers": [{"name": "server", "command": "/code/envoy-private/entrypoint.sh", "mounts": ["/etc/envoy/envoy.yaml", "/var/log/envoy"], "network": "host", "start_phase": "sequential_envoy"}, {"name": "configgen", "command": "./configgen.sh", "start_phase": "sequential_init", "once": true, "mounts": ["/etc/envoy"]}], "groups": [{"name": "dev", "members": ["dnsmasq.dev", "envoydata.run", "envoy.server", "envoymanager.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "envoy.dev"}, {"name": "v3verify", "type": "tool", "tool": "v3verify.run"}, {"name": "shellcheck", "type": "tool", "tool": "shellcheck.lint", "autotrigger": false}], "test_logs": ["/var/log/envoy/access.log", "/var/log/envoy/access_error.log", "/var/log/envoy/ratelimit.log"], "slack": "#networking-bots", "team_email": "network-team@lyft.com", "pagerduty_escalation_policy": "Networking", "service_tier": 0, "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "staging-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "orca": [{"region": "iad", "iam_role": "orca-admin"}, {"region": "sfo", "iam_role": "orca-admin"}], "automatic": true}, {"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}, {"region": "sfo", "iam_role": "orca-admin"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}, {"region": "sfo", "iam_role": "orca-admin"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1b", "legacy": true, "availability_zone": "us-east-1b"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production-us-east-1f", "legacy": true, "availability_zone": "us-east-1f"}, {"name": "production-us-east-1e", "legacy": true, "availability_zone": "us-east-1e"}], {"name": "production", "legacy": true}], "languages": ["bash", "python"], "image_type": "service", "version": "f1d75b5794bca9620ca248e1a47f9d71743e69bb", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "envoybin": {"name": "envoybin", "description": "envoy OSS and lyft filters", "repository": "git@github.com:lyft/envoy-lyft.git", "restricted_ssh": true, "slack": "#networking", "team_email": "network-team@lyft.com", "image_type": "tool", "containers": [{"name": "spin", "command": "sleep infinity"}], "deploy": [{"name": "production", "legacy": true, "automatic": true}], "languages": ["python"], "tests": [{"name": "oss_trail_test", "type": "jailed", "command": "make oss_version_trail", "autotrigger": false}], "version": "1190040add786fb2ae1c9489a110cb122ba9ec2e", "images": [{"parent": {"name": "envoytoolchain", "version": "ec9bdd2a7155808236dd6fd63149e701918c4f6d", "sub_image": "trusty", "external": false}, "sub_image": null}], "parent": {"name": "envoytoolchain", "version": "ec9bdd2a7155808236dd6fd63149e701918c4f6d", "sub_image": "trusty", "external": false}}, "envoydata": {"name": "envoydata", "description": "Runtime configuration data for envoy", "repository": "git@github.com:lyft/envoydata.git", "image_type": "data", "service_tier": 1, "slack": "#networking", "notification_overrides": {"deploy": {"slack": "#networking-bots", "environments": ["production"]}, "test_failure": {"disabled": true}, "pr_merge": {"disabled": true}}, "team_email": "network-team@lyft.com", "pagerduty_escalation_policy": "Networking", "languages": ["bash"], "credentials": false, "docs": {"disable": true}, "containers": [{"name": "run", "command": "/code/envoydata/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/envoydata"]}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "shellcheck", "type": "tool", "tool": "shellcheck.lint"}, {"name": "unit", "type": "jailed", "command": "make test"}], "deploy": [[{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}]], "version": "461c4e924b568a8c172327b4f905b9f92db478a7", "images": [{"parent": {"name": "imagebase", "version": "3d05522cd0526907149ca4c05273c28771c398bf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "3d05522cd0526907149ca4c05273c28771c398bf", "sub_image": null, "external": false}}, "envoyinternalfront": {"name": "envoyinternalfront", "description": "A service that uses the base Envoy image and a custom EnvoyInternalFront config to route users to the Duo Network Gateway to access internal tools.", "repository": "git@github.com:lyft/envoyinternalfront.git", "restricted_ssh": true, "containers": [{"name": "server", "command": "/code/envoyinternalfront/entrypoint.sh", "mounts": ["/etc/envoy/envoy.cfg", "/var/log/envoy"], "network": "host", "start_phase": "sequential_init"}], "groups": [{"name": "dev", "members": ["dnsmasq.dev", "envoyinternalfront.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "envoyinternalfront.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#security-deploys", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "slack_deploy_notification_environments": ["canary", "production"], "team_email": "security-engineering@lyft.com", "pagerduty_escalation_policy": "Security", "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "languages": ["bash", "python"], "image_type": "service", "service_tier": 3, "envoy_config_service_name_override": "envoyinternalfront", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "version": "0cf915eba54c948ebf6c92428c148c97617485ea", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "envoymanager": {"name": "envoymanager", "description": "envoymanager", "repository": "git@github.com:lyft/envoymanager.git", "slack": "#networking", "notification_overrides": {"deploy": {"slack": "#networking-bots"}, "pr_merge": {"slack": "#networking-bots"}}, "team_email": "network-team@lyft.com", "pagerduty_escalation_policy": "Networking", "languages": ["go"], "image_type": "service", "service_tier": 1, "containers": [{"name": "server", "command": "/code/ops/base/entrypoint.sh", "mounts": ["/srv/envoystaticconfig", "/etc/envoy"], "start_phase": "sequential_envoy", "exports": [{"name": "health", "port": 8080}, {"name": "api", "port": 8081}, {"name": "admin", "port": 6070}]}, {"name": "service", "command": "dumb-init -- /go/src/github.com/lyft/envoymanager/envoymanager-start.sh", "workdir": "/code/envoymanager", "sub_image": "k8s", "limits": {"environment": {"staging": {"cpu": 2, "memory": "16Gi"}, "production": {"cpu": 4, "memory": "32Gi"}}}}], "groups": [{"name": "dev", "members": ["dnsmasq.server", "metadataproxy.server", "envoystaticconfig.dev", "control.publish", "envoymanager.server"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "tests": [{"name": "startup", "type": "startup", "group": "envoymanager.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "envoymanager.dev", "container": "envoymanager.server", "framework": "go"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "upstream_tests": {"on_commit": true, "test_set": {"pyexample2": ["integration"], "brandfe": ["e2e_homepage"]}}, "deploy": [{"name": "staging-envoyminimesh", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["envoyminimesh"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["envoyminimesh"]}}}, {"name": "staging-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "mode": "mixed"}}, {"name": "staging", "legacy": true, "orca": [], "bake_time_minutes": 12, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "mode": "mixed"}}, {"name": "canary", "legacy": true, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true, "mode": "mixed"}, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "mode": "mixed"}, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1b", "legacy": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "mode": "mixed"}, "availability_zone": "us-east-1b"}, {"name": "production-us-east-1d", "legacy": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "mode": "mixed"}, "availability_zone": "us-east-1d"}, {"name": "production-us-east-1f", "legacy": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "mode": "mixed"}, "availability_zone": "us-east-1f"}, {"name": "production-us-east-1e", "legacy": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "mode": "mixed"}, "availability_zone": "us-east-1e"}], {"name": "production", "legacy": true, "kubernetes": {"enabled": true, "mode": "mixed"}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "facets": [{"name": "main", "member": "envoymanager.service", "type": "service", "min_ready_seconds": 60, "sidecars": ["heka", "fluentbit", "statsd", "iamwait", "nsq", "runtimepull"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 4, "max_size": 15}}}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"]}, {"name": "canary", "canary": true, "member": "envoymanager.service", "min_ready_seconds": 60, "type": "service", "sidecars": ["heka", "fluentbit", "statsd", "iamwait", "nsq", "runtimepull"], "autoscaling": {"min_size": 1, "max_size": 1}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"]}], "logging": {"envoymanager": {"fields": {"service": "keyword", "isK8s": "boolean", "env": "keyword", "requesting clusters": "keyword", "error": "keyword", "cluster": "keyword", "server": "keyword", "k8s_action": "keyword", "resourceType": "keyword", "reqNodeId": "keyword", "reqNodeCluster": "keyword", "respVersion": "keyword", "reqVersion": "keyword", "repoName": "keyword", "servicesAffected": "keyword", "k8s action": "keyword", "node": "keyword", "key": "keyword", "typeUrl": "keyword", "resources": "keyword", "error_msg": "keyword", "status_code": "keyword", "timeout(ms)": "long"}}}, "version": "4c86a4e6ef9e836e147c023c3f97eb1d4c944d1f", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "envoysidecar": {"name": "envoysidecar", "description": "Sidecar container for Envoy on Kubernetes", "repository": "git@github.com:lyft/k8senvoy.git", "pagerduty_escalation_policy": "Envoy Deploy", "team_email": "service-mesh-deploys@lyft.com", "slack": "#networking-bots", "image_type": "service", "service_tier": 0, "deploy": [[{"name": "staging-sidecar-test1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sidecar-test1"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sidecar-test1"]}}}, {"name": "staging-envoyminimesh", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["envoyminimesh"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["envoyminimesh"]}}}], {"name": "staging-core-0", "legacy": false, "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": "core-staging-0"}}}, {"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1b", "legacy": false, "availability_zone": "us-east-1b", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1e", "legacy": false, "availability_zone": "us-east-1e", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1f", "legacy": false, "availability_zone": "us-east-1f", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], "languages": ["bash", "python"], "version": "1208bdaec6da7066b3e1fe5aecea71403f1350ca", "images": [{"parent": {"name": "bionicbase", "version": "1e528f4b38210368cdf8837ac5d8060c4a8fe90b", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "1e528f4b38210368cdf8837ac5d8060c4a8fe90b", "sub_image": null, "external": false}}, "envoystaticconfig": {"name": "envoystaticconfig", "description": "envoy static configuration", "repository": "git@github.com:lyft/envoy-static-config.git", "slack": "#networking-bots", "team_email": "network-team@lyft.com", "pagerduty_escalation_policy": "Networking", "image_type": "service", "service_tier": 1, "languages": ["bash", "go", "python"], "configsets": ["envoydata"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.configgen", "sub_image": "configgen"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:74b7e3d282a60107f04e9b38428ccbe27084f9b4", "sub_image": "precommit"}}]}}, "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "data", "sub_image": "configgen", "command": "/code/envoy-static-config/data-entrypoint.sh", "start_phase": "sequential_init", "once": true, "mounts": ["/srv/envoystaticconfig"], "limits": {"environment": {"development": {"memory": "4Gi", "cpu": 0.02}}}}], "groups": [{"name": "dev", "members": ["control.minimal", "envoystaticconfig.data", "envoystaticconfig.spin"]}], "tests": [{"name": "unit", "type": "execution", "group": "envoystaticconfig.dev", "container": "envoystaticconfig.spin", "command": "make test_unit"}, {"name": "router_check", "type": "execution", "group": "envoystaticconfig.dev", "container": "envoystaticconfig.spin", "command": "make test_route"}, {"name": "redundant_route_check", "type": "execution", "group": "envoystaticconfig.dev", "container": "envoystaticconfig.spin", "command": "make test_route_redundancy"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "upstream_tests": {"on_commit": true, "test_set": {"envoymanager": ["startup", "integration"]}}, "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "staging", "legacy": true, "orca": [{"orca_location": "ops", "region": "iad"}], "links": [{"text": "Deployment runbook - READ BEFORE PROCEEDING", "url": "https://docs.lyft.net/eng/networkingdocs/internal/deployment/envoy-static-config.html"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": true}, {"name": "production", "legacy": true}], "version": "07b80527a30315047f62bc7f27e5f5eb8c45fdad", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": "configgen"}, {"parent": {"name": "precommit", "version": "74b7e3d282a60107f04e9b38428ccbe27084f9b4", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "epflatk8s": {"name": "epflatk8s", "description": "Flink job to read flat JSON events and persist to S3 as part of Zippy.", "repository": "git@github.com:lyft/epflatk8s.git", "slack": "#streaming-pubsub", "team_email": "streaming-pubsub@lyft.com", "pagerduty_escalation_policy": "Zippy", "languages": ["java"], "image_type": "service", "service_tier": 2, "builder": {"name": "s2i", "params": {"builder": "lyft/s2istreamingplatformflink:sp20.a8c2ad0758c449ece535c0d1b54c111514a74f57"}}, "containers": [{"name": "service", "command": "/docker-entrypoint.sh local"}, {"name": "debug", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.dev", "epflatk8s.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "epflatk8s.dev"}, {"name": "unit", "type": "execution", "command": "mvn test --settings /settings.xml", "group": "epflatk8s.dev", "container": "epflatk8s.service", "autotrigger": false}, {"name": "integration", "type": "execution", "command": "mvn verify --settings /settings.xml -P '!disable-integration-tests'", "group": "epflatk8s.dev", "container": "epflatk8s.service"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}], "streamingplatform": {"kubernetes": true, "applications": ["epflatk8s"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "epflatk8s", "traffic_type": "egress_only"}], "common_settings": {"external_hosts": {"kinesis_iad": null}, "internal_hosts": {"analyticsingest": null, "streamcheck": null}}}}, "version": "0283bed91042b9ec1a3ebb40e27d01325f12563e", "images": [{"parent": {"name": "s2istreamingplatformflink", "version": "a8c2ad0758c449ece535c0d1b54c111514a74f57", "sub_image": "sp20", "external": false}, "sub_image": null}], "parent": {"name": "s2istreamingplatformflink", "version": "a8c2ad0758c449ece535c0d1b54c111514a74f57", "sub_image": "sp20", "external": false}}, "epflatsstream": {"name": "epflatsstream", "description": "Flink job which reads events and persists to s3", "repository": "git@github.com:lyft/epflatsstream.git", "pagerduty_escalation_policy": "Zippy", "slack": "#streaming-pubsubalert", "team_email": "streaming-pubsub@lyft.com", "image_type": "service", "service_tier": 2, "credentials": false, "languages": ["bash", "java"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "epflatsstream.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "epflatsstream.dev"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "streamingplatform": {"version": "1.4-SNAPSHOT", "flink_config_overrides": [{"key": "state.backend", "value": "filesystem"}, {"key": "akka.ask.timeout", "value": "120 s"}, {"key": "akka.tcp.timeout", "value": "120 s"}, {"key": "web.timeout", "value": 60000}, {"key": "env.java.opts.jobmanager", "value": "-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=39000 -XX:+UseG1GC -agentpath:/srv/flink/lib/libyjpagent-zippy.so=listen=all"}, {"key": "env.java.opts.taskmanager", "value": "-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=39001 -XX:+UseG1GC -agentpath:/srv/flink/lib/libyjpagent-zippy.so=listen=all"}, {"key": "taskmanager.heap.mb", "value": 18432}], "jobmanagers": [{"name": "epflatsstream", "development": {"num_taskmanagers": 1, "taskmanager": {"num_slots": 1}}, "staging": {"num_taskmanagers": 3, "taskmanager": {"num_slots": 6}}, "production": {"num_taskmanagers": 130, "taskmanager": {"num_slots": 6}}, "jobs": [{"name": "epflatsstream", "jar": "eventpersistflat-1.0.0-SNAPSHOT.jar", "class": "com.lyft.streaming.eventpersistflat.EventPersistFlatJobDriver", "description": "Flink job which reads events and persists to s3", "development": {"parallelism": 1}, "staging": {"parallelism": 16, "instance_type_override": "c5.4xlarge"}, "production": {"parallelism": 768, "instance_type_override": "c5.4xlarge"}}]}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "epflatsstream", "traffic_type": "egress_only"}, {"name": "epflatsstreamjobmanager", "traffic_type": "egress_only"}, {"name": "epflatsstreamtaskmanager", "traffic_type": "egress_only"}], "common_settings": {"external_hosts": {"kinesis_iad": null}, "internal_hosts": {"analyticsingest": null}}}}, "version": "041492253703012d5666390c3696d4ce0f7e0076", "images": [{"parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}}, "es2csv": {"name": "es2csv", "description": "es2csv", "repository": "git@github.com:lyft/es2csv.git", "team_email": "devnull@lyft.com", "slack": "#devx-bots", "credentials": true, "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:c225a3dfae6bb8486ed86ed115d3076fb4885946"}}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy"}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true}], "languages": ["python"], "image_type": "library", "version": "c1523d12b07a77d345cdd704db1b5596a431cc77", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "c225a3dfae6bb8486ed86ed115d3076fb4885946", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "c225a3dfae6bb8486ed86ed115d3076fb4885946", "sub_image": null, "external": false}}, "escrowdriverpay": {"name": "escrowdriverpay", "description": "Smooth driver pay while staying on a fixed budget. http://go.lyft.com/escrow-for-driver-pay", "repository": "git@github.com:lyft/escrowdriverpay.git", "image_type": "service", "service_tier": 3, "slack": "#escrow-for-driver-pay", "team_email": "mlabs@lyft.com", "pagerduty_escalation_policy": "escrowdriverpay_pagerduty_escalation_policy", "languages": ["python", "bash"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "pulldeploy_components": {"data": ["regioncfgdata", "marketplaceconfig"]}, "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "analyticsingest.dev", "dynamodb.server", "fanner.dev", "redis.server", "rides.dev", "routes.dev", "supply.dev", "locations.dev", "jobscheduler.dev", "escrowdriverpay.legacy"]}, {"name": "justlegacygroup", "members": ["control.dev", "dynamodb.server", "escrowdriverpay.legacy"]}, {"name": "integration", "members": ["lyfttestlib.dev", "escrowdriverpay.dev"]}], "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "startup", "type": "startup", "group": "escrowdriverpay.dev"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}, {"name": "pytests", "type": "sharded", "group": "escrowdriverpay.justlegacygroup", "container": "escrowdriverpay.legacy", "target": "tests/integration tests/unit", "virtualenv": "service_venv", "max_subset_retries": 0, "reports": {"junit": "build/integration.xml", "cobertura": "build/coverage.xml"}}], "test_logs": ["/var/log/lyft/escrowdriverpay-kcl-stderr.log"], "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}]}, [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}], [{"name": "canary", "legacy": true, "automatic": true}], [{"name": "production", "legacy": true, "orca": [{"region": "iad"}]}]], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:44a2769a8f67f5a52c200ae1bf3dccd552a2a8ce", "sub_image": "precommit"}}]}}, "python": {"mypy": {"python_versions": ["3.6"], "exclude": ["ops"]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "escrowdriverpay"}, {"name": "escrowdriverpaykcl"}], "common_settings": {"external_hosts": {"kinesis_iad": null, "dynamodb_iad": null, "firehose_iad": null}, "internal_hosts": {"locationsregionsearch": null, "rides": null, "routes": null, "supply": null, "jobschedulerbulkweb": null}, "redis": {"escrowdriverpayamultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}, "escrowdriverpaybmultiredis": {"port": 6381, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}, "escrowdriverpaycmultiredis": {"port": 6382, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}}}}, "version": "57e0b5cdff4d4ea74ccb17d4030f02cb6b375f39", "images": [{"parent": {"name": "opsbase", "version": "dbe0423a8b6a2e50819b9da1f10b628ac70bbc34", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "44a2769a8f67f5a52c200ae1bf3dccd552a2a8ce", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "dbe0423a8b6a2e50819b9da1f10b628ac70bbc34", "sub_image": null, "external": false}}, "escrowgo": {"name": "escrowgo", "description": "escrowgo", "repository": "git@github.com:lyft/escrowgo.git", "service_tier": 3, "slack": "#escrow-for-driver-pay", "team_email": "mlabs@lyft.com", "pagerduty_escalation_policy": "escrowdriverpay_pagerduty_escalation_policy", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "escrowgo.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "escrowgo.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "coverage_files", "type": "jailed", "run_in_pr": false, "command": "make coverage_files", "reports": {"cobertura": "build/coverage.xml"}}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "escrowgo"}], "common_settings": {"internal_hosts": {"escrowdriverpay": null}}}}, "version": "b35266b75c0d161f0fd723e2b6538a7e4f566107", "images": [{"parent": {"name": "opsbase", "version": "0df1afa8f77583dead83af470af5f3a03f3ebb10", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "0df1afa8f77583dead83af470af5f3a03f3ebb10", "sub_image": null, "external": false}}, "etablender": {"name": "etablender", "description": "Service used to execute python eta adjustment models for providing accurate etas", "repository": "git@github.com:lyft/etablender.git", "image_type": "service", "team_email": "eta-service-eng@lyft.com", "pagerduty_escalation_policy": "Routing", "languages": ["bash", "python"], "credentials": true, "credentials_legacy": true, "containers": [{"name": "legacy", "start_time": 1800, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}], "limits": {"environment": {"development": {"cpu": 0.2, "memory": "8Gi"}}}}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=18 -k=sync -c=/etc/gunicorn/gunicorn.conf --timeout=60 --max-requests=250000 --max-requests-jitter=5 --worker-connections 500", "workdir": "/code/etablender", "readiness_probe": {"initial_delay_seconds": 12, "period_seconds": 3, "exec_probe": {"command": ["gunicorn_healthcheck"]}}, "sub_image": "k8s", "limits": {"cpu": 18, "memory": "27Gi"}}], "facets": [{"name": "main", "member": "etablender.service", "type": "service", "envoy_service": "etablenderkube", "watch_remote_files": {"staging": [{"name": "revision", "s3_url": "s3://eta-models/etablendermodels/staging/revision"}], "production": [{"name": "revision", "s3_url": "s3://eta-models/etablendermodels/production/revision"}]}, "autoscaling": {"criteria": {"cpu_target": 35}, "environment": {"staging": {"min_size": 2, "max_size": 10}, "production": {"min_size": 15, "max_size": 1000}}}}, {"name": "canary", "member": "etablender.service", "type": "service", "canary": true, "envoy_service": "etablenderkube", "watch_remote_files": {"production": [{"name": "revision", "s3_url": "s3://eta-models/etablendermodels/production/revision"}]}, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "etablender.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "etablender.dev", "container": "etablender.legacy"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "etablender.dev", "container": "etablender.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#eta-service", "service_tier": 0, "upstream_tests": {"on_commit": true, "test_set": {"etaproxy": ["integration"]}}, "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, [{"name": "production-us-east-1b", "legacy": false, "availability_zone": "us-east-1b", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production-us-east-1e", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1e"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "redline": [{"service_name": "etablender", "schedule": {"minute": 0, "hour": 18, "day": "mon"}, "thresholds": {"completion_checks": {"min_requests_per_minute": 50000}, "health_checks": {"max_response_time_p95_ms": 130}}, "custom_completion_checks": [], "custom_health_checks": []}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "etablender"}, {"name": "etablenderkube"}], "common_settings": {"internal_hosts": {"etablender": null, "etablenderkube": null, "regions": null, "tcs": null}, "external_hosts": {"firehose_iad": null}, "local_service": {"circuit_breakers": {"default": {"max_connections": 200}}}, "authorization": {"permissions": {"config": {"paths": ["/v1/config*", "/v2/config*"], "methods": ["GET"]}, "blend": {"paths": ["/v2/blend", "/v2/blendstoptime"], "methods": ["POST"]}}, "bindings": {"etaproxy": ["config", "blend"], "etawatch": ["config"], "etablender": ["blend"], "etablenderkube": ["blend"], "test": ["*"]}}}, "override_settings": [{"settings": {}, "services": [{"name": "etablender", "traffic_mirror": [{"match": {"prefix": "/"}, "route": "etablenderkube", "runtime_key_prefix": "internal_routing.etablender.mirror.etablenderkube"}]}]}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}, {"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "version": "40dee13c39efbccb27cfd9684ce385dcb9ac6fde", "images": [{"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "etablendermodels": {"name": "etablendermodels", "description": "Encapsulates all etablendermodels logic", "repository": "git@github.com:lyft/etablendermodels.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:66d815e6ba03c9515c0c2273ecca13036015715d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/lyftlearnnotebook:6b4131f2f7f34811cc43ce20763e6ab897800a4b", "sub_image": "lyftlearn"}}]}}, "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "lyftlearn", "command": "sleep infinity", "sub_image": "lyftlearn", "mounts": ["/var/run/docker_sockets", "/srv/control"]}], "groups": [{"name": "dev", "members": ["control.dev", "etablendermodels.spin"]}, {"name": "dev_lite", "members": ["dnsmasq.server", "metadataproxy.server", "etablendermodels.spin"]}, {"name": "lyftlearn_group", "members": ["dnsmasq.server", "metadataproxy.server", "etablendermodels.lyftlearn"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "test", "type": "execution", "group": "etablendermodels.dev", "container": "etablendermodels.spin", "command": "make test"}, {"name": "register-lyftlearn", "type": "execution", "container": "etablendermodels.lyftlearn", "group": "etablendermodels.lyftlearn_group", "command": "lyft_etablendermodels/scripts/register_lyftlearn.sh"}, {"name": "test-lyftlearn", "type": "execution", "container": "etablendermodels.lyftlearn", "group": "etablendermodels.lyftlearn_group", "command": "make test-ll"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "languages": ["python"], "image_type": "library", "slack": "#eta-service", "team_email": "eta-team@lyft.com", "lyftlearn": {}, "version": "f0dce95e33da036dfe500d3c163baea3b90e653a", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "lyftlearnnotebook", "version": "6b4131f2f7f34811cc43ce20763e6ab897800a4b", "sub_image": null, "external": false}, "sub_image": "lyftlearn"}], "parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "etafeatureutils": {"parent": {"version": "fd03a394897fe765bfd4a917192c500515922581", "name": "pythonlibrary", "buildargs": [], "external": false}, "tests": [{"type": "jailed", "command": "python -3 -m pytest tests", "name": "python2"}, {"type": "jailed", "command": "flake8", "name": "lint"}], "report_ci": true, "name": "etafeatureutils", "repository": "git@github.com:lyft/etafeatureutils.git", "deploy": [{"legacy": true, "automatic": true, "name": "development"}, {"role": "lyftpypi-staging-iad-deploy", "legacy": true, "automatic": true, "name": "staging", "orca": [{"region": "iad", "orca_location": "ops"}]}, {"role": "lyftpypi-production-iad-deploy", "legacy": true, "automatic": true, "name": "production", "orca": [{"region": "iad", "orca_location": "ops"}]}], "image_type": "library", "languages": ["python"], "version": "e22254114bf86d7a7f53a092ca2bf498a68744e4", "credentials": true, "description": "Library with common utils for interfacing with ETA model feature data"}, "etageohash": {"name": "etageohash", "description": "etageohash", "repository": "git@github.com:lyft/etageohash.git", "image_type": "service", "service_tier": 1, "languages": ["go", "python"], "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "etageohash.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "etageohash.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "coverage", "type": "jailed", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}], "slack": "#eta-service", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "eta@lyft.com", "pagerduty_escalation_policy": "Routing", "deploy": [{"name": "staging", "legacy": true, "automatic": true}, {"name": "canary", "legacy": true}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "etageohash"}]}}, "version": "690c0e9eed104c9977c18b7074d1f9c711fad951", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "etaingress": {"name": "etaingress", "description": "Streaming service for ingressing traffic data from third-party sources to traffic pipeline", "repository": "git@github.com:lyft/etaingress.git", "report_ci": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "etaingress.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "etaingress.dev"}, {"name": "integration", "type": "execution", "group": "etaingress.dev", "container": "etaingress.legacy", "command": "mvn verify -P '!disable-integration-tests'"}], "slack": "#eta-routenetworkgen", "team_email": "eta-service-eng@lyft.com", "pagerduty_escalation_policy": "Routing", "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": false}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "languages": ["java", "bash"], "image_type": "service", "service_tier": 3, "streamingplatform": {"version": "1.2-SNAPSHOT", "jobmanagers": [{"name": "etaingress", "development": {"num_taskmanagers": 3, "taskmanager": {"num_slots": 6}}, "staging": {"num_taskmanagers": 4, "taskmanager": {"num_slots": 16}}, "production": {"num_taskmanagers": 6, "taskmanager": {"num_slots": 16}}, "jobs": [{"name": "etaingress", "jar": "etaingress-1.0.0-SNAPSHOT.jar", "class": "com.lyft.app.job.WSDOTDataIngressJobDriver", "description": null, "development": {"parallelism": 1}, "staging": {"parallelism": 1}, "production": {"parallelism": 1}}]}]}, "version": "9059d308bf3214b48ebd4719dd87a2d0e7f48d7b", "images": [{"parent": {"name": "opsbase", "version": "33c0aab1d8fd8b5b67507b5d7ba3d8e7ed786b5b", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "33c0aab1d8fd8b5b67507b5d7ba3d8e7ed786b5b", "sub_image": null, "external": false}}, "etamodels": {"name": "etamodels", "description": "Eta models for use with Eta service", "repository": "git@github.com:lyft/etamodels.git", "image_type": "flyteworkflow", "service_tier": 2, "languages": ["python"], "credentials": true, "containers": [{"name": "legacy", "command": "sleep infinity", "provision": "echo \"Merry Christmas\""}, {"name": "venv", "command": "service_venv bash"}, {"name": "jupyter", "command": "service_venv jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password='' --ip 0.0.0.0 --port 8888 --no-browser --notebook-dir=/code/etamodels/notebooks", "exports": [{"name": "jupyter", "port": 8888}]}], "groups": [{"name": "dev", "members": ["control.dev", "etamodels.legacy"]}, {"name": "notebook", "members": ["control.dev", "etamodels.jupyter"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "spark_integration", "type": "jailed", "command": "make test_spark_integration", "reports": {"junit": "build/spark_int.xml"}}, {"name": "validate", "type": "jailed", "command": "service_venv mbadmin workflow validate"}, {"name": "workflow_registration", "type": "execution", "group": "etamodels.dev", "container": "etamodels.legacy", "command": "make release_development"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "workflow_integration", "type": "execution", "group": "etamodels.dev", "container": "etamodels.legacy", "command": "make test_workflows_integration"}], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "bake_time_minutes": 0, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "slack": "#eta-model-infra-bots", "pagerduty_escalation_policy": "Routing", "team_email": "eta-team@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "docker_build", "params": {"dockerfile": "DockerfileLyftLearn", "sub_image": "spark3"}}]}}, "lyftlearn": {"notebook_templates": [{"template_name": "ETA Team Image", "long_description": "Most recent deploy of image from etamodels repository", "short_description": "An environment based on the etamodels repository", "rank": 100, "owner": "chopkins"}, {"template_name": "ETA LL Spark Team Image", "display_name": "ETA Spark Image", "short_description": "An spark environment based on the etamodels repository", "long_description": "Most recent deploy of image from etamodels repository", "owner": "rcruz", "sub_image": "spark3", "network": {"notebook": {"port": 8888, "public": true}, "sparkui": {"port": 4040, "public": true}}, "service": {"sparkdrv": {"port": 29413, "target_port": 29413, "headless": true}}, "rank": 10001}]}, "version": "b0f9f9b0905a9abad94309b36e8bdd4b9fe8dbce", "images": [{"parent": {"name": "flytesparkbase", "version": "ea8b691fef3dc56fef3b71d3c6c54a28116b1635", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "lyftlearnspark", "version": "31c43cdcd20b13ca8a4732a2e7042be6e3e388e9", "sub_image": null, "external": false}, "sub_image": "spark3"}], "parent": {"name": "flytesparkbase", "version": "ea8b691fef3dc56fef3b71d3c6c54a28116b1635", "sub_image": null, "external": false}}, "etaproxy": {"name": "etaproxy", "description": "etaproxy", "repository": "git@github.com:lyft/etaproxy.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 300, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "etablender.dev", "etaproxy.legacy", "places.legacy", "lyftidl.server", "regions.dev", "routingengine.dev"]}, {"name": "dev_nooverlay", "members": ["control.dev", "redis.dev", "etablender.dev", "etaproxy.legacy", "places.legacy", "lyftidl.server", "regions.dev", "routingengine.dev_nooverlay"]}], "tests": [{"name": "startup", "type": "startup", "group": "etaproxy.dev"}, {"name": "unit", "type": "execution", "group": "etaproxy.dev", "container": "etaproxy.legacy", "command": "make tests"}, {"name": "integration", "type": "execution", "group": "etaproxy.dev_nooverlay", "container": "etaproxy.legacy", "command": "make integration"}, {"name": "sanity", "type": "execution", "group": "etaproxy.dev", "container": "etaproxy.legacy", "command": "./script/curl-eta"}, {"name": "coverage", "type": "execution", "group": "etaproxy.dev", "container": "etaproxy.legacy", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#eta-service", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "eta@lyft.com", "upstream_tests": {"on_commit": true, "test_set": {"pricing": ["integration"], "matching": ["integration"]}}, "pagerduty_escalation_policy": "Routing", "service_tier": 0, "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}], "links": [{"text": "ETA Proxy Canary", "url": "https://grafana.lyft.net/dashboard/db/etaproxy-canary?orgId=1"}, {"text": "ETA Canary", "url": "https://grafana.lyft.net/dashboard/db/eta-canary?orgId=1"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true, "links": [{"text": "ETA Production", "url": "https://grafana.lyft.net/dashboard/db/eta?orgId=1"}, {"text": "ETA Watch", "url": "https://grafana.lyft.net/dashboard/db/etawatch?orgId=1"}]}], "languages": ["go"], "image_type": "service", "envoy": {"profile": "go", "settings": {"services": [{"name": "etaproxy"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 10000}}}, "internal_hosts": {"etablender": null, "etablenderkube": null, "etageohash": null, "etaproxy": null, "places": null, "ratelimit": null, "regions": null, "routingengine": null, "routingenginena20190710": null, "routingenginenooverlay": null, "routingenginena20200222": null, "routingenginena20200222no": null, "tcs": null}, "external_hosts": {"google_maps_https": null, "kinesis_iad": null, "firehose_iad": null, "mapbox": null}, "redis_clusters": {"etaproxy": {"aws_random_identifier": "vngjnv", "port": 6380}}, "authorization": {"permissions": {"grpcV1_getTraffic": {"paths": ["/pb.lyft.eta.Eta/GetTraffic"]}, "grpcV3": {"paths": ["/pb.lyft.eta.v3.EtaV3/*"]}, "grpcV3_get": {"paths": ["/pb.lyft.eta.v3.EtaV3/Get"]}}, "bindings": {"autonomous": ["grpcV3_get"], "courier": ["grpcV3_get"], "courieroraclesolver": ["grpcV3_get"], "directions": ["grpcV3_get"], "dispatch": ["grpcV3_get"], "dispatchdropoffsworkers": ["grpcV3_get"], "dispatchavailability": ["grpcV3_get"], "dispatchgeofenceworkers": ["grpcV3_get"], "driverheatmaps": ["grpcV3_get"], "drivermode": ["grpcV3_get"], "emergencyassist": ["grpcV3_get"], "envoy": ["grpcV3_get"], "etawatch": ["grpcV3"], "fannersql": ["grpcV3_get"], "fare": ["grpcV3_get"], "ghostmatching": ["grpcV3_get"], "ghostmatchingwatcher": ["grpcV3_get"], "graphql": ["grpcV3_get"], "karma": ["grpcV3_get"], "lastmile": ["grpcV3_get"], "locations": ["grpcV3_get"], "matching": ["grpcV3_get"], "matchingexecution": ["grpcV3_get"], "matchingplayback": ["grpcV3_get"], "matchingsimulated": ["grpcV3_get"], "matchingsmall": ["grpcV3_get"], "multimodalrouting": ["grpcV3_get"], "passengerqueues": ["grpcV3_get"], "pickupoptimizer": ["grpcV3_get"], "pickupoptimizer2019data": ["grpcV3_get"], "predispatchjobs": ["grpcV3_get"], "pricingoffline": ["grpcV3_get"], "ridemonitor": ["grpcV3_get"], "ridemonitorkcl": ["grpcV3_get"], "ridemonitorworkers": ["grpcV3_get"], "ridesapi": ["grpcV3_get", "grpcV1_getTraffic"], "ridetimeestimator": ["grpcV3_get"], "routeplanner": ["grpcV3_get"], "routesapi": ["grpcV3_get"], "tom": ["grpcV3_get"], "transitdatadecorator": ["grpcV3_get"]}}}}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "configsets": ["atlantisdata"], "logging": {"etaproxy": {"fields": {"attempt_num": "long", "failed_record_count": "long", "failed_record": "keyword", "traceback": "keyword", "exception": "keyword"}}}, "version": "32dc68f41c93de496603e34e70d24d287af975e1", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "etawatch": {"name": "etawatch", "description": "Service to determine eta error on key ride segments.", "repository": "git@github.com:lyft/etawatch.git", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": true, "slack": "#eta-watch", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "eta@lyft.com", "pagerduty_escalation_policy": "Routing", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "etawatch.legacy", "usergroups.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "etawatch.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true}, {"name": "canary", "legacy": true}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "etawatch"}], "common_settings": {"internal_hosts": {"etaproxy": null, "etawatch": null, "locations": null, "rides": null, "routes": null, "routingengine": null, "routingengineexperimental": null, "routingengineintegration": null, "routingenginena20180101": null, "usergroups": null, "etablender": null, "etablenderkube": null}, "external_hosts": {"kinesis_iad": null, "dynamodb_iad": null, "firehose_iad": null, "mapbox": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "logging": {"etawatch": {"fields": {"method": "keyword", "attempt_num": "long", "failed_record_count": "long"}}}, "version": "5e88df0b9ea6a4157dfcc8e51d2c293c0a76172b", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "etcdoperator": {"name": "etcdoperator", "description": "Etcd operator used for managing etcd clusters running in k8s", "repository": "git@github.com:lyft/etcd-operator-private.git", "image_type": "service", "team_email": "compute-team@lyft.com", "slack": "#compute-bots", "pagerduty_escalation_policy": "Provisioning", "service_tier": 3, "deploy": [{"name": "staging", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}, "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}}}, {"name": "production", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}, "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}}}], "version": "92d566698e6947162fb4d530d57a28cb4aa28811", "images": [{"parent": {"name": "scratch", "version": "", "sub_image": null, "external": true}, "sub_image": null}], "parent": {"name": "scratch", "version": "", "sub_image": null, "external": true}}, "etl": {"name": "etl", "description": "etl", "repository": "git@github.com:lyft/etl.git", "slack": "#data-platform", "team_email": "data-platform@lyft.com", "pagerduty_escalation_policy": "Data Platform Tools", "image_type": "service", "service_tier": 2, "languages": ["bash", "java", "javascript", "python"], "pulldeploy_components": {"data": ["regioncfgdata"]}, "configsets": ["audiencedata", "zippyconfigdata"], "legacy_access": {"sudo_groups": ["etl_sudoers"]}, "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "web", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.dev", "mozartgateway.dev", "redis.dev", "hivemetastore.dev", "etl.legacy"]}, {"name": "dev_lite", "members": ["control.dev", "postgresql.dev", "hivemetastore.dev", "etl.legacy"]}], "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "piptools-check", "type": "tool", "tool": "piptools.check"}, {"name": "startup", "type": "startup", "group": "etl.dev"}, {"name": "unit", "type": "execution", "group": "etl.dev", "container": "etl.legacy", "command": "make -j2 test_unit", "reports": {"junit": "build/nosetests.xml", "cobertura": "build/coverage.xml"}}, {"name": "unit_py3", "type": "execution", "group": "etl.dev", "container": "etl.legacy", "command": "make -j2 test_unit_py3", "reports": {"junit": "build/nosetests-py3.xml"}}, {"name": "integration", "type": "execution", "group": "etl.dev", "container": "etl.legacy", "command": "make -j2 test_integration", "reports": {"junit": "build/nosetests.xml"}}, {"name": "e2e", "type": "execution", "group": "etl.dev", "container": "etl.legacy", "command": "make test_e2e"}, {"name": "dag_bag", "type": "execution", "group": "etl.dev_lite", "container": "etl.legacy", "command": "make test_dag_bag"}, {"name": "dag_bag_py3", "type": "execution", "group": "etl.dev_lite", "container": "etl.legacy", "command": "make test_dag_bag_py3", "autotrigger": false}, {"name": "hive_delete", "type": "execution", "group": "etl.dev_lite", "container": "etl.legacy", "command": "make test_hive_delete", "autotrigger": false}], "deploy": [{"name": "staging", "legacy": true, "bake_time_minutes": 5, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "etlairflowworker"}, {"name": "etlairflowwebserver"}, {"name": "etlincentivesworker"}, {"name": "zippyairflowworker"}, {"name": "sharedairflowworker"}, {"name": "etl"}, {"name": "etltars"}, {"name": "etlbatch"}], "common_settings": {"internal_hosts": {"acceptancerate": null, "adtech": null, "analyticsupr": null, "compilerworks": null, "drivermonitor": null, "amp": null, "dsfeatures": null, "incentiveconfig": null, "detargetingapi": null, "jobschedulerbulkweb": null, "jobschedulermigrationweb": null, "martechscoring": null, "mozartgateway": null, "places": null, "team": null, "tcseditor": null, "servicecatalog": null, "superset": null, "usergroups": null, "etlexpiration": null}, "external_hosts": {"firehose_iad": null, "tableauapi_internal": null, "s3_iad": null}, "local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211]}, "mongos": {"rides": {"production": {"ratelimit": true, "clusters": [{"port": 27020, "hosts": ["r027189-90.mlab.com:27817"]}]}, "staging": {"ratelimit": true, "clusters": [{"port": 27020, "hosts": ["r055605-a0.mlab.com:27817"]}]}}}}, "override_settings": [{"services": [{"name": "etlairflowwebserver"}], "settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "health_check_endpoint": "/health"}}]}}, "version": "88e9c46eb262c9ccd008b4fc5bb23b7e29aba5ae", "images": [{"parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}}, "etlexpiration": {"name": "etlexpiration", "repository": "git@github.com:lyft/etlexpiration.git", "description": "A web service that expires ETLs", "service_tier": 2, "team_email": "dp-exp@lyft.com", "pagerduty_escalation_policy": "Data Platform Tools", "slack": "#data-platform-dev", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- etlexpiration", "limits": {"cpu": 4, "memory": "512Mi"}, "sub_image": "k8s", "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "etlexpiration.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "etlexpiration.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "etlexpiration.dev", "container": "etlexpiration.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "etlexpiration.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "etlexpiration.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {"external_hosts": {"dynamodb_iad": null}}, "services": [{"name": "etlexpiration"}]}}, "logging": {"etlexpiration": {"fields": {"query_group_id": "keyword", "expiration_type": "keyword", "expiration_status": "keyword", "error": "keyword", "last_warned_timestamp_ms_max": "keyword", "created_timestamp_ms_before": "keyword"}}}, "version": "83e59e578fd9ed96bbf516cfe8dcad51d7a447bc", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "etlwithflyte": {"name": "etlwithflyte", "description": "ETL jobs on Flyte 2.0", "repository": "git@github.com:lyft/etlwithflyte.git", "slack": "#etl-with-flyte", "team_email": "akoh@lyft.com", "pagerduty_escalation_policy": "ETL with Flyte", "image_type": "service", "service_tier": 3, "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "etlwithflyte.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "etlwithflyte.dev", "container": "etlwithflyte.spin", "command": "make register_for_pr"}], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "credentials": true, "version": "97643835dd0a0bb143c01a2e912a568668a6a35f", "images": [{"parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}}, "eventenricher": {"name": "eventenricher", "description": "Event enricher", "repository": "git@github.com:lyft/eventenricher.git", "service_tier": 1, "slack": "#event-enricher", "pagerduty_escalation_policy": "Event Enricher", "team_email": "av-infra-eu@lyft.com", "languages": ["go"], "image_type": "service", "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:c17c530bb56bd092a79f652fedb68d1209d98d2c"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2igo:fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": "k8s", "buildargs": ["GOLANGCI_LINT_VERSION=1.16.0"]}}]}}, "containers": [{"name": "kcl", "command": "dumb-init -- eventenricher", "sub_image": "k8s", "workdir": "/code/eventenricher", "limits": {"cpu": 1, "memory": "256Mi"}}], "groups": [{"name": "dev", "members": ["control.dev", "eventenricher.kcl"]}], "tests": [{"name": "startup", "type": "startup", "group": "eventenricher.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "eventenricher", "member": "eventenricher.kcl", "type": "worker", "envoy_service": "eventenricher", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-eventenricher-env.sls"]}, {"name": "canary", "member": "eventenricher.kcl", "type": "worker", "canary": true, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-eventenricher-env.sls"]}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "eventenricher"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "targets": [{"facet": "eventenricher"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "targets": [{"facet": "eventenricher"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "targets": [{"facet": "eventenricher"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}], "envoy": {"profile": "go", "settings": {"services": [{"name": "eventenricher"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}}}}, "version": "528f9b91b3ab36da9429d1db9139a1a420a65e52", "images": [{"parent": {"name": "opsbase", "version": "c17c530bb56bd092a79f652fedb68d1209d98d2c", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "go", "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "c17c530bb56bd092a79f652fedb68d1209d98d2c", "sub_image": null, "external": false}}, "eventingest": {"name": "eventingest", "description": "eventingest", "repository": "git@github.com:lyft/eventingest.git", "image_type": "service", "languages": ["go"], "credentials": true, "credentials_legacy": true, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh"}, {"name": "k8sservice", "command": "dumb-init -- eventingest", "workdir": "/code/eventingest", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "32Gi"}}], "facets": [{"name": "main", "member": "eventingest.k8sservice", "type": "service", "autoscaling": {"criteria": {"cpu_target": 20}, "environment": {"staging": {"min_size": 2, "max_size": 10}, "production": {"min_size": 200, "max_size": 480}}}}, {"name": "canary", "member": "eventingest.k8sservice", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "lyftidl.server", "kinesis.server", "eventingest.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "eventingest.dev"}, {"name": "unit", "type": "jailed", "command": "make tests"}, {"name": "integration", "type": "execution", "container": "eventingest.service", "command": "make integration", "group": "eventingest.dev"}, {"name": "coverage", "type": "jailed", "command": "make coverage", "autotrigger": false}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#eventingest-idl", "slack_deploy_notification_environments": ["canary", "production"], "pagerduty_escalation_policy": "Streaming-PubSub", "team_email": "dataingest@lyft.com", "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "legacy": false, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1b", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "legacy": false, "availability_zone": "us-east-1b"}, {"name": "production-us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "legacy": false, "availability_zone": "us-east-1d"}, {"name": "production-us-east-1f", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "legacy": false, "availability_zone": "us-east-1f"}, {"name": "production-us-east-1e", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "legacy": false, "availability_zone": "us-east-1e"}], {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}], "service_tier": 1, "envoy": {"profile": "go", "settings": {"services": [{"name": "eventingest"}], "common_settings": {"internal_hosts": {}, "external_hosts": {"kinesis_iad": null, "firehose_iad": null}, "local_service": {"grpc_streaming": true}}}}, "logging": {"eventingest": {"fields": {"path": "keyword", "method": "keyword", "service": "keyword", "host": "keyword", "signal": "keyword"}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:c1e2d5c25643b7ca394caded92a0d09d2896b2fc", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "version": "1081bc525b82da467db35bac83671e7b1651783d", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "c1e2d5c25643b7ca394caded92a0d09d2896b2fc", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "eventpersister": {"name": "eventpersister", "description": "streaming job which reads events and writes to s3", "repository": "git@github.com:lyft/eventpersister.git", "pagerduty_escalation_policy": "Zippy", "slack": "#streaming-pubsubalert", "team_email": "streaming-pubsub@lyft.com", "image_type": "service", "service_tier": 2, "credentials": false, "languages": ["bash", "java"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "eventpersister.legacy"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "startup", "type": "startup", "group": "eventpersister.dev"}, {"name": "integration", "type": "execution", "group": "eventpersister.dev", "container": "eventpersister.legacy", "command": "mvn verify -P '!disable-integration-tests' -Dcheckstyle.skip=true"}, {"name": "unittest", "type": "execution", "group": "eventpersister.dev", "container": "eventpersister.legacy", "command": "mvn test surefire-report:report -Dcheckstyle.skip=true"}, {"name": "checkstyle", "type": "execution", "group": "eventpersister.dev", "container": "eventpersister.legacy", "command": "mvn checkstyle:check"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "streamingplatform": {"version": "1.4-SNAPSHOT", "flink_config_overrides": [{"key": "state.backend", "value": "filesystem"}, {"key": "akka.ask.timeout", "value": "120 s"}, {"key": "akka.tcp.timeout", "value": "120 s"}, {"key": "web.timeout", "value": 60000}, {"key": "web.checkpoints.history", "value": 100}, {"key": "env.java.opts.jobmanager", "value": "-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=39000 -XX:+UseG1GC -agentpath:/srv/flink/lib/libyjpagent-zippy.so=listen=all"}, {"key": "env.java.opts.taskmanager", "value": "-Dcom.amazonaws.sdk.s3.defaultStreamBufferSize=1048577 -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=39001 -XX:+UseG1GC -agentpath:/srv/flink/lib/libyjpagent-zippy.so=listen=all"}, {"key": "taskmanager.heap.mb", "value": 18432}, {"key": "cluster.registration.error-delay", "value": 1000}, {"key": "s3.upload.min.part.size", "value": 134217728}, {"key": "s3.impl", "value": "com.lyft.streamingplatform.filesystem.LyftS3AFileSystem"}, {"key": "s3a.connection.maximum", "value": 60}, {"key": "s3a.bucket.lyft-rawevents-staging.connection.maximum", "value": 180}, {"key": "s3a.bucket.lyft-rawevents-production.connection.maximum", "value": 180}, {"key": "s3a.retry.throttle.interval", "value": "100ms"}, {"key": "s3a.connection.timeout", "value": 120000}, {"key": "s3a.threads.max", "value": 40}, {"key": "s3a.lyft-rawevents-staging.threads.max", "value": 120}, {"key": "s3a.lyft-rawevents-production.threads.max", "value": 120}, {"key": "s3a.threads.keepalivetime", "value": 200}, {"key": "s3a.max.total.tasks", "value": 40}, {"key": "s3a.lyft-rawevents-staging.max.total.tasks", "value": 120}, {"key": "s3a.lyft-rawevents-production.max.total.tasks", "value": 120}, {"key": "s3a.multipart.size", "value": "128M"}, {"key": "s3a.acl.default", "value": "BucketOwnerFullControl"}, {"key": "s3a.block.size", "value": "128M"}, {"key": "s3a.buffer.dir", "value": "/tmp/s3-fast-upload"}, {"key": "s3a.fast.upload", "value": true}, {"key": "s3a.fast.upload.buffer", "value": "disk"}, {"key": "s3a.fast.upload.active.blocks", "value": 10}], "jobmanagers": [{"name": "eventpersister", "development": {"num_taskmanagers": 1, "taskmanager": {"num_slots": 1}}, "staging": {"num_taskmanagers": 4, "taskmanager": {"num_slots": 8}}, "production": {"num_taskmanagers": 66, "taskmanager": {"num_slots": 8}}, "jobs": [{"name": "eventpersister", "jar": "eventpersister-1.0.0-SNAPSHOT.jar", "class": "com.lyft.streaming.eventpersister.EventPersisterJobDriver", "description": "streaming job which reads events and writes to s3", "development": {"parallelism": 1}, "staging": {"parallelism": 16, "instance_type_override": "c5.4xlarge"}, "production": {"parallelism": 512, "instance_type_override": "c5.4xlarge"}}]}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "eventpersister", "traffic_type": "egress_only"}, {"name": "eventpersisterjobmanager", "traffic_type": "egress_only"}, {"name": "eventpersistertaskmanager", "traffic_type": "egress_only"}], "common_settings": {"external_hosts": {"kinesis_iad": null}, "internal_hosts": {"analyticsingest": null, "streamcheck": null}}}}, "logging": {"eventpersistertaskmanager": {"fields": {"thread": "keyword"}}, "eventpersisterjobmanager": {"fields": {"thread": "keyword"}}}, "version": "d2d8a5acef39ac2c8cdffdd8de716799ef81f26c", "images": [{"parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}}, "eventpersistflat": {"name": "eventpersistflat", "description": "Streaming job which reads events and writes to s3", "repository": "git@github.com:lyft/eventpersistflat.git", "pagerduty_escalation_policy": "Zippy", "slack": "#streaming-pubsub", "team_email": "streaming-pubsub@lyft.com", "image_type": "service", "service_tier": 2, "credentials": false, "languages": ["bash", "java"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "eventpersistflat.legacy"]}], "configsets": ["zippyconfigdata"], "tests": [{"name": "startup", "type": "startup", "group": "eventpersistflat.dev"}, {"name": "integration", "type": "execution", "group": "eventpersistflat.dev", "container": "eventpersistflat.legacy", "command": "mvn verify -P '!disable-integration-tests' -Dcheckstyle.skip=true"}, {"name": "unittest", "type": "execution", "group": "eventpersistflat.dev", "container": "eventpersistflat.legacy", "command": "mvn test surefire-report:report -Dcheckstyle.skip=true"}, {"name": "checkstyle", "type": "execution", "group": "eventpersistflat.dev", "container": "eventpersistflat.legacy", "command": "mvn checkstyle:check"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "streamingplatform": {"version": "1.4-SNAPSHOT", "flink_config_overrides": [{"key": "state.backend", "value": "filesystem"}, {"key": "akka.ask.timeout", "value": "120 s"}, {"key": "akka.tcp.timeout", "value": "120 s"}, {"key": "web.timeout", "value": 60000}, {"key": "web.checkpoints.history", "value": 100}, {"key": "env.java.opts.jobmanager", "value": "-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=39000 -XX:+UseG1GC -agentpath:/srv/flink/lib/libyjpagent-zippy.so=listen=all,disable_async_sampling"}, {"key": "env.java.opts.taskmanager", "value": "-Dcom.amazonaws.sdk.s3.defaultStreamBufferSize=1048577 -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=39001 -XX:+UseG1GC -agentpath:/srv/flink/lib/libyjpagent-zippy.so=listen=all,disable_async_sampling"}, {"key": "taskmanager.heap.mb", "value": 18432}, {"key": "cluster.registration.error-delay", "value": 1000}, {"key": "s3.upload.min.part.size", "value": 134217728}, {"key": "s3.impl", "value": "com.lyft.streamingplatform.filesystem.LyftS3AFileSystem"}, {"key": "s3a.connection.maximum", "value": 60}, {"key": "s3a.bucket.lyft-rawevents-staging.connection.maximum", "value": 180}, {"key": "s3a.bucket.lyft-rawevents-production.connection.maximum", "value": 180}, {"key": "s3a.retry.throttle.interval", "value": "100ms"}, {"key": "s3a.connection.timeout", "value": 120000}, {"key": "s3a.threads.max", "value": 40}, {"key": "s3a.lyft-rawevents-staging.threads.max", "value": 120}, {"key": "s3a.lyft-rawevents-production.threads.max", "value": 120}, {"key": "s3a.threads.keepalivetime", "value": 200}, {"key": "s3a.max.total.tasks", "value": 40}, {"key": "s3a.lyft-rawevents-staging.max.total.tasks", "value": 120}, {"key": "s3a.lyft-rawevents-production.max.total.tasks", "value": 120}, {"key": "s3a.multipart.size", "value": "128M"}, {"key": "s3a.acl.default", "value": "BucketOwnerFullControl"}, {"key": "s3a.block.size", "value": "128M"}, {"key": "s3a.buffer.dir", "value": "/tmp/s3-fast-upload"}, {"key": "s3a.fast.upload", "value": true}, {"key": "s3a.fast.upload.buffer", "value": "disk"}, {"key": "s3a.fast.upload.active.blocks", "value": 10}], "jobmanagers": [{"name": "eventpersistflat", "development": {"num_taskmanagers": 1, "taskmanager": {"num_slots": 1}}, "staging": {"num_taskmanagers": 4, "taskmanager": {"num_slots": 8}}, "production": {"num_taskmanagers": 130, "taskmanager": {"num_slots": 8}}, "jobs": [{"name": "eventpersistflat", "jar": "eventpersistflat-1.0.0-SNAPSHOT.jar", "class": "com.lyft.streaming.eventpersistflat.EventPersistFlatJobDriver", "description": "streaming job which reads events and writes to s3", "development": {"parallelism": 1}, "staging": {"parallelism": 32, "instance_type_override": "c5.4xlarge"}, "production": {"parallelism": 1024, "instance_type_override": "c5.4xlarge"}}]}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "eventpersistflat", "traffic_type": "egress_only"}, {"name": "eventpersistflatjobmanager", "traffic_type": "egress_only"}, {"name": "eventpersistflattaskmanager", "traffic_type": "egress_only"}], "common_settings": {"external_hosts": {"kinesis_iad": null}, "internal_hosts": {"analyticsingest": null, "streamcheck": null}}}}, "version": "4cea2af363fb674ad26c6c8251be1b5305804f86", "images": [{"parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}}, "eventprbfill": {"name": "eventprbfill", "description": "backfill job which reads events and writes to s3", "repository": "git@github.com:lyft/eventprbfill.git", "pagerduty_escalation_policy": "Streaming-PubSub", "slack": "#streaming-pubsubalert", "team_email": "streaming-pubsub@lyft.com", "image_type": "service", "service_tier": 3, "credentials": false, "languages": ["bash", "java"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "eventprbfill.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "eventprbfill.dev"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "streamingplatform": {"version": "1.4-SNAPSHOT", "flink_config_overrides": [{"key": "state.backend", "value": "filesystem"}, {"key": "akka.ask.timeout", "value": "120 s"}, {"key": "akka.tcp.timeout", "value": "120 s"}, {"key": "web.timeout", "value": 60000}, {"key": "env.java.opts.jobmanager", "value": "-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=39000 -XX:+UseG1GC -agentpath:/srv/flink/lib/libyjpagent-zippy.so=listen=all"}, {"key": "env.java.opts.taskmanager", "value": "-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=39001 -XX:+UseG1GC -agentpath:/srv/flink/lib/libyjpagent-zippy.so=listen=all"}, {"key": "taskmanager.heap.mb", "value": 18432}], "jobmanagers": [{"name": "eventprbfill", "development": {"num_taskmanagers": 1, "taskmanager": {"num_slots": 1}}, "staging": {"num_taskmanagers": 0, "taskmanager": {"num_slots": 8}}, "production": {"num_taskmanagers": 0, "taskmanager": {"num_slots": 8}}, "jobs": [{"name": "eventprbfill", "jar": "eventpersister-1.0.0-SNAPSHOT.jar", "class": "com.lyft.streaming.eventpersister.EventPersisterJobDriver", "description": "backfill job which reads events and writes to s3", "development": {"parallelism": 1}, "staging": {"parallelism": 16, "instance_type_override": "c5.4xlarge"}, "production": {"parallelism": 96, "instance_type_override": "c5.4xlarge"}}]}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "eventprbfill", "traffic_type": "egress_only"}, {"name": "eventprbfilljobmanager", "traffic_type": "egress_only"}, {"name": "eventprbfilltaskmanager", "traffic_type": "egress_only"}], "common_settings": {"external_hosts": {"kinesis_iad": null}, "internal_hosts": {"analyticsingest": null}}}}, "version": "4cbbbb5036755067d964b3948ad5c95f5efd3a67", "images": [{"parent": {"name": "java8", "version": "38357e66f665ddb48815a6a2f6d9745504ecd7e4", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "38357e66f665ddb48815a6a2f6d9745504ecd7e4", "sub_image": null, "external": false}}, "eventprflatbfill": {"name": "eventprflatbfill", "description": "Backfill job which reads events and writes to s3", "repository": "git@github.com:lyft/eventprflatbfill.git", "pagerduty_escalation_policy": "Zippy", "slack": "#streaming-pubsub", "team_email": "streaming-pubsub@lyft.com", "image_type": "service", "service_tier": 3, "credentials": false, "languages": ["bash", "java"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "eventprflatbfill.legacy"]}], "configsets": ["zippyconfigdata"], "tests": [{"name": "startup", "type": "startup", "group": "eventprflatbfill.dev"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "streamingplatform": {"version": "1.4-SNAPSHOT", "flink_config_overrides": [{"key": "state.backend", "value": "filesystem"}, {"key": "akka.ask.timeout", "value": "120 s"}, {"key": "akka.tcp.timeout", "value": "120 s"}, {"key": "web.timeout", "value": 60000}, {"key": "web.checkpoints.history", "value": 100}, {"key": "env.java.opts.jobmanager", "value": "-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=39000 -XX:+UseG1GC -agentpath:/srv/flink/lib/libyjpagent-zippy.so=listen=all"}, {"key": "env.java.opts.taskmanager", "value": "-Dcom.amazonaws.sdk.s3.defaultStreamBufferSize=1048577 -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=39001 -XX:+UseG1GC -agentpath:/srv/flink/lib/libyjpagent-zippy.so=listen=all"}, {"key": "taskmanager.heap.mb", "value": 18432}, {"key": "cluster.registration.error-delay", "value": 1000}, {"key": "s3.upload.min.part.size", "value": 134217728}, {"key": "s3.impl", "value": "com.lyft.streamingplatform.filesystem.LyftS3AFileSystem"}, {"key": "s3a.connection.maximum", "value": 60}, {"key": "s3a.bucket.lyft-rawevents-staging.connection.maximum", "value": 180}, {"key": "s3a.bucket.lyft-rawevents-production.connection.maximum", "value": 180}, {"key": "s3a.retry.throttle.interval", "value": "100ms"}, {"key": "s3a.connection.timeout", "value": 120000}, {"key": "s3a.threads.max", "value": 40}, {"key": "s3a.lyft-rawevents-staging.threads.max", "value": 120}, {"key": "s3a.lyft-rawevents-production.threads.max", "value": 120}, {"key": "s3a.threads.keepalivetime", "value": 200}, {"key": "s3a.max.total.tasks", "value": 40}, {"key": "s3a.lyft-rawevents-staging.max.total.tasks", "value": 120}, {"key": "s3a.lyft-rawevents-production.max.total.tasks", "value": 120}, {"key": "s3a.multipart.size", "value": "128M"}, {"key": "s3a.acl.default", "value": "BucketOwnerFullControl"}, {"key": "s3a.block.size", "value": "128M"}, {"key": "s3a.buffer.dir", "value": "/tmp/s3-fast-upload"}, {"key": "s3a.fast.upload", "value": true}, {"key": "s3a.fast.upload.buffer", "value": "disk"}, {"key": "s3a.fast.upload.active.blocks", "value": 10}], "jobmanagers": [{"name": "eventprflatbfill", "development": {"num_taskmanagers": 1, "taskmanager": {"num_slots": 1}}, "staging": {"num_taskmanagers": 0, "taskmanager": {"num_slots": 12}}, "production": {"num_taskmanagers": 0, "taskmanager": {"num_slots": 8}}, "jobs": [{"name": "eventprflatbfill", "jar": "eventpersistflat-1.0.0-SNAPSHOT.jar", "class": "com.lyft.streaming.eventpersistflat.EventPersistFlatJobDriver", "description": "backfill job which reads events and writes to s3", "development": {"parallelism": 1}, "staging": {"parallelism": 24, "instance_type_override": "c5.4xlarge"}, "production": {"parallelism": 512, "instance_type_override": "c5.4xlarge"}}]}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "eventprflatbfill", "traffic_type": "egress_only"}, {"name": "eventprflatbfilljobmanager", "traffic_type": "egress_only"}, {"name": "eventprflatbfilltaskmanager", "traffic_type": "egress_only"}], "common_settings": {"external_hosts": {"kinesis_iad": null}, "internal_hosts": {"analyticsingest": null}}}}, "version": "1e6a57189f22e3f6da14fb598ab8b97d31c01d05", "images": [{"parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}}, "eventrouter": {"name": "eventrouter", "description": "Routes analytic events to Kafka topics for consumption.", "repository": "git@github.com:lyft/eventrouter.git", "pagerduty_escalation_policy": "Streaming-PubSub", "slack": "#streaming-pubsub", "team_email": "streaming-pubsub@lyft.com", "service_tier": 3, "image_type": "service", "credentials": true, "languages": ["bash", "java"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "eventrouter.legacy", "georegions.dev", "kafka.server", "kinesis.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "eventrouter.dev"}, {"name": "integration", "type": "execution", "group": "eventrouter.dev", "container": "eventrouter.legacy", "command": "mvn verify -P '!disable-integration-tests'"}], "configsets": ["eventrouterdata"], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "eventrouter"}, {"name": "eventrouterjobmanager"}, {"name": "eventroutertaskmanager"}], "common_settings": {"external_hosts": {"kinesis_iad": null}, "internal_hosts": {"georegions": null}}}}, "streamingplatform": {"version": "1.3-SNAPSHOT", "jobmanagers": [{"name": "eventrouter", "jobs": [{"name": "eventrouter", "jar": "eventrouter-1.0.0-SNAPSHOT.jar", "class": "com.lyft.streaming.eventrouter.EventRouterJobDriver", "description": null, "development": {"parallelism": 1}, "staging": {"parallelism": 1}, "production": {"parallelism": 1}}]}]}, "version": "e608c4aedc5d70dd4f15e42864cab3936b5cf526", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "eventrouterdata": {"name": "eventrouterdata", "description": "Runtime Routing rules for EventHub", "repository": "git@github.com:lyft/eventrouterdata.git", "image_type": "data", "service_tier": 2, "slack": "#streaming-pubsub", "team_email": "streaming-pubsub@lyft.com", "pagerduty_escalation_policy": "Streaming-PubSub", "languages": ["bash", "python"], "builder": {"name": "s2i", "params": {"builder": "lyft/configsetbase:02f90807161dc5599dfa34f56fafcf5adfc7ac7a"}}, "credentials": false, "docs": {"disable": true}, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/eventrouterdata"]}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "orca": []}], "version": "0231797a362c122fb5d59e84e00a8072d93daff8", "images": [{"parent": {"name": "configsetbase", "version": "02f90807161dc5599dfa34f56fafcf5adfc7ac7a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "configsetbase", "version": "02f90807161dc5599dfa34f56fafcf5adfc7ac7a", "sub_image": null, "external": false}}, "experimentationadhoc": {"name": "experimentationadhoc", "description": "TODO short description of the service", "repository": "git@github.com:lyft/experimentationadhoc.git", "slack": "#experimentation", "team_email": "experimentation@lyft.com", "pagerduty_escalation_policy": "Experimentation", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:1a814f8e5a589baad8b69a9f6489ac85969aff98", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "experimentationadhoc.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "experimentationadhoc.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true}, {"name": "canary", "legacy": true}, {"name": "production", "legacy": true}], "image_type": "service", "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "experimentationadhoc"}], "common_settings": {"internal_hosts": {"tcs": null, "tcseditor": null, "usergroups": null, "users": null}}}}, "languages": ["python"], "version": "559e5f25381a541a7acba8a53b490765172a05bc", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "1a814f8e5a589baad8b69a9f6489ac85969aff98", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "expressdrivefe": {"name": "expressdrivefe", "description": "TODO short description of the service", "repository": "git@github.com:lyft/expressdrivefe.git", "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}], "frontend": {"node_version": "10.14.1-1nodesource1"}, "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "slack": "#xd-hub", "team_email": "xd-eng@lyft.com", "pagerduty_escalation_policy": "XD Frontend", "groups": [{"name": "dev", "members": ["control.dev", "expressdrivefe.legacy", "rentals.dev", "accountfrontend.dev", "www2.dev", "tcs.legacy", "wwwidentityfe.dev"]}, {"name": "only", "members": ["control.dev", "expressdrivefe.legacy"]}, {"name": "integration", "members": ["accidentrisk.legacy", "accountfrontend.dev", "brochure.legacy", "driverfrontend.legacy", "expressdrivefe.dev", "expressdrivefeapi.dev", "fleetlocations.dev", "fleetmanagement.dev", "green.dev", "karma.dev", "ledger.dev", "locations.dev", "regions.dev", "rentals.integration", "sqs.server", "supply.dev", "users.dev", "wallet.dev", "wwwdriveronboardingfe.dev", "wwwpayxpfe.dev", "wwwbrochurefe.dev"]}, {"name": "qa", "members": ["accountfrontend.dev", "karma.dev", "sqs.server", "ats.qa_approve", "green.dev", "ledger.dev", "locations.dev", "rides.dev", "regions.dev", "users.dev", "ratings.dev", "switchboard.dev", "rentals.dev", "expressdrivefe.dev", "expressdriveint.dev", "fleetlocations.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "expressdrivefe.only"}, {"name": "tsc", "type": "execution", "container": "expressdrivefe.legacy", "group": "expressdrivefe.only", "command": "make test_tsc"}, {"name": "lint", "type": "execution", "container": "expressdrivefe.legacy", "group": "expressdrivefe.only", "command": "make test_lint"}, {"name": "unit", "type": "execution", "container": "expressdrivefe.legacy", "group": "expressdrivefe.only", "command": "make test_coverage", "reports": {"cobertura": ".coverage/cobertura-coverage.xml"}}, {"name": "e2e", "type": "execution", "group": "expressdrivefe.integration", "container": "expressdrivefe.legacy", "command": "make test_cypress", "run_in_pr": false, "schedule": "0 */3 * * *", "reports": {"junit": "build"}}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, [{"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "image_type": "service", "service_tier": 1, "pulldeploy_components": {"data": ["translationdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "expressdrivefe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"ats": null, "expressdrivefeapi": null, "rentals": null, "tcs": null, "users": null, "www2": null, "wwwbrochurefe": null, "wwwdriveronboardingfe": null}}}}, "languages": ["javascript"], "version": "8b61931c3caa68e6be3d549e6c199f7a8cdc139a", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "expressdrivefeapi": {"name": "expressdrivefeapi", "description": "ExpressDrive Frontend Backend API Proxy", "repository": "git@github.com:lyft/expressdrivefeapi.git", "image_type": "service", "service_tier": 1, "slack": "#xd-hub", "team_email": "xd-eng@lyft.com", "pagerduty_escalation_policy": "XD Core Backend", "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:c17c530bb56bd092a79f652fedb68d1209d98d2c", "packages": ["libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit", "packages": ["libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s", "packages": ["libspatialindex-dev"]}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/expressdrivefeapi", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "facets": [{"name": "main", "member": "expressdrivefeapi.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-expressdrivefeapi-env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 10}}}}, {"name": "canary", "member": "expressdrivefeapi.service", "type": "service", "canary": true, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-expressdrivefeapi-env.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "expressdrivefeapi.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "expressdrivefeapi.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "expressdrivefeapi"}], "common_settings": {}, "override_settings": [{"services": [{"name": "expressdrivefeapi"}], "settings": {"internal_hosts": {"ats": null, "enterprise": null, "expressdrivefeapi": null, "fleetlocations": null, "fleetmanagement": null, "grow": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "offlinemileagetracker": null, "payapi": null, "rentals": null, "robocop": null, "supply": null, "users": null, "usergroups": null, "vehicleservicecenters": null, "www2": null}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}}}]}}, "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "logging": {"expressdrivefeapi": {"fields": {"user_id": "keyword"}}}, "version": "d50cfe1b6d3ba2522d34562bba16f4329cf83b7d", "images": [{"parent": {"name": "opsbase", "version": "c17c530bb56bd092a79f652fedb68d1209d98d2c", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "c17c530bb56bd092a79f652fedb68d1209d98d2c", "sub_image": null, "external": false}}, "expressdriveint": {"name": "expressdriveint", "description": "Express Drive rental reservation platform. Used by Community Associates (CA) and Customer Experience & Trust (CET) to manage rental reservations.", "repository": "git@github.com:lyft/expressdriveint.git", "image_type": "service", "service_tier": 1, "slack": "#xd-hub", "team_email": "xd-hub@lyft.com", "pagerduty_escalation_policy": "XD Frontend", "frontend": {"node_version": "10.14.1-1nodesource1"}, "languages": ["javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "workdir": "/code/expressdriveint", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "cdnupload", "command": "/code/expressdriveint/cdn-upload", "workdir": "/code/expressdriveint", "sub_image": "k8s"}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "groups": [{"name": "dev", "members": ["amp.dev", "control.dev", "expressdriveint.legacy", "tom.legacy"]}, {"name": "integration", "members": ["account.dev", "accountfrontend.dev", "amp.dev", "ats.qa_approve", "backgroundcheck.dev", "expressdriveint.dev", "fleetlocations.dev", "fleetmanagement.dev", "green.dev", "karma.dev", "ledger.dev", "locations.dev", "payapi.dev", "ratings.dev", "regions.dev", "rentals.dev", "rides.dev", "switchboard.dev", "tom.dev", "users.dev", "www2.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "expressdriveint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_coverage"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}, {"name": "tsc", "type": "execution", "group": "expressdriveint.dev", "container": "expressdriveint.legacy", "command": "make test_tsc"}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "expressdriveint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"tom": null, "acl": null, "ats": null, "backgroundcheck": null, "expressdrivefeapi": null, "fleetmanagement": null, "payapi": null, "privacyaudit": null, "rentals": null, "switchboard": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2inode:service.f633733a7fe0e80669ecd9bb6ee09b12d06a9666", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}]}}, "facets": [{"name": "main", "member": "expressdriveint.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 4}}}}, {"name": "canary", "member": "expressdriveint.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "assets", "member": "expressdriveint.cdnupload", "type": "job"}], "version": "7607c175798a2177b15910806ec253e001f9a63d", "images": [{"parent": {"name": "s2inode", "version": "f633733a7fe0e80669ecd9bb6ee09b12d06a9666", "sub_image": "service", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "exptrt": {"name": "exptrt", "description": "Experimentation realtime streaming", "repository": "git@github.com:lyft/exptrt.git", "slack": "#expt-rt", "team_email": "experimentation@lyft.com", "pagerduty_escalation_policy": "Experimentation", "service_tier": 2, "credentials": true, "languages": ["bash", "java"], "image_type": "service", "containers": [{"name": "server", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kafka.server", "exptrt.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "exptrt.dev"}, {"name": "test", "type": "execution", "group": "exptrt.dev", "container": "exptrt.server", "command": "mvn test surefire-report:report -Dcheckstyle.skip=true", "reports": {"surefire": "target/site/surefire-report.html"}}, {"name": "integration", "type": "execution", "group": "exptrt.dev", "container": "exptrt.server", "command": "mvn test-compile failsafe:integration-test failsafe:verify -Dcheckstyle.skip=true", "reports": {"failsafe": "target/failsafe-reports/failsafe-summary.xml"}}, {"name": "checkstyle", "type": "execution", "group": "exptrt.dev", "container": "exptrt.server", "command": "mvn checkstyle:check", "reports": {"checkstyle": "target/checkstyle-report.txt"}}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "streamingplatform": {"version": "1.3-SNAPSHOT", "flink_config_overrides": [{"key": "taskmanager.heap.mb", "value": 32768}], "jobmanagers": [{"name": "exptrt", "development": {"num_taskmanagers": 2, "taskmanager": {"num_slots": 2}}, "staging": {"num_taskmanagers": 1, "taskmanager": {"num_slots": 8, "instance_type_override": "r5.2xlarge", "ebsvolume": {"mnt_name": "sdb", "size_gb": 100, "volume_type": "gp2"}}}, "production": {"num_taskmanagers": 10, "taskmanager": {"num_slots": 24, "instance_type_override": "c5n.9xlarge", "ebsvolume": {"mnt_name": "sdb", "size_gb": 500, "volume_type": "gp2"}}}, "jobs": [{"name": "exptrt", "jar": "exptrt-1.0.0-SNAPSHOT-fat.jar", "class": "com.lyft.exptrt.Main", "development": {"parallelism": 1}, "staging": {"parallelism": 8}, "production": {"parallelism": 192}}]}]}, "version": "f72c42850062b2436469d6a4b054da22dbcacfde", "images": [{"parent": {"name": "java8", "version": "33a5153e2b09889dd51ab5c26063ed75ede8a4e5", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "33a5153e2b09889dd51ab5c26063ed75ede8a4e5", "sub_image": null, "external": false}}, "family": {"name": "family", "description": "internal family website for lyft", "repository": "git@github.com:lyft/family.git", "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "frontend", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn family.wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/family", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "3.5Gi"}}, {"name": "ballbot", "command": "dumb-init -- service_venv python slackbot.py --bot ball", "workdir": "/code/family", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "3.5Gi"}}, {"name": "githubaward", "command": "dumb-init -- service_venv python manage.py github-award", "workdir": "/code/family", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "100Mi"}}, {"name": "synctechstarters", "command": "dumb-init -- service_venv python manage.py sync-tech-starters", "workdir": "/code/family", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "100Mi"}}, {"name": "exporttos3", "command": "dumb-init -- service_venv python manage.py export-to-s3", "workdir": "/code/family", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "100Mi"}}, {"name": "syncomnibot", "command": "dumb-init -- service_venv python manage.py sync-omnibot", "workdir": "/code/family", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "100Mi"}}, {"name": "syncballs", "command": "dumb-init -- service_venv python manage.py sync-balls --apply", "workdir": "/code/family", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "100Mi"}}, {"name": "sendpartybotreminders", "command": "dumb-init -- service_venv python manage.py send-partybot-reminders", "workdir": "/code/family", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "100Mi"}}, {"name": "syncteamv2", "command": "dumb-init -- service_venv python manage.py sync-team-v2", "workdir": "/code/family", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "100Mi"}}, {"name": "syncmanagerreminders", "command": "dumb-init -- service_venv python manage.py send-manager-reminders", "workdir": "/code/family", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "100Mi"}}, {"name": "cdnupload", "command": "dumb-init -- /bin/sh -c \"DIST_PATH_OVERRIDE=/code/family/static/dist /code/family/cdn-upload\"", "sub_image": "k8s"}], "custom": {"frontend_service": true, "internal_service": true}, "frontend": {"node_version": "8.12.0-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "images.dev", "team.dev", "acl.dev", "places.dev", "omnibot.dev", "mongodb.server", "family.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "family.dev"}, {"name": "unit", "type": "execution", "group": "family.dev", "container": "family.legacy", "command": "make test_unit", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml", "pylint": "build/flake8.xml"}}, {"name": "integration", "type": "execution", "group": "family.dev", "container": "family.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "lint", "type": "execution", "group": "family.dev", "container": "family.legacy", "command": "make test_lint"}, {"name": "build_dist", "type": "execution", "group": "family.dev", "container": "family.legacy", "command": "make build_dist"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#internal-productivity", "team_email": "internal-productivity@lyft.com", "pagerduty_escalation_policy": "Internal Productivity", "facets": [{"name": "main", "member": "family.service", "type": "service", "requirements": {"mongo": true}, "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "ballbot", "member": "family.ballbot", "type": "worker", "requirements": {"mongo": true}, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "canary", "member": "family.service", "type": "service", "requirements": {"mongo": true}, "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "canaryballbot", "member": "family.ballbot", "type": "worker", "requirements": {"mongo": true}, "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "githubaward", "member": "family.githubaward", "type": "cron", "schedule": "0 0 * * *"}, {"name": "synctechstarters", "member": "family.synctechstarters", "type": "cron", "schedule": "0 8 * * *"}, {"name": "exporttos3", "member": "family.exporttos3", "type": "cron", "schedule": "0 3 * * *"}, {"name": "syncomnibot", "member": "family.syncomnibot", "type": "cron", "schedule": "0 4 * * *"}, {"name": "syncballs", "member": "family.syncballs", "type": "cron", "schedule": "0,30 * * * *"}, {"name": "sendpartybotreminders", "member": "family.sendpartybotreminders", "type": "cron", "schedule": "0 14 * * *"}, {"name": "syncteamv2", "member": "family.syncteamv2", "type": "cron", "schedule": "0 4,10,16,22 * * *"}, {"name": "syncmanagerreminders", "member": "family.syncmanagerreminders", "type": "cron", "schedule": "0 15 * * *"}, {"name": "assets", "member": "family.cdnupload", "type": "job"}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production", "legacy": true}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}]], "languages": ["python"], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "family"}, {"name": "familybatch"}], "common_settings": {"external_hosts": {"kinesis_iad": null}, "internal_hosts": {"favoriteemoji": null, "omnibot": null, "places": null, "deployapi": null, "supply": null, "team": null, "usergroups": null, "users": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:frontend.39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "logging": {"familybatch": {"fields": {"key": "keyword", "error": "keyword", "filter": "keyword", "event_user": "keyword", "event_channel": "keyword", "event_text": "keyword"}}, "family": {"fields": {"email": "keyword", "message": "keyword", "status_code": "long", "filter": "keyword", "error": "keyword", "current_time": "keyword", "expires_at": "keyword", "ipa": "keyword", "office": "keyword", "key": "keyword"}}}, "version": "829a9e7bde6a8c172e7e7cf77f000038a9cefb5b", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "frontend", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "fanner": {"name": "fanner", "description": "fanner", "repository": "git@github.com:lyft/fanner.git", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "kcl", "command": "dumb-init -- /code/kcl/kcl_daemon.sh", "sub_image": "k8s", "limits": {"cpu": 8, "memory": "16Gi"}}, {"name": "fanner2js", "command": "dumb-init -- python /code/fanner/fanner2jobscheduler.py", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "256Mi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "kinesis.server", "sqs.server", "fanner.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "fanner.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "framework": "pytest", "coverage": false, "markers": "unit_legacy", "container": "fanner.legacy", "group": "fanner.dev", "targets": ["tests/unit"]}], "slack": "#streaming-pubsub", "notification_overrides": {"deploy": {"slack": "#streaming-pubsubalert"}, "deploy_failure": {"slack": "#streaming-pubsubalert"}, "test_failure": {"slack": "#streaming-pubsubalert"}, "master_failure": {"slack": "#streaming-pubsubalert"}, "pr_merge": {"slack": "#streaming-pubsubalert"}}, "team_email": "streaming-pubsub@lyft.com", "pagerduty_escalation_policy": "Streaming-PubSub", "audit_blacklist": ["envoyAudit"], "facets": [{"name": "fanner", "member": "fanner.kcl", "type": "worker", "envoy_service": "fannerkcl", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 14, "max_size": 76}}}}, {"name": "fannercanary", "member": "fanner.kcl", "type": "worker", "envoy_service": "fannerkcl", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "fanner2js", "member": "fanner.fanner2js", "type": "worker", "envoy_service": "fanner2js", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 80}}}}, {"name": "fanner2jscanary", "member": "fanner.fanner2js", "type": "worker", "envoy_service": "fanner2js", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "fanner"}, {"facet": "fanner2js"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "targets": [{"facet": "fannercanary"}, {"facet": "fanner2jscanary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "targets": [{"facet": "fanner"}, {"facet": "fanner2js"}], "kubernetes": {"enabled": true}}, [{"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "targets": [{"facet": "fanner"}, {"facet": "fanner2js"}], "kubernetes": {"enabled": true}}, {"legacy": false, "name": "production", "targets": [{"facet": "fanner"}, {"facet": "fannercanary"}, {"facet": "fanner2js"}, {"facet": "fanner2jscanary"}], "kubernetes": {"enabled": true}}]], "languages": ["python"], "image_type": "service", "service_tier": 1, "envoy": {"profile": "python", "settings": {"services": [{"name": "fanner"}, {"name": "fanner2jobscheduler"}, {"name": "fannerkcl"}, {"name": "fanner2js"}], "common_settings": {"internal_hosts": {"jobschedulerbulkweb": null, "jobschedulernormalweb": null, "jobschedulerurgentweb": null, "jobschedulermigrationweb": null}, "external_hosts": {"kinesis_iad": null, "firehose_iad": null, "sqs_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/opsbase:bd8615cdc0a53fe60b894b4b0cc3447deeb0e366", "packages": ["default-jre-headless", "liblog4j1.2-java"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": "k8s", "packages": ["default-jre-headless", "liblog4j1.2-java"]}}]}}, "logging": {"fanner": {"fields": {"shard_info": "keyword", "reason": "keyword", "data": "keyword", "event": "keyword", "attempt_num": "long", "failed_record_count": "long"}}, "fanner2jobscheduler": {"fields": {"event": "keyword", "message": "keyword", "error": "keyword", "failed_record_count": "long", "attempt_num": "long"}}}, "version": "de7d9a6ccceb3170318c25e695e38f1b3e2d0ec8", "images": [{"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "opsbase", "version": "bd8615cdc0a53fe60b894b4b0cc3447deeb0e366", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "bd8615cdc0a53fe60b894b4b0cc3447deeb0e366", "sub_image": null, "external": false}}, "fannersql": {"name": "fannersql", "description": "Generate SQL fact tables from incoming events and core service lookups", "repository": "git@github.com:lyft/fannersql.git", "image_type": "service", "service_tier": 2, "pagerduty_escalation_policy": "FannerSQL Dev Team", "slack": "#data-platform", "team_email": "fannersql-dev@lyft.com", "languages": ["python", "bash"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "fannersql.legacy"]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "tests": [{"name": "startup", "type": "startup", "group": "fannersql.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test"}, {"name": "terraform-checkformat", "type": "tool", "tool": "terraform.checkformat"}, {"name": "terraform-validate", "type": "tool", "tool": "terraform.validate"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "orchestrate": {"types": [{"name": "terraform"}], "steps": [{"name": "staging"}, {"name": "production"}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "fannersql"}, {"name": "fannersqlworker"}], "common_settings": {"internal_hosts": {"coupons": null, "etaproxy": null, "fare": null, "ledger": null, "locations": null, "ridetimeestimator": null, "regions": null, "rides": null, "routes": null, "switchboard": null, "users": null, "venues": null}, "external_hosts": {"dynamodb_iad": null, "sqs_iad": null, "kinesis_iad": null, "interconnectpoc": null, "firehose_iad": null}}}}, "logging": {"fannersql": {"fields": {"table": "keyword", "error": "keyword", "table_name": "keyword", "attempt_num": "long", "failed_record_count": "long"}}}, "version": "6d66a3b0e2280a4a9efc75885486c4a40f7e9c41", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "fare": {"name": "fare", "description": "fare", "repository": "git@github.com:lyft/fare.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libspatialindex-dev", "libgeos-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s", "packages": ["awscli"]}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 180, "exports": [{"name": "api", "port": 8080}], "limits": {"environment": {"development": {"memory": "4Gi", "cpu": 1.2}}}}, {"name": "service", "workdir": "/code/fare", "command": "dumb-init -- bash -c \"./download-gbr-file-dependencies && exec service_venv gunicorn app_wsgi:application --reuse-port --workers=12 --forwarded-allow-ips='*' -k gevent --worker-connections=1 -c /etc/gunicorn/gunicorn.conf --max-requests=1000001\"", "sub_image": "k8s", "limits": {"cpu": 8, "memory": "15Gi"}}], "facets": [{"name": "main", "member": "fare.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 5}, "production": {"min_size": 10, "max_size": 132, "criteria": {"cpu_target": 25}}}}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-fare-env.sls"]}, {"name": "canary", "member": "fare.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-fare-env.sls"]}], "groups": [{"name": "dev", "members": ["control.dev", "dbproxyfare.dev", "fare.legacy", "lyftidl.server", "redis.dev"]}, {"name": "integration", "members": ["abacus.dev", "coupons.dev", "dbproxyfare.dev", "dbproxytrips.legacy", "dsfeatures.dev", "etaproxy.dev", "fare.dev", "fareerrorcontroller.dev", "green.dev", "ledger.dev", "legacyridetypes.dev", "locations.dev", "modelexec.dev", "modes.dev", "priceoptimizer.dev", "pricing.dev", "ratelimit.dev", "regions.dev", "ridesapi.dev", "ridexppredictor.dev", "tcs.dev", "tolls.dev", "tripsapi.dev", "trips.dev", "users.dev", "usergroups.dev", "venues.dev", "viewport.dev", "wallet.dev", "walletapi.dev"]}], "tests": [{"name": "start", "type": "startup", "group": "fare.dev"}, {"name": "unit", "type": "jailed", "command": "env TEST_TAGS=\"not unit_legacy\" make test_unit", "reports": {"junit": "build/nosetests.xml", "cobertura": "build/coverage.xml", "pylint": "build/flake8.txt"}}, {"name": "integration", "type": "execution", "group": "fare.integration", "container": "fare.legacy", "target": "tests/integration", "command": "make test_int", "reports": {"junit": "build/int.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "command": "env make test_unit", "container": "fare.legacy", "group": "fare.dev", "reports": {"junit": "build/nosetests.xml", "cobertura": "build/coverage.xml", "pylint": "build/flake8.txt"}}], "upstream_tests": {"on_commit": false, "test_set": {"courier": ["integration"]}}, "slack": "#pricing-xp-public", "notification_overrides": {"deploy": {"slack": "#pricing-xp-bots"}, "deploy_failure": {"slack": "#pricing-xp-bots"}, "test_failure": {"slack": "#pricing-xp-bots"}, "master_failure": {"slack": "#pricing-xp-bots"}, "pr_merge": {"slack": "#pricing-xp-bots"}, "behind_notifications": {"slack": "#pricing-xp-bots"}}, "team_email": "pricing-xp@lyft.com", "pagerduty_escalation_policy": "Pricing Experience", "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "service_tier": 0, "languages": ["python"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "discountoptimizationworker"}, {"name": "fare"}], "override_settings": [{"services": [{"name": "discountoptimizationworker"}], "settings": {"internal_hosts": {"abacus": null, "ledger": null, "regions": null}, "external_hosts": {"firehose_iad": null}, "local_service": {"circuit_breakers": {"default": {"max_connections": 75}}}}}, {"services": [{"name": "fare"}], "settings": {"internal_hosts": {"abacus": null, "coupons": null, "courier": null, "dbproxyfare": null, "dsfeatures": null, "etaproxy": null, "fare": null, "fareerrorcontroller": null, "jobschedulernormalweb": null, "ledger": null, "legacyridetypes": null, "locations": null, "locationsmapmatch": null, "marketweather": null, "messaging": null, "modelexecpricing": null, "modelexecpricingxp": null, "modes": null, "places": null, "priceoptimizer": null, "pricing": null, "publicapi": null, "push": null, "ratelimit": null, "regions": null, "rides": null, "ridesapi": null, "ridexppredictor": null, "ridelocations": null, "routes": null, "tcs": null, "tolls": null, "users": null, "usergroups": null, "venues": null, "viewport": null}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}, "redis": {"faremultiredis": {"port": 6380, "op_timeout_ms": 100}}}}]}}, "logging": {"fare": {"fields": {"currency": "long", "ride_id": "keyword", "ride_type": "keyword", "region_code": "keyword", "error": {"message": {"error": "keyword", "error_description": "keyword", "error_detail": "keyword"}, "client_type": "keyword", "major_app_version": "keyword", "os": "keyword", "is_internal": "boolean", "endpoint": "keyword", "error_code": "long", "error_class": "keyword", "client_id": "keyword", "user_id": "keyword"}, "user_id": "keyword", "cost_result": "keyword", "price_group_id": "keyword", "value": "keyword", "type": "keyword", "headers": {"X-Envoy-Downstream-Service-Node": "keyword", "X-Forwarded-Proto": "keyword", "X-Envoy-Downstream-Service-Cluster": "keyword", "X-Ot-Span-Context": "keyword", "X-Forwarded-For": "keyword", "X-Request-Id": "keyword", "Content-Length": "keyword", "Host": "keyword", "User-Agent": "keyword", "Accept-Encoding": "keyword", "X-Lyft-Scopes": "keyword", "X-Lyft-Client-Id": "keyword", "Accept-Language": "keyword", "X-Lyft-User-Id": "keyword", "X-Locale-Language": "keyword", "X-Design-Id": "keyword", "X-Locale-Region": "keyword", "X-Device-Density": "keyword", "X-Envoy-Internal": "keyword", "X-Envoy-Expected-Rq-Timeout-Ms": "keyword", "Accept": "keyword", "X-Envoy-External-Address": "keyword", "X-Envoy-Original-Path": "keyword", "X-Lyft-Session-Id": "keyword", "X-Lyft-Refresh-Token-Hash": "keyword", "X-Location": "keyword", "Lyft-Version": "keyword", "User-Device": "keyword", "X-Session": "keyword", "X-Carrier": "keyword", "X-Request-Attempt": "keyword", "X-Client-Session-Id": "keyword", "X-Client-Trace-Id": "keyword", "Content-Language": "keyword", "If-Modified-Since": "keyword", "Ot-Tracer-Spanid": "keyword", "Ot-Tracer-Sampled": "keyword", "Ot-Tracer-Traceid": "keyword", "X-Timestamp-Ms": "keyword", "X-Analytics-Dev": "keyword", "Cookie": "keyword", "X-Datadog-Sampling-Priority": "keyword", "X-Datadog-Parent-Id": "keyword", "X-Datadog-Trace-Id": "keyword", "X-Newrelic-Transaction": "keyword", "X-Newrelic-Id": "keyword", "X-Cbt": "keyword", "X-Lyft-Shadow": "keyword", "Authorization": "keyword", "X-Dynatrace": "keyword", "Content-Type": "keyword", "X-Lyft-Sandbox": "keyword", "X-Carrier-B64": "keyword", "X-B3-Traceid": "keyword", "Accept-Charset": "keyword", "X-Real-Ip": "keyword", "X-Cloud-Trace-Context": "keyword", "Referer": "keyword", "Origin": "keyword", "Request-Context": "keyword", "Request-Id": "keyword", "X-Ms-Request-Root-Id": "keyword", "X-Ms-Request-Id": "keyword"}, "expected_str": "keyword", "diff_fields": "keyword", "actual_str": "keyword", "origin_region": "keyword", "args": {"start_lng": "keyword", "start_lat": "keyword", "end_lng": "keyword", "end_lat": "keyword", "pickup_time_ms": "keyword", "is_business_ride": "keyword", "show_route_invalid_ridetypes": "keyword", "end_address": "keyword", "start_address": "keyword", "ride_type": "keyword", "pickup_range_ms": "keyword", "previous_price_quote_id": "keyword", "waypoint_lat": "keyword", "waypoint_lng": "keyword", "dest": "keyword", "origin": "keyword", "timestamp": "keyword", "timestamp_upper_bound_ms": "keyword", "passenger_id": "keyword", "waypoints": "keyword", "destination_latitude": "keyword", "destination_longitude": "keyword", "region": "keyword", "client_id": "keyword", "v": "keyword"}}}}, "version": "7180f15519096fb850f2ca7805c4a2e414959df9", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "fareerrorcontroller": {"name": "fareerrorcontroller", "description": "Controls upfront fare error", "repository": "git@github.com:lyft/fareerrorcontroller.git", "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "fareerrorcontroller.legacy"]}, {"name": "integration", "members": ["fareerrorcontroller.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "fareerrorcontroller.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "sharded", "group": "fareerrorcontroller.dev", "container": "fareerrorcontroller.legacy", "target": "tests/integration", "command": "make test_integration", "virtualenv": "integration_venv", "float_dependencies": "30 14,23 * * *", "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "automatic": true, "legacy": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "slack": "#pricing", "team_email": "pricing@lyft.com", "pagerduty_escalation_policy": "Pricing Experience", "languages": ["python"], "image_type": "service", "service_tier": 1, "pulldeploy_components": {"data": ["regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "fareerrorcontroller"}, {"name": "fareerrorcontrollerworker"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d515da9ba85335d62964737cfa6d75718d1f1a93", "sub_image": "precommit"}}]}}, "logging": {"fareerrorcontrollerworker": {"fields": {"attempt_num": "long", "exception": "keyword", "traceback": "keyword", "failed_record": "keyword"}}}, "version": "680ce723692fd4904106b5fc98df57ddb332d4e7", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d515da9ba85335d62964737cfa6d75718d1f1a93", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "fastdistance": {"name": "fastdistance", "description": "Fast implementation of distnace functions along the earth's surface", "repository": "git@github.com:lyft/fast-distance.git", "tests": [{"name": "python2", "type": "jailed", "command": "python -m pytest tests"}, {"name": "flake", "type": "jailed", "command": "flake8"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:33730d35bcd2ee744288051c2813d85e8faeafea", "sub_image": "precommit"}}]}}, "version": "1e2d91acdfe6f4115c6c208ad8d9d7334f7770bf", "images": [{"parent": {"name": "pythonlibrary", "version": "15023f6184c6f1fb1222d9d24fa1a0a7d28c6954", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "33730d35bcd2ee744288051c2813d85e8faeafea", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "15023f6184c6f1fb1222d9d24fa1a0a7d28c6954", "sub_image": null, "external": false}}, "fastgeohash": {"name": "fastgeohash", "description": "Fast implementation Geohash", "repository": "git@github.com:lyft/fast-geohash.git", "slack": "#lbs-server", "team_email": "lbs-eng@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "languages": ["python"], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "image_type": "library", "version": "8fa158fe4ab64c4b0c16284e1d74b1cb27c10f25", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "faultinjector": {"name": "faultinjector", "repository": "git@github.com:lyft/faultinjector.git", "description": "A service to enable programmatic fault injection", "service_tier": 2, "team_email": "resilience-team@lyft.com", "pagerduty_escalation_policy": "Resilience", "slack": "#resilience-bots", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:bbd7ec3456c618780036beaa76fd599b54a538f3", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- faultinjector", "workdir": "/code/faultinjector", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600, "exports": [{"name": "grpc", "port": 20002}]}], "groups": [{"name": "dev", "members": ["control.dev", "faultinjector.legacy", "postgresql.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "faultinjector.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "faultinjector.dev", "container": "faultinjector.legacy", "command": "make integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "faultinjector.service", "type": "service", "sidecars": ["iamwait", "heka", "fluentbit", "nsq", "statsd", "runtimepull"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "faultinjector.service", "type": "service", "sidecars": ["iamwait", "heka", "fluentbit", "nsq", "statsd", "runtimepull"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "bake_time_minutes": 0, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "bake_time_minutes": 0, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "orchestrate": {"types": [{"name": "terraform"}], "steps": [{"name": "staging"}]}, "version": "99c8bd81f602987eca58700a3de8810eb6f15e4f", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "bbd7ec3456c618780036beaa76fd599b54a538f3", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "favoriteemoji": {"name": "favoriteemoji", "slack": "#favorite-emoji", "description": "As part of the dev bootcamp experience, new Lyft engineers make a check-in to family to experience the full code-to-prod pipeline.", "repository": "git@github.com:lyft/favoriteemoji.git", "image_type": "service", "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/favoriteemoji", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}], "groups": [{"name": "dev", "members": ["control.dev", "favoriteemoji.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "favoriteemoji.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "team_email": "jgilbert@lyft.com", "facets": [{"name": "main", "member": "favoriteemoji.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 3, "criteria": {"cpu_target": 35}}}, {"name": "canary", "member": "favoriteemoji.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "bake_time_minutes": 0, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "automatic": false}, {"name": "canary", "legacy": false, "bake_time_minutes": 5, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "bake_time_minutes": 5, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "bake_time_minutes": 0, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}], "pagerduty_escalation_policy": "tech-learning-practice-services", "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "favoriteemoji"}]}}, "logging": {"favoriteemoji": {"fields": {"email_address": "keyword", "favorite_emoji": "keyword", "lyftId": "keyword", "lyft_id": "keyword"}}}, "version": "6e37dcf3296151b6bcf04f99da93a1c120ac5995", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "featurebuilder": {"name": "featurebuilder", "description": "Feature extractor workflows for dsfeatures", "repository": "git@github.com:lyft/featurebuilder.git", "image_type": "service", "service_tier": 2, "languages": ["python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "featurebuilder.legacy"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "featurebuilder.dev", "container": "featurebuilder.legacy", "command": "make test_integration"}, {"name": "workflow_registration", "type": "execution", "group": "featurebuilder.dev", "container": "featurebuilder.legacy", "command": "service_venv mbadmin register-workflows new -n featurebuilder -i development"}], "pulldeploy_components": {"data": ["featurebuilderdata"]}, "deploy": [[{"name": "development", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_development"}], [{"name": "staging", "legacy": true, "automatic": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_staging"}], [{"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_production"}]], "slack": "#ml-platform", "notification_overrides": {"deploy": {"slack": "#ml-platform-bots", "environments": ["canary", "production"]}, "test_failure": {"slack": "#ml-platform-bots", "environments": ["production"]}, "pr_merge": {"slack": "#ml-platform-bots"}}, "pagerduty_escalation_policy": "DS Platform", "team_email": "ds-platform@lyft.com", "envoy": {"profile": "python", "settings": {"services": [{"name": "featurebuilder"}], "common_settings": {"internal_hosts": {"dsfeatures": null}}}}, "version": "4368dbef5a6b7913d28f070b95a856555e90aa28", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "featurebuilderdata": {"name": "featurebuilderdata", "description": "Lyft-Runtime managed data and configuration for featurebuilder", "repository": "git@github.com:lyft/featurebuilderdata.git", "image_type": "data", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "run", "command": "/code/featurebuilderdata/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/featurebuilderdata"]}, {"name": "service", "command": "/code/featurebuilderdata/service_entrypoint.sh"}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "pagerduty_escalation_policy": "DS Platform", "team_email": "ds-platform@lyft.com", "slack": "#ml-platform-bots", "notification_overrides": {"pr_merge": {"slack": "#fraudsquad"}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "version": "40c03beb40c98d0ad1163c795d490810230d1d69", "images": [{"parent": {"name": "pythonlibrary", "version": "58d8b9b13ebb7f8224a9b0804160412119bd75fa", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "58d8b9b13ebb7f8224a9b0804160412119bd75fa", "sub_image": null, "external": false}}, "featureconfigdata": {"name": "featureconfigdata", "description": "A runtime data repository for json DS/RS feature configurations", "repository": "git@github.com:lyft/featureconfigdata.git", "image_type": "data", "service_tier": 1, "slack": "#fraudsquad", "team_email": "dev-fraud@lyft.com", "pagerduty_escalation_policy": "Fraud Platform", "languages": ["bash"], "builder": {"name": "s2i", "params": {"builder": "lyft/configsetbase:f3bb12eebb7bf3db143683e6b360bd0b9c644d95"}}, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/featureconfigdata"]}], "groups": [{"name": "karma", "members": ["karma.dev"]}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}, {"name": "unit", "type": "jailed", "command": "make test"}, {"name": "karma", "type": "restricted", "group": "featureconfigdata.karma", "container": "karma.legacy", "command": "make test_featureconfigdata", "reports": {"junit": "build/unit.xml"}, "whitelist": ["karma-development-iad-onebox.lyft.net."]}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "canary", "legacy": true, "automatic": false, "orca": []}, {"name": "production", "legacy": true, "automatic": false, "orca": []}], "version": "3757357179fb8d1a2a1eed480e2f9a176158671b", "images": [{"parent": {"name": "configsetbase", "version": "f3bb12eebb7bf3db143683e6b360bd0b9c644d95", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "configsetbase", "version": "f3bb12eebb7bf3db143683e6b360bd0b9c644d95", "sub_image": null, "external": false}}, "feexample": {"name": "feexample", "description": "Example frontend service", "repository": "git@github.com:lyft/feexample.git", "slack": "#devx-bots", "team_email": "devx-team@lyft.com", "pagerduty_escalation_policy": "Fedex", "image_type": "service", "service_tier": 3, "languages": ["javascript"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2inode:service.e852e9730388c06f4f8191f7685311512bc4132b", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "cdnupload", "command": "/code/feexample/cdn-upload", "sub_image": "k8s"}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "feexample.legacy"]}, {"name": "service_group", "members": ["feexample.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "feexample.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "facets": [{"name": "assets", "member": "feexample.cdnupload", "type": "job"}, {"name": "main", "member": "feexample.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "canary", "member": "feexample.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}], "envoy": {"profile": "python", "settings": {"services": [{"name": "feexample"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}}}}, "version": "1e296ced8fcc1654073bd876b0bfd01d0aaaf16a", "images": [{"parent": {"name": "s2inode", "version": "e852e9730388c06f4f8191f7685311512bc4132b", "sub_image": "service", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "fileaudit": {"name": "fileaudit", "description": "Audits file access and produces periodic report files which can be aggregated", "repository": "git@github.com:lyft/containers.git:fileaudit", "slack": "#deploys", "team_email": "deploys-team@lyft.com", "containers": [{"name": "interactive", "command": "/bin/bash"}], "languages": ["go"], "image_type": "service", "deploy": [{"name": "production", "legacy": true}], "version": "252c4907ed4100a6add2cbc036839f36e28d5b53", "images": [{"parent": {"name": "go", "version": "d6145edc8c745b7a242ffaa91cb40d516b2a0c33", "external": false}, "sub_image": null}], "parent": {"name": "go", "version": "d6145edc8c745b7a242ffaa91cb40d516b2a0c33", "external": false}}, "fileauditview": {"name": "fileauditview", "description": "CLI view for fileaudit data consumption", "repository": "git@github.com:lyft/containers.git:fileauditview", "slack": "#deploys-bots", "team_email": "deploys-team@lyft.com", "pagerduty_escalation_policy": "Deploys", "image_type": "tool", "credentials_legacy": false, "docs": {"section": "Infrastructure"}, "containers": [{"name": "interactive", "command": "/code/containers/fileauditview/entrypoint.sh"}, {"name": "unusedkeysinternal", "command": "/code/containers/fileauditview/runtime_entrypoint.sh"}], "groups": [{"name": "view", "members": ["control.minimal", "fileauditview.interactive"]}, {"name": "unusedkeys", "members": ["control.minimal", "runtime.run", "fileauditview.unusedkeysinternal"]}], "deploy": [{"name": "production", "legacy": false, "automatic": true}], "tests": [{"name": "unit", "type": "jailed", "command": "python3.6 -m pytest tests/"}, {"name": "mypy", "type": "jailed", "command": "python3.6 -m mypy fileauditview/ tests/"}, {"name": "lint", "type": "jailed", "command": "python3.6 -m flake8 /code/containers/fileauditview/"}], "version": "aebabe5069228e55d3e58e963eeff8f14349b546", "images": [{"parent": {"name": "bionicbase", "version": "d02d56073b76687036aada7dababdc5eb2aeea64", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "d02d56073b76687036aada7dababdc5eb2aeea64", "sub_image": null, "external": false}}, "financial": {"name": "financial", "description": "Financial Infrastructure", "repository": "git@github.com:lyft/financial.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["mailer.dev", "control.dev", "dynamodb.dev", "financial.legacy", "postgresql.dev", "mongodb.server", "postgresql.server", "hivemetastore.dev", "mozartgateway.dev"]}, {"name": "integration", "members": ["financial.dev", "jobscheduler.dev"]}, {"name": "minimal", "members": ["control.dev", "financial.legacy", "postgresql.dev", "postgresql.server"]}], "slack": "#finfra-deploy", "pagerduty_escalation_policy": "Finfra", "team_email": "financial-infra@lyft.com", "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "financial.dev", "container": "financial.legacy", "command": "make test_integration", "autotrigger": false, "reports": {"junit": "build/integration.xml", "cobertura": "build/coverage.xml"}}, {"name": "integration_sharded", "type": "sharded", "group": "financial.dev", "container": "financial.legacy", "target": "tests/integration", "shard_at": "file", "max_shard_duration": 10, "virtualenv": "service_venv", "reports": {"junit": "build/integration.xml"}}, {"name": "terraform-checkformat", "type": "tool", "tool": "terraform.checkformat"}, {"name": "terraform-validate", "type": "tool", "tool": "terraform.validate"}], "deploy": [{"name": "staging", "legacy": true, "bake_time_minutes": 0, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "languages": ["bash", "java", "python"], "image_type": "service", "service_tier": 2, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "orchestrate": {"types": [{"name": "terraform"}], "steps": [{"name": "staging"}, {"name": "production"}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "financial"}, {"name": "financialairflow"}, {"name": "financialairflowworkers"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"ats": null, "jobschedulernormalweb": null, "jobschedulerbulkweb": null, "jobschedulermigrationweb": null, "mozartgateway": null, "supplyrecords": {"tls_enabled": true}, "mailer": null}, "external_hosts": {"dynamodb_iad": null}, "mongos": {"green": {"production": {"ratelimit": true, "clusters": [{"port": 27019, "hosts": ["r043119-90.mlab.com:27817"]}]}}, "rides": {"production": {"ratelimit": true, "clusters": [{"port": 27020, "hosts": ["r027189-90.mlab.com:27817"]}]}}}}, "override_settings": [{"services": [{"name": "financialairflow"}], "settings": {"health_check_endpoint": "/health"}}]}}, "version": "0bca48411132b5aacfd218acbd9a8232eec3ecd1", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "financialadmin": {"name": "financialadmin", "description": "Financial Infra administration platform", "repository": "git@github.com:lyft/financialadmin.git", "slack": "#finfra-deploy", "team_email": "financial-infra@lyft.com", "pagerduty_escalation_policy": "Finfra", "image_type": "service", "service_tier": 3, "languages": ["bash", "javascript", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "frontend", "port": 9211}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/financialadmin", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.dev", "postgresql.server", "jobscheduler.dev", "mailer.dev", "financialadmin.legacy"]}, {"name": "service_group", "members": ["financialadmin.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "financialadmin.dev"}, {"name": "unit", "type": "execution", "group": "financialadmin.dev", "container": "financialadmin.legacy", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "financialadmin.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "financialadmin.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "financialadmin"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"mailer": null}}}}, "version": "f5522be2ece904e198ce969a2aee7dde61697fa3", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "financialetl": {"name": "financialetl", "description": "A SQL ETL framework for building data pipeline", "repository": "git@github.com:lyft/financialetl.git", "image_type": "library", "languages": ["python"], "credentials_legacy": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipythonlibrary:233e13867a4fb32002e02ea84d1e8cd6e51069ed", "packages": ["libpq-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "containers": [{"name": "test", "privileged": true, "network": "host", "command": "/bin/bash -c 'while true; do sleep 3600; done'"}], "groups": [{"name": "tester", "members": ["financialetl.test"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": []}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": []}], "version": "159e40a18e5bc4f7600d8b9ca777001179684cfb", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "233e13867a4fb32002e02ea84d1e8cd6e51069ed", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "233e13867a4fb32002e02ea84d1e8cd6e51069ed", "sub_image": null, "external": false}}, "fireman": {"name": "fireman", "description": "Alerting Framework", "repository": "git@github.com:lyft/fireman.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 80}]}], "groups": [{"name": "dev", "members": ["control.dev", "mailer.dev", "fireman.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "fireman.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt", "cobertura": "build/coverage.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "team_email": "observability-visibility-team@lyft.com", "pagerduty_escalation_policy": "Observability Visibility", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#observabot"}, "pr_merge": {"slack": "#observabot"}}, "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "staging", "legacy": true, "automatic": false, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}], {"name": "production", "legacy": true}], "languages": ["javascript", "python"], "image_type": "service", "service_tier": 1, "envoy": {"profile": "python", "settings": {"services": [{"name": "fireman"}, {"name": "firemanworker"}], "common_settings": {"local_service": {"ingress_ports": [80, 9211]}, "external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"mailer": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "logging": {"fireman": {"fields": {"custom_details": "keyword", "incident_key": "keyword", "incident_service": "keyword", "description": "keyword", "response": {"response": {"table": "keyword", "canDelete": "boolean", "isUserEvent": "boolean", "annotations": {"type": "keyword", "severity": "keyword", "details": "keyword"}, "createdAt": "keyword", "updatedEpochMillis": "keyword", "tags": "keyword", "creatorType": "keyword", "summarizedEvents": "long", "runningState": "keyword", "endTime": "keyword", "updaterId": "keyword", "startTime": "keyword", "name": "keyword", "createdEpochMillis": "keyword", "creatorId": "keyword", "updatedAt": "keyword", "canClose": "boolean", "isEphemeral": "boolean", "id": "keyword"}, "status": {"result": "keyword", "message": "keyword", "code": "long"}}, "service_name": "keyword", "incident_id": "keyword", "ip_address": "keyword"}}}, "version": "49d18d71bfa03e5eb40153d5313753313475b280", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "firstdata": {"name": "firstdata", "description": "firstdata", "repository": "git@github.com:lyft/firstdata.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:547a336fe470dbd62f20be74e7703449fc8ab523", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:4689c1a4eedccd3fd44d9ba1068d3605364acd2b", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/firstdata", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}], "facets": [{"name": "main", "member": "firstdata.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 1, "max_size": 3}}}}, {"name": "canary", "member": "firstdata.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "redis.server", "firstdata.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "firstdata.dev"}, {"name": "unit", "type": "restricted", "group": "firstdata.dev", "container": "firstdata.legacy", "command": "make test_unit", "whitelist": ["firstdata-development-iad-onebox.lyft.net.", "firstdata-legacy.dev.lyft.net."]}, {"name": "integration", "type": "execution", "group": "firstdata.dev", "container": "firstdata.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#financial-infra", "team_email": "dev-payments@lyft.com", "pagerduty_escalation_policy": "Pay Platform", "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"legacy": false, "name": "production", "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "image_type": "service", "service_tier": 1, "envoy": {"profile": "python", "settings": {"services": [{"name": "firstdata"}], "common_settings": {"internal_hosts": {"jobschedulernormalweb": null}, "external_hosts": {"datawire": null, "kinesis_iad": null}, "redis": {"firstdatamultiredis": {"port": 6380}}}}}, "languages": ["python"], "version": "d28c9773578fc765e092580933250f0abd96fca1", "images": [{"parent": {"name": "opsbase", "version": "9b8fce0a2b000266a25f8f6034391e43523b3d43", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "547a336fe470dbd62f20be74e7703449fc8ab523", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "4689c1a4eedccd3fd44d9ba1068d3605364acd2b", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "9b8fce0a2b000266a25f8f6034391e43523b3d43", "sub_image": null, "external": false}}, "flaggedtrips": {"name": "flaggedtrips", "description": "Tracks rides that karma has flagged as possibly fradulent.", "repository": "git@github.com:lyft/flaggedtrips.git", "team_email": "dev-fraud@lyft.com", "pagerduty_escalation_policy": "Fraud Platform", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "jobscheduler.dev", "flaggedtrips.legacy"]}, {"name": "integration", "members": ["account.dev", "dispatch.dev", "flaggedtrips.dev", "green.dev", "jobscheduler.dev", "karma.dev", "ledger.dev", "locations.dev", "tcs.dev", "trips.dev", "tripsapi.dev", "txnhub.dev", "users.dev", "viewport.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "flaggedtrips.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy"}, {"name": "integration", "type": "sharded", "group": "flaggedtrips.integration", "container": "flaggedtrips.legacy", "target": "tests/integration", "virtualenv": "service_venv", "reports": {"junit": "build/integration.xml"}, "float_dependencies": "H 5-22 * * *"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "container": "flaggedtrips.legacy", "group": "flaggedtrips.dev", "framework": "pytest", "coverage": false, "targets": ["tests/unit"], "markers": "unit_legacy"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "slack": "#fraudsquad", "slack_deploy_notification_environments": ["canary", "production"], "envoy": {"profile": "python", "settings": {"services": [{"name": "flaggedtrips"}], "common_settings": {"internal_hosts": {"jobschedulernormalweb": null, "karma": null, "ledger": null, "rides": null, "routes": null, "users": null, "userprivacyrights": null}, "external_hosts": {"dynamodb_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "logging": {"flaggedtrips": {"fields": {"ride_id": "keyword", "route_id": "keyword", "type": "keyword", "resolution": "keyword", "actor": "keyword", "payer_identifier": "keyword", "payer_domain": "keyword", "driver_id": "keyword", "region": "keyword", "note": "keyword", "passenger_id": "keyword", "exception": "keyword", "traceback": "keyword", "attempt_num": "long", "failed_record": "keyword"}}}, "version": "41694abca8d04495f3c4740e4c5deb90e527e58f", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "flaskprotobuf": {"name": "flaskprotobuf", "description": "Protobuf support for Flask", "repository": "git@github.com:lyft/flask-protobuf.git", "image_type": "library", "slack": "#proto-apis", "team_email": "idl-tools@lyft.com", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "3bcecebc91d46abdd2f5abb66a304737f60b9d52", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "fleetlocations": {"name": "fleetlocations", "description": "Python service for managing locations for the Lyft fleet (rentals, service centers, charging stations, etc.)", "repository": "git@github.com:lyft/fleetlocations.git", "image_type": "service", "service_tier": 1, "slack": "#fp-hub", "team_email": "fp-eng@lyft.com", "pagerduty_escalation_policy": "Fleet Management", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "elasticsearch5.server", "fleetlocations.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "fleetlocations.dev"}, {"name": "unit", "type": "execution", "command": "make test_unit", "group": "fleetlocations.dev", "container": "fleetlocations.legacy", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml", "htmlcov": "build/htmlcov"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "upstream_tests": {"on_commit": true, "test_set": {"fleetmanagement": ["integration"], "rentals": ["integration"], "vehicleservicecenters": ["integration"]}}, "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "fleetlocations"}, {"name": "fleetlocationssearchworkers"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "sqs_iad": null}, "internal_hosts": {"regions": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "logging": {"fleetlocations": {"fields": {"method": "keyword", "request_parameters": {"capability_types": "keyword", "enabled": "boolean", "externally_visible": "boolean", "geo_item_ids": "keyword", "instance_keys": "keyword", "names": "keyword", "override_date_ms": "date", "page_size": "integer", "page": "integer", "region_code": "keyword", "region_codes": "keyword", "time_zones": "keyword", "vehicle_provider_id": "keyword"}, "actor": {"system_name": "keyword", "actor_type": "keyword", "display_name": "keyword", "lyft_id": "keyword", "agent_email": "keyword"}}}}, "version": "1da59212c255b995972150e736d305cc3c98c9ce", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "fleetmanagement": {"name": "fleetmanagement", "description": "Python service for managing Lyft vehicles (rental vehicles, autonomous, etc).", "repository": "git@github.com:lyft/fleetmanagement.git", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}], "limits": {"environment": {"development": {"cpu": 0.1, "memory": "1.5Gi"}}}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "elasticsearch5.server", "redis.dev", "idl.server", "fleetmanagement.legacy"]}, {"name": "integration", "members": ["fleetlocations.dev", "fleetmanagement.dev", "jobscheduler.dev", "notes.dev", "sqs.server", "supplyrecords.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "fleetmanagement.dev"}, {"name": "component", "type": "execution", "group": "fleetmanagement.dev", "container": "fleetmanagement.legacy", "command": "make test_component", "skip_threshold": 10, "run_in_pr": true, "run_in_dev": true, "reports": {"junit": "build/component.xml", "cobertura": "build/coverage.xml", "htmlcov": "build/htmlcov"}}, {"name": "unit", "type": "jailed", "command": "make test_unit", "run_in_pr": true, "run_in_dev": true, "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml", "htmlcov": "build/htmlcov"}}, {"name": "integration", "type": "sharded", "group": "fleetmanagement.dev", "container": "fleetmanagement.legacy", "target": "tests/integration/", "virtualenv": "integration_venv", "float_dependencies": "15,45 2-22 * * *", "skip_threshold": 15, "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "upstream_tests": {"on_commit": true, "test_set": {"rentals": ["integration"], "vehicleservicecenters": ["integration"]}}, "slack": "#fp-hub", "team_email": "xd-fm-eng@lyft.com", "pagerduty_escalation_policy": "Fleet Management", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "fleetmanagement"}, {"name": "fleetmanagementbatch"}, {"name": "fleetmanagementsearchworkers"}, {"name": "fleetmanagementworkers"}, {"name": "fleetmanagementtmworkers"}], "common_settings": {"external_hosts": {"abg": null, "dynamodb_iad": null, "firehose_iad": null, "flexdrive": null, "samsara": null, "sqs_iad": null}, "internal_hosts": {"autonomous": null, "fleetlocations": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "mailer": null, "notes": null, "regions": null, "supplyrecords": {"tls_enabled": true}, "vehiclemetadata": null}, "redis": {"fleetmanagementmultiredis": {"port": 6380}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "logging": {"fleetmanagement": {"fields": {"actor": {"actor_type": "keyword", "agent_email": "keyword", "display_name": "keyword", "system_name": "keyword"}, "error_message": "keyword", "error_code": "keyword", "error_details": {"asset_id": "keyword", "external_location_id": "keyword", "input fields": "keyword", "input_updated_at_ms": "keyword", "purchase_order_fee_id": "keyword", "request_info": "keyword", "response": "keyword", "vehicle_updated_at_ms": "keyword"}, "kwargs": {"event_id": "keyword", "event_type": "keyword", "event": {"address1": "keyword", "ataCode": "keyword", "ataDetail": "keyword", "ataGroup": "keyword", "ataProduct": "keyword", "category": "keyword", "city": "keyword", "class": "keyword", "createdAt": "date", "dealerId": "keyword", "description": "keyword", "doors": "long", "drivetrain": "keyword", "events": "keyword", "eventType": "keyword", "exteriorColor": "keyword", "externalId": "keyword", "fuelType": "keyword", "id": "keyword", "interiorColor": "keyword", "isDeviceCommunicating": "boolean", "isEngineOdometer": "boolean", "isRegistrationPending": "boolean", "latitude": "keyword", "licensePlateCountry": "keyword", "licensePlateNumber": "keyword", "licensePlateState": "keyword", "location": "keyword", "locationId": "keyword", "longitude": "keyword", "maintenanceRequired": "boolean", "make": "keyword", "marketId": "keyword", "model": "keyword", "odometer": "long", "paidDate": "date", "partnerId": "keyword", "partnerSubscriptionId": "keyword", "pmDue": "boolean", "pmDueDate": "date", "pmDueOdometer": "long", "poCreatedDate": "date", "poNumber": "keyword", "quantity": "long", "rateClass": "keyword", "recallRequired": "boolean", "registrationExpiration": "date", "repairDate": "date", "seats": "long", "state": "keyword", "status": "keyword", "subscriptionId": "keyword", "telemetryDeviceId": "keyword", "telemetryOdometer": "long", "telemetryUpdatedAt": "date", "telemetryVendor": "keyword", "total": "long", "transmission": "keyword", "trim": "keyword", "type": "keyword", "updatedAt": "date", "vehicle": {"class": "keyword", "doors": "long", "locationId": "keyword", "vin": "keyword", "fuelType": "keyword", "seatbelts": "long", "make": "keyword", "year": "long", "tankCapacity": "float", "id": "keyword", "createdAt": "date", "licensePlateState": "keyword", "model": "keyword", "updatedAt": "date", "registrationExpiration": "date", "licensePlateNumber": "keyword", "exteriorColor": "keyword", "status": "keyword", "odometer": "long"}, "vehicleId": "keyword", "vin": "keyword", "year": "long", "zip": "keyword"}, "external_vehicle_id": "keyword", "service": "keyword", "username": "keyword", "vehicle_id": "keyword", "vehicle_provider_id": "keyword"}, "method": "keyword", "request_parameters": {"bucket_by_field": "keyword", "external_vehicle_ids": "keyword", "fileformat": "keyword", "filename": "keyword", "location_ids": "keyword", "lyft_location_ids": "keyword", "maintenance_required": "keyword", "makes": "keyword", "models": "keyword", "page_size": "keyword", "page": "keyword", "plates": "keyword", "region_codes": "keyword", "requires_recall": "keyword", "reschedule": "keyword", "sort_by": "keyword", "sort_order": "keyword", "statuses": "keyword", "vehicle_classes": "keyword", "vehicle_provider_ids": "keyword", "vins": "keyword"}}}}, "version": "f1ec12a7be0e93c4e6080663727a3816f02406b1", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "fleetmanagerint": {"name": "fleetmanagerint", "description": "Web frontend for managing Lyft vehicles", "repository": "git@github.com:lyft/fleetmanagerint.git", "image_type": "service", "service_tier": 1, "languages": ["javascript"], "credentials": true, "frontend": {"node_version": "10.14.1-1nodesource1"}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "workdir": "/code/fleetmanagerint", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "cdnupload", "command": "/code/fleetmanagerint/cdn-upload", "workdir": "/code/fleetmanagerint", "sub_image": "k8s"}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "slack": "#fp-hub", "pagerduty_escalation_policy": "Fleet Tech Frontend", "team_email": "fm-hub@lyft.com", "groups": [{"name": "dev", "members": ["control.dev", "fleetmanagement.dev", "fleetlocations.dev", "fleetmanagerint.legacy", "tom.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "fleetmanagerint.dev"}, {"name": "tsc", "type": "execution", "group": "fleetmanagerint.dev", "container": "fleetmanagerint.legacy", "command": "make test_tsc"}, {"name": "unit", "type": "execution", "group": "fleetmanagerint.dev", "container": "fleetmanagerint.legacy", "command": "make test_unit"}, {"name": "lint", "type": "execution", "group": "fleetmanagerint.dev", "container": "fleetmanagerint.legacy", "command": "make test_lint"}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "automatic": true, "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"legacy": false, "name": "production", "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "fleetmanagerint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null, "tom": null, "fleetmanagement": null, "fleetlocations": null, "supply": null, "vehiclemetadata": null, "privacyaudit": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2inode:service.835f87582b1b091b3ef8895d577ba3439540abbe", "sub_image": "k8s"}}, {"name": "docker_build"}]}}, "facets": [{"name": "main", "member": "fleetmanagerint.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 4}}}}, {"name": "canary", "member": "fleetmanagerint.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "assets", "member": "fleetmanagerint.cdnupload", "type": "job"}], "version": "c180607257db8c099eecaac1f279e76b66dfc50d", "images": [{"parent": {"name": "s2inode", "version": "835f87582b1b091b3ef8895d577ba3439540abbe", "sub_image": "service", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "flexibleincentives": {"name": "flexibleincentives", "description": "Support creating/processing/maintaining different types of flexible incentives", "repository": "git@github.com:lyft/flexibleincentives.git", "image_type": "service", "service_tier": 1, "slack": "#acq-incentives", "team_email": "acq-incentives-referrals@lyft.com", "pagerduty_escalation_policy": "Referrals Team", "languages": ["bash", "python"], "notification_overrides": {"deploy": {"slack": "#acq-incentives-bot", "environments": ["production", "canary", "staging"]}, "deploy_failure": {"slack": "#acq-incentives-bot"}, "test_failure": {"slack": "#acq-incentives-bot", "email": "acq-incentives-referrals@lyft.com", "environments": ["production"]}, "master_failure": {"slack": "#acq-incentives-bot"}, "pr_merge": {"slack": "#acq-incentives-bot"}, "pr_open": {"slack": "#acq-incentives-bot"}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "redis.dev", "flexibleincentives.legacy", "jobscheduler.dev", "mailer.dev", "usergroups.dev", "loyaltypoints.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "flexibleincentives.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "container": "flexibleincentives.legacy", "group": "flexibleincentives.dev", "command": "make test_integration", "reports": {"junit": "build/local_integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "flexibleincentives"}, {"name": "flexibleincentivesbatch"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 900}}}, "external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"ats": null, "coupons": null, "flexibleincentives": null, "jobschedulerbulkweb": null, "ledger": null, "loyaltypoints": null, "mailer": null, "omnibot": null, "ratings": null, "referrals": null, "regions": null, "rides": null, "supply": null, "supplyrecords": null, "usergroups": null, "users": null, "venues": null}, "redis_clusters": {"flexibleincentiv": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "logging": {"flexibleincentives": {"fields": {"event_name": "keyword", "user_id": "keyword", "record_id": "long", "missing_count": "long", "bonus_record_id": "long", "error": "keyword"}}}, "version": "6b634cfc6f9d2cafa40dea5ee3f13e6f443f703a", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "flexppz": {"name": "flexppz", "description": "Service for running Personal Power Zone (PPZ) models", "repository": "git@github.com:lyft/flexppz.git", "image_type": "service", "service_tier": 1, "slack": "#de-positioning-deploy", "team_email": "driver-positioning-core@lyft.com", "pagerduty_escalation_policy": "Driver Positioning", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "groups": [{"name": "dev", "members": ["control.dev", "flexppz.legacy", "redis.dev"]}, {"name": "integration", "members": ["flexppz.dev", "modelexec.dev", "ppzconfig.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "flexppz.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "flexppz.integration", "container": "flexppz.legacy", "command": "make test_integration", "skip_threshold": 10, "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "flexppz"}, {"name": "flexppzworkers"}, {"name": "flexppzworkerslarge"}], "common_settings": {"internal_hosts": {"bookkeeper": null, "demand": null, "dispatch": null, "driverheatmaps": null, "dsfeatures": null, "dsfeatureswrites": null, "modelexecpacman": null, "priceoptimizerbulk": null, "pricing": null, "regions": null, "shorttermforecaster": null, "ppzconfig": null}, "external_hosts": {"firehose_iad": null}, "redis": {"flexppzmultiredis": {"port": 6380, "health_check": {"timeout_ms": 1000, "interval_ms": 5000}, "outlier_detection": {"consecutive_5xx": 100, "enforcing_success_rate": 0}}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "precommit"}}]}}, "docs": {"autogen_modules": ["app"]}, "logging": {"flexppzworkers": {"fields": {"model_region": "keyword", "model_name": "keyword", "execution_id": "keyword", "model_id": "keyword", "orchestrator_version": "keyword"}}, "flexppzworkerslarge": {"fields": {"model_region": "keyword", "model_name": "keyword", "execution_id": "keyword", "model_id": "keyword", "orchestrator_version": "keyword"}}}, "version": "386188c90bd8f659d63e694b08b14a31005b3577", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "flinkfanner": {"name": "flinkfanner", "description": "Stream duplicator", "repository": "git@github.com:lyft/streamperfbench.git:flinkfanner", "containers": [{"name": "service", "command": "/docker-entrypoint.sh local"}], "groups": [{"name": "dev", "members": ["control.dev", "flinkfanner.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "flinkfanner.dev"}, {"name": "unit", "type": "execution", "command": "mvn test --settings /settings.xml", "group": "flinkfanner.dev", "container": "flinkfanner.service"}], "slack": "#streaming-compute", "team_email": "streaming-compute@lyft.com", "pagerduty_escalation_policy": "devnull", "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}], "languages": ["bash", "java"], "image_type": "service", "streamingplatform": {"kubernetes": true, "applications": [{"namespace": "flink", "name": "flinkfanner"}]}, "service_tier": 3, "builder": {"name": "s2i", "params": {"builder": "lyft/s2istreamingplatformflink:sp20.f2556c4c9097b89daf9b854ade489f42003b63f1"}}, "version": "64be9ccff45b6945d789411a3b36b28d85dc61e0", "images": [{"parent": {"name": "s2istreamingplatformflink", "version": "f2556c4c9097b89daf9b854ade489f42003b63f1", "sub_image": "sp20", "external": false}, "sub_image": null}], "parent": {"name": "s2istreamingplatformflink", "version": "f2556c4c9097b89daf9b854ade489f42003b63f1", "sub_image": "sp20", "external": false}}, "flinkoperator": {"name": "flinkoperator", "description": "Operator for deploying Flink applications at Lyft", "repository": "git@github.com:lyft/flinkk8soperator-private.git", "credentials": false, "image_type": "service", "slack": "#streaming-compute", "team_email": "streaming-compute@lyft.com", "pagerduty_escalation_policy": "Streaming Compute", "deploy": [{"name": "staging-flinkstaging", "legacy": false, "kubernetes": {"enabled": true, "mode": "direct", "clusterLabels": {"cluster.lyft.net/role": "flink"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "flink"}}, "automatic": false}, {"name": "staging-core-staging-4", "legacy": false, "kubernetes": {"enabled": true, "mode": "direct", "clusterLabels": {"cluster.lyft.net/cluster_name": "core-staging-4"}}, "automatic": false}, {"name": "staging-core-staging-3", "legacy": false, "kubernetes": {"enabled": true, "mode": "direct", "clusterLabels": {"cluster.lyft.net/cluster_name": "core-staging-3"}}, "automatic": false}, {"name": "production-core-prod-4", "legacy": false, "kubernetes": {"enabled": true, "mode": "direct", "clusterLabels": {"cluster.lyft.net/cluster_name": "core-prod-4"}}, "automatic": false}, {"name": "production-core-prod-3", "legacy": false, "kubernetes": {"enabled": true, "mode": "direct", "clusterLabels": {"cluster.lyft.net/cluster_name": "core-prod-3"}}, "automatic": false}], "service_tier": 3, "logging": {"flinkoperator": {"fields": {"app_name": "keyword", "ns": "keyword", "phase": "keyword"}}}, "version": "34c3442aa942ba9b6269890f5a36f6eeab64efe8", "images": [{"parent": {"name": "imagebase", "version": "876dbc1b4548b1b19a192303633555cafa7f9e08", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "876dbc1b4548b1b19a192303633555cafa7f9e08", "sub_image": null, "external": false}}, "flinkperf": {"name": "flinkperf", "description": "Stream duplicator", "repository": "git@github.com:lyft/streamperfbench.git:flinkperf", "groups": [{"name": "dev", "members": ["control.dev", "flinkperf.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "flinkperf.dev"}, {"name": "unit", "type": "execution", "command": "mvn test --settings /settings.xml", "group": "flinkperf.dev", "container": "flinkperf.service"}], "containers": [{"name": "service", "command": "/docker-entrypoint.sh local"}], "slack": "#streaming-compute", "team_email": "streaming-compute@lyft.com", "pagerduty_escalation_policy": "devnull", "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}], "languages": ["bash", "java"], "image_type": "service", "streamingplatform": {"kubernetes": true, "applications": [{"namespace": "flink", "name": "flinkperf"}]}, "service_tier": 3, "builder": {"name": "s2i", "params": {"builder": "lyft/s2istreamingplatformflink:f308de80a59660295f5ebb4463a4b68d56524d90"}}, "version": "85cfbdb7cee3880e4066d519dc5215fe5e5c5b71", "images": [{"parent": {"name": "s2istreamingplatformflink", "version": "f308de80a59660295f5ebb4463a4b68d56524d90", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2istreamingplatformflink", "version": "f308de80a59660295f5ebb4463a4b68d56524d90", "sub_image": null, "external": false}}, "fluentbit": {"name": "fluentbit", "description": "Fluent-bit with default configuration to wire it up to Lyft's next gen logging", "repository": "git@github.com:lyft/k8s-sidecars.git:fluentbit", "team_email": "obs-analysis@lyft.com", "pagerduty_escalation_policy": "Observability-Analysis", "slack": "#observability", "containers": [{"name": "agent", "workdir": "/fluent-bit", "command": "/bin/bash -c 'while true; do sleep 1000; done'"}], "groups": [{"name": "dev", "members": ["control.dev", "fluentbit.agent"]}], "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "credentials": false, "deploy": [{"name": "staging-obs-dev", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["obs-dev"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["obs-dev"]}}}, {"name": "staging-sidecar-test1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sidecar-test1"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sidecar-test1"]}}}, [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "staging-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}}}, {"name": "staging-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "staging-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "staging-flink", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flink"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["flink"]}}}, {"name": "staging-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}}}, {"name": "staging-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}], [{"name": "production-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-titan", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "spark", "cluster.lyft.net/environment": "production", "cluster.lyft.net/cluster": "sparkdev"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "titan"}}}, {"name": "production-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}}}, {"name": "production-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-devkube", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}}}, {"name": "production-devkubestaging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkubestaging"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}}}, {"name": "production-lyftlearn-av", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn-av"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml-av"]}}}, {"name": "production-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}}}], {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], "image_type": "service", "service_tier": 1, "version": "7ac36dca44eeb67340cea12d7caf66000a0dcdf2", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "flyte": {"name": "flyte", "description": "Repo for Lyft internal Flyte deployment", "repository": "git@github.com:lyft/flyte-private.git", "image_type": "service", "slack": "#flyte-eng", "team_email": "flyte-eng@lyft.com", "service_tier": 2, "pagerduty_escalation_policy": "Data Platform Flyte", "docs": {"path": "docs"}, "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "flyte"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production-critical", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "flytecritical"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}, "path": "environment/production"}}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "flyte"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}, "orca": [{"region": "iad"}]}], "languages": ["python"], "version": "26ba45c07fbe82ffd57bbd1a49ce81070945ab94", "images": [{"parent": {"name": "imagebase", "version": "3d05522cd0526907149ca4c05273c28771c398bf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "3d05522cd0526907149ca4c05273c28771c398bf", "sub_image": null, "external": false}}, "flyteadmin": {"name": "flyteadmin", "description": "wrapper for open source flyteadmin project", "repository": "git@github.com:lyft/flyteadmin-private.git", "image_type": "service", "service_tier": 3, "slack": "#flyte-eng", "team_email": "flyte-eng@lyft.com", "pagerduty_escalation_policy": "Data Platform Flyte", "languages": ["bash"], "credentials": true, "containers": [{"name": "service", "command": "/code/flyteadmin-private/entrypoint.sh", "limits": {"memory": "4Gi"}}, {"name": "spin", "command": "sleep infinity"}, {"name": "clusterresource", "command": "/code/flyteadmin-private/cluster_resource_entrypoint.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "flyteadmin.spin"]}], "tests": [{"name": "startup", "type": "startup", "group": "flyteadmin.dev"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "sync"}, {"facet": "synccron"}], "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "sync"}, {"facet": "synccron"}]}], "facets": [{"name": "main", "member": "flyteadmin.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 10}}}}, {"name": "sync", "member": "flyteadmin.clusterresource", "type": "batch"}, {"name": "synccron", "member": "flyteadmin.clusterresource", "type": "cron", "schedule": "*/10 * * * *", "concurrency_policy": "forbid"}], "envoy": {"profile": "go", "settings": {"services": [{"name": "flyteadmin"}], "common_settings": {}}}, "version": "2f582e881bac22a2bc4a552327dbc090736ac2ba", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "flyteclient": {"name": "flyteclient", "description": "Light-weight client library to invoke flyte-workflows.", "repository": "git@github.com:lyft/flyteclient.git", "image_type": "library", "slack": "#flyte", "team_email": "flyte-eng@lyft.com", "languages": ["python"], "containers": [{"name": "test", "privileged": true, "network": "host", "command": "/bin/bash -c 'while true; do sleep 3600; done'"}], "groups": [{"name": "tester", "members": ["flyteclient.test"]}], "docs": {"autogen_modules": ["flyte_client", "flyte_client/public"]}, "tests": [{"name": "unit3", "type": "jailed", "command": "make unit_python3", "group": "flyteclient.tester", "container": "flyteclient.test"}, {"name": "unit", "type": "jailed", "command": "make unit_python2", "group": "flyteclient.tester", "container": "flyteclient.test"}, {"name": "functional", "type": "execution", "command": "make functional", "group": "flyteclient.tester", "container": "flyteclient.test"}, {"name": "lint", "type": "jailed", "command": "make lint"}], "deploy": [{"name": "development", "legacy": true}, {"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "python": {"py3k": {"linters": ["modernize", "pylint"]}}, "version": "ab6e3c77569a0c455bdc5ecd7fdf5ab74acdcb41", "images": [{"parent": {"name": "pythonlibrary", "version": "a99efa8794970fa95073bd7c69cafe226785f7dd", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "pythonlibrary", "version": "a99efa8794970fa95073bd7c69cafe226785f7dd", "sub_image": null, "external": false}}, "flyteconsole": {"name": "flyteconsole", "description": "wrapper for open source flyteconsole project", "repository": "git@github.com:lyft/flyteconsole-private.git", "image_type": "service", "service_tier": 3, "slack": "#flyte-eng", "team_email": "flyte-eng@lyft.com", "pagerduty_escalation_policy": "Data Platform Flyte", "languages": ["bash"], "containers": [{"name": "service", "command": "/code/flyteconsole-private/entrypoint.sh"}], "groups": [{"name": "dev", "members": ["control.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "flyteconsole.dev"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], "facets": [{"name": "main", "member": "flyteconsole.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 1, "max_size": 3}}}}], "envoy": {"profile": "python", "settings": {"services": [{"name": "flyteconsole"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}}}}, "version": "a5cc0460a58c9dc2b128e10a7ed465b4238f38b0", "images": [{"parent": {"name": "nodejs", "version": "d322f7fe12bd6236e2642106783c6351fc87d095", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "nodejs", "version": "d322f7fe12bd6236e2642106783c6351fc87d095", "sub_image": null, "external": false}}, "flyteidl": {"name": "flyteidl", "description": "idl for flyte system", "repository": "git@github.com:lyft/flyteidl-private.git", "image_type": "library", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:4c5005ee87990a2804bd73c01bacbc0562aa524f", "sub_image": "precommit"}}]}}, "languages": ["python"], "docs": {"path": "flyteidl/gen/pb-protodoc/"}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "version": "842569c6fd6bc1ef56d8aff8e695af273281cc3f", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4c5005ee87990a2804bd73c01bacbc0562aa524f", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "flyteoperationsworkflows": {"name": "flyteoperationsworkflows", "description": "These workflows are for tasks relating to Flyte operations at Lyft.", "repository": "git@github.com:lyft/flyteoperationsworkflows.git", "slack": "#flyte-eng", "team_email": "flyte-eng@lyft.com", "pagerduty_escalation_policy": "Data Platform Flyte", "image_type": "flyteworkflow", "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "flyteoperationsworkflows.spin"]}], "tests": [{"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "workflow_registration", "type": "execution", "group": "flyteoperationsworkflows.dev", "container": "flyteoperationsworkflows.spin", "command": "make register_for_pr"}, {"name": "mess_around_with_jenkins", "type": "execution", "group": "flyteoperationsworkflows.dev", "container": "flyteoperationsworkflows.spin", "command": "make check_stuff", "autotrigger": false}], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "register_development", "legacy": true, "automatic": true, "role": "data-deploy", "orca": []}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "register_staging", "legacy": true, "automatic": true, "role": "data-deploy", "orca": []}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "register_production", "role": "data-deploy", "automatic": true, "legacy": true, "orca": []}], "credentials": true, "version": "b44f81d974b87f3fe787b3737506b458339cc68a", "images": [{"parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}}, "flyteplayground": {"name": "flyteplayground", "description": "Hello, World for Flyte", "repository": "git@github.com:lyft/flyteplayground.git", "slack": "#flyte-eng", "team_email": "flyte-eng@lyft.com", "pagerduty_escalation_policy": "Data Platform Flyte", "image_type": "flyteworkflow", "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "flyteplayground.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "flyteplayground.dev", "container": "flyteplayground.spin", "command": "make register_for_pr"}], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "version": "0b9db4528ec759f16ae52f5cdd29199243d815ee", "images": [{"parent": {"name": "flytebase", "version": "c72959ac85ee74224bdc9c8f774c5f1790240ba0", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "flytebase", "version": "c72959ac85ee74224bdc9c8f774c5f1790240ba0", "sub_image": null, "external": false}}, "flytepropeller": {"name": "flytepropeller", "description": "Repo for Lyft internal Flyte Propeller", "repository": "git@github.com:lyft/flytepropeller-private.git", "image_type": "service", "slack": "#flyte-eng", "team_email": "flyte-eng@lyft.com", "service_tier": 2, "pagerduty_escalation_policy": "Data Platform Flyte", "languages": ["golang"], "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "flyte"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}, "orca": [{"region": "iad"}], "automatic": true}, [{"name": "production-flytecritical2", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": "flytecritical2"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}, "orca": [{"region": "iad"}]}, {"name": "production-flytecritical", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": "flytecritical"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}, "orca": [{"region": "iad"}]}], [{"name": "production-flyte3", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": "flyte3"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}, "orca": [{"region": "iad"}]}, {"name": "production-flyte2", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": "flyte2"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}, "orca": [{"region": "iad"}]}, {"name": "production-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": "flyte"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}, "orca": [{"region": "iad"}]}]], "logging": {"flytepropeller": {"fields": {"project": "keyword", "domain": "keyword", "wf": "keyword", "task": "keyword", "exec_id": "keyword", "ns": "keyword", "node": "keyword", "lp": "keyword", "routine": "keyword", "src": "keyword", "tasktype": "keyword", "rv_ver": "keyword"}}}, "version": "b077de7954148001713262ea714036ebe21f4b25", "images": [{"parent": {"name": "opsbase", "version": "c17c530bb56bd092a79f652fedb68d1209d98d2c", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "c17c530bb56bd092a79f652fedb68d1209d98d2c", "sub_image": null, "external": false}}, "flyteredis": {"name": "flyteredis", "description": "flyte k8s compatible redis database server", "repository": "git@github.com:lyft/flytecontainers.git:flyteredis", "containers": [{"name": "server", "start_phase": "parallel_storage", "exports": [{"name": "flyteredis", "port": 6379}]}], "groups": [{"name": "dev", "members": ["control.dev", "flyteredis.server"]}], "tests": [{"name": "start", "type": "startup", "group": "flyteredis.dev"}], "deploy": [{"name": "development", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["bash"], "image_type": "tool", "version": "f4e667ca8c0d046880b4dc3b5e796dc0e01c1167", "images": [{"parent": {"name": "imagebase", "version": "66065b43eaa204d94703166fec4eec1ce346e6ef", "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "66065b43eaa204d94703166fec4eec1ce346e6ef", "external": false}}, "flyteresourcemanager": {"name": "flyteresourcemanager", "description": "flyteresourcemanager", "repository": "git@github.com:lyft/flyteresourcemanager.git", "image_type": "service", "languages": ["go"], "credentials": false, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "flyteresourcemanager.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "flyteresourcemanager.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "team_email": "flyte-eng@lyft.com", "pagerduty_escalation_policy": "Data Platform Flyte", "slack": "#flytecrew", "slack_deploy_notification_environments": ["canary", "production"], "deploy": [{"name": "staging", "legacy": true, "automatic": true}, {"name": "canary", "legacy": true}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "flyteresourcemanager"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 900}}}, "external_hosts": {"dynamodb_iad": null}}}}, "service_tier": 3, "version": "6f6042b9f43f37c98070998abd43c1014e4a1a67", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "flytesparkbionicbase": {"name": "flytesparkbionicbase", "description": "base for flyte spark images", "repository": "git@github.com:lyft/flytecontainers.git:flytesparkbionicbase", "slack": "#flyte-eng", "team_email": "flyte-eng@lyft.com", "containers": [{"name": "run", "command": "/bin/true"}], "deploy": [{"name": "development", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false}, {"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false}, {"name": "production", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}], "image_type": "tool", "languages": ["python"], "version": "24aaae4a5e0b3d0c64f15d38f0f34ce096f521f6", "images": [{"parent": {"name": "bionicbase", "version": "1e528f4b38210368cdf8837ac5d8060c4a8fe90b", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "1e528f4b38210368cdf8837ac5d8060c4a8fe90b", "sub_image": null, "external": false}}, "forecastdataingestion": {"name": "forecastdataingestion", "description": "A service to ingest 3rd party data for forecasting", "repository": "git@github.com:lyft/forecastdataingestion.git", "slack": "#forecasting-bots", "team_email": "forecasting-team@lyft.com", "pagerduty_escalation_policy": "Forecasting", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:36518650f40787ad43faa9717259a01880989029", "packages": ["libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/forecastdataingestion", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "localevents", "command": "dumb-init -- service_venv python -m manage pull --name predicthq --interval 60", "workdir": "/code/forecastdataingestion", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "forecastdataingestion.legacy"]}, {"name": "service_group", "members": ["forecastdataingestion.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "forecastdataingestion.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "forecastdataingestion.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}}}}, {"name": "localeventsjob", "member": "forecastdataingestion.localevents", "type": "cron", "schedule": "30 * * * *", "concurrency_policy": "Replace"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "localeventsjob"}]}, {"name": "production", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "localeventsjob"}]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "forecastdataingestion"}], "common_settings": {"internal_hosts": {"regions": null}, "external_hosts": {"dynamodb_iad": null}}}}, "version": "4721ebfe091c27007397a8fe796496c1d0c7ca4e", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "forecastingmodels": {"name": "forecastingmodels", "description": "ML models for Forecasting team", "repository": "git@github.com:lyft/forecasting-models.git", "image_type": "lambda", "slack": "#forecasting-bots", "slack_deploy_notification_environments": ["production", "staging"], "team_email": "forecasting-eng@lyft.com", "pagerduty_escalation_policy": "Forecasting", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/lyftlearnnotebook:a1a8a74d49d77a868e849b542e60421abc2b1c85"}}, {"name": "s2i", "params": {"builder": "lyft/lyftlearnnotebook:python2.a1a8a74d49d77a868e849b542e60421abc2b1c85", "sub_image": "py2notebook"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "containers": [{"name": "dev", "command": "sleep infinity"}], "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "shellcheck", "type": "tool", "tool": "shellcheck.lint"}, {"name": "unit_tests", "type": "jailed", "command": "python -m pytest --cov=models /code/forecasting-models/tests/unit/"}], "deploy": [{"name": "staging", "legacy": false, "automatic": false}, {"name": "production", "legacy": false, "automatic": false}], "languages": ["python"], "version": "7881d671aba6309b4c4d310e941eeec2e35fc278", "images": [{"parent": {"name": "lyftlearnnotebook", "version": "a1a8a74d49d77a868e849b542e60421abc2b1c85", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "lyftlearnnotebook", "version": "a1a8a74d49d77a868e849b542e60421abc2b1c85", "sub_image": "python2", "external": false}, "sub_image": "py2notebook"}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "lyftlearnnotebook", "version": "a1a8a74d49d77a868e849b542e60421abc2b1c85", "sub_image": null, "external": false}}, "forecastingpipelines": {"name": "forecastingpipelines", "description": "TestForecast", "repository": "git@github.com:lyft/forecastingpipelines.git", "slack": "#forecasting-bots", "team_email": "forecasting-team@lyft.com", "pagerduty_escalation_policy": "Forecasting", "image_type": "service", "service_tier": 3, "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "forecastingpipelines.spin"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "forecastingpipelines.dev", "container": "forecastingpipelines.spin", "command": "make register_for_pr"}], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "credentials": true, "version": "6d9b5b754c00258d284bb1fcd10cf87226415926", "images": [{"parent": {"name": "flytesparkbase", "version": "ea8b691fef3dc56fef3b71d3c6c54a28116b1635", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "flytesparkbase", "version": "ea8b691fef3dc56fef3b71d3c6c54a28116b1635", "sub_image": null, "external": false}}, "forecastserver": {"name": "forecastserver", "description": "Compute and serve near-future forecasts of supply and demand", "repository": "git@github.com:lyft/forecastserver.git", "slack": "#forecasting-bots", "team_email": "forecasting-team@lyft.com", "pagerduty_escalation_policy": "Forecasting", "image_type": "service", "service_tier": 1, "languages": ["python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "packages": ["libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py38.c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s", "packages": ["libspatialindex-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "metricpumps", "command": "dumb-init -- service_venv python -m manage metric_pump_worker", "workdir": "/code/forecastserver", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "forecastserver.legacy", "redis.dev"]}, {"name": "service_group", "members": ["forecastserver.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "forecastserver.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "forecastserver.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "forecastserver.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}, {"name": "metricpumps", "member": "forecastserver.metricpumps", "type": "worker", "envoy_service": "forecastserverworker", "autoscaling": {"environment": {"staging": {"min_size": 3, "max_size": 3}, "production": {"min_size": 3, "max_size": 3}}}}, {"name": "metricpumpscanary", "member": "forecastserver.metricpumps", "type": "worker", "canary": true, "envoy_service": "forecastserverworker", "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "metricpumps"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "metricpumpscanary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "metricpumps"}, {"facet": "metricpumpscanary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "forecastserver"}, {"name": "forecastserverworker"}], "common_settings": {"redis_clusters": {"forecastserver": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "version": "d8b62e01f24114904fee7c305adf24f7148b828b", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "py38", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "frontendportal": {"name": "frontendportal", "description": "Frontend Portal", "repository": "git@github.com:lyft/frontendportal.git", "slack": "#frontend-bots", "team_email": "elad@lyft.com", "pagerduty_escalation_policy": "Frontend Portal", "image_type": "service", "service_tier": 3, "languages": ["javascript"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/s2inode:service.835f87582b1b091b3ef8895d577ba3439540abbe", "buildargs": ["ASSET_DIR=.dist/static", "CDN_PATH=_next/static"], "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "cdnupload", "command": "/code/frontendportal/cdn-upload", "sub_image": "k8s"}, {"name": "service", "command": "dumb-init -- npm run prod", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "frontendportal.legacy"]}, {"name": "service_group", "members": ["frontendportal.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "frontendportal.dev"}, {"name": "unit", "type": "jailed", "autotrigger": false, "command": "make test_unit"}], "facets": [{"name": "assets", "member": "frontendportal.cdnupload", "type": "job"}, {"name": "main", "member": "frontendportal.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "bake_time_minutes": 0, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "bake_time_minutes": 0, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "bake_time_minutes": 0, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "frontendportal"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}}}}, "version": "16953e2f6ebf502955fa3f00e62019e232cc9962", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2inode", "version": "835f87582b1b091b3ef8895d577ba3439540abbe", "sub_image": "service", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "funnelanalysis": {"name": "funnelanalysis", "description": "Backend service to pull event sequences and analyze them through funnel vizualizations", "repository": "git@github.com:lyft/funnelanalysis.git", "slack": "#viz-dev", "team_email": "vap-eng@lyft.com", "pagerduty_escalation_policy": "pathfinder-backend", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:1de17b2c133a84a6096806ef9ba985a9ac009b54", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/funnelanalysis", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "superset.dev", "redis.server", "funnelanalysis.legacy"]}, {"name": "service_group", "members": ["funnelanalysis.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "funnelanalysis.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "funnelanalysis.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "funnelanalysis.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "funnelanalysis"}], "common_settings": {"internal_hosts": {"superset": null}}}}, "version": "f492866ee42732ab2b710545725fffe16d7456cc", "images": [{"parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "1de17b2c133a84a6096806ef9ba985a9ac009b54", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}}, "funnelanalysisint": {"name": "funnelanalysisint", "description": "Data visualization frontend for event sequences generated by user actions", "repository": "git@github.com:lyft/funnelanalysisint.git", "slack": "#viz-dev", "team_email": "vap-eng@lyft.com", "pagerduty_escalation_policy": "pathfinder-frontend", "image_type": "service", "service_tier": 3, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "funnelanalysis.dev", "funnelanalysisint.legacy"]}, {"name": "service_group", "members": ["funnelanalysisint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "funnelanalysisint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "funnelanalysisint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null, "funnelanalysis": null}}}}, "version": "fbb9da3b6688d24165229b3b9ff90cafdbd6ba1a", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "gateway": {"name": "gateway", "description": "gateway", "repository": "git@github.com:lyft/ops.git:gateway", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "gateway.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "gateway.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "slack": "#security", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "pagerduty_escalation_policy": "Security", "team_email": "security-engineering@lyft.com", "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}], "automatic": true}, [{"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": true, "orca": [{"region": "iad"}, {"region": "sfo"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}, {"region": "sfo", "iam_role": "orca-admin"}]}]], "audit_blacklist": ["envoyAudit"], "image_type": "service", "service_tier": 2, "languages": ["python"], "version": "59393ac8a7dc3e99fc1a630d87df656e24b3a3a6", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "extersnal": false}}, "gcsdocsync": {"name": "gcsdocsync", "description": "A service for pulling docs from docs.lyft.net and publishing indexes to Google Cloud Search for Lyft Home search", "repository": "git@github.com:lyft/gcsdocsync.git", "slack": "#devx-bot", "team_email": "devx-team@lyft.com", "pagerduty_escalation_policy": "Fedex", "image_type": "service", "service_tier": 3, "languages": ["python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py38.c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn gcsdocsync.wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "gcsdocsync.legacy"]}, {"name": "service_group", "members": ["gcsdocsync.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "gcsdocsync.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "gcsdocsync.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "gcsdocsync.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "gcsdocsync"}]}}, "version": "5fbb11b5890161853e05917eddd594a44e0c728a", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "py38", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "genesisdevicepacker": {"name": "genesisdevicepacker", "description": "Packer phases for genesisdevice", "repository": "git@github.com:lyft/genesis-device.git:packer", "credentials": false, "credentials_legacy": false, "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "containers": [{"name": "run", "workdir": "/code/genesis-device/packer"}], "tests": [{"name": "unit", "type": "jailed", "command": "sh -c \"make validate ACCOUNT_NAME=zimride && make validate ACCOUNT_NAME=lyftk8stest && make validate ACCOUNT_NAME=level5 PACKER_REGION=us-west-2\""}], "deploy": [{"name": "development", "legacy": false}, [{"name": "generate", "legacy": true, "role": "k8s-packer-role"}, {"name": "generate_fedora_kickstart", "legacy": true, "role": "k8s-packer-role"}], {"name": "staging", "legacy": false, "role": "k8s-packer-role"}, {"name": "production", "legacy": false, "role": "k8s-packer-role"}], "image_type": "tool", "version": "0d106f799defba03357395e24e0cc219d129c6b8", "images": [{"parent": {"name": "imagebase", "version": "876dbc1b4548b1b19a192303633555cafa7f9e08", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "876dbc1b4548b1b19a192303633555cafa7f9e08", "sub_image": null, "external": false}}, "genesisdeviceterraform": {"name": "genesisdeviceterraform", "description": "Terraform phases for genesisdevice", "repository": "git@github.com:lyft/genesis-device.git:form", "credentials": false, "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "containers": [{"name": "run", "workdir": "/code/genesis-device/form"}], "tests": [{"name": "unit", "type": "jailed", "command": "make validate"}, {"name": "fmt", "type": "jailed", "command": "make check_fmt"}], "image_type": "tool", "deploy": [{"name": "development", "legacy": false}, [{"name": "plan_phase1", "legacy": true, "role": "terraform-production-iad-image"}], [{"name": "apply_phase1", "legacy": true, "role": "terraform-production-iad-image"}], [{"name": "plan_phase2", "legacy": true, "role": "terraform-production-iad-image"}], [{"name": "apply_phase2", "legacy": true, "role": "terraform-production-iad-image"}], [{"name": "plan_phase3", "legacy": true, "role": "terraform-production-iad-image"}], [{"name": "apply_phase3", "legacy": true, "role": "terraform-production-iad-image"}], [{"name": "plan_phase4", "legacy": true, "role": "terraform-production-iad-image"}], [{"name": "apply_phase4", "legacy": true, "role": "terraform-production-iad-image"}], [{"name": "plan_phase5", "legacy": true, "role": "terraform-production-iad-image"}], [{"name": "apply_phase5", "legacy": true, "role": "terraform-production-iad-image"}], [{"name": "plan_phase6", "legacy": true, "role": "terraform-production-iad-image"}], [{"name": "apply_phase6", "legacy": true, "role": "terraform-production-iad-image"}], {"name": "production", "legacy": false}], "version": "148f2f9a1fc59ab16f1821cef278bfe62678ba06", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "geofencereporter": {"name": "geofencereporter", "description": "Track and report rides within specific geofences for compliance purposes", "repository": "git@github.com:lyft/geofencereporter.git", "image_type": "service", "languages": ["python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn application:app --workers=2 -k gevent --worker-connections=1000 -c /etc/gunicorn/gunicorn.conf", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "kclworker", "command": "dumb-init -- /code/kcl/kcl-worker.sh", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}, "readiness_probe": {"exec_probe": {"command": ["kcl_worker_readiness_check"]}, "period_seconds": 60, "initial_delay_seconds": 30}}], "groups": [{"name": "dev", "members": ["control.dev", "lyftidl.server", "dynamodb.server", "redis.dev", "users.dev", "geofencereporter.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "geofencereporter.dev"}, {"name": "unit", "type": "execution", "group": "geofencereporter.dev", "container": "geofencereporter.legacy", "command": "make test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#venues", "team_email": "venues-eng@lyft.com", "pagerduty_escalation_policy": "Airports and Venues", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "geofencereporter"}, {"name": "geofencereporterkcl"}], "common_settings": {"redis": {"geofencereportermultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}}, "override_settings": [{"services": [{"name": "geofencereporter"}], "settings": {"internal_hosts": {"supply": null, "users": null, "locations": null, "rides": null, "routes": null, "routesapi": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}}}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s", "packages": ["openjdk-8-jre-headless", "liblog4j1.2-java"]}}]}}, "logging": {"geofencereporter": {"fields": {"event": {"tnc_id": "long", "license_plate": "keyword", "timestamp": "date", "lat": "float", "ride_id": "keyword", "ride_count": "long", "txn_type": "keyword", "lon": "float", "uid": "keyword", "geofence_id": "keyword", "model_year": "long", "party_count": "long"}, "territory": "keyword", "url": "keyword", "response": "keyword", "name": "keyword", "lock_timeout_secs": "long", "error": "keyword", "auth": "keyword", "run_ts_secs": "float", "attempt_num": "long", "failed_record_count": "long", "grpc_error": "keyword", "driver_ids": "keyword"}}}, "version": "e870e18f7309aa7ff3461b830949baf126b8cdee", "images": [{"parent": {"name": "opsbase", "version": "ce84eccb6431b0bcb1d7cc365ed8b131f35a748c", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "ce84eccb6431b0bcb1d7cc365ed8b131f35a748c", "sub_image": null, "external": false}}, "georegions": {"name": "georegions", "description": "georegions", "repository": "git@github.com:lyft/georegions.git", "pagerduty_escalation_policy": "Streaming-PubSub", "slack": "#streaming-pubsub", "team_email": "streaming-pubsub@lyft.com", "slack_deploy_notification_environments": ["canary", "production"], "service_tier": 3, "image_type": "service", "languages": ["go"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "lyftidl.server", "regions.dev", "georegions.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "georegions.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "georegions"}], "common_settings": {"internal_hosts": {"regions": null}}}}, "version": "8ba0b04c945a83463322554ed65d12c2f1d0a9b8", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "gg": {"name": "gg", "description": "Expose startable group metadata for manual testing in onebox / qa environments. `control ensure gg.qa`.", "repository": "git@github.com:lyft/controlgroups.git", "image_type": "tool", "slack": "#devx-bots", "team_email": "qa-team@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a"}}]}}, "tests": [{"name": "lint", "type": "jailed", "command": "pre-commit run --all-files --show-diff-on-failure"}], "groups": [{"name": "qa", "members": ["abacus.dev", "acceptancerate.dev", "accidents.dev", "account.dev", "accountfrontend.dev", "analyticsingest.dev", "ats.qa_approve", "auth.dev", "autonomous.dev", "badcompanions.dev", "cancels.dev", "compliance.dev", "control.dev", "coupons.dev", "courier.dev", "custodian.dev", "declientapi.dev", "demand.dev", "dispatch.dev", "driverearnings.dev", "driverheatmaps.dev", "drivermode.dev", "drivermonitor.dev", "drivingintervals.dev", "enterprise.dev", "etaproxy.dev", "fanner.dev", "fare.dev", "fleetmanagement.dev", "mongodb.viewer", "godfather.dev", "green.dev", "groundcontrol.dev", "grow.dev", "guardian.dev", "help.legacy", "images.dev", "imgworker.dev", "jobscheduler.dev", "karma.dev", "lastmile.dev", "ledger.dev", "legacyapi.dev", "legacyridescheduler.dev", "legacyridetypes.dev", "locations.dev", "mailer.dev", "matching.dev", "matchingexecution.dev", "matchingsolver.dev", "matchingstate.dev", "messaging.dev", "modes.dev", "mongodb.dev", "offerings.service", "offeringsapi.dev", "paymentgateway.dev", "passengerxpapi.dev", "payapi.dev", "places.dev", "postgresql.dev", "predispatchjobs.dev", "priceoptimizer.dev", "pricing.dev", "pusher.dev", "publicapi.dev", "ratecards.dev", "ratings.dev", "regions.dev", "rideexpensing.dev", "ridehistory.dev", "ridelocations.legacy", "rides.dev", "ridesapi.dev", "ridescheduler.dev", "ridetimeestimator.dev", "ridexppredictor.dev", "roads.dev", "routes.dev", "routesapi.dev", "suggesteddestinations.dev", "supply.dev", "switchboard.dev", "tcs.dev", "tcsint.dev", "tom.dev", "trips.dev", "tripsapi.dev", "txnhub.dev", "userpreferences.dev", "users.dev", "venues.dev", "viewport.dev", "wallet.dev", "walletapi.dev", "www2.dev"]}, {"name": "web", "members": ["www2.site", "acceptancerate.dev", "accountfrontend.integration", "acquisitionguarantees.dev", "adtechworkflows.dev", "ats.dev", "auth.dev", "dborchestrator.legacy", "dispatch.dev", "enterprise.dev", "enterprisefrontend.dev", "expressdrivefe.dev", "etaproxy.dev", "fare.dev", "godfather.dev", "jobscheduler.dev", "karma.dev", "ledger.dev", "mailer.dev", "pricing.dev", "publicapi.dev", "regions.dev", "ridescheduler.dev", "ridelocations.dev", "robocop.dev", "streets.dev", "supply.dev", "switchboard.dev", "tcs.dev", "usergroups.dev", "users.dev", "usereligibilities.dev", "venues.dev", "viewport.dev", "wwwbrochurefe.dev", "wwwcommsplatformfe.legacy", "wwwdriverengagementfe.legacy", "wwwdriveronboardingfe.legacy", "wwwdriverxpfe.legacy", "wwwenterprisefe.legacy", "wwwexpressdrivefe.legacy", "wwwidentityfe.legacy", "wwwpayxpfe.legacy", "wwwratecardfe.legacy", "wwwreferralsfe.legacy", "wwwsupportxpfe.legacy"]}, {"name": "frontendqa", "members": ["gg.qa", "wwwbrochurefe.legacy", "wwwcommsplatformfe.legacy", "wwwdriverengagementfe.legacy", "wwwdriveronboardingfe.legacy", "wwwdriverxpfe.legacy", "wwwenterprisefe.legacy", "wwwexpressdrivefe.legacy", "wwwidentityfe.legacy", "wwwpayxpfe.legacy", "wwwratecardfe.legacy", "wwwreferralsfe.legacy", "wwwsupportxpfe.legacy"]}, {"name": "dxp", "members": ["gg.qa", "driverloyalty.dev", "drivernotification.dev", "driverprompts.dev", "localevents.dev", "localeventsint.dev"]}, {"name": "entsim", "members": ["gg.qa", "simulatedrides.dev", "enterprisedispatch.dev", "helium.dev", "kibana.dev", "statsd.dev", "ridemonitor.dev", "dynamodb.viewer", "mongodb.viewer", "legacyoauth.dev", "platformfeecalculator.integration"]}, {"name": "enterpriserider", "members": ["gg.qa", "enterprise.riderintegration"]}, {"name": "expressdrive", "members": ["gg.qa", "gg.frontendqa", "rentals.dev", "tom.dev", "brochure.legacy", "driverfrontend.legacy", "expressdrivefe.legacy", "expressdrivefeapi.legacy", "expressdriveint.legacy", "wwwexpressdrivefe.legacy", "fleetmanagement.legacy", "fleetmanagerint.legacy", "fleetlocations.legacy", "kibana.dev", "offlinemileagetracker.legacy", "onboardingflow.legacy"]}, {"name": "incentives", "members": ["gg.qa", "incentiveguarantees.dev", "ridechallenges.dev", "ridestreaks.dev", "driverridesinfo.dev", "incentivesint.dev"]}, {"name": "triforce", "members": ["gg.qa", "supportcontact.integration", "help.integration", "supportplatformint.dev", "chat.dev"]}, {"name": "claims", "members": ["gg.qa", "accidents.integration", "accidentsint.dev", "claims.dev", "groundcontrol.dev", "help.integration", "riskonnectproxy.dev"]}, {"name": "earningsxp", "members": ["gg.expressdrive", "driverfrontend.dev", "coupons.legacy", "godfather.legacy", "help.integration", "www2.legacy", "wwwdriveronboardingfe.legacy", "driverfrontend.integration"]}, {"name": "pickupxp", "members": ["gg.qa", "suggesteddestinations.dev", "pickupoptimizer.dev", "pickupcomms.dev", "passengerqueues.dev"]}, {"name": "couponsfe", "members": ["simulatedrides.qa", "fixedroutes.dev", "coupons.dev", "appboy.dev", "paxgrowthinternal.dev", "messaging.dev", "messagingint.dev", "locations.dev", "tom.dev", "dispatch.dev", "pricing.dev", "ats.dev", "ledger.dev", "green.dev", "enterprise.dev", "venues.dev", "tcs.dev", "couponsfrontend.dev"]}, {"name": "walking", "members": ["gg.qa", "pickupoptimizer.qa"]}, {"name": "lbsmodeselector", "members": ["gg.qa", "rideablerouting.integration", "rideableavailability.dev", "routeplanner.integration", "riderperks.integration"]}, {"name": "webhook_integration", "members": ["gg.qa", "account.integration", "tom.integration", "developerportal.dev", "www2.site", "telegraph.legacy", "enterprisedispatch.legacy", "loyaltypartnerships.legacy", "wwwidentityfe.dev", "enterpriseapiprovisioning.legacy"]}, {"name": "memberships", "members": ["gg.qa", "ridepasses.dev", "riderperks.dev", "ridepassesfe.dev", "couponsfrontend.dev", "paxgrowthinternal.dev", "dynamodb.viewer"]}, {"name": "driverpositioning", "members": ["gg.qa", "flexppz.dev", "ppzconfig.dev", "supplycontroller.dev"]}, {"name": "driveronboarding", "members": ["gg.qa", "gg.frontendqa", "wwwdriveronboardingfe.integration", "onboardingflow.legacy", "driveronboardingint.legacy", "supplypartners.integration", "kibana.dev"]}], "deploy": [{"name": "staging", "legacy": false, "automatic": true}, {"name": "production", "legacy": false, "automatic": true}], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "version": "848951ee35237847aa1ca860f3587b4c11bd6c9a", "images": [{"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}}, "ghemonitoring": {"name": "ghemonitoring", "description": "Observability for GitHub Enterprise", "repository": "git@github.com:lyft/containers.git:ghemonitoring", "team_email": "automation-team@lyft.com", "slack": "#source-control-bots", "pagerduty_escalation_policy": "GitHub Enterprise", "image_type": "service", "service_tier": 3, "containers": [{"name": "stats", "command": "/bin/bash"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "groups": [{"name": "dev", "members": ["ghemonitoring.stats"]}], "tests": [{"name": "terraform-checkformat", "type": "tool", "tool": "terraform.checkformat"}, {"name": "terraform-validate", "type": "tool", "tool": "terraform.validate"}], "orchestrate": {"types": [{"name": "terraform"}], "steps": [{"name": "staging"}, {"name": "production"}]}, "languages": ["python"], "version": "0f763620a12c0d98ffe58d69ee87b2ffecd9b906", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "gherepositories": {"name": "gherepositories", "description": "Track the source of truth for whether a repository has been migrated to GitHub Enterprise", "repository": "git@github.com:lyft/gherepositories.git", "slack": "#source-control-bots", "team_email": "source-control@lyft.com", "pagerduty_escalation_policy": "GitHub Enterprise", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/gherepositories", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "gherepositories.legacy", "redis.dev"]}, {"name": "service_group", "members": ["gherepositories.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "gherepositories.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "gherepositories.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "gherepositories.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true, "kubernetes": {"enabled": false}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true, "kubernetes": {"enabled": false}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": true, "kubernetes": {"enabled": false}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "kubernetes": {"enabled": false}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true, "kubernetes": {"enabled": false}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "gherepositories"}], "common_settings": {"redis_clusters": {"gherepositories": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "version": "dea7f15a40e7b8a8ff0b409f93910685993a806a", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "ghostmatching": {"name": "ghostmatching", "description": "ghostmatching", "repository": "git@github.com:lyft/ghostmatching.git", "slack": "#dispatch-bots", "slack_deploy_notification_environments": ["staging", "canary", "production"], "image_type": "service", "languages": ["go"], "pagerduty_escalation_policy": "Dispatch", "team_email": "optimal-dispatch@lyft.com", "service_tier": 1, "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- ghostmatching", "sub_image": "k8s", "limits": {"cpu": 16, "memory": "16Gi"}, "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}}], "facets": [{"name": "main", "member": "ghostmatching.service", "type": "service", "envoy_service": "ghostmatching", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 5}, "production": {"min_size": 3, "max_size": 200}}}}, {"name": "canary", "member": "ghostmatching.service", "type": "service", "envoy_service": "ghostmatching", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "watchermain", "member": "ghostmatching.service", "type": "service", "envoy_service": "ghostmatchingwatcher", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 5}, "production": {"min_size": 3, "max_size": 50}}}}, {"name": "watchercanary", "member": "ghostmatching.service", "type": "service", "envoy_service": "ghostmatchingwatcher", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "redis.dev", "regions.dev", "ghostmatching.legacy"]}, {"name": "integration", "members": ["ghostmatching.dev"]}], "pulldeploy_components": {"data": ["marketplaceconfig", "regioncfgdata"]}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "startup", "type": "startup", "group": "ghostmatching.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "ghostmatching.integration", "container": "ghostmatching.legacy", "command": "make integration"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "targets": [{"facet": "main"}, {"facet": "watchermain"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "links": [{"text": "Runbook", "url": "https://github.com/lyft/ghostmatching/tree/master/docs/runbook.md"}]}, {"name": "canary", "legacy": true, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "bake_time_minutes": 15, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}], "envoy": {"profile": "go", "settings": {"services": [{"name": "ghostmatching"}, {"name": "ghostmatchingwatcher"}], "common_settings": {"redis": {"ghostmatchingmultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}, "ghostmatchingblobmultiredis": {"port": 6381, "op_timeout_ms": 1000, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}, "authorization": {"permissions": {"read": {"paths": ["/pb.lyft.ghostmatching.MarketplaceState/Get*"]}, "update": {"paths": ["/pb.lyft.ghostmatching.MarketplaceState/Update*"]}, "ghostmatching": {"paths": ["/pb.lyft.ghostmatching.GhostMatching/PotentialDispatches"]}, "sharedrideefficiency": {"paths": ["/pb.lyft.ghostmatching.GhostMatching/SharedRideEfficiency"]}, "watcher": {"paths": ["/pb.lyft.ghostmatching.GhostMatchingWatcher/Evaluate"]}}, "bindings": {"matching": ["update"], "matchingsimulated": ["update"], "matchingsmall": ["update"], "graphql": ["read"], "supplycontroller": ["read"], "supplycontrollerworker": ["read"], "cancels": ["ghostmatching"], "dispatch": ["ghostmatching"], "dispatchforesight": ["ghostmatching"], "dispatchgeofenceworkers": ["ghostmatching"], "offerings": ["ghostmatching", "sharedrideefficiency"], "pricingworker": ["read"], "pricingworkergpu": ["read"], "pricing": ["read"], "devptmodelexectaskmanager": ["read"], "ptmodelexectaskmanager": ["read"], "devptmodelexecutor": ["read"], "devptmodelexec": ["read"], "ptmodelexecutor": ["read"], "envoy": ["watcher"]}}, "internal_hosts": {"regions": null, "rides": null, "compliance": null, "courier": null, "dispatchcompliance": null, "dsfeatures": null, "etaproxy": null, "eventingest": null, "modelexecsharedrides": null, "modelmetrics": null, "modelproxy": null, "tcs": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "local_service": {"grpc_streaming": true}}}}, "docs": {"godoc_packages": ["github.com/lyft/ghostmatching", "github.com/lyft/ghostmatching/cli", "github.com/lyft/ghostmatching/clients", "github.com/lyft/ghostmatching/clients/regioncfg", "github.com/lyft/ghostmatching/config", "github.com/lyft/ghostmatching/flow", "github.com/lyft/ghostmatching/lib/activepartitions", "github.com/lyft/ghostmatching/lib/foreigninterfaces/adapter", "github.com/lyft/ghostmatching/lib/insights", "github.com/lyft/ghostmatching/lib/loader", "github.com/lyft/ghostmatching/lib/recordrepo", "github.com/lyft/ghostmatching/lib/recordrepo/constructor", "github.com/lyft/ghostmatching/lib/responsecache", "github.com/lyft/ghostmatching/lib/transform", "github.com/lyft/ghostmatching/lib/updater", "github.com/lyft/ghostmatching/lib/validate", "github.com/lyft/ghostmatching/models", "github.com/lyft/ghostmatching/repositories/dynamodb/marketplacestate", "github.com/lyft/ghostmatching/repositories/dynamodb/marketplacestatesummary", "github.com/lyft/ghostmatching/repositories/redis/potentialdispatches", "github.com/lyft/ghostmatching/repositories/redis/recordredis", "github.com/lyft/ghostmatching/services/ghostmatching", "github.com/lyft/ghostmatching/services/ghostmatching/config", "github.com/lyft/ghostmatching/services/ghostmatching/grpc/handlers", "github.com/lyft/ghostmatching/services/ghostmatchingwatcher", "github.com/lyft/ghostmatching/services/ghostmatchingwatcher/config", "github.com/lyft/ghostmatching/services/ghostmatchingwatcher/grpc/handlers", "github.com/lyft/ghostmatching/services/marketplacestate", "github.com/lyft/ghostmatching/services/marketplacestate/config", "github.com/lyft/ghostmatching/services/marketplacestate/grpc/handlers", "github.com/lyft/ghostmatching/testing/regionsdata"]}, "logging": {"ghostmatching": {"fields": {"sub_region": "keyword", "partition": "keyword", "conversion_prob": "float", "conversion_floor": "float", "cycle_id": "long", "key": "keyword", "requestId": "keyword", "supply_id": "keyword", "err": "keyword", "job_id": "long", "matching_context_status": "keyword", "elapsed_time": "keyword", "batch_retry_timeout": "keyword", "request": "keyword", "response": "keyword", "downstream_cluster": "keyword", "max_batch_window_duration": "long", "end_batch_window_timestamp": "keyword", "default_batch_window_duration": "long", "service": "keyword", "region_code": "keyword", "error": "keyword", "endpoint": "keyword", "lyft_user_id": "keyword", "code": "keyword", "request_id": "keyword", "failure_domain": "keyword", "passenger_id": "keyword", "profile_path": "keyword", "region": "keyword", "invalid_ratio": "float", "threshold": "float", "job": "keyword", "errVerbose": "keyword", "model_descriptor": "keyword", "waypoint_id": "long", "method": "keyword", "path": "keyword", "host": "keyword", "latitude_e6": "long", "longitude_e6": "long", "dataDeployPath": "keyword", "attempt_num": "long", "failed_record_count": "long", "mapId": "long", "refreshPeriod": "long", "maps": "keyword", "prevRevision": "long", "newRevision": "keyword", "signal": "keyword", "latestRevision": "long", "lastModified": "float", "errorVerbose": "keyword", "id_type": "keyword", "id": "long"}}}, "version": "e8348a17203e581cb8d394dd10a879590d441c80", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "githubenterprise": {"name": "githubenterprise", "description": "Helper image for setting up Github Enterprise", "repository": "git@github.com:lyft/containers.git:githubenterprise", "image_type": "tool", "credentials": true, "credentials_legacy": false, "slack": "#source-control-bots", "team_email": "automation-team@lyft.com", "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "doctoc", "command": "doctoc docs/ README.md"}, {"name": "consolidatelogs", "command": "python3.6 -m scripts.logging.consolidate_container_logs", "mounts": ["/var/log/containers/"]}, {"name": "gitbackup", "note": "Host network is needed to access the statsd sidecar in production.", "network": "host", "command": "python3.6 -m src.git_backup.backup_git", "mounts": ["/var/lib/backup-utils"]}, {"name": "gitreplicate", "note": "Host network is needed to access the statsd sidecar in production.", "network": "host", "command": "python3.6 -m src.git_replicate.replicate_git --config=./scripts/github_replicate/conf/conf.yaml", "mounts": ["/var/lib/backup-utils"]}, {"name": "gitbackupdevbox", "note": "Host network breaks Confidant in devbox.", "command": "python3.6 -m src.git_backup.backup_git", "mounts": ["/var/lib/backup-utils"]}, {"name": "scheduledbackup", "network": "host", "command": "env SCHEDULED_HOUR='8,12,16,0' ./scripts/scheduledbackup.sh", "mounts": ["/var/lib/backup-utils"]}, {"name": "scheduledreplicate", "network": "host", "command": "env SCHEDULED_HOUR='10' ./scripts/github_replicate/scheduledreplicate.sh", "mounts": ["/var/lib/backup-utils"]}, {"name": "fullbackup", "network": "host", "command": "python3.6 -m src.backup_utils.backup_full", "mounts": ["/var/lib/backup-utils"]}, {"name": "fullbackupdevbox", "command": "python3.6 -m src.backup_utils.backup_full", "mounts": ["/var/lib/backup-utils"]}, {"name": "gitrestore", "command": "python3.6 -m src.instance_management.restore", "mounts": ["/var/lib/backup-utils"]}, {"name": "gitrestoredevbox", "command": "python3.6 -m src.instance_management.restore", "mounts": ["/var/lib/backup-utils"]}, {"name": "gitconfigurereplica", "command": "python3.6 -m src.instance_management.configure_replica", "mounts": ["/var/lib/backup-utils"]}, {"name": "gitfailover", "command": "python3.6 -m src.instance_management.failover", "mounts": ["/var/lib/backup-utils", "/var/run/docker_sockets", "/srv/control"]}, {"name": "gitpatchupgrade", "command": "python3.6 -m src.instance_management.patch_upgrade", "mounts": ["/var/lib/backup-utils"]}, {"name": "gittestbackup", "command": "python3.6 -m src.backup_utils.test_backup", "mounts": ["/var/lib/backup-utils"]}, {"name": "gitbatchimport", "command": "python3.6 -m src.migration.batch_import", "mounts": ["/var/lib/backup-utils"]}, {"name": "gitbatchimport2", "command": "python3.6 -m src.migration.batch_import", "mounts": ["/var/lib/backup-utils"]}, {"name": "gituploadsupportbundle", "command": "python3.6 -m src.instance_management.upload_support_bundle"}, {"name": "gitversions", "command": "python3.6 -m src.instance_management.get_versions"}, {"name": "oktamappings", "network": "host", "command": "python3.6 -m src.migration.generate_updated_okta_mappings", "mounts": ["/var/lib/backup-utils"]}, {"name": "gitimportrepos", "command": "python3.6 -m src.migration.import_repos"}, {"name": "gitimportrepos2", "command": "python3.6 -m src.migration.import_repos"}, {"name": "gitvalidate", "command": "python3.6 -m src.validation.run_validator"}, {"name": "instancefixes", "command": "python3.6 -m src.instance_management.fixes"}, {"name": "fab", "command": "fab"}], "groups": [{"name": "worker", "members": ["dnsmasq.server", "metadataproxy.server", "runtime.run", "statsd.agent", "onebox.cleancron", "githubenterprise.consolidatelogs", "githubenterprise.scheduledbackup", "githubenterprise.scheduledreplicate"]}, {"name": "tester", "members": ["dnsmasq.server", "metadataproxy.server", "runtime.run", "statsd.agent", "onebox.cleancron", "githubenterprise.consolidatelogs"]}, {"name": "restore", "members": ["dnsmasq.server", "metadataproxy.server", "githubenterprise.gitrestore"]}, {"name": "replica", "members": ["dnsmasq.server", "metadataproxy.server", "githubenterprise.gitconfigurereplica"]}, {"name": "failover", "members": ["dnsmasq.server", "metadataproxy.server", "githubenterprise.gitfailover"]}, {"name": "patchupgrade", "members": ["dnsmasq.server", "metadataproxy.server", "githubenterprise.gitpatchupgrade"]}, {"name": "testbackup", "members": ["dnsmasq.server", "metadataproxy.server", "githubenterprise.gittestbackup"]}, {"name": "batchimport", "members": ["dnsmasq.server", "metadataproxy.server", "githubenterprise.gitbatchimport"]}, {"name": "batchimport2", "members": ["dnsmasq.server", "metadataproxy.server", "githubenterprise.gitbatchimport2"]}, {"name": "uploadsupportbundle", "members": ["dnsmasq.server", "metadataproxy.server", "githubenterprise.gituploadsupportbundle"]}, {"name": "versions", "members": ["dnsmasq.server", "metadataproxy.server", "githubenterprise.gitversions"]}, {"name": "importrepos", "members": ["dnsmasq.server", "metadataproxy.server", "githubenterprise.gitimportrepos"]}, {"name": "importrepos2", "members": ["dnsmasq.server", "metadataproxy.server", "githubenterprise.gitimportrepos2"]}, {"name": "validate", "members": ["dnsmasq.server", "metadataproxy.server", "githubenterprise.gitvalidate"]}, {"name": "applyinstancefixes", "members": ["dnsmasq.server", "metadataproxy.server", "githubenterprise.instancefixes"]}], "pagerduty_escalation_policy": "GitHub Enterprise", "python": {"mypy": {"python_versions": ["3.6"], "exclude": ["tests/"]}}, "languages": ["python"], "tests": [{"name": "lint", "type": "jailed", "command": "flake8"}, {"name": "unit", "type": "jailed", "framework": "pytest", "virtualenv": "env"}, {"name": "terraform-checkformat", "type": "tool", "tool": "terraform.checkformat"}, {"name": "terraform-validate", "type": "tool", "tool": "terraform.validate"}, {"name": "shellcheck", "type": "tool", "tool": "shellcheck.lint"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad", "iam_role": "orca-admin"}], "automatic": false}, {"name": "production", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad", "iam_role": "orca-admin"}], "automatic": false}], "orchestrate": {"types": [{"name": "terraform"}], "steps": [{"name": "setup"}, {"name": "staging"}, {"name": "production"}]}, "version": "680d56a65d290f2a70493e0417f2075a86f03337", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "gitutils": {"name": "gitutils", "description": "git automation and tooling", "repository": "git@github.com:lyft/containers.git:gitutils", "slack": "#devx-bots", "team_email": "devx-team@lyft.com", "credentials": true, "credentials_legacy": false, "containers": [{"name": "run", "command": "/code/containers/gitutils/cli.py"}, {"name": "githubmerger", "command": "/code/containers/gitutils/github_merger.py"}], "groups": [{"name": "dev", "members": ["dnsmasq.server", "metadataproxy.server", "gitutils.run"]}], "tests": [{"name": "unit", "type": "jailed", "command": "python3 -m pytest -vvv tests/unit/"}], "python": {"mypy": {"python_versions": ["3.6"]}}, "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}]}], "languages": ["python"], "image_type": "tool", "version": "98d97e276368aa6ae5268ccbfb1a7030e82aecfd", "images": [{"parent": {"name": "bionicbase", "version": "9a86975acf01211bfaf71e5994aab112b8799c69", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "9a86975acf01211bfaf71e5994aab112b8799c69", "sub_image": null, "external": false}}, "gmapsmobile": {"name": "gmapsmobile", "description": "Lyft integration with Google Maps for Mobile", "repository": "git@github.com:lyft/gmapsmobile.git", "credentials": true, "pagerduty_escalation_policy": "Rider Incentives", "team_email": "rider-incentives-eng@lyft.com", "slack": "#rider-incentives-dev", "slack_deploy_notification_environments": ["staging", "canary", "production"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "dynamodb.dev", "gmapsmobile.legacy"]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "gmapsmobile"}, {"name": "gmapsmobilefeed"}, {"name": "gmapsmobiletolls"}], "common_settings": {"internal_hosts": {"coupons": null, "dispatch": null, "gmapsmobile": null, "jobschedulerbulkweb": null, "legacyridetypes": null, "publicapi": null, "ratelimit": null, "regions": null, "taskqueuebulkweb": null, "tolls": null, "fare": null, "places": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "redis": {"gmapsmobilemultiredis": {"port": 6380}}}}}, "tests": [{"name": "startup", "type": "startup", "group": "gmapsmobile.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "gmapsmobile.dev", "container": "gmapsmobile.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "pulldeploy_components": {"data": ["regioncfgdata"]}, "languages": ["bash", "java", "python"], "image_type": "service", "service_tier": 2, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"gmapsmobiletolls": {"fields": {"entryTollPoint": {"pointType": "keyword", "geoFences": "keyword", "name": "keyword", "id": "keyword", "group": "keyword"}, "defaultCost": {"amountCurrency": "keyword", "amount": "long"}, "tollType": "keyword", "isActive": "boolean", "exitTollPoint": {"id": "keyword", "group": "keyword", "geoFences": "keyword", "name": "keyword", "pointType": "keyword"}, "name": "keyword", "timeZone": "keyword", "id": "keyword", "chargeReturnToll": "boolean", "s3-bucket": "keyword", "records": "long", "file-path": "keyword"}}, "gmapsmobile": {"fields": {"lng": "float", "status": "long", "s2_cell_level": "long", "endpoint": "keyword", "region": "keyword", "lat": "float", "s2": "keyword", "error": "keyword", "status_code": "keyword", "ride_type": "keyword", "primetime": "long", "event": "keyword", "message": "keyword", "eta_params": {"eta": "long", "num_drivers": {"14": "long", "13": "long", "12": "long", "11": "long"}}}}, "gmapsmobilefeed": {"fields": {"region": "keyword", "num_cells_removed": "long", "ride_type": "keyword", "dispatch_drivers_found": "long", "primetimes_missing": "long", "child_drivers_set": "long", "eta_unavailable_cells": "long", "primetimes_skipped": "long", "cell_count": "long", "etas_missing": "long", "etas_found": "long", "parent_drivers_set": "long", "etas_skipped": "long", "primetimes_found": "long", "s2": "keyword", "age_seconds": "long", "feed_id": "keyword", "elapsed_ms": "long", "filename": "keyword", "region_count": "long", "size_in_bytes": "long"}}}, "version": "bf2a8d64cdf98358697e6ecdbd382223fdf6e05b", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "go": {"name": "go", "description": "base image for go images", "repository": "git@github.com:lyft/containers.git:go", "slack": "#devx-bots", "team_email": "devx-team@lyft.com", "image_type": "tool", "credentials": true, "containers": [{"name": "glideup", "command": "/go/src/github.com/lyft/containers/go/glideup.sh", "mounts": ["/var/run/docker_sockets", "/var/cache/glide", "/srv/control"]}], "languages": ["go"], "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}]}], "version": "9e08196caf898380224ddf2746c121081d587b92", "images": [{"parent": {"name": "bionicbase", "version": "31d726718508f714ba995b5d2439c97d48dd2be2", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "31d726718508f714ba995b5d2439c97d48dd2be2", "sub_image": null, "external": false}}, "godfather": {"name": "godfather", "description": "godfather", "repository": "git@github.com:lyft/godfather.git", "containers": [{"name": "legacy", "start_time": 20, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "mongodb.server", "redis.dev", "godfather.legacy", "mailer.dev"]}, {"name": "integration", "members": ["control.dev", "mongodb.server", "godfather.legacy", "mailer.dev"]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "notification_overrides": {"deploy": {"slack": "#acq-incentives-bot", "environments": ["production", "canary", "staging"]}, "deploy_failure": {"slack": "#acq-incentives-bot"}, "test_failure": {"slack": "#acq-incentives-bot", "email": "acq-incentives-referrals@lyft.com", "environments": ["production"]}, "master_failure": {"slack": "#acq-incentives-bot"}, "pr_merge": {"slack": "#acq-incentives-bot"}, "pr_open": {"slack": "#acq-incentives-bot"}}, "tests": [{"name": "startup", "type": "startup", "group": "godfather.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "sharded", "group": "godfather.dev", "container": "godfather.legacy", "target": "tests/integration", "virtualenv": "service_venv", "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#acq-incentives", "team_email": "referrals-team@lyft.com", "pagerduty_escalation_policy": "Referrals Team", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, [{"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "languages": ["python"], "image_type": "service", "service_tier": 1, "envoy": {"profile": "python", "settings": {"services": [{"name": "godfather"}], "common_settings": {"external_hosts": {"kinesis_iad": null, "firehose_iad": null}, "internal_hosts": {"jobschedulerbulkweb": null, "jobschedulernormalweb": null, "mailer": null, "regions": null, "regionsadmin": null, "tcs": null}, "redis": {"godfathermultiredis": {"port": 6380}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "logging": {"godfather": {"fields": {"data": {"to": "keyword", "from": "keyword", "subject": "keyword", "body": "keyword"}}}}, "version": "0d09f096bda0d26c95956416ad1176294f965431", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "gokafkabenchmark": {"name": "gokafkabenchmark", "description": "gokafkabenchmark", "repository": "git@github.com:lyft/gokafkabenchmark.git", "image_type": "service", "languages": ["go"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "gokafkabenchmark.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "gokafkabenchmark.dev"}, {"name": "unit", "type": "jailed", "group": "gokafkabenchmark.dev", "container": "gokafkabenchmark.legacy", "command": "make test_unit"}], "slack": "#streaming-pubsub", "slack_deploy_notification_environments": ["canary", "production"], "pagerduty_escalation_policy": "Streaming", "team_email": "streaming-pubsub@lyft.com", "deploy": [{"name": "development", "legacy": true}, {"name": "staging", "legacy": true, "automatic": true}, {"name": "canary", "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "gokafkabenchmark"}]}}, "version": "e47cda9d5bd3bad506dafaf753f5c877935da4f6", "images": [{"parent": {"name": "opsbase", "version": "18643d2254ee65a9c9e6815d3e6c65fe415d9ccc", "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "18643d2254ee65a9c9e6815d3e6c65fe415d9ccc", "external": false}}, "gologtester": {"name": "gologtester", "repository": "git@github.com:lyft/gologtester.git", "description": "GO Log tester new Logging pipeline to mimic GO service logs", "service_tier": 3, "team_email": "observability-team@lyft.com", "pagerduty_escalation_policy": "Observability", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:deb42d25da0e6d5fe565c019883e458b4b31b696"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "worker", "command": "dumb-init -- gologtester", "workdir": "/code/gologtester", "limits": {"cpu": 1, "memory": "1Gi"}, "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["control.dev", "gologtester.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "gologtester.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "gologtester.dev", "container": "gologtester.legacy", "command": "make integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "worker", "member": "gologtester.worker", "type": "worker", "sidecars": ["envoy-worker", "statsd", "fluentbit"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}], "deploy": [{"name": "staging-obs-dev", "legacy": false, "automatic": true, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["obs-dev"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["obs-dev"]}}, "targets": [{"facet": "worker"}]}, {"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "worker"}]}, {"name": "production", "legacy": false, "automatic": false, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "worker"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {}, "services": [{"name": "gologtester"}]}}, "logging": {"gologtester": {"fields": {"hostname": {"type": "text"}, "id": {"type": "text"}, "index": {"type": "long"}}}}, "version": "4d91309729dc7542afb129fa3609f72373f1dfaf", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "goregionsclient": {"name": "goregionsclient", "description": "Go client to access regions service.", "repository": "git@github.com:lyft/go-regions-client.git", "image_type": "service", "languages": ["go"], "credentials": false, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh"}], "groups": [{"name": "dev", "members": ["goregionsclient.service"]}, {"name": "integration", "members": ["regions.dev", "goregionsclient.service"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make tests"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "coverage", "type": "jailed", "command": "make coverage"}, {"name": "integration", "type": "restricted", "group": "goregionsclient.integration", "container": "goregionsclient.service", "command": "make integration", "whitelist": ["statsd-iad-onebox.lyft.net.", "goregionsclient-development-iad-onebox.lyft.net.", "regions-development-iad-onebox.lyft.net."]}], "slack": "#driver-platform-eng", "slack_deploy_notification_environments": ["canary", "production"], "pagerduty_escalation_policy": "Cities", "team_email": "cities@lyft.com", "deploy": [{"name": "staging", "legacy": false, "automatic": true}, {"name": "canary", "legacy": false, "automatic": true}, {"name": "production", "legacy": false, "automatic": true}], "envoy": {"profile": "go", "settings": {"services": [{"name": "goregionsclient"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 900}}}, "internal_hosts": {"regions": null}}}}, "service_tier": 3, "version": "0bcf13c19b28f54b5a38c42054f233f47670e09a", "images": [{"parent": {"name": "opsbase", "version": "0930a86e98c778e297ef4cefc76e4d80b1d51c7a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "0930a86e98c778e297ef4cefc76e4d80b1d51c7a", "sub_image": null, "external": false}}, "goslash": {"name": "goslash", "description": "Lyft official URL shortener (ie go/)", "repository": "git@github.com:lyft/goslash.git", "slack": "#internal-productivity", "team_email": "internal-productivity@lyft.com", "pagerduty_escalation_policy": "Internal Productivity", "image_type": "service", "service_tier": 2, "languages": ["javascript"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2i", "params": {"builder": "lyft/s2inode:service.4e52b9c9ee57437462c5416c710d4e532dea73da", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- /code/goslash/utils/run.sh", "workdir": "/code/goslash", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "goslash.legacy", "elasticsearch6.server"]}, {"name": "service_group", "members": ["goslash.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "goslash.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "facets": [{"name": "main", "member": "goslash.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "goslash.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "goslash"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"dynamodb_iad": null}}}}, "version": "a16ce78e0df9da3c26094a84c9c165778b83c9a0", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2inode", "version": "4e52b9c9ee57437462c5416c710d4e532dea73da", "sub_image": "service", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "gotools": {"name": "gotools", "description": "gotools container for updating dependencies", "repository": "git@github.com:lyft/gotools.git", "credentials": true, "slack": "#devx-bots", "team_email": "devx-team@lyft.com", "image_type": "tool", "languages": ["go"], "docs": {"section": "Infrastructure"}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "service", "command": "gotools"}], "groups": [{"name": "dev", "members": ["gotools.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "gotools.dev"}, {"name": "unit", "type": "jailed", "command": "make test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false, "automatic": true, "orca": [{"region": "iad"}]}], "version": "37f2b0a985b62b811c2a0c1d274ccf3de63d37bf", "images": [{"parent": {"name": "s2igocli", "version": "77c41f39b1d42fc3b3fdf97d08edaed8fe4f7b0e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2igocli", "version": "77c41f39b1d42fc3b3fdf97d08edaed8fe4f7b0e", "sub_image": null, "external": false}}, "gpumetricsexporter": {"name": "gpumetricsexporter", "description": "daemonset that collects various gpu metrics for monitoring", "repository": "git@github.com:lyft/gpu-metrics-exporter.git", "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "image_type": "service", "credentials": false, "service_tier": 3, "docs": {"path": ".", "section": "Infrastructure"}, "deploy": [{"name": "staging-ml", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn", "flyte"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-ml", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn", "flyte", "flytecritical"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-ml-av", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn-av"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml-av"]}}}], "version": "5b4917d16bbed4f850a0536f60fbf6e6c3a09e77", "images": [{"parent": {"name": "scratch", "version": "", "sub_image": null, "external": true}, "sub_image": null}], "parent": {"name": "scratch", "version": "", "sub_image": null, "external": true}}, "grafana": {"name": "grafana", "description": "grafana service", "repository": "git@github.com:lyft/opsgrafana.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.k8s", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 300, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "grafana", "port": 8000}]}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "grafana.legacy"]}], "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#observabot"}, "pr_merge": {"slack": "#observabot"}}, "pagerduty_escalation_policy": "Observability Visibility", "team_email": "observability-visibility-team@lyft.com", "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "kubernetes": {"enabled": true, "mode": "direct", "interpolation_vars": {"auto_assign_org_role": "Editor", "server_domain": "grafana-staging.lyft.net", "env-short": "staging"}}}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": false}}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a", "kubernetes": {"enabled": true, "mode": "direct", "interpolation_vars": {"auto_assign_org_role": "Editor", "server_domain": "grafana.lyft.net", "env-short": "prod"}}}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d", "kubernetes": {"enabled": true, "mode": "direct", "interpolation_vars": {"auto_assign_org_role": "Editor", "server_domain": "grafana.lyft.net", "env-short": "prod"}}}, {"legacy": true, "name": "production", "kubernetes": {"enabled": true, "mode": "direct", "interpolation_vars": {"auto_assign_org_role": "Editor", "server_domain": "grafana.lyft.net", "env-short": "prod"}}}]], "audit_blacklist": ["envoyAudit"], "languages": [], "image_type": "service", "service_tier": 2, "version": "ccc0803074a9f3a026cb16f8017fffa2d2b41652", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "bionicbase", "version": "1e528f4b38210368cdf8837ac5d8060c4a8fe90b", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "graphql": {"name": "graphql", "description": "a graphql server that exposes lyft business object for internal tooling.", "repository": "git@github.com:lyft/graphql.git", "image_type": "service", "service_tier": 1, "configsets": ["graphqldata"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "credentials": true, "links": [{"text": "GraphQL Runbook", "url": "https://github.com/lyft/graphql/blob/master/docs/runbook.md"}], "groups": [{"name": "dev", "members": ["control.dev", "graphql.legacy", "dnsmasq.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "graphql.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "execution", "command": "make lint", "group": "graphql.dev", "container": "graphql.legacy"}, {"name": "generate", "type": "jailed", "command": "make test_generate"}], "slack": "#marketplace-health", "pagerduty_escalation_policy": "Marketplace Health", "team_email": "marketplace-health@lyft.com", "slack_deploy_notification_environments": ["staging", "canary", "production"], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "docs": {"godoc_packages": ["github.com/lyft/graphql", "github.com/lyft/graphql/client", "github.com/lyft/graphql/model", "github.com/lyft/graphql/node", "github.com/lyft/graphql/resolver", "github.com/lyft/graphql/schema"]}, "envoy": {"profile": "go", "settings": {"services": [{"name": "graphql"}, {"name": "graphqlone"}], "common_settings": {"external_hosts": {"s3_iad": null, "twilio": null}, "internal_hosts": {"accidents": null, "acl": null, "appointmentmanager": null, "appreleases": null, "ats": null, "auth": null, "badcompanions": null, "claims": null, "coupons": null, "dispatch": null, "dsfeatures": null, "enterprise": null, "etaproxy": null, "fare": null, "fleetlocations": null, "fleetmanagement": null, "ghostmatching": null, "green": null, "helium": null, "images": null, "lastmile": null, "ledger": null, "locations": null, "locationsmapmatch": null, "modes": null, "mozartgateway": null, "notes": null, "offerings": null, "opstasks": null, "places": null, "ratecards": null, "ratelimit": null, "ratings": null, "regions": null, "rides": null, "routes": null, "supportcontact": null, "switchboard": null, "supply": null, "supplypartners": null, "supplyrecords": null, "team": null, "timecard": null, "trips": null, "usergroups": null, "users": null, "vehicleservicecenters": null, "vehiclemetadata": null, "venues": null, "wallet": null}, "local_service": {"circuit_breakers": {"default": {"max_connections": 1024}}, "hosts_url": "tcp://127.0.0.1:8080"}}}}, "logging": {"graphql": {"fields": {"request_id": "keyword", "query": "keyword", "parameters": "keyword", "user": "keyword", "app": "keyword", "resolver": "keyword", "error": "keyword", "kind": "keyword", "path": "keyword", "upstream_service": "keyword", "upstream_api": "keyword", "upstream_code": "keyword"}}}, "version": "f359ef996ecaaf93ffdedfa6a3f191e41d27b3a8", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "graphqldata": {"name": "graphqldata", "description": "GraphQL Config Set Data.", "repository": "git@github.com:lyft/graphqldata.git", "image_type": "data", "service_tier": 2, "slack": "#marketplace-health", "pagerduty_escalation_policy": "Marketplace Health", "team_email": "marketplace-health@lyft.com", "languages": ["bash", "python"], "builder": {"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, "credentials": false, "docs": {"disable": true}, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/graphqldata"]}, {"name": "spin", "command": "sleep infinity"}, {"name": "checkschema", "command": "/code/graphqldata/checkschema.sh", "mounts": ["/var/run/docker_sockets", "/srv/control"]}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "canary", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "d456423d23a801446af8b7ffcf3b7c69c888072f", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "green": {"name": "green", "description": "green", "repository": "git@github.com:lyft/green.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- bash -c \"./download-dependencies.sh && service_venv gunicorn application:app --workers=6 -k gevent --worker-connections=1000 --max-requests=500000 -c /etc/gunicorn/gunicorn.conf\"", "sub_image": "k8s", "limits": {"cpu": 6, "memory": "4Gi"}}, {"name": "payoutschedulerworker", "command": "dumb-init -- bash -c \"./download-dependencies.sh && service_venv python manage.py payout_scheduler --apply\"", "workdir": "/code/green", "sub_image": "k8s"}, {"name": "documentuploadworker", "command": "dumb-init -- bash -c \"./download-dependencies.sh && service_venv python manage.py document_upload_worker\"", "workdir": "/code/green", "sub_image": "k8s"}, {"name": "chargebackworker", "command": "dumb-init -- bash -c \"./download-dependencies.sh && service_venv python manage.py firstdata_chargeback_worker\"", "workdir": "/code/green", "sub_image": "k8s"}, {"name": "spin", "command": "dumb-init -- bash -c \"./download-dependencies.sh && sleep infinity\"", "workdir": "/code/green", "sub_image": "k8s"}, {"name": "paypalcanada", "command": "dumb-init -- bash -c \"./download-dependencies.sh && service_venv python manage.py case_report_paypal --merchant-account canada --backup --apply\"", "workdir": "/code/green", "sub_image": "k8s"}, {"name": "settlementcanada", "command": "dumb-init -- bash -c \"./download-dependencies.sh && service_venv python manage.py settlement_report_paypal --merchant-account canada --backup --apply\"", "workdir": "/code/green", "sub_image": "k8s"}, {"name": "paypal", "command": "dumb-init -- bash -c \"./download-dependencies.sh && service_venv python manage.py case_report_paypal --backup --apply\"", "workdir": "/code/green", "sub_image": "k8s"}, {"name": "settlement", "command": "dumb-init -- bash -c \"./download-dependencies.sh && service_venv python manage.py settlement_report_paypal --backup --apply\"", "workdir": "/code/green", "sub_image": "k8s"}, {"name": "transactionpayfare", "command": "dumb-init -- bash -c \"./download-dependencies.sh && service_venv python manage.py transaction_report_payfare --apply\"", "workdir": "/code/green", "sub_image": "k8s"}, {"name": "transactionfirstdata", "command": "dumb-init -- bash -c \"./download-dependencies.sh && service_venv python manage.py transaction_report_first_data --apply\"", "workdir": "/code/green", "sub_image": "k8s"}, {"name": "transactionamex", "command": "dumb-init -- bash -c \"./download-dependencies.sh && service_venv python manage.py transaction_report_amex --merchant-account amex --backup --apply\"", "workdir": "/code/green", "sub_image": "k8s"}, {"name": "requeuepayouts", "command": "dumb-init -- bash -c \"./download-dependencies.sh && service_venv python manage.py requeue_payouts --latest-complete --apply\"", "workdir": "/code/green", "sub_image": "k8s"}, {"name": "weeklypayoutstatus", "command": "dumb-init -- bash -c \"./download-dependencies.sh && service_venv python manage.py count_weekly_payout_status\"", "workdir": "/code/green", "sub_image": "k8s"}, {"name": "newdrivercomms", "command": "dumb-init -- bash -c \"./download-dependencies.sh && service_venv python manage.py new_driver_express_pay_comms -a\"", "workdir": "/code/green", "sub_image": "k8s"}, {"name": "uploadtokens", "command": "dumb-init -- bash -c \"./download-dependencies.sh && service_venv python manage.py upload_first_data_card_tokens -a\"", "workdir": "/code/green", "sub_image": "k8s"}, {"name": "amexchargebackfiles", "command": "dumb-init -- bash -c \"./download-dependencies.sh && service_venv python manage.py amex_chargeback_worker -gen && service_venv python manage.py amex_chargeback_worker -f\"", "workdir": "/code/green", "sub_image": "k8s"}, {"name": "amexchargebackack", "command": "dumb-init -- bash -c \"./download-dependencies.sh && service_venv python manage.py amex_chargeback_worker -ack\"", "workdir": "/code/green", "sub_image": "k8s"}], "facets": [{"name": "main", "member": "green.service", "type": "service", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 3, "max_size": 3}, "production": {"min_size": 3, "max_size": 20}}}}, {"name": "canary", "member": "green.service", "type": "service", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "payoutschedulerworker", "member": "green.payoutschedulerworker", "type": "worker", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "documentuploadworker", "member": "green.documentuploadworker", "type": "worker", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "chargebackworker", "member": "green.chargebackworker", "type": "worker", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "spin", "member": "green.spin", "type": "worker", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "cronpaypalcanada", "member": "green.paypalcanada", "type": "cron", "schedule": "3 11 * * *", "concurrency_policy": "forbid", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"]}, {"name": "cronsettlementcanada", "member": "green.settlementcanada", "type": "cron", "schedule": "3 12 * * *", "concurrency_policy": "forbid", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"]}, {"name": "cronpaypal", "member": "green.paypal", "type": "cron", "schedule": "3 13 * * *", "concurrency_policy": "forbid", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"]}, {"name": "cronsettlement", "member": "green.settlement", "type": "cron", "schedule": "3 14 * * *", "concurrency_policy": "forbid", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"]}, {"name": "crontransactionpayfare", "member": "green.transactionpayfare", "type": "cron", "schedule": "33 17 * * *", "concurrency_policy": "forbid", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"]}, {"name": "crontransactionfirstdata", "member": "green.transactionfirstdata", "type": "cron", "schedule": "33 21 * * *", "concurrency_policy": "forbid", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"]}, {"name": "crontransactionamex", "member": "green.transactionamex", "type": "cron", "schedule": "33 4 * * *", "concurrency_policy": "forbid", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"]}, {"name": "cronrequeuepayouts", "member": "green.requeuepayouts", "type": "cron", "schedule": "33 16 * * 3,4", "concurrency_policy": "forbid", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"]}, {"name": "cronweeklypayoutstatus", "member": "green.weeklypayoutstatus", "type": "cron", "schedule": "5 18 * * 2", "concurrency_policy": "forbid", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"]}, {"name": "cronnewdrivercomms", "member": "green.newdrivercomms", "type": "cron", "schedule": "5 20 * * 1", "concurrency_policy": "forbid", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"]}, {"name": "cronuploadtokens", "member": "green.uploadtokens", "type": "cron", "schedule": "0 17 * * 1", "concurrency_policy": "forbid", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"]}, {"name": "cronamexchargebackfiles", "member": "green.amexchargebackfiles", "type": "cron", "schedule": "30 20 * * *", "concurrency_policy": "forbid", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"]}, {"name": "cronamexchargebackack", "member": "green.amexchargebackack", "type": "cron", "schedule": "30 23 * * *", "concurrency_policy": "forbid", "requirements": {"mongo": true}, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"]}], "facet_groups": [{"name": "workers", "members": ["chargebackworker", "documentuploadworker", "payoutschedulerworker"]}, {"name": "jobs", "members": ["cronpaypalcanada", "cronsettlementcanada", "cronpaypal", "cronsettlement", "crontransactionpayfare", "crontransactionfirstdata", "crontransactionamex", "cronrequeuepayouts", "cronweeklypayoutstatus", "cronnewdrivercomms", "cronuploadtokens", "cronamexchargebackfiles", "cronamexchargebackack"]}], "groups": [{"name": "dev", "members": ["control.dev", "mongodb.server", "dynamodb.dev", "green.legacy", "jobscheduler.dev", "paymentgateway.dev"]}, {"name": "integration", "members": ["green.dev", "jobscheduler.dev", "account.dev", "ats.qa_approve", "dispatch.dev", "locations.dev", "ridetimeestimator.dev", "karma.dev", "routesapi.dev", "sqs.server", "ratelimit.dev", "tcs.dev", "txnhub.dev", "usergroups.dev", "wallet.dev", "walletapi.dev", "paymentgateway.dev"]}, {"name": "tokenization", "members": ["locations.dev", "auth.dev", "viewport.dev", "coupons.dev", "green.dev", "jobscheduler.dev", "envoy.dev", "routesapi.dev", "usergroups.dev", "users.dev", "wallet.dev", "walletapi.dev", "supply.dev"]}, {"name": "end2end", "members": ["abacus.dev", "locations.dev", "auth.dev", "viewport.dev", "ats.qa_approve", "pricing.dev", "green.dev", "jobscheduler.dev", "rentals.dev", "regions.dev", "rides.dev", "envoy.dev", "coupons.dev", "ledger.dev", "usergroups.dev", "users.dev", "supply.dev", "routes.dev", "analyticsingest.dev", "courier.integration", "dispatch.integration", "payapi.dev", "ratelimit.dev", "flaggedtrips.dev", "etaproxy.legacy", "txnhub.dev", "wallet.dev", "walletapi.dev"]}, {"name": "fixtures", "members": ["auth.dev", "green.dev", "jobscheduler.dev", "envoy.dev", "ledger.dev", "sqs.server", "ratelimit.dev", "flaggedtrips.dev", "txnhub.dev", "usergroups.dev"]}], "tests": [{"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy"}, {"name": "integration", "type": "execution", "group": "green.integration", "container": "green.legacy", "command": "/srv/service/current/tests/integration/run.sh", "reports": {"junit": "build/integrationtests.xml", "cobertura": "build/integration_coverage.xml"}}, {"name": "expresspay_fixtures", "type": "execution", "group": "green.fixtures", "container": "green.legacy", "command": "make express_pay_fixtures", "reports": {"junit": "build/express_pay.xml"}}, {"name": "payout_fixtures", "type": "execution", "group": "green.fixtures", "container": "green.legacy", "command": "make payout_fixtures", "reports": {"junit": "build/payout_fixture.xml"}}, {"name": "lint", "type": "jailed", "command": "make lint_green", "reports": {"pylint": "build/flake8.txt"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "framework": "pytest", "coverage": false, "markers": "unit_legacy", "group": "green.dev", "container": "green.legacy", "targets": ["tests/unit"]}], "slack": "#pay-platform", "team_email": "pay-platform-eng@lists.lyft.com", "pagerduty_escalation_policy": "Pay Platform", "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "spin"}, {"facet": "cronweeklypayoutstatus"}, {"facet": "cronrequeuepayouts"}, {"facet": "cronnewdrivercomms"}, {"facet": "cronpaypalcanada"}, {"facet": "cronsettlementcanada"}, {"facet": "cronpaypal"}, {"facet": "cronsettlement"}, {"facet": "crontransactionpayfare"}, {"facet": "crontransactionamex"}, {"facet": "crontransactionfirstdata"}, {"facet": "cronuploadtokens"}, {"facet": "cronamexchargebackfiles"}], "automatic": true}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a", "kubernetes": {"enabled": true}, "targets": {"facet": "main"}}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d", "kubernetes": {"enabled": true}, "targets": {"facet": "main"}}], {"legacy": true, "name": "production", "kubernetes": {"enabled": true}, "targets": [{"facet": "cronweeklypayoutstatus"}, {"facet": "cronrequeuepayouts"}, {"facet": "cronnewdrivercomms"}, {"facet": "cronpaypalcanada"}, {"facet": "cronsettlementcanada"}, {"facet": "cronpaypal"}, {"facet": "cronsettlement"}, {"facet": "crontransactionpayfare"}, {"facet": "crontransactionamex"}, {"facet": "crontransactionfirstdata"}, {"facet": "cronuploadtokens"}, {"facet": "cronamexchargebackfiles"}, {"facet": "spin"}, {"facet": "canary"}, {"facet": "main"}]}], "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "service_tier": 0, "languages": ["python", "bash"], "image_type": "service", "notification_overrides": {"deploy": {"slack": "#pay-platform-deploys", "environments": ["production", "staging"]}, "pr_open": {"slack": "#pay-platform"}, "test_failure": {"slack": "#pay-platform-deploys", "environments": ["production"]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "green"}, {"name": "greenbatch"}, {"name": "greenworkers"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"ats": null, "driverridesinfo": null, "dsfeatures": null, "enterprise": null, "flaggedtrips": null, "green": null, "jobschedulernormalweb": null, "karma": null, "ledger": null, "loyaltytiers": null, "mailer": null, "payapi": null, "paydisputes": null, "paymentgateway": null, "publicapi": null, "push": null, "ratelimit": null, "rentals": null, "rides": null, "ridesapi": null, "routes": null, "supply": null, "supplyrecords": {"tls_enabled": true}, "switchboard": null, "messaging": null, "tcs": null, "trips": null, "tripsapi": null, "txnhub": null, "usereligibilities": null, "usergroups": null, "users": null, "walletapi": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null, "stripe": null}, "mongos": {"green": {"staging": {"ratelimit": true, "clusters": [{"port": 27037, "hosts": ["r143043-a0.mlab.com:27817"]}, {"port": 27038, "hosts": ["r143043-a1.mlab.com:27817"]}]}, "production": {"ratelimit": true, "clusters": [{"port": 27037, "hosts": ["r043119-13.mlab.com:27817"]}, {"port": 27038, "hosts": ["r043119-14.mlab.com:27817"]}, {"port": 27039, "hosts": ["r043119-15.mlab.com:27817"]}, {"port": 27040, "hosts": ["r043119-16.mlab.com:27817"]}]}}}}, "override_settings": [{"services": [{"name": "green"}], "settings": {"internal_hosts": {"jobschedulerbulkweb": null, "regions": null, "wallet": null}, "external_hosts": {"firehose_iad": null, "first_data": null, "payfare": null}, "redis": {"greenmultiredis": {"port": 6380, "op_timeout_ms": 1250}}}}, {"services": [{"name": "greenbatch"}], "settings": {"internal_hosts": {"jobschedulermigrationweb": null, "jobschedulerbulkweb": null}, "external_hosts": {"firehose_iad": null}}}, {"services": [{"name": "greenworkers"}], "settings": {"external_hosts": {"firehose_iad": null}}}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": "k8s", "packages": ["awscli", "postgresql-client", "libpq-dev", "lbzip2", "libkrb5-dev"]}}]}}, "logging": {"green": {"fields": {"customer_id": "keyword", "pay_period": "keyword", "charge_id": "keyword", "status": "keyword", "type": "keyword", "reference": {"time": "date", "downstream_id": "keyword", "id": "keyword", "sub_id": "keyword"}, "participant_id": "keyword", "transaction_id": "keyword", "amount": "keyword", "shadow_migration": {"requested_at": "date", "transaction_id": "keyword", "participant": {"domain": "keyword", "id": "keyword"}, "charge_id": "keyword", "downstream_ref_id": "keyword", "status": "keyword", "succeeded_at": "date"}, "event_id": "keyword", "api_version": "date", "object_id": "keyword", "participant": {"id": "keyword", "domain": "keyword"}, "payout_transaction_id": "keyword", "provider": "keyword", "sub_type": "keyword", "livemode": "boolean", "update_shadow_migration": {"action": "keyword", "participant": {"domain": "keyword", "id": "keyword"}, "requested_at": "date", "charge_id": "keyword"}, "ErrorMessage": "keyword", "ErrorCode": "keyword", "adjustment_uuid": "keyword", "ResponseCode": "keyword", "transfer_id": "keyword", "source_instrument": {"type": "keyword", "identifier": "keyword"}, "region": "keyword", "user_id": "keyword", "ApprovalCode": "keyword", "ApprovedAmount": "long", "payment_method": "keyword", "stripe_account_id": "keyword", "payout_transaction": "keyword", "AVS": "keyword", "CVN": "keyword", "method": "keyword", "Network": "keyword", "charge_type": "keyword", "state": "keyword", "adjustment_type": "keyword", "adjustment_amount": "long", "adjustment_currency": "keyword", "participant_domain": "keyword", "amount_currency": "keyword", "statuses": "keyword", "green_type": "keyword", "green_id": "keyword", "txnhub_id": "keyword", "indebtable": "boolean", "OTP": "keyword", "action": "keyword", "capture": "boolean", "fee": "long", "txn_id": "keyword", "email": "keyword", "num_failed_charges": "long", "charge_account": "keyword", "charge_status": "keyword", "country": "keyword", "first_name": "keyword", "last_name": "keyword", "acct_id": "keyword", "merchant_account": "keyword", "updated_user_verification_status": "keyword", "current_user_verification_status": "keyword", "sftp_path": "keyword", "task_name": "keyword", "payfare_id": "keyword", "payout_type": "keyword", "error_code": "keyword", "line_item_id": "keyword", "error": "keyword"}}, "greenbatch": {"fields": {"provider": "keyword", "creds": "keyword", "exception": "keyword", "attempt_num": "long", "traceback": "keyword", "merchant_account": "keyword", "args": "keyword", "error": "keyword", "failed_record": "keyword", "case_id": "keyword", "adjustment_id": "keyword", "s3_image_name": "keyword", "disputeCreated": "long", "disputeFundsWithdrawn": "long", "bank_transfer": "long", "disputeLost": "long", "disputeFundsReinstated": "long", "disputeWon": "long"}}, "greenworkers": {"fields": {"creds": "keyword", "provider": "keyword", "merchant_account": "keyword", "args": "keyword", "error": "keyword"}}}, "version": "e20d0e1803acf4040b9c23618ba8903ba4dde8b6", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "groundcontrol": {"name": "groundcontrol", "description": "Internal frontend service for GroundControl Users, routed through TOM", "repository": "git@github.com:lyft/groundcontrol.git", "image_type": "service", "service_tier": 2, "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "workdir": "/code/groundcontrol", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "cdnupload", "command": "/code/groundcontrol/cdn-upload", "workdir": "/code/groundcontrol", "sub_image": "k8s"}], "slack": "#support-bots", "team_email": "associate-tools@lyft.com", "pagerduty_escalation_policy": "Associate Tools", "groups": [{"name": "dev", "members": ["control.dev", "groundcontrol.legacy"]}, {"name": "qa", "members": ["control.dev", "groundcontrol.legacy", "tom.legacy"]}], "custom": {"service_type": "nodejs", "internal_service": true, "frontend_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "tests": [{"name": "startup", "type": "startup", "group": "groundcontrol.dev"}, {"name": "unit", "type": "execution", "group": "groundcontrol.dev", "container": "groundcontrol.legacy", "command": "make test_coverage"}, {"name": "lint", "type": "execution", "group": "groundcontrol.dev", "container": "groundcontrol.legacy", "command": "make test_lint"}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "automatic": true, "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"legacy": false, "name": "production", "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "deploy_settings": {"window_start": "09:00 US/Central", "window_end": "18:00 US/Central"}, "envoy": {"profile": "python", "settings": {"services": [{"name": "groundcontrol"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"lastmile": null, "messaging": null, "privacyaudit": null, "ridepasses": null, "supportactions": null, "supporttext": null, "tom": null, "usereligibilities": null}}}}, "languages": ["javascript"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2inode:service.f633733a7fe0e80669ecd9bb6ee09b12d06a9666", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}]}}, "facets": [{"name": "main", "member": "groundcontrol.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "canary", "member": "groundcontrol.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "assets", "member": "groundcontrol.cdnupload", "type": "job"}], "version": "9a5f0f56e535e29697766c6f415ee2a2a5ba5693", "images": [{"parent": {"name": "s2inode", "version": "f633733a7fe0e80669ecd9bb6ee09b12d06a9666", "sub_image": "service", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "grow": {"name": "grow", "description": "grow", "repository": "git@github.com:lyft/grow.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "limits": {"environment": {"development": {"cpu": 0.2, "memory": "1.3Gi"}}}}], "notification_overrides": {"deploy": {"slack": "#acq-incentives-bot", "environments": ["production", "canary", "staging"]}, "deploy_failure": {"slack": "#acq-incentives-bot"}, "test_failure": {"slack": "#acq-incentives-bot", "email": "acq-incentives-referrals@lyft.com", "environments": ["production"]}, "master_failure": {"slack": "#acq-incentives-bot"}, "pr_merge": {"slack": "#acq-incentives-bot"}, "pr_open": {"slack": "#acq-incentives-bot"}}, "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "redis.dev", "jobscheduler.dev", "grow.legacy", "jobscheduler.dev", "regions.dev"]}, {"name": "integration", "members": ["grow.dev", "postgresql.dev", "locations.dev", "ats.dev", "users.dev", "switchboard.dev", "ratelimit.dev"]}], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "tests": [{"name": "startup", "type": "startup", "group": "grow.dev"}, {"name": "unit", "type": "execution", "command": "make test_unit", "group": "grow.dev", "container": "grow.legacy"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "grow.integration", "container": "grow.legacy", "command": "make test_integration"}, {"name": "e2e", "type": "execution", "group": "grow.integration", "container": "grow.legacy", "target": "tests/e2e", "virtualenv": "service_venv", "command": "make test_e2e", "reports": {"junit": "build/e2e.xml"}}], "slack": "#acq-incentives", "team_email": "acq-incentives-referrals@lyft.com", "pagerduty_escalation_policy": "Referrals Team", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "grow"}, {"name": "growkcl"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "internal_hosts": {"acquisitionguarantees": null, "ats": null, "coupons": null, "enterprise": null, "fare": null, "flexibleincentives": null, "grow": null, "godfather": null, "invites": null, "messaging": null, "jobschedulernormalweb": null, "jobschedulerbulkweb": null, "ledger": null, "payapi": null, "places": null, "push": null, "ratelimit": null, "referrals": null, "regions": null, "rides": null, "ridehistory": null, "robocop": null, "supply": null, "switchboard": null, "tcs": null, "usergroups": null, "userprivacyrights": null, "users": null, "www2": null}, "authorization": {"permissions": {"public": {"not_paths": ["/api/ambassadorid"]}, "ambassador_auth": {"paths": ["/api/ambassadorid"], "methods": ["POST"]}}, "bindings": {"expressdrivefeapi": ["ambassador_auth"], "driverloyalty": ["ambassador_auth"], "tom": ["ambassador_auth"], "grow": ["ambassador_auth"], "guardian": ["ambassador_auth"], "help": ["ambassador_auth"], "ridehistory": ["ambassador_auth"], "www2": ["ambassador_auth"], "wwwbrochurefe": ["ambassador_auth"], "wwwdriveronboardingfe": ["ambassador_auth"], "wwwratecardfe": ["ambassador_auth"], "wwwidentityfe": ["ambassador_auth"], "wwwdriverengagementfe": ["ambassador_auth"], "wwwdriverxpfe": ["ambassador_auth"], "wwwpayxpfe": ["ambassador_auth"], "wwwsupportxpfe": ["ambassador_auth"], "*": ["public"]}}, "redis": {"growmultiredis": {"port": 6380}}}}}, "logging": {"growkcl": {"fields": {"message": "keyword", "user_id": "keyword", "ride_id": "keyword"}}, "grow": {"fields": {"order_id": "keyword", "response": {"purchase_date": "date", "currency": "keyword", "line_items": "keyword", "button_order_id": "keyword", "btn_ref": "keyword", "total": "long", "status": "keyword", "order_id": "keyword", "finalization_date": "date"}, "customer": {"id": "keyword"}, "user_id": "keyword", "token": "keyword", "file": "keyword", "file_last_modified": "keyword", "last_sync": "keyword", "duration_ms": "float", "service": "keyword", "http_status_code": "long", "http_method": "keyword", "request_url": "keyword", "region": "keyword", "active_charity_country": "keyword", "ride_country": "keyword", "charity_id": "keyword", "message": "keyword", "nsq_topic": "keyword", "nsq_num": "long", "error": "keyword"}}}, "languages": ["python"], "version": "38055bace95b2737995951ed578dffa3e2162176", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "gschema": {"name": "gschema", "repository": "git@github.com:lyft/gschema.git", "description": "gschema", "service_tier": 2, "configsets": ["gschemadata"], "team_email": "marketplace-health@lyft.com", "pagerduty_escalation_policy": "Marketplace Health", "slack": "#marketplace-health", "slack_deploy_notification_environments": ["staging", "canary", "production"], "image_type": "service", "languages": ["go"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "packages": ["redis-tools"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2igocli:8ad0040e2e37145a4ff8cdfc6669f48462d32b14", "sub_image": "k8s", "packages": ["redis-tools"]}}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:go.0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit", "packages": ["redis-tools"]}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- gschema", "workdir": "/code/gschema", "limits": {"cpu": 2, "memory": "256Mi"}, "sub_image": "k8s", "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "gschema.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "gschema.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "gschema.dev", "container": "gschema.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "gschema.service", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 2}}}}, {"name": "canary", "member": "gschema.service", "type": "worker", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "redrivedlq", "member": "gschema.service", "environment_files": "ops/config/pillar/env_dlq.sls", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "backfill", "member": "gschema.service", "environment_files": "ops/config/pillar/env_backfill.sls", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "ridesredrive", "member": "gschema.service", "environment_files": "ops/config/pillar/env_rides_redrive.sls", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "routesredrive", "member": "gschema.service", "environment_files": "ops/config/pillar/env_routes_redrive.sls", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "drivershiftsredrive", "member": "gschema.service", "environment_files": "ops/config/pillar/env_drivershifts_redrive.sls", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "supportinteractionsredrive", "member": "gschema.service", "environment_files": "ops/config/pillar/env_supportinteractions_redrive.sls", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "ridesredrivesplit", "member": "gschema.service", "environment_files": "ops/config/pillar/env_rides_redrive_split.sls", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "routesredrivesplit", "member": "gschema.service", "environment_files": "ops/config/pillar/env_routes_redrive_split.sls", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "drivershiftsredrivesplit", "member": "gschema.service", "environment_files": "ops/config/pillar/env_drivershifts_redrive_split.sls", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "supportinteractionsredrivesplit", "member": "gschema.service", "environment_files": "ops/config/pillar/env_supportinteractions_redrive_split.sls", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "legacy": false, "bake_time_minutes": 12, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}, {"facet": "redrivedlq"}, {"facet": "backfill"}, {"facet": "ridesredrive"}, {"facet": "routesredrive"}, {"facet": "drivershiftsredrive"}, {"facet": "supportinteractionsredrive"}, {"facet": "ridesredrivesplit"}, {"facet": "routesredrivesplit"}, {"facet": "drivershiftsredrivesplit"}, {"facet": "supportinteractionsredrivesplit"}], "links": [{"text": "GSCHEMA Runbook", "url": "https://github.com/lyft/gschema/blob/master/docs/runbook.md"}, {"text": "Wavefront", "url": "https://lyft.wavefront.com/dashboards/gschema_staging_dash"}]}, {"name": "canary", "legacy": false, "bake_time_minutes": 12, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}], "links": [{"text": "GSCHEMA Runbook", "url": "https://github.com/lyft/gschema/blob/master/docs/runbook.md"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "bake_time_minutes": 12, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "redrivedlq"}, {"facet": "backfill"}, {"facet": "ridesredrive"}, {"facet": "routesredrive"}, {"facet": "drivershiftsredrive"}, {"facet": "supportinteractionsredrive"}, {"facet": "ridesredrivesplit"}, {"facet": "routesredrivesplit"}, {"facet": "drivershiftsredrivesplit"}, {"facet": "supportinteractionsredrivesplit"}], "links": [{"text": "GSCHEMA Runbook", "url": "https://github.com/lyft/gschema/blob/master/docs/runbook.md"}, {"text": "Wavefront", "url": "https://lyft.wavefront.com/dashboards/gschema_staging_dash"}]}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "gschema"}], "common_settings": {"internal_hosts": {"graphql": null, "graphqlone": null, "eventingest": null, "ratelimit": null, "wavefrontproxy": null}, "external_hosts": {"sqs_iad": null}, "redis_clusters": {"gschema": {"aws_random_identifier": "vngjnv", "port": 6381, "op_timeout_ms": 400}}}}}, "version": "52bf3000e8f64c446fd04235412d8ef8c2179952", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "8ad0040e2e37145a4ff8cdfc6669f48462d32b14", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "gschemadata": {"name": "gschemadata", "description": "Gschema Config Set Data.", "repository": "git@github.com:lyft/gschemadata.git", "image_type": "data", "service_tier": 2, "slack": "#marketplace-health", "pagerduty_escalation_policy": "Marketplace Health", "team_email": "marketplace-health@lyft.com", "languages": ["bash", "python"], "builder": {"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, "credentials": false, "docs": {"disable": true}, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/gschemadata"]}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "canary", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "5502d2a64a010bba24ea4553fa6fef432be377d2", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "guardian": {"name": "guardian", "description": "guardian", "repository": "git@github.com:lyft/guardian.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "start_time": 30, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "envoy.server", "sqs.server", "redis.dev", "helpdata.run", "jobscheduler.dev", "guardian.legacy"]}, {"name": "minimal", "members": ["control.dev", "dynamodb.dev", "guardian.legacy"]}, {"name": "integration", "members": ["abacus.dev", "account.dev", "abacus.dev", "ats.qa_approve", "coupons.dev", "dispatch.integration", "drivermode.dev", "dynamodb.server", "etaproxy.dev", "fare.dev", "green.dev", "karma.dev", "ledger.dev", "legacyapi.dev", "legacyridetypes.dev", "locations.dev", "modelexec.dev", "mongodb.server", "payapi.dev", "postgresql.server", "publicapi.dev", "regions.dev", "rides.dev", "ridesapi.dev", "routes.dev", "supply.dev", "switchboard.dev", "users.dev", "venues.dev", "viewport.dev", "guardian.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "guardian.minimal"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration_sharded", "type": "sharded", "group": "guardian.minimal", "container": "guardian.legacy", "command": "make test_integration", "target": "tests/integration", "virtualenv": "service_venv", "skip_threshold": 999, "reports": {"junit": "build/integration.xml"}}], "slack": "#support-xp-eng", "notification_overrides": {"deploy": {"slack": "#support-xp-bots"}, "deploy_failure": {"slack": "#support-xp-bots"}, "test_failure": {"slack": "#support-xp-bots", "environments": ["production"]}, "master_failure": {"slack": "#support-xp-bots"}, "pr_merge": {"slack": "#support-xp-bots"}}, "team_email": "support-tech@lyft.com", "pagerduty_escalation_policy": "Support Platform", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"iam_role": "orca-admin", "region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "languages": ["python"], "image_type": "service", "service_tier": 2, "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "configsets": ["helpdata"], "envoy": {"profile": "python", "settings": {"services": [{"name": "guardian"}, {"name": "guardianbatch"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"dynamodb_iad": null, "google_maps_https": null, "kinesis_iad": null, "zendesk_v2": null, "zendesk": null, "firehose_iad": null}, "internal_hosts": {"ats": null, "cetconcessions": null, "cancels": null, "coupons": null, "driverloyalty": null, "enterprise": null, "fare": null, "green": null, "grow": null, "guardian": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "karma": null, "ledger": null, "modelexecmisc": null, "messaging": null, "payapi": null, "ratelimit": null, "ratings": null, "ridehistory": null, "riderperks": null, "rides": null, "routes": null, "supply": null, "supportcontact": null, "tcs": null, "tolls": null, "users": null, "usergroups": null}, "redis": {"guardianmultiredis": {"port": 6380}}}}}, "logging": {"guardian": {"fields": {"user_id": "keyword", "language": "keyword", "ticket_type": "keyword", "ticket_id": "long", "ride_id": "keyword", "source": "keyword", "interaction_id": "keyword", "pretend": "boolean", "result": "keyword", "automation": "keyword", "reason": "keyword", "user": "keyword", "help_session_id": "keyword", "sr_classify_exp_enabled": "boolean", "init_sr": "keyword", "final_sr": "keyword", "submission_reason": "keyword", "route": "keyword", "driver": "keyword", "coupon_application_id": "keyword", "user_message": "keyword", "amount": "long", "route_id": "keyword", "currency": "keyword", "guardian_reason": "keyword", "coupon_code": "keyword", "coupon_amount": "long", "coupon_currency": "keyword", "driver_fee_amount": "long", "duplicate_check_class": "keyword", "locale": "keyword", "bonus_currency": "keyword", "bonus_amount": "long", "driver_id": "keyword", "refund_result": "keyword", "charges": "keyword", "refunds_to_issue": "keyword", "params": {"classification": "keyword", "note": "keyword", "actor": "keyword", "id": "keyword", "userMessage": "keyword", "amount": "float"}, "uri": "keyword", "job_id": "keyword", "refund_amount_cents": "long", "refund_currency": "keyword", "charge_adjustment_id": "keyword", "amount_before_refund_cents": "keyword", "ride_original_duration_seconds": "long", "ride_original_distance_meters": "long", "ride_recalculated_distance_meters": "long", "ride_recalculated_duration_seconds": "long", "ticket": {"comment": {"public": "boolean", "body": "keyword", "uploads": "keyword"}, "assignee_email": "keyword", "custom_fields": "keyword", "status": "keyword", "additional_tags": "keyword"}, "event_name": "keyword", "user_locale": "keyword", "result_reason": "keyword", "execution_id": "keyword", "response": "keyword", "response_code": "keyword", "response_details": {"type": "keyword", "reason": "keyword", "user_message": "keyword", "ride_original_duration_seconds": "long", "ride_recalculated_distance_meters": "long", "ride_original_distance_meters": "long", "ride_recalculated_duration_seconds": "long", "coupon_refund_percent": "long", "coupon_amount": "long", "coupon_code": "keyword", "coupon_currency": "keyword", "refund_ride_id": "keyword", "refund_amount": "keyword", "amount_before_refund": "keyword", "refund_currency": "keyword", "passed_coupon_code": "keyword"}, "nirvana_result": "keyword", "content_type": "keyword", "concession_reason": "keyword", "amount_cents": "long", "error": "keyword", "filename": "keyword", "agent_email": "keyword", "refund": {"agent_email": "keyword", "charge_id": "keyword", "ride_id": "keyword", "source": "keyword", "concession_reason": "keyword", "current_charge_amount": "long", "submission_reason": "keyword", "currency": "keyword", "user_id": "keyword", "amount_cents": "long"}, "current_charge_amount": "long", "charge_id": "keyword", "bonus_type": "keyword", "automation_reason": "keyword", "token": "keyword"}}, "guardianbatch": {"fields": {"data_key": "keyword", "record_id": "keyword", "zendesk_ticket_id": "long", "event_name": "keyword", "ticket_id": "long", "total_records": "long", "request_url": "keyword"}}}, "version": "e9d8482bbab09ba5040f8dbc96775ef0633447af", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "hadoopinfra": {"name": "hadoopinfra", "description": "This repository contains all the scripts, tools used for provisioning qubole cluster", "repository": "git@github.com:lyft/hadoopinfra.git", "image_type": "service", "languages": ["java", "python"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev"]}], "credentials": true, "slack": "#data-platform-dev", "team_email": "dev-data-platform-notifications@lyft.com", "pagerduty_escalation_policy": "Data Infra Compute", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "bake_time_minutes": 0, "orca": [{"account_name": "lyftqubole", "orca_location": "ops"}, {"account_name": "zimride", "iam_role": "orca-admin", "orca_location": "ops"}]}, {"name": "production", "legacy": true, "orca": [{"account_name": "lyftqubole", "orca_location": "ops"}, {"account_name": "zimride", "iam_role": "orca-admin", "orca_location": "ops"}]}], "service_tier": 2, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "envoy": {"profile": "python", "settings": {"services": [{"name": "hadoopinfra", "traffic_type": "egress_only"}], "common_settings": {"internal_hosts": {"mozartgateway": null, "ratelimit": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "s3_iad": null}}}}, "version": "7ff5279c4359c3171af6e9df3e0d65ca337ed669", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "halodriver": {"name": "halodriver", "description": "service for managing Lyft Media Drivers", "repository": "git@github.com:lyft/halodriver.git", "slack": "#lyft-media-eng-bot", "team_email": "lyft-media-eng@lyft.com", "pagerduty_escalation_policy": "Lyft Media", "image_type": "service", "service_tier": 1, "languages": ["python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "processweeklyearnings", "command": "dumb-init -- service_venv python manage.py process_weekly_earnings --no-dry-run", "sub_image": "k8s", "workdir": "/code/halodriver"}, {"name": "updatedriverlyftuserids", "command": "dumb-init -- service_venv python manage.py auto_update_driver_lyft_user_ids --no-dry-run", "sub_image": "k8s", "workdir": "/code/halodriver"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "halodriver.legacy"]}, {"name": "service_group", "members": ["halodriver.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "halodriver.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "halodriver.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "halodriver.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}, {"name": "processweeklyearnings", "member": "halodriver.processweeklyearnings", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 15 * * 1"}, {"name": "updatedriverlyftuserids", "member": "halodriver.updatedriverlyftuserids", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 15 * * 0"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "processweeklyearnings"}, {"facet": "updatedriverlyftuserids"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "halodriver"}], "common_settings": {"internal_hosts": {"supply": null, "users": null, "ledger": null, "taskqueuenormalweb": null, "taskqueuebulkweb": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}}}}, "logging": {"halodriver": {"fields": {"driver_id": "keyword", "user_id": "keyword", "terminal": "keyword", "message": "keyword", "week": "keyword", "order_id": "keyword"}}}, "version": "c178bfd5943d3c20264f4590bce6a0c3ac1f0b98", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "hammer": {"name": "hammer", "description": "Hammer subjects services to stressors to increase resilience", "repository": "git@github.com:lyft/hammer.git", "image_type": "service", "service_tier": 2, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "slack": "#resilience-bots", "team_email": "resilience-team@lyft.com", "pagerduty_escalation_policy": "Resilience", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv python -m hammer.core.cli tick-forever", "workdir": "/code/hammer", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s"}, {"name": "spin", "command": "sleep infinity", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["control.dev", "hammer.legacy", "sqs.server", "dynamodb.dev", "minio.server"]}, {"name": "integration", "members": ["hammer.dev", "discovery.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "hammer.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "hammer.dev", "container": "hammer.legacy", "command": "make test_integration", "reports": {"junit": "build/local_integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "hammer.service", "type": "worker", "envoy_service": "hammer", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "canary", "member": "hammer.service", "type": "worker", "envoy_service": "hammer", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "spin", "member": "hammer.spin", "type": "worker", "envoy_service": "hammer", "autoscaling": {"min_size": 1, "max_size": 1}}], "configsets": ["chaosdata"], "deploy": [[{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": false}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "staging-k8s", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "spin"}]}], {"name": "canary", "legacy": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": false}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "kubernetes": {"enabled": false}, "targets": [{"facet": "main"}]}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d", "kubernetes": {"enabled": false}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": true, "kubernetes": {"enabled": false}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "hammer"}], "common_settings": {"internal_hosts": {"deployapi": null, "omnibot": null, "pyexample2": null, "pyexample2resilience": null, "team": null}, "external_hosts": {"s3_iad": null, "sqs_iad": null, "dynamodb_iad": null}}}}, "logging": {"hammer": {"fields": {"test_name": "keyword", "uuid": "keyword", "state": "keyword", "test_type": "keyword", "tick_request": "keyword", "weight": "keyword", "ip_address": "keyword", "includeObsoleteMetrics": "keyword", "g": "keyword", "channel": "keyword", "strict": "keyword", "s": "keyword", "message": "keyword", "q": "keyword", "dest": "keyword", "e": "keyword", "aborted": "boolean", "reason": "keyword", "service_name": "keyword"}}}, "version": "ccecfc4ff9c46c32a7ccdd7d8d54961fe495f0a7", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "helium": {"name": "helium", "description": "helium", "repository": "git@github.com:lyft/helium.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "redis.server", "helium.legacy"]}, {"name": "integration", "members": ["autonomous.dev", "helium.dev", "demand.dev", "dispatch.dev", "locations.dev", "pricing.dev", "rides.dev", "routes.dev", "viewport.dev"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "startup", "type": "startup", "group": "helium.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy", "virtualenv": "integration_venv"}, {"name": "integration", "type": "execution", "group": "helium.integration", "container": "helium.legacy", "target": "tests/integration", "command": "make test_integration", "virtualenv": "integration_venv", "float_dependencies": "30 14,23 * * *"}, {"name": "unit_legacy", "type": "execution", "framework": "pytest", "coverage": false, "markers": "unit_legacy", "container": "helium.legacy", "group": "helium.dev", "targets": ["tests/unit"], "virtualenv": "integration_venv"}], "slack": "#pricing-adaptive-dep", "team_email": "adaptive-pricing@lyft.com", "pagerduty_escalation_policy": "Adaptive-Pricing", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "languages": ["python"], "image_type": "service", "service_tier": 2, "pulldeploy_components": {"data": ["regioncfgdata"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "helium"}, {"name": "heliumnewworkers"}], "common_settings": {"internal_hosts": {"autonomous": {"tls_enabled": true}, "demand": {"tls_enabled": true}, "dispatch": {"tls_enabled": true}, "helium": {"tls_enabled": true}, "locations": {"tls_enabled": true}, "pricing": {"tls_enabled": true}, "regions": {"tls_enabled": true}, "rides": {"tls_enabled": true}, "routes": {"tls_enabled": true}, "supply": {"tls_enabled": true}, "viewport": {"tls_enabled": true}}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}, "redis": {"heliummultiredis": {"port": 6380}}}}}, "logging": {"helium": {"fields": {"query": "keyword", "error": "keyword"}}}, "version": "c0c06acc656ef7b3cea5f126250a1d8860f12920", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "help": {"name": "help", "description": "help", "repository": "git@github.com:lyft/help.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "articlecacherefresh", "command": "dumb-init -- service_venv python manage.py article_cache_refresh", "workdir": "/code/help", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "helpdatarefresh", "command": "dumb-init -- service_venv python manage.py help_data_refresh", "workdir": "/code/help", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}], "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "configsets": ["helpdata", "supportcontactdata"], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "redis.dev", "help.legacy"]}, {"name": "integration", "members": ["account.dev", "ats.qa_approve", "auth.dev", "badcompanions.dev", "control.dev", "dispatch.dev", "green.dev", "guardian.dev", "ledger.dev", "legacyapi.dev", "locations.dev", "publicapi.dev", "ridehistory.dev", "riderperks.dev", "rides.dev", "routes.dev", "rentals.dev", "supportcontact.dev", "supportphone.dev", "users.dev", "viewport.dev", "wallet.dev", "help.dev", "chat.dev", "ratings.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "help.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "help.integration", "container": "help.legacy", "command": "make test_integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "team_email": "support-tech@lyft.com", "pagerduty_escalation_policy": "Support XP", "slack": "#support-xp-eng", "notification_overrides": {"deploy": {"slack": "#support-xp-bots"}, "deploy_failure": {"slack": "#support-xp-bots"}, "test_failure": {"slack": "#support-xp-bots", "environments": ["production"]}, "master_failure": {"slack": "#support-xp-bots"}, "pr_merge": {"slack": "#support-xp-bots"}}, "facets": [{"name": "main", "member": "help.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 6}}}}, {"name": "canary", "member": "help.service", "type": "service", "canary": true, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "articlecacherefresh", "member": "help.articlecacherefresh", "type": "cron", "schedule": "0 0 * * *"}, {"name": "helpdatarefresh", "member": "help.helpdatarefresh", "type": "cron", "schedule": "* * * * *"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "main"}, {"facet": "articlecacherefresh"}, {"facet": "helpdatarefresh"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "kubernetes": {"enabled": true}, "targets": {"facet": "main"}}, {"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "kubernetes": {"enabled": true}, "targets": {"facet": "main"}}], {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "articlecacherefresh"}, {"facet": "helpdatarefresh"}], "kubernetes": {"enabled": true}}], "languages": ["python"], "image_type": "service", "service_tier": 1, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:949781cc88ec78616c8cd3d9a22f3bba32c7b743", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "help"}, {"name": "helpbatch"}], "common_settings": {"internal_hosts": {"regions": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null, "contentful_preview": null, "contentful_delivery": null}, "redis": {"helpmultiredis": {"port": 6380}}}, "override_settings": [{"services": [{"name": "help"}], "settings": {"internal_hosts": {"ats": null, "chat": null, "badcompanions": null, "enterprise": null, "guardian": null, "green": null, "grow": null, "jobschedulerbulkweb": null, "ledger": null, "rentals": null, "rides": null, "ridehistory": null, "riderperks": null, "routes": null, "supply": null, "supportcontact": null, "supportconfig": null, "tcs": null, "users": null, "usergroups": null, "www2": null, "ratings": null}, "external_hosts": {"firehose_iad": null, "zendesk_v2": null, "contentful_preview": null, "contentful_delivery": null}}}, {"services": [{"name": "helpbatch"}], "settings": {"external_hosts": {"zendesk": null}}}]}}, "logging": {"help": {"fields": {"user_id": "keyword", "help_session_id": "keyword", "is_driver_app": "boolean", "current_step": "keyword", "next_step": "keyword", "initial_step": "keyword", "help_source": "keyword", "experiment": "keyword", "user_app_version": "keyword", "client_session_id": "keyword", "asset_resolution": "long", "user_app_os": "keyword", "route_id": "keyword", "tcs_result": "keyword", "experiment_os": "keyword", "mark_exposure_result": "boolean", "form_builder_version": "keyword", "helpdata_version": "keyword", "locale": "keyword", "submission_reason": "keyword", "automation": "keyword", "check_already_ran": "boolean", "pretend": "boolean", "js_job_id": "keyword", "templated_words": "keyword", "channel": "keyword", "driver_fee_amount": "long", "ride_id": "keyword", "help_access_point": "keyword", "user_email": "keyword", "support_ticket_fields": {"additional_fields": {"help_session_id": "keyword", "submission_reason": "keyword", "subject": "keyword", "source": "keyword"}, "note_fields": {"automations_results": "keyword"}}, "user_submitted_reason": "keyword", "user_phone": "keyword", "message": "keyword", "article_id": "keyword", "phone_queue": "keyword", "client_type": "keyword", "os": "keyword", "major_app_version": "keyword", "error_code": "long", "error": "keyword", "endpoint": "keyword", "is_internal": "boolean", "initial_step_requested": "keyword", "reason": "keyword", "result": "keyword", "review_reason": "keyword", "driver_id": "keyword", "config_path": "keyword", "phone_number": "keyword", "action_type": "keyword", "is_shadow": "boolean"}}, "helpbatch": {"fields": {"release_id": "keyword"}}}, "version": "e7ac9576116adccae96ab52a212c73f5fa7ba618", "images": [{"parent": {"name": "s2ipython3", "version": "949781cc88ec78616c8cd3d9a22f3bba32c7b743", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "helpadmin": {"name": "helpadmin", "description": "Service to manage help access point content", "repository": "git@github.com:lyft/helpadmin.git", "image_type": "service", "service_tier": 2, "slack": "#support-xp-eng", "team_email": "support-xp@lyft.com", "pagerduty_escalation_policy": "Support XP", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "pulldeploy_components": {"data": ["helpdata"]}, "configsets": ["helpdata"], "groups": [{"name": "dev", "members": ["control.dev", "helpadmin.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "helpadmin.dev"}, {"name": "unit", "type": "execution", "group": "helpadmin.dev", "container": "helpadmin.legacy", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "helpadmin"}]}}, "logging": {"helpadmin": {"fields": {"name": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "errors": "keyword"}}}, "version": "0de5f5068e500fe850fd2bd36b91189e6a758c3b", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "helpdata": {"name": "helpdata", "description": "Static data for helpdata", "repository": "git@github.com:lyft/helpdata.git", "credentials": true, "image_type": "data", "service_tier": 2, "slack": "#support-xp-eng", "notification_overrides": {"deploy": {"slack": "#support-xp-bots"}, "deploy_failure": {"slack": "#support-xp-bots"}, "test_failure": {"slack": "#support-xp-bots", "environments": ["production"]}, "master_failure": {"slack": "#support-xp-bots"}, "pr_merge": {"slack": "#support-xp-bots"}}, "team_email": "support-xp@lyft.com", "pagerduty_escalation_policy": "Support XP", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "languages": ["bash", "python"], "groups": [{"name": "dev", "members": ["control.dev", "helpdata.spin"]}], "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/helpdata"]}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}, {"name": "unit", "type": "jailed", "run_in_dev": false, "command": "make test_unit"}, {"name": "integration", "type": "execution", "virtualenv": "service_venv", "group": "helpdata.dev", "container": "helpdata.spin", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "upstream_tests": {"on_commit": true, "test_set": {"help": ["integration"]}}, "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": false, "orca": []}], "version": "a113fc401f7557349ce5623932ead287e538ea67", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "helpfulbot": {"name": "helpfulbot", "description": "Slack bot to help triage and file issues", "repository": "git@github.com:lyft/helpfulbot.git", "image_type": "service", "service_tier": 3, "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "start_time": 50, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn helpfulbot.app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/helpfulbot", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "helpfulbot.legacy"]}, {"name": "service_group", "members": ["helpfulbot.legacy"]}], "facets": [{"name": "main", "member": "helpfulbot.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "helpfulbot.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "tests": [{"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "helpfulbot"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}}}}, "version": "bede80e65622e7198dda62ea2c6bac131b789f90", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "historian": {"name": "historian", "description": "Historian is a tool for filtering archived historical logs from S3 and indexing them in Elasticsearch to be searched.", "repository": "git@github.com:lyft/containers.git:historian", "team_email": "observability-team@lyft.com", "pagerduty_escalation_policy": "Observability", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "containers": [{"name": "run", "command": "python3.6 -m historian.main"}], "groups": [{"name": "dev", "members": ["historian.run"]}], "tests": [{"name": "unit", "type": "jailed", "command": "pytest tests/unit/"}, {"name": "lint", "type": "jailed", "command": "flake8 ."}, {"name": "mypy", "type": "jailed", "command": "mypy ."}], "deploy": [{"name": "staging", "legacy": false, "automatic": false}, {"name": "production", "legacy": false}], "languages": ["python"], "image_type": "tool", "version": "45dbba6b043d8170fadeb1171950745279ab72fa", "images": [{"parent": {"name": "bionicbase", "version": "8b54209e128ce56da557a466e5caf3d0c4c215c9", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "8b54209e128ce56da557a466e5caf3d0c4c215c9", "sub_image": null, "external": false}}, "hivemetastore": {"name": "hivemetastore", "description": "Hive Metastore Cluster", "repository": "git@github.com:lyft/hivemetastoreinfra.git", "image_type": "service", "languages": ["bash", "java"], "credentials": true, "credentials_legacy": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 240, "exports": [{"name": "hivemetastore", "port": 9083}, {"name": "hiveserver2", "port": 10000}, {"name": "webui", "port": 10002}]}, {"name": "spin", "command": "sleep infinity"}, {"name": "beeline", "command": "/code/hivemetastoreinfra/bin/beeline.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "mysql.dev", "hivemetastore.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "hivemetastore.dev"}, {"name": "checkstyle", "type": "execution", "group": "hivemetastore.dev", "container": "hivemetastore.legacy", "command": "mvn checkstyle:check"}, {"name": "unittest", "type": "execution", "group": "hivemetastore.dev", "container": "hivemetastore.legacy", "command": "mvn test surefire-report:report -Dcheckstyle.skip=true"}, {"name": "integration", "type": "execution", "group": "hivemetastore.dev", "container": "hivemetastore.legacy", "command": "mvn test-compile failsafe:integration-test failsafe:verify -Dcheckstyle.skip=true", "reports": {"failsafe-summary": "target/site/failsafe-report.html"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "test_logs": ["/var/log/hivemetastore/current", "/var/log/hiveserver2/current"], "slack": "#data-platform-dev", "team_email": "dp-analyticsinfra@lyft.com", "pagerduty_escalation_policy": "Data Infra Storage", "deploy": [{"name": "staging", "automatic": true, "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "service_tier": 2, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "logging": {"hivemetastorez": {"fields": {"attempt_num": "long", "traceback": "keyword", "exception": "keyword", "failed_record": "keyword"}}, "hivemetastore": {"fields": {"traceback": "keyword", "attempt_num": "long", "exception": "keyword", "failed_record": "keyword"}}}, "version": "f680c175e1d2a15782b8f4248b0a747b2be98efa", "images": [{"parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}}, "hivetableretention": {"name": "hivetableretention", "description": "Hive Table Retention Engine", "repository": "git@github.com:lyft/hivetableretention.git", "slack": "#data-platform", "team_email": "data-platform-security-dev@lyft.com", "pagerduty_escalation_policy": "Data Security", "containers": [{"name": "code", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["hivetableretention.code"]}], "tests": [{"name": "unittest", "type": "execution", "group": "hivetableretention.dev", "container": "hivetableretention.code", "command": "mvn test -Dcheckstyle.skip=true", "reports": {"junit": "target/surefire-reports/index.html"}}, {"name": "checkstyle", "type": "execution", "group": "hivetableretention.dev", "container": "hivetableretention.code", "command": "mvn -DskipTests checkstyle:check"}], "deploy": [{"name": "development", "automatic": true, "legacy": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "languages": ["java"], "image_type": "library", "version": "29399530e5f11b50a290147c4a4e9e6b8bb8794e", "images": [{"parent": {"name": "java8", "version": "618bd41362cf31fc183c32d94db3cbbf680643bf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "618bd41362cf31fc183c32d94db3cbbf680643bf", "sub_image": null, "external": false}}, "horizon": {"name": "horizon", "description": "Horizon charting utility", "team_email": "bearcage@lyft.com", "slack": "#rswe-tools", "pagerduty_escalation_policy": "Horizon", "repository": "git@github.com:lyft/rswe-tools.git", "image_type": "service", "service_tier": 3, "credentials": true, "languages": ["javascript"], "builder": {"name": "docker_build", "params": {"dockerfile": "horizond/Dockerfile"}}, "containers": [{"name": "service", "command": "/usr/local/bin/horizond server -h /frontend --port 80", "workdir": "/", "limits": {"cpu": 1, "memory": "96Mi"}, "exports": [{"name": "www", "port": 80}]}], "facets": [{"name": "main", "member": "horizon.service", "type": "service", "sidecars": ["heka", "fluentbit", "envoy", "statsd"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "groups": [{"name": "dev", "members": ["control.dev", "horizon.service"]}], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "automatic": true, "bake_time_minutes": 0}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "automatic": true}], "envoy": {"profile": "go", "settings": {"services": [{"name": "horizon"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 10000}}, "hosts_url": "tcp://127.0.0.1:80"}}}}, "version": "e81baf6041aa3ee33bf3c4f254987dec9850b2e1", "images": [{"parent": {"name": "bionicbase", "version": "5fe8989bbb7b0c5bf937176f5293c25709d3233f", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "5fe8989bbb7b0c5bf937176f5293c25709d3233f", "sub_image": null, "external": false}}, "host": {"name": "host", "description": "host config management container", "repository": "git@github.com:lyft/containers.git:host", "slack": "#devx-bots", "team_email": "compute-team@lyft.com", "containers": [{"name": "run", "network": "host", "mounts": ["/srv/host"]}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false}, {"name": "canary", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false}], "languages": ["bash", "python"], "image_type": "tool", "python": {"mypy": {"python_versions": ["3.6"]}}, "version": "69d1a30efe898159d71a7305b3d43def92cb0cc1", "images": [{"parent": {"name": "imagebase", "version": "876dbc1b4548b1b19a192303633555cafa7f9e08", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "876dbc1b4548b1b19a192303633555cafa7f9e08", "sub_image": null, "external": false}}, "hqproxy": {"name": "hqproxy", "description": "Service to proxy requests between Lyft clients and HQ Rentals", "repository": "git@github.com:lyft/hqproxy.git", "slack": "#lr-eng-bots", "team_email": "lr-eng@lyft.com", "pagerduty_escalation_policy": "rentals-eng", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/hqproxy", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "hqproxy.legacy"]}, {"name": "service_group", "members": ["hqproxy.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "hqproxy.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "hqproxy.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "hqproxy.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy_settings": {"window_start": "09:00 America/Los_Angeles", "window_end": "19:00 America/Los_Angeles"}, "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "hqproxy"}], "common_settings": {"internal_hosts": {"consumerrentalspay": null, "coupons": null, "fleetlocations": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "mailer": null, "messaging": null, "push": null, "regions": null, "tcs": null, "users": null, "usergroups": null, "venues": null, "wallet": null}, "external_hosts": {"firehose_iad": null, "hqrentals": null, "kinesis_iad": null}}}}, "logging": {"hqproxy": {"fields": {"user_id": "keyword", "hq_customer_id": "keyword", "reservation_id": "keyword", "exception": {"message": "keyword", "class": "keyword"}}}}, "version": "a494a87b6bedb9328f5923b2665765ae1dd720b4", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "iamrolemanager": {"name": "iamrolemanager", "description": "A service to provision IAM roles.", "repository": "git@github.com:lyft/iamrolemanager.git", "slack": "#security", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "team_email": "security-engineering@lyft.com", "pagerduty_escalation_policy": "Security", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "iamrolemanager.legacy"]}, {"name": "service_group", "members": ["iamrolemanager.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "iamrolemanager.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "terraform-checkformat", "type": "tool", "tool": "terraform.checkformat"}, {"name": "terraform-validate", "type": "tool", "tool": "terraform.validate"}], "deploy": [{"name": "staging", "automatic": true, "bake_time_minutes": 0, "orca": [{"region": "iad", "service_instance": "production", "subargs": "state.highstate test=True"}], "legacy": false}, {"name": "canary", "bake_time_minutes": 0, "orca": [{"region": "iad"}], "legacy": false}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false}]], "orchestrate": {"types": [{"name": "terraform"}], "steps": [{"name": "production"}]}, "version": "3cdda1acb8d92e22241192cfd0e9936b7fcdac22", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "iamrolerepokid": {"name": "iamrolerepokid", "description": "A service to identify and mitigate risks of aws iam roles", "repository": "git@github.com:lyft/iamrolerepokid.git", "slack": "#security", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "team_email": "security-engineering@lyft.com", "pagerduty_escalation_policy": "Security", "image_type": "service", "service_tier": 3, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:3ff3e12c0c0504538f77083e63156b8f8531bcff", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.3258c1df880d24734bd34f6704fc48e8ae774688", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "iamrolerepokid.legacy"]}, {"name": "service_group", "members": ["iamrolerepokid.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "iamrolerepokid.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "iamrolerepokid.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "iamrolerepokid.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "bake_time_minutes": 2, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "bake_time_minutes": 2, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "bake_time_minutes": 2, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "bake_time_minutes": 2, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "bake_time_minutes": 2, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "iamrolerepokid"}]}}, "version": "50c5eafab864999aa7075df242f78e21adcaa8ac", "images": [{"parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "3ff3e12c0c0504538f77083e63156b8f8531bcff", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "3258c1df880d24734bd34f6704fc48e8ae774688", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}}, "iamwait": {"name": "iamwait", "description": "sidecar injector using mutating webhook", "repository": "git@github.com:lyft/k8s-sidecars.git:iamwait", "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "slack": "#compute-bots", "credentials": false, "docs": {"section": "Infrastructure"}, "builder": {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c"}}, "deploy": [{"name": "staging-sidecar-test1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sidecar-test1"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sidecar-test1"]}, "interpolation_vars": {"timeout_in_seconds": 120}}}, [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}, "interpolation_vars": {"timeout_in_seconds": 120}}}, {"name": "staging-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}, "interpolation_vars": {"timeout_in_seconds": 120}}}, {"name": "staging-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "interpolation_vars": {"timeout_in_seconds": 120}}}, {"name": "staging-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "interpolation_vars": {"timeout_in_seconds": 120}}}, {"name": "staging-envoyminimesh", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["envoyminimesh"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["envoyminimesh"]}, "interpolation_vars": {"timeout_in_seconds": 120}}}, {"name": "staging-flink", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flink"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["flink"]}, "interpolation_vars": {"timeout_in_seconds": 120}}}, {"name": "staging-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flyte"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"timeout_in_seconds": 900}}}, {"name": "production-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flyte"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"timeout_in_seconds": 900}}}, {"name": "production-flytecritical", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flytecritical"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"timeout_in_seconds": 900}}}, {"name": "staging-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}, "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}, "interpolation_vars": {"kiam_env": "staging", "timeout_in_seconds": 120}}}], [{"name": "production-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "interpolation_vars": {"timeout_in_seconds": 120}}}, {"name": "production-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"timeout_in_seconds": 120}}}, {"name": "production-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}, "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}, "interpolation_vars": {"kiam_env": "production", "timeout_in_seconds": 120}}}, {"name": "production-titan", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["spark"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["titan"]}, "interpolation_vars": {"timeout_in_seconds": 120}}}, {"name": "production-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}, "interpolation_vars": {"timeout_in_seconds": 120}}}, {"name": "production-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "interpolation_vars": {"timeout_in_seconds": 120}}}, {"name": "production-devkube", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}, "interpolation_vars": {"timeout_in_seconds": 120}}}, {"name": "production-devkubestaging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkubestaging"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}, "interpolation_vars": {"timeout_in_seconds": 120}}}, {"name": "production-lyftlearn-av", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn-av"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml-av"]}, "interpolation_vars": {"timeout_in_seconds": 120}}}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}, "interpolation_vars": {"timeout_in_seconds": 120}}}], "languages": ["go"], "image_type": "service", "service_tier": 3, "version": "8a3b1cb9dbb132b1d973b7a8ce9da8220429e8c0", "images": [{"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}}, "icebrains": {"name": "icebrains", "description": "TODO short description of the service", "repository": "git@github.com:lyft/icebrains.git", "report_ci": true, "credentials": true, "slack": "#capacity", "team_email": "capacity@lyft.com", "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["bash", "python"], "image_type": "library", "version": "38dca8998ff54021cce5c86071fea7e441c9afc4", "images": [{"parent": {"name": "pythonlibrary", "version": "deaed2a14d7a49007c91d03310e837b6d186eed6", "external": false}, "sub_image": null}], "parent": {"name": "pythonlibrary", "version": "deaed2a14d7a49007c91d03310e837b6d186eed6", "external": false}}, "idgraph": {"name": "idgraph", "repository": "git@github.com:lyft/idgraph.git", "description": "gRPC interface to a well-typed, fact graph of customer identities and their relationships.", "service_tier": 2, "team_email": "identity-eng@lyft.com", "pagerduty_escalation_policy": "Identity Eng", "slack": "#identity-eng", "notification_overrides": {"pr_open": {"slack": "#identity-prs"}, "deploy": {"slack": "#identity-bots"}, "deploy_failure": {"slack": "#identity-bots"}, "test_failure": {"slack": "#identity-bots"}, "master_failure": {"slack": "#identity-bots"}, "pr_merge": {"slack": "#identity-bots"}, "behind_notifications": {"slack": "#identity-bots"}}, "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:8ad0040e2e37145a4ff8cdfc6669f48462d32b14", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- idgraph", "workdir": "/code/idgraph", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600, "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "idgraph.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "idgraph.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "idgraph.dev", "container": "idgraph.legacy", "command": "make integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "idgraph.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "idgraph.service", "type": "service", "canary": true, "labels": {"canary": "true"}, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {}, "services": [{"name": "idgraph"}]}}, "logging": {"idgraph": {"fields": {"err": "keyword"}}}, "version": "8ab0158977b626368463587db73effa497908b96", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "8ad0040e2e37145a4ff8cdfc6669f48462d32b14", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "idl": {"name": "idl", "description": "protobuf generators", "repository": "git@github.com:lyft/idl.git", "pagerduty_escalation_policy": "IDL Tools", "slack": "#idl-bots", "team_email": "idl-tools@lyft.com", "image_type": "tool", "credentials": true, "languages": ["go", "python"], "containers": [{"name": "github", "command": "bash -c 'make -C /go/src/github.com/lyft/idl release_github'", "limits": {"cpu": 16, "memory": "32Gi"}}, {"name": "fdsetaws", "command": "bash -c 'make -C /go/src/github.com/lyft/idl release_fdset_aws'"}, {"name": "androidbazel", "command": "bash -c 'make -C /go/src/github.com/lyft/idl release_android_bazel'", "limits": {"cpu": 8, "memory": "16Gi"}}, {"name": "avidljava", "command": "bash -c 'make -C /go/src/github.com/lyft/idl release_avidl_java'", "limits": {"cpu": 8, "memory": "16Gi"}}, {"name": "avidljs", "command": "bash -c 'make -C /go/src/github.com/lyft/idl release_avidl_js'"}, {"name": "avidlpython", "command": "bash -c 'make -C /go/src/github.com/lyft/idl release_avidl_python'"}, {"name": "eventsidl", "command": "bash -c 'make -C /go/src/github.com/lyft/idl release_eventsidl'"}, {"name": "java", "command": "bash -c 'make -C /go/src/github.com/lyft/idl release_java'", "limits": {"cpu": 8, "memory": "20Gi"}}, {"name": "js", "command": "bash -c 'make -C /go/src/github.com/lyft/idl release_js'"}, {"name": "pythonproduction", "command": "bash -c 'make -C /go/src/github.com/lyft/idl release_python_production'"}, {"name": "swift", "command": "bash -c 'make -C /go/src/github.com/lyft/idl release_swift'"}, {"name": "generate", "command": "./idlctl generate"}, {"name": "genservice", "command": "/go/src/github.com/lyft/idl/script/gen-wrapper", "mounts": ["/code"]}, {"name": "test", "command": "./script/test-arg"}, {"name": "spin", "command": "sleep infinity"}, {"name": "service", "command": "make server", "mounts": ["/home"]}, {"name": "protolockupdate", "command": "make update-protolock"}, {"name": "lintall", "command": "./script/lint-all"}, {"name": "lintcommit", "command": "./script/lint-commit"}], "facets": [{"name": "github", "member": "idl.github", "type": "job"}, {"name": "fdsetaws", "member": "idl.fdsetaws", "type": "job"}, {"name": "java", "member": "idl.java", "type": "job"}, {"name": "androidbazel", "member": "idl.androidbazel", "type": "job"}, {"name": "swift", "member": "idl.swift", "type": "job"}, {"name": "js", "member": "idl.js", "type": "job"}, {"name": "pythonproduction", "member": "idl.pythonproduction", "type": "job"}, {"name": "avidljava", "member": "idl.avidljava", "type": "job"}, {"name": "avidljs", "member": "idl.avidljs", "type": "job"}, {"name": "avidlpython", "member": "idl.avidlpython", "type": "job"}, {"name": "eventsidl", "member": "idl.eventsidl", "type": "job"}], "groups": [{"name": "generator", "members": ["idl.spin"]}, {"name": "server", "members": ["dnsmasq.server", "envoy.server", "idl.service"]}], "tests": [{"name": "lint-deploy-stages", "type": "jailed", "command": "script/lint-deploy-stages"}, {"name": "lint-all", "type": "jailed", "command": "script/lint-all"}, {"name": "doctoc-is-updated", "type": "jailed", "command": "script/test-doctoc", "autotrigger": false}, {"name": "generation", "group": "idl.generator", "container": "idl.spin", "type": "execution", "command": "make tests"}, {"name": "android-apigen", "group": "idl.generator", "container": "idl.spin", "type": "execution", "command": "make test-android-apigen"}, {"name": "ios-integration", "group": "idl.generator", "container": "idl.spin", "type": "execution", "command": "make test-ios-integration", "run_in_dev": false}, {"name": "package-publish", "group": "idl.generator", "container": "idl.spin", "type": "execution", "command": "make test-package-publish-action", "autotrigger": false}, {"name": "idlctl", "type": "jailed", "command": "make idlctl-test"}, {"name": "tests", "type": "jailed", "command": "make tests", "autotrigger": false}, {"name": "protolock-backward-compatibility", "type": "execution", "group": "idl.generator", "container": "idl.spin", "command": "make test-protolock", "run_in_dev": false}], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production-github", "legacy": false, "automatic": true, "targets": [{"facet": "github"}], "orca": [{"region": "iad", "service_instance": "production"}], "role": "idl-production-iad", "links": [{"text": "TODO link to pipeline runbook", "url": "https://lyft.com"}]}, [{"name": "production-python_production", "legacy": false, "automatic": true, "targets": [{"facet": "pythonproduction"}], "orca": [{"region": "iad", "service_instance": "production"}], "role": "idl-production-iad", "links": [{"text": "TODO link to python packaging docs", "url": "https://lyft.com"}]}, {"name": "production-android_bazel", "legacy": false, "automatic": true, "targets": [{"facet": "androidbazel"}], "orca": [{"region": "iad", "service_instance": "production"}], "role": "idl-production-iad"}, {"name": "production-swift", "legacy": false, "automatic": true, "targets": [{"facet": "swift"}], "orca": [{"region": "iad", "service_instance": "production"}], "role": "idl-production-iad"}, {"name": "production-js", "legacy": false, "automatic": true, "targets": [{"facet": "js"}], "orca": [{"region": "iad", "service_instance": "production"}], "role": "idl-production-iad", "links": [{"text": "TODO link to js docs", "url": "https://lyft.com"}]}, {"name": "production-eventsidl", "legacy": false, "automatic": true, "targets": [{"facet": "eventsidl"}], "orca": [{"region": "iad", "service_instance": "production"}], "role": "idl-production-iad"}, {"name": "production-java", "legacy": false, "automatic": true, "targets": [{"facet": "java"}], "orca": [{"region": "iad", "service_instance": "production"}], "role": "idl-production-iad"}, {"name": "production-avidl_python", "legacy": false, "automatic": true, "targets": [{"facet": "avidlpython"}], "orca": [{"region": "iad", "service_instance": "production"}], "role": "idl-production-iad"}, {"name": "production-avidl_js", "legacy": false, "automatic": true, "targets": [{"facet": "avidljs"}], "orca": [{"region": "iad", "service_instance": "production"}], "role": "idl-production-iad"}, {"name": "production-avidl_java", "legacy": false, "automatic": true, "targets": [{"facet": "avidljava"}], "orca": [{"region": "iad", "service_instance": "production"}], "role": "idl-production-iad"}, {"name": "production-fdset_aws", "legacy": false, "automatic": true, "targets": [{"facet": "fdsetaws"}], "orca": [{"region": "iad", "service_instance": "production"}], "role": "idl-production-iad"}], {"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad"}], "role": "idl-production-iad", "links": [{"text": "NB: this stage is a no-op", "url": "https://github.com/lyft/idl/blob/master/manifest.yaml"}]}], "docs": {"disable": true}, "version": "473d9c21825c21a0c5457acbd6642854a3fc90c1", "images": [{"parent": {"name": "pythonlibrary", "version": "52565545501485df31359240edaf25b18805a79a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "pythonlibrary", "version": "52565545501485df31359240edaf25b18805a79a", "sub_image": null, "external": false}}, "imagehealthcheck": {"name": "imagehealthcheck", "description": "Container to perform a health check on your image", "repository": "git@github.com:lyft/containers.git:imagehealthcheck", "slack": "#devx-bots", "team_email": "devx-team@lyft.com", "containers": [{"name": "check", "command": "/code/containers/imagehealthcheck/entrypoint.py", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "parents", "command": "python3 -m imagehealthcheck.parents", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "imagerot", "command": "python3 -m imagehealthcheck.imagerot", "mounts": ["/var/run/docker_sockets", "/srv/control", "/etc/cloudenv"]}, {"name": "webserver", "command": "sh -c \"cd /tmp/share; python3 -m http.server 8080\"", "exports": [{"name": "web", "port": 8080}]}], "groups": [{"name": "parentsdev", "members": ["dnsmasq.server", "metadataproxy.server", "imagehealthcheck.parents"]}, {"name": "imagerotdev", "members": ["dnsmasq.server", "metadataproxy.server", "envoy.server", "imagehealthcheck.webserver", "imagehealthcheck.imagerot"]}], "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}]}], "languages": ["python"], "python": {"mypy": {"python_versions": ["3.6"]}}, "image_type": "tool", "service_tier": 3, "version": "030243ce707b234ca2e33f131b388afc37da17a3", "images": [{"parent": {"name": "bionicbase", "version": "1465fc64827615a5c64953de33475e334c836b90", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "1465fc64827615a5c64953de33475e334c836b90", "sub_image": null, "external": false}}, "imageryingest": {"name": "imageryingest", "description": "Service to process, ingest, and access imagery data", "repository": "git@github.com:lyft/imageryingest.git", "image_type": "service", "service_tier": 2, "slack": "#av-kn-viz-bots", "pagerduty_escalation_policy": "AV Knowledge Visualization", "team_email": "talos@lyft.com", "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:3258c1df880d24734bd34f6704fc48e8ae774688", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:b3a6d48dc9c6678285cea7a073aeb8b4e0108a85", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/imageryingest", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "7.5Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "images.dev", "imageryingest.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "imageryingest.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "imageryingest.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}], "automatic": true}, [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true, "acl": {"admin_policies": ["kubernetes-imageryingest"]}}, "targets": [{"facet": "main"}]}], {"name": "canary", "legacy": false, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false}, {"name": "production-k8s", "legacy": false, "kubernetes": {"enabled": true, "acl": {"admin_policies": ["kubernetes-imageryingest"]}}, "automatic": true, "targets": [{"facet": "main"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "imageryingest"}], "common_settings": {"internal_hosts": {"images": null}, "external_hosts": {"s3_iad": null}}}}, "logging": {"imageryingest": {"fields": {"current_time": "keyword", "expires_at": "keyword"}}}, "version": "7f0af23b74f4c7f2371a41daae9b3427fdd2e803", "images": [{"parent": {"name": "opsbase", "version": "c4b1fc1f3946f518018c6e4570f3de53f4eb880b", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "3258c1df880d24734bd34f6704fc48e8ae774688", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "b3a6d48dc9c6678285cea7a073aeb8b4e0108a85", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "c4b1fc1f3946f518018c6e4570f3de53f4eb880b", "sub_image": null, "external": false}}, "images": {"name": "images", "description": "images", "repository": "git@github.com:lyft/images.git", "slack": "#do-eng-all", "team_email": "do-funnel@lyft.com", "pagerduty_escalation_policy": "Driver Applicant Onboarding", "notification_overrides": {"deploy": {"slack": "#do-funnel-bots", "environments": ["canary", "production"]}, "deploy_failure": {"slack": "#do-funnel-bots"}, "pr_merge": {"slack": "#do-funnel-bots"}, "behind_notifications": {"slack": "#do-funnel-bots"}}, "image_type": "service", "service_tier": 1, "languages": ["python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "sqs.server", "images.legacy"]}, {"name": "e2e", "members": ["images.dev", "supplyrecords.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "images.dev"}, {"name": "unit", "type": "execution", "group": "images.dev", "container": "images.legacy", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "images.e2e", "container": "images.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, [{"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "images"}, {"name": "imagesworkers"}], "common_settings": {"internal_hosts": {"jobschedulernormalweb": {"tls_enabled": true}, "accidents": {"tls_enabled": true}, "amundsenfrontend": {"tls_enabled": true}, "ats": {"tls_enabled": true}, "autonomous": {"tls_enabled": true}, "claims": {"tls_enabled": true}, "family": {"tls_enabled": true}, "images": {"tls_enabled": true}, "imageryingest": {"tls_enabled": true}, "supplyrecords": {"tls_enabled": true}, "onboardingflow": {"tls_enabled": true}}, "external_hosts": {"kinesis_iad": null}}}}, "logging": {"images": {"fields": {"service": "keyword", "path": "keyword", "url": "keyword", "svc_path": "keyword", "key": "keyword"}}, "imagesworkers": {"fields": {"path": "keyword", "service": "keyword", "job_type": "keyword", "status_code": "long", "output_image_url": "keyword", "message_body": "keyword"}}}, "version": "a1b1aba398cf29371274252617fabcfcdc8644b6", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "imagescanner": {"name": "imagescanner", "description": "Service for scanning images for security vulnerabilities and keeping up-to-date with new vulnerabilities", "repository": "git@github.com:lyft/imagescanner.git", "image_type": "service", "team_email": "provisioning-team@lyft.com", "slack": "#prov", "pagerduty_escalation_policy": "Provisioning", "service_tier": 3, "languages": ["go"], "credentials": true, "containers": [{"name": "service", "command": "/code/imagescanner/entrypoint.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "imagescanner.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "imagescanner.dev"}, {"name": "unit", "type": "jailed", "group": "imagescanner.dev", "container": "imagescanner.service", "command": "make tests"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "path": "deploy", "clusterLabels": {"cluster.lyft.net/role": "infra"}}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "path": "deploy", "clusterLabels": {"cluster.lyft.net/role": "infra"}}}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "path": "deploy", "clusterLabels": {"cluster.lyft.net/role": "infra"}}}], "version": "62d83f9899aa37498de84e907f96d2c9f3080d9f", "images": [{"parent": {"name": "go", "version": "d1d00832ce7c0a2ca7bc2a2ad1282534dd67417c", "external": false}, "sub_image": null}], "parent": {"name": "go", "version": "d1d00832ce7c0a2ca7bc2a2ad1282534dd67417c", "external": false}}, "imgworker": {"name": "imgworker", "description": "Processes passenger photo uploads using an SQS worker", "repository": "git@github.com:lyft/image-worker.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "sqs.server", "imgworker.legacy"]}], "tests": [{"name": "start", "type": "startup", "group": "imgworker.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#identity-eng", "team_email": "identity-eng@lyft.com", "pagerduty_escalation_policy": "Identity Eng", "notification_overrides": {"pr_open": {"slack": "#identity-prs"}, "deploy": {"slack": "#identity-bots"}, "deploy_failure": {"slack": "#identity-bots"}, "test_failure": {"slack": "#identity-bots"}, "master_failure": {"slack": "#identity-bots"}, "pr_merge": {"slack": "#identity-bots"}, "behind_notifications": {"slack": "#identity-bots"}}, "pagerduty_target": "ats", "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "languages": ["python"], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "imgworker"}], "common_settings": {"external_hosts": {"s3_iad": null, "sqs_iad": null}, "internal_hosts": {"users": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "version": "4818c8ff5f975ccfdffb9ece623f679d6674ec1c", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "incentiveconfig": {"name": "incentiveconfig", "description": "Handles configuration and creation of automatic incentives", "repository": "git@github.com:lyft/incentiveconfig.git", "image_type": "service", "languages": ["python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent --worker-connections=1000 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/incentiveconfig", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "updatebudgetcron", "command": "dumb-init -- service_venv python manage.py update_budgets", "workdir": "/code/incentiveconfig", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}}, {"name": "runearningsguaranteecreationcron", "command": "dumb-init -- service_venv python manage.py create_guarantee_incentives", "workdir": "/code/incentiveconfig", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi"}}, {"name": "dryrunridechallengescreationcron", "command": "dumb-init -- service_venv python manage.py create_ride_challenges --dryrun", "workdir": "/code/incentiveconfig", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi"}}, {"name": "earningsguaranteecreation", "command": "dumb-init -- service_venv python manage.py create_guarantee_incentives", "workdir": "/code/incentiveconfig", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "8Gi"}}, {"name": "ridechallengescreation", "command": "dumb-init -- service_venv python manage.py create_ride_challenges", "workdir": "/code/incentiveconfig", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "8Gi"}}, {"name": "updatebudgetconfig", "command": "dumb-init -- service_venv python manage.py update_budgets", "workdir": "/code/incentiveconfig", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "8Gi"}}], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "packages": ["openssl", "libssl-dev", "libspatialindex-dev", "libgeos-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "facets": [{"name": "main", "member": "incentiveconfig.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 5}}, "criteria": {"cpu_target": 50}}}, {"name": "canary", "member": "incentiveconfig.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "updatebudgetcron", "member": "incentiveconfig.updatebudgetcron", "type": "cron", "schedule": "50 21 * * 2,4"}, {"name": "runearningsguaranteecreationcron", "member": "incentiveconfig.runearningsguaranteecreationcron", "type": "cron", "schedule": "0,30 19-23 * * 5"}, {"name": "dryrunridechallengescreationcron", "member": "incentiveconfig.dryrunridechallengescreationcron", "type": "cron", "schedule": "0 18 * * 5"}, {"name": "ridechallengescreationcron", "member": "incentiveconfig.ridechallengescreation", "type": "cron", "schedule": "0,30 19-23 * * 5"}, {"name": "earningsguaranteecreation", "member": "incentiveconfig.earningsguaranteecreation", "type": "batch"}, {"name": "ridechallengescreation", "member": "incentiveconfig.ridechallengescreation", "type": "batch"}, {"name": "updatebudgetconfig", "member": "incentiveconfig.updatebudgetconfig", "type": "batch"}], "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "envoy.server", "dynamodb.server", "lyftidl.server", "incentiveconfig.legacy"]}, {"name": "integration", "members": ["incentiveconfig.dev", "jobscheduler.dev", "regions.dev"]}, {"name": "e2e", "members": ["incentiveconfig.integration", "ridechallenges.e2e"]}], "tests": [{"name": "startup", "type": "startup", "group": "incentiveconfig.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "incentiveconfig.integration", "container": "incentiveconfig.legacy", "command": "make test_integration", "reports": {"junit": "build/integration.xml", "cobertura": "build/integration_coverage.xml"}}, {"name": "coverage", "type": "execution", "container": "incentiveconfig.legacy", "group": "incentiveconfig.integration", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "e2e", "type": "execution", "command": "make test_e2e", "group": "incentiveconfig.e2e", "container": "incentiveconfig.legacy", "target": "e2e", "virtualenv": "service_venv", "autotrigger": false, "float_dependencies": "*/60 5-22 * * *", "reports": {"junit": "build/e2e_integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#driver-engagement-dev", "team_email": "supplylevers@lyft.com", "pagerduty_escalation_policy": "Driver Engagement", "deploy": [{"name": "staging", "automatic": true, "legacy": false, "bake_time_minutes": 5, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}, {"facet": "earningsguaranteecreation"}, {"facet": "ridechallengescreation"}, {"facet": "updatebudgetcron"}, {"facet": "updatebudgetconfig"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "bake_time_minutes": 5, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "bake_time_minutes": 5, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "bake_time_minutes": 5, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"legacy": false, "name": "production", "bake_time_minutes": 5, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "earningsguaranteecreation"}, {"facet": "ridechallengescreation"}, {"facet": "runearningsguaranteecreationcron"}, {"facet": "updatebudgetcron"}, {"facet": "dryrunridechallengescreationcron"}, {"facet": "updatebudgetconfig"}, {"facet": "ridechallengescreationcron"}], "kubernetes": {"enabled": true}}]], "python": {"include": ["app"]}, "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "incentiveconfig"}, {"name": "incentiveconfigbatch"}], "common_settings": {"internal_hosts": {"detargetingapi": null, "incentiveconfig": null, "incentiveguarantees": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "messaging": null, "regions": null, "regionsadmin": null, "ridechallenges": null, "supply": null, "tcs": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "redis": {"incentiveconfigmultiredis": {"port": 6380, "op_timeout_ms": 400}}}}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "logging": {"incentiveconfig": {"fields": {"driver_id": "keyword", "send_time_ms": "keyword", "exception": "keyword", "targeting_row": {"t5_bonus_amount": "keyword", "t1_req": "keyword", "t3_req": "keyword", "t4_bonus_amount": "keyword", "t3_bonus_amount": "keyword", "t4_req": "keyword", "t5_req": "keyword", "experiment": "keyword", "variant": "keyword", "t1_bonus_amount": "keyword", "driver_region": "keyword", "t2_req": "keyword", "t2_bonus_amount": "keyword", "lyft_id": "keyword", "allocation_id": "keyword"}, "pay_period_str": "date", "user_id": "keyword", "message_template_id": "keyword", "email_data": {"dedupe_key": "keyword"}, "earnings_guarantee_offer_id": "keyword"}}, "incentiveconfigbatch": {"fields": {"pay_period": "date", "region": "keyword", "response": "keyword", "driver_id": "keyword", "s3_name": "keyword", "cohort": "keyword", "regions": "keyword", "control_drivers_enqueued": "long", "opted_in_regions": "keyword", "offers_enqueued": "long"}}}, "version": "fc2ba3f685f3b9d398c3ab563d91e14cd4483792", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "incentiveguarantees": {"name": "incentiveguarantees", "description": "Service that handles guaranteed incentives", "repository": "git@github.com:lyft/incentiveguarantees.git", "image_type": "service", "service_tier": 1, "slack": "#driver-incentives-bots", "team_email": "de-retention@lyft.com", "pagerduty_escalation_policy": "DE Retention", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent --worker-connections=1000 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/incentiveguarantees", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "auditcron", "command": "dumb-init -- service_venv python manage.py audit_offers_in_time_range", "workdir": "/code/incentiveguarantees", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "createoffersstaging", "command": "dumb-init -- service_venv python manage.py create_offers_staging", "workdir": "/code/incentiveguarantees", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "auditoffers", "command": "dumb-init -- service_venv python manage.py audit_offers", "workdir": "/code/incentiveguarantees", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "auditoffersintimerange", "command": "dumb-init -- service_venv python manage.py audit_offers_in_time_range", "workdir": "/code/incentiveguarantees", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "8Gi"}}, {"name": "offercreationqa", "command": "dumb-init -- service_venv python manage.py create_offers", "workdir": "/code/incentiveguarantees", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "4Gi"}}, {"name": "deleteoffers", "command": "dumb-init -- service_venv python manage.py delete_offers", "workdir": "/code/incentiveguarantees", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "4Gi"}}], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["openssl", "libssl-dev", "libspatialindex-dev", "libgeos-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "facets": [{"name": "main", "member": "incentiveguarantees.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 2, "max_size": 8}}, "criteria": {"cpu_target": 50}}}, {"name": "canary", "member": "incentiveguarantees.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "createoffersstaging", "member": "incentiveguarantees.createoffersstaging", "type": "cron", "schedule": "0 12 * * *"}, {"name": "auditcron", "member": "incentiveguarantees.auditcron", "type": "cron", "schedule": "0 19 * * *"}, {"name": "auditoffers", "member": "incentiveguarantees.auditoffers", "type": "batch"}, {"name": "auditoffersintimerange", "member": "incentiveguarantees.auditoffersintimerange", "type": "batch"}, {"name": "offercreationqa", "member": "incentiveguarantees.offercreationqa", "type": "batch"}, {"name": "deleteoffers", "member": "incentiveguarantees.deleteoffers", "type": "batch"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "incentiveguarantees.legacy"]}, {"name": "integration", "members": ["incentiveguarantees.dev", "incentiveconfig.dev", "jobscheduler.dev", "messaging.dev", "usergroups.dev", "users.dev", "push.dev"]}, {"name": "e2e", "members": ["incentiveguarantees.integration", "account.dev", "ats.qa_approve", "cancels.dev", "dispatch.dev", "dispatchavailability.integration", "driverridesinfo.dev", "dsfeatures.dev", "dynamodb.dev", "fanner.dev", "green.dev", "karma.dev", "locations.dev", "ridesapi.dev", "routes.dev", "tcs.dev", "trips.dev", "tripsapi.dev", "venues.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "incentiveguarantees.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "container": "incentiveguarantees.legacy", "group": "incentiveguarantees.integration", "command": "make test_integration", "reports": {"junit": "build/local_integration.xml"}}, {"name": "coverage", "type": "execution", "container": "incentiveguarantees.legacy", "group": "incentiveguarantees.integration", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "e2e", "type": "execution", "command": "make test_e2e", "group": "incentiveguarantees.e2e", "container": "incentiveguarantees.legacy", "virtualenv": "integration_venv", "target": "e2e_tests", "autotrigger": false, "float_dependencies": "30 5-22 * * *", "reports": {"junit": "build/e2e_integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}, {"facet": "auditoffers"}, {"facet": "auditoffersintimerange"}, {"facet": "createoffersstaging"}, {"facet": "auditcron"}, {"facet": "offercreationqa"}, {"facet": "deleteoffers"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "auditoffers"}, {"facet": "auditoffersintimerange"}, {"facet": "auditcron"}, {"facet": "deleteoffers"}], "kubernetes": {"enabled": true}}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "incentiveguarantees"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 900}}}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "sqs_iad": null}, "internal_hosts": {"incentiveguarantees": null, "jobschedulerbulkweb": null, "ledger": null, "messaging": null, "push": null, "regions": null, "rides": null, "ridesapi": null, "routes": null, "supply": null, "tcs": null, "users": null, "usergroups": null}}}}, "logging": {"incentiveguarantees": {"fields": {"driver_id": "keyword", "is_simulated": "boolean", "end_time_ms": "keyword", "start_time_ms": "keyword", "offer_id": "keyword", "region": "keyword", "variant_name": "keyword", "experiment_name": "keyword", "offer_type": "keyword", "event_type": "keyword", "ride_id": "keyword", "accepted_at_ms": "keyword", "instant_payout": "boolean", "messaging_key": "keyword", "ride_req": "long", "guarantee_currency": "keyword", "guarantee_amount_minor": "long", "approved_by": "keyword", "allocation_id": "keyword", "end_window_start_ms": "keyword", "audit_blocked": "boolean", "dry_run": "boolean", "end_window_end_ms": "keyword", "bonus_amount_minor": "long", "guaranteed_amount": "long", "post_commission_earnings": "long", "ledger_order_id": "keyword", "amount": {"currency": "keyword", "exponent": "long", "amount": "long"}, "code": "long", "start_time": "keyword", "end_time": "keyword", "existing_offer_type": "keyword", "new_offer_type": "keyword", "created_at_ms": "keyword", "sequence_id": "long", "updated_at_ms": "keyword", "guarantee_struct": {"guarantee_currency": "keyword", "guarantee_amount_minor": "long"}, "id": "keyword", "actual_earnings_amount_minor": "long", "ledger_status": "long", "error": "keyword", "order_id": "keyword", "more_than_24_hour_delay": "boolean", "ride_ids": "keyword", "offer_ride_req": "long", "length_rides_from_service": "long", "ride_difference": "long", "completed_rides": "keyword", "bonus_paid": "long", "exception": {"message": "keyword", "class": "keyword"}, "event_id": "keyword", "route_accept_ms": "keyword", "route_id": "keyword", "event_name": "keyword", "driver_lyft_id": "keyword", "occurred_at": "keyword", "bonus_earned_at_ms": "keyword", "delight_moment_type": "keyword", "error_code": "long", "error_message": "keyword"}}, "incentiveguaranteesbatch": {"fields": {"num_failed_offers": "long", "num_succeeded_offers": "long", "between_from": "keyword", "offers_counted": "long", "between_to": "keyword", "time_taken_ms": "long", "end_window_end_ms": "keyword", "scheduled_offer_count": "long", "end_window_start_ms": "keyword"}}}, "version": "1379653bb9d417629f9cfd3e6c75a44bd9b94ced", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "incentiveshistory": {"name": "incentiveshistory", "description": "A service to view driver offers from the old incentives service", "repository": "git@github.com:lyft/incentiveshistory.git", "slack": "#driver-engagement-dev", "team_email": "supplylevers@lyft.com", "pagerduty_escalation_policy": "Driver Engagement", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:36518650f40787ad43faa9717259a01880989029", "packages": ["libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/incentiveshistory", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "migratefailed", "command": "dumb-init -- service_venv python manage.py migrate_failed", "workdir": "/code/incentiveshistory", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "incentiveshistory.legacy"]}, {"name": "integration", "members": ["incentiveshistory.dev"]}, {"name": "service_group", "members": ["incentiveshistory.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "incentiveshistory.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "container": "incentiveshistory.legacy", "group": "incentiveshistory.integration", "command": "make test_integration", "reports": {"junit": "build/local_integration.xml"}}], "facets": [{"name": "main", "member": "incentiveshistory.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "incentiveshistory.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}, {"name": "migratefailed", "member": "incentiveshistory.migratefailed", "type": "batch"}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "migratefailed"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "incentiveshistory"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"rides": null, "ridesapi": null}}}}, "version": "1d5c96a665ce113e897a7a81918268a6773f5fc2", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "incentivesint": {"name": "incentivesint", "description": "Internal tools for the science and engineering team of Driver Engagement", "repository": "git@github.com:lyft/incentivesint.git", "image_type": "service", "service_tier": 3, "slack": "#de-positioning-deploy", "team_email": "rtsm-eng@lyft.com", "pagerduty_escalation_policy": "Driver Positioning", "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "8.12.0-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "incentivesint.legacy"]}, {"name": "integration", "members": ["incentivesint.dev", "driverheatmaps.dev", "incentiveconfig.dev", "tom.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "incentivesint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "deploy": [{"name": "staging", "legacy": true, "bake_time_minutes": 5, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "bake_time_minutes": 5, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "incentivesint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"tom": null}}}}, "version": "c9dde3977482a0de1693ba932f83a6cdb9bce632", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "incentiveslib": {"name": "incentiveslib", "description": "Incentives common library", "slack": "#driver-engagement-dev", "team_email": "driver-engagement@lyft.com", "repository": "git@github.com:lyft/python-incentives-lib.git", "credentials": false, "credentials_legacy": false, "containers": [{"name": "devel", "command": "/bin/bash -c 'while true; do sleep 3600; done'"}], "tests": [{"name": "python2", "type": "jailed", "command": "py.test tests/"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["python"], "image_type": "library", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "b66a8d0cc00738df2c9f28655b676652c5708379", "images": [{"parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}}, "incentivesmodels": {"name": "incentivesmodels", "description": "Data science models for driver incentives", "repository": "git@github.com:lyft/incentivesmodels.git", "image_type": "lambda", "slack": "#planned-levers-sci-public", "team_email": "de-supply-levers-science@lyft.com", "pagerduty_escalation_policy": "DE Retention", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/lyftlearnnotebook:f37e125cff171789c0d5aac9fd1efc2ea4ae3834"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.rpy", "sub_image": "rpy"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/lyftlearnspark:66c568f8ecd2097d9f965baf52b8696dd8ed1dad", "packages": ["wget"], "sub_image": "spark"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "coverage", "type": "jailed", "command": "make coverage"}], "containers": [{"name": "spin", "command": "sleep infinity"}], "deploy": [{"name": "production", "legacy": false}], "lyftlearn": {}, "languages": ["python"], "version": "15f6339ecef7610a69cd13b2513446cc59066e91", "images": [{"parent": {"name": "lyftlearnnotebook", "version": "f37e125cff171789c0d5aac9fd1efc2ea4ae3834", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "pythonlyftintrepidstdlib", "version": "cbb69366d53469765750e70b31e38aed2ddbff1c", "sub_image": "rimage", "external": false}, "sub_image": "rpy"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "lyftlearnspark", "version": "66c568f8ecd2097d9f965baf52b8696dd8ed1dad", "sub_image": null, "external": false}, "sub_image": "spark"}], "parent": {"name": "lyftlearnnotebook", "version": "f37e125cff171789c0d5aac9fd1efc2ea4ae3834", "sub_image": null, "external": false}}, "incidentassistant": {"name": "incidentassistant", "description": "Service to help engineers manage incidents when they happen", "repository": "git@github.com:lyft/incidentassistant.git", "image_type": "service", "service_tier": 3, "slack": "#incident-assistant", "notification_overrides": {"deploy": {"slack": "#prod-tools", "environments": ["production", "canary", "staging"]}}, "team_email": "production-tools@lyft.com", "pagerduty_escalation_policy": "Prod Tools", "languages": ["bash", "javascript", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "http", "port": 80}]}, {"name": "service", "command": "service_venv gunicorn app_wsgi:app --log-level debug --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/incidentassistant", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "1Gi"}}, {"name": "as2job", "command": "dumb-init -- service_venv python manage.py as2", "workdir": "/code/incidentassistant", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "tmcachejob", "command": "dumb-init -- service_venv python manage.py tm-cache", "workdir": "/code/incidentassistant", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "updatereminderjob", "command": "dumb-init -- service_venv python manage.py update-reminders >> /var/log/lyft/cron-update-reminders.log", "workdir": "/code/incidentassistant", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "databasebackupjob", "command": "dumb-init -- service_venv python manage.py backup-database --backup-label=cron", "workdir": "/code/incidentassistant", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "sevdigestjob", "command": "dumb-init -- service_venv python manage.py sev-digest --run-once --sleep-duration=0", "workdir": "/code/incidentassistant", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}], "facets": [{"name": "main", "member": "incidentassistant.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 1, "max_size": 2}}}}, {"name": "canary", "member": "incidentassistant.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "updateremindercron", "member": "incidentassistant.updatereminderjob", "type": "cron", "schedule": "0 * * * *"}, {"name": "as2cron", "member": "incidentassistant.as2job", "type": "cron", "schedule": "0 */2 * * *"}, {"name": "tmcachecron", "member": "incidentassistant.tmcachejob", "type": "cron", "schedule": "0 * * * *"}, {"name": "databasebackupcron", "member": "incidentassistant.databasebackupjob", "type": "cron", "schedule": "0 * * * *"}, {"name": "sevdigestcron", "member": "incidentassistant.sevdigestjob", "type": "cron", "schedule": "0 */8 * * *"}], "groups": [{"name": "dev", "members": ["control.dev", "taskqueue.dev", "omnibot.dev", "mailer.dev", "postgresql.dev", "team.dev", "incidentassistant.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "incidentassistant.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "automatic": true, "legacy": false, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1a"}}}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "updateremindercron"}, {"facet": "tmcachecron"}, {"facet": "as2cron"}, {"facet": "databasebackupcron"}, {"facet": "sevdigestcron"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "incidentassistant"}, {"name": "incidentassistantworkers"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"ledger": null, "mailer": null, "migrations": null, "superset": null, "team": null, "omnibot": null, "taskqueuebulkweb": null, "taskqueuenormalweb": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s", "packages": ["pkg-config", "libpq-dev", "openssl", "libssl-dev", "python-lxml", "libcairo2", "libpango1.0-0", "libgdk-pixbuf2.0-0", "libffi-dev", "shared-mime-info", "postgresql-client-10"]}}]}}, "logging": {"incidentassistant": {"fields": {"exception": "keyword", "traceback": "keyword", "attempt_num": "long", "failed_record": "keyword", "remediation_id": "long", "component_type": "keyword", "dryrun": "keyword"}}}, "version": "dc1214b865bb67e3fb6096d3d363349cb94d6b6c", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "inferencedb": {"name": "inferencedb", "description": "Aurora database to store data related to online models", "repository": "git@github.com:lyft/inferencedb.git", "slack": "#ml-platform-bots", "team_email": "ml-platform-team@lyft.com", "pagerduty_escalation_policy": "DS Platform", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/inferencedb", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "inferencedb.legacy", "postgresql.server", "jobscheduler.dev"]}, {"name": "service_group", "members": ["inferencedb.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "inferencedb.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "inferencedb.dev", "container": "inferencedb.legacy", "command": "make test_integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "inferencedb.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "inferencedb.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "inferencedb"}], "common_settings": {"internal_hosts": {"jobschedulernormalweb": null}}}}, "version": "04945313ae10b9ae69158b342758a633d23fdda8", "images": [{"parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}}, "infraassets": {"name": "infraassets", "description": "Serves static assets generated by infraworkflows", "repository": "git@github.com:lyft/infraassets.git", "slack": "#workloadmobility-bots", "team_email": "workloadmobility@lyft.com", "pagerduty_escalation_policy": "devnull", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:36518650f40787ad43faa9717259a01880989029"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/infraassets", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "infraassets.legacy"]}, {"name": "service_group", "members": ["infraassets.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "infraassets.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "infraassets.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "infraassets.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "infraassets"}]}}, "version": "0d9754fede7906c0044ccfdba7967062845eb32f", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "infraevents": {"name": "infraevents", "description": "Central storage and API for events that occur within Lyft's infrastructure and external partners", "repository": "git@github.com:lyft/infraevents.git", "credentials": true, "pagerduty_escalation_policy": "Observability-Analysis", "team_email": "obs-analysis@lyft.com", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "2Gi"}, "sub_image": "k8s", "exports": [{"name": "api", "port": 8080}]}, {"name": "autoscalesqspoller", "command": "dumb-init -- service_venv python manage.py start_autoscale_sqs_poller", "workdir": "/code/infraevents", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "elasticsearchmonitor", "command": "dumb-init -- service_venv python manage.py elasticsearch_monitor", "workdir": "/code/infraevents", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "pagerdutyscanner", "command": "dumb-init -- service_venv python manage.py scan_pagerduty", "workdir": "/code/infraevents", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "infraevents.legacy", "elasticsearch5.dev", "sqs.server"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "startup", "type": "startup", "group": "infraevents.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}], "deploy": [{"name": "staging", "automatic": true, "bake_time_minutes": 0, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "infra"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}}, "targets": [{"facet": "main"}, {"facet": "autoscalesqspollerworker"}, {"facet": "elasticsearchmonitorworker"}]}, {"name": "staging-cron", "automatic": true, "bake_time_minutes": 0, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "pagerdutyscannercron"}]}, {"name": "canary", "legacy": true, "bake_time_minutes": 0, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "infra"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}}, "targets": [{"facet": "canary"}]}, {"name": "production-cron", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "pagerdutyscannercron"}], "bake_time_minutes": 0}, [{"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": true, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "infra"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}}, "targets": [{"facet": "main"}, {"facet": "autoscalesqspollerworker"}, {"facet": "elasticsearchmonitorworker"}]}, {"name": "production-us-east-1d", "availability_zone": "us-east-1d", "legacy": true, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "infra"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}}, "targets": [{"facet": "main"}, {"facet": "autoscalesqspollerworker"}, {"facet": "elasticsearchmonitorworker"}]}, {"name": "production", "legacy": true, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "infra"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "autoscalesqspollerworker"}, {"facet": "elasticsearchmonitorworker"}]}]], "languages": ["python"], "image_type": "service", "service_tier": 3, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "infraevents"}, {"name": "infraeventsworker"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}}}}, "facets": [{"name": "main", "autoscaling": {"environment": {"production": {"min_size": 2, "max_size": 5}, "staging": {"min_size": 1, "max_size": 2}}}, "member": "infraevents.service", "type": "service"}, {"name": "canary", "autoscaling": {"min_size": 1, "max_size": 1}, "member": "infraevents.service", "type": "service", "canary": true}, {"name": "autoscalesqspollerworker", "member": "infraevents.autoscalesqspoller", "type": "worker", "autoscaling": {"environment": {"production": {"min_size": 2, "max_size": 5}, "staging": {"min_size": 1, "max_size": 2}}}}, {"name": "elasticsearchmonitorworker", "member": "infraevents.elasticsearchmonitor", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "pagerdutyscannercron", "member": "infraevents.pagerdutyscanner", "type": "cron", "schedule": "* * * * *", "concurrency_policy": "replace"}], "logging": {"infraeventsworker": {"fields": {"failed_record_count": "long", "attempt_num": "long"}}}, "version": "235e78e0b766acff10174b239305765963335149", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "infraintelgraph": {"name": "infraintelgraph", "description": "Infrastructure Intelligence Service", "repository": "git@github.com:lyft/infraintelgraph.git", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "frontend", "port": 9211}]}], "groups": [{"name": "dev", "members": ["control.dev", "infraintelgraph.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "infraintelgraph.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "infraintelgraph.dev", "container": "infraintelgraph.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#infraintelgraph", "pagerduty_escalation_policy": "Security Intelligence", "team_email": "security-intel@lyft.com", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "infraintelgraph"}, {"name": "infraintelgraphjuicer"}], "common_settings": {"internal_hosts": {"acl": null, "ats": null, "omnibot": null, "team": null, "vulndbmirror": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "version": "0f854707887053af7859f7f854019c08b7384548", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "infraloadtest": {"name": "infraloadtest", "description": "Infrastructure load testing tools", "repository": "git@github.com:lyft/infraloadtest.git", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "infraloadtest.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "infraloadtest.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "infraloadtest.dev", "container": "infraloadtest.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#resilience", "slack_deploy_notification_environments": ["staging", "canary", "production"], "notification_overrides": {"deploy": {"slack": "#resilience-bots", "environments": ["production", "staging"]}, "pr_merge": {"slack": "#resilience-bots"}}, "team_email": "resilience-team@lyft.com", "pagerduty_escalation_policy": "Resilience", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true}], "languages": ["python"], "image_type": "service", "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "infraloadtest"}], "common_settings": {"external_hosts": {"kinesis_iad": null}}}}, "version": "35e4d351642a78d8fb3f92a6c81e43003f4d4843", "images": [{"parent": {"name": "opsbase", "version": "8e738741d84a4e5507052068fa7dafe771cb111a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "8e738741d84a4e5507052068fa7dafe771cb111a", "sub_image": null, "external": false}}, "infraspend": {"name": "infraspend", "description": "Tracks infrastructure spending.", "repository": "git@github.com:lyft/infraspend.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s", "packages": ["python-tk"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "jobscheduler.dev", "infraspend.legacy", "mailer.dev", "streamingest.dev", "metadataproxy.server"]}], "tests": [{"name": "flake8", "type": "jailed", "command": "make test_flake8", "reports": {"pylint": "build/flake8.txt"}}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "infraspend.dev", "container": "infraspend.legacy", "command": "make test_integration", "reports": {"cobertura": "build/integration_coverage.xml", "junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "team_email": "capacity@lyft.com", "pagerduty_escalation_policy": "Capacity", "slack": "#capacity", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}], "automatic": true, "bake_time_minutes": 0}], "languages": ["python"], "image_type": "service", "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "infraspend"}], "common_settings": {"internal_hosts": {"jobschedulerbulkweb": null}, "external_hosts": {"kinesis_iad": null, "firehose_iad": null}}}}, "logging": {"infraspend": {"fields": {"asg_name": "keyword", "instance_count": "long", "aws_region": "keyword", "policy_type": "keyword", "adjustment_type": "keyword", "scaling_adjustment": "long", "cooldown": "long", "instance_type": "keyword", "stats_path": "keyword", "limit": "long", "value": "long", "statistic": "keyword", "comparison_operator": "keyword", "namespace": "keyword", "threshold": "long", "stat_value": "keyword", "instance_family": "keyword", "subnet_classification": "keyword", "subnet_id": "keyword", "subnet_name": "keyword", "addresses_remaining": "long", "day_end": "date", "day_start": "date", "asg_count": "long", "spreadsheetId": "keyword", "replies": "keyword", "updatedCells": "long", "updatedColumns": "long", "sheet_name": "keyword", "updatedRange": "keyword", "updatedRows": "long", "spreadsheet_name": "keyword", "data": {"body": "keyword", "to": "keyword", "subject": "keyword", "from": "keyword"}, "report_name": "keyword"}}}, "version": "98448a00f9836e6cbea9168e57563c1b51e799d3", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "infraworkflows": {"name": "infraworkflows", "description": "Flyte workflows for infrastructure", "repository": "git@github.com:lyft/infraworkflows.git", "slack": "#workloadmobility", "team_email": "workloadmobility@lyft.com", "pagerduty_escalation_policy": "devnull", "image_type": "service", "service_tier": 3, "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "infraworkflows.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "infraworkflows.dev", "container": "infraworkflows.spin", "command": "make register_for_pr"}], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "version": "4b15b9ff2926df855ed81fca10020bb5dd6f1316", "images": [{"parent": {"name": "flytebase", "version": "9eb5e4f63c86a35ec1dcc48b2444c4663327408a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "flytebase", "version": "9eb5e4f63c86a35ec1dcc48b2444c4663327408a", "sub_image": null, "external": false}}, "ingresscontour": {"name": "ingresscontour", "description": "Deploy to have contour as the ingress controller, do not use simultaneously with ingressnginx", "repository": "git@github.com:lyft/k8s-ingress-contour.git", "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "slack": "#compute-bots", "credentials": false, "docs": {"section": "Infrastructure"}, "deploy": [{"name": "development", "legacy": false, "automatic": true}, [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["provtest"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": "provtest"}}}, {"name": "staging-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "flyte"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}}], [{"name": "production", "legacy": false, "kubernetes": {"enabled": false}}, {"name": "production-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "flyte"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}}, {"name": "production-critical-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "flytecritical"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}}]], "languages": ["bash"], "image_type": "service", "service_tier": 3, "version": "d6b54122a7ea3bca32755e19858a3abba98371cb", "images": [{"parent": {"name": "bionicbase", "version": "6042eef4338792ed36b4cdddf11a63776bd2feab", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "6042eef4338792ed36b4cdddf11a63776bd2feab", "sub_image": null, "external": false}}, "ingressnginx": {"name": "ingressnginx", "description": "Deploy to have nginx as the ingress controller, do not use simultaneously with ingresscontour", "repository": "git@github.com:lyft/k8s-ingress-nginx.git", "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "slack": "#compute-bots", "credentials": false, "docs": {"section": "Infrastructure"}, "deploy": [{"name": "staging-infra-dev-sla", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "infra-dev"}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["boba", "boba2", "sidecar-test1", "obs-dev"]}}}, [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "core"}}}, {"name": "staging-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "infra"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}}}, {"name": "staging-flink", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "flink"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "flink"}}}, {"name": "staging-sonata", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "sonata"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "sonata"}}}, {"name": "staging-allegro", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "allegro"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "allegro"}}}, {"name": "staging-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "lyftlearn"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}}, {"name": "staging-stateful", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "stateful"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "stateful"}}}, {"name": "staging-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "deploys"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}}}, {"name": "staging-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "omnicron"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "omnicron"}}}, {"name": "staging-envoyminimesh", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["envoyminimesh"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["envoyminimesh"]}}}], [{"name": "production", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "core"}}}, {"name": "production-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "infra"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}}}, {"name": "production-ciinfra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["ciinfra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "lyftlearn"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}}, {"name": "production-lyftlearn-av", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "lyftlearn-av"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml-av"}}}, {"name": "production-titan", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "spark"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "titan"}}}, {"name": "production-stateful", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "stateful"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "stateful"}}}, {"name": "production-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "deploys"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}}}, {"name": "production-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "omnicron"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "omnicron"}}}, {"name": "production-sonata", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "sonata"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "sonata"}}}, {"name": "production-devkube", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}}}, {"name": "production-devkubestaging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkubestaging"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}}}]], "languages": ["bash"], "image_type": "service", "service_tier": 3, "version": "bf64819ac52c519e2a6f97cf342af1b005aaed6c", "images": [{"parent": {"name": "bionicbase", "version": "5fe8989bbb7b0c5bf937176f5293c25709d3233f", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "5fe8989bbb7b0c5bf937176f5293c25709d3233f", "sub_image": null, "external": false}}, "inspolicies": {"name": "inspolicies", "description": "Service for handling vehicle insurance policies.", "repository": "git@github.com:lyft/inspolicies.git", "slack": "#insurance", "team_email": "insurance-tech@lists.lyft.com", "pagerduty_escalation_policy": "Insurance", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s", "packages": ["gnupg"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/inspolicies", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "updategeicopolicies", "command": "dumb-init -- service_venv python manage.py update-geico-policies --update-sync-state --delete-upon-pickup --upload-files-to-s3", "workdir": "/code/inspolicies", "sub_image": "k8s"}, {"name": "uploadgeicoauditfile", "command": "dumb-init -- service_venv python manage.py upload-file-for-geico-audit --num-days-back 3", "workdir": "/code/inspolicies", "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "inspolicies.legacy"]}, {"name": "service_group", "members": ["inspolicies.legacy"]}, {"name": "integration", "members": ["ats.qa_approve", "abacus.dev", "account.dev", "dispatch.dev", "etaproxy.dev", "fare.dev", "ledger.dev", "green.dev", "jobscheduler.dev", "locations.dev", "logistics.dev", "messaging.dev", "payapi.dev", "push.dev", "ratelimit.dev", "supply.dev", "supplyrecords.dev", "switchboard.dev", "usergroups.dev", "users.dev", "viewport.dev", "rides.dev", "ridesapi.dev", "ridehistory.dev", "routes.dev", "guardian.dev", "tcs.dev", "ratelimit.dev", "driverloyalty.dev", "userpreferences.dev", "legacyapi.dev", "drivermode.dev", "fleetmanagement.dev", "accidents.dev", "wallet.dev", "inspolicies.dev", "routesapi.dev", "messagingint.dev", "ghostmatching.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "inspolicies.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "inspolicies.integration", "command": "make test_integration", "container": "inspolicies.legacy"}], "facets": [{"name": "main", "member": "inspolicies.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "inspolicies.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}, {"name": "updategeicopoliciescron", "member": "inspolicies.updategeicopolicies", "type": "cron", "schedule": "0 * * * *"}, {"name": "uploadgeicoauditfilecron", "member": "inspolicies.uploadgeicoauditfile", "type": "cron", "schedule": "0 1 * * *"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "updategeicopoliciescron"}, {"facet": "uploadgeicoauditfilecron"}]}]], "logging": {"inspolicies": {"fields": {"provider": "keyword", "document_type": "keyword", "driver_id": "long", "length": "integer", "limit": "integer", "page_size": "integer", "since_ms": "long", "skip": "integer", "success": "boolean", "user_id": "long", "vehicle_id": "long"}}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "inspolicies"}], "common_settings": {"internal_hosts": {"ats": null, "inspolicies": null, "logistics": {"tls_enabled": true}, "messaging": {"tls_enabled": true}, "ratelimit": null, "rides": null, "routes": null, "supply": {"tls_enabled": true}, "supplyrecords": {"tls_enabled": true}, "users": null}, "external_hosts": {"dynamodb_iad": null}}}}, "version": "73f03dcb79d2f0e1826e74ca28641594129056b2", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "inspolicydata": {"name": "inspolicydata", "description": "Static policy data records and compiler for generation", "repository": "git@github.com:lyft/inspolicydata.git", "credentials": false, "image_type": "data", "service_tier": 2, "slack": "#insurance", "team_email": "insurance-tech@lists.lyft.com", "pagerduty_escalation_policy": "Insurance", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/configsetbase:576154b0c88e062c351a03f0c25a814d0536f4c7"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "languages": ["bash", "python"], "groups": [{"name": "dev", "members": ["control.dev", "inspolicydata.spin"]}], "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/inspolicydata"]}, {"name": "compile", "command": "make compile_policies"}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "inspolicydata.dev", "container": "inspolicydata.spin", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "notification_overrides": {"deploy": {"disabled": true}}, "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": false, "orca": []}], "version": "a89cf320738e58a5f63c3b6ec7255e7e6375f552", "images": [{"parent": {"name": "configsetbase", "version": "576154b0c88e062c351a03f0c25a814d0536f4c7", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "configsetbase", "version": "576154b0c88e062c351a03f0c25a814d0536f4c7", "sub_image": null, "external": false}}, "instantandroid": {"team_email": "client-productivity@lyft.com", "tests": [{"container": "instantandroid.code", "command": "make ci_pmd", "group": "instantandroid.dev", "name": "pmd", "type": "execution"}, {"container": "instantandroid.code", "group": "instantandroid.dev", "name": "buckcompiletests", "command": "make ci_buck_builds", "type": "execution", "reports": {"junit": "build/bucktest_junit.xml", "bucklint": "build/lint_report.json"}}, {"container": "instantandroid.code", "command": "make ci_dev_passenger", "group": "instantandroid.dev", "name": "devpassenger", "type": "execution"}, {"container": "instantandroid.code", "command": "make ci_dev_driver", "group": "instantandroid.dev", "name": "devdriver", "type": "execution"}, {"container": "instantandroid.code", "command": "make ci_dev_autonomous", "group": "instantandroid.dev", "name": "autonomousapp", "type": "execution"}, {"container": "instantandroid.code", "command": "make ci_check_release", "group": "instantandroid.dev", "name": "checkreleasebuild", "type": "execution"}], "report_ci": true, "slack": "#dev-android-prs", "repository": "git@github.com:lyft/instant-android.git", "deploy": [{"legacy": false, "name": "development", "orca": [{"region": "iad", "orca_location": "ops"}]}, {"legacy": false, "name": "staging", "orca": [{"region": "iad", "orca_location": "ops"}]}, {"legacy": false, "name": "production", "orca": [{"region": "iad", "orca_location": "ops"}]}], "pagerduty_escalation_policy": "Mobile CI", "name": "instantandroid", "version": "9c67a1e93716642d66ebd08608634d2eb1a1bd64", "parent": {"version": "629a9ec6a952d4ff947ca31e6c4abf77de6d29a5", "name": "imagebase", "buildargs": [], "external": false}, "credentials_legacy": false, "credentials": true, "groups": [{"name": "dev", "members": ["control.dev", "instantandroid.code"]}], "containers": [{"command": "scripts/ci/entrypoint.sh", "name": "code", "network": "host"}, {"command": "make ci_alpha_passenger", "name": "alphapassenger", "network": "host"}, {"command": "make ci_test_passenger_instrumentation", "name": "passengerinstrumentationtests", "network": "host"}], "description": "Build and deploy instant-android Application"}, "integritymodels": {"name": "integritymodels", "description": "integrity models for lyftlearn", "repository": "git@github.com:lyft/integritymodels.git", "image_type": "tool", "slack": "#integrity-models-dev", "team_email": "integrity-science@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/lyftlearnnotebook:f37e125cff171789c0d5aac9fd1efc2ea4ae3834"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "deploy": [{"name": "production", "legacy": false}], "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "lyftlearn", "command": "sleep infinity", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "notebook", "command": "/code/venvs/venv/bin/jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password=''", "privileged": true, "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}], "groups": [{"name": "lyftlearn_group", "members": ["integritymodels.lyftlearn"]}], "tests": [{"name": "test-lyftlearn", "type": "execution", "autotrigger": false, "container": "integritymodels.lyftlearn", "group": "integritymodels.lyftlearn_group", "command": "make test_lyftlearn"}], "lyftlearn": {}, "version": "232d8cbd574d7d5332e7b7ab715600c5ecaff7f8", "images": [{"parent": {"name": "lyftlearnnotebook", "version": "f37e125cff171789c0d5aac9fd1efc2ea4ae3834", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "lyftlearnnotebook", "version": "f37e125cff171789c0d5aac9fd1efc2ea4ae3834", "sub_image": null, "external": false}}, "intelgraphbot": {"name": "intelgraphbot", "description": "Intelgraphbot provides Slack bot interface to infraintelgraph", "repository": "git@github.com:lyft/intelgraphbot.git", "image_type": "service", "service_tier": 3, "slack": "#infraintelgraph", "team_email": "security-intel@lyft.com", "pagerduty_escalation_policy": "Security Intelligence", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "intelgraphbot.legacy"]}], "tests": [{"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "startup", "type": "startup", "group": "intelgraphbot.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "python": {"mypy": {"python_versions": ["3.6"], "exclude": ["ops"]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "intelgraphbot"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"omnibot": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "version": "877120968151486cc1c7d1d3aff04d38b26df472", "images": [{"parent": {"name": "opsbase", "version": "f90ea57f4a8f8425409f1a6f8ce0592bbde42bde", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "f90ea57f4a8f8425409f1a6f8ce0592bbde42bde", "sub_image": null, "external": false}}, "intelgraphviz": {"name": "intelgraphviz", "description": "Infrastructure Intelligence Service Visualization", "repository": "git@github.com:lyft/intelgraphviz.git", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "frontend", "port": 9211}]}], "groups": [{"name": "dev", "members": ["control.dev", "intelgraphviz.legacy"]}], "slack": "#infraintelgraph", "pagerduty_escalation_policy": "Security Intelligence", "team_email": "security-intel@lyft.com", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "intelgraphviz"}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}]}}, "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "version": "cbf78401ffeae12f13145ba9befb389a1eb89775", "images": [{"parent": {"name": "opsbase", "version": "49dd0dfae9cc8fb0ead221682d5a4e774b7fc089", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "49dd0dfae9cc8fb0ead221682d5a4e774b7fc089", "sub_image": null, "external": false}}, "interconnectlatencywatcher": {"name": "interconnectlatencywatcher", "description": "Latency tracker for debugging interconnect latency", "repository": "git@github.com:lyft/networking-tools-k8s.git:interconnect_latency_watcher", "team_email": "network-team@lyft.com", "pagerduty_escalation_policy": "Networking", "slack": "#networking", "credentials": false, "languages": ["go"], "image_type": "service", "service_tier": 3, "containers": [{"name": "run", "command": "interconnect_latency_watcher"}], "builder": {"name": "s2i", "params": {"builder": "lyft/s2igocli:4edaa2be6eedeae5af70e8b0eb7084f7c17f7549"}}, "facets": [{"name": "main", "member": "interconnectlatencywatcher.run", "type": "service", "sidecars": ["statsd"], "autoscaling": {"environment": {"production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "production", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "cluster_labels": {"cluster.lyft.net/role": "infra"}}}], "version": "a1ba2ccdf73fc193705afedac68b8fc1f79b3cc7", "images": [{"parent": {"name": "s2igocli", "version": "4edaa2be6eedeae5af70e8b0eb7084f7c17f7549", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "4edaa2be6eedeae5af70e8b0eb7084f7c17f7549", "sub_image": null, "external": false}}, "intersect": {"name": "intersect", "description": "intersect library", "repository": "git@github.com:lyft/intersect.git", "slack": "#pickup-xp-server", "containers": [{"name": "devel", "privileged": true, "command": "/bin/bash -c 'while true; do sleep 3600; done'"}], "groups": [{"name": "dev", "members": ["intersect.devel"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml"}}, {"name": "osm", "type": "jailed", "command": "make test_osm"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "team_email": "pickup-experience@lyft.com", "pagerduty_escalation_policy": "Pickup XP Server", "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "audit_blacklist": ["envoyAudit"], "languages": ["python"], "image_type": "library", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "317803ecea706acc1227930eedaf0361483a5f67", "images": [{"parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}}, "intrepid": {"name": "intrepid", "description": "The backend server to manage Intrepid campaigns and execute campaign tasks", "repository": "git@github.com:lyft/intrepid.git", "slack": "#intrepid-dev", "team_email": "rider-incentives-eng@lyft.com", "pagerduty_escalation_policy": "Rider Incentives", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/intrepid", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "pollercron", "command": "dumb-init -- service_venv python manage.py poller", "sub_image": "k8s", "workdir": "/code/intrepid", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "runcampaign", "command": "dumb-init -- service_venv python manage.py runcampaign", "sub_image": "k8s", "workdir": "/code/intrepid", "limits": {"cpu": 1, "memory": "1Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "intrepid.legacy"]}, {"name": "integration", "members": ["intrepid.dev", "tcseditor.dev", "jobscheduler.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "intrepid.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "command": "make test_integration", "group": "intrepid.integration", "container": "intrepid.legacy", "virtualenv": "service_venv"}], "facets": [{"name": "main", "member": "intrepid.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 2}}}}, {"name": "canary", "member": "intrepid.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}, {"name": "poller", "type": "cron", "member": "intrepid.pollercron", "schedule": "*/5 * * * *", "concurrency_policy": "forbid"}, {"name": "runcampaign", "member": "intrepid.runcampaign", "type": "batch"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "runcampaign"}, {"facet": "poller"}, {"facet": "runcampaign"}], "bake_time_minutes": 0}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "bake_time_minutes": 0}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a", "bake_time_minutes": 0}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d", "bake_time_minutes": 0}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "poller"}, {"facet": "runcampaign"}], "bake_time_minutes": 0}], "envoy": {"profile": "python", "settings": {"services": [{"name": "intrepid"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 900}}}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"audience": null, "campaignstorage": null, "tcseditor": null, "jobschedulernormalweb": null}}}}, "logging": {"intrepid": {"fields": {"campaign_name": "keyword", "campaign_owner": "keyword", "campaign_ts": "long", "channel": "keyword", "creator": "keyword", "exception": "keyword", "experiment": "keyword", "launched_plan": "keyword", "message": "keyword", "slack_response": "keyword", "task_type": "keyword", "workflow_execution_id": "keyword", "pipeline_uuid": "keyword", "job_type": "keyword", "param_file": "keyword", "pipeline_execution_group_uuid": "keyword", "debugging_url": "keyword", "status": "keyword", "tnt_campaign_id": "keyword", "tnt_url": "keyword"}}}, "links": [{"text": "runbook", "url": "https://github.com/lyft/intrepid/blob/master/docs/runbook.md"}], "version": "53ee7a52849676e82ac8163d0a71aab008d99ac2", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "intrepidmodels": {"name": "intrepidmodels", "description": "Python Package that contains all the Intrepid data science models and notebooks", "repository": "git@github.com:lyft/intrepidmodels.git", "image_type": "tool", "slack": "#intrepid-dev", "team_email": "rider-incentives-eng@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/pythonlyftintrepidstdlib:rimage.cbb69366d53469765750e70b31e38aed2ddbff1c"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile", "sub_image": "spark"}}]}}, "deploy": [{"name": "development", "legacy": false}, {"name": "production", "legacy": false}], "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "lyftlearn", "command": "sleep infinity", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "notebook", "command": "/code/venvs/venv/bin/jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password=''", "privileged": true, "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}], "groups": [{"name": "lyftlearn_group", "members": ["intrepidmodels.lyftlearn"]}, {"name": "register_group", "members": ["lyftlearnclient.registerspin"]}], "tests": [{"name": "test-lyftlearn", "type": "execution", "container": "intrepidmodels.lyftlearn", "group": "intrepidmodels.lyftlearn_group", "command": "make test_lyftlearn"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "register-lyftlearn", "type": "execution", "container": "lyftlearnclient.registerspin", "group": "intrepidmodels.register_group", "command": "lyftlearn build_tools register_image --image=intrepidmodels --release-level=development --container=lyftlearn -r models"}], "lyftlearn": {}, "version": "8f5e2208b5dd4bac5aa4b283c7775a1dba207f57", "images": [{"parent": {"name": "pythonlyftintrepidstdlib", "version": "cbb69366d53469765750e70b31e38aed2ddbff1c", "sub_image": "rimage", "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "lyftlearnspark", "version": "46b49ee367ed5be898b07e57e157608e074dad4d", "sub_image": null, "external": false}, "sub_image": "spark"}], "parent": {"name": "pythonlyftintrepidstdlib", "version": "cbb69366d53469765750e70b31e38aed2ddbff1c", "sub_image": "rimage", "external": false}}, "intrepidworkflows": {"name": "intrepidworkflows", "description": "Generalized platform capable of predicting how users will react to a particular treatment.", "repository": "git@github.com:lyft/intrepidworkflows.git", "slack": "#intrepid-dev", "team_email": "rider-incentives-eng@lyft.com", "pagerduty_escalation_policy": "Rider Incentives", "image_type": "flyteworkflow", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "intrepidworkflows.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "intrepidworkflows.dev", "container": "intrepidworkflows.spin", "command": "make register_for_pr"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [[{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_development"}], [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_staging"}], [{"name": "production", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_production"}]], "logging": {"intrepidworkflows": {"fields": {"bucket_name": "keyword", "remote_file_path": "keyword", "local_file_path": "keyword"}}}, "credentials": true, "version": "9047c400e25cfe6751e180ee4f3b4a6ed5cbdece", "images": [{"parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}}, "invites": {"name": "invites", "description": "Supports inviting friends to lyft. Used in driver onboarding and passenger invites. Client apps make requests to this service and we manage a dynamo table to track state of invites sent.", "repository": "git@github.com:lyft/invites.git", "credentials": true, "image_type": "service", "service_tier": 2, "slack": "#acq-incentives", "team_email": "referrals-team@lyft.com", "pagerduty_escalation_policy": "Referrals Team", "languages": ["bash", "python"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/invites", "sub_image": "k8s", "limits": {"cpu": 0.5, "memory": "768Mi"}}], "notification_overrides": {"deploy": {"slack": "#acq-incentives-bot", "environments": ["production", "canary", "staging"]}, "deploy_failure": {"slack": "#acq-incentives-bot"}, "test_failure": {"slack": "#acq-incentives-bot", "email": "acq-incentives-referrals@lyft.com", "environments": ["production"]}, "master_failure": {"slack": "#acq-incentives-bot"}, "pr_merge": {"slack": "#acq-incentives-bot"}, "pr_open": {"slack": "#acq-incentives-bot"}}, "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "sqs.server", "envoy.server", "invites.legacy"]}, {"name": "integration", "members": ["coupons.integration", "invites.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "invites.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy", "virtualenv": "service_venv"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "autotrigger": false, "framework": "pytest", "coverage": false, "markers": "unit_legacy", "container": "invites.legacy", "group": "invites.dev", "targets": ["tests/unit"], "virtualenv": "service_venv"}], "facets": [{"name": "main", "member": "invites.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 35}, "environment": {"staging": {"min_size": 1, "max_size": 5}, "production": {"min_size": 1, "max_size": 25}}}}, {"name": "canary", "member": "invites.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "invites"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "internal_hosts": {"jobschedulerbulkweb": null, "jobschedulernormalweb": null, "supply": null, "users": null, "messaging": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:40c411171447b7e18aab77bf2e3ed74bc6587622", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "logging": {"invites": {"fields": {"invite_id": "keyword", "email": "keyword"}}}, "version": "813f256302508e5e108f26c299a8c081f73b6136", "images": [{"parent": {"name": "s2ipython3", "version": "40c411171447b7e18aab77bf2e3ed74bc6587622", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "iotgateway": {"name": "iotgateway", "repository": "git@github.com:lyft/iotgateway.git", "description": "A Lyft frontend for communication with IOT devices", "service_tier": 2, "team_email": "lbs-platform@lyft.com", "pagerduty_escalation_policy": "Lastmile", "slack": "#iot-gateway", "slack_deploy_notification_environments": ["staging", "canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:77c41f39b1d42fc3b3fdf97d08edaed8fe4f7b0e", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- iotgateway", "workdir": "/code/iotgateway", "limits": {"cpu": 1, "memory": "1024Mi"}, "sub_image": "k8s", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 60}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "iotgateway.legacy"]}, {"name": "integration", "members": ["pusher.dev", "lastmile.dev", "iotgateway.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "iotgateway.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "iotgateway.integration", "container": "iotgateway.legacy", "command": "make integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "iotgateway.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 5, "max_size": 10}}}, "max_surge": "5%", "min_ready_seconds": 30}, {"name": "canary", "member": "iotgateway.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}, "max_surge": "5%", "min_ready_seconds": 30}], "deploy": [{"name": "staging", "legacy": false, "bake_time_minutes": 5, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "bake_time_minutes": 5, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "bake_time_minutes": 5, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "deploy_settings": {"window_start": "07:00 America/New_York", "window_end": "18:00 America/New_York"}, "envoy": {"profile": "go", "settings": {"services": [{"name": "iotgateway"}], "common_settings": {"local_service": {"grpc_streaming": true}, "external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"pusher": null, "lastmile": null, "stations": null}}}}, "logging": {"iotgateway": {"fields": {"device_id": "keyword", "device_type": "keyword", "service": "keyword", "method": "keyword"}}}, "version": "23111130ebcf02ddd70369a97c0444471109979d", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "77c41f39b1d42fc3b3fdf97d08edaed8fe4f7b0e", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "java": {"name": "java", "description": "base image for java images", "repository": "git@github.com:lyft/containers.git:java", "languages": [], "image_type": "library", "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}]}], "version": "80d80fc654821aa63a3a192e78873ea7f612e660", "images": [{"parent": {"name": "imagebase", "version": "c1e859a9753a8fc357121e7c126cc0a3b7679ea7", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "c1e859a9753a8fc357121e7c126cc0a3b7679ea7", "sub_image": null, "external": false}}, "jenkins": {"name": "jenkins", "description": "jenkins ci system", "repository": "git@github.com:lyft/containers.git:jenkins", "slack": "#ci-bots", "pagerduty_escalation_policy": "Continuous Integration", "team_email": "automation-team@lyft.com", "credentials": true, "credentials_legacy": false, "docs": {"section": "Infrastructure"}, "containers": [{"name": "server", "command": "/code/containers/jenkins/entrypoint.sh", "mounts": ["/var/run", "/srv/control", "/var/log/containers", "/etc/cloudenv", "/var/lib/jenkins/jobs"], "network": "host"}, {"name": "slavereporter", "command": "/code/containers/jenkins/slavereporter.sh", "network": "host"}, {"name": "backup", "command": "/code/containers/jenkins/backup.sh", "network": "host", "mounts": ["/var/lib/jenkins/jobs"]}], "groups": [{"name": "core", "members": ["dnsmasq.server", "metadataproxy.server", "runtime.run"]}, {"name": "dev", "members": ["jenkins.core", "jenkinsjobs.run", "jenkins.server"]}, {"name": "onebox", "members": ["jenkins.core", "jenkinsjobs.run", "jenkins.server", "jenkins.slavereporter", "statsd.agent"]}, {"name": "images", "members": ["jenkins.core", "jenkinsjobs.run", "jenkinsjobs.cleaner", "jenkins.server", "jenkins.slavereporter", "statsd.agent"]}, {"name": "images0", "members": ["jenkins.core", "jenkinsjobs.run", "jenkinsjobs.cleaner", "jenkins.server", "jenkins.slavereporter", "statsd.agent"]}, {"name": "images1", "members": ["jenkins.core", "jenkinsjobs.run", "jenkinsjobs.cleaner", "jenkins.server", "jenkins.slavereporter", "statsd.agent"]}, {"name": "images2", "members": ["jenkins.core", "jenkinsjobs.run", "jenkinsjobs.cleaner", "jenkins.server", "jenkins.slavereporter", "statsd.agent"]}, {"name": "images3", "members": ["jenkins.core", "jenkinsjobs.run", "jenkinsjobs.cleaner", "jenkins.server", "jenkins.slavereporter", "statsd.agent"]}, {"name": "images4", "members": ["jenkins.core", "jenkinsjobs.run", "jenkinsjobs.cleaner", "jenkins.server", "jenkins.slavereporter", "statsd.agent"]}, {"name": "test", "members": ["jenkins.core", "jenkinsjobs.run", "jenkinsjobs.cleaner", "jenkins.server", "jenkins.slavereporter"]}, {"name": "deploy", "members": ["jenkins.core", "jenkinsjobs.run", "jenkinsjobs.cleaner", "jenkins.server", "jenkins.slavereporter", "jenkins.backup", "statsd.agent"]}, {"name": "integration0", "members": ["jenkins.core", "jenkinsjobs.run", "jenkinsjobs.cleaner", "jenkins.server", "jenkins.slavereporter", "statsd.agent"]}, {"name": "integration1", "members": ["jenkins.core", "jenkinsjobs.run", "jenkinsjobs.cleaner", "jenkins.server", "jenkins.slavereporter", "statsd.agent"]}, {"name": "integration2", "members": ["jenkins.core", "jenkinsjobs.run", "jenkinsjobs.cleaner", "jenkins.server", "jenkins.slavereporter", "statsd.agent"]}, {"name": "integration3", "members": ["jenkins.core", "jenkinsjobs.run", "jenkinsjobs.cleaner", "jenkins.server", "jenkins.slavereporter", "statsd.agent"]}, {"name": "integration4", "members": ["jenkins.core", "jenkinsjobs.run", "jenkinsjobs.cleaner", "jenkins.server", "jenkins.slavereporter", "statsd.agent"]}], "tests": [{"name": "startup", "type": "startup", "group": "jenkins.dev"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "links": [{"text": "Deployment runbook", "url": "https://docs.lyft.net/eng/jenkins/runbook.html#deploying"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false}], "languages": ["bash", "java", "javascript", "python"], "image_type": "service", "service_tier": 3, "python": {"mypy": {"python_versions": ["3.6"]}}, "version": "7fe10260e13360daff5b45e5514d96e4e2a964e8", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "jenkinsdata": {"name": "jenkinsdata", "description": "Runtime configuration for jenkins, jnode, and jenkinsjobs services.", "repository": "git@github.com:lyft/jenkinsdata.git", "image_type": "data", "service_tier": 1, "slack": "#ci-bots", "team_email": "automation-team@lyft.com", "pagerduty_escalation_policy": "Continuous Integration", "languages": ["bash", "python"], "builder": {"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/jenkinsdata"]}], "groups": [{"name": "test", "members": ["jenkins.dev", "jnode.dev"]}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}, {"name": "unit", "framework": "pytest", "type": "jailed", "virtualenv": ""}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "canary", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "9a18e5b73c17625aec3c066d1f9a94a37413f43f", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "jenkinsjobs": {"name": "jenkinsjobs", "description": "ensures jobs for the jenkins system", "repository": "git@github.com:lyft/containers.git:jenkinsjobs", "slack": "#ci-bots", "team_email": "automation-team@lyft.com", "pagerduty_escalation_policy": "Continuous Integration", "credentials": true, "credentials_legacy": false, "docs": {"section": "Infrastructure"}, "containers": [{"name": "run", "command": "/code/containers/jenkinsjobs/entrypoint.sh", "mounts": ["/var/lib/jenkins/jobs"]}, {"name": "test", "command": "/code/containers/jenkinsjobs/test.sh"}, {"name": "cleaner", "command": "/code/containers/jenkinsjobs/cleaner.sh", "mounts": ["/var/lib/jenkins/jobs"]}], "groups": [{"name": "dev", "members": ["metadataproxy.server", "dnsmasq.server", "jenkinsjobs.run"]}, {"name": "testgroup", "members": ["metadataproxy.server", "dnsmasq.server", "jenkinsjobs.test"]}], "tests": [{"name": "lint", "type": "jailed", "command": "/code/containers/jenkinsjobs/lint.sh"}, {"name": "gen-deploy", "type": "execution", "group": "jenkinsjobs.testgroup", "container": "jenkinsjobs.test", "command": "/code/containers/jenkinsjobs/test.sh deploy"}, {"name": "gen-integration", "type": "execution", "group": "jenkinsjobs.testgroup", "container": "jenkinsjobs.test", "command": "/code/containers/jenkinsjobs/test.sh integration"}, {"name": "gen-images", "type": "execution", "group": "jenkinsjobs.testgroup", "container": "jenkinsjobs.test", "command": "/code/containers/jenkinsjobs/test.sh images"}, {"name": "gen-onebox", "type": "execution", "group": "jenkinsjobs.testgroup", "container": "jenkinsjobs.test", "command": "/code/containers/jenkinsjobs/test.sh onebox"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "links": [{"text": "jenkinsjobs runbook", "url": "https://docs.lyft.net/eng/jenkinsjobs/README.html#deploying-jenkinsjobs"}], "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "canary", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false}], "languages": ["bash"], "image_type": "tool", "version": "ecd310f91db1de7332efd8a2e607f902858cfb48", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "jnode": {"name": "jnode", "description": "jenkins worker node", "repository": "git@github.com:lyft/containers.git:jnode", "image_type": "tool", "slack": "#ci-bots", "pagerduty_escalation_policy": "Continuous Integration", "team_email": "automation-team@lyft.com", "credentials": true, "credentials_legacy": false, "containers": [{"name": "agent", "command": "/code/containers/jnode/entrypoint.sh", "privileged": true, "network": "host", "pid": "host", "mounts": ["/var/run", "/srv/control", "/var/log/containers", "/etc/cloudenv", "/srv/workspace"]}, {"name": "spotterminationnotice", "command": "/code/containers/jnode/spot_termination_notice.py", "network": "host", "mounts": ["/etc/jnode"]}], "groups": [{"name": "dev", "members": ["jnode.agent", "dnsmasq.server", "metadataproxy.server"]}, {"name": "images", "members": ["jnode.dev"]}, {"name": "images0", "members": ["jnode.dev", "jnode.spotterminationnotice"]}, {"name": "images1", "members": ["jnode.dev", "jnode.spotterminationnotice"]}, {"name": "images2", "members": ["jnode.dev", "jnode.spotterminationnotice"]}, {"name": "images3", "members": ["jnode.dev", "jnode.spotterminationnotice"]}, {"name": "images4", "members": ["jnode.dev", "jnode.spotterminationnotice"]}, {"name": "integration0", "members": ["jnode.dev", "jnode.spotterminationnotice"]}, {"name": "integration1", "members": ["jnode.dev", "jnode.spotterminationnotice"]}, {"name": "integration2", "members": ["jnode.dev", "jnode.spotterminationnotice"]}, {"name": "integration3", "members": ["jnode.dev", "jnode.spotterminationnotice"]}, {"name": "integration4", "members": ["jnode.dev", "jnode.spotterminationnotice"]}, {"name": "deploy", "members": ["jnode.dev", "runtime.run"]}], "configsets": ["jenkinsdata"], "tests": [{"name": "unit", "type": "jailed", "command": "python -m pytest -vvv tests/unit/"}, {"name": "terraform-checkformat", "type": "tool", "tool": "terraform.checkformat"}, {"name": "terraform-validate", "type": "tool", "tool": "terraform.validate"}], "orca_environments": {"staging": ["zimride"], "production": ["zimride"]}, "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false}], "languages": ["bash", "python"], "python": {"mypy": {"python_versions": ["3.6"]}}, "orchestrate": {"types": [{"name": "terraform"}], "steps": [{"name": "staging"}, {"name": "production"}]}, "version": "d605c71649d68a487542292810597daa6320adc1", "images": [{"parent": {"name": "java", "version": "81b8c3c9b9b0d8046268e1f1bbeaae0c6d8fe8ca", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java", "version": "81b8c3c9b9b0d8046268e1f1bbeaae0c6d8fe8ca", "sub_image": null, "external": false}}, "jobscheduler": {"name": "jobscheduler", "description": "jobscheduler", "repository": "git@github.com:lyft/jobscheduler.git", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}], "limits": {"environment": {"development": {"memory": "800Mi", "cpu": 0.16}}}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "sqs.server", "redis.server", "jobscheduler.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "jobscheduler.dev"}, {"name": "unified", "type": "execution", "group": "jobscheduler.dev", "container": "jobscheduler.legacy", "command": "make test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#async-tasks-platform", "notification_overrides": {"deploy": {"slack": "#async-tasks-deploy"}, "pr_merge": {"slack": "#async-tasks-deploy"}, "test_failure": {"slack": "#async-tasks-deploy", "environments": ["production"]}}, "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "async-tasks-platform@lyft.com", "pagerduty_escalation_policy": "Async Tasks Platform", "service_tier": 0, "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "languages": ["python", "bash"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "jobscheduler"}, {"name": "jobschedulerbulk", "traffic_type": "egress_only"}, {"name": "jobschedulermigration", "traffic_type": "egress_only"}, {"name": "jobschedulernormal", "traffic_type": "egress_only"}, {"name": "jobschedulerreaderwriterbulk", "traffic_type": "egress_only"}, {"name": "jobschedulerreaderwriternormal", "traffic_type": "egress_only"}, {"name": "jobschedulerscannerbulk", "traffic_type": "egress_only"}, {"name": "jobschedulerscannernormal", "traffic_type": "egress_only"}, {"name": "jobschedulerurgent", "traffic_type": "egress_only"}, {"name": "jobschedulerwebhook", "traffic_type": "egress_only"}, {"name": "jobschedulerbulkweb"}, {"name": "jobschedulerbulkwebloadtest"}, {"name": "jobschedulerloadtest"}, {"name": "jobschedulermigrationweb"}, {"name": "jobschedulermigrationwebloadtest"}, {"name": "jobschedulernormalweb"}, {"name": "jobschedulernormalwebloadtest"}, {"name": "jobschedulerurgentweb"}, {"name": "jobschedulerurgentwebloadtest"}], "common_settings": {"internal_hosts": {"*": null}, "external_hosts": {"dynamodb_iad": null, "sqs_iad": null, "sqs_pdx": null}, "redis": {"jobschedulermultiredis": {"port": 9579}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"jobschedulerreaderwriternormal": {"fields": {"instances": "keyword", "num_instances": "long", "my_id": "keyword", "my_buckets": "long", "my_position": "long", "tot_buckets": "long", "exception_class": "keyword", "exception_code": "keyword"}}, "jobschedulerreaderwriterbulk": {"fields": {"my_id": "keyword", "num_instances": "long", "instances": "keyword", "my_position": "long", "my_buckets": "long", "tot_buckets": "long", "exception_class": "keyword"}}}, "version": "207920eb5f60f0a9f9531af6c2d9d950cba3788c", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "k8saccesscontroller": {"name": "k8saccesscontroller", "description": "Kubernetes controller to apply access contol based on Lyft ACL policies.", "repository": "git@github.com:lyft/k8saccesscontroller.git", "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "docs": {"section": "Infrastructure"}, "builder": {"name": "s2i", "params": {"builder": "lyft/s2igo:2ec402e660186711ad25f0b91c107ae9dc33d312"}}, "tests": [{"name": "unit", "type": "jailed", "command": "go test ./..."}], "deploy": [[{"name": "staging-dev", "legacy": false, "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/sla": "development"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "staging-infrastaging", "legacy": false, "kubernetes": {"enabled": true, "clusterLabels": [{"cluster.lyft.net/role": "infra"}, {"cluster.lyft.net/clustername": "infrastaging"}], "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "staging-infra-dev", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "infra-dev"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], [{"name": "staging-core-0", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1a", "cluster.lyft.net/environment": "staging", "cluster.lyft.net/role": "core"}}}, {"name": "staging-core-1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1b", "cluster.lyft.net/environment": "staging", "cluster.lyft.net/role": "core"}}}, {"name": "staging-core-2", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1d", "cluster.lyft.net/environment": "staging", "cluster.lyft.net/role": "core"}}}, {"name": "staging-core-3", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1e", "cluster.lyft.net/environment": "staging", "cluster.lyft.net/role": "core"}}}, {"name": "staging-core-4", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1f", "cluster.lyft.net/environment": "staging", "cluster.lyft.net/role": "core"}}}, {"name": "staging-cron", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/environment": "staging", "cluster.lyft.net/role": "omnicron"}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}}}, {"name": "staging-sonata", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/environment": "staging", "cluster.lyft.net/role": "sonata"}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}}}], {"name": "staging-all", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/environment": "staging", "cluster.lyft.net/role": ["core", "omnicron", "sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, [{"name": "production-core-0", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1a", "cluster.lyft.net/environment": "production", "cluster.lyft.net/role": "core"}}}, {"name": "production-core-1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1b", "cluster.lyft.net/environment": "production", "cluster.lyft.net/role": "core"}}}, {"name": "production-core-2", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1d", "cluster.lyft.net/environment": "production", "cluster.lyft.net/role": "core"}}}, {"name": "production-core-3", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1e", "cluster.lyft.net/environment": "production", "cluster.lyft.net/role": "core"}}}, {"name": "production-core-4", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1f", "cluster.lyft.net/environment": "production", "cluster.lyft.net/role": "core"}}}, {"name": "production-cron", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/environment": "production", "cluster.lyft.net/role": "omnicron"}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}}}, {"name": "production-sonata", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/environment": "production", "cluster.lyft.net/role": "sonata"}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}}}], {"name": "production-all", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/environment": "production", "cluster.lyft.net/role": ["core", "omnicron", "sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], "languages": ["go"], "image_type": "service", "service_tier": 2, "version": "688b632d9b4ca2fa420fe16ead4158be32680227", "images": [{"parent": {"name": "s2igo", "version": "2ec402e660186711ad25f0b91c107ae9dc33d312", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igo", "version": "2ec402e660186711ad25f0b91c107ae9dc33d312", "sub_image": null, "external": false}}, "k8sark": {"name": "k8sark", "description": "disaster recovery for k8s clusters", "repository": "git@github.com:lyft/k8sark.git", "image_type": "service", "service_tier": 3, "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "languages": ["bash"], "credentials": false, "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "mode": "direct"}, "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "mode": "direct"}}], "version": "7d5569240b8ae559e51a8d183b530f8c6aebbb20", "images": [{"parent": {"name": "imagebase", "version": "876dbc1b4548b1b19a192303633555cafa7f9e08", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "876dbc1b4548b1b19a192303633555cafa7f9e08", "sub_image": null, "external": false}}, "k8sclusterregistry": {"name": "k8sclusterregistry", "description": "Controllers for managing Kubernetes cluster state and metadata.", "repository": "git@github.com:lyft/k8sclusterregistry.git", "slack": "#deploys-bots", "team_email": "deploys-team@lyft.com", "pagerduty_escalation_policy": "Deploys", "image_type": "service", "docs": {"section": "Infrastructure"}, "languages": ["go"], "builder": {"name": "s2i", "params": {"builder": "lyft/s2igo:fa0c4921e2e8481015324ac1a2b841013a1a2fdf"}}, "containers": [{"name": "run", "command": "dumb-init -- k8sclusterregistry", "limits": {"cpu": 0.5, "memory": "128Mi"}}], "facets": [{"name": "main", "member": "k8sclusterregistry.run", "type": "worker", "sidecars": ["statsd"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "k8sdefinitions", "type": "direct", "direct": {"paths": ["k8sclusterregistry"]}}], "deploy": [{"name": "staging", "orca": [{"region": "iad"}], "kubernetes": {"interpolation_vars": {"namespace": "k8sclusterregistry-staging"}, "enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "cluster_labels": {"cluster.lyft.net/role": "deploys"}}, "legacy": false, "automatic": true, "targets": [{"facet": "main"}, {"facet": "k8sdefinitions"}]}, {"name": "production-infra", "orca": [{"region": "iad"}], "kubernetes": {"interpolation_vars": {"namespace": "k8sclusterregistry-production"}, "enabled": true, "mode": "mixed", "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "cluster_labels": {"cluster.lyft.net/role": "infra"}}, "legacy": false, "targets": [{"facet": "main"}, {"facet": "k8sdefinitions"}]}, {"name": "production", "orca": [], "kubernetes": {"interpolation_vars": {"namespace": "k8sclusterregistry-production"}, "enabled": true, "mode": "mixed", "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "cluster_labels": {"cluster.lyft.net/role": "deploys"}}, "legacy": false, "targets": [{"facet": "main"}, {"facet": "k8sdefinitions"}]}], "service_tier": 3, "version": "1c8cae6685155a0c23b0e1faad2bcf1c55819547", "images": [{"parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}}, "k8sconfidant": {"name": "k8sconfidant", "description": "confidant client for kubernetes", "repository": "git@github.com:lyft/k8s-secret-injector.git", "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "slack": "#compute-bots", "docs": {"section": "Infrastructure"}, "image_type": "service", "service_tier": 3, "languages": ["bash", "go"], "builder": {"name": "s2i", "params": {"builder": "lyft/s2igo:b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6"}}, "tests": [{"name": "unit", "type": "jailed", "command": "make all"}], "deploy": [[{"name": "staging-sidecar-test1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/clustername": ["sidecar-test1"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sidecar-test1"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "staging", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "staging-provtest", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/clustername": ["provtest"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["provtest"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "staging", "client_burst_limit": 32, "client_qps_limit": 5}}}, {"name": "staging-envoyminimesh", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/clustername": ["envoyminimesh"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["envoyminimesh"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "staging", "client_burst_limit": 2000, "client_qps_limit": 300}}}], [{"name": "staging-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "staging", "client_burst_limit": 32, "client_qps_limit": 5}}}, {"name": "staging-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}, "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "staging", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "staging-allegro", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["allegro"]}, "cluster_labels": {"cluster.lyft.net/role": ["allegro"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "staging", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "staging-stateful", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}, "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "staging", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "staging-trustnetwork", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["trustnetwork"]}, "cluster_labels": {"cluster.lyft.net/role": ["trustnetwork"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "staging", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "staging-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "staging", "client_burst_limit": 32, "client_qps_limit": 5}}}, {"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "staging", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "staging-flink", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flink"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["flink"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "staging", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "staging-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": ["flytestaging"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "flytestaging", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "staging-flyte2", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": ["flytestaging2"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "flytestaging2", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "staging-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "staging", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "staging-sonata", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "staging", "client_burst_limit": 2000, "client_qps_limit": 300}}}], [{"name": "production-ciinfra", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "cluster_labels": {"cluster.lyft.net/role": ["ciinfra"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "ci", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "production-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}, "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "production", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "production-stateful", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}, "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "production", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "production-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "infra", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "production-devkube", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-staging-iad", "confidant_env": "staging", "kiam_env": "development", "client_burst_limit": 10000, "client_qps_limit": 300}}}, {"name": "production-devkubestaging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkubestaging"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-staging-iad", "confidant_env": "staging", "kiam_env": "development", "client_burst_limit": 10000, "client_qps_limit": 300}}}, {"name": "production-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "production", "client_burst_limit": 32, "client_qps_limit": 5}}}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "production", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "production-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "production", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "production-lyftlearn-av", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn-av"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml-av"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "lyftlearn-av", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "production-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": ["flyte"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "flyte", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "production-flyte2", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": ["flyte2"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "flyte2", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "production-flyte3", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": ["flyte3"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "flyte3", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "production-critical-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": ["flytecritical"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "flytecritical", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "production-critical2-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": ["flytecritical2"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "flytecritical2", "client_burst_limit": 2000, "client_qps_limit": 300}}}, {"name": "production-titan", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["spark"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["titan"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "production", "client_burst_limit": 32, "client_qps_limit": 5}}}, {"name": "production-trustnetwork", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["trustnetwork"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["trustnetwork"]}, "interpolation_vars": {"region": "us-east-1", "confidant_iam_role": "confidant-production-iad", "confidant_env": "production", "kiam_env": "production", "client_burst_limit": 2000, "client_qps_limit": 300}}}]], "version": "071488337df7edf8a70a95b6d0ad7b2139e1f330", "images": [{"parent": {"name": "s2igo", "version": "b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igo", "version": "b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6", "sub_image": null, "external": false}}, "k8sdeploy": {"name": "k8sdeploy", "description": "Helper container to do basic Jenkins k8s deploys", "repository": "git@github.com:lyft/k8sdeploy.git", "slack": "#deploys-bots", "team_email": "deploys-team@lyft.com", "pagerduty_escalation_policy": "Deploys", "credentials_legacy": false, "languages": ["go"], "image_type": "tool", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igo:fa0c4921e2e8481015324ac1a2b841013a1a2fdf"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile", "sub_image": "test"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "interactive", "command": "/bin/bash"}, {"name": "testdeploy", "command": "/go/src/github.com/lyft/k8sdeploy/deploy-integration-test.sh", "sub_image": "test", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "run", "command": "k8sdeploy"}], "tests": [{"name": "unit", "type": "jailed", "command": "env NO_AWS=1 make test"}, {"name": "integration", "type": "tool", "tool": "k8sdeploy.testdeploy"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false, "automatic": false, "orca": [{"region": "iad"}]}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "17:00 America/Los_Angeles"}, "version": "eeaedc2b330549db1c00cd0833dc286e834fbd95", "images": [{"parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": "test"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}}, "k8sdiscoverycontroller": {"name": "k8sdiscoverycontroller", "description": "discovery controller for k8s service pods", "repository": "git@github.com:lyft/k8s-sidecars.git:discovery-controller", "slack": "#prov-bots", "team_email": "provisioning-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "docs": {"section": "Infrastructure"}, "builder": {"name": "s2i", "params": {"builder": "lyft/s2igocli:0b0001a7bbae85231b4c69481db8bf3f6fb86d98"}}, "deploy": [{"name": "development", "legacy": false}, [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true}}, {"name": "staging-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}}}, {"name": "staging-sidecar-test1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sidecar-test1"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sidecar-test1"]}}}], [{"name": "production-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}}}, {"name": "production-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["k8sbox"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["k8sbox"]}}}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}}]], "languages": ["bash", "go"], "image_type": "service", "service_tier": 3, "version": "57b9ee83b73827224e0113f2074057b0f869b843", "images": [{"parent": {"name": "s2igocli", "version": "0b0001a7bbae85231b4c69481db8bf3f6fb86d98", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "0b0001a7bbae85231b4c69481db8bf3f6fb86d98", "sub_image": null, "external": false}}, "k8se2etest": {"name": "k8se2etest", "description": "E2E testing suite for k8s packer ami releases.", "repository": "git@github.com:lyft/k8se2etest.git", "team_email": "provisioning-team@lyft.com", "languages": ["bash"], "slack": "#prov-bots", "pagerduty_escalation_policy": "Provisioning", "credentials": false, "credentials_legacy": false, "image_type": "tool", "containers": [{"name": "run", "command": "/code/k8se2etest/scripts/entrypoint.sh"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}]}], "version": "fd010434697883dc78b67974a21b134c03cf41ee", "images": [{"parent": {"name": "bionicbase", "version": "d02d56073b76687036aada7dababdc5eb2aeea64", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "d02d56073b76687036aada7dababdc5eb2aeea64", "sub_image": null, "external": false}}, "k8sheka": {"name": "k8sheka", "description": "kubernetes application logging agent (v2 parity) image", "repository": "git@github.com:lyft/k8s-sidecars.git:k8sheka", "containers": [{"name": "agent", "start_time": 60}], "groups": [{"name": "dev", "members": ["control.dev", "k8sheka.agent"]}], "deploy": [{"name": "obs-dev", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["obs-dev"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["obs-dev"]}}}, {"name": "staging-sidecar-test1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sidecar-test1"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sidecar-test1"]}}}, {"name": "staging-envoyminimesh", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["envoyminimesh"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["envoyminimesh"]}}}, [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "staging-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}}}, {"name": "staging-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}, "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}}}, {"name": "staging-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "staging-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "staging-flink", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flink"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["flink"]}}}, {"name": "staging-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "staging-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "flyte"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}}], [{"name": "production-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}, "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}}}, {"name": "production-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-titan", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["spark"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["titan"]}}}, {"name": "production-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-devkube", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}}}, {"name": "production-devkubestaging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkubestaging"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}}}, {"name": "production-lyftlearn-av", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn-av"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml-av"]}}}, {"name": "production-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "flyte"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}}, {"name": "production-critical-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "flytecritical"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}}], [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1b", "legacy": false, "availability_zone": "us-east-1b", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1e", "legacy": false, "availability_zone": "us-east-1e", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1f", "legacy": false, "availability_zone": "us-east-1f", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "image_type": "service", "slack": "#compute-bots", "service_tier": 3, "version": "5e71dc48197ea56d749ac015cf4ab9a5edbe248e", "images": [{"parent": {"name": "imagebase", "version": "876dbc1b4548b1b19a192303633555cafa7f9e08", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "876dbc1b4548b1b19a192303633555cafa7f9e08", "sub_image": null, "external": false}}, "k8slocalprovisioner": {"name": "k8slocalprovisioner", "description": "sig-storage-local-static-provisioner controller for creating local persistent volumes for stateful services", "repository": "git@github.com:lyft/k8slocalprovisioner.git", "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "slack": "#compute-bots", "credentials": false, "docs": {"section": "Infrastructure"}, "image_type": "service", "service_tier": 3, "languages": ["go"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igo:fa0c4921e2e8481015324ac1a2b841013a1a2fdf"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "bash -c \"GO111MODULE=on go test ./...\"", "autotrigger": false}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure", "autotrigger": false}], "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "mode": "direct", "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}}, "automatic": true}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "mode": "direct", "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}}}], "version": "eec0eb7348f1a0253ad4a139fd778c980ca8587f", "images": [{"parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}}, "k8snamespacerbac": {"name": "k8snamespacerbac", "description": "Kubernetes Namespace controller that auto-populates RoleBindings for RBAC.", "repository": "git@github.com:lyft/containers.git:k8s-namespace-rbac", "slack": "#deploys-bots", "team_email": "deploys-team@lyft.com", "pagerduty_escalation_policy": "Deploys", "image_type": "service", "languages": ["go"], "builder": {"name": "s2i", "params": {"builder": "lyft/s2igocli:cd9d4ee0e4b25a6f77ef614983fc562dbc20525d"}}, "containers": [{"name": "interactive", "command": "/bin/bash"}], "deploy": [{"name": "production-devkube", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}}, "automatic": false}], "version": "faab26ebbc5b44fd4ae624b416228e217cc4a67e", "images": [{"parent": {"name": "s2igocli", "version": "cd9d4ee0e4b25a6f77ef614983fc562dbc20525d", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "cd9d4ee0e4b25a6f77ef614983fc562dbc20525d", "sub_image": null, "external": false}}, "k8snsq": {"name": "k8snsq", "description": "nsq client for kubernetes", "repository": "git@github.com:lyft/k8s-sidecars.git:nsq", "pagerduty_escalation_policy": "Provisioning", "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "credentials": false, "docs": {"section": "Infrastructure"}, "containers": [{"name": "spin", "command": "sleep infinity"}], "groups": [{"name": "testgroup", "members": ["control.dev", "k8snsq.spin"]}], "tests": [{"name": "unit", "type": "execution", "container": "k8snsq.spin", "group": "k8snsq.testgroup", "command": "/srv/nsq/venv/bin/py.test -vvv /srv/nsq2ext/"}], "deploy": [{"name": "staging-sidecar-test1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sidecar-test1"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sidecar-test1"]}}}, [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "staging-allegro", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["allegro"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["allegro"]}}}, {"name": "staging-sonata", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}}}, {"name": "staging-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}}}, {"name": "staging-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "staging-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "staging-flink", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flink"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["flink"]}}}, {"name": "staging-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flyte"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "staging-envoyminimesh", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["envoyminimesh"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["envoyminimesh"]}}}], [{"name": "production-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-lyftlearn-av", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn-av"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml-av"]}}}, {"name": "production-titan", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["spark"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["titan"]}}}, {"name": "production-sonata", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}}}, {"name": "production-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flyte"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-critical-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flytecritical"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-devkube", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}}}, {"name": "production-devkubestaging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkubestaging"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}}}], [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1b", "legacy": false, "availability_zone": "us-east-1b", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1e", "legacy": false, "availability_zone": "us-east-1e", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1f", "legacy": false, "availability_zone": "us-east-1f", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], "languages": ["bash"], "image_type": "service", "service_tier": 3, "version": "b54db8590a235e11f08ef385f45bd3b1863aafa6", "images": [{"parent": {"name": "bionicbase", "version": "1e528f4b38210368cdf8837ac5d8060c4a8fe90b", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "1e528f4b38210368cdf8837ac5d8060c4a8fe90b", "sub_image": null, "external": false}}, "k8soverprovision": {"name": "k8soverprovision", "description": "A basic deployment which schedules low priority pods which are designed to be evicted", "repository": "git@github.com:lyft/overprovision.git", "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "image_type": "service", "service_tier": 3, "languages": ["bash"], "docs": {"section": "Infrastructure"}, "deploy": [{"name": "staging-sidecar-test1", "legacy": false, "kubernetes": {"enabled": true, "path": "small", "cluster_labels": {"cluster.lyft.net/role": "sidecar-test1"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "sidecar-test1"}}}, {"name": "staging-us-east-1a", "legacy": false, "kubernetes": {"enabled": true, "path": "big"}}, {"name": "staging-infra", "legacy": false, "kubernetes": {"enabled": true, "path": "small", "cluster_labels": {"cluster.lyft.net/role": "infra"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}}}, [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "path": "big", "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}}}], {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"path": "big", "enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"path": "big", "enabled": true}}, {"name": "production", "legacy": false, "kubernetes": {"path": "big", "enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}}}], "version": "b39e963e2f7161651e0c482b4fd1bb9319ce295e", "images": [{"parent": {"name": "bionicbase", "version": "ee338ebf71e054b132773aefdd8870b1bd4f3aa2", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "ee338ebf71e054b132773aefdd8870b1bd4f3aa2", "sub_image": null, "external": false}}, "k8sprofiler": {"name": "k8sprofiler", "description": "profiler for all services running on k8s", "repository": "git@github.com:lyft/k8s-service-profilers.git", "image_type": "service", "credentials": false, "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "service_tier": 3, "containers": [{"name": "spin", "command": "sleep infinity"}], "deploy": [{"name": "staging-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}}, {"name": "staging", "legacy": false, "kubernetes": {"enabled": true}}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}}], "languages": ["python"], "version": "c3a972b5dfa85af7658fae3a6c7ae1663c260ec9", "images": [{"parent": {"name": "bionicbase", "version": "1e528f4b38210368cdf8837ac5d8060c4a8fe90b", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "1e528f4b38210368cdf8837ac5d8060c4a8fe90b", "sub_image": null, "external": false}}, "k8srbacpolicies": {"name": "k8srbacpolicies", "description": "Base policies for Kubernetes RBAC", "repository": "git@github.com:lyft/k8srbacpolicies.git", "pagerduty_escalation_policy": "Provisioning", "team_email": "provisioning-team@lyft.com", "slack": "#prov-bots", "credentials": false, "docs": {"section": "Infrastructure"}, "deploy": [{"name": "staging", "legacy": true, "automatic": true, "kubernetes": {"enabled": false}}, {"name": "production", "legacy": true, "automatic": false, "kubernetes": {"enabled": false}}], "languages": ["bash"], "image_type": "service", "service_tier": 3, "version": "053ff9416fc27923df3d6e92e830890560795323", "images": [{"parent": {"name": "bionicbase", "version": "9fedde995e8337c2bc63e4cc6a1c0a7133575eb5", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "9fedde995e8337c2bc63e4cc6a1c0a7133575eb5", "sub_image": null, "external": false}}, "k8srotator": {"name": "k8srotator", "description": "kubernetes cluster upgrade tool", "repository": "git@github.com:lyft/k8srotator.git", "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "slack": "#compute-bots", "credentials": false, "containers": [{"name": "apply", "sub_image": "jenkinsworker", "command": "/code/k8srotator/scripts/apply-trigger.sh"}, {"name": "delete", "sub_image": "jenkinsworker", "command": "/code/k8srotator/scripts/delete-trigger.sh"}, {"name": "interactive", "sub_image": "jenkinsworker", "command": "/bin/bash"}], "docs": {"path": ".", "section": "Infrastructure"}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build", "params": {"sub_image": "jenkinsworker"}}, {"name": "s2i", "params": {"builder": "lyft/s2igo:b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}], "deploy": [{"name": "staging-dev-sla", "orca": [{"orca_location": "ops", "region": "iad"}], "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "development"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infratesting"}}}, [{"name": "staging", "orca": [{"orca_location": "ops", "region": "iad"}], "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "staging-cron", "orca": [{"orca_location": "ops", "region": "iad"}], "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "omnicron"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "omnicron"}}}, {"name": "staging-lyftlearn", "orca": [{"orca_location": "ops", "region": "iad"}], "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "staging-infra-dev-sla", "orca": [{"orca_location": "ops", "region": "iad"}], "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "infra-dev"}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["boba", "boba2", "sidecar-test1", "obs-dev", "trustnetwork"]}}}, {"name": "staging-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}], [{"name": "production", "orca": [{"orca_location": "ops", "region": "iad"}], "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-cron", "orca": [{"orca_location": "ops", "region": "iad"}], "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "omnicron"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "omnicron"}}}, {"name": "production-lyftlearn", "orca": [{"orca_location": "ops", "region": "iad"}], "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-lyftlearn-av", "orca": [{"orca_location": "ops", "region": "iad"}], "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn-av"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml-av"]}}}, {"name": "production-trustnetwork", "orca": [{"orca_location": "ops", "region": "iad"}], "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["trustnetwork"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["trustnetwork"]}}}]], "languages": ["go"], "image_type": "service", "service_tier": 3, "version": "b32be4dde2c7ea3fb65777be76b08b0d5e024642", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": "jenkinsworker"}, {"parent": {"name": "s2igo", "version": "b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igo", "version": "b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6", "sub_image": null, "external": false}}, "k8sstatsagent": {"name": "k8sstatsagent", "description": "kubernetes stats agent image", "repository": "git@github.com:lyft/k8s-sidecars.git:k8sstatsagent", "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "slack": "#compute-bots", "credentials": false, "docs": {"section": "Infrastructure"}, "deploy": [[{"name": "staging-sidecar-test1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sidecar-test1"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sidecar-test1"]}}}, {"name": "staging-boba", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "infra-dev"}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["boba"]}}}], [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "staging-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}}}, {"name": "staging-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "staging-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "staging-flink", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flink"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["flink"]}}}, {"name": "staging-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flyte"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "staging-allegro", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["allegro"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["allegro"]}}}, {"name": "staging-envoyminimesh", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["envoyminimesh"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["envoyminimesh"]}}}], [{"name": "production-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-lyftlearn-av", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn-av"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml-av"]}}}, {"name": "production-titan", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["spark"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["titan"]}}}, {"name": "production-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flyte"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-critical-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flytecritical"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-devkube", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}}}, {"name": "production-devkubestaging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkubestaging"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}}}], [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1b", "legacy": false, "availability_zone": "us-east-1b", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1e", "legacy": false, "availability_zone": "us-east-1e", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1f", "legacy": false, "availability_zone": "us-east-1f", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], "languages": ["bash"], "image_type": "service", "service_tier": 3, "version": "50af3e0292d83dfb6a67d3f4e366423457eb1b71", "images": [{"parent": {"name": "imagebase", "version": "876dbc1b4548b1b19a192303633555cafa7f9e08", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "876dbc1b4548b1b19a192303633555cafa7f9e08", "sub_image": null, "external": false}}, "k8ssuperset": {"name": "k8ssuperset", "description": "internal visualization tool for interactively exploring lyft data (apache/incubator-superset)", "repository": "git@github.com:lyft/k8ssuperset.git", "credentials": true, "builder": {"name": "docker_build"}, "containers": [{"name": "gunicorn", "command": "gunicorn superset:app --workers=8 --keep-alive 120 --forwarded-allow-ips=\"*\" -k gevent --timeout 120 --worker-connections=1000 -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 4, "memory": "16Gi"}}, {"name": "celery", "command": "celery worker --app=superset.sql_lab:celery_app -l info", "limits": {"cpu": 2, "memory": "8Gi"}}], "groups": [{"name": "service", "members": ["k8ssuperset.gunicorn", "k8ssuperset.celery"]}], "facets": [{"name": "main", "member": "k8ssuperset.service", "type": "service", "autoscaling": {"min_size": 2, "max_size": 2}}, {"name": "canary", "member": "k8ssuperset.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "kubernetes": {"enabled": true}, "legacy": false, "targets": [{"facet": "main"}]}, {"name": "canary", "automatic": false, "kubernetes": {"enabled": true}, "legacy": false, "targets": [{"facet": "canary"}]}, {"name": "production", "automatic": false, "kubernetes": {"enabled": true}, "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "k8ssuperset"}], "common_settings": {}}}, "slack": "#superset-k8s-ops", "team_email": "superset-eng@lyft.com", "image_type": "service", "service_tier": 2, "pagerduty_escalation_policy": "Superset", "version": "a6b2bd47a5800833027f88f56512b2ab7a63b831", "images": [{"parent": {"name": "bionicbase", "version": "d7b85f6ea2c410dbb251bd5923e54d8ba3517371", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "d7b85f6ea2c410dbb251bd5923e54d8ba3517371", "sub_image": null, "external": false}}, "k8susagetracker": {"name": "k8susagetracker", "description": "Service for keeping track of Kubernetes costs", "repository": "git@github.com:lyft/k8susagetracker.git", "image_type": "service", "service_tier": 3, "slack": "#capacity", "team_email": "capacity@lyft.com", "pagerduty_escalation_policy": "Capacity", "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "globalservice", "command": "dumb-init -- service_venv python manage.py start", "workdir": "/code/k8susagetracker", "sub_image": "k8s"}, {"name": "localservice", "command": "dumb-init -- service_venv python manage.py start_local", "workdir": "/code/k8susagetracker", "sub_image": "k8s"}], "facets": [{"name": "main", "member": "k8susagetracker.globalservice", "type": "worker", "update_strategy": "recreate", "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "k8susagetracker.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "k8susagetracker.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": "core-staging-0"}}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": "core-prod-0"}}, "targets": [{"facet": "main"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "k8susagetracker"}], "common_settings": {"external_hosts": {"firehose_iad": null}}}}, "version": "f86b6df418f21ad5ea9cd104a0d2414cfd4d4f5d", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "kafka": {"name": "kafka", "description": "Kafka server along with zookeeper", "repository": "git@github.com:lyft/containers.git:kafka", "credentials": false, "containers": [{"name": "server", "command": "/code/ops/base/entrypoint.sh", "start_time": 120, "exports": [{"name": "zookeeper", "port": 2181, "protocol": "tcp"}, {"name": "kafka", "port": 9092, "protocol": "tcp"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kafka.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "kafka.dev"}, {"name": "unittest", "type": "execution", "group": "kafka.dev", "container": "kafka.server", "command": "mvn test surefire-report:report -Dcheckstyle.skip=true"}, {"name": "integration", "type": "execution", "group": "kafka.dev", "container": "kafka.server", "command": "mvn test-compile failsafe:integration-test failsafe:verify -Dcheckstyle.skip=true"}, {"name": "checkstyle", "type": "execution", "group": "kafka.dev", "container": "kafka.server", "command": "mvn checkstyle:check"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false}, {"name": "canary", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false}], "languages": [], "image_type": "tool", "slack": "#streaming-pubsub", "team_email": "streaming-pubsub@lyft.com", "version": "db1391e588f34422268033cd7d905725eda2ee5b", "images": [{"parent": {"name": "java8", "version": "39c012e281253d285cd40c754a533883dbb188d7", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "39c012e281253d285cd40c754a533883dbb188d7", "sub_image": null, "external": false}}, "kafkabrokerstat": {"name": "kafkabrokerstat", "description": "Ingest broker stats, provided by Confluent, into statsd", "repository": "git@github.com:lyft/kafkabrokerstat.git", "image_type": "service", "service_tier": 3, "slack": "#streaming-pubsub", "team_email": "streaming-pubsub@lyft.com", "pagerduty_escalation_policy": "Streaming-PubSub", "languages": ["python", "bash"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "kafkabrokerstat.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "kafkabrokerstat.dev"}, {"name": "unit", "type": "restricted", "group": "kafkabrokerstat.dev", "command": "make test_unit", "container": "kafkabrokerstat.legacy", "whitelist": ["kafkabrokerstat-development-iad-onebox.lyft.net."], "autotrigger": true, "run_in_pr": true}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": false}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}]], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:28e39e6f597d94733f236de463dc9d18ad6af692", "sub_image": "precommit"}}]}}, "version": "83744e710cbba2faee05de3ee66cf144e6204600", "images": [{"parent": {"name": "opsbase", "version": "805e18ede9de2fb5f6cddf0d720eb54f9881cb0d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "28e39e6f597d94733f236de463dc9d18ad6af692", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "805e18ede9de2fb5f6cddf0d720eb54f9881cb0d", "sub_image": null, "external": false}}, "kafkaclusterconfig": {"name": "kafkaclusterconfig", "description": "Library that auto-detects Kafka clusters and return a POJO with info about them", "repository": "git@github.com:lyft/kafka-cluster-config.git", "image_type": "library", "service_tier": 1, "credentials": false, "slack": "#streaming-pubsub", "team_email": "streaming-pubsub@lyft.com", "pagerduty_escalation_policy": "Streaming-PubSub", "languages": ["java"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ijava:effbb7a25a8fb8404d10821fee25274276edfc3e"}}]}}, "deploy": [{"name": "production", "role": "java-production-iad-deploy", "legacy": true}], "version": "4863da22f1e6b9be7383e1ce6891b94cae5012ca", "images": [{"parent": {"name": "s2ijava", "version": "effbb7a25a8fb8404d10821fee25274276edfc3e", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ijava", "version": "effbb7a25a8fb8404d10821fee25274276edfc3e", "sub_image": null, "external": false}}, "kafkaconfigdata": {"name": "kafkaconfigdata", "description": "Runtime config to manage kafka dependency requirements of analytics event logger.", "repository": "git@github.com:lyft/kafkaconfigdata.git", "image_type": "data", "service_tier": 3, "slack": "#streaming-pubsub", "team_email": "streaming-pubsub@lyft.com", "pagerduty_escalation_policy": "Streaming-PubSub", "languages": ["bash", "python"], "builder": {"name": "s2i", "params": {"builder": "lyft/configsetbase:187ab110f9f7de79d98ef6b26a7bcdd3637956f6"}}, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/kafkaconfigdata"]}], "groups": [{"name": "test", "members": ["kafkapythonbenchmark.dev"]}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "canary", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "10f9193ad18838b9a7f743824e241069883c6e55", "images": [{"parent": {"name": "configsetbase", "version": "187ab110f9f7de79d98ef6b26a7bcdd3637956f6", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "configsetbase", "version": "187ab110f9f7de79d98ef6b26a7bcdd3637956f6", "sub_image": null, "external": false}}, "kafkaconsumerlagmonitor": {"name": "kafkaconsumerlagmonitor", "description": "monitor lags of consumers in kafka cluster", "repository": "git@github.com:lyft/streamingcontroller.git:kafkaconsumerlagmonitor", "image_type": "service", "service_tier": 3, "credentials": true, "slack": "#streaming-pubsub", "team_email": "streaming-pubsub@lyft.com", "pagerduty_escalation_policy": "Streaming-PubSub", "languages": ["bash", "java"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ijava:9aee389e8a7ff50059e1f02ba4f8e395fc731792"}}]}}, "containers": [{"name": "main", "command": "dumb-init -- java -Xmx2g -cp target/kafkaconsumerlagmonitor.jar:target/lib/* com.lyft.kafka.Main", "workdir": "/code/streamingcontroller/kafkaconsumerlagmonitor", "limits": {"cpu": 2, "memory": "4Gi"}}], "tests": [{"name": "unit", "type": "jailed", "command": "mvn --batch-mode test"}], "facets": [{"name": "mainworker", "member": "kafkaconsumerlagmonitor.main", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "mainworker"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infrastaging"}}}, {"name": "production", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "mainworker"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infra"}}}], "version": "9864553f25a326ea8a4b692a4e69fa0497931aba", "images": [{"parent": {"name": "s2ijava", "version": "9aee389e8a7ff50059e1f02ba4f8e395fc731792", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ijava", "version": "9aee389e8a7ff50059e1f02ba4f8e395fc731792", "sub_image": null, "external": false}}, "kafkacruisecontrol": {"name": "kafkacruisecontrol", "description": "cruise control services that manage kafka clusters", "repository": "git@github.com:lyft/streamingcontroller.git:kafkacruisecontrol", "image_type": "service", "service_tier": 3, "credentials": true, "slack": "#streaming-pubsub", "team_email": "streaming-pubsub@lyft.com", "pagerduty_escalation_policy": "Streaming-PubSub", "languages": ["bash"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}]}}, "containers": [{"name": "service", "command": "/code/streamingcontroller/kafkacruisecontrol/ops/scripts/kafkacruisecontrol-start.sh", "limits": {"cpu": 2, "memory": "4Gi"}, "exports": [{"name": "api", "port": 9090}]}], "facets": [{"name": "stagingi3dev", "member": "kafkacruisecontrol.service", "type": "service", "environment_files": ["ops/config/pillar/staging-i3-dev_env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}, {"name": "staginghdd", "member": "kafkacruisecontrol.service", "type": "service", "environment_files": ["ops/config/pillar/staging-hdd_env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}, {"name": "stagingl5east", "member": "kafkacruisecontrol.service", "type": "service", "environment_files": ["ops/config/pillar/staging-l5-east_env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}, {"name": "staging", "member": "kafkacruisecontrol.service", "type": "service", "environment_files": ["ops/config/pillar/staging_env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}, {"name": "stagingseclogs", "member": "kafkacruisecontrol.service", "type": "service", "environment_files": ["ops/config/pillar/staging-sec-logs_env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}, {"name": "stagingobslogs", "member": "kafkacruisecontrol.service", "type": "service", "environment_files": ["ops/config/pillar/staging-obs-logs_env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}, {"name": "staginglogs", "member": "kafkacruisecontrol.service", "type": "service", "environment_files": ["ops/config/pillar/staging-logs_env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}, {"name": "stagingaep1", "member": "kafkacruisecontrol.service", "type": "service", "environment_files": ["ops/config/pillar/staging-aep-1_env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}, {"name": "stagingiadfast1", "member": "kafkacruisecontrol.service", "type": "service", "environment_files": ["ops/config/pillar/staging-iadfast-1_env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}, {"name": "prodaep1", "member": "kafkacruisecontrol.service", "type": "service", "environment_files": ["ops/config/pillar/prod-aep-1_env.sls"], "autoscaling": {"environment": {"production": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}, {"name": "prodiad1", "member": "kafkacruisecontrol.service", "type": "service", "environment_files": ["ops/config/pillar/prod-iad-1_env.sls"], "autoscaling": {"environment": {"production": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}, {"name": "prodl5east", "member": "kafkacruisecontrol.service", "type": "service", "environment_files": ["ops/config/pillar/prod-l5-east_env.sls"], "autoscaling": {"environment": {"production": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}, {"name": "prodalpha", "member": "kafkacruisecontrol.service", "type": "service", "environment_files": ["ops/config/pillar/prodalpha_env.sls"], "autoscaling": {"environment": {"production": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}, {"name": "prodalpha2", "member": "kafkacruisecontrol.service", "type": "service", "environment_files": ["ops/config/pillar/prodalpha2_env.sls"], "autoscaling": {"environment": {"production": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}, {"name": "productionlogs", "member": "kafkacruisecontrol.service", "type": "service", "environment_files": ["ops/config/pillar/production-logs_env.sls"], "autoscaling": {"environment": {"production": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}, {"name": "productionobslogs", "member": "kafkacruisecontrol.service", "type": "service", "environment_files": ["ops/config/pillar/production-obs-logs_env.sls"], "autoscaling": {"environment": {"production": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}, {"name": "productionseclogs", "member": "kafkacruisecontrol.service", "type": "service", "environment_files": ["ops/config/pillar/production-sec-logs_env.sls"], "autoscaling": {"environment": {"production": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}, {"name": "prodiadfast1", "member": "kafkacruisecontrol.service", "type": "service", "environment_files": ["ops/config/pillar/prod-iadfast-1_env.sls"], "autoscaling": {"environment": {"production": {"min_size": 1, "max_size": 1}}}, "sidecars": ["statsd"]}], "deploy": [{"name": "staging-i3-dev", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "stagingi3dev"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infrastaging"}}}, {"name": "staging-hdd", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "staginghdd"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infrastaging"}}}, {"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "staging"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infrastaging"}}}, {"name": "staging-sec-logs", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "stagingseclogs"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infrastaging"}}}, {"name": "staging-obs-logs", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "stagingobslogs"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infrastaging"}}}, {"name": "staging-l5-east", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "stagingl5east"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infrastaging"}}}, {"name": "staging-aep-1", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "stagingaep1"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infrastaging"}}}, {"name": "staging-logs", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "staginglogs"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infrastaging"}}}, {"name": "staging-iadfast-1", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "stagingiadfast1"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infrastaging"}}}, {"name": "production-aep-1", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "prodaep1"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infra"}}}, {"name": "production-iad-1", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "prodiad1"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infra"}}}, {"name": "production-l5-east", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "prodl5east"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infra"}}}, {"name": "production-alpha", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "prodalpha"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infra"}}}, {"name": "production-alpha2", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "prodalpha2"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infra"}}}, {"name": "production-logs", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "productionlogs"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infra"}}}, {"name": "production-obs-logs", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "productionobslogs"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infra"}}}, {"name": "production-sec-logs", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "productionseclogs"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infra"}}}, {"name": "production-iadfast-1", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "prodiadfast1"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infra"}}}], "version": "c35aba0cfb7853d3ddce1148b0a4f0173eb8a9db", "images": [{"parent": {"name": "java10", "version": "b2a069e79beee6143fa37623e57dab7fc0c501cd", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java10", "version": "b2a069e79beee6143fa37623e57dab7fc0c501cd", "sub_image": null, "external": false}}, "kafkamonitor": {"name": "kafkamonitor", "description": "Smoke test for in-house Kafka clusters", "repository": "git@github.com:lyft/kafkamonitor.git", "image_type": "service", "service_tier": 2, "credentials": true, "slack": "#streaming-pubsub", "team_email": "streaming-pubsub@lyft.com", "pagerduty_escalation_policy": "Streaming-PubSub", "languages": ["bash", "java"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ijava:1614d45ed717846b2d159fad53e142a84d2f2139"}}]}}, "containers": [{"name": "service", "command": "dumb-init -- java -Xmx8G -Xms1G -Dorg.slf4j.simpleLogger.defaultLogLevel=info -cp kafkamonitorapp/target/kafkamonitorapp.jar com.lyft.kafka.Main", "workdir": "/code/kafkamonitor/", "limits": {"cpu": 8, "memory": "8192M"}}], "facets": [{"name": "main", "member": "kafkamonitor.service", "type": "service", "sidecars": ["statsd"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infrastaging"}}}, {"name": "production", "automatic": false, "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infra"}}}], "version": "121729e0db551e612fa70d4ac5f171a37bc27edb", "images": [{"parent": {"name": "s2ijava", "version": "1614d45ed717846b2d159fad53e142a84d2f2139", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ijava", "version": "1614d45ed717846b2d159fad53e142a84d2f2139", "sub_image": null, "external": false}}, "kafkaremediator": {"name": "kafkaremediator", "description": "Service that autoremediates Kafka clusters", "repository": "git@github.com:lyft/streamingcontroller.git:kafkaremediator", "image_type": "tool", "service_tier": 1, "credentials": true, "slack": "#streaming-pubsub", "team_email": "streaming-pubsub@lyft.com", "pagerduty_escalation_policy": "Streaming-PubSub", "languages": ["bash", "java"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ijava:8280ac7c2d3330e831a6f573c887decebada10d3"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "mvn --batch-mode test"}], "containers": [{"name": "service", "command": "dumb-init -- java -Dorg.slf4j.simpleLogger.defaultLogLevel=info -cp target/kafkaremediator.jar:target/lib/* com.lyft.kafka.Main", "workdir": "/code/streamingcontroller/kafkaremediator", "limits": {"cpu": 2, "memory": "512Mi"}}], "facets": [{"name": "main", "member": "kafkaremediator.service", "type": "service", "sidecars": ["statsd"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infrastaging"}}}, {"name": "production", "automatic": false, "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infra"}}}], "version": "00a3a71740cff44982b2456cdcf7d3f4bb2ca4cd", "images": [{"parent": {"name": "s2ijava", "version": "8280ac7c2d3330e831a6f573c887decebada10d3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ijava", "version": "8280ac7c2d3330e831a6f573c887decebada10d3", "sub_image": null, "external": false}}, "kafkatopicprovisioner": {"name": "kafkatopicprovisioner", "description": "Topic provisioning config service for Kafka clusters", "repository": "git@github.com:lyft/streamingcontroller.git:kafkatopicprovisioner", "image_type": "tool", "service_tier": 1, "credentials": true, "slack": "#streaming-pubsub", "team_email": "streaming-pubsub@lyft.com", "pagerduty_escalation_policy": "Streaming-PubSub", "languages": ["bash", "java", "python"], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infrastaging"}}}, {"name": "production", "automatic": true, "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infra"}}}], "version": "29fd9e29b3ffbcc9c437d9f2b378bb65d9736a05", "images": [{"parent": {"name": "java10", "version": "b2a069e79beee6143fa37623e57dab7fc0c501cd", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java10", "version": "b2a069e79beee6143fa37623e57dab7fc0c501cd", "sub_image": null, "external": false}}, "karma": {"name": "karma", "description": "karma", "repository": "git@github.com:lyft/karma.git", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "s2ipython3"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "credentials": true, "containers": [{"name": "manage", "once": true, "command": "/code/karma/manage.sh"}, {"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 500, "exports": [{"name": "frontend", "port": 8080}], "limits": {"environment": {"development": {"cpu": 1.3, "memory": "1.6Gi"}}}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "featurebuilderdata.run", "idl.server", "jobscheduler.dev", "karma.legacy", "redis.dev"]}, {"name": "integration", "members": ["abacus.dev", "account.dev", "ats.qa_approve", "badcompanions.dev", "cancels.dev", "cetconcessions.dev", "challenges.dev", "coupons.dev", "dispatch.dev", "dsfeatures.dev", "drivermode.dev", "enterprise.dev", "envoy.server", "etaproxy.dev", "fare.dev", "flaggedtrips.dev", "ghostmatching.dev", "green.dev", "grow.dev", "jobscheduler.dev", "leadplatform.legacy", "ledger.dev", "locations.dev", "matchingexecution.dev", "modelexec.dev", "modelmetrics.dev", "payapi.dev", "places.dev", "pricing.dev", "publicapi.dev", "ratelimit.dev", "ratings.dev", "regions.dev", "rideexpensing.dev", "rides.dev", "ridesapi.dev", "ridexppredictor.dev", "routes.dev", "routesapi.dev", "sqs.dev", "streamingest.dev", "streets.dev", "supply.dev", "tcs.dev", "trips.dev", "tripsapi.dev", "usergroups.dev", "users.dev", "viewport.dev", "venues.dev", "wallet.dev", "karma.dev", "featurebuilderdata.run", "supplyrecords.dev"]}], "pulldeploy_components": {"data": ["featurebuilderdata", "regioncfgdata", "translationdata"]}, "configsets": ["karmarulesdata"], "tests": [{"name": "startup", "type": "startup", "group": "karma.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "execution", "group": "karma.dev", "container": "karma.legacy", "command": "make test_unit"}, {"name": "integration", "type": "sharded", "group": "karma.dev", "container": "karma.legacy", "target": "tests/integration", "virtualenv": "integration_venv", "float_dependencies": "15,45 2-22 * * *", "max_shard_duration": 5, "skip_threshold": 999, "reports": {"junit": "build/integration.xml"}}, {"name": "runtimerules", "type": "execution", "group": "karma.dev", "container": "karma.legacy", "autotrigger": false, "command": "make test_runtimerules"}], "slack": "#fraudsquad", "team_email": "integrity-eng@lyft.com", "pagerduty_escalation_policy": "Fraud Platform", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "links": [{"text": "Grafana karma-overview (staging)", "url": "https://grafana.lyft.net/dashboard/db/karma-overview?var-environment=staging"}, {"text": "Kibana Warnings & Errors (staging)", "url": "https://kibana-staging.lyft.net/goto/6880916d3426afeba6cbcbe8f160c5ef"}, {"text": "Grafana karma-models (staging)", "url": "https://grafana.lyft.net/dashboard/db/karma-models?var-environment=staging"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}], "links": [{"text": "Grafana karma-overview (prod)", "url": "https://grafana.lyft.net/dashboard/db/karma-overview"}, {"text": "Kibana canary logs", "url": "https://kibana.lyft.net/goto/aa1d45ffd208fc48a4346fd6f2b0c065"}, {"text": "Kibana Warnings & Errors", "url": "https://kibana.lyft.net/goto/726011ca234516c5119039f85c91cc9e"}, {"text": "Grafana karma-models (prod)", "url": "https://grafana.lyft.net/dashboard/db/karma-models?var-environment=production"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "links": [{"text": "Kibana canary & 1a logs", "url": "https://kibana.lyft.net/goto/6b6e11369934bd52a49e9d3c2366457f)"}]}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "service_tier": 0, "languages": ["bash", "python"], "image_type": "service", "docs": {"autogen_modules": ["app"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "karma"}, {"name": "karmabatch"}, {"name": "karmaupdate"}, {"name": "karmaworkers"}], "common_settings": {"internal_hosts": {"abacus": null, "ats": {"tls_enabled": true}, "badcompanions": null, "cancels": null, "challenges": null, "cetconcessions": null, "coupons": null, "driverloyalty": null, "dsfeatures": null, "enterprise": null, "enterprisepayapi": null, "etaproxy": null, "fare": null, "flaggedtrips": null, "guardian": null, "green": null, "grow": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "karma": null, "karmaupdate": null, "leadplatform": null, "ledger": null, "locations": null, "locationsmapmatch": null, "messaging": null, "modelexec": null, "modelexeccancels": null, "modelexecfraud": null, "modelexecmisc": null, "modelexecp1": null, "modelexecsupport": null, "modelexecupdate": null, "modelmetrics": null, "notes": null, "payapi": null, "places": null, "ratelimit": null, "regions": null, "ridehistory": null, "ridepasses": null, "riderperks": null, "ridexppredictor": null, "rides": null, "ridesapi": null, "ridescheduler": null, "routes": null, "routesapi": null, "supply": null, "supplyrecords": {"tls_enabled": true}, "supportcontact": null, "switchboard": null, "tcs": null, "tolls": null, "tripsapi": null, "txnhub": null, "usergroups": null, "users": null, "userprivacyrights": null, "wallet": null, "drivermode": null}, "external_hosts": {"apple_devicecheck": null, "dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null, "itunes": null, "whitepages": null, "threatmetrix": null}, "redis": {"karmamultiredis": {"port": 6380, "op_timeout_ms": 1250}}}}}, "logging": {"karmaupdate": {"fields": {"actor": "keyword", "applicable": "boolean", "challenge_id": "keyword", "claim": "keyword", "code": "long", "data": "keyword", "enforced": "boolean", "entity_id": "keyword", "error": "keyword", "error_id": "keyword", "error_msg": "keyword", "error_type": "keyword", "event_id": "keyword", "event_name": "keyword", "exc": {"message": "keyword", "type": "keyword"}, "exception_class": "keyword", "exception_code": "long", "execution_id": "keyword", "feature_group": "keyword", "feature_name": "keyword", "fired": "boolean", "http_id": "keyword", "id": "keyword", "identifier": "keyword", "is_rate_limited": "boolean", "model": "keyword", "name": "keyword", "path": "keyword", "positive": "boolean", "reason": "keyword", "region": "keyword", "ride_id": "keyword", "ride_type": "keyword", "rule": "keyword", "rule_name": "keyword", "schema_name": "keyword", "service": "keyword", "simulated": "boolean", "stat": "keyword", "switch": {"event": "keyword", "source": "keyword", "target": "keyword"}, "trigger": "keyword", "trigger_group": "keyword", "trigger_group_holdback_exempt": "boolean", "trigger_group_name": "keyword", "urm_request_id": "keyword", "user_agent": "keyword", "user_id": "keyword", "user_lyft_id": "keyword"}}, "karmaworkers": {"fields": {"chargeaccount_id": "keyword", "code": "long", "error": "keyword", "error_class": "keyword", "error_code": "long", "event_id": "keyword", "event_name": "keyword", "exc": {"message": "keyword", "type": "keyword"}, "expiration_date": "keyword", "provider_fingerprints": "keyword", "reason": "keyword", "rule_group": "keyword", "rules": "keyword", "service": "keyword", "stat": "keyword", "trigger_group": "keyword", "type": "keyword", "urm_request_id": "keyword", "user_id": "keyword", "user_lyft_id": "keyword"}}, "karma": {"fields": {"actor": "keyword", "applicable": "boolean", "attr": "keyword", "challenge_id": "keyword", "charge_account_id": "keyword", "claim": "keyword", "client_id": "keyword", "code": "long", "enforced": "boolean", "entity_id": "keyword", "error": "keyword", "error_id": "keyword", "error_msg": "keyword", "event_id": "keyword", "event_name": "keyword", "exc": {"message": "keyword", "type": "keyword"}, "execution_id": "keyword", "feature_group": "keyword", "feature_name": "keyword", "field_name": "keyword", "field_value": "long", "fired": "boolean", "force": "boolean", "fp_type": "keyword", "fp_value": "keyword", "holdback": "boolean", "http_id": "keyword", "id": "keyword", "identifier": "keyword", "ip_address": "keyword", "is_rate_limited": "boolean", "is_whitelist_rule": "boolean", "os": "keyword", "os_version": "keyword", "outcome_type": "keyword", "payer_user_id": "keyword", "phone_number": "keyword", "platform": "keyword", "positive": "boolean", "reasons": "keyword", "region": "keyword", "request_ip": "keyword", "response_reason": "keyword", "result": "keyword", "ride_id": "keyword", "ride_region": "keyword", "ride_type": "keyword", "route_id": "keyword", "rule": "keyword", "rule_group": "keyword", "rule_name": "keyword", "schema_name": "keyword", "session_id": "keyword", "simulated": "boolean", "stat": "keyword", "status": "long", "trigger": "keyword", "trigger_group": "keyword", "trigger_group_holdback_exempt": "boolean", "trigger_group_name": "keyword", "type": "keyword", "urm_request_id": "keyword", "user_id": "keyword", "user_lyft_id": "keyword", "user_obscured_id": "keyword", "user_phone_number": "keyword"}}}, "version": "35260a4304382c05cb09abc01cee5a4c0051e37f", "images": [{"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "s2ipython3"}, {"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "karmaint": {"name": "karmaint", "description": "Internal Front End service for managing Karma rules and other data, accessed from TOM", "repository": "git@github.com:lyft/karmaint.git", "image_type": "service", "service_tier": 2, "slack": "#fraudsquad", "team_email": "dev-fraud@lyft.com", "pagerduty_escalation_policy": "Fraud Platform", "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "frontend": {"node_version": "10.14.1-1nodesource1"}, "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "groups": [{"name": "dev", "members": ["control.dev", "envoy.server", "karma.dev", "karmaint.legacy"]}, {"name": "spinner", "members": ["karmaint.spin"]}, {"name": "integration", "members": ["karmaint.dev", "tom.integration", "envoy.server", "karma.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "karmaint.dev"}, {"name": "unit", "type": "execution", "group": "karmaint.dev", "container": "karmaint.legacy", "command": "make test_coverage"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "karmaint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"tom": null, "acl": null, "karma": null, "privacyaudit": null}}}}, "version": "35b61c340cf57de50f3c74fd7e58284ef1219510", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "karmarulesdata": {"name": "karmarulesdata", "description": "Runtime karma rules.", "repository": "git@github.com:lyft/karmarulesdata.git", "image_type": "data", "service_tier": 1, "slack": "#fraudsquad", "team_email": "dev-fraud@lyft.com", "pagerduty_escalation_policy": "Fraud Platform", "languages": ["bash", "python"], "builder": {"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/karmarulesdata"]}], "groups": [{"name": "test", "members": ["karma.dev"]}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}, {"name": "unit", "type": "jailed", "command": "make test"}, {"name": "karma", "type": "execution", "group": "karmarulesdata.test", "container": "karma.legacy", "command": "make test_runtimerules"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "canary", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "a773a0aec5e4bd50a5288ec57ebd43990760c279", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "kclexample": {"name": "kclexample", "description": "Python3 example to demonstrate KCL best practices for consumers on K8s", "repository": "git@github.com:lyft/kclexample.git", "slack": "#streaming-pubsub", "team_email": "streaming-pubsub@lyft.com", "pagerduty_escalation_policy": "devnull", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:36518650f40787ad43faa9717259a01880989029"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": "k8s", "packages": ["openjdk-8-jre-headless", "liblog4j1.2-java", "lbzip2"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/kclexample", "limits": {"cpu": 4, "memory": "8Gi", "environment": {"development": {"memory": "1Gi", "cpu": 1}}}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "kclworker", "command": "dumb-init -- /code/kcl/kcl-worker.sh", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi", "environment": {"development": {"memory": "1Gi", "cpu": 1}}}, "readiness_probe": {"exec_probe": {"command": ["kcl_worker_readiness_check"]}, "period_seconds": 60, "initial_delay_seconds": 30}}, {"name": "publisheventcronjob", "command": "dumb-init -- service_venv python manage.py hello", "sub_image": "k8s", "workdir": "/code/kclexample"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "kclexample.legacy"]}, {"name": "service_group", "members": ["kclexample.legacy"]}, {"name": "integration", "members": ["kclexample.dev", "lyfttestlib.core"]}], "tests": [{"name": "startup", "type": "startup", "group": "kclexample.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "kclexample.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "kcl", "member": "kclexample.kclworker", "type": "worker", "max_surge": "50%", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 2}}}}, {"name": "canary", "member": "kclexample.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "kclcanary", "member": "kclexample.kclworker", "type": "worker", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "runpublishcron", "type": "cron", "member": "kclexample.publisheventcronjob", "concurrency_policy": "Replace", "schedule": "0 */1 * * *"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "kcl"}, {"facet": "runpublishcron"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "kclcanary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "kcl"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "kcl"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "kcl"}, {"facet": "kclcanary"}, {"facet": "runpublishcron"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "kclexample"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}}}}, "version": "b75c7b9b074bbf8aabab5e292520a4d8875f8711", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "kiam": {"name": "kiam", "description": "Private builds of kiam + tools for Lyft", "repository": "git@github.com:lyft/kiam-private.git", "slack": "#compute-bots", "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "credentials": false, "docs": {"section": "Infrastructure"}, "facets": [{"name": "main", "type": "direct", "direct": {"paths": ["kiam"]}}], "deploy": [{"name": "staging-sidecar-test1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": ["infra-dev"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sidecar-test1", "boba"]}}}, [{"name": "staging-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}], [{"name": "staging-sonata", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}}}, {"name": "staging-allegro", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["allegro"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["allegro"]}}}, {"name": "staging-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "staging-flink", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flink"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["flink"]}}}, {"name": "staging-trustnetwork", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["trustnetwork"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["trustnetwork"]}}}, {"name": "staging-stateful", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}}}, {"name": "staging-envoyminimesh", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["envoyminimesh"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["envoyminimesh"]}}}, {"name": "staging-flytestaging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "flyte"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}}], [{"name": "staging-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}}, {"name": "staging-us-east-1b", "legacy": false, "kubernetes": {"enabled": true}}, {"name": "staging-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}}, {"name": "staging-us-east-1e", "legacy": false, "kubernetes": {"enabled": true}}, {"name": "staging-us-east-1f", "legacy": false, "kubernetes": {"enabled": true}}], [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "staging"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], [{"name": "production-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}], [{"name": "production-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-sonata", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}}}, {"name": "production-flytecritical2", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "flytecritical"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}}, {"name": "production-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "flyte"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}}, {"name": "production-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-devkube", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}}}, {"name": "production-devkubestaging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkubestaging"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}}}, {"name": "production-stateful", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}}}], [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}}, {"name": "production-us-east-1b", "legacy": false, "availability_zone": "us-east-1b", "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true}}, {"name": "production-us-east-1e", "legacy": false, "availability_zone": "us-east-1e", "kubernetes": {"enabled": true}}, {"name": "production-us-east-1f", "legacy": false, "availability_zone": "us-east-1f", "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], "languages": ["go"], "image_type": "service", "service_tier": 3, "version": "111b23a19b7c029f51ba9dc8525d7a2583f80bdc", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "kibana": {"name": "kibana", "description": "development version of kibana", "repository": "git@github.com:lyft/containers.git:kibana", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "team_email": "observability-team@lyft.com", "pagerduty_escalation_policy": "Observability", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build", "params": {"buildargs": ["VERSION=5.6.16", "MAJOR_RELASE=5"]}}, {"name": "docker_build", "params": {"buildargs": ["VERSION=6.2.4", "MAJOR_RELASE=6"], "sub_image": "kibana6"}}]}}, "containers": [{"name": "server", "command": "/code/containers/kibana/entrypoint.sh", "exports": [{"name": "web", "port": 9211}]}, {"name": "server6", "sub_image": "kibana6", "command": "/code/containers/kibana/entrypoint.sh", "exports": [{"name": "web", "port": 9211}]}], "groups": [{"name": "dev", "members": ["kibanaingest.dev", "elasticsearch5.server", "kibana.server"]}, {"name": "dev6", "members": ["elasticsearch6.server", "kibana.server6"]}], "tests": [{"name": "start", "type": "startup", "group": "kibana.dev"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": true}, {"name": "production", "legacy": false}], "languages": ["bash"], "image_type": "service", "service_tier": 3, "version": "1c306b5b4e52a9b708b1d6c0b5c58e308eec3d08", "images": [{"parent": {"name": "bionicbase", "version": "aad506292ed1cfbf5b995164b8654b7edabbdf83", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "bionicbase", "version": "aad506292ed1cfbf5b995164b8654b7edabbdf83", "sub_image": null, "external": false}, "sub_image": "kibana6"}], "parent": {"name": "bionicbase", "version": "aad506292ed1cfbf5b995164b8654b7edabbdf83", "sub_image": null, "external": false}}, "kibanaingest": {"name": "kibanaingest", "description": "I eat logs for a living", "repository": "git@github.com:lyft/kibanaingest.git", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 80}]}, {"name": "mappings", "command": "service_venv make generate_mappings"}, {"name": "routes", "command": "service_venv make generate_routes"}, {"name": "ingestworker", "command": "/srv/service/current/k8s-entrypoint.sh python -m kibanaingest.sqs_worker --queue main --handler lambda_function", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "dumpworker", "command": "/srv/service/current/k8s-entrypoint.sh python -m kibanaingest.sqs_worker --queue dump --handler dump_ingest", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "maintcleanup", "command": "/srv/service/current/k8s-entrypoint.sh python -m cron.cleanup_elasticlogs -d -v"}, {"name": "dummycron", "command": "/srv/service/current/k8s-entrypoint.sh python -m cron.dummycron"}], "facets": [{"name": "ingest", "member": "kibanaingest.ingestworker", "type": "worker", "profiling": {"enabled": false}, "autoscaling": {"criteria": {"cpu_target": 30}, "environment": {"staging": {"min_size": 40, "max_size": 400}, "production": {"min_size": 80, "max_size": 800}}}}, {"name": "dump", "member": "kibanaingest.dumpworker", "type": "worker", "profiling": {"enabled": false}, "autoscaling": {"criteria": {"cpu_target": 30}, "min_size": 1, "max_size": 200}}, {"name": "canaryingest", "member": "kibanaingest.ingestworker", "type": "worker", "profiling": {"enabled": false}, "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}, {"name": "canarydump", "member": "kibanaingest.dumpworker", "type": "worker", "profiling": {"enabled": false}, "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}, {"name": "maint", "type": "cron", "schedule": "@every 15m", "member": "kibanaingest.maint-group"}, {"name": "dummycron", "type": "cron", "schedule": "*/2 * * * *", "member": "kibanaingest.dummycron"}], "groups": [{"name": "dev", "members": ["control.dev", "elasticsearch5.server", "elasticsearch6.server", "redis.server", "kibanaingest.legacy"]}, {"name": "maint-group", "members": ["kibanaingest.maintcleanup"]}], "tests": [{"name": "test_unit", "type": "jailed", "command": "make test_unit"}, {"name": "test_integration", "type": "execution", "group": "kibanaingest.dev", "container": "kibanaingest.legacy", "command": "make test_integration"}, {"name": "test_routes", "type": "jailed", "command": "make test_routes"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "team_email": "obs-analysis@lyft.com", "pagerduty_escalation_policy": "Observability-Analysis", "deploy": [[{"name": "staging", "legacy": true, "automatic": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "dump"}, {"facet": "ingest"}, {"facet": "maint"}]}, {"name": "staging-dummycron", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["obs-dev"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["obs-dev"]}}, "targets": [{"facet": "dummycron"}]}], {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canarydump"}, {"facet": "canaryingest"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "dump"}, {"facet": "ingest"}]}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "dump"}, {"facet": "ingest"}]}, {"legacy": true, "name": "production", "kubernetes": {"enabled": true}, "targets": [{"facet": "dump"}, {"facet": "ingest"}]}]], "languages": ["python"], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "kibanaingest"}, {"name": "kibanaingestworker"}, {"name": "kibanaingesthistorian"}, {"name": "kibanaingestbackfill"}, {"name": "kibanaingesttest"}], "common_settings": {"redis": {"kibanaingestmultiredis": {"port": 6380}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"kibanaingestworker": {"fields": {"cluster_name": "keyword", "cluster_host": "keyword", "condition_type": "keyword", "disk_usage": "integer", "dry_run": "boolean", "index_count": "integer", "index_name": "keyword", "index_series": "keyword", "mapping_dir": "keyword", "max_disk_usage": "integer", "max_index_count": "integer", "missing_mappings": "keyword", "threshold": "integer", "timeout_secs": "integer", "transport_error_info": {"status": "integer", "error": {"type": "keyword", "reason": "keyword"}}}}}, "version": "1a2a7a4609a0486975da7b986ad9da79e69ee549", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "kibanaproxy": {"name": "kibanaproxy", "description": "Proxy to kibana, like a pro", "repository": "git@github.com:lyft/kibanaproxy.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "elasticsearch.dev", "dynamodb.dev", "kibanaproxy.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "kibanaproxy.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "team_email": "observability-team@lyft.com", "pagerduty_escalation_policy": "Observability", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "staging", "legacy": true, "automatic": false, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "languages": ["javascript", "python"], "image_type": "service", "service_tier": 2, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "version": "22c06adc4540310e4abf9542502111ecacbad31c", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "kinesis": {"name": "kinesis", "description": "local development version of kinesis", "repository": "git@github.com:lyft/containers.git:kinesis", "containers": [{"name": "server", "command": "/code/containers/kinesis/entrypoint.sh", "provision": "/code/containers/kinesis/provision.sh", "start_phase": "parallel_storage", "exports": [{"name": "kinesis", "port": 80}]}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server"]}], "tests": [{"name": "start", "type": "startup", "group": "kinesis.dev"}], "upstream_tests": {"on_commit": false, "test_set": {"ridelocations": ["integration"], "streamingplatform": ["integration"], "analyticsmetrics": ["unit"], "driverearnings": ["integration"], "fanner": ["unit"], "appboy": ["integration"], "analyticsingest": ["integration"], "ridemonitor": ["integration"], "locations": ["integration"], "streamcheck": ["integration"], "streamingest": ["unit"], "adtech": ["unit"]}}, "deploy": [{"name": "development", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false}], "languages": ["python", "bash"], "image_type": "tool", "version": "feb7c55211f9e30f6ac3ed20c868dc009593ff1b", "images": [{"parent": {"name": "nodejs", "version": "6b9af66ba23b6f1ae0c90f174a3fbd10bc28df28", "external": false}, "sub_image": null}], "parent": {"name": "nodejs", "version": "6b9af66ba23b6f1ae0c90f174a3fbd10bc28df28", "external": false}}, "kinesismonitor": {"name": "kinesismonitor", "description": "Write metrics about the state of our shards", "repository": "git@github.com:lyft/kinesismonitor.git", "image_type": "tool", "credentials": false, "slack": "#streaming-pubsub", "team_email": "streaming-pubsub@lyft.com", "pagerduty_escalation_policy": "Streaming-PubSub", "languages": ["java"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ijava:1614d45ed717846b2d159fad53e142a84d2f2139"}}]}}, "containers": [{"name": "service", "command": "dumb-init -- java -Dorg.slf4j.simpleLogger.defaultLogLevel=info -cp target/kinesismonitor.jar:target/lib/* com.lyft.kinesis.Main", "workdir": "/code/kinesismonitor", "limits": {"cpu": 1, "memory": "256Mi"}}], "facets": [{"name": "main", "member": "kinesismonitor.service", "type": "service", "sidecars": ["statsd"], "autoscaling": {"environment": {"production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "production", "automatic": true, "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "clusterLabels": {"cluster.lyft.net/cluster_name": "infra"}}}], "version": "e1ea64093b4e8d173633f74b008c11112cc12862", "images": [{"parent": {"name": "s2ijava", "version": "1614d45ed717846b2d159fad53e142a84d2f2139", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ijava", "version": "1614d45ed717846b2d159fad53e142a84d2f2139", "sub_image": null, "external": false}}, "kinesisperf": {"name": "kinesisperf", "description": "An Flink application used to performance test the Kineis connector", "repository": "git@github.com:lyft/streamperfbench.git:kinesisperf", "slack": "#streaming-compute", "team_email": "streaming-compute@lyft.com", "pagerduty_escalation_policy": "devnull", "languages": ["bash", "java"], "image_type": "service", "service_tier": 3, "streamingplatform": {"kubernetes": true, "applications": [{"namespace": "flink", "name": "kinesisperf"}], "stages": {"staging": {"configuration": "staging.jsonnet"}, "production": {"configuration": "production.jsonnet"}}}, "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}], "builder": {"name": "s2i", "params": {"builder": "lyft/s2istreamingplatformflink:afea8dd572537bd1182a3d82965b7a6bbf2a9718"}}, "containers": [{"name": "service", "command": "/docker-entrypoint.sh local"}], "version": "06a52e505b38b04bb1f1ef1dc8f83368a1c39604", "images": [{"parent": {"name": "s2istreamingplatformflink", "version": "afea8dd572537bd1182a3d82965b7a6bbf2a9718", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2istreamingplatformflink", "version": "afea8dd572537bd1182a3d82965b7a6bbf2a9718", "sub_image": null, "external": false}}, "kinesistokafka": {"name": "kinesistokafka", "description": "Stream duplicator", "repository": "git@github.com:lyft/streamperfbench.git:kinesistokafka", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kinesistokafka.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "kinesistokafka.dev"}], "slack": "#streaming-compute", "team_email": "streaming-compute@lyft.com", "pagerduty_escalation_policy": "devnull", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "languages": ["java", "bash"], "image_type": "service", "streamingplatform": {"version": "1.2-SNAPSHOT", "flink_config_overrides": [{"key": "state.backend", "value": "filesystem"}, {"key": "taskmanager.memory.segment-size", "value": 16384}], "jobmanagers": [{"name": "kinesistokafka", "jobs": [{"name": "kinesistokafka", "jar": "kinesistokafka-1.0-SNAPSHOT.jar", "class": "com.lyft.kinesistokafka.KinesisToKafkaClient", "description": "too legit", "development": {"parallelism": 2}, "staging": {"parallelism": 128}, "production": {"parallelism": 128}}]}]}, "service_tier": 3, "version": "d4ec610bf2cb11eb673c0da1c609cdf43ad88e50", "images": [{"parent": {"name": "opsbase", "version": "afc2045437a93c9ffebe8147565efe674b01c054", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "afc2045437a93c9ffebe8147565efe674b01c054", "sub_image": null, "external": false}}, "kitchensink": {"name": "kitchensink", "description": "Testing & demonstration service of development common patterns and best practices", "pagerduty_escalation_policy": "Core Libraries", "team_email": "core-libraries@lists.lyft.com", "repository": "git@github.com:lyft/kitchensink.git", "image_type": "service", "credentials": true, "credentials_legacy": true, "languages": ["go"], "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh"}, {"name": "main", "command": "dumb-init -- kitchensink"}], "groups": [{"name": "dev", "members": ["control.dev", "kitchensink.service"]}, {"name": "integration", "members": ["control.dev", "kitchensink.service", "mongodb.server"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:ec183e81e842ba0e16b96ce4041b39a667bfcfd8", "sub_image": "k8s", "buildargs": ["GOLANGCI_LINT_VERSION=1.16.0"]}}]}}, "tests": [{"name": "startup", "type": "startup", "group": "kitchensink.dev"}, {"name": "unit", "type": "jailed", "command": "make tests"}, {"name": "integration", "type": "execution", "group": "kitchensink.integration", "container": "kitchensink.service", "command": "make integration"}, {"name": "lint", "type": "jailed", "command": "make lint"}], "deploy": [{"name": "staging", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "legacy": true, "automatic": true}, {"name": "staging-envoyminimesh", "automatic": true, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "envoyminimesh"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "envoyminimesh"}}, "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": true, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}, "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}, "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}, "legacy": true}]], "service_tier": 3, "facets": [{"name": "main", "member": "kitchensink.main", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "canary", "member": "kitchensink.main", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "envoy": {"profile": "go", "settings": {"services": [{"name": "kitchensink"}], "common_settings": {"internal_hosts": {"pyexample2": null, "pyexample2workers": null}, "mongos": {"kitchensink": null}}}}, "version": "562cae8efc39918b6bef452a29d9fea17b79a37b", "images": [{"parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "ec183e81e842ba0e16b96ce4041b39a667bfcfd8", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}}, "kubeimagewarmer": {"name": "kubeimagewarmer", "description": "kubeimagewarmer", "image_type": "service", "repository": "git@github.com:lyft/kubeimagewarmer.git", "slack": "#devx-bots", "service_tier": 2, "team_email": "devx-team@lyft.com", "pagerduty_escalation_policy": "DevX", "languages": ["go"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igo:fa0c4921e2e8481015324ac1a2b841013a1a2fdf"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "service", "command": "kubeimagewarmer"}], "groups": [{"name": "dev", "members": ["kubeimagewarmer.service"]}], "tests": [{"name": "lint", "type": "jailed", "command": "pre-commit run --all-files --show-diff-on-failure", "sub_image": "precommit"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "coverage", "type": "jailed", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}], "deploy": [[{"name": "staging", "legacy": false, "orca": []}, {"name": "production-devkubestaging", "kubernetes": {"enabled": true, "path": "dkstaging", "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}, "clusterLabels": {"cluster.lyft.net/role": ["devkubestaging"]}}, "legacy": false}], {"name": "production", "orca": [], "kubernetes": {"enabled": true, "path": "devkube", "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}, "clusterLabels": {"cluster.lyft.net/role": ["devkube"]}}, "legacy": false}], "version": "cd8377ca06716e1d389105a1edb4b218c87e8955", "images": [{"parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}}, "kubernetes": {"name": "kubernetes", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build", "params": {"dockerfile": "Dockerfile.k114"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile", "sub_image": "k116"}}]}}, "description": "kubernetes its the best", "repository": "git@github.com:lyft/kubernetes-private.git", "image_type": "service", "team_email": "compute-team@lyft.com", "slack": "#compute-bots", "pagerduty_escalation_policy": "Provisioning", "service_tier": 3, "deploy": [{"name": "production", "orca": [{"region": "iad"}], "legacy": true, "automatic": true}], "version": "7a9181af429facd57fb3bc6611af8b96ada0018e", "images": [{"parent": {"name": "fedora", "version": "30", "sub_image": null, "external": true}, "sub_image": null}, {"parent": {"name": "fedora", "version": "30", "sub_image": null, "external": true}, "sub_image": "k116"}], "parent": {"name": "fedora", "version": "30", "sub_image": null, "external": true}}, "kuberneteswarden": {"name": "kuberneteswarden", "description": "kuberneteswarden", "image_type": "service", "repository": "git@github.com:lyft/kuberneteswarden.git", "slack": "#devx-bots", "service_tier": 2, "team_email": "devx-team@lyft.com", "pagerduty_escalation_policy": "DevX", "credentials": true, "slack_deploy_notification_environments": ["canary", "production"], "languages": ["go"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igocli:9da8e35dbaa78ac513f8934273bde2863ebe0c7c"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "service", "command": "kuberneteswarden"}, {"name": "expiringcontextsweeperjob", "command": "dumb-init -- sweeper expiringcontextsweeper"}, {"name": "lastusageupdaterjob", "command": "dumb-init -- sweeper lastusageupdatersweeper"}, {"name": "quickkubegenerator", "command": "dumb-init -- sweeper quickkubegenerator"}, {"name": "e2etestgenerator", "command": "dumb-init -- sweeper e2etestgenerator"}], "groups": [{"name": "dev", "members": ["kuberneteswarden.service"]}], "facets": [{"name": "main", "member": "kuberneteswarden.service", "envoy_service": "kuberneteswarden", "type": "service", "sidecars": ["envoy", "statsd", "heka", "fluentbit"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 5}}}}, {"name": "canary", "member": "kuberneteswarden.service", "envoy_service": "kuberneteswarden", "type": "service", "canary": true, "sidecars": ["envoy", "statsd", "heka", "fluentbit"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "expiringcontextsweeperjob", "member": "kuberneteswarden.expiringcontextsweeperjob", "type": "cron", "schedule": "0 */2 * * *"}, {"name": "lastusageupdaterjob", "member": "kuberneteswarden.lastusageupdaterjob", "type": "cron", "schedule": "*/30 * * * *"}, {"name": "quickkubegenerator", "member": "kuberneteswarden.quickkubegenerator", "type": "cron", "schedule": "*/15 * * * *"}, {"name": "e2etestgenerator", "member": "kuberneteswarden.e2etestgenerator", "type": "cron", "schedule": "*/30 * * * *"}], "tests": [{"name": "lint", "type": "jailed", "command": "pre-commit run --all-files --show-diff-on-failure", "sub_image": "precommit"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "coverage", "type": "jailed", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}], "deploy": [[{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "mode": "synth"}, "targets": [{"facet": "main"}, {"facet": "expiringcontextsweeperjob"}, {"facet": "lastusageupdaterjob"}, {"facet": "quickkubegenerator"}, {"facet": "e2etestgenerator"}], "automatic": true}, {"name": "production-devkubestaging-yaml", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "mode": "direct", "cluster_labels": {"cluster.lyft.net/role": ["devkubestaging"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}}, "automatic": true}], {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "mode": "synth"}, "targets": [{"facet": "canary"}]}, [{"name": "production-devkube-yaml", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "mode": "direct", "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}}}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "mode": "synth"}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "expiringcontextsweeperjob"}, {"facet": "lastusageupdaterjob"}, {"facet": "quickkubegenerator"}, {"facet": "e2etestgenerator"}], "links": [{"text": "kuberneteswarden runbook", "url": "https://docs.lyft.net/eng/kuberneteswarden/runbook.html"}]}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "kuberneteswarden"}]}}, "logging": {"kuberneteswarden": {"fields": {"namespace": "keyword", "slackusername": "keyword", "username": "keyword"}}}, "version": "49144f9907e8cb46af0b6741427ac96f562f152a", "images": [{"parent": {"name": "s2igocli", "version": "9da8e35dbaa78ac513f8934273bde2863ebe0c7c", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2igocli", "version": "9da8e35dbaa78ac513f8934273bde2863ebe0c7c", "sub_image": null, "external": false}}, "kubestatemetrics": {"name": "kubestatemetrics", "description": "Private builds of ksm", "repository": "git@github.com:lyft/kube-state-metrics-private.git", "slack": "#compute-bots", "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "credentials": false, "docs": {"section": "Infrastructure"}, "deploy": [{"name": "staging-dross", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "development"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infratesting"}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "staging-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "staging-dev-sla", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "development"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "staging-infra-dev-sla", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "infra-dev"}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["boba", "boba2", "sidecar-test1", "testing", "obs-dev", "sonata"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "staging-provtest", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["provtest"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["provtest"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "staging-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "staging-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}, "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}, "interpolation_vars": {"kiam_env": "staging", "kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "staging-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "staging-stateful", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "staging-flink", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flink"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["flink"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "staging-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flyte"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "8Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "8Gi"}}}, {"name": "staging-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}], [{"name": "production-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "production-titan", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["spark"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["titan"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "production-sonata", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "production-ciinfra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["ciinfra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "production-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "production-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flyte"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 4, "kubestatemetrics_mem_limit": "8000Mi", "kubestatemetrics_cpu_req": 4, "kubestatemetrics_mem_req": "8000Mi"}}}, {"name": "production-critical-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flytecritical"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "8000Mi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "8000Mi"}}}, {"name": "production-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "production-stateful", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "production-devkube", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "production-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}, "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "production-lyftlearn-av", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn-av"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml-av"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}, {"name": "production-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "interpolation_vars": {"kubestatemetrics_cpu_limit": 1, "kubestatemetrics_mem_limit": "3Gi", "kubestatemetrics_cpu_req": 1, "kubestatemetrics_mem_req": "3Gi"}}}], "languages": ["go"], "image_type": "service", "service_tier": 3, "version": "f2a257c525023c36d967d7857f23dbf1f951e52d", "images": [{"parent": {"name": "bionicbase", "version": "3fbc2558f2845db9b1cd7e06276b062ca3ae63b1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "3fbc2558f2845db9b1cd7e06276b062ca3ae63b1", "sub_image": null, "external": false}}, "laser": {"name": "laser", "description": "Lyft Application Security Reporter", "repository": "git@github.com:lyft/laser.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "packages": ["libcurl4-openssl-dev"], "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "docker_build"}]}}, "facets": [{"name": "main", "member": "laser.service", "type": "service", "autoscaling": {"min_size": 5, "max_size": 5}}, {"name": "canary", "member": "laser.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "workers", "member": "laser.worker", "type": "worker", "autoscaling": {"min_size": 5, "max_size": 5}}, {"name": "updateservicescron", "member": "laser.updateservices", "type": "cron", "schedule": "30 15 * * *"}, {"name": "staticanalysisworkercron", "member": "laser.staticanalysisworker", "type": "cron", "schedule": "*/10 * * * *"}, {"name": "staticanalysisjobcron", "member": "laser.staticanalysisjob", "type": "cron", "schedule": "0 21 * * 1,3,5"}, {"name": "libcheckworkercron", "member": "laser.libcheckworker", "type": "cron", "schedule": "*/10 * * * *"}, {"name": "libcheckjobcron", "member": "laser.libcheckjob", "type": "cron", "schedule": "0 16 * * 1,3,5"}, {"name": "sourceclearworkercron", "member": "laser.sourceclearworker", "type": "cron", "schedule": "*/10 * * * *"}, {"name": "sourceclearjobcron", "member": "laser.sourceclearjob", "type": "cron", "schedule": "0 16 2 * *"}, {"name": "instancelaunchtimescron", "member": "laser.instancelaunchtimes", "type": "cron", "schedule": "30 * * * *"}, {"name": "instancehealthjobscron", "member": "laser.instancehealthjobs", "type": "cron", "schedule": "*/10 * * * *"}, {"name": "instancehealthworkercron", "member": "laser.instancehealthworker", "type": "cron", "schedule": "*/5 * * * *"}, {"name": "pullasgdatacron", "member": "laser.pullasgdata", "type": "cron", "schedule": "0 */6 * * *"}, {"name": "pullinstancedatacron", "member": "laser.pullinstancedata", "type": "cron", "schedule": "0 */6 * * *"}, {"name": "generateasglistcron", "member": "laser.generateasglist", "type": "cron", "schedule": "30 * * * *"}, {"name": "generateasgreportcron", "member": "laser.generateasgreport", "type": "cron", "schedule": "15,45 * * * *"}, {"name": "scanpublicreposcron", "member": "laser.scanpublicrepos", "type": "cron", "schedule": "0 12 * * WED"}, {"name": "emaillibcheckreportcron", "member": "laser.emaillibcheckreport", "type": "cron", "schedule": "0 18 * * 3"}, {"name": "generatevulnslacron", "member": "laser.generatevulnsla", "type": "cron", "schedule": "0 16 * * *"}], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn laser.wsgi:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "worker", "command": "service_venv celery -A laser.app.celery worker --loglevel=info --uid=laser-data --max-tasks-per-child 100", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "updateservices", "command": "/usr/local/bin/manage update-service-yaml -p", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "staticanalysisworker", "command": "/usr/local/bin/manage worker-sa -d 3 -x 10", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "staticanalysisjob", "command": "/usr/local/bin/manage init-sa-jobs --rand", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "libcheckworker", "command": "/usr/local/bin/manage worker-libcheck -d 3 -x 1 -k", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "libcheckjob", "command": "/usr/local/bin/manage init-libcheck-jobs --rand", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "sourceclearworker", "command": "/usr/local/bin/manage worker-srcclr -d 20 -x 1", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "sourceclearjob", "command": "/usr/local/bin/manage init-srcclr-jobs --rand", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "instancelaunchtimes", "command": "/usr/local/bin/manage job-instance-launch-times", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "instancehealthjobs", "command": "/usr/local/bin/manage init-instance-health-jobs", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "instancehealthworker", "command": "/usr/local/bin/manage worker-instance-health -x 50", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "pullasgdata", "command": "/usr/local/bin/manage pull-asg-data", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "pullinstancedata", "command": "/usr/local/bin/manage pull-instance-data", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "generateasglist", "command": "/usr/local/bin/manage generate-asg-list", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "generateasgreport", "command": "/usr/local/bin/manage generate-asg-report", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "scanpublicrepos", "command": "/usr/local/bin/manage scan-public-repos", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "emaillibcheckreport", "command": "/usr/local/bin/manage kpi 2>&1 | mail -s \"Library check report\" security-bots@lyft.com", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "generatevulnsla", "command": "/usr/local/bin/manage generate-vuln-sla", "workdir": "/code/laser", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "laser.legacy", "team.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "laser.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt", "cobertura": "build/coverage.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure", "reports": {"cobertura": "build/cobertura.xml"}}], "envoy": {"profile": "python", "settings": {"services": [{"name": "laser"}, {"name": "laserbatch"}, {"name": "laserworker"}], "common_settings": {"internal_hosts": {"team": null, "aardvark": null}}, "override_settings": [{"services": [{"name": "laserbatch"}], "settings": {"external_hosts": {"s3_iad": null}}}]}}, "slack": "#security", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "team_email": "security-engineering@lyft.com", "pagerduty_escalation_policy": "Security", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "languages": ["bash", "javascript", "python"], "image_type": "service", "service_tier": 3, "logging": {"laser": {"fields": {"service_name": "keyword", "number_of_commits": "long", "branch": "keyword", "clone_url": "keyword", "comment_url": "keyword", "user": "keyword", "regex": "boolean", "dry_run_pr": "boolean", "html_url": "keyword", "base_sha": "keyword", "sha": "keyword", "pr_number": "long", "pr_created_at": "date", "Repo": "keyword"}}}, "version": "a4dd4d02bf7ac90485862b48e657f1044a66a670", "images": [{"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "lastmile": {"name": "lastmile", "description": "Service for managing bikes and scooters", "repository": "git@github.com:lyft/lastmile.git", "image_type": "service", "service_tier": 1, "slack": "#lbs-deploy", "team_email": "lbs-eng@lyft.com", "pagerduty_escalation_policy": "Lastmile", "deploy_settings": {"window_start": "08:30 America/New_York", "window_end": "16:00 America/Los_Angeles"}, "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app_wsgi:app --timeout 30 --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/lastmile", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}}, {"name": "exportgbfsfeeds", "command": "dumb-init -- service_venv python run_cron.py python manage.py export_gbfs_feeds --language_free_paths", "workdir": "/code/lastmile", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "1Gi"}}, {"name": "fixupaircontrolcache", "command": "dumb-init -- service_venv python run_cron.py python manage.py fixup_air_control_cache --timed_out_cutoff_seconds=86400", "workdir": "/code/lastmile", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "fixupfieldworkcache", "command": "dumb-init -- service_venv python run_cron.py python manage.py fixup_fieldwork_cache --timed_out_cutoff_seconds=86400", "workdir": "/code/lastmile", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "ladot311sync", "command": "dumb-init -- service_venv python run_cron.py python manage.py ladot_311_sync", "workdir": "/code/lastmile", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "mockrideableslocationupdate", "command": "dumb-init -- service_venv python run_cron.py python manage.py mock_rideables_locations_update --num_runs=2", "workdir": "/code/lastmile", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "mspdatadashboard", "command": "dumb-init -- service_venv python run_cron.py python manage.py msp_data_dashboard", "workdir": "/code/lastmile", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "rebuildpriorityscorecache", "command": "dumb-init -- service_venv python run_cron.py python manage.py rebuild_fleet_priority_score_threshold_cache", "workdir": "/code/lastmile", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "timeoutrideables", "command": "dumb-init -- service_venv python run_cron.py python manage.py timeout_rideables", "workdir": "/code/lastmile", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "timeoutrideablesdelta", "command": "dumb-init -- service_venv python run_cron.py python manage.py timeout_rideables --delta", "workdir": "/code/lastmile", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "updategbfsfeed", "command": "dumb-init -- service_venv python -m lastmile.workers.gbfs", "workdir": "/code/lastmile", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "updaterideableavailabilitygbfsfeed0", "command": "dumb-init -- service_venv python -m lastmile.workers.rideable_availability_gbfs --shard=0", "workdir": "/code/lastmile", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "updaterideableavailabilitygbfsfeed1", "command": "dumb-init -- service_venv python -m lastmile.workers.rideable_availability_gbfs --shard=1", "workdir": "/code/lastmile", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "updaterideableavailabilitygbfsfeed2", "command": "dumb-init -- service_venv python -m lastmile.workers.rideable_availability_gbfs --shard=2", "workdir": "/code/lastmile", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "updaterideableavailabilitygbfsfeed3", "command": "dumb-init -- service_venv python -m lastmile.workers.rideable_availability_gbfs --shard=3", "workdir": "/code/lastmile", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "updaterideables", "command": "dumb-init -- service_venv python run_cron.py python manage.py update_rideables --persist", "workdir": "/code/lastmile", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "updatestationtransitions", "command": "dumb-init -- service_venv python -m lastmile.workers.station_transitions", "workdir": "/code/lastmile", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}], "facets": [{"name": "main", "member": "lastmile.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 3, "max_size": 40}}}}, {"name": "canary", "member": "lastmile.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}, {"name": "exportgbfsfeedscron", "member": "lastmile.exportgbfsfeeds", "type": "cron", "concurrency_policy": "forbid", "schedule": "*/5 * * * *"}, {"name": "fixupaircontrolcachecron", "member": "lastmile.fixupaircontrolcache", "type": "cron", "concurrency_policy": "forbid", "schedule": "*/30 * * * *"}, {"name": "fixupfieldworkcachecron", "member": "lastmile.fixupfieldworkcache", "type": "cron", "concurrency_policy": "forbid", "schedule": "*/30 * * * *"}, {"name": "ladot311synccron", "member": "lastmile.ladot311sync", "type": "cron", "concurrency_policy": "forbid", "schedule": "*/5 * * * *"}, {"name": "mspdatadashboardcron", "member": "lastmile.mspdatadashboard", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 11 * * *"}, {"name": "timeoutrideablesdeltacron", "member": "lastmile.timeoutrideablesdelta", "type": "cron", "concurrency_policy": "forbid", "schedule": "*/10 * * * *"}, {"name": "timeoutrideablescron", "member": "lastmile.timeoutrideables", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 * * * *"}, {"name": "updaterideablescron", "member": "lastmile.updaterideables", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 * * * *"}, {"name": "rebuildpriorityscorecachecron", "member": "lastmile.rebuildpriorityscorecache", "type": "cron", "concurrency_policy": "forbid", "schedule": "*/30 * * * *"}, {"name": "mockrideableslocationupdatecron", "member": "lastmile.mockrideableslocationupdate", "type": "cron", "concurrency_policy": "allow", "schedule": "* * * * *"}, {"name": "updategbfsfeedbatch", "member": "lastmile.updategbfsfeed", "type": "batch"}, {"name": "updaterideableavailabilitygbfsfeed0batch", "member": "lastmile.updaterideableavailabilitygbfsfeed0", "type": "batch"}, {"name": "updaterideableavailabilitygbfsfeed1batch", "member": "lastmile.updaterideableavailabilitygbfsfeed1", "type": "batch"}, {"name": "updaterideableavailabilitygbfsfeed2batch", "member": "lastmile.updaterideableavailabilitygbfsfeed2", "type": "batch"}, {"name": "updaterideableavailabilitygbfsfeed3batch", "member": "lastmile.updaterideableavailabilitygbfsfeed3", "type": "batch"}, {"name": "updatestationtransitionsbatch", "member": "lastmile.updatestationtransitions", "type": "batch"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "redis.dev", "regions.dev", "lastmile.legacy"]}, {"name": "integration", "members": ["abacus.legacy", "account.dev", "accountfrontend.dev", "ats.dev", "green.dev", "guardian.dev", "jobscheduler.dev", "karma.dev", "ledger.legacy", "locations.dev", "payapi.legacy", "places.legacy", "rideableavailability.dev", "riderperks.integration", "stations.dev", "supportcontact.dev", "trips.dev", "usergroups.dev", "users.dev", "wallet.dev", "walletapi.dev", "rideablelogs.dev", "lastmile.dev"]}, {"name": "integration_tests", "skip_threshold": 1, "members": ["abacus.legacy", "green.dev", "jobscheduler.dev", "karma.dev", "ledger.legacy", "locations.legacy", "lyfttestlib.core", "kafka.server", "places.legacy", "rideableavailability.dev", "riderperks.integration", "stations.dev", "trips.dev", "usergroups.dev", "users.dev", "wallet.dev", "lastmile.dev"]}, {"name": "bss_integration", "members": ["bss.dev", "lastmile.integration"]}], "tests": [{"name": "startup", "type": "startup", "group": "lastmile.dev"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "sub_image": "k8s", "targets": ["tests/unit/lastmile"]}, {"name": "integration", "type": "execution", "group": "lastmile.integration_tests", "container": "lastmile.legacy", "command": "make test_integration", "virtualenv": "service_venv", "reports": {"junit": "build/int.xml", "cobertura": "build/coverage.xml"}}, {"name": "integration_sharded", "type": "sharded", "group": "lastmile.dev", "execution_group": "lastmile.integration_tests", "container": "lastmile.legacy", "target": "tests/integration", "virtualenv": "service_venv", "reports": {"junit": "build/int.xml"}, "shard_at": "file", "autotrigger": false}, {"name": "bss_integration", "type": "execution", "group": "lastmile.bss_integration", "container": "lastmile.legacy", "command": "make test_bss_integration", "autotrigger": false, "virtualenv": "service_venv", "reports": {"junit": "build/int.xml"}, "schedule": "0 8 * * *", "slack": {"room": "#lbs-deploy", "post_on_success": false}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "bake_time_minutes": 10, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}, {"facet": "fixupaircontrolcachecron"}, {"facet": "fixupfieldworkcachecron"}, {"facet": "timeoutrideablescron"}, {"facet": "timeoutrideablesdeltacron"}, {"facet": "updaterideablescron"}, {"facet": "rebuildpriorityscorecachecron"}, {"facet": "mockrideableslocationupdatecron"}, {"facet": "updategbfsfeedbatch"}, {"facet": "updaterideableavailabilitygbfsfeed0batch"}, {"facet": "updaterideableavailabilitygbfsfeed1batch"}, {"facet": "updaterideableavailabilitygbfsfeed2batch"}, {"facet": "updaterideableavailabilitygbfsfeed3batch"}], "links": [{"text": "Lastmile Deploy Policy", "url": "https://docs.lyft.net/eng/lastmile/merge_and_deploy_policy.html"}]}, {"name": "canary", "legacy": false, "bake_time_minutes": 10, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "bake_time_minutes": 10, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], {"name": "production", "legacy": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "exportgbfsfeedscron"}, {"facet": "fixupaircontrolcachecron"}, {"facet": "fixupfieldworkcachecron"}, {"facet": "ladot311synccron"}, {"facet": "mspdatadashboardcron"}, {"facet": "timeoutrideablescron"}, {"facet": "timeoutrideablesdeltacron"}, {"facet": "updaterideablescron"}, {"facet": "rebuildpriorityscorecachecron"}]}], "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "configsets": ["lbsdata"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:6d3577d26d1877130a866bd8c8237ac8faa131fe", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "lastmile"}, {"name": "lastmilebatch"}], "common_settings": {"internal_hosts": {"abacus": null, "account": null, "coupons": null, "green": null, "iotgateway": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "karma": null, "lastmile": null, "ledger": null, "legacyridetypes": null, "locations": null, "locationsingest": null, "locationsregionsearch": null, "messaging": null, "payapi": null, "places": null, "push": null, "ratelimit": null, "regions": null, "rideableavailability": null, "ridepasses": null, "riderperks": null, "routeplanner": null, "supportcontact": null, "stations": null, "switchboard": null, "tcs": null, "trips": null, "users": null, "usereligibilities": null, "usergroups": null, "userprivacyrights": null, "wallet": null, "walletapi": null, "etaproxy": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null, "upkeep": null}, "redis_clusters": {"lastmilerideable": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400, "read_policy": "ANY"}}}, "override_settings": [{"services": [{"name": "lastmile", "service_instance": "development"}], "settings": {"internal_hosts": {"bss": null}}}]}}, "logging": {"lastmile": {"fields": {"alarm_name": "keyword", "rideable_id": "keyword", "ride_id": "keyword", "user_id": "keyword", "lyft_id": "keyword", "trip_id": "keyword", "rideable_external_id": "keyword", "rideable_name": "keyword", "rideable_type": "keyword", "order_id": "keyword", "invoice_id": "keyword", "counterparty_id": "keyword", "refund_amount": "keyword", "reason": "keyword", "region_code": "keyword", "device_lock_status_list": {"rideable_lock_status": {"goal": "keyword", "goal_status": "keyword"}, "battery_lock_status": {"goal": "keyword", "goal_status": "keyword"}}, "denormalized_ride": {"ride_id": "keyword", "transition_current": "keyword", "transition_target": "keyword", "transition_time_ms": "date"}, "member_type": "keyword", "other_user_id": "keyword", "existing_rideable_ride_id": "keyword", "legacy_ride_id": "keyword", "new_rideable_ride_partner_ride_id": "keyword", "existing_rideable_ride_partner_ride_id": "keyword", "partner_app_type": "keyword", "qr_code_label": "keyword", "migration_name": "keyword"}, "unindexed_fields": ["action", "action_type", "active_lastmile_ride_id", "actual", "addition_costs", "adjusted_cost", "apm_migration_result", "argv", "auth_id", "auth_status", "base", "batch_size", "bss_display_number", "bss_rideable_id", "bss_rideable_uuid", "bucket", "candidate_rideable_id", "charge_account", "charge_account_id", "charge_id", "charge_status", "class", "client_limit", "composite_key", "condition", "consumer_id", "copy_source", "create_request", "currency", "current_app", "current_app_version", "current_os", "current_os_version", "current_size", "current_time", "current_user_age", "data", "datastore_name", "datastore_type", "date_string", "deadline_ms", "decal_name", "decode_to", "default", "delay_seconds", "distance_meters", "distance_miles", "duration_ms", "encoded_polyline", "encoded_timeline", "encoded_value", "end_reason", "end_time", "error", "error_code", "etag", "event", "exception", "existing_external_id", "existing_rideable_id", "existing_rideable_name", "expected_keys", "expiration_date", "external_number", "fields", "file_name", "filter", "firmware_url", "fleet_status", "has_community_pass", "has_user", "heartbeat", "hello_id", "history_entry", "idle_duration", "image", "include_charges", "invalid_rideable_name", "iot_firmware_hash", "is_authorized", "is_internal_request", "internal_user_email", "key", "keys", "last_action", "last_action.action_type", "last_boot_timestamp_ms", "last_evaluated_key", "lat", "lbs_ops_enabled", "ledger_order_id", "limit", "lng", "locale", "location", "lost_duration_hours", "lost_enabled", "max", "max_parsable_stations", "max_size", "mds_membership_type", "mds_vehicle_type", "member_status", "message", "message_id", "message_type", "migration_type", "minimum_rider_age", "missing_duration_hours", "missing_enabled", "model_field", "motivate_station_id", "motivate_system_id", "new_possession_status", "new_rideable_name", "next_link", "next_offset", "nfc_data", "nfc_id", "nfc_id_type", "nfc_tag", "nfc_type", "num_received", "num_stations", "num_updated", "odometer_idle", "offset", "old_firmware_result", "old_possession_status", "old_rideable_name", "ops_mode", "original_cost", "original_image", "original_image_url", "out_of_date_fields", "package_id", "partner_calculated_cost", "partner_ride_id", "partner_rideable_station_id", "path", "payer_id", "payload", "peripheral", "peripheral_mismatched_key", "peripheral_num_request_keys", "peripheral_serial_number", "perk_code", "perk_codes", "perk_id", "perk_ids", "persist", "phone_number", "possession_status", "possessor_lookup_keys", "protobuf", "protobuf_json", "quaternion_idle", "query_method", "query_plan", "qr_code_string", "qr_shortcode", "reasons", "regions_response", "reject_reason", "request", "request_data", "request_field", "request_id", "request_lat", "request_lng", "request_peripherals", "request_rideable_id", "requested_at", "response", "response_data", "result_count", "rfid", "ride_code", "ride_order_id", "ride_price", "ride_status", "ride_types", "rideable_command_request_raw", "rideabe_id", "rideable.rideable_id", "rideable.state", "rideable_by_external_id.rideable_id", "rideable_file_type", "rideable_lat", "rideable_lng", "rideable_name_identifier", "rideable_serial_number", "rideables", "serial_number", "session_id", "should_cancel", "should_charge", "show_inactive", "start_time", "start_time_ms", "state", "station_id", "status_code", "tcs_string_table_etag", "tcs_config_served_from_cache", "tcs_variable_name_index", "response_config_snapshot", "tenant_id", "threshold", "to", "total_amount", "total_bike_calories_burned", "total_bike_distance_traveled", "total_bike_ride_count", "total_bike_ride_duration_sec", "tracked_error_enum", "tracked_errors", "translatable", "triangle_id", "trip_ride_id", "unlock_method", "unlock_method_shadow", "unlock_request_uuid", "unlock_source", "unlock_source_shadow", "user_agent", "user_id_from_header", "user_lat", "user_lng", "utc_now_ms", "value", "version1", "version2", "worker_class", "worker_id", "worker_type"]}}, "version": "b1d6af9762a4c986b8055bebdcab78df4900000d", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6d3577d26d1877130a866bd8c8237ac8faa131fe", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "lastmileint": {"name": "lastmileint", "description": "Web frontend for maning shared bikes and scooters via TOM", "repository": "git@github.com:lyft/lastmileint.git", "image_type": "service", "service_tier": 2, "slack": "#lbs-otech-deploy", "team_email": "lbs-otech-eng@lyft.com", "pagerduty_escalation_policy": "LBS OTech", "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "groups": [{"name": "dev", "members": ["control.dev", "tom.dev", "lastmile.dev", "regions.legacy", "lbsint.dev", "lastmileint.legacy"]}, {"name": "integration", "members": ["lastmileint.dev", "lastmile.integration"]}], "tests": [{"name": "startup", "type": "startup", "group": "lastmileint.dev"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "lastmileint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"tom": null, "acl": null, "lastmile": null, "privacyaudit": null}}}}, "version": "ee624ce0917638052e74df83e19ce18eccc52e91", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "lbsdata": {"name": "lbsdata", "description": "Runtime LBS data.", "repository": "git@github.com:lyft/lbsdata.git", "image_type": "data", "service_tier": 1, "slack": "#lbs-deploy", "team_email": "lbs-eng@lyft.com", "pagerduty_escalation_policy": "Lastmile", "languages": ["bash", "python"], "builder": {"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/lbsdata"]}], "groups": [{"name": "test", "members": ["lastmile.dev"]}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "canary", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "5713269de111783af2123c0bec7d547616ad8803", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "lbsdecisionsupport": {"name": "lbsdecisionsupport", "description": "API and worker that support rideable distribution decision making", "repository": "git@github.com:lyft/lbsdecisionsupport.git", "slack": "#lbs-otech-deploy", "team_email": "lbs-otech-eng@lyft.com", "pagerduty_escalation_policy": "LBS OTech", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "packages": ["libkrb5-dev", "libpq-dev", "libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s", "packages": ["libkrb5-dev", "libpq-dev", "libgeos-dev", "libspatialindex-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 60, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn lbsdecisionsupport.flask_app:app --workers=3 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/lbsdecisionsupport", "limits": {"cpu": 2, "memory": "2048Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "cachegh7sperregion", "command": "service_venv python manage.py cache_gh7s_per_region", "workdir": "/code/lbsdecisionsupport", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "cachescootermodels", "command": "service_venv python manage.py cache_dockless_models --rideable_type electric_scooter", "workdir": "/code/lbsdecisionsupport", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1024Mi"}}, {"name": "cacheebikemodels", "command": "service_venv python manage.py cache_dockless_models --rideable_type electric_bike", "workdir": "/code/lbsdecisionsupport", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1024Mi"}}, {"name": "createscootermodelsanalytics", "command": "service_venv python manage.py create_dockless_models_analytics --rideable_type electric_scooter", "workdir": "/code/lbsdecisionsupport", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2048Mi"}}, {"name": "createebikemodelsanalytics", "command": "service_venv python manage.py create_dockless_models_analytics --rideable_type electric_bike", "workdir": "/code/lbsdecisionsupport", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2048Mi"}}, {"name": "cachecostcurves", "command": "service_venv python manage.py cache_cost_curves", "workdir": "/code/lbsdecisionsupport", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1024Mi"}}, {"name": "calculatepriorityscores", "command": "service_venv python manage.py calculate_priority_scores", "workdir": "/code/lbsdecisionsupport", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1024Mi"}}, {"name": "createdockedbikemodelsanalytics", "command": "service_venv python manage.py create_docked_bike_models_analytic_events", "workdir": "/code/lbsdecisionsupport", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1024Mi"}}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "notification_overrides": {"pr_open": {"slack": "#lbs-otech-deploy"}}, "groups": [{"name": "dev", "members": ["control.dev", "lbsdecisionsupport.legacy", "redis.dev", "regions.dev", "lastmile.dev", "locations.dev", "marketweather.dev"]}, {"name": "integration", "members": ["fanner.dev", "jobscheduler.dev", "lastmile.dev", "lbsdecisionsupport.dev"]}, {"name": "service_group", "members": ["lbsdecisionsupport.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "lbsdecisionsupport.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "sharded", "group": "lbsdecisionsupport.dev", "container": "lbsdecisionsupport.legacy", "target": "tests/integration/", "virtualenv": "service_venv", "run_in_pr": true, "run_in_dev": true, "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "lbsdecisionsupport.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "lbsdecisionsupport.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}, {"name": "cachegh7sperregion", "member": "lbsdecisionsupport.cachegh7sperregion", "type": "cron", "schedule": "0 15 * * *"}, {"name": "cachescootermodels", "member": "lbsdecisionsupport.cachescootermodels", "type": "cron", "schedule": "0,30 * * * *"}, {"name": "createscootermodelsanalytics", "member": "lbsdecisionsupport.createscootermodelsanalytics", "type": "cron", "schedule": "10,40 * * * *"}, {"name": "createebikemodelsanalytics", "member": "lbsdecisionsupport.createebikemodelsanalytics", "type": "cron", "schedule": "10,40 * * * *"}, {"name": "cachecostcurves", "member": "lbsdecisionsupport.cachecostcurves", "type": "cron", "schedule": "0,30 * * * *"}, {"name": "calculatepriorityscores", "member": "lbsdecisionsupport.calculatepriorityscores", "type": "cron", "schedule": "0/3 * * * *"}, {"name": "createdockedbikemodelsanalytics", "member": "lbsdecisionsupport.createdockedbikemodelsanalytics", "type": "cron", "schedule": "0/10 * * * *"}, {"name": "cacheebikemodels", "member": "lbsdecisionsupport.cacheebikemodels", "type": "cron", "schedule": "0,30 * * * *"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "cachegh7sperregion"}, {"facet": "cachescootermodels"}, {"facet": "cacheebikemodels"}, {"facet": "createscootermodelsanalytics"}, {"facet": "createebikemodelsanalytics"}, {"facet": "cachecostcurves"}, {"facet": "calculatepriorityscores"}, {"facet": "createdockedbikemodelsanalytics"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "cachegh7sperregion"}, {"facet": "cachescootermodels"}, {"facet": "cacheebikemodels"}, {"facet": "createscootermodelsanalytics"}, {"facet": "createebikemodelsanalytics"}, {"facet": "cachecostcurves"}, {"facet": "calculatepriorityscores"}, {"facet": "createdockedbikemodelsanalytics"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "lbsdecisionsupport"}, {"name": "lbsdecisionsupportcrons"}], "common_settings": {"redis": {"lbsdecisionsupportmultiredis": {"port": 6380, "op_timeout_ms": 1000, "ring_hash_lb_config": {"minimum_ring_size": 8192}}}, "external_hosts": {"kinesis_iad": null, "firehose_iad": null, "s3_iad": null}, "internal_hosts": {"marketweather": null, "regions": null, "lastmile": null, "tcs": null}}}}, "version": "888dc7c9d73b8e31ec2218776627e0f05a415371", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "lbsevents": {"name": "lbsevents", "description": "Service to stream LBS events as per MDS agency api", "repository": "git@github.com:lyft/lbsevents.git", "slack": "#data-platform-dev", "team_email": "dp-analyticsinfra@lyft.com", "pagerduty_escalation_policy": "Data Infra Interactive", "service_tier": 2, "credentials": true, "languages": ["bash", "java"], "image_type": "service", "containers": [{"name": "server", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kafka.server", "lbsevents.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "lbsevents.dev"}, {"name": "unittest", "type": "execution", "group": "lbsevents.dev", "container": "lbsevents.server", "command": "mvn test surefire-report:report -Dcheckstyle.skip=true", "reports": {"surefire": "target/site/surefire-report.html"}}, {"name": "integration", "type": "execution", "group": "lbsevents.dev", "container": "lbsevents.server", "command": "mvn test-compile failsafe:integration-test failsafe:verify -Dcheckstyle.skip=true", "reports": {"failsafe": "target/failsafe-reports/failsafe-summary.xml"}}, {"name": "checkstyle", "type": "execution", "group": "lbsevents.dev", "container": "lbsevents.server", "command": "mvn checkstyle:check", "reports": {"checkstyle": "target/checkstyle-report.txt"}}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "streamingplatform": {"version": "1.2-SNAPSHOT", "jobmanagers": [{"name": "lbsevents", "development": {"num_taskmanagers": 2, "taskmanager": {"num_slots": 2}}, "staging": {"num_taskmanagers": 2, "taskmanager": {"num_slots": 7, "instance_type_override": "m5.2xlarge"}}, "production": {"num_taskmanagers": 4, "taskmanager": {"num_slots": 7, "instance_type_override": "m5.2xlarge"}}, "jobs": [{"name": "lbsevents", "jar": "lbsevents-1.0.0-SNAPSHOT-fat.jar", "class": "com.lyft.lbs.Main", "development": {"parallelism": 1}, "staging": {"parallelism": 7}, "production": {"parallelism": 21}}]}]}, "logging": {"lbseventstaskmanager": {"fields": {"traceback": "keyword", "exception": "keyword", "attempt_num": "long", "failed_record": "keyword"}}}, "version": "3e719066ed182bc8251a1e980a9ec9a67f7b5f6d", "images": [{"parent": {"name": "java8", "version": "d98ad58c19a6adb7886d960af43e02126075558d", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "d98ad58c19a6adb7886d960af43e02126075558d", "sub_image": null, "external": false}}, "lbsint": {"name": "lbsint", "description": "Bikes and scooters internal support tool", "repository": "git@github.com:lyft/lbsint.git", "image_type": "service", "service_tier": 2, "slack": "#lbs-otech-deploy", "team_email": "lbs-eng@lyft.com", "pagerduty_escalation_policy": "LBS OTech", "frontend": {"node_version": "10.14.1-1nodesource1"}, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "groups": [{"name": "dev", "members": ["control.dev", "lastmile.dev", "lbsint.legacy", "opstasks.legacy", "lbsdecisionsupport.legacy", "places.legacy", "tcs.legacy", "stations.legacy"]}, {"name": "integration", "members": ["lbsint.dev", "lastmile.dev", "tom.integration"]}], "tests": [{"name": "startup", "type": "startup", "group": "lbsint.dev"}, {"name": "unit", "type": "execution", "group": "lbsint.dev", "container": "lbsint.legacy", "command": "make test_coverage"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "deploy": [{"name": "staging", "legacy": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "16:00 America/New_York"}, "envoy": {"profile": "python", "settings": {"services": [{"name": "lbsint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"tom": null, "acl": null, "lastmile": null, "lbsdecisionsupport": null, "stations": null, "opstasks": null, "places": null, "privacyaudit": null}}}}, "version": "38b6af9f350ef4f3f006aa9b74e7ac7a8648f4e4", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "lbslogisticsengine": {"name": "lbslogisticsengine", "description": "Service for routing LBS operations vehicles, wrapper around OR-Tools", "repository": "git@github.com:lyft/lbslogisticsengine.git", "slack": "#lbs-otech-deploy", "team_email": "lbs-otech-eng@lyft.com", "pagerduty_escalation_policy": "LBS OTech", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/lbslogisticsengine", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "lbslogisticsengine.legacy"]}, {"name": "service_group", "members": ["lbslogisticsengine.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "lbslogisticsengine.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "lbslogisticsengine.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "lbslogisticsengine.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "lbslogisticsengine"}]}}, "version": "45b79a096c0594df1550547e7a4c0a3b334bfd96", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "lbslogisticsworker": {"name": "lbslogisticsworker", "description": "Generates routes for LBS operations field associates", "repository": "git@github.com:lyft/lbslogisticsworker.git", "slack": "#lbs-otech-deploy", "team_email": "lbs-otech-eng@lyft.com", "pagerduty_escalation_policy": "LBS OTech", "image_type": "service", "service_tier": 3, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "routingworker", "command": "dumb-init -- service_venv python manage.py generate-routes", "sub_image": "k8s", "workdir": "/code/lbslogisticsworker"}], "groups": [{"name": "dev", "members": ["control.dev", "opstasks.dev", "regions.dev", "lbslogisticsengine.dev", "lbslogisticsworker.legacy", "routes.dev"]}, {"name": "integration", "members": ["lbslogisticsworker.dev"]}, {"name": "service_group", "members": ["lbslogisticsworker.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "lbslogisticsworker.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "sharded", "group": "lbslogisticsworker.integration", "container": "lbslogisticsworker.legacy", "target": "tests/integration/", "virtualenv": "service_venv", "run_in_pr": true, "run_in_dev": true, "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "routingworker", "type": "cron", "member": "lbslogisticsworker.routingworker", "concurrency_policy": "forbid", "schedule": "*/1 * * * *"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "routingworker"}]}, {"name": "production", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "routingworker"}]}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "16:00 America/New_York"}, "envoy": {"profile": "python", "settings": {"services": [{"name": "lbslogisticsworker", "traffic_type": "egress_only"}], "common_settings": {"internal_hosts": {"lbslogisticsengine": null, "opstasks": null, "regions": null, "routes": null}}}}, "logging": {"lbslogisticsworker": {"fields": {"region_code": "keyword"}}}, "version": "6ac7735b96cb667540843d2c3b127552f247a954", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "lbsscience": {"name": "lbsscience", "description": "General shared adhoc models implemented by LBS Science", "repository": "git@github.com:lyft/lbsscience.git", "image_type": "tool", "slack": "#lbs-science", "team_email": "lbs-science@lyft.com", "deploy": [{"name": "production", "legacy": false}], "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "notebook", "command": "/usr/bin/supervisord", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}, {"name": "rstudio", "port": 8787, "protocol": "http"}]}], "lyftlearn": {"notebook_templates": [{"template_name": "lbs-notebook", "short_description": "Notebook for lbs-science team", "long_description": "Notebook for lbs-science team", "owner": "ctemple", "primary_container": {"command": ["/usr/bin/supervisord"], "args": []}, "network": {"notebook": {"port": 8888, "public": true}, "rstudio": {"port": 8787, "public": true}}}]}, "version": "b11566df972979c6ec9a67630d499348ce0f569a", "images": [{"parent": {"name": "rtools", "version": "23aced3dc004502182c12dfa25b6378ec083373f", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "rtools", "version": "23aced3dc004502182c12dfa25b6378ec083373f", "sub_image": null, "external": false}}, "leadplatform": {"name": "leadplatform", "description": "Lead Engagement and Activation Development platform.", "repository": "git@github.com:lyft/leadplatform.git", "image_type": "service", "service_tier": 2, "slack": "#notifications", "team_email": "notifications-eng@lyft.com", "pagerduty_escalation_policy": "Notifications", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/leadplatform", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "7.5Gi"}}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "redis.dev", "leadplatform.legacy"]}, {"name": "service_group", "members": ["leadplatform.service"]}, {"name": "ats-integration", "members": ["leadplatform.dev", "ats.integration", "rentals.legacy", "tcs.legacy", "dispatch.legacy", "ridetimeestimator.legacy"]}, {"name": "rentals-integration", "members": ["leadplatform.dev", "ats.integration", "rentals.legacy", "tcs.legacy", "dispatch.legacy", "ridetimeestimator.legacy", "ledger.legacy"]}], "facets": [{"name": "main", "member": "leadplatform.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "canary", "member": "leadplatform.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "sub_image": "k8s", "command": "make -f tests.mk test_unit"}, {"name": "integration", "type": "execution", "group": "leadplatform.dev", "container": "leadplatform.legacy", "command": "make -f tests.mk test_integration", "reports": {"junit": "build/int.xml"}}], "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "acl": {"admin_policies": ["kubernetes-leadplatform"]}}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "acl": {"admin_policies": ["kubernetes-leadplatform"]}}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true, "acl": {"admin_policies": ["kubernetes-leadplatform"]}}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "acl": {"admin_policies": ["kubernetes-leadplatform"]}}, "targets": [{"facet": "canary"}, {"facet": "main"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "leadplatform"}, {"name": "leadplatformworkers"}], "common_settings": {"external_hosts": {"firehose_iad": null, "dynamodb_iad": null}, "internal_hosts": {"acl": {"tls_enabled": true}, "ats": {"tls_enabled": true}, "driverridesinfo": {"tls_enabled": true}, "jobschedulerbulkweb": {"tls_enabled": true}, "jobschedulermigrationweb": {"tls_enabled": true}, "jobschedulernormalweb": {"tls_enabled": true}, "leadplatform": {"tls_enabled": true}, "leadplatformmodels": {"tls_enabled": true}, "messaging": {"tls_enabled": true}, "notes": {"tls_enabled": true}, "omnibot": {"tls_enabled": true}, "rentals": {"tls_enabled": true}, "switchboard": {"tls_enabled": true}, "tcs": {"tls_enabled": true}, "users": {"tls_enabled": true}}, "redis": {"leadplatformmultiredis": {"port": 6380, "op_timeout_ms": 400}}}}}, "version": "72a4713e8542bdd43b56d4b3610d5557061548f4", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "leadplatformint": {"name": "leadplatformint", "description": "Frontend for leadplatform with tools for managing support agents, their assigned leads, and viewing information about individual leads.", "repository": "git@github.com:lyft/leadplatformint.git", "slack": "#notifications-bots", "team_email": "notifications-eng@lyft.com", "pagerduty_escalation_policy": "Notifications", "image_type": "service", "service_tier": 2, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "leadplatformint.legacy"]}, {"name": "service_group", "members": ["leadplatformint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "leadplatformint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "staging", "orca": [{"region": "iad"}], "legacy": true, "automatic": true, "bake_time_minutes": 1}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "leadplatformint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": {"tls_enabled": true}, "ats": {"tls_enabled": true}, "backgroundcheck": {"tls_enabled": true}, "drivermode": {"tls_enabled": true}, "driverridesinfo": {"tls_enabled": true}, "leadplatform": {"tls_enabled": true}, "notes": {"tls_enabled": true}, "places": {"tls_enabled": true}, "supply": {"tls_enabled": true}, "supplyrecords": {"tls_enabled": true}, "switchboard": {"tls_enabled": true}, "users": {"tls_enabled": true}, "privacyaudit": null}}}}, "version": "dd5d9c73aa7a85de346cce0883a1c886bf679844", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "leadplatformmodels": {"name": "leadplatformmodels", "description": "Leadplatform ML models for Jarvis", "repository": "git@github.com:lyft/leadplatformmodels.git", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "slack": "#notifications", "team_email": "notifications-eng@lyft.com", "pagerduty_escalation_policy": "Notifications", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}]}}, "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "sh", "command": "bash"}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 1, "memory": "2Gi"}}], "facets": [{"name": "main", "member": "leadplatformmodels.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 40}, "min_size": 1, "max_size": 1}, "watch_remote_files": {"production": [{"name": "jarvis_decision_model__expected_volume", "s3_url": "s3://lyft-lyftlearn-production-iad/model_outputs/leadplatformmodels/decision_model/1/expected_volume.json"}, {"name": "jarvis_decision_model__score_distribution", "s3_url": "s3://lyft-lyftlearn-production-iad/model_outputs/leadplatformmodels/decision_model/1/score_distribution.json"}, {"name": "jarvis_applicant_scoring__ltv", "s3_url": "s3://lyft-lyftlearn-production-iad/model_outputs/leadplatformmodels/applicant_scoring/1/ltv.json"}, {"name": "jarvis_applicant_scoring__pctdelta", "s3_url": "s3://lyft-lyftlearn-production-iad/model_outputs/leadplatformmodels/applicant_scoring/1/pctdelta.json"}, {"name": "jarvis_available_capacity__all_daily_caps", "s3_url": "s3://lyft-lyftlearn-production-iad/model_outputs/leadplatformmodels/available_capacity/1/all_daily_caps.json"}]}}, {"name": "canary", "member": "leadplatformmodels.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 40}, "min_size": 1, "max_size": 1}, "watch_remote_files": {"production": [{"name": "jarvis_decision_model__expected_volume", "s3_url": "s3://lyft-lyftlearn-production-iad/model_outputs/leadplatformmodels/decision_model/1/expected_volume.json"}, {"name": "jarvis_decision_model__score_distribution", "s3_url": "s3://lyft-lyftlearn-production-iad/model_outputs/leadplatformmodels/decision_model/1/score_distribution.json"}, {"name": "jarvis_applicant_scoring__ltv", "s3_url": "s3://lyft-lyftlearn-production-iad/model_outputs/leadplatformmodels/applicant_scoring/1/ltv.json"}, {"name": "jarvis_applicant_scoring__pctdelta", "s3_url": "s3://lyft-lyftlearn-production-iad/model_outputs/leadplatformmodels/applicant_scoring/1/pctdelta.json"}, {"name": "jarvis_available_capacity__all_daily_caps", "s3_url": "s3://lyft-lyftlearn-production-iad/model_outputs/leadplatformmodels/available_capacity/1/all_daily_caps.json"}]}, "canary": true}], "groups": [{"name": "service_group", "members": ["leadplatformmodels.service"]}], "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "leadplatformmodels.service_group", "container": "leadplatformmodels.service", "command": "python -m pytest /code/leadplatformmodels/tests/integration", "reports": {"junit": "build/int.xml"}}], "notification_overrides": {"pr_merge": {"disabled": true}}, "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": false, "acl": {"admin_policies": ["kubernetes-leadplatform"]}}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "acl": {"admin_policies": ["kubernetes-leadplatform"]}}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true, "acl": {"admin_policies": ["kubernetes-leadplatform"]}}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "acl": {"admin_policies": ["kubernetes-leadplatform"]}}, "targets": [{"facet": "canary"}, {"facet": "main"}]}], "lyftlearn": {}, "envoy": {"profile": "python", "settings": {"services": [{"name": "leadplatformmodels"}]}}, "version": "214d6044dbb275b990a0571b8094e9799ea49d22", "images": [{"parent": {"name": "lyftlearnnotebook", "version": "53ad9b9b099fd76c690a2498cbc6247173ccd54e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "lyftlearnnotebook", "version": "53ad9b9b099fd76c690a2498cbc6247173ccd54e", "sub_image": null, "external": false}}, "learningplatform": {"name": "learningplatform", "description": "Service for managing learning content in the app.", "repository": "git@github.com:lyft/learningplatform.git", "slack": "#driving-backend", "team_email": "driving-eng@lyft.com", "pagerduty_escalation_policy": "Driving Team", "image_type": "service", "service_tier": 1, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "learningplatform.legacy"]}, {"name": "service_group", "members": ["learningplatform.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "learningplatform.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "learningplatform.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "learningplatform.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "learningplatform"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}}}}, "version": "7340149c511f20ac80960e738467275673258942", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "ledger": {"name": "ledger", "description": "ledger", "repository": "git@github.com:lyft/ledger.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 30, "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent --worker-connections=1000 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/ledger", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "7Gi"}}, {"name": "batch", "command": "dumb-init -- sleep infinity", "workdir": "/code/ledger", "sub_image": "k8s"}], "facets": [{"name": "main", "member": "ledger.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 8, "max_size": 70}}}}, {"name": "canary", "member": "ledger.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "batch", "member": "ledger.batch", "type": "batch", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "elasticsearch6.server", "ledger.legacy"]}, {"name": "integration", "members": ["account.dev", "coupons.dev", "dynamodb.server", "dispatch.legacy", "green.dev", "ledger.dev", "locations.dev", "ratecards.dev", "regions.dev", "txnhub.dev", "users.dev", "usergroups.dev", "viewport.dev", "wallet.dev", "walletapi.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "ledger.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy"}, {"name": "integration", "type": "execution", "group": "ledger.integration", "container": "ledger.legacy", "command": "make test_integration", "reports": {"junit": "build/integration.xml"}}, {"name": "lint", "type": "jailed", "command": "make lint_ledger", "reports": {"pylint": "build/flake8.txt"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "framework": "pytest", "coverage": false, "markers": "unit_legacy", "container": "ledger.legacy", "group": "ledger.dev", "targets": ["tests/unit"]}], "slack": "#pay-platform", "team_email": "pay-platform-eng@lists.lyft.com", "pagerduty_escalation_policy": "Pay Platform", "service_tier": 0, "notification_overrides": {"deploy": {"slack": "#pay-platform-deploys", "environments": ["production", "staging", "canary"]}, "pr_open": {"slack": "#pay-platform"}, "test_failure": {"slack": "#pay-platform-deploys", "environments": ["production"]}}, "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "batch"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], {"legacy": false, "name": "production", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "batch"}]}], "languages": ["python"], "image_type": "service", "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "ledger"}, {"name": "ledgerbatch"}], "common_settings": {"internal_hosts": {"coupons": null, "green": null, "jobschedulerbulkweb": null, "jobschedulermigrationweb": null, "jobschedulernormalweb": null, "jobschedulerurgentweb": null, "ledger": null, "mailer": null, "ratecards": null, "regions": null, "rentals": null, "rides": null, "ridesapi": null, "supply": null, "tcs": null, "tolls": null, "txnhub": null, "usergroups": null, "users": null, "venues": null, "wallet": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}}}}, "logging": {"ledger": {"fields": {"status": "keyword", "client_id": "keyword", "line_item": "keyword", "counterparty_type": "keyword", "pending_invoices_for_all_currencies": "keyword", "driver_id": "keyword", "invoice": "keyword", "authed_amount": "long", "id": "keyword", "order_type": "keyword", "bonus_id": "keyword", "new": {"type": "keyword", "amount": "long"}, "green_charge_id": "keyword", "original_payment_id": "keyword", "order_id": "keyword", "participant_id": "keyword", "nsq_num": "long", "existing": {"amount": "long", "type": "keyword"}, "invoice_currency": "keyword", "counterparty_id": "keyword", "payment_id": "keyword", "retry_attempt": "long", "success": "boolean", "invoice_id": "keyword", "amount": "long", "nsq_topic": "keyword", "order": "keyword", "coupon_prefix": "keyword", "credit_amount": "long", "currency": "keyword", "dry_run": "keyword", "dryrun": "keyword", "refund_amount": "long", "refund_type": "keyword", "refunded_before": "keyword", "refunded_total": "long", "ride_id": "long", "run_id": "long", "txnhub_transaction_id": "long", "len": "long"}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s", "packages": ["libgeos-dev", "lbzip2", "libspatialindex-dev"]}}]}}, "version": "4f4fbde737136a1c05e9ea19788829a6abfe4d02", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "legacyapi": {"name": "legacyapi", "description": "A service hosting api endpoints that render the universal object.", "repository": "git@github.com:lyft/legacyapi.git", "image_type": "service", "service_tier": 0, "slack": "#legacyapi", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "core-services@lyft.com", "pagerduty_escalation_policy": "API", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/legacyapi", "limits": {"cpu": 4, "memory": "4Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "minimal", "members": ["control.dev", "legacyapi.legacy"]}, {"name": "dev", "members": ["legacyapi.minimal"]}, {"name": "integration", "members": ["control.dev", "envoy.server", "dbproxyauth.legacy", "dbproxyroutes.legacy", "legacyridetypes.legacy", "viewport.legacy", "regions.legacy", "etaproxy.dev", "locations.legacy", "users.dev", "legacyoauth.legacy", "supply.legacy", "legacyapi.legacy", "account.legacy", "dispatch.legacy", "dispatchavailability.legacy", "pricing.legacy", "auth.legacy", "tcs.legacy", "ratelimit.legacy", "dnsmasq.server", "dynamodb.server", "elasticsearch.server", "elasticsearch5.server", "kinesis.server", "metadataproxy.server", "mongodb.server", "postgresql.server", "redis.server", "sqs.server", "ridesapi.legacy", "routes.legacy", "tcs.legacy", "tripsapi.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "legacyapi.minimal"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml", "pylint": "build/flake8.txt"}}, {"name": "integration", "type": "execution", "group": "legacyapi.integration", "container": "legacyapi.legacy", "command": "make test_integration", "float_dependencies": "*/30 * * * *", "skip_threshold": 5, "reports": {"junit": "build/int.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "legacyapi.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 5, "max_size": 330}}}}, {"name": "canary", "member": "legacyapi.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "legacyapi"}], "common_settings": {"internal_hosts": {"account": null, "legacyapi": null, "matchingexecution": null, "regions": null, "rides": null, "ridesapi": null, "routes": null, "supply": null, "tcs": null, "users": null}, "external_hosts": {"firehose_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}, {"name": "s2iplus", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "version": "8f93c8d1395bd76f558cd8e55ecd15b55c1dcb5e", "images": [{"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "py37", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "legacyoauth": {"name": "legacyoauth", "description": "Houses legacy 3rd party oauth implementation (previously in publicapi)", "repository": "git@github.com:lyft/legacyoauth.git", "image_type": "service", "service_tier": 0, "slack": "#identity-eng", "team_email": "identity-eng@lyft.com", "pagerduty_escalation_policy": "Identity Eng", "notification_overrides": {"pr_open": {"slack": "#identity-prs"}, "deploy": {"slack": "#identity-bots"}, "deploy_failure": {"slack": "#identity-bots"}, "test_failure": {"slack": "#identity-bots"}, "master_failure": {"slack": "#identity-bots"}, "pr_merge": {"slack": "#identity-bots"}, "behind_notifications": {"slack": "#identity-bots"}}, "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "jobscheduler.dev", "dynamodb.server", "envoy.server", "auth.dev", "enterprise.dev", "legacyoauth.legacy"]}, {"name": "integration", "members": ["legacyoauth.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "legacyoauth.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy"}, {"name": "integration", "type": "sharded", "target": "tests/integration", "virtualenv": "integration_venv", "float_dependencies": "0 5-22 * * *", "group": "legacyoauth.integration", "container": "legacyoauth.legacy", "run_in_dev": true, "skip_threshold": 5, "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "command": "make test_unit", "container": "legacyoauth.legacy", "group": "legacyoauth.dev", "reports": {"junit": "build/unit.xml"}}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "legacyoauth"}], "common_settings": {"internal_hosts": {"auth": null, "enterprise": null, "ratelimit": null, "jobschedulernormalweb": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "authorization": {"permissions": {"internal": {"paths": ["/internal/*"], "not_paths": ["/internal/refresh_token"]}, "testharness": {"paths": ["/testharness/*"]}, "oauth": {"paths": ["/oauth/*"]}, "refresh_token": {"paths": ["/internal/refresh_token"]}}, "bindings": {"*": ["internal", "testharness", "oauth"], "enterpriseapiprovisioning": ["refresh_token"], "tom": ["refresh_token"]}}}}}, "pulldeploy_components": {"data": ["translationdata"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"legacyoauth": {"fields": {"access_token_lifetime": "long", "client_id": "keyword", "scopes": "keyword", "sandbox": "boolean", "error": {"os": "keyword", "client_type": "keyword", "endpoint": "keyword", "major_app_version": "keyword", "is_internal": "boolean", "error_code": "long", "message": {"error": "keyword", "error_description": "keyword", "error_detail": "keyword"}, "error_class": "keyword", "client_id": "keyword", "user_id": "keyword"}, "user_id": "keyword", "session_id": "keyword"}}}, "version": "82b848fe62cc6d38c08b5f58748ebd99834384b1", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "legacyridescheduler": {"name": "legacyridescheduler", "description": "Houses legacy ridescheduler implementation that was previously in publicapi", "repository": "git@github.com:lyft/legacyridescheduler.git", "image_type": "service", "service_tier": 1, "slack": "#dispatch-bots", "team_email": "dispatch@lyft.com", "pagerduty_escalation_policy": "Dispatch", "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/legacyridescheduler", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 30}}], "facets": [{"name": "main", "member": "legacyridescheduler.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 30}}}}, {"name": "canary", "member": "legacyridescheduler.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}]], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "legacyridescheduler.legacy"]}, {"name": "integration", "members": ["legacyridescheduler.dev", "abacus.dev", "account.dev", "auth.dev", "coupons.dev", "dispatch.dev", "dispatchavailability.dev", "envoy.server", "etaproxy.dev", "fare.dev", "green.dev", "jobscheduler.dev", "karma.dev", "ledger.dev", "legacyoauth.dev", "legacyridetypes.dev", "locations.dev", "pricing.dev", "publicapi.dev", "rides.dev", "ridesapi.dev", "ridescheduler.dev", "supply.dev", "tolls.dev", "trips.dev", "tripsapi.dev", "usergroups.dev", "users.dev", "viewport.dev", "wallet.dev", "walletapi.dev"]}], "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "tests": [{"name": "startup", "type": "startup", "group": "legacyridescheduler.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy"}, {"name": "integration", "type": "sharded", "target": "tests/integration", "virtualenv": "integration_venv", "float_dependencies": "0 5-22 * * *", "group": "legacyridescheduler.dev", "container": "legacyridescheduler.legacy", "skip_threshold": 5, "reports": {"junit": "build/integration.xml"}}, {"name": "unit_legacy", "type": "execution", "group": "legacyridescheduler.dev", "container": "legacyridescheduler.legacy", "framework": "pytest", "coverage": false, "markers": "unit_legacy", "virtualenv": "service_venv", "targets": ["tests/unit"]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "legacyridescheduler"}], "common_settings": {"internal_hosts": {"auth": null, "legacyridetypes": null, "pricing": null, "ratelimit": null, "regions": null, "ridesapi": null, "ridescheduler": null, "usergroups": null, "users": null}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}}}}, "logging": {"legacyridescheduler": {"fields": {"url": "keyword", "params": "keyword", "args": "keyword", "X-Envoy-External-Address": "keyword", "User-Agent": "keyword", "X-Lyft-Session-Id": "keyword", "X-Locale-Region": "keyword", "X-Analytics-Dev": "keyword", "error": {"os": "keyword", "is_internal": "boolean", "endpoint": "keyword", "error_code": "long", "major_app_version": "keyword", "client_type": "keyword", "message": {"error": "keyword", "error_description": "keyword", "error_detail": "keyword", "cost_token": "keyword", "primetime_multiplier": "float", "primetime_percentage": "keyword", "token_duration": "long", "primetime_confirmation_token": "keyword"}, "client_id": "keyword", "user_id": "keyword", "error_class": "keyword"}, "scheduled_ride_id": "keyword", "origin_lat": "float", "origin_lng": "float", "cost_token": "keyword", "destination_lng": "float", "scheduled_pickup_time_ms": "keyword", "user_session": "keyword", "destination_lat": "float", "response_code": "long", "response_content": "keyword", "request_data": {"passenger_id": "keyword", "payer": {"domain": "keyword", "id": "keyword"}, "client_id": "keyword", "permissions": "keyword", "pickup_upper_bound_ms": "long", "requester_id": "keyword", "origin": {"lat": "float", "lng": "float", "location_input_source": "keyword", "routable_address": "keyword", "address": "keyword", "place_name": "keyword", "place_id": "keyword"}, "scheduled_pickup_time_ms": "keyword", "ride_type": "keyword", "destination": {"lng": "float", "location_input_source": "keyword", "lat": "float", "routable_address": "keyword", "place_name": "keyword", "address": "keyword", "place_id": "keyword"}, "canceler": {"role": "keyword", "id": "keyword"}, "status": "keyword", "scheduled_pickup_time_after_ms": "keyword", "waypoints": "keyword"}, "status_code": "long", "client_id": "keyword", "passenger_id": "keyword", "value": "keyword", "error_code": "long"}}}, "version": "9265a07b79d869f4684a8d0c42c362557d91c3d8", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "legacyridetypes": {"name": "legacyridetypes", "description": "Used to serve ridetypes to the passenger apps (decomped from publicapi)", "repository": "git@github.com:lyft/legacyridetypes.git", "image_type": "service", "service_tier": 0, "slack": "#purchase-flow", "team_email": "purchase-flow-eng@lyft.com", "pagerduty_escalation_policy": "Purchase Flow", "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "packages": ["libgeos-dev", "libjpeg-dev", "libjpeg8-dev", "libspatialindex-dev", "zip"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s", "packages": ["libgeos-dev", "libjpeg-dev", "libjpeg8-dev", "libspatialindex-dev", "zip"]}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}], "limits": {"environment": {"development": {"cpu": 1.1, "memory": "0.5Gi"}}}}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/legacyridetypes", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi"}}], "facets": [{"name": "main", "member": "legacyridetypes.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 160}}}}, {"name": "canary", "canary": true, "member": "legacyridetypes.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "envoy.server", "legacyridetypes.legacy"]}, {"name": "integration", "members": ["account.dev", "auth.dev", "coupons.dev", "green.dev", "karma.dev", "legacyoauth.dev", "legacyapi.dev", "legacyridetypes.dev", "modes.dev", "regions.dev", "tcs.dev", "usergroups.dev", "users.dev", "wallet.dev", "walletapi.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "legacyridetypes.dev"}, {"name": "unit", "type": "jailed", "command": "env TEST_TAGS=\"not unit_legacy\" make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml", "htmlcov": "build/htmlcov"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "sharded", "target": "tests/integration", "virtualenv": "integration_venv", "float_dependencies": "0 5-22 * * *", "group": "legacyridetypes.integration", "container": "legacyridetypes.legacy", "run_in_dev": false, "skip_threshold": 5, "reports": {"junit": "build/integration.xml"}}, {"name": "unit_legacy", "type": "execution", "command": "env TEST_TAGS=\"unit_legacy\" make test_unit", "container": "legacyridetypes.legacy", "group": "legacyridetypes.dev", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml", "htmlcov": "build/htmlcov"}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "pulldeploy_components": {"data": ["regioncfgdata", "translationdata", "marketplaceconfig"]}, "notification_overrides": {"pr_open": {"slack": "#purchase-flow-prs"}, "pr_merge": {"slack": "#purchase-flow-bots"}, "deploy": {"slack": "#purchase-flow-bots"}, "deploy_failure": {"slack": "#purchase-flow-bots"}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "legacyridetypes"}], "common_settings": {"internal_hosts": {"coupons": null, "courier": null, "enterprise": null, "modes": null, "places": null, "ratelimit": null, "regions": null, "tcs": null, "usergroups": null, "users": null}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}}}}, "logging": {"legacyridetypes": {"fields": {"origin": "keyword", "region_code": "keyword", "dest": "keyword", "dest_region_code": "keyword", "lrt_val": "text", "modes_val": "text", "ride_type": "keyword", "user_id": "keyword", "mode_id": "keyword", "exception_type": "keyword"}}}, "version": "96799a11d04c5dc0473780f8141040b60fab6bd7", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "legoland": {"name": "legoland", "description": "legoland", "repository": "git@github.com:lyft/legoland.git", "credentials": true, "languages": ["javascript"], "image_type": "service", "custom": {"service_type": "nodejs", "internal_service": true, "frontend_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 600, "exports": [{"name": "api", "port": 80}]}], "groups": [{"name": "dev", "members": ["control.dev", "legoland.legacy"]}], "slack": "#frontend-bots", "team_email": "frontend-platform@lyft.com", "pagerduty_escalation_policy": "Fedex", "tests": [{"name": "startup", "type": "startup", "group": "legoland.dev"}, {"name": "unit", "type": "jailed", "command": "make test_ci", "autotrigger": false}, {"name": "typecheck", "type": "jailed", "command": "make test_typecheck"}], "deploy": [{"name": "gemfury", "legacy": true, "automatic": false}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "legoland"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}}}}, "version": "80865e1d0c834aeb4606610a9a2c6a49b4b24f71", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "lgtm": {"name": "lgtm", "description": "Service to perform static analysis on source code.", "repository": "git@github.com:lyft/lgtm.git", "slack": "#security", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "team_email": "security-engineering@lyft.com", "pagerduty_escalation_policy": "Security", "image_type": "service", "service_tier": 3, "deploy": [{"name": "staging", "legacy": false, "bake_time_minutes": 1, "orca": [{"iam_role": "orca-admin", "region": "iad"}], "automatic": true, "kubernetes": {"enabled": true, "mode": "direct", "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "clusterLabels": [{"cluster.lyft.net/role": "infra"}, {"cluster.lyft.net/clustername": "infrastaging"}]}}, {"name": "production", "legacy": false, "orca": [{"iam_role": "orca-admin", "region": "iad"}], "kubernetes": {"enabled": true, "mode": "direct", "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "clusterLabels": [{"cluster.lyft.net/role": "infra"}, {"cluster.lyft.net/cluster_name": "infra"}]}}], "version": "59df6ef577d23089a22bf74b9bf0bf3b62eaed87", "images": [{"parent": {"name": "scratch", "version": "", "sub_image": null, "external": true}, "sub_image": null}], "parent": {"name": "scratch", "version": "", "sub_image": null, "external": true}}, "lightstepproxy": {"name": "lightstepproxy", "description": "lightstepproxy", "repository": "git@github.com:lyft/lightstepproxy.git", "image_type": "service", "pagerduty_escalation_policy": "Networking", "slack": "#networking-bots", "team_email": "network-team@lyft.com", "languages": ["go"], "credentials_legacy": true, "credentials": true, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "k8sservice", "command": "dumb-init -- /go/src/github.com/lyft/lightstepproxy/script/start.sh", "workdir": "/code/lightstepproxy", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "16Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "lightstepproxy.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "lightstepproxy.dev"}], "slack_deploy_notification_environments": ["canary", "production"], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "path": "staging"}}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true, "path": "production"}}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true, "path": "production"}}]], "service_tier": 3, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s", "sources": [{"name": "lightstep-ppa", "source": "deb https://packagecloud.io/lightstep/collector/ubuntu/ bionic main", "keyid": "4EF3C81B"}], "packages": ["lightstep-collector"]}}, {"name": "docker_build"}]}}, "facets": [{"name": "main", "member": "lighttstepproxy.k8sservice", "type": "service", "sidecars": ["heka", "fluentbit", "statsd", "iamwait", "nsq", "runtimepull"], "autoscaling": {"environment": {"staging": {"min_size": 5, "max_size": 40}, "production": {"min_size": 5, "max_size": 120}}}, "requirements": {"nlbingress": true}}, {"name": "canary", "canary": true, "member": "lightstepproxy.k8sservice", "type": "service", "sidecars": ["heka", "fluentbit", "statsd", "iamwait", "nsq", "runtimepull"], "autoscaling": {"min_size": 1, "max_size": 1}, "requirements": {"nlbingress": true}}], "orchestrate": {"types": [{"name": "terraform"}], "steps": [{"name": "staging"}, {"name": "production"}]}, "version": "7c8a0e25d37f36ad7fb7e065a8a388230a109ae7", "images": [{"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "loadtestbot": {"name": "loadtestbot", "description": "A Slack bot to assist with the running of the load test.", "repository": "git@github.com:lyft/loadtestbot.git", "slack": "#resilience-bots", "team_email": "resilience-team@lyft.com", "pagerduty_escalation_policy": "Resilience", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/loadtestbot", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "worker", "command": "dumb-init -- service_venv python manage.py worker", "workdir": "/code/loadtestbot", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["control.dev", "sqs.server", "omnibot.dev", "loadtestbot.legacy"]}, {"name": "service_group", "members": ["loadtestbot.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "loadtestbot.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "loadtestbot.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "loadtestbot.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "worker", "member": "loadtestbot.worker", "type": "worker", "envoy_service": "loadtestbotworkers", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "canaryworker", "member": "loadtestbot.worker", "type": "worker", "envoy_service": "loadtestbotworkers", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "worker"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "canaryworker"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "worker"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "worker"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "worker"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "loadtestbot"}, {"name": "loadtestbotworkers"}], "common_settings": {"internal_hosts": {"simulatedrides": null, "acl": null, "omnibot": null}}}}, "version": "559caf5ff6c63fd4fead3e23a6ba7da59ebaa9c8", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "localevents": {"name": "localevents", "description": "A CRUD service for the management of local events", "repository": "git@github.com:lyft/localevents.git", "image_type": "service", "service_tier": 1, "slack": "#dxp-backend", "team_email": "driver-xp-backend@lyft.com", "pagerduty_escalation_policy": "Driver Earnings XP", "languages": ["python"], "credentials": true, "pulldeploy_components": {"data": ["regioncfgdata"]}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}], "facets": [{"name": "main", "member": "localevents.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-localevents-env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 1, "max_size": 10}}}}, {"name": "canary", "member": "localevents.service", "type": "service", "canary": true, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-localevents-env.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "redis.dev", "localevents.legacy", "venues.dev", "localeventsint.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "localevents.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "localevents.dev", "container": "localevents.legacy", "command": "make test_integration", "reports": {"junit": "build/integrationtests.xml", "cobertura": "build/integration_coverage.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "localevents"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"supply": null, "venues": null, "tcs": null, "regions": null}, "external_hosts": {"dynamodb_iad": null}, "redis": {"localeventsmultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipython3:9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "k8s"}}, {"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"localevents": {"fields": {"driver_id": "keyword"}}}, "version": "030d1ce35fcadfe7e2f2c72bf310c2c0e7ca9242", "images": [{"parent": {"name": "s2ipython3", "version": "9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "localeventsint": {"name": "localeventsint", "description": "Frontend for managing local events data", "repository": "git@github.com:lyft/localeventsint.git", "image_type": "service", "service_tier": 1, "slack": "#dxp-backend", "team_email": "driver-xp-backend@lyft.com", "pagerduty_escalation_policy": "Driver Earnings XP", "languages": ["javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "workdir": "/code/localeventsint", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "cdnupload", "command": "/code/localeventsint/cdn-upload", "workdir": "/code/localeventsint", "sub_image": "k8s"}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "localevents.dev", "places.dev", "localeventsint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "localeventsint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "localeventsint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"localevents": null, "places": null, "acl": null, "privacyaudit": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2inode:service.c613d468388654eeca11d9a11603d9872a559e38", "sub_image": "k8s"}}, {"name": "docker_build"}]}}, "facets": [{"name": "main", "member": "localeventsint.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 5}}}}, {"name": "canary", "member": "localeventsint.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "assets", "member": "localeventsint.cdnupload", "type": "job"}], "version": "59c90fd4402908dd7111a4018b19278c169b0d86", "images": [{"parent": {"name": "s2inode", "version": "c613d468388654eeca11d9a11603d9872a559e38", "sub_image": "service", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "locationmanagerint": {"name": "locationmanagerint", "description": "Internal frontend service to manage queues and operations at Lyft retail locations", "repository": "git@github.com:lyft/locationmanagerint.git", "slack": "#fp-hub", "team_email": "fp-eng@lyft.com", "pagerduty_escalation_policy": "Fleet Tech Frontend", "image_type": "service", "service_tier": 1, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "locationmanagerint.legacy", "acl.dev", "appointmentmanager.dev", "fleetlocations.dev", "fleetmanagement.dev", "users.dev", "vehicleservicecenters.dev"]}, {"name": "service_group", "members": ["locationmanagerint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "locationmanagerint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "locationmanagerint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null, "appointmentmanager": null, "fleetlocations": null, "fleetmanagement": null, "supply": null, "users": null, "vehicleservicecenters": null, "privacyaudit": null, "wallet": null}}}}, "version": "49efc8f5d33c14350b2885f2a9f276c992e124ee", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "locations": {"name": "locations", "description": "locations", "repository": "git@github.com:lyft/locations.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 180, "exports": [{"name": "api", "port": 8080}], "limits": {"environment": {"development": {"cpu": 1.2, "memory": "2Gi"}}}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "redis.dev", "regions.dev", "locations.legacy"]}, {"name": "integration", "members": ["dsfeatures.dev", "dynamodb.dev", "etaproxy.dev", "jobscheduler.dev", "kafka.server", "kinesis.server", "locations.dev", "ratelimit.dev", "redis.dev", "regions.dev", "roads.dev", "routingengine.dev", "streetsv5.dev", "tcs.dev"]}, {"name": "eval", "members": ["locations.integration", "roads.dev"]}], "tests": [{"name": "start", "type": "startup", "group": "locations.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "locations.integration", "container": "locations.legacy", "command": "make test_integration", "skip_threshold": 1, "reports": {"junit": "build/int.xml"}}, {"name": "eval", "type": "execution", "group": "locations.eval", "container": "locations.legacy", "command": "make test_eval", "autotrigger": false, "schedule": "0 2 * * *", "reports": {"junit": "build/eval.xml"}, "logs": {"locations": ["/mnt/log/lyft/score.txt"]}}, {"name": "eval_smf", "type": "execution", "group": "locations.eval", "container": "locations.legacy", "command": "make test_eval_smf", "autotrigger": false, "schedule": "0 2 * * *", "reports": {"junit": "build/eval.xml"}, "logs": {"locations": ["/mnt/log/lyft/score.txt"]}}, {"name": "eval_realtime", "type": "execution", "group": "locations.eval", "container": "locations.legacy", "command": "make test_eval_realtime", "autotrigger": false, "schedule": "0 2 * * *", "reports": {"junit": "build/eval_realtime.xml"}, "logs": {"locations": ["/mnt/log/lyft/score.txt"]}}], "slack": "#locations", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "locations@lyft.com", "upstream_tests": {"on_commit": false, "test_set": {"dispatch": ["integration"]}}, "pagerduty_escalation_policy": "Locations", "service_tier": 0, "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "docs": {"autogen_env": "python3.6", "autogen_modules": ["locations"]}, "languages": ["python"], "image_type": "service", "pulldeploy_components": {"data": ["marketplaceconfig", "regioncfgdata"]}, "configsets": ["atlantisdata"], "envoy": {"profile": "python", "settings": {"services": [{"name": "locations"}, {"name": "locationsasync"}, {"name": "locationsbatch"}, {"name": "locationsingest"}, {"name": "locationskafkarawconsumer"}, {"name": "locationsmapmatch"}, {"name": "locationsmonitorworker"}, {"name": "locationspersist"}, {"name": "locationsregionsearch"}, {"name": "locationsrouteline"}, {"name": "locationsrtmmprocess"}, {"name": "locationsrtmmworker"}, {"name": "locationsrtmmspworker"}, {"name": "locationssensoringest"}, {"name": "locationsshadow"}, {"name": "locationsworkers"}], "common_settings": {"internal_hosts": {"dsfeatures": null, "etaproxy": null, "jobschedulernormalweb": null, "locations": null, "locationsasync": null, "locationsregionsearch": null, "locationssearch": null, "locationsshadow": null, "pusher": null, "ratelimit": null, "regions": null, "rides": null, "roads": null, "roadsincremental": null, "roadsincrementallm": null, "roadsmapmatching": null, "roadsmapmatchingb": null, "roadspinned": null, "roadsrouting": null, "roadsroutingblue": null, "roadsroutinglm": null, "roadsroutingorange": null, "roadsrtmm": null, "roadsrtmmblue": null, "roadsrtmmlm": null, "roadsrtmmorange": null, "roadsupdated": null, "routes": null, "routingengine": null, "routingenginena20180101": null, "routingenginena20190710": null, "routingenginena20200222": null, "streetsv5": null, "viewport": null, "tcs": null, "tolls": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null, "firehose_iad": null}, "redis": {"locationsshadowmultiredis": {"port": 6385, "op_timeout_ms": 1250, "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}, "ring_hash_lb_config": {"minimum_ring_size": 256000}}}}, "override_settings": [{"services": [{"name": "locations"}], "settings": {"redis_clusters": {"locationslo": {"aws_random_identifier": "vngjnv", "port": 6382, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationsmid": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationshi": {"aws_random_identifier": "vngjnv", "port": 6383, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationsgeo": {"aws_random_identifier": "vngjnv", "port": 6381, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}}, "authorization": {"permissions": {"current_search_current_locations_by_user_ids_get": {"paths": ["/v1/current/users"], "methods": ["GET"]}, "current_search_current_locations_by_user_ids_post": {"paths": ["/v1/current/users"], "methods": ["POST"]}, "search_v1_prefix_get_processed_location_history": {"paths": ["/api/v1/processed_location_history"], "methods": ["POST"]}, "search_v1_no_prefix_get_processed_location_history": {"paths": ["/processed_location_history"], "methods": ["POST"]}, "current_search_current_locations_by_area": {"paths": ["/v1/current/area"], "methods": ["GET"]}, "v2_routes_get_locations_by_radius_search": {"paths": ["/v2/current/radius"], "methods": ["GET"]}, "v2_routes_get_locations_by_user_id": {"paths": ["/v2/current/users"], "methods": ["GET"]}, "v2_routes_get_historical_user_ids_by_bounding_box_search": {"paths": ["/v2/historical_user_ids/boundingbox"], "methods": ["GET"]}, "v2_routes_get_historical_locations_by_user_ids": {"paths": ["/v2/historical/users"], "methods": ["GET"]}, "unmigrated": {"not_paths": ["/v1/current/users", "/v1/current/area", "/processed_location_history", "/api/v1/processed_location_history", "/v2/current/radius", "/v2/historical_user_ids/boundingbox"]}}, "bindings": {"accidents": ["v2_routes_get_historical_locations_by_user_ids"], "autonomous": ["v2_routes_get_locations_by_user_id", "current_search_current_locations_by_user_ids_post"], "autonomousworkers": ["current_search_current_locations_by_user_ids_post"], "cancels": ["v2_routes_get_locations_by_user_id", "current_search_current_locations_by_user_ids_get"], "claims": ["v2_routes_get_historical_locations_by_user_ids"], "coupons": ["current_search_current_locations_by_user_ids_post"], "couriermatcher": ["current_search_current_locations_by_user_ids_post"], "custodian": ["v2_routes_get_locations_by_user_id", "current_search_current_locations_by_user_ids_get"], "demand": ["v2_routes_get_locations_by_user_id", "current_search_current_locations_by_user_ids_post"], "demandkcl": ["v2_routes_get_locations_by_user_id"], "demandworkers": ["v2_routes_get_locations_by_user_id", "current_search_current_locations_by_user_ids_post"], "dispatch": ["search_v1_no_prefix_get_processed_location_history", "current_search_current_locations_by_user_ids_get", "v2_routes_get_locations_by_user_id", "search_v1_prefix_get_processed_location_history"], "driverearnings": ["v2_routes_get_locations_by_user_id", "current_search_current_locations_by_user_ids_get"], "drivermode": ["v2_routes_get_locations_by_user_id", "current_search_current_locations_by_user_ids_post"], "etawatch": ["v2_routes_get_locations_by_user_id", "current_search_current_locations_by_user_ids_get"], "fare": ["v2_routes_get_locations_by_user_id"], "geofencereporter": ["current_search_current_locations_by_area"], "graphql": ["v2_routes_get_locations_by_user_id"], "heliumnewworkers": ["search_v1_prefix_get_processed_location_history", "search_v1_no_prefix_get_processed_location_history"], "karma": ["v2_routes_get_locations_by_user_id", "current_search_current_locations_by_user_ids_get"], "karmaupdate": ["v2_routes_get_historical_locations_by_user_ids"], "lastmile": ["v2_routes_get_locations_by_radius_search"], "lastmilebatch": ["v2_routes_get_locations_by_radius_search"], "locationsbatch": ["v2_routes_get_locations_by_user_id"], "locationssearch": ["v2_routes_get_locations_by_user_id"], "matchingexecution": ["v2_routes_get_locations_by_user_id"], "matchingpipeline": ["v2_routes_get_locations_by_user_id"], "passengerqueues": ["v2_routes_get_locations_by_user_id"], "opstasks": ["v2_routes_get_locations_by_user_id"], "pickupoptimizer": ["current_search_current_locations_by_user_ids_get"], "predispatchjobs": ["v2_routes_get_locations_by_user_id"], "pricing": ["v2_routes_get_locations_by_user_id"], "pricingrealtimetaskmanager": ["v2_routes_get_locations_by_user_id", "current_search_current_locations_by_user_ids_post"], "ridemonitor": ["current_search_current_locations_by_user_ids_post", "v2_routes_get_locations_by_user_id"], "ridemonitorworkers": ["v2_routes_get_locations_by_user_id", "current_search_current_locations_by_user_ids_post"], "ridesapi": ["v2_routes_get_locations_by_user_id", "search_v1_no_prefix_get_processed_location_history", "current_search_current_locations_by_user_ids_get", "search_v1_prefix_get_processed_location_history"], "ridescheduler": ["v2_routes_get_locations_by_user_id", "current_search_current_locations_by_user_ids_get"], "ridestate": ["v2_routes_get_locations_by_user_id"], "routesapi": ["v2_routes_get_locations_by_user_id", "current_search_current_locations_by_user_ids_get"], "spoofingdetectionworkers": ["v2_routes_get_locations_by_user_id", "current_search_current_locations_by_user_ids_post"], "testpricingrttaskmanager": ["v2_routes_get_locations_by_user_id", "current_search_current_locations_by_user_ids_post"], "tom": ["v2_routes_get_historical_user_ids_by_bounding_box_search", "v2_routes_get_historical_locations_by_user_ids"], "transit": ["current_search_current_locations_by_user_ids_post"], "viewport": ["current_search_current_locations_by_area", "v2_routes_get_locations_by_user_id", "current_search_current_locations_by_user_ids_post", "v2_routes_get_locations_by_radius_search"], "*": ["unmigrated"]}}}}, {"services": [{"name": "locationsingest"}], "settings": {"redis_clusters": {"locationslo": {"aws_random_identifier": "vngjnv", "port": 6382, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationsmid": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationshi": {"aws_random_identifier": "vngjnv", "port": 6383, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationsgeo": {"aws_random_identifier": "vngjnv", "port": 6381, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}}, "authorization": {"permissions": {"POST_location_ingest": {"paths": ["/api/v1/locations", "/locations", "/v2/locations"], "methods": ["POST"]}}, "bindings": {"autonomous": ["POST_location_ingest"], "lastmile": ["POST_location_ingest"], "lastmilebatch": ["POST_location_ingest"], "transitbatch": ["POST_location_ingest"], "viewport": ["POST_location_ingest"]}}}}, {"services": [{"name": "locationsmapmatch"}], "settings": {"authorization": {"permissions": {"GET_map_match": {"paths": ["/api/v1/locations/map_match*", "/locations/map_match*"], "methods": ["GET"]}, "GET_map_match_v2": {"paths": ["/v2/locations/get_map_match"], "methods": ["GET"]}, "POST_map_match": {"paths": ["/api/v1/locations/map_match", "/locations/map_match"], "methods": ["POST"]}}, "bindings": {"drivercomp": ["GET_map_match"], "fare": ["GET_map_match"], "karma": ["GET_map_match", "GET_map_match_v2"], "graphql": ["GET_map_match"], "payapi": ["GET_map_match"], "ridesapi": ["GET_map_match", "POST_map_match"], "tolls": ["GET_map_match", "POST_map_match"], "tom": ["GET_map_match"], "wwwpayxpfe": ["GET_map_match"]}}}}, {"services": [{"name": "locationsrouteline"}], "settings": {"redis": {"routelinemultiredis": {"port": 6386, "op_timeout_ms": 1250, "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}, "ring_hash_lb_config": {"minimum_ring_size": 256000}, "request_mirror_policy": [{"cluster": "locrouteline", "runtime_default_percentage": 1, "runtime_key": "locrouteline"}]}}, "redis_clusters": {"locrouteline": {"aws_random_identifier": "vngjnv", "port": 6384, "op_timeout_ms": 1250, "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}, "request_mirror_policy": [{"cluster": "routelinemultiredis", "runtime_default_percentage": 1, "runtime_key": "locrouteline"}]}}}}, {"services": [{"name": "locationsregionsearch"}], "settings": {"redis_clusters": {"locationslo": {"aws_random_identifier": "vngjnv", "port": 6382, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationsmid": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationshi": {"aws_random_identifier": "vngjnv", "port": 6383, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationsgeo": {"aws_random_identifier": "vngjnv", "port": 6381, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}}, "authorization": {"permissions": {"GET_v1_region_search": {"paths": ["/v1/locations_for_region"], "methods": ["GET"]}, "GET_v2_region_search": {"paths": ["/v2/current/region"], "methods": ["GET"]}}, "bindings": {"dispatch": ["GET_v1_region_search", "GET_v2_region_search"], "dispatchgeofenceworkers": ["GET_v1_region_search", "GET_v2_region_search"], "dispatchglobalmatchingworkers": ["GET_v1_region_search", "GET_v2_region_search"], "dispatchmatchingworkerssmall": ["GET_v1_region_search", "GET_v2_region_search"], "escrowdriverpay": ["GET_v1_region_search"], "escrowdriverpaykcl": ["GET_v1_region_search"], "lastmile": ["GET_v2_region_search"], "lastmilebatch": ["GET_v2_region_search"], "locationsmonitorworker": ["GET_v1_region_search", "GET_v2_region_search"], "marketdata": ["GET_v2_region_search"], "matchingpipeline": ["GET_v2_region_search"], "opstasks": ["GET_v2_region_search"], "pricing": ["GET_v2_region_search"], "pricingrealtimetaskmanager": ["GET_v2_region_search"], "pricingworker": ["GET_v2_region_search"], "pricingworkergpu": ["GET_v2_region_search"], "testpricingrttaskmanager": ["GET_v2_region_search"], "viewport": ["GET_v1_region_search", "GET_v2_region_search"], "devptmodelexectaskmanager": ["GET_v2_region_search"], "ptmodelexectaskmanager": ["GET_v2_region_search"]}}}}, {"services": [{"name": "locationsrtmmprocess"}], "settings": {"redis_clusters": {"locationslo": {"aws_random_identifier": "vngjnv", "port": 6382, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationsmid": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationshi": {"aws_random_identifier": "vngjnv", "port": 6383, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}}}}, {"services": [{"name": "locationsrtmmworker"}], "settings": {"redis_clusters": {"locationslo": {"aws_random_identifier": "vngjnv", "port": 6382, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationsmid": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationshi": {"aws_random_identifier": "vngjnv", "port": 6383, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}}}}, {"services": [{"name": "locationsrtmmspworker"}], "settings": {"redis_clusters": {"locationslo": {"aws_random_identifier": "vngjnv", "port": 6382, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationsmid": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationshi": {"aws_random_identifier": "vngjnv", "port": 6383, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}}}}, {"services": [{"name": "locationsworkers"}], "settings": {"redis_clusters": {"locationslo": {"aws_random_identifier": "vngjnv", "port": 6382, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationsmid": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationshi": {"aws_random_identifier": "vngjnv", "port": 6383, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}}}}, {"services": [{"name": "locationsmonitorworker"}], "settings": {"redis_clusters": {"locationslo": {"aws_random_identifier": "vngjnv", "port": 6382, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}}}}, {"services": [{"name": "locationsshadow"}], "settings": {"redis_clusters": {"locationslo": {"aws_random_identifier": "vngjnv", "port": 6382, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationsmid": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationshi": {"aws_random_identifier": "vngjnv", "port": 6383, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationsgeo": {"aws_random_identifier": "vngjnv", "port": 6381, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}}, "internal_hosts": {"locationsapi": null, "ridesapi": null}, "authorization": {"permissions": {"v2_routes_get_locations_by_user_id": {"paths": ["/v2/current/users"], "methods": ["GET"]}, "unmigrated": {"not_paths": ["/v2/current/users"]}}, "bindings": {"locations": ["v2_routes_get_locations_by_user_id"], "*": ["unmigrated"]}}}}]}}, "logging": {"locations": {"fields": {"distance": "float", "distance_method": "keyword", "duration": "long", "error_message": "keyword", "grpc_error_code_name": "keyword", "impl_method": "keyword", "initial_len": "long", "last_service_call_site": "keyword", "locations": "keyword", "map_match_request": "keyword", "method": "keyword", "removed": "long", "request": "keyword", "request_end_region": "keyword", "request_start_region": "keyword", "route_name": "keyword"}}, "locationsasync": {"fields": {"code": "long", "distance": "float", "distance_method": "keyword", "duration": "long", "error_message": "keyword", "initial_len": "long", "last_service_call_site": "keyword", "live_distance": "float", "live_model": "keyword", "live_model_has_breakage": "boolean", "locations": "keyword", "lower_bound": "long", "map_match_request": "keyword", "method": "keyword", "nsq_data": "keyword", "nsq_num": "long", "nsq_num_retries": "long", "nsq_topic": "keyword", "removed": "long", "request": "keyword", "request_end_region": "keyword", "request_start_region": "keyword", "response": {"error": "keyword"}, "shadow_distance": "float", "shadow_model": "keyword", "shadow_model_has_breakage": "boolean", "upper_bound": "long"}}, "locationsingest": {"fields": {"exception": "keyword", "func_name": "keyword", "impl_method": "keyword", "invalid_locs": "keyword", "last_drop_timestamp_ms": "keyword", "last_service_call_site": "keyword", "lat": "float", "lng": "float", "location": "keyword", "locations": "keyword", "locations_count": "long", "route_name": "keyword", "user_id": "keyword"}}, "locationskafkarawconsumer": {"fields": {"method": "keyword", "new_locations": "keyword", "num_locations": "long", "status": "long", "viterbi_lattice": {"compressed": {"data": "keyword", "transforms": "keyword"}, "format_version": "long"}, "viterbi_lattice_size": "long"}}, "locationsmapmatch": {"fields": {"distance": "float", "distance_method": "keyword", "duration": "long", "error_message": "keyword", "initial_len": "long", "locations": "keyword", "map_match_request": "keyword", "method": "keyword", "removed": "long", "request": "keyword", "request_end_region": "keyword", "request_start_region": "keyword"}}, "locationspersist": {"fields": {"exception": "keyword", "impl_method": "keyword", "locations": "keyword", "route_name": "keyword", "user_id": "keyword"}}, "locationsregionsearch": {"fields": {"impl_method": "keyword", "last_service_call_site": "keyword", "route_name": "keyword"}}, "locationsrtmmprocess": {"fields": {"func_name": "keyword", "input_locations": "keyword", "job_func": "keyword", "method": "keyword", "model": "keyword", "normalized_deduped_timestamps": "long", "request_url": "keyword"}}, "locationsrtmmworker": {"fields": {"func_name": "keyword", "input_locations": "keyword", "job_func": "keyword", "method": "keyword", "model": "keyword", "normalized_deduped_timestamps": "long", "request_url": "keyword"}}, "locationsrtmmspworker": {"fields": {"func_name": "keyword", "input_locations": "keyword", "job_func": "keyword", "method": "keyword", "model": "keyword", "normalized_deduped_timestamps": "long", "request_url": "keyword"}}, "locationsworkers": {"fields": {"client_class_name": "keyword", "code": "long", "error_message": "keyword", "func_name": "keyword", "haversine_distance": "float", "input_locations": "keyword", "job_func": "keyword", "lat": "long", "live_lat": "float", "live_lng": "float", "lng": "long", "max_distance": "float", "model": "keyword", "normalized_deduped_timestamps": "long", "original_lat": "float", "original_lng": "float", "projection_distance": "float", "request_url": "keyword", "request_v1": {"max_distance": "float", "profile": "keyword", "source": {"bearing": {"bearing": "float", "range": "float"}, "coordinate": {"lat": "float", "lng": "float"}}}, "request_v2": "keyword", "response": {"error": "keyword"}, "service": "keyword", "shadow_lat": "float", "shadow_lng": "float", "source_bearing": "float", "source_lat": "float", "source_lng": "float", "step_diff": "keyword", "step_location_diff": "keyword", "v1_choice_distance": "float", "v1_choice_duration": "float", "v1_choice_num_legs": "long", "v1_choice_polyline": "keyword", "v2_choice_distance": "float", "v2_choice_duration": "float", "v2_choice_num_legs": "long", "v2_choice_polyline": "keyword"}}, "locationsmonitorworker": {"fields": {"num_locations": "integer", "model_requested": "keyword", "model": "keyword", "region_code": "keyword"}}}, "version": "fce8c138e7c39ff0bb78e295a7a755d960097ff2", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "locationsapi": {"name": "locationsapi", "description": "Compositional service for locations related API calls.", "repository": "git@github.com:lyft/locationsapi.git", "slack": "#locations", "team_email": "locations@lyft.com", "pagerduty_escalation_policy": "Locations", "image_type": "service", "service_tier": 0, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:e6298e7b6ba0c062918e656d651de3ad48092f2a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/locationsapi", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "locationsapi.legacy"]}, {"name": "integration", "members": ["dispatch.integration", "dispatchavailability.dev", "locations.dev", "locationsapi.dev", "rides.dev", "users.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "locationsapi.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "locationsapi.integration", "container": "locationsapi.legacy", "framework": "pytest", "coverage": false, "autotrigger": false}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "locationsapi.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "locationsapi.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "locationsapi"}], "common_settings": {"internal_hosts": {"locations": null, "rides": null, "tcs": null}}}}, "version": "db85fe6e27a4884fc3a5409e28647226930a59b2", "images": [{"parent": {"name": "opsbase", "version": "e6298e7b6ba0c062918e656d651de3ad48092f2a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "e6298e7b6ba0c062918e656d651de3ad48092f2a", "sub_image": null, "external": false}}, "locationsint": {"name": "locationsint", "description": "Web frontend for locations tools to be accessed through TOM", "repository": "git@github.com:lyft/locationsint.git", "image_type": "service", "service_tier": 3, "slack": "#locations", "team_email": "locations@lyft.com", "pagerduty_escalation_policy": "devnull", "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "locationsint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "locationsint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "locationsint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null}, "internal_hosts": {"acl": null, "privacyaudit": null}}}}, "version": "4746571762989a3e610bf276328f0f28e83dd62c", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "locationsmodeleval": {"name": "locationsmodeleval", "description": "Library for evaluating Locations models in Jupyter.", "repository": "git@github.com:lyft/python-locations-model-eval.git", "slack": "#locations", "team_email": "locations@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipythonlibrary:dac9c3f1196043ad2d468e7ceb2fe03ad70ee117", "packages": ["libpq-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "a90545535ebcf3fd3e53943b0d9c48bb8ab2a388", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "dac9c3f1196043ad2d468e7ceb2fe03ad70ee117", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "dac9c3f1196043ad2d468e7ceb2fe03ad70ee117", "sub_image": null, "external": false}}, "locationssearch": {"name": "locationssearch", "description": "locationssearch", "repository": "git@github.com:lyft/locationssearch.git", "pagerduty_escalation_policy": "Eliot Walker", "team_email": "eliot@lyft.com", "service_tier": 2, "slack": "#locations", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- locationssearch", "sub_image": "k8s", "limits": {"cpu": 0.5, "memory": "50Mi"}}], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:c1e2d5c25643b7ca394caded92a0d09d2896b2fc", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "facets": [{"name": "main", "member": "locationssearch.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 2}}}}, {"name": "canary", "member": "locationssearch.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "locationssearch.legacy", "idl.server"]}, {"name": "integration", "members": ["locationssearch.dev", "redis.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "locationssearch.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "command": "pre-commit run --all-files --show-diff-on-failure", "sub_image": "precommit"}, {"name": "integration", "type": "execution", "group": "locationssearch.integration", "container": "locationssearch.legacy", "command": "make integration"}, {"name": "coverage_files", "type": "jailed", "command": "make -f Makefile-k8s coverage_files", "reports": {"cobertura": "build/coverage.xml"}, "sub_image": "k8s"}], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "automatic": true, "orca": [{"region": "iad"}], "bake_time_minutes": 5}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "automatic": false, "orca": [{"region": "iad"}], "bake_time_minutes": 5}, {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}, "automatic": false, "orca": [{"region": "iad"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "locationssearch"}], "common_settings": {"redis_clusters": {"locationsmid": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationsgeo": {"aws_random_identifier": "vngjnv", "port": 6381, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationslo": {"aws_random_identifier": "vngjnv", "port": 6382, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}, "locationshi": {"aws_random_identifier": "vngjnv", "port": 6383, "op_timeout_ms": 1250, "read_policy": "ANY", "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}}, "authorization": {"permissions": {"get_locations_by_user_id": {"paths": ["/pb.lyft.locations.v2.LocationsV2/GetLocationsByUserId"]}}, "bindings": {"locations": ["get_locations_by_user_id"], "locationsshadow": ["get_locations_by_user_id"]}}}}}, "logging": {"locationssearch": {"fields": {"requestId": "keyword"}}}, "version": "bddb68be17fcd3cb54d245b52fe6caeddef39f32", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "c1e2d5c25643b7ca394caded92a0d09d2896b2fc", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "locationswatch": {"name": "locationswatch", "description": "realtime locations accuracy watcher", "repository": "git@github.com:lyft/locationswatch.git", "image_type": "service", "service_tier": 3, "slack": "#locations", "pagerduty_escalation_policy": "LocationsAccuacy", "team_email": "locations@lyft.com", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/locationswatch", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "locationswatch.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "locationswatch.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "execution", "group": "locationswatch.dev", "container": "locationswatch.legacy", "command": "make test_unit"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "orca": [{"region": "iad"}], "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}], "envoy": {"profile": "python", "settings": {"services": [{"name": "locationswatch"}], "common_settings": {"external_hosts": {"firehose_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"locationswatch": {"fields": {"rt2e": "keyword", "ride_id": "keyword", "user_id": "keyword", "v2h": "keyword", "request_missing": "boolean", "assessment_point_metric_list_empty": "boolean", "request_metadata_missing": "boolean", "ride_id_missing": "boolean", "user_id_missing": "boolean", "metrics_namespace_missing": "boolean", "rt2dk": "keyword", "failed_record_count": "long", "attempt_num": "long", "impl_method": "keyword", "route_name": "keyword"}}}, "facets": [{"name": "main", "member": "locationswatch.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 3, "max_size": 3}, "production": {"min_size": 5, "max_size": 150}}}}, {"name": "canary", "member": "locationswatch.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "version": "37297999531a0dd0b5333b27e3d828ceafa3e387", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "locationswindow": {"name": "locationswindow", "description": "locationswindow", "repository": "git@github.com:lyft/locationswindow.git", "builder": {"name": "s2i", "params": {"builder": "lyft/s2istreamingplatformflink:sp20.f2556c4c9097b89daf9b854ade489f42003b63f1"}}, "containers": [{"name": "service", "command": "/docker-entrypoint.sh local"}], "groups": [{"name": "dev", "members": ["control.dev", "locationswatch.dev", "kinesis.server", "locationswindow.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "locationswindow.dev"}, {"name": "unit", "type": "execution", "group": "locationswindow.dev", "container": "locationswindow.service", "command": "mvn test --settings /settings.xml"}, {"name": "integration", "type": "execution", "group": "locationswindow.dev", "container": "locationswindow.service", "command": "mvn verify -P '!disable-integration-tests' --settings /settings.xml", "autotrigger": false}], "slack": "#locations", "pagerduty_escalation_policy": "LocationsAccuracy", "team_email": "locations-eng@lyft.com", "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}]}], "languages": ["bash", "java"], "image_type": "service", "streamingplatform": {"kubernetes": true}, "envoy": {"profile": "python", "settings": {"services": [{"name": "locationswindow"}, {"name": "locationswindowjobmanager"}, {"name": "locationswindowtaskmanager"}], "common_settings": {"local_service": {"ingress_ports": [9211]}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"locationswatch": null}}}}, "service_tier": 3, "version": "94fe3fcbf120a69396fd40e519db51787fe62d9e", "images": [{"parent": {"name": "s2istreamingplatformflink", "version": "f2556c4c9097b89daf9b854ade489f42003b63f1", "sub_image": "sp20", "external": false}, "sub_image": null}], "parent": {"name": "s2istreamingplatformflink", "version": "f2556c4c9097b89daf9b854ade489f42003b63f1", "sub_image": "sp20", "external": false}}, "locationsworkflows": {"name": "locationsworkflows", "description": "locations", "repository": "git@github.com:lyft/locationsworkflows.git", "image_type": "flyteworkflow", "languages": ["python"], "credentials": true, "containers": [{"name": "legacy", "command": "/bin/bash", "provision": "echo \"what hath god wrought\""}, {"name": "venv", "command": "service_venv bash"}], "groups": [{"name": "dev", "members": ["control.dev", "locationsworkflows.legacy"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "locationsworkflows.dev", "container": "locationsworkflows.legacy", "command": "service_venv mbadmin register-workflows new"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "pagerduty_escalation_policy": "Locations", "team_email": "locations@lyft.com", "slack": "#locations", "slack_deploy_notification_environments": ["production"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "194c2695762e977cd0e32af55c12d78e674453c2", "images": [{"parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}}, "locspersister": {"name": "locspersister", "description": "Flink job to persist raw locations from Kafka to DynamoDB", "repository": "git@github.com:lyft/locspersister.git", "credentials": true, "builder": {"name": "s2i", "params": {"builder": "lyft/s2istreamingplatformflink:sp20.f2556c4c9097b89daf9b854ade489f42003b63f1"}}, "containers": [{"name": "service", "command": "/docker-entrypoint.sh local"}], "groups": [{"name": "dev", "members": ["control.dev", "locspersister.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "locspersister.dev"}, {"name": "unit", "type": "execution", "group": "locspersister.dev", "container": "locspersister.service", "command": "mvn test --settings /settings.xml", "autotrigger": false}, {"name": "integration", "type": "execution", "group": "locspersister.dev", "container": "locspersister.service", "command": "mvn verify -P '!disable-integration-tests'", "autotrigger": false}], "slack": "#locations", "team_email": "locations@lyft.com", "pagerduty_escalation_policy": "Locations", "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}]}], "languages": ["bash", "java"], "image_type": "flinkjob", "service_tier": 1, "streamingplatform": {"kubernetes": true, "applications": ["locspersister"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "locspersister"}, {"name": "locspersisterjobmanager"}, {"name": "locspersistertaskmanager"}], "common_settings": {"local_service": {"ingress_ports": [9211]}, "internal_hosts": {"locationspersist": null}, "external_hosts": {"kinesis_iad": null}}}}, "version": "d1f54a1cc31c04ef474c52b108876a8e63ec83a7", "images": [{"parent": {"name": "s2istreamingplatformflink", "version": "f2556c4c9097b89daf9b854ade489f42003b63f1", "sub_image": "sp20", "external": false}, "sub_image": null}], "parent": {"name": "s2istreamingplatformflink", "version": "f2556c4c9097b89daf9b854ade489f42003b63f1", "sub_image": "sp20", "external": false}}, "logagent": {"team_email": "observability-team@lyft.com", "tests": [{"container": "logagent.legacy", "command": "make test_unit", "type": "execution", "name": "unit", "group": "logagent.dev"}, {"container": "logagent.legacy", "command": "make test_integration", "type": "execution", "name": "integration", "group": "logagent.dev"}], "report_ci": true, "name": "logagent", "repository": "git@github.com:lyft/logagent.git", "deploy": [{"legacy": true, "name": "development"}, {"legacy": true, "name": "staging"}, {"legacy": true, "name": "canary"}, {"legacy": true, "name": "production"}], "description": "I barf logs for a living", "pagerduty_escalation_policy": "Observability", "audit_blacklist": ["envoyAudit"], "version": "4961718c3167df7386a63a5a184fc2c4f79c9a88", "parent": {"version": "806bc1330d57d9d20738f5cffc98ee031fa5760e", "name": "opsbase", "buildargs": ["IAM_ROLE"], "external": false}, "groups": [{"name": "dev", "members": ["control.dev", "logagent.legacy"]}], "credentials": false, "containers": [{"command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "name": "legacy"}], "slack": "#observability"}, "loggingtools": {"name": "loggingtools", "description": "Service or host that provides tools for logging operation", "repository": "git@github.com:lyft/loggingtools.git", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "team_email": "observability@lyft.com", "pagerduty_escalation_policy": "Observability", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "loggingtools.legacy"]}, {"name": "service_group", "members": ["loggingtools.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "loggingtools.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "legacy": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "loggingtools"}]}}, "version": "18d9420006891b503137033ef05a6f1bff028de7", "images": [{"parent": {"name": "opsbase", "version": "06ce4a2cae6232fe3834c5c22664d30e640a62fd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "06ce4a2cae6232fe3834c5c22664d30e640a62fd", "sub_image": null, "external": false}}, "logingest": {"name": "logingest", "description": "Flink streaming application that consumes staging log message from Kafka topic and pushes to sink such as Elasticsearch", "repository": "git@github.com:lyft/logingest.git", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "team_email": "obs-analysis@lyft.com", "pagerduty_escalation_policy": "Observability-Analysis", "languages": ["bash", "java"], "image_type": "service", "service_tier": 2, "streamingplatform": {"kubernetes": true, "applications": [{"namespace": "lyft-logging", "name": "logingest"}], "stages": {"logingestst-staging": {"configuration": "logingestst-staging.jsonnet"}, "logdlqst-staging": {"configuration": "logdlqst-staging.jsonnet"}, "logdumpst-staging": {"configuration": "logdumpst-staging.jsonnet"}, "logingestpr-staging": {"configuration": "logingestpr-staging.jsonnet"}, "logdlqpr-staging": {"configuration": "logdlqpr-staging.jsonnet"}, "logdumppr-staging": {"configuration": "logdumppr-staging.jsonnet"}, "logingestst-production": {"configuration": "logingestst-production.jsonnet"}, "logdlqst-production": {"configuration": "logdlqst-production.jsonnet"}, "logdumpst-production": {"configuration": "logdumpst-production.jsonnet"}, "logingestobsst-production": {"configuration": "logingestobsst-production.jsonnet"}, "logdlqobsst-production": {"configuration": "logdlqobsst-production.jsonnet"}, "logdumpobsst-production": {"configuration": "logdumpobsst-production.jsonnet"}, "logingestpr-production": {"configuration": "logingestpr-production.jsonnet"}, "logdlqpr-production": {"configuration": "logdlqpr-production.jsonnet"}, "logdumppr-production": {"configuration": "logdumppr-production.jsonnet"}, "logingestobspr-production": {"configuration": "logingestobspr-production.jsonnet"}, "logdlqobspr-production": {"configuration": "logdlqobspr-production.jsonnet"}, "logdumpobspr-production": {"configuration": "logdumpobspr-production.jsonnet"}}}, "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}, [{"name": "logingestst-staging", "legacy": false, "automatic": false}, {"name": "logdlqst-staging", "legacy": false, "automatic": false}, {"name": "logdumpst-staging", "legacy": false, "automatic": false}, {"name": "logingestpr-staging", "legacy": false, "automatic": false}, {"name": "logdlqpr-staging", "legacy": false, "automatic": false}, {"name": "logdumppr-staging", "legacy": false, "automatic": false}], {"name": "production", "legacy": false, "automatic": false, "orca": [{"region": "iad"}]}, [{"name": "logingestst-production", "legacy": false, "automatic": false}, {"name": "logdlqst-production", "legacy": false, "automatic": false}, {"name": "logdumpst-production", "legacy": false, "automatic": false}, {"name": "logingestobsst-production", "legacy": false, "automatic": false}, {"name": "logdlqobsst-production", "legacy": false, "automatic": false}, {"name": "logdumpobsst-production", "legacy": false, "automatic": false}, {"name": "logingestpr-production", "legacy": false, "automatic": false}, {"name": "logdlqpr-production", "legacy": false, "automatic": false}, {"name": "logdumppr-production", "legacy": false, "automatic": false}, {"name": "logingestobspr-production", "legacy": false, "automatic": false}, {"name": "logdlqobspr-production", "legacy": false, "automatic": false}, {"name": "logdumpobspr-production", "legacy": false, "automatic": false}]], "builder": {"name": "s2i", "params": {"builder": "lyft/s2istreamingplatformflink:sp20.f2556c4c9097b89daf9b854ade489f42003b63f1"}}, "containers": [{"name": "main", "command": "/docker-entrypoint.sh local"}], "logging": {"logingest": {"fields": {"error": "text", "error_reason": "text", "error_type": "keyword", "raw_event": "text", "source": "keyword", "status": "integer", "bulk_result_response_code": "integer", "bulk_result_error_message": "text", "exception_stacktrace": "text", "es_route": "keyword"}}}, "version": "f6fac4a3ed29e4dfeabc57edbefd7f7ce2b70e71", "images": [{"parent": {"name": "s2istreamingplatformflink", "version": "f2556c4c9097b89daf9b854ade489f42003b63f1", "sub_image": "sp20", "external": false}, "sub_image": null}], "parent": {"name": "s2istreamingplatformflink", "version": "f2556c4c9097b89daf9b854ade489f42003b63f1", "sub_image": "sp20", "external": false}}, "logingestion": {"name": "logingestion", "description": "Flink streaming application that consumes log message from Kafka topic and pushes to sink such as Elasticsearch", "repository": "git@github.com:lyft/logingestion.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kafka.server", "elasticsearch6.server", "logingestion.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "logingestion.dev"}, {"name": "integration", "type": "execution", "group": "logingestion.dev", "container": "logingestion.legacy", "command": "mvn verify -P '!disable-integration-tests'"}], "slack": "#observability", "team_email": "observability@lyft.com", "pagerduty_escalation_policy": "Observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "languages": ["bash", "java"], "image_type": "service", "service_tier": 3, "streamingplatform": {"version": "1.2-SNAPSHOT", "jobmanagers": [{"name": "logingestion", "jobs": [{"name": "logging-to-es", "jar": "logingestion-1.0.0-SNAPSHOT.jar", "class": "com.lyft.app.logging.LoggingToElasticsearch", "description": null, "development": {"parallelism": 1}, "staging": {"parallelism": 3}, "production": {"parallelism": 1}}]}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "logingestion"}]}}, "version": "da2b4e95c93214524f7793a3f5da6a2ea0c3ebfd", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "logingestionlib": {"name": "logingestionlib", "description": "Flink streaming library that consumes log message from Kafka topic and pushes to sink such as Elasticsearch", "repository": "git@github.com:lyft/logingestionlib.git", "image_type": "library", "service_tier": 3, "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-logging-dev"}, "pr_merge": {"slack": "#obs-logging-dev"}}, "team_email": "obs-analysis@lyft.com", "pagerduty_escalation_policy": "Observability-Analysis", "languages": ["java"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ijava:java8.1614d45ed717846b2d159fad53e142a84d2f2139"}}]}}, "deploy": [{"name": "production", "role": "java-production-iad-deploy", "legacy": true}], "version": "9e1a67256a7240e8da04984e917992d9a661896e", "images": [{"parent": {"name": "s2ijava", "version": "1614d45ed717846b2d159fad53e142a84d2f2139", "sub_image": "java8", "external": false}, "sub_image": null}], "parent": {"name": "s2ijava", "version": "1614d45ed717846b2d159fad53e142a84d2f2139", "sub_image": "java8", "external": false}}, "logingestobspr": {"name": "logingestobspr", "description": "Flink streaming application that consumes observability production log message from Kafka topic and pushes to sink such as Elasticsearch", "repository": "git@github.com:lyft/logingestobspr.git", "credentials": true, "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-logging-dev"}, "pr_merge": {"slack": "#obs-logging-dev"}}, "team_email": "observability@lyft.com", "pagerduty_escalation_policy": "Observability", "languages": ["bash", "java"], "image_type": "service", "service_tier": 2, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kafka.server", "elasticsearch6.server", "logingestobspr.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "logingestobspr.dev"}, {"name": "integration", "type": "execution", "group": "logingestobspr.dev", "container": "logingestobspr.legacy", "command": "mvn verify -P '!disable-integration-tests'"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "streamingplatform": {"version": "1.2-SNAPSHOT", "flink_config_overrides": [{"key": "state.backend", "value": "filesystem"}], "jobmanagers": [{"name": "logingestobspr", "jobs": [{"name": "logingestobspr", "jar": "logingestobspr-1.0.0-SNAPSHOT.jar", "class": "com.lyft.app.logging.LoggingToElasticsearch", "description": "Flink streaming application that consumes observability production log message from Kafka topic and pushes to sink such as Elasticsearch", "development": {"parallelism": 1}, "staging": {"parallelism": 1}, "production": {"parallelism": 15}}]}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "logingestobspr"}, {"name": "logingestobsprjobmanager"}, {"name": "logingestobsprtaskmanager"}]}}, "version": "d0f899c240b5f01ff1385030699fb602fa1c9c8b", "images": [{"parent": {"name": "opsbase", "version": "431b58e72ff19dbc9960ab39037ad568711359fa", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "431b58e72ff19dbc9960ab39037ad568711359fa", "sub_image": null, "external": false}}, "logingestobsst": {"name": "logingestobsst", "description": "Flink streaming application that consumes observability staging log message from Kafka topic and pushes to sink such as Elasticsearch", "repository": "git@github.com:lyft/logingestobsst.git", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-logging-dev"}, "pr_merge": {"slack": "#obs-logging-dev"}}, "team_email": "observability@lyft.com", "pagerduty_escalation_policy": "Observability", "languages": ["bash", "java"], "image_type": "service", "service_tier": 2, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kafka.server", "elasticsearch6.server", "logingestobsst.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "logingestobsst.dev"}, {"name": "integration", "type": "execution", "group": "logingestobsst.dev", "container": "logingestobsst.legacy", "command": "mvn verify -P '!disable-integration-tests'"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "streamingplatform": {"version": "1.2-SNAPSHOT", "flink_config_overrides": [{"key": "state.backend", "value": "filesystem"}], "jobmanagers": [{"name": "logingestobsst", "jobs": [{"name": "logingestobsst", "jar": "logingestobsst-1.0.0-SNAPSHOT.jar", "class": "com.lyft.app.logging.LoggingToElasticsearch", "description": "Flink streaming application that consumes observability staging log message from Kafka topic and pushes to sink such as Elasticsearch", "development": {"parallelism": 1}, "staging": {"parallelism": 1}, "production": {"parallelism": 4}}]}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "logingestobsst"}, {"name": "logingestobsstjobmanager"}, {"name": "logingestobssttaskmanager"}]}}, "version": "44f5c38a04a3702b9763717eae2a8ae02dc2ab10", "images": [{"parent": {"name": "opsbase", "version": "49dd0dfae9cc8fb0ead221682d5a4e774b7fc089", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "49dd0dfae9cc8fb0ead221682d5a4e774b7fc089", "sub_image": null, "external": false}}, "logingestpr": {"name": "logingestpr", "description": "Flink streaming application that consumes production log message from Kafka topic and pushes to sink such as Elasticsearch", "repository": "git@github.com:lyft/logingestpr.git", "credentials": true, "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-logging-dev"}, "pr_merge": {"slack": "#obs-logging-dev"}}, "team_email": "observability@lyft.com", "pagerduty_escalation_policy": "Observability", "languages": ["java", "bash"], "image_type": "service", "service_tier": 2, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kafka.server", "elasticsearch6.server", "logingestpr.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "logingestpr.dev"}, {"name": "integration", "type": "execution", "group": "logingestpr.dev", "container": "logingestpr.legacy", "command": "mvn verify -P '!disable-integration-tests'"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": false}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "streamingplatform": {"version": "1.2-SNAPSHOT", "flink_config_overrides": [{"key": "state.backend", "value": "filesystem"}], "jobmanagers": [{"name": "logingestpr", "jobs": [{"name": "logingestpr", "jar": "logingestpr-1.0.0-SNAPSHOT.jar", "class": "com.lyft.app.logging.LoggingToElasticsearch", "description": "Flink streaming application that consumes production log message from Kafka topic and pushes to sink such as Elasticsearch", "development": {"parallelism": 1}, "staging": {"parallelism": 4}, "production": {"parallelism": 80}}]}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "logingestpr"}, {"name": "logingestprjobmanager"}, {"name": "logingestprtaskmanager"}]}}, "version": "78db176ae17e469004562bb5be1a987d5fba7641", "images": [{"parent": {"name": "opsbase", "version": "431b58e72ff19dbc9960ab39037ad568711359fa", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "431b58e72ff19dbc9960ab39037ad568711359fa", "sub_image": null, "external": false}}, "logingestst": {"name": "logingestst", "description": "Flink streaming application that consumes staging log message from Kafka topic and pushes to sink such as Elasticsearch", "repository": "git@github.com:lyft/logingestst.git", "credentials": true, "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-logging-dev"}, "pr_merge": {"slack": "#obs-logging-dev"}}, "team_email": "observability@lyft.com", "pagerduty_escalation_policy": "Observability", "languages": ["bash", "java"], "image_type": "service", "service_tier": 2, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kafka.server", "elasticsearch6.server", "logingestst.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "logingestst.dev"}, {"name": "integration", "type": "execution", "group": "logingestst.dev", "container": "logingestst.legacy", "command": "mvn verify -P '!disable-integration-tests'"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "streamingplatform": {"version": "1.2-SNAPSHOT", "flink_config_overrides": [{"key": "state.backend", "value": "filesystem"}], "jobmanagers": [{"name": "logingestst", "jobs": [{"name": "logingestst", "jar": "logingestst-1.0.0-SNAPSHOT.jar", "class": "com.lyft.app.logging.LoggingToElasticsearch", "description": "Ingests logs from staging traffic", "development": {"parallelism": 1}, "staging": {"parallelism": 1}, "production": {"parallelism": 15}}]}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "logingestst"}, {"name": "logingeststjobmanager"}, {"name": "logingeststtaskmanager"}]}}, "version": "defe55b34ecdb84b4fd1fc346f27c3bb48a090bb", "images": [{"parent": {"name": "opsbase", "version": "49dd0dfae9cc8fb0ead221682d5a4e774b7fc089", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "49dd0dfae9cc8fb0ead221682d5a4e774b7fc089", "sub_image": null, "external": false}}, "logistics": {"name": "logistics", "description": "TODO short description of the service", "repository": "git@github.com:lyft/logistics.git", "credentials": true, "image_type": "service", "service_tier": 1, "languages": ["python"], "pagerduty_escalation_policy": "Driver Applicant Onboarding", "team_email": "do-funnel@lyft.com", "slack": "#do-eng-all", "notification_overrides": {"behind_notifications": {"slack": "#do-funnel-bots"}, "pr_merge": {"slack": "#do-funnel-bots"}, "deploy": {"slack": "#do-funnel-bots"}, "deploy_failure": {"slack": "#do-funnel-bots"}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "buildargs": ["PY3_MIGRATE=true"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 80}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/logistics", "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "limits": {"cpu": 4, "memory": "7.5Gi"}}, {"name": "owdstatusupdate", "command": "dumb-init -- service_venv python manage.py owd_status_update --save", "workdir": "/code/logistics", "sub_image": "k8s"}, {"name": "owdordercreate", "command": "dumb-init -- service_venv python manage.py owd_order_create --save", "workdir": "/code/logistics", "sub_image": "k8s"}, {"name": "owdreturnreport", "command": "dumb-init -- service_venv python manage.py owd_return_report --save", "workdir": "/code/logistics", "sub_image": "k8s"}, {"name": "shipposhippingupdate", "command": "dumb-init -- service_venv python manage.py shippo_shipping_update", "workdir": "/code/logistics", "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["control.dev", "logistics.legacy", "dynamodb.dev", "jobscheduler.dev", "envoy.server", "users.dev", "supply.dev"]}, {"name": "service_group", "members": ["logistics.service"]}], "tests": [{"name": "unit", "type": "jailed", "command": "env TEST_TAGS=\"not unit_legacy\" make test_unit_jail"}, {"name": "integration", "group": "logistics.dev", "type": "execution", "container": "logistics.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "command": "make test_unit", "container": "logistics.legacy", "group": "logistics.dev", "virtualenv": "service_venv"}], "facets": [{"name": "main", "member": "logistics.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 3}}}}, {"name": "canary", "member": "logistics.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "owdstatusupdate", "member": "logistics.owdstatusupdate", "type": "cron", "schedule": "0 1 * * *", "concurrency_policy": "Forbid"}, {"name": "owdordercreate", "member": "logistics.owdordercreate", "type": "cron", "schedule": "0 15,16,17,18,19 * * *", "concurrency_policy": "Forbid"}, {"name": "owdreturnreport", "member": "logistics.owdreturnreport", "type": "cron", "schedule": "0 13 * * *", "concurrency_policy": "Forbid"}, {"name": "shipposhippingupdate", "member": "logistics.shipposhippingupdate", "type": "cron", "schedule": "@hourly", "concurrency_policy": "Forbid"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, [{"name": "production-us-east-1d", "availability_zone": "us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}, {"facet": "owdstatusupdate"}, {"facet": "owdordercreate"}, {"facet": "owdreturnreport"}, {"facet": "shipposhippingupdate"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "logistics"}, {"name": "logisticsbatch"}], "common_settings": {"internal_hosts": {"jobschedulernormalweb": {"tls_enabled": true}, "jobschedulerbulkweb": {"tls_enabled": true}, "users": {"tls_enabled": true}, "userprivacyrights": null}, "external_hosts": {"kinesis_iad": null}}, "override_settings": [{"services": [{"name": "logistics"}], "settings": {"internal_hosts": {"supply": {"tls_enabled": true}, "mailer": {"tls_enabled": true}}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}}}]}}, "logging": {"logistics": {"fields": {"data": "keyword", "response_code": "long", "body": {"tracking_number": "keyword", "tracking_status": {"object_id": "keyword"}}, "event_data": {"user_email": "keyword", "user_id": "keyword"}, "event_type": "keyword", "order": "keyword", "error_msg": "keyword", "error_type": "keyword", "new_status": "keyword", "old_status": "keyword", "error": "keyword", "exc_info": "keyword", "request_method": "keyword", "request_path": "keyword", "url": "keyword", "payload": "keyword", "status_code": "long", "sku": "keyword", "user_id": "keyword", "msg": "keyword"}}, "logisticsbatch": {"fields": {"js_latency": "float", "num_retries": "long", "num_requests": "long", "num_fail": "long", "num_success": "long", "order": "keyword", "xml_body": "keyword", "request_json": {"method": "keyword", "delivery_options": {"retry_after_seconds": "long", "accepted_response_codes": "long", "retry_backoff_multiplier": "long", "priority": "keyword", "read_timeout": "long", "max_retries": "long", "type": "keyword", "permafail_response_codes": "long"}, "webhook": {"url": "keyword", "headers": {"content-type": "keyword", "host": "keyword"}}, "delay_seconds": "long", "url": "keyword", "body": "keyword", "headers": {"content-type": "keyword"}}}}}, "version": "91dba5e0c4b4247bb16f95f2a1c232f7e049b812", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "logpersister": {"name": "logpersister", "description": "Read logs from kafka and uploads to s3", "repository": "git@github.com:lyft/logpersister.git", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "team_email": "obs-analysis@lyft.com", "pagerduty_escalation_policy": "Observability-Analysis", "languages": ["bash", "java"], "image_type": "service", "service_tier": 2, "containers": [{"name": "service", "command": "/docker-entrypoint.sh local"}], "groups": [{"name": "dev", "members": ["control.dev", "kafka.server", "logpersister.service"]}], "streamingplatform": {"kubernetes": true, "applications": [{"namespace": "lyft-logging", "name": "logpersister"}], "stages": {"staging-logpersisterst": {"configuration": "logpersisterst-staging.jsonnet"}, "production-logpersisterst": {"configuration": "logpersisterst-production.jsonnet"}, "production-logpersisterpr": {"configuration": "logpersisterpr-production.jsonnet"}, "production-logpersisterobsst": {"configuration": "logpersisterobsst-production.jsonnet"}, "production-logpersisterobspr": {"configuration": "logpersisterobspr-production.jsonnet"}}}, "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}, [{"name": "staging-logpersisterst", "legacy": false, "automatic": false}], {"name": "production", "legacy": false, "automatic": false, "orca": [{"region": "iad"}]}, [{"name": "production-logpersisterst", "legacy": false, "automatic": false}, {"name": "production-logpersisterpr", "legacy": false, "automatic": false}, {"name": "production-logpersisterobsst", "legacy": false, "automatic": false}, {"name": "production-logpersisterobspr", "legacy": false, "automatic": false}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "logpersister"}, {"name": "logpersisterjobmanager"}, {"name": "logpersistertaskmanager"}]}}, "builder": {"name": "s2i", "params": {"builder": "lyft/s2istreamingplatformflink:sp20.e7ff259c7ba6843ae339496819df7d443d843872"}}, "version": "14b4f3880382ccf3d7afec9347b525d92383649e", "images": [{"parent": {"name": "s2istreamingplatformflink", "version": "e7ff259c7ba6843ae339496819df7d443d843872", "sub_image": "sp20", "external": false}, "sub_image": null}], "parent": {"name": "s2istreamingplatformflink", "version": "e7ff259c7ba6843ae339496819df7d443d843872", "sub_image": "sp20", "external": false}}, "logproxy": {"name": "logproxy", "description": "service to aggregate fluentd logs and forward to kafka", "repository": "git@github.com:lyft/logproxy.git", "image_type": "service", "service_tier": 1, "team_email": "obs-analysis@lyft.com", "pagerduty_escalation_policy": "Observability-Analysis", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "aggregate", "port": 24224}]}], "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-logging-dev"}, "pr_merge": {"slack": "#obs-logging-dev"}}, "groups": [{"name": "dev", "members": ["control.dev", "logproxy.legacy", "redis.dev", "ratelimit.legacy"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": false}, {"name": "canary", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1b", "legacy": true, "availability_zone": "us-east-1b"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production-us-east-1e", "legacy": true, "availability_zone": "us-east-1e"}], [{"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "logproxy"}, {"name": "logproxyobs"}, {"name": "logproxyprodtraffic"}, {"name": "logproxystagingtraffic"}, {"name": "logproxyobsprodtraffic"}, {"name": "logproxyobsstagingtraffic"}], "common_settings": {"internal_hosts": {"ratelimit": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"logproxy": {"fields": {"error": {"status_code": "integer", "plugin_id": "keyword", "key": "keyword"}}}}, "version": "55f20a9d51b9a6f075421e915b3fa271a18c1ea9", "images": [{"parent": {"name": "opsbase", "version": "d214dcc0d416e8c14a63b46a2837e15206260fb3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "d214dcc0d416e8c14a63b46a2837e15206260fb3", "sub_image": null, "external": false}}, "loyaltypartnerships": {"name": "loyaltypartnerships", "description": "A backend service for loyalty partnerships and points calculation", "repository": "git@github.com:lyft/loyaltypartnerships.git", "slack": "#enterprise-guest-xp", "team_email": "enterprise-guest-xp@lists.lyft.com", "pagerduty_escalation_policy": "Ride Programs", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/loyaltypartnerships", "limits": {"cpu": 2, "memory": "2Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "resendloyaltyprogramwebhooks", "command": "dumb-init -- service_venv python manage.py resend_loyalty_program_webhooks", "workdir": "/code/loyaltypartnerships", "sub_image": "k8s", "limits": {"memory": "16Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "loyaltypartnerships.legacy", "idl.server", "auth.legacy", "venues.dev", "taskqueue.dev"]}, {"name": "service_group", "members": ["loyaltypartnerships.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "loyaltypartnerships.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests/unit"]}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "autotrigger": false, "type": "sharded", "shard_at": "file", "group": "loyaltypartnerships.dev", "execution_group": "loyaltypartnerships.dev", "container": "loyaltypartnerships.legacy", "target": "tests/integration", "virtualenv": "service_venv", "reports": {"junit": "build/integration.xml"}}], "facets": [{"name": "main", "member": "loyaltypartnerships.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "loyaltypartnerships.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}, {"name": "resendloyaltyprogramwebhooks", "member": "loyaltypartnerships.resendloyaltyprogramwebhooks", "type": "cron", "schedule": "0 0,18 * * *"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "bake_time_minutes": 15, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "resendloyaltyprogramwebhooks"}]}], "pulldeploy_components": {"data": ["translationdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "loyaltypartnerships"}], "common_settings": {"internal_hosts": {"auth": null, "enterprisedispatch": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "ledger": null, "messaging": null, "places": null, "rides": null, "taskqueuebulkweb": null, "taskqueuenormalweb": null, "tcs": null, "venues": null}, "external_hosts": {"alaskaair": null, "dynamodb_iad": null, "firehose_iad": null}}}}, "logging": {"loyaltypartnerships": {"fields": {"user_id": "long", "ride_id": "long", "loyalty_program": "keyword", "client_id": "keyword"}}}, "version": "f691b3de1fff3d82140ea19f0226083192540bd0", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "loyaltypoints": {"name": "loyaltypoints", "description": "Give and redeem points for rewards to build driver loyalty", "repository": "git@github.com:lyft/loyaltypoints.git", "slack": "#high-value-drivers-bots", "team_email": "high-value-drivers-eng@lyft.com", "pagerduty_escalation_policy": "High Value Drivers", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/loyaltypoints", "limits": {"cpu": 1, "memory": "2.0Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "redemptionauditcron", "command": "dumb-init -- service_venv python manage.py redemption_recovery", "workdir": "/code/loyaltypoints", "sub_image": "k8s", "limits": {"cpu": 1}}, {"name": "generateredemptionscron", "command": "dumb-init -- service_venv python manage.py generate_redemptions --region SIMCHI", "workdir": "/code/loyaltypoints", "sub_image": "k8s", "limits": {"cpu": 1}}, {"name": "redemptionaudit", "command": "dumb-init -- service_venv python manage.py redemption_recovery", "workdir": "/code/loyaltypoints", "sub_image": "k8s", "limits": {"cpu": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "idl.server", "dynamodb.server", "loyaltypoints.legacy"]}, {"name": "integration", "members": ["loyaltypoints.dev", "cetconcessions.dev", "ledger.dev", "regions.dev", "coupons.dev", "loyaltytiers.dev", "push.dev"]}, {"name": "service_group", "members": ["loyaltypoints.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "loyaltypoints.dev"}, {"name": "unit", "type": "jailed", "run_in_pr": true, "run_in_dev": true, "framework": "pytest", "coverage": true}, {"name": "integration", "type": "execution", "command": "make test_integration", "container": "loyaltypoints.legacy", "group": "loyaltypoints.integration", "run_in_pr": true, "run_in_dev": true, "reports": {"junit": "build/integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "e2e", "type": "execution", "group": "loyaltypoints.integration", "container": "loyaltypoints.legacy", "run_in_pr": false, "run_in_dev": true, "command": "make test_e2e", "reports": {"junit": "build/e2e.xml"}, "autotrigger": false}], "facets": [{"name": "main", "member": "loyaltypoints.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 7}}}}, {"name": "canary", "member": "loyaltypoints.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}, {"name": "redemptioncron", "member": "loyaltypoints.redemptionauditcron", "type": "cron", "schedule": "50 23 * * SAT"}, {"name": "generateredemptionscron", "member": "loyaltypoints.generateredemptionscron", "type": "cron", "schedule": "0 20 * * 1-5"}, {"name": "redemptionaudit", "member": "loyaltypoints.redemptionaudit", "type": "batch"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "redemptioncron"}, {"facet": "redemptionaudit"}, {"facet": "generateredemptionscron"}], "links": [{"text": "loyaltypoints runbook", "url": "https://github.com/lyft/loyaltypoints/blob/master/docs/runbook.md"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "redemptioncron"}, {"facet": "redemptionaudit"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "loyaltypoints"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"abacus": null, "cetconcessions": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "ledger": null, "coupons": null, "loyaltypoints": null, "loyaltytiers": null, "regions": null, "rides": null, "routes": null, "supply": null, "tcs": null, "usergroups": null, "users": null, "messaging": null, "push": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "openbay": null}}}}, "logging": {"loyaltypoints": {"fields": {"lyft_id": "keyword", "driver_id": "keyword", "redemption_id": "keyword", "idempotency_key": "keyword", "reward_type": "keyword", "order_id": "keyword", "order_data": "text", "coupon_id": "keyword", "coupon_template_code": "keyword", "bonus_id": "keyword", "coupon_code": "keyword", "invoice_id": "keyword", "line_item_id": "keyword", "line_item": "keyword", "route_id": "keyword", "ride_id": "keyword", "total_points_accrued": "integer", "total_qualified_line_items": "integer", "total_qualified_earnings_minor": "integer", "line_item_ids": "text", "response": "text", "error": "text", "error_details": "text", "error_code": "keyword", "invoices": "text", "error_msg": "text", "data": "text", "points_model": {"user_id": "keyword", "idempotency_key": "keyword", "external_id": "keyword", "external_id_type": "keyword", "ledger_invoice_id": "keyword", "ledger_line_item_id": "keyword", "ledger_line_item_type": "keyword", "ledger_order_id": "keyword", "partition_key": "keyword", "region": "keyword", "route_id": "keyword", "reward_type": "keyword"}, "points_balance": {"user_id": "keyword"}}}}, "version": "e573d8da5feff4793acfd0a7b67def812da38e87", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "loyaltyprograms": {"name": "loyaltyprograms", "description": "loyaltyprograms", "repository": "git@github.com:lyft/loyaltyprograms.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 80}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "loyaltyprograms.legacy"]}, {"name": "integration", "members": ["loyaltyprograms.dev", "regions.dev", "jobscheduler.dev"]}], "tests": [{"name": "unit", "type": "execution", "group": "loyaltyprograms.dev", "container": "loyaltyprograms.legacy", "command": "make test_pynose"}, {"name": "lint", "type": "jailed", "command": "make test_style", "reports": {"junit": "build/int.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "auto_scale_groups": ["loyaltyprograms", "loyaltyprogramsbatch"], "slack": "#partner-engineering", "team_email": "partner-engineering@lyft.com", "pagerduty_escalation_policy": "Developer Platform", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, [{"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "languages": ["bash", "python"], "image_type": "service", "service_tier": 1, "envoy": {"profile": "python", "settings": {"services": [{"name": "loyaltyprograms"}, {"name": "loyaltyprogramsbatch", "traffic_type": "egress_only"}], "override_settings": [{"services": [{"name": "loyaltyprograms"}], "settings": {"internal_hosts": {"jobschedulerbulkweb": null, "jobschedulernormalweb": null, "nexus": null, "push": null, "regions": null, "userprivacyrights": null, "venues": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null}}}, {"services": [{"name": "loyaltyprogramsbatch"}], "settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}}}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}]}}, "logging": {"loyaltyprograms": {"fields": {"reward_id": "keyword", "user_id": "keyword", "service_id": "keyword", "reward_type": "keyword", "service_name": "keyword", "service": "long", "user": "keyword", "response": {"expiresIn": "long"}, "error_description": "keyword", "error_code": "keyword", "ffpNumber": "keyword", "partner_transaction_id": "keyword", "request": "keyword", "service_member_id": "long", "port": "keyword", "message": "keyword", "timeout": "keyword", "exception": "keyword"}}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "version": "71ebeba7c4a705eee1a5ceb5b3e931ca05a059a1", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "loyaltytiers": {"name": "loyaltytiers", "description": "Delivers tier status, progress, and history for driver loyalty program", "repository": "git@github.com:lyft/loyaltytiers.git", "slack": "#high-value-drivers-bots", "team_email": "high-value-drivers-eng@lyft.com", "pagerduty_escalation_policy": "High Value Drivers", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/loyaltytiers", "limits": {"cpu": 1, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "quarterlysummaryemail", "command": "service_venv python manage.py send_quarterly_program_summary", "workdir": "/code/loyaltytiers", "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "idl.server", "loyaltytiers.legacy"]}, {"name": "integration", "members": ["loyaltytiers.dev", "loyaltypoints.legacy", "push.legacy", "regions.dev", "ratings.legacy", "supply.legacy", "supplyrecords.dev", "users.dev"]}, {"name": "e2e", "members": ["loyaltytiers.integration", "lyfttestlib.ride", "loyaltypoints.integration"]}, {"name": "service_group", "members": ["loyaltytiers.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "loyaltytiers.dev"}, {"name": "unit", "type": "jailed", "run_in_pr": true, "run_in_dev": true, "framework": "pytest", "coverage": true}, {"name": "integration", "type": "execution", "command": "make test_integration", "container": "loyaltytiers.legacy", "group": "loyaltytiers.integration", "run_in_pr": true, "run_in_dev": true, "reports": {"junit": "build/integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "e2e", "type": "execution", "group": "loyaltytiers.e2e", "container": "loyaltytiers.legacy", "run_in_pr": false, "run_in_dev": true, "command": "make test_e2e", "reports": {"junit": "build/e2e.xml"}}], "facets": [{"name": "main", "member": "loyaltytiers.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls"], "autoscaling": {"criteria": {"cpu_target": 25}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 8}}}, "profiling": {"types": {"memory": true}}}, {"name": "canary", "member": "loyaltytiers.service", "type": "service", "canary": true, "environment_files": ["ops/config/pillar/env.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "quarterlysummarycron", "member": "loyaltytiers.quarterlysummaryemail", "type": "cron", "schedule": "0 20 * * *"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "quarterlysummarycron"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "quarterlysummarycron"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "loyaltytiers"}, {"name": "loyaltytiersbatch"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"jobschedulerbulkweb": null, "jobschedulernormalweb": null, "loyaltypoints": null, "loyaltytiers": null, "regions": null, "ratings": null, "supply": null, "supplyrecords": null, "tcs": null, "messaging": null, "push": null, "users": null, "www2": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}}}}, "logging": {"loyaltytiers": {"fields": {"lyft_id": "keyword", "driver_id": "keyword", "region": "keyword", "region_code": "keyword", "event_type": "keyword", "reward_name": "keyword", "notif_type": "keyword", "template_id": "keyword", "bucket": "keyword", "filename": "keyword", "message_template_id": "keyword", "message": "text", "response": "text", "error": "text", "errors": "text", "error_code": "keyword", "status_code": "keyword", "is_sim_user": "boolean"}}}, "version": "0302fdfedb1ac69a2952a97b7cbd50535891e43a", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "lplint": {"name": "lplint", "description": "Lyft Product Langauge documentation website", "repository": "git@github.com:lyft/lplint.git", "image_type": "service", "service_tier": 3, "slack": "#design-systems-bots", "team_email": "design-systems@lyft.com", "pagerduty_escalation_policy": "Design Systems Web", "docs": {"disable": true}, "languages": ["bash", "javascript"], "credentials": false, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "frontend": {"node_version": "10.14.1-1nodesource1"}, "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "groups": [{"name": "dev", "members": ["control.dev", "lplint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "lplint.dev"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "lplint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}}}}, "version": "4dd9490c66f4c769123b47dfef24348f7845d38b", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "lyftacl": {"name": "lyftacl", "description": "TODO short description of the service", "repository": "git@github.com:lyft/python-lyft-acl.git", "tests": [{"name": "python2", "type": "jailed", "command": "python -3 -m pytest tests"}, {"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest tests"}, {"name": "flake", "type": "jailed", "command": "flake8"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["python"], "image_type": "library", "slack": "#data-privacy", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "team_email": "data-privacy@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "1c133ab838f8ba350edd09e6bc67ff7b89a58719", "images": [{"parent": {"name": "pythonlibrary", "version": "510a8a2da66f3b3d14d1ea1e6583106f5a93ee34", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "510a8a2da66f3b3d14d1ea1e6583106f5a93ee34", "sub_image": null, "external": false}}, "lyftalexa": {"name": "lyftalexa", "description": "lyftalexa", "repository": "git@github.com:lyft/lyftalexa.git", "slack": "#automation", "team_email": "devops@lyft.com", "pagerduty_escalation_policy": "CI and Deployments", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "lyftalexa.legacy"]}], "tests": [{"name": "precommit", "autotrigger": false, "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "startup", "type": "startup", "group": "lyftalexa.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "staging", "legacy": true}, {"name": "production", "legacy": true}], "version": "c462c19b3ca0ab6296fdefabf6057cd63757c0a4", "images": [{"parent": {"name": "opsbase", "version": "06ce4a2cae6232fe3834c5c22664d30e640a62fd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "06ce4a2cae6232fe3834c5c22664d30e640a62fd", "sub_image": null, "external": false}}, "lyftartifactory": {"name": "lyftartifactory", "description": "a gateway for private lyft java libraries", "repository": "git@github.com:lyft/lyftartifactory.git", "credentials": true, "slack": "#artifactory", "team_email": "provisioning-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "docs": {"disable": true}, "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "mode": "direct", "clusterLabels": [{"cluster.lyft.net/role": "infra"}, {"cluster.lyft.net/clustername": "infrastaging"}], "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "acl": {"admin_policies": ["kubernetes-client-tooling-admin"]}}, "automatic": true}, {"name": "production", "legacy": false, "orca": [{"iam_role": "orca-admin", "region": "iad"}], "kubernetes": {"enabled": true, "mode": "direct", "clusterLabels": [{"cluster.lyft.net/role": "infra"}, {"cluster.lyft.net/cluster_name": "infra"}], "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "acl": {"admin_policies": ["kubernetes-client-tooling-admin"]}}}], "languages": ["bash"], "image_type": "service", "service_tier": 2, "envoy": {"profile": "go", "settings": {"services": [{"name": "artifactoryreadonly"}], "common_settings": {"local_service": {"grpc_streaming": true}}}}, "version": "f6753df8391f3138f88f8c6335e48b4995e23474", "images": [{"parent": {"name": "bionicbase", "version": "1e528f4b38210368cdf8837ac5d8060c4a8fe90b", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "1e528f4b38210368cdf8837ac5d8060c4a8fe90b", "sub_image": null, "external": false}}, "lyftasyncrequests": {"name": "lyftasyncrequests", "description": "An async HTTP client library", "repository": "git@github.com:lyft/python-lyft-async-requests.git", "slack": "#simulation-platforms", "team_email": "simulation-platforms@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:c225a3dfae6bb8486ed86ed115d3076fb4885946"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests"]}], "deploy": [{"name": "staging", "role": "lyftpypi-staging-iad-deploy", "legacy": true}, {"name": "production", "role": "lyftpypi-production-iad-deploy", "legacy": true, "automatic": true}], "version": "1183bf1fff788c647dcf2c6ff3fb5976441ae14d", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "c225a3dfae6bb8486ed86ed115d3076fb4885946", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "c225a3dfae6bb8486ed86ed115d3076fb4885946", "sub_image": null, "external": false}}, "lyftbasemaplib": {"name": "lyftbasemaplib", "description": "Utility Library for Basemaps", "repository": "git@github.com:lyft/basemaplib.git", "slack": "#base-maps-bot", "team_email": "basemap-eng@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "e3cf675d9bc73785a1c9ac0b1007e79008d0afeb", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "lyftcampaignsshared": {"name": "lyftcampaignsshared", "description": "Shared code for engagement campaign services (Exodus project)", "repository": "git@github.com:lyft/python-lyft-campaigns-shared.git", "image_type": "library", "slack": "#notifications-bots", "team_email": "notifications-eng@lyft.com", "languages": ["python"], "configsets": ["audiencedata"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "61594840fd2dd00c0d9b5e2fef35e4964af830e5", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "lyftccc": {"name": "lyftccc", "description": "Python library for interfacing with CCC (insurance tech products)", "repository": "git@github.com:lyft/python-lyft-ccc.git", "image_type": "library", "slack": "#insurance", "team_email": "insurance-tech@lists.lyft.com", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "d4bcb2eedd4465e2c4ed29b84f93866771c5f055", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "lyftciexeclib": {"name": "lyftciexeclib", "description": "CIExec python client library", "repository": "git@github.com:lyft/python-lyft-ciexec.git", "credentials": true, "credentials_legacy": false, "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:5db65c5611742e2186258a5531f10ef4e7edbd81"}}, "docs": {"section": "Infrastructure"}, "containers": [{"name": "shell", "command": "/bin/bash"}], "tests": [{"name": "unit", "type": "jailed", "command": "python3 -bb -m pytest -vvv ciexec/tests"}, {"name": "lint", "type": "jailed", "command": "flake8 ."}], "python": {"mypy": {"python_versions": ["3.4"]}, "py3k": {"linters": ["modernize", "pylint"]}}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["python"], "image_type": "library", "slack": "#continuousintegration", "team_email": "automation-team@lyft.com", "version": "f93fe33e316354aee69b037018fa8e68073c233e", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "5db65c5611742e2186258a5531f10ef4e7edbd81", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "5db65c5611742e2186258a5531f10ef4e7edbd81", "sub_image": null, "external": false}}, "lyftconfigset": {"name": "lyftconfigset", "description": "A Python client library for working with configsets", "repository": "git@github.com:lyft/python-lyft-configset.git", "image_type": "library", "languages": ["python"], "slack": "#deploys-bots", "team_email": "deploys-team@lyft.com", "credentials": false, "containers": [{"name": "spin", "command": "/bin/bash -c 'while true; do sleep 3600; done'"}], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "docs": {"autogen_env": "python3.6", "autogen_modules": ["lyft_configset"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}]}}, "version": "72c38d9b3fa51c0700680079afbbc6419176f070", "images": [{"parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}}, "lyftconfigsetrollouts": {"name": "lyftconfigsetrollouts", "description": "Library containing framework for creating configset based rollouts", "repository": "git@github.com:lyft/python-lyft-configset-rollouts.git", "image_type": "library", "languages": ["python"], "slack": "#core-services", "team_email": "core-services@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:66d815e6ba03c9515c0c2273ecca13036015715d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "python3 -m pytest tests"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "8ff063e36144b99cee1bc35101197d8ace2b41fc", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "lyftconfigsettest": {"name": "lyftconfigsettest", "description": "For testing configsets", "repository": "git@github.com:lyft/python-lyft-configsettest.git", "slack": "#deploys-bots", "team_email": "deploys-team@lyft.com", "image_type": "library", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:66d815e6ba03c9515c0c2273ecca13036015715d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "languages": ["python"], "tests": [{"name": "unit", "type": "jailed", "command": "python3 -bb -m pytest tests"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "92a52456f1077fd972bba366e9f5e2f62b55c704", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "lyftdeeplinks": {"name": "lyftdeeplinks", "description": "Python library for deeplinks", "repository": "git@github.com:lyft/python-lyft-deeplinks.git", "image_type": "library", "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:77bc248dcdf3d408786f858d3916c931a07c4f11"}}, "languages": ["python"], "credentials": true, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "command": "make lint"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "2466406d8440c46746daa8445f18b5088a0291e8", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "77bc248dcdf3d408786f858d3916c931a07c4f11", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "77bc248dcdf3d408786f858d3916c931a07c4f11", "sub_image": null, "external": false}}, "lyftdevcli": {"name": "lyftdevcli", "credentials": true, "description": "cli to interact with lyft's api", "repository": "git@github.com:lyft/lyft-dev-cli.git", "slack": "#lyft-dev-cli-bots", "team_email": "devx-team@lyft.com", "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "goldenpath", "command": "/code/lyft-dev-cli/scripts/golden-path.sh"}, {"name": "release", "command": "env RESOLVE_DEPENDENCIES_CPUS=4 npm run release"}], "groups": [{"name": "dev", "members": ["dnsmasq.server", "metadataproxy.server", "lyftdevcli.goldenpath"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "npm t"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "ghrelease", "member": "lyftdevcli.release", "type": "job"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "ghrelease"}]}], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "languages": ["javascript"], "image_type": "tool", "version": "152d82871e6f27ffb46f750ca0e3ff069213d1e4", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "lyftdsfeatureselbclient": {"name": "lyftdsfeatureselbclient", "description": "REST client for features service to be used by flyte", "repository": "git@github.com:lyft/dsfeatures-elb-client.git", "image_type": "library", "languages": ["python"], "credentials": true, "tests": [{"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "mypy", "type": "jailed", "command": "make mypy"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "d8db4c87bd7ad57f5a9e9a0f5bc609ec973face0", "images": [{"parent": {"name": "pythonlibrary", "version": "e27ac6544fffd4ccd5ce93f8e874d3211bf1296d", "external": false}, "sub_image": null}], "parent": {"name": "pythonlibrary", "version": "e27ac6544fffd4ccd5ce93f8e874d3211bf1296d", "external": false}}, "lyftelastalert": {"name": "lyftelastalert", "description": "Elasticsearch alerter package, free to a good home", "repository": "git@github.com:lyft/elastalert-private.git", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "pagerduty_escalation_policy": "Security", "team_email": "security-engineering@lyft.com", "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "image_type": "service", "service_tier": 3, "version": "a5af86fb91be2ac3f74b24f392aac780604cf0e8", "images": [{"parent": {"name": "pythonlibrary", "version": "294cbad348ad4db579087e22f65386ca6762ebfe", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "pythonlibrary", "version": "294cbad348ad4db579087e22f65386ca6762ebfe", "sub_image": null, "external": false}}, "lyftelasticsearch": {"name": "lyftelasticsearch", "description": "TODO short description of the service", "repository": "git@github.com:lyft/python-lyft-elasticsearch.git", "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "tests": [{"name": "python2", "type": "jailed", "command": "python -3 -m pytest tests"}, {"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest tests"}, {"name": "lint", "type": "jailed", "command": "flake8"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "languages": ["python"], "image_type": "library", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "team_email": "observability-team@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "e645898bd9fa9719ffe6fb0d5f139b4ab466dff0", "images": [{"parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}}, "lyftexacttarget": {"name": "lyftexacttarget", "description": "Lyft-specific ExactTarget client", "repository": "git@github.com:lyft/python-lyft-exacttarget.git", "credentials": true, "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:be92b86f3d025a9bc5fd6eceee42772c73736409"}}, "tests": [{"name": "python2", "type": "jailed", "command": "python -m pytest tests"}, {"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest tests"}, {"name": "flake", "type": "jailed", "command": "flake8"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "python": {"py3k": {"linters": ["modernize", "pylint"]}}, "languages": ["python"], "image_type": "library", "version": "13ef8affaff65b6b0c200d7251c27649f0424aec", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "be92b86f3d025a9bc5fd6eceee42772c73736409", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "be92b86f3d025a9bc5fd6eceee42772c73736409", "sub_image": null, "external": false}}, "lyftexperimentation": {"name": "lyftexperimentation", "description": "Lyft Experimentation Python Library", "repository": "git@github.com:lyft/python-lyft-experimentation.git", "image_type": "library", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "languages": ["python"], "groups": [{"name": "tester", "members": ["lyftexperimentation.test"]}], "containers": [{"name": "test", "privileged": true, "network": "host", "command": "/bin/bash -c 'while true; do sleep 3600; done'"}], "tests": [{"name": "python2", "type": "execution", "command": "make unit_python2", "group": "lyftexperimentation.tester", "container": "lyftexperimentation.test"}, {"name": "python3", "type": "execution", "command": "make unit_python3", "group": "lyftexperimentation.tester", "container": "lyftexperimentation.test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "slack": "#experimentation", "team_email": "experimentation@lyft.com", "version": "a7128b81ff4ec828ef1763b698d9adccfdaf98a4", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "lyftexpressdrivestdlib": {"name": "lyftexpressdrivestdlib", "description": "Code shared between express drive backend services.", "repository": "git@github.com:lyft/python-lyft-expressdrive-stdlib.git", "image_type": "library", "languages": ["python"], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "mypy", "type": "jailed", "command": "make mypy"}, {"name": "version_bump", "type": "jailed", "command": "python3.6 test_version_bump.py"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "slack": "#xd-hub", "team_email": "xd-eng@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "version": "dacf59b60e6fee37480c9dda15060e77e89723bf", "images": [{"parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}}, "lyftfeatures": {"name": "lyftfeatures", "description": "DSPlatform user command line tools and libraries for implementing and updating features in FeatureService", "repository": "git@github.com:lyft/lyft-dsp-features.git", "image_type": "library", "languages": ["python"], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "team_email": "ds-platform@lyft.com", "slack": "#ml-platform-bots", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "spin", "command": "sleep infinity"}], "version": "f9be412155813064fb825d6c4966288ec8812328", "images": [{"parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}}, "lyftflask": {"name": "lyftflask", "description": "A subclass of Flask that includes Lyft-specific configuration", "repository": "git@github.com:lyft/lyftflask.git", "image_type": "library", "languages": ["python"], "credentials": true, "tests": [{"name": "python2", "type": "jailed", "command": "python2 -3 -m pytest tests"}, {"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest tests"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "slack": "#security", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "team_email": "security-team@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipythonlibrary:66d815e6ba03c9515c0c2273ecca13036015715d", "packages": ["libxmlsec1-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:547a336fe470dbd62f20be74e7703449fc8ab523", "sub_image": "precommit"}}]}}, "version": "5bfc6bff93f031275746d41bc7ac14568f39c04e", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "547a336fe470dbd62f20be74e7703449fc8ab523", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "lyftforecastingstdlib": {"name": "lyftforecastingstdlib", "description": "Forecasting Standard Library", "repository": "git@github.com:lyft/python-lyft-forecasting-stdlib.git", "slack": "#forecasting-bots", "team_email": "forecasting-team@lyft.com", "pagerduty_escalation_policy": "Forecasting", "image_type": "library", "languages": ["python"], "docs": {"autogen_env": "python3.6", "autogen_modules": ["lyft_forecasting_stdlib"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "a21cdb16b031be2e916373537813acc36e11f4e2", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "lyftformbuilder": {"name": "lyftformbuilder", "description": "A python library for building Form Builder APIs", "repository": "git@github.com:lyft/python-lyft-form-builder.git", "image_type": "library", "languages": ["python"], "tests": [{"name": "python2", "type": "jailed", "command": "python -3 -m pytest tests"}, {"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest tests"}, {"name": "lint", "type": "jailed", "command": "flake8 ."}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy"}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true}], "slack": "#form-builder", "team_email": "formbuilder@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "5bde6562836fcd3c82a99bcea22cb321fa9990a4", "images": [{"parent": {"name": "pythonlibrary", "version": "510a8a2da66f3b3d14d1ea1e6583106f5a93ee34", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "510a8a2da66f3b3d14d1ea1e6583106f5a93ee34", "sub_image": null, "external": false}}, "lyftgoogle": {"name": "lyftgoogle", "description": "Google API Integrations shared across Lyft", "repository": "git@github.com:lyft/python-lyft-google.git", "image_type": "library", "languages": ["python"], "tests": [{"name": "python2", "type": "jailed", "command": "python -3 -m pytest tests"}, {"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest tests"}, {"name": "lint", "type": "jailed", "command": "flake8 ."}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "version": "63b24a733c3149e0e78bd245d0c3868dbe4ff728", "images": [{"parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}}, "lyftidl": {"name": "lyftidl", "description": "protobuf generators", "languages": ["go", "python", "javascript", "php"], "repository": "git@github.com:lyft/lyft-idl.git", "credentials": true, "credentials_legacy": false, "slack": "#idl-bots", "slack_deploy_notification_environments": ["staging", "canary", "production"], "containers": [{"name": "generate", "command": "./script/generate"}, {"name": "genservice", "command": "/code/lyft-idl/script/gen-wrapper", "exports": [{"name": "grpc", "port": 9999}], "mounts": ["/code"]}, {"name": "test", "command": "./script/test-arg"}, {"name": "dist", "command": "./script/make-dev-dist"}, {"name": "service", "command": "./script/server", "mounts": ["/home"]}, {"name": "servicetest", "command": "./script/server", "role": "go-development-iad"}], "groups": [{"name": "server", "members": ["dnsmasq.server", "envoy.server", "lyftidl.service"]}, {"name": "servertest", "members": ["dnsmasq.server", "envoy.server", "lyftidl.servicetest"]}], "tests": [{"name": "tests", "type": "execution", "group": "lyftidl.servertest", "container": "lyftidl.servicetest", "command": "./script/test"}, {"name": "lint", "type": "jailed", "command": "./script/lint", "container": "lyftidl.generate"}, {"name": "android", "type": "execution", "group": "lyftidl.server", "container": "lyftidl.service", "command": "./script/android-build"}], "deploy": [{"name": "development", "legacy": true, "role": "lyftidl-production-iad-image"}, {"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "python": {"py3k": {"linters": ["modernize", "pylint"], "exclude": ["*_pb2.py"]}, "mypy": {"python_versions": ["2.7"], "exclude": ["*_pb2.py", "pythonify_protos/", "generated/"]}}, "image_type": "tool", "team_email": "idl-tools@lyft.com", "version": "c6986ce1d12d21e880f2c429575bffb7dfc33273", "images": [{"parent": {"name": "pythonlibrary", "version": "ecac51d9024451f59389f88f6840ac3ff8d5c692", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "pythonlibrary", "version": "ecac51d9024451f59389f88f6840ac3ff8d5c692", "sub_image": null, "external": false}}, "lyftingest": {"name": "lyftingest", "description": "A python client library for logging analytics events", "repository": "git@github.com:lyft/python-lyft-ingest.git", "slack": "#data-ingest-alerts", "team_email": "dataingest@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipythonlibrary:a374da870726dc68c57f331ead8f93942287fec2", "sources": [{"name": "confluent", "source": "deb https://packages.confluent.io/deb/5.3 stable main", "keyid": 41468433}], "packages": ["librdkafka-dev", "pkg-config"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython2:81f3a62b033eff99133851326875cb87f53b6de1", "sub_image": "py2", "sources": [{"name": "confluent", "source": "deb https://packages.confluent.io/deb/5.3 stable main", "keyid": 41468433}], "packages": ["librdkafka-dev", "pkg-config"]}}]}}, "containers": [{"name": "test", "command": "/bin/bash -c 'while true; do sleep 3600; done'"}], "groups": [{"name": "dev", "members": ["kafka.server", "lyftingest.test"]}, {"name": "integration", "members": ["kafka.server", "lyftingest.test"]}], "tests": [{"name": "python2", "type": "jailed", "sub_image": "py2", "command": "python -3 -m pytest tests/unit"}, {"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest tests/unit"}, {"name": "integration", "type": "execution", "group": "lyftingest.dev", "command": "python3 -m pytest --capture=no --disable-pytest-warnings --cov-fail-under=30 tests/integration", "container": "lyftingest.test", "virtualenv": "service_venv", "reports": {"junit": "build/integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "349eaf783334d5e6188b7c60e7f35ce04ce1b831", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "a374da870726dc68c57f331ead8f93942287fec2", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython2", "version": "81f3a62b033eff99133851326875cb87f53b6de1", "sub_image": null, "external": false}, "sub_image": "py2"}], "parent": {"name": "s2ipythonlibrary", "version": "a374da870726dc68c57f331ead8f93942287fec2", "sub_image": null, "external": false}}, "lyftinputs": {"name": "lyftinputs", "description": "Input filtering and validation for public APIs (typically HTTP request body/params).", "repository": "git@github.com:lyft/python-lyft-inputs.git", "image_type": "library", "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:5db65c5611742e2186258a5531f10ef4e7edbd81"}}, "languages": ["python"], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "command": "make lint"}], "python": {"mypy": {"python_versions": ["3.6"], "exclude": ["tests", "libs"]}}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "a3099bd40c6481907612850bcdcb378dda6498ed", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "5db65c5611742e2186258a5531f10ef4e7edbd81", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "5db65c5611742e2186258a5531f10ef4e7edbd81", "sub_image": null, "external": false}}, "lyftinsurancemodels": {"name": "lyftinsurancemodels", "description": "Data Science models and analysis for insurance", "repository": "git@github.com:lyft/insurancemodels.git", "image_type": "library", "slack": "#insurance", "credentials": false, "team_email": "insurance-tech@lists.lyft.com", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3bc33a5dadcbcb4159f72a8f6e1c0e8637eca138"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:67fd1259bffbaa40c0322cdef385fcbae748c776", "sub_image": "precommit"}}]}}, "tests": [{"name": "test", "type": "jailed", "command": "pytest tests"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "a92031f2eefdba39958a863af86038576255bae6", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3bc33a5dadcbcb4159f72a8f6e1c0e8637eca138", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "67fd1259bffbaa40c0322cdef385fcbae748c776", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3bc33a5dadcbcb4159f72a8f6e1c0e8637eca138", "sub_image": null, "external": false}}, "lyftkafkaclient": {"name": "lyftkafkaclient", "description": "A Python client library to connect to Kafka", "repository": "git@github.com:lyft/python-lyft-kafkaclient.git", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": "precommit"}}]}}, "tests": [{"name": "python2", "type": "jailed", "command": "python -3 -m pytest tests"}, {"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest tests"}, {"name": "lint", "type": "jailed", "command": "pre-commit run --all-files --show-diff-on-failure", "sub_image": "precommit"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy"}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy"}], "image_type": "library", "languages": ["python"], "version": "c8b06da298cf64aa70b1c0fbdcf4a56804b49033", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "lyftkcl": {"name": "lyftkcl", "description": "Library containing Lyft KCL RecordProcessor implementation to processes kinesis streams.", "repository": "git@github.com:lyft/python-lyft-kcl.git", "slack": "#streaming-pubsub", "team_email": "streaming-pubsub@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:66d815e6ba03c9515c0c2273ecca13036015715d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "d60efaf43994f57ea5d6b976349f32dbdb24838f", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "lyftkube": {"name": "lyftkube", "description": "lyftkube etc", "repository": "git@github.com:lyft/lyftkube.git", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "run", "command": "lyftkube"}], "languages": ["go"], "image_type": "tool", "service_tier": 3, "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "docs": {"section": "Infrastructure"}, "pagerduty_escalation_policy": "Provisioning", "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "deploy": [{"name": "staging", "legacy": true, "automatic": true}, {"name": "production", "legacy": true, "automatic": true}], "version": "acb4fd0ab65908e22478612ff1c35c3666ce6a5d", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "lyftlastpass": {"name": "lyftlastpass", "description": "This package is Python package for interacting with the LastPass Enterprise Provisioning API", "repository": "git@github.com:lyft/python-lyft-lastpass.git", "image_type": "library", "languages": ["python"], "tests": [{"name": "python2", "type": "jailed", "command": "python -3 -m pytest tests"}, {"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest tests"}, {"name": "lint", "type": "jailed", "command": "flake8 ."}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "slack": "#security", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "team_email": "security-team@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": "precommit"}}]}}, "version": "a59a3d7e9516dd0b6426b960c8d2ec6251f53e4d", "images": [{"parent": {"name": "pythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "lyftlearnbase": {"name": "lyftlearnbase", "description": "Base image for Lyftlearn environments", "repository": "git@github.com:lyft/lyftlearnimages.git:lyftlearnbase", "image_type": "tool", "slack": "#ml-platform-bots", "team_email": "ml-platform-team@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build", "params": {"buildargs": ["PYTHON_VERSION=python3.6"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": "precommit"}}]}}, "deploy": [{"name": "production", "legacy": false, "automatic": true}], "containers": [{"name": "spin", "command": "sleep infinity", "privileged": true, "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}, {"name": "serve", "command": "service_venv serve", "privileged": true, "exports": [{"name": "api", "port": 8080}]}, {"name": "notebook", "command": "jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password='' --notebook-dir=/mnt/user-home", "privileged": true, "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}], "groups": [{"name": "unittest", "members": ["lyftlearnbase.notebook"]}, {"name": "dev", "members": ["control.dev", "lyftlearnbase.notebook"]}], "tests": [{"name": "build_on_python3", "type": "execution", "group": "lyftlearnbase.unittest", "container": "lyftlearnbase.notebook", "command": "make test_build"}, {"name": "test_jupyter", "type": "execution", "group": "lyftlearnbase.unittest", "container": "lyftlearnbase.notebook", "command": "make test_jupyter"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "lyftlearn": {"notebook_templates": [{"template_name": "Lyftlearn Base 3", "long_description": "Long Description", "short_description": "short_description", "owner": "namirbekian", "service_instances": ["staging"]}], "model_service_instances": ["staging"], "models": {"base_test_model": {"model_file": "tests/fixtures/test_files/build_files/build_model1.ipynb", "description": "Test model defined on lyfltearnbase", "team": "ml-platform", "owner_email": "namrbekian@lyft.com"}}}, "version": "a7f30a925ef9c11be7e0153714e859a65e05099d", "images": [{"parent": {"name": "s2ibase", "version": "5b9749a1f1e3b8e53485be6fa0e612717eadd3f3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ibase", "version": "5b9749a1f1e3b8e53485be6fa0e612717eadd3f3", "sub_image": null, "external": false}}, "lyftlearnbuildjob": {"name": "lyftlearnbuildjob", "description": "Image for Lyftlearn build jobs to run", "repository": "git@github.com:lyft/lyftlearnimages.git:lyftlearnbuildjob", "image_type": "tool", "slack": "#ml-platform-bots", "team_email": "ml-platform-team@lyft.com", "credentials": true, "containers": [{"name": "spin", "command": "sleep infinity", "mounts": ["/srv/control", "/var/run/docker_sockets"]}], "groups": [{"name": "dev", "members": ["tensorgym.dev", "lyftlearnbuildjob.spin"]}], "tests": [{"name": "basic_build_job", "type": "execution", "group": "lyftlearnbuildjob.dev", "container": "lyftlearnbuildjob.spin", "command": "make test_basic_build"}, {"name": "test_save_model_build", "type": "execution", "group": "lyftlearnbuildjob.dev", "container": "lyftlearnbuildjob.spin", "command": "make test_save_model_build"}, {"name": "test_on_kubernetes", "type": "execution", "group": "lyftlearnbuildjob.dev", "container": "lyftlearnbuildjob.spin", "command": "make test_on_kubernetes", "autotrigger": false}], "deploy": [{"name": "staging", "legacy": false, "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}]}], "languages": ["python"], "version": "d1d7e43a9eaf1c563c11feae55e838529b1d4d40", "images": [{"parent": {"name": "bionicbase", "version": "3cfbfdae75bbe6827e254751008c503da9e42e70", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "3cfbfdae75bbe6827e254751008c503da9e42e70", "sub_image": null, "external": false}}, "lyftlearnclient": {"name": "lyftlearnclient", "description": "User client/libraries for Lyftlearn and other Data Science Platform services", "repository": "git@github.com:lyft/lyftlearnclient.git", "image_type": "library", "credentials": true, "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:66d815e6ba03c9515c0c2273ecca13036015715d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.enhanced", "sub_image": "enhanced"}}]}}, "containers": [{"name": "register", "command": "lyftlearn build_tools register_image", "sub_image": "enhanced", "role": "mlplatformtools-development-iad", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "registerspin", "command": "sleep infinity", "sub_image": "enhanced", "role": "mlplatformtools-development-iad", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "registerdevelopment", "command": "lyftlearn build_tools register_image", "sub_image": "enhanced", "role": "mlplatformtools-development-iad", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "registerstaging", "command": "lyftlearn build_tools register_image", "sub_image": "enhanced", "role": "mlplatformtools-staging-iad", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "registerproduction", "command": "lyftlearn build_tools register_image", "sub_image": "enhanced", "role": "mlplatformtools-production-iad", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "enhanced", "command": "sleep infinity", "sub_image": "enhanced", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "spin", "privileged": true, "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["control.dev", "tensorgym.dev", "lyftlearnclient.spin", "modelconfig.legacy"]}, {"name": "image_build", "members": ["lyftlearnclient.enhanced"]}, {"name": "reg_dev", "members": ["control.dev", "tensorgym.dev", "lyftlearnclient.enhanced"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "integration", "type": "execution", "group": "lyftlearnclient.dev", "container": "lyftlearnclient.spin", "command": "make test_integration"}, {"name": "test_image_build", "type": "execution", "container": "lyftlearnclient.enhanced", "group": "lyftlearnclient.image_build", "command": "make test_image_build"}, {"name": "test_image_registeration", "type": "execution", "group": "lyftlearnclient.reg_dev", "container": "lyftlearnclient.enhanced", "command": "make test_image_registration"}, {"name": "precommit_new_files", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --show-diff-on-failure"}], "docs": {"autogen_env": "python3.6", "autogen_modules": ["lyftlearnclient"]}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "pagerduty_escalation_policy": "DS Platform", "team_email": "ds-platform@lyft.com", "slack": "#ml-platform-bots", "version": "de9b608d09a267145d49a1ebd2ad5fff5daa9abb", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "lyftlearnclient", "version": "94efa1cbaf0c21efdafacccfcfb85ca237037aed", "sub_image": null, "external": false}, "sub_image": "enhanced"}], "parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "lyftlearnlegacy": {"name": "lyftlearnlegacy", "description": "lyft machine learning library", "repository": "git@github.com:lyft/lyftlearn-legacy.git", "image_type": "library", "languages": ["python"], "containers": [{"name": "devel", "privileged": true, "command": "/code/lyftlearn-legacy/entrypoint.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "lyftlearnlegacy.devel"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "unit3", "type": "jailed", "command": "make test_unit3", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "lyftlearnlegacy.dev", "container": "lyftlearnlegacy.devel", "command": "make test_integration", "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#ml-platform-bots", "team_email": "datascience@lyft.com", "pagerduty_escalation_policy": "Data Science", "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "52220f9d41d6443b33a0ea2430b4bf5610f8e941", "images": [{"parent": {"name": "pythonlibrary", "version": "cec13b08f67bc60fba6f9e12d572247afd4a768a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "cec13b08f67bc60fba6f9e12d572247afd4a768a", "sub_image": null, "external": false}}, "lyftlearnnotebook": {"name": "lyftlearnnotebook", "description": "Notebook for Lyftlearn environments", "repository": "git@github.com:lyft/lyftlearnimages.git:lyftlearnnotebook", "image_type": "tool", "slack": "#ml-platform-bots", "team_email": "ml-platform-team@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.python3gpu", "sub_image": "python3gpu"}}]}}, "deploy": [{"name": "production", "legacy": false, "automatic": true}], "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "spinpy3gpu", "command": "sleep infinity", "sub_image": "python3gpu", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}, {"name": "notebook", "command": "/venv/bin/jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password='' --notebook-dir=/mnt/user-home", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}, {"name": "notebook3gpu", "command": "/venv/bin/jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password='' --notebook-dir=/mnt/user-home", "sub_image": "python3gpu", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}], "lyftlearn": {}, "version": "eae71291e47127c9e34a6b3329ac167470bea143", "images": [{"parent": {"name": "tensorflow", "version": "c37457b7f88501df56ccb2ce6c10d47dca9bd966", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "tensorflowgpu", "version": "c37457b7f88501df56ccb2ce6c10d47dca9bd966", "sub_image": null, "external": false}, "sub_image": "python3gpu"}], "parent": {"name": "tensorflow", "version": "c37457b7f88501df56ccb2ce6c10d47dca9bd966", "sub_image": null, "external": false}}, "lyftlearnspark": {"name": "lyftlearnspark", "description": "LyftLearn Spark Fugue Image", "repository": "git@github.com:lyft/lyftlearnimages.git:lyftlearnspark", "image_type": "tool", "slack": "#ml-platform-bots", "team_email": "ml-platform-team@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.spark3", "sub_image": "spark3"}}]}}, "languages": ["python"], "groups": [{"name": "dev", "members": ["control.dev", "lyftlearnspark.notebook"]}], "deploy": [{"name": "production", "legacy": false, "automatic": true}], "containers": [{"name": "notebook", "command": "jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password='' --notebook-dir=/mnt/user-home", "privileged": true}, {"name": "notebook2", "command": "jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password='' --notebook-dir=/mnt/user-home", "sub_image": "spark3", "privileged": true}], "lyftlearn": {"notebook_templates": [{"template_name": "python-spark-fugue", "display_name": "Spark", "short_description": "Spark", "long_description": "Spark", "owner": "hwang", "additional_containers": {"sparkhistory": {"image": "173840052742.dkr.ecr.us-east-1.amazonaws.com/lyftlearnspark", "args": [], "version": "124f79a365185d1e8a386b7a7f9bb3fec63839b2", "command": ["/opt/spark/sbin/start-history-server.sh"]}}, "network": {"notebook": {"port": 8888, "public": true}, "sparkui": {"port": 4040, "public": true}, "sparkhistory": {"port": 18080, "public": true}, "daskui": {"port": 8787, "public": true}}, "service": {"sparkdrv": {"port": 29413, "target_port": 29413, "headless": true}}, "rank": 10001}, {"template_name": "python-spark3-fugue", "display_name": "Spark 3 (DO NOT USE)", "short_description": "Spark 3 (DO NOT USE)", "long_description": "Spark 3 (DO NOT USE)", "owner": "hwang", "sub_image": "spark3", "network": {"notebook": {"port": 8888, "public": true}, "sparkui": {"port": 4040, "public": true}, "sparkhistory": {"port": 18080, "public": true}, "daskui": {"port": 8787, "public": true}}, "service": {"sparkdrv": {"port": 29413, "target_port": 29413, "headless": true}}, "rank": 10001}]}, "version": "784b2870cc65088aefc3b892067fcdfef872cb51", "images": [{"parent": {"name": "tensorflowgpu", "version": "dc29230547b9c853c857aebfca5fbd7ca1e33811", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "lyftlearnnotebook", "version": "ba63acc4ee24d90b26f466b4c1cd9d6ee58a5f43", "sub_image": null, "external": false}, "sub_image": "spark3"}], "parent": {"name": "tensorflowgpu", "version": "dc29230547b9c853c857aebfca5fbd7ca1e33811", "sub_image": null, "external": false}}, "lyftlocationslib": {"name": "lyftlocationslib", "description": "Library containing locations objects and utils", "repository": "git@github.com:lyft/python-locations-stdlib.git", "image_type": "library", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "languages": ["python"], "tests": [{"name": "unit2", "type": "jailed", "command": "make test_unit2"}, {"name": "unit3", "type": "jailed", "command": "make test_unit3"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#locations", "team_email": "locations@lyft.com", "containers": [{"name": "devel", "privileged": true, "command": "/bin/bash -c 'while true; do sleep 3600; done'"}], "groups": [{"name": "dev", "members": ["control.dev", "lyftlocationslib.devel"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "d6afbc307754feb5715442cdbbeb83ecef3d983c", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "lyftlocationsmodels": {"name": "lyftlocationsmodels", "description": "Locations algorithms", "repository": "git@github.com:lyft/python-locations-models.git", "image_type": "library", "languages": ["python"], "slack": "#locations", "team_email": "locations@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:66d815e6ba03c9515c0c2273ecca13036015715d"}}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit", "packages": ["libspatialindex-dev", "g++"]}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.lyftlearn", "sub_image": "lyftlearn"}}]}}, "tests": [{"name": "unit2", "type": "jailed", "command": "make test_unit2"}, {"name": "unit3", "type": "jailed", "command": "make test_unit3"}, {"name": "unitpyre", "type": "jailed", "command": "bash -c 'cd /opt/code/python-locations-models && PYTHONPATH=. python3 -m pytest --no-cov tests/unit_with_pyre'", "sub_image": "lyftlearn"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "containers": [{"name": "devel", "privileged": true, "command": "/bin/bash -c 'while true; do sleep 3600; done'"}, {"name": "notebook", "sub_image": "lyftlearn", "command": "jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password='' --notebook-dir=/mnt/user-home", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "lyftlocationsmodels.devel"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "lyftlearn": {"notebook_templates": [{"template_name": "Locations Models", "sub_image": "lyftlearn", "short_description": "Template for developing Locations models in Python 3", "long_description": "Template for developing Locations models in Python 3", "owner": "kstaley"}]}, "version": "b05b29669a8652791530d6a246f7069195e60ae2", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "mlplatformnotebook3", "version": "0aa27c46e39e8ed17fefbc7197f850ea72031cfe", "sub_image": null, "external": false}, "sub_image": "lyftlearn"}], "parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "lyftlogging": {"name": "lyftlogging", "description": "Library for logging", "repository": "git@github.com:lyft/python-lyft-logging.git", "team_email": "obs-analysis@lyft.com", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "tests": [{"name": "python2", "type": "jailed", "command": "python -3 -m pytest tests"}, {"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest tests"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy"}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true}], "languages": ["python"], "image_type": "library", "version": "58c5cfae1837b8561582f5b6feec39d51f8489ec", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "lyftmarshmallow": {"name": "lyftmarshmallow", "description": "Python library with helpers for marshmallow.", "repository": "git@github.com:lyft/python-lyft-marshmallow.git", "image_type": "library", "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "slack": "#memberships", "team_email": "rider-memberships-eng@lyft.com", "version": "945d2e7fd3877f670dacedcaa9035fe4dd49db6a", "images": [{"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "lyftmessageexperimentation": {"name": "lyftmessageexperimentation", "description": "A library to make experiment based decisions while sending a message to users", "repository": "git@github.com:lyft/python-lyft-messageexperimentation.git", "slack": "#notifications", "team_email": "notifications-eng@lyft.com", "image_type": "library", "languages": ["python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:33c3858ae5c7dee41a02ede081071a230c234049"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:cb417f6767ff5d9cbf6dbf99526d361bcefdf4a5", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "62477c933ccc2ef0cc04f4ace3e9b2a154d0d5c4", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "33c3858ae5c7dee41a02ede081071a230c234049", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "cb417f6767ff5d9cbf6dbf99526d361bcefdf4a5", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "33c3858ae5c7dee41a02ede081071a230c234049", "sub_image": null, "external": false}}, "lyftmessagetracking": {"name": "lyftmessagetracking", "description": "This package is a Python library that implements logic shared by backends owned by the Communications Platform team and meant to uniformly track the status of email/SMS/push message.", "repository": "git@github.com:lyft/python-lyft-messagetracking.git", "slack": "#notifications-bots", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "tests": [{"name": "python2", "type": "jailed", "command": "python -3 -m pytest"}, {"name": "python3", "type": "jailed", "command": "python -bb -m pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "71cbb882f05201746042fd5aad2454b2e8d84656", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "lyftmodelexeclib": {"name": "lyftmodelexeclib", "description": "Library for inferencing for lyftlearn trained models", "repository": "git@github.com:lyft/python-lyft-modelexeclib.git", "slack": "#modelexec", "team_email": "ml-platform-team@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:233e13867a4fb32002e02ea84d1e8cd6e51069ed"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "deaff4c485fc8e87c2c39771e6d1636e7c68309a", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "233e13867a4fb32002e02ea84d1e8cd6e51069ed", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "233e13867a4fb32002e02ea84d1e8cd6e51069ed", "sub_image": null, "external": false}}, "lyftmongo": {"name": "lyftmongo", "description": "TODO short description of the service", "repository": "git@github.com:lyft/python-lyft-mongo.git", "report_ci": true, "credentials": true, "tests": [{"name": "python2", "type": "jailed", "command": "py.test"}, {"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest tests"}, {"name": "flake", "type": "jailed", "command": "flake8"}, {"name": "pep", "type": "jailed", "command": "pep8"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:2d65f074e0fb026e3235df94e323fff330d346d3"}}, "languages": ["python"], "image_type": "library", "version": "e77fdeb6a33bfd1966015cafc557bc8906106c58", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "2d65f074e0fb026e3235df94e323fff330d346d3", "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "2d65f074e0fb026e3235df94e323fff330d346d3", "external": false}}, "lyftnlplibs": {"name": "lyftnlplibs", "description": "common toolkit for natural language processing at Lyft", "repository": "git@github.com:lyft/python-lyft-nlp-libs.git", "slack": "#nlp-tools", "team_email": "arman@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:8eb74e3f575bc58ffe068e5e42d9d6e4f4aef8c8"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:1de17b2c133a84a6096806ef9ba985a9ac009b54", "sub_image": "precommit"}}]}}, "containers": [{"name": "devel", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["control.dev", "lyftnlplibs.devel"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "lyftnlplibs.dev", "container": "lyftnlplibs.devel", "target": "tests/integration", "virtualenv": "service_venv", "command": "make test_integration"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "e551b612e101bf0f080a8676c0fe1cf6d79163ba", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "8eb74e3f575bc58ffe068e5e42d9d6e4f4aef8c8", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "1de17b2c133a84a6096806ef9ba985a9ac009b54", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "8eb74e3f575bc58ffe068e5e42d9d6e4f4aef8c8", "sub_image": null, "external": false}}, "lyftnotifications": {"name": "lyftnotifications", "description": "Python library for Notifications services", "repository": "git@github.com:lyft/python-lyft-notifications.git", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "tests": [{"name": "python2", "type": "jailed", "command": "python -3 -m pytest --cov=lyft_notifications --cov-report=xml --cov-report=term-missing:skip-covered --no-cov-on-fail tests/unit"}, {"name": "python3", "type": "jailed", "command": "python -bb -m pytest --cov=lyft_notifications --cov-report=xml --cov-report=term-missing:skip-covered --no-cov-on-fail tests/unit"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["python"], "image_type": "library", "slack": "#notifications-bots", "team_email": "notifications-eng@lyft.com", "version": "1aad0025959303fe6dbfa704dcaf154c44bf2eb3", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "lyftpaxgrowthcommon": {"name": "lyftpaxgrowthcommon", "description": "Common code used in pax growth owned services.", "repository": "git@github.com:lyft/python-lyft-paxgrowth-common.git", "image_type": "library", "credentials": false, "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "slack": "#memberships", "team_email": "rider-memberships-eng@lyft.com", "version": "835068ef26544106ba32cf74be077945dfba3077", "images": [{"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "lyftpay": {"name": "lyftpay", "description": "TODO short description of the service", "repository": "git@github.com:lyft/python-payment-lib.git", "tests": [{"name": "python2", "type": "jailed", "command": "py.test tests/"}, {"name": "python3", "type": "jailed", "command": "python3 -b -m pytest tests/"}, {"name": "flake", "type": "jailed", "command": "flake8 --exclude=test_version_bump.py"}, {"name": "version-check", "type": "jailed", "command": "python test_version_bump.py"}], "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "image_type": "library", "languages": ["python"], "version": "c97a1d11e4ed755851b1aa56e88fc829018e692e", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "lyftpromotions": {"name": "lyftpromotions", "description": "Library for business logic concerning promotional modes and skins.", "repository": "git@github.com:lyft/python-lyft-promotions.git", "image_type": "library", "languages": ["python"], "tests": [{"name": "unit2", "type": "jailed", "command": "make test_unit2"}, {"name": "unit3", "type": "jailed", "command": "make test_unit3"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy"}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true}], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "slack": "#rider-preference", "team_email": "rider-pref-team@lists.lyft.com", "version": "62e9da548329e1f0b4a25d1f1453285307411076", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "lyftpublicapilib": {"name": "lyftpublicapilib", "description": "Helpers to parse user agents and other metadata from public client requests", "repository": "git@github.com:lyft/python-lyft-public-api-lib.git", "slack": "#identity-eng", "notification_overrides": {"pr_open": {"slack": "#identity-prs"}, "deploy": {"slack": "#identity-bots"}, "deploy_failure": {"slack": "#identity-bots"}, "test_failure": {"slack": "#identity-bots"}, "master_failure": {"slack": "#identity-bots"}, "pr_merge": {"slack": "#identity-bots"}, "behind_notifications": {"slack": "#identity-bots"}}, "team_email": "identity-eng@lyft.com", "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:9a6817d09be4b3f922a912818ea8c5de3b9dec37"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "tests": [{"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest tests"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "languages": ["python"], "image_type": "library", "version": "a76657374a2c02afbafacc3d87f937a4dffc153b", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "9a6817d09be4b3f922a912818ea8c5de3b9dec37", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "9a6817d09be4b3f922a912818ea8c5de3b9dec37", "sub_image": null, "external": false}}, "lyftpyhqlint": {"name": "lyftpyhqlint", "description": "Tools for introspecting HiveQL", "repository": "git@github.com:lyft/hqlint.git:lyft-pyhqlint", "slack": "#data-platform", "team_email": "dp-tools@lyft.com", "image_type": "library", "languages": ["python"], "credentials": false, "containers": [{"name": "sample", "privileged": true, "network": "host", "command": "/bin/bash -c 'while true; do sleep 3600; done'"}], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "mypy", "type": "jailed", "command": "make mypy"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "be57111b3e22eb8b04942efae7ddc9bbb5c8b490", "images": [{"parent": {"name": "pythonlibrary", "version": "2bf1167c8870fa7021d6e7270f527f6f8a263a60", "external": false}, "sub_image": null}], "parent": {"name": "pythonlibrary", "version": "2bf1167c8870fa7021d6e7270f527f6f8a263a60", "external": false}}, "lyftpypi": {"name": "lyftpypi", "description": "Internal gateway to private python packages", "repository": "git@github.com:lyft/lyftpypi.git", "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.k8s", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "api", "port": 80}]}, {"name": "service", "command": "/code/venvs/venv/bin/gunicorn --paste /code/configs/lyftpypi.ini --chdir /code/lyftpypi/", "workdir": "/code/lyftpypi", "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "lyftpypi.legacy"]}], "slack": "#compute-bots", "slack_deploy_notification_environments": ["staging", "production"], "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "facets": [{"name": "main", "member": "lyftpypi.service", "type": "service", "autoscaling": {"min_size": 6, "max_size": 30}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "infra", "cluster.lyft.net/environment": "production"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}}}, {"name": "production", "legacy": false, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "infra"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}}}], "languages": ["python", "bash"], "image_type": "service", "service_tier": 2, "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "version": "6b41284385517a021f6625b738c245996b7353fc", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "bionicbase", "version": "eaee436ed758c630fc3ec99b6a24c18c4e576c2b", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "lyftpypi2": {"name": "lyftpypi2", "description": "Next generation lyft internal pypi", "repository": "git@github.com:lyft/lyftpypi2.git", "slack": "#dev-environment", "team_email": "devx-team@lyft.com", "languages": ["python"], "image_type": "tool", "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "nginx", "sub_image": "nginx", "command": "/code/lyftpypi2/nginx/entrypoint", "exports": [{"name": "api", "port": 8000, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["metadataproxy.server", "lyftpypi2.spin"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.nginx", "sub_image": "nginx"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:a43a7cfe336576302cb5f62aad8ddde21dda8262", "sub_image": "precommit"}}]}}, "tests": [{"name": "lambdatest", "type": "jailed", "command": "pytest lambda/tests"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}]}], "version": "096b13cf7d2b3caef43470718096ef56da333523", "images": [{"parent": {"name": "bionicbase", "version": "aa2def7d5e3a85afbaeab852f3e256bad897ead6", "external": false}, "sub_image": null}, {"parent": {"name": "bionicbase", "version": "aa2def7d5e3a85afbaeab852f3e256bad897ead6", "external": false}, "sub_image": "nginx"}, {"parent": {"name": "precommit", "version": "a43a7cfe336576302cb5f62aad8ddde21dda8262", "external": false}, "sub_image": "precommit"}], "parent": {"name": "bionicbase", "version": "aa2def7d5e3a85afbaeab852f3e256bad897ead6", "external": false}}, "lyftpyre": {"name": "lyftpyre", "description": "Python bindings for routing engine", "repository": "git@github.com:lyft/pyroutingengine.git", "image_type": "library", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build", "params": {"dockerfile": "Dockerfile.pyre", "sub_image": "pyre_subimage"}}, {"name": "docker_build"}]}}, "containers": [{"name": "legacy", "command": "sleep infinity", "provision": "echo \"Merry Christmas\""}, {"name": "pyre", "sub_image": "pyre_subimage"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "tests": [{"name": "test_pyre", "type": "tool", "tool": "lyftpyre.pyre", "autotrigger": false}], "slack": "#eta-router", "team_email": "eta-team@lyft.com", "version": "dc160999ab0f9a5bb400c3f64940816bd1276c1b", "images": [{"parent": {"name": "pythonlibrary", "version": "510a8a2da66f3b3d14d1ea1e6583106f5a93ee34", "sub_image": null, "external": false}, "sub_image": "pyre_subimage"}, {"parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}}, "lyftrepositorypattern": {"name": "lyftrepositorypattern", "description": "Library for using the repository pattern to access data stores", "repository": "git@github.com:lyft/python-lyft-repository-pattern.git", "image_type": "library", "languages": ["python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:6d020ab9a22e9c28bd230e8a1f9f55b36d3b3b38", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:c6be9d8a156a4dd55b38765090e4128b4230f0b6"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "slack": "#pax-engagement-dev", "team_email": "pax-engagement-eng@lyft.com", "version": "2de1e5366920315c327b6dd4c556d150a97e65c7", "images": [{"parent": {"name": "precommit", "version": "6d020ab9a22e9c28bd230e8a1f9f55b36d3b3b38", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipythonlibrary", "version": "c6be9d8a156a4dd55b38765090e4128b4230f0b6", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "c6be9d8a156a4dd55b38765090e4128b4230f0b6", "sub_image": null, "external": false}}, "lyftrequests": {"name": "lyftrequests", "description": "Library for request helper modules and service-to-service/external communication clients", "repository": "git@github.com:lyft/python-lyft-requests.git", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:66d815e6ba03c9515c0c2273ecca13036015715d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest tests"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["bash", "python"], "image_type": "library", "slack": "#networking", "notification_overrides": {"deploy": {"slack": "#networking-bots", "environments": ["production", "staging"]}, "pr_merge": {"slack": "#networking-bots"}}, "team_email": "network-team@lyft.com", "version": "10afb307e4729f35c5b4aeb13ae4767363866a41", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "lyftrewardsint": {"name": "lyftrewardsint", "description": "Lyft Rewards internal configuration tool", "repository": "git@github.com:lyft/lyftrewardsint.git", "slack": "#driver-labs-bot", "team_email": "driver-labs-eng@lyft.com", "pagerduty_escalation_policy": "Driver Labs", "image_type": "service", "service_tier": 3, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "lyftrewardsint.legacy"]}, {"name": "service_group", "members": ["lyftrewardsint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "lyftrewardsint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "lyftrewardsint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null}}}}, "version": "a68ea58987f50432ea474f533d071ad44d51fc00", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "lyfts3": {"name": "lyfts3", "description": "Lyft client library for AWS S3", "repository": "git@github.com:lyft/python-lyft-s3.git", "credentials": true, "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:77bc248dcdf3d408786f858d3916c931a07c4f11"}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "command": "make lint"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["python"], "image_type": "library", "version": "0cdd10643b5d3fe330cbd289b12f606fd9b6fe9b", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "77bc248dcdf3d408786f858d3916c931a07c4f11", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "77bc248dcdf3d408786f858d3916c931a07c4f11", "sub_image": null, "external": false}}, "lyftservicecontroller": {"name": "lyftservicecontroller", "description": "lyftservicecontroller", "image_type": "service", "repository": "git@github.com:lyft/lyftservicecontroller.git", "slack": "#devx-bots", "service_tier": 2, "team_email": "devx-team@lyft.com", "pagerduty_escalation_policy": "DevX", "languages": ["go"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igo:fa0c4921e2e8481015324ac1a2b841013a1a2fdf"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "service", "command": "lyftservicecontroller"}], "groups": [{"name": "dev", "members": ["lyftservicecontroller.service"]}], "tests": [{"name": "lint", "type": "jailed", "command": "pre-commit run --all-files --show-diff-on-failure", "sub_image": "precommit"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "coverage", "type": "jailed", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}], "facets": [{"name": "main", "type": "direct", "direct": {"paths": ["lyftservicecontroller"]}}], "deploy": [[{"name": "staging", "legacy": false}, {"name": "production-devkubestaging", "automatic": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}, "clusterLabels": {"cluster.lyft.net/role": ["devkubestaging"]}}, "legacy": false}], {"name": "production", "automatic": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}, "clusterLabels": {"cluster.lyft.net/role": ["devkube"]}}, "legacy": false}], "version": "3ba7f64cf105935db69648c800e7cc92cbfa1855", "images": [{"parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}}, "lyftsettings": {"name": "lyftsettings", "description": "Python Library providing a typed interface to environment variables", "repository": "git@github.com:lyft/python-lyft-settings.git", "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit2", "type": "jailed", "command": "make test_unit"}, {"name": "unit3", "type": "jailed", "command": "make test_unit3"}, {"name": "flake", "type": "jailed", "command": "flake8"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy"}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true}], "languages": ["python"], "image_type": "library", "version": "6d8f59a1589eed5e2b98ca0a30a66dc3a5734ede", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "lyftstats": {"name": "lyftstats", "description": "Library for stats", "repository": "git@github.com:lyft/python-lyft-stats.git", "team_email": "observability-team@lyft.com", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "python2", "type": "jailed", "command": "python -3 -m pytest tests"}, {"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest tests"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["python"], "image_type": "library", "version": "22e4982b65afa28672ecef1f12a7758cbd4b4a41", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "lyftstdlib": {"name": "lyftstdlib", "description": "A Python library of common idioms used in Lyft microservices", "repository": "git@github.com:lyft/python-lyft-stdlib.git", "credentials": false, "credentials_legacy": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "containers": [{"name": "test", "command": "sleep infinity"}], "groups": [{"name": "tester", "members": ["lyftstdlib.test"]}], "tests": [{"name": "python2", "type": "execution", "command": "make unit_python2", "group": "lyftstdlib.tester", "container": "lyftstdlib.test"}, {"name": "python3", "type": "execution", "command": "make unit_python3", "group": "lyftstdlib.tester", "container": "lyftstdlib.test"}, {"name": "lint", "type": "jailed", "command": "pre-commit run --all-files --show-diff-on-failure", "sub_image": "precommit"}, {"name": "version_bump", "type": "execution", "group": "lyftstdlib.tester", "container": "lyftstdlib.test", "command": "python test_version_bump.py"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "image_type": "library", "python": {"py3k": {"linters": ["modernize", "pylint"], "exclude": ["tests", "lyft/analytics_event_utils.py", "lyft/envoy_redis_migration.py", "lyft/gevent/pool.py", "lyft/scripts/create_lmdb_databases_from_mapping_dat.py", "lyft/uuid.py"]}}, "languages": ["python"], "version": "67559ef7c89f19d9d5f222fbe07bfeb746b465e8", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "lyftstreamcheck": {"name": "lyftstreamcheck", "description": "A python monitor client for streamcheck service", "repository": "git@github.com:lyft/python-lyft-streamcheck.git", "slack": "#data-ingest-alerts", "team_email": "dataingest@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "python2", "type": "jailed", "command": "python -3 -m pytest tests"}, {"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest tests"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "8a495b5ecfb9509a3682c4be49e54a6199258db6", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "lyftswitchboard": {"name": "lyftswitchboard", "description": "Modules for querying the driver/passenger switchboard shared by public API and switchboard service.", "repository": "git@github.com:lyft/python-lyft-switchboard.git", "tests": [{"name": "python2", "type": "jailed", "command": "python -3 -m pytest tests"}, {"name": "python3", "type": "jailed", "command": "python3 -b -m pytest tests"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["python"], "image_type": "library", "slack": "#notifications-bots", "team_email": "notifications-eng@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "version": "7616c409c3439392c7db5f2a1df1e4aa91f2b86f", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "lyfttbldr": {"name": "lyfttbldr", "description": "Framework for generating column-level summary stats for tables in your data warehouse", "repository": "git@github.com:lyft/analytics-table-stats.git", "image_type": "library", "languages": ["python"], "containers": [{"name": "test", "command": "/bin/bash -c 'while true; do sleep 3600; done'"}], "groups": [{"name": "tester", "members": ["control.dev", "lyfttbldr.test", "hivemetastore.dev"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit", "group": "lyfttbldr.tester", "container": "lyfttbldr.test"}, {"name": "integration", "type": "restricted", "command": "make test_integration", "group": "lyfttbldr.tester", "container": "lyfttbldr.test", "whitelist": ["lyfttbldr-development-iad-onebox.lyft.net.", "hivemetastore-development-iad-onebox.lyft.net."]}, {"name": "lint", "type": "jailed", "command": "make lint", "group": "lyfttbldr.tester", "container": "lyfttbldr.test"}], "python": {"mypy": {"python_versions": ["3.6"], "exclude": ["tests"]}}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "2450c71886167838764d5d3cebfbc6ddf5a938f0", "images": [{"parent": {"name": "pythonlibrary", "version": "d11ee40942f424088df3107d5d1a7f82bfbe8866", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "pythonlibrary", "version": "d11ee40942f424088df3107d5d1a7f82bfbe8866", "sub_image": null, "external": false}}, "lyfttelematicsdata": {"name": "lyfttelematicsdata", "description": "access to phone telematics data", "repository": "git@github.com:lyft/python-lyft-telematics-data.git", "slack": "#insurance", "team_email": "insurance-tech@lists.lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests/unit"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "84c552571e337b38f0e0ac870e365307f90944fd", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "lyfttestbestpractices": {"name": "lyfttestbestpractices", "description": "test best practices helper", "repository": "git@github.com:lyft/lyfttestbestpractices.git", "slack": "#ci-bots", "team_email": "test-frameworks@lyft.com", "image_type": "tool", "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:431b58e72ff19dbc9960ab39037ad568711359fa"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": "precommit"}}]}}, "containers": [{"name": "spin", "command": "sleep infinity", "mounts": ["/srv/control", "/var/run/docker_sockets"]}, {"name": "jailunittests", "command": "service_venv python -m src.migrators.jailed_unit_test_migrator", "mounts": ["/srv/control", "/var/run/docker_sockets"]}], "groups": [{"name": "dev", "members": ["lyfttestbestpractices.spin"]}], "tests": [{"name": "startup", "type": "startup", "group": "lyfttestbestpractices.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "automatic": true, "legacy": false}, {"name": "production", "legacy": false}], "version": "269143276cc8b8b45e91bcb4756eb22e51d5483b", "images": [{"parent": {"name": "opsbase", "version": "431b58e72ff19dbc9960ab39037ad568711359fa", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "431b58e72ff19dbc9960ab39037ad568711359fa", "sub_image": null, "external": false}}, "lyfttestlib": {"name": "lyfttestlib", "description": "Test library that provides service clients for interactions", "repository": "git@github.com:lyft/python-lyft-testlib.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:1678499b05ddb7f22194f1519ccdec75e36891da"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.integration", "sub_image": "integration"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "containers": [{"name": "int", "sub_image": "integration", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "envoy.server", "dynamodb.server", "elasticsearch.dev", "mongodb.server", "postgresql.server", "redis.server", "sqs.server", "abacus.legacy", "account.legacy", "ats.qa_approve", "auth.legacy", "coupons.legacy", "dbproxyauth.legacy", "dbproxyroutes.legacy", "dispatch.legacy", "dispatchavailability.legacy", "drivermode.legacy", "enterprise.legacy", "etablender.legacy", "etaproxy.legacy", "fare.legacy", "green.legacy", "jobscheduler.legacy", "karma.legacy", "ledger.legacy", "legacyapi.legacy", "legacyoauth.legacy", "legacyridetypes.legacy", "locations.legacy", "matching.service", "matchingsolver.legacy", "payapi.legacy", "places.legacy", "pricing.legacy", "publicapi.legacy", "push.legacy", "pusher.service", "ratelimit.legacy", "ratings.legacy", "regions.legacy", "rides.legacy", "ridesapi.legacy", "ridetimeestimator.legacy", "ridexppredictor.legacy", "roads.legacy", "routes.legacy", "routesapi.dev", "routingengine.legacy", "supply.legacy", "supplyrecords.service", "switchboard.legacy", "tcs.legacy", "trips.dev", "tripsapi.legacy", "userpreferences.legacy", "users.legacy", "venues.legacy", "viewport.legacy", "wallet.legacy", "walletapi.legacy", "lyfttestlib.int", "vehicleservicecenters.legacy", "fleetlocations.legacy"]}, {"name": "core", "members": ["control.dev", "envoy.server", "dynamodb.dev", "mongodb.dev", "postgresql.dev", "redis.dev", "dbproxyauth.legacy", "dborchestrator.legacy", "account.legacy", "auth.legacy", "legacyapi.legacy", "legacyoauth.legacy", "supply.legacy", "regions.legacy", "users.legacy"]}, {"name": "driver", "members": ["lyfttestlib.core", "elasticsearch.server", "sqs.server", "ats.legacy", "backgroundcheck.legacy", "compliance.service", "dbproxyroutes.legacy", "drivermode.legacy", "driverridesinfo.legacy", "green.legacy", "jobscheduler.legacy", "locations.legacy", "matchingexecution.legacy", "routes.legacy", "routesapi.legacy", "supplyrecords.service", "trips.legacy", "tripsapi.legacy", "usergroups.legacy", "viewport.legacy"]}, {"name": "pay", "members": ["lyfttestlib.core", "green.legacy", "wallet.legacy", "walletapi.legacy"]}, {"name": "ride", "members": ["lyfttestlib.core", "lyfttestlib.pay", "lyfttestlib.driver", "elasticsearch5.server", "abacus.legacy", "badcompanions.legacy", "dbproxytrips.legacy", "dispatch.legacy", "dispatchavailability.legacy", "etablender.legacy", "etaproxy.legacy", "fare.legacy", "ghostmatching.legacy", "ledger.legacy", "legacyridetypes.legacy", "matching.service", "matchingexecution.legacy", "matchingsolver.legacy", "matchingstate.legacy", "payapi.legacy", "pricing.legacy", "publicapi.legacy", "ratings.legacy", "rides.legacy", "ridesapi.legacy", "venues.legacy"]}, {"name": "core_test", "members": ["lyfttestlib.core", "lyfttestlib.int"]}, {"name": "pay_test", "members": ["lyfttestlib.pay", "lyfttestlib.int"]}, {"name": "driver_test", "members": ["lyfttestlib.driver", "lyfttestlib.int"]}, {"name": "ride_test", "members": ["lyfttestlib.ride", "lyfttestlib.int"]}], "tests": [{"name": "python2", "type": "jailed", "command": "make unit_python2", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml"}}, {"name": "python3", "type": "jailed", "command": "make unit_python3", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "sharded", "group": "control.dev", "execution_group": "lyfttestlib.ride_test", "container": "lyfttestlib.int", "target": "tests/integration", "virtualenv": "service_venv", "skip_threshold": 999, "reports": {"cobertura": "build/coverage.xml", "junit": "build/int.xml"}}, {"name": "integration_core", "type": "sharded", "group": "control.dev", "execution_group": "lyfttestlib.core_test", "container": "lyfttestlib.int", "target": "tests/integration/scenarios/core", "virtualenv": "service_venv", "autotrigger": false, "float_dependencies": "*/30 5-22 * * *", "reports": {"cobertura": "build/coverage.xml", "junit": "build/int.xml"}}, {"name": "integration_pay", "type": "sharded", "group": "control.dev", "execution_group": "lyfttestlib.pay_test", "container": "lyfttestlib.int", "target": "tests/integration/scenarios/pay", "virtualenv": "service_venv", "autotrigger": false, "float_dependencies": "*/30 5-22 * * *", "reports": {"cobertura": "build/coverage.xml", "junit": "build/int.xml"}}, {"name": "integration_driver", "type": "sharded", "group": "control.dev", "execution_group": "lyfttestlib.driver_test", "container": "lyfttestlib.int", "target": "tests/integration/scenarios/driver", "virtualenv": "service_venv", "autotrigger": false, "float_dependencies": "*/15 5-22 * * *", "reports": {"cobertura": "build/coverage.xml", "junit": "build/int.xml"}}, {"name": "integration_ride", "type": "sharded", "group": "control.dev", "execution_group": "lyfttestlib.ride_test", "container": "lyfttestlib.int", "target": "tests/integration/scenarios/ride", "virtualenv": "service_venv", "autotrigger": false, "float_dependencies": "*/15 5-22 * * *", "reports": {"cobertura": "build/coverage.xml", "junit": "build/int.xml"}}, {"name": "integration_ride_fixtures", "type": "execution", "group": "lyfttestlib.ride_test", "container": "lyfttestlib.int", "command": "make test_integration_ride_fixtures", "autotrigger": false, "fixtures": [{"container": "walletapi.legacy"}, {"container": "wallet.legacy"}, {"container": "payapi.legacy"}]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["python"], "image_type": "library", "credentials_legacy": false, "slack": "#ci-bots", "team_email": "test-frameworks@lyft.com", "notification_overrides": {"test_failure": {"slack": "#tf-core-team"}, "master_failure": {"slack": "#tf-core-team"}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "lyfttestlib"}], "common_settings": {"internal_hosts": {"ridesapi": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}}}}, "version": "7f9dcde34baffda50315f9f58a8c99b0279e584b", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "1678499b05ddb7f22194f1519ccdec75e36891da", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": "integration"}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "1678499b05ddb7f22194f1519ccdec75e36891da", "sub_image": null, "external": false}}, "lyfttracing": {"name": "lyfttracing", "description": "Library for Tracing", "repository": "git@github.com:lyft/python-lyft-tracing.git", "image_type": "library", "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, "tests": [{"name": "python2", "type": "jailed", "command": "python -3 -m pytest tests"}, {"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest tests"}, {"name": "flake8", "type": "jailed", "command": "make lint"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy"}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true}], "slack": "#networking", "team_email": "networking@lyft.com", "languages": ["python"], "version": "89e1641b92e671f92b9bb1e2a105c40267259e21", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "lyftuserclient": {"name": "lyftuserclient", "description": "Library containing a Python implementation of the Lyft client and a collection of strategies that mimic user behavior.", "repository": "git@github.com:lyft/python-lyft-userclient.git", "image_type": "library", "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "containers": [{"name": "devel", "command": "/bin/bash -c 'while true; do sleep 3600; done'"}], "groups": [{"name": "dev", "members": ["control.dev", "lyftuserclient.devel"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "./test_unit.sh"}, {"name": "integration", "type": "jailed", "command": "python3.6 -m pytest tests/integration"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy"}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true}], "slack": "#sim-bots", "team_email": "simulation-platforms@lyft.com", "docs": {"autogen_env": "python3.6", "autogen_modules": ["lyft_userclient"]}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "version": "49f6309a5d9a555b07c22a64652e3a1a6d06597d", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "lyftusereligibilities": {"name": "lyftusereligibilities", "description": "Python library for interacting with the usereligibilities service.", "repository": "git@github.com:lyft/python-lyft-usereligibilities.git", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "slack": "#memberships", "team_email": "rider-memberships-eng@lyft.com", "version": "85cc42599d3670e34ff6e77df3164b1fc2f54207", "images": [{"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "m3": {"name": "m3", "description": "Because Splunk", "repository": "git@github.com:lyft/m3-private.git", "image_type": "service", "team_email": "observability-visibility-team@lyft.com", "pagerduty_escalation_policy": "Observability Visibility", "slack": "#m3", "notification_overrides": {"deploy": {"slack": "#m3"}, "pr_merge": {"slack": "#m3"}}, "service_tier": 3, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.sysctl", "sub_image": "sysctl"}}]}}, "deploy": [{"name": "staging", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}, "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}, "interpolation_vars": {"coordinator_cpu": "25", "coordinator_memory": "61Gi", "db_cpu": 48, "db_memory": "182Gi", "db_disk": "3400Gi", "db_replication_factor": 3, "db_nodes_per_isolation_group": 9, "db_shard_count": 1024}}}, {"name": "production", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}, "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}, "interpolation_vars": {"coordinator_cpu": 25, "coordinator_memory": "61Gi", "db_cpu": 12, "db_memory": "115Gi", "db_disk": "3400Gi", "db_replication_factor": 3, "db_nodes_per_isolation_group": 15, "db_shard_count": 1024}}}], "version": "9c742c0cf8cc453c93f17296e8464b8fac358b8b", "images": [{"parent": {"name": "scratch", "version": "", "sub_image": null, "external": true}, "sub_image": null}, {"parent": {"name": "ubuntu", "version": "bionic", "sub_image": null, "external": true}, "sub_image": "sysctl"}], "parent": {"name": "scratch", "version": "", "sub_image": null, "external": true}}, "m3dbetcd": {"name": "m3dbetcd", "description": "Etcd clusters used by m3", "repository": "git@github.com:lyft/m3db-etcd.git", "image_type": "service", "team_email": "observability-visibility-team@lyft.com", "slack": "#m3", "pagerduty_escalation_policy": "Observability Visibility", "service_tier": 3, "deploy": [{"name": "staging", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}, "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}}}, {"name": "production", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}, "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}}}], "version": "9b84744ec41e81a852f40166203f52b54a552340", "images": [{"parent": {"name": "scratch", "version": "", "sub_image": null, "external": true}, "sub_image": null}], "parent": {"name": "scratch", "version": "", "sub_image": null, "external": true}}, "m3dboperator": {"name": "m3dboperator", "description": "Kubernetes Operator for M3DB", "repository": "git@github.com:lyft/m3db-operator-private.git", "image_type": "service", "team_email": "observability-visibility-team@lyft.com", "slack": "#m3", "pagerduty_escalation_policy": "Observability Visibility", "service_tier": 3, "deploy": [{"name": "staging", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}, "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}}}, {"name": "production", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}, "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}}}], "version": "64ed7a714d73eb088930e038dbe9f54011903412", "images": [{"parent": {"name": "bionicbase", "version": "ee338ebf71e054b132773aefdd8870b1bd4f3aa2", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "ee338ebf71e054b132773aefdd8870b1bd4f3aa2", "sub_image": null, "external": false}}, "mailer": {"name": "mailer", "description": "mailer", "repository": "git@github.com:lyft/mailer.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- service_venv gunicorn wsgi:app --workers=2 --forwarded-allow-ips=\"*\" -k gevent --worker-connections=1000 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/mailer", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "elasticsearch5.server", "redis.dev", "mailer.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "mailer.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "mailer.dev", "container": "mailer.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#notifications-bots", "team_email": "notifications-eng@lyft.com", "pagerduty_escalation_policy": "Notifications", "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"legacy": false, "name": "production", "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "languages": ["javascript", "python"], "image_type": "service", "service_tier": 1, "envoy": {"profile": "python", "settings": {"services": [{"name": "mailer"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 200}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"jobschedulerbulkweb": null, "jobschedulernormalweb": null, "messaging": null, "ratelimit": null, "tcs": null, "users": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "mailgun": null, "s3_iad": null}, "redis": {"mailermultiredis": {"port": 6380}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}]}}, "facets": [{"name": "main", "member": "mailer.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-env.sls"], "autoscaling": {"criteria": {"cpu_target": 30}, "environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 400}}}}, {"name": "canary", "member": "mailer.service", "type": "service", "canary": true, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-env.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}], "logging": {"mailer": {"fields": {"email_address": "keyword", "user_id": "keyword", "category": "keyword", "owner": "keyword", "subject": "keyword", "subscription_category": "keyword", "email_id": "keyword", "exacttarget_job_id": "keyword", "overwrite": "boolean", "subscription_categories": "keyword", "unsubscribed": "keyword", "to": "keyword", "from_address": "keyword", "error": "keyword", "message_template_id": "keyword", "email": "keyword", "relayed_by": "keyword", "message_provider_id": "keyword", "status": "keyword", "provider_occurred_at": "keyword", "channel": "keyword", "domain": "keyword", "provider": "keyword", "provider_message_id": "keyword", "url": "keyword", "endpoint": "keyword", "dedupe_key": "keyword", "ride_id": "keyword", "tags": "keyword", "response": {"expiresIn": "long"}, "reference_ids": "keyword", "status_code": "long", "payload": "keyword", "subscribed": "keyword", "enable_tracking": "boolean", "code": "long", "response_body": "keyword", "request": "keyword", "response_text": "keyword", "kv": {"event_sender": "keyword"}, "__metadata__": {"fanner_time": "keyword", "aic_time": "keyword", "logged_at": "keyword"}, "is_simulated_ride": "boolean", "user": "keyword", "event_id": "keyword", "http_id": "keyword", "reporter_ip_address": "keyword", "source_pipeline": "keyword", "occurred_at": "keyword", "reporter_hostname": "keyword", "user_lyft_id": "keyword", "event_name": "keyword", "old_email": {"sender": "keyword", "to": "keyword", "s3_key": "keyword", "updated_at_ms": "keyword", "from_domain": "keyword", "category": "keyword", "subject": "keyword", "custom_data": "keyword", "email_id": "keyword", "created_at_ms": "keyword", "message_template_id": "keyword", "user_id": "keyword", "sent_at_ms": "keyword", "provider_id": "keyword", "delivered_at_ms": "keyword", "dedupe_key": "keyword", "ride_id": "keyword", "failure_reason": "keyword", "opened_at_ms": "keyword"}, "new_email": {"subject": "keyword", "email_id": "keyword", "custom_data": "keyword", "category": "keyword", "from_domain": "keyword", "updated_at_ms": "keyword", "s3_key": "keyword", "created_at_ms": "keyword", "to": "keyword", "sender": "keyword", "message_template_id": "keyword", "user_id": "keyword", "dedupe_key": "keyword", "ride_id": "keyword"}, "campaign": "keyword", "reason": "keyword", "source": "keyword", "from": "keyword", "cc": "keyword", "exc": "keyword", "prevent_exacttarget_sync": "boolean", "enable_open_tracking_only": "boolean", "content": "keyword", "nsq_topic": "keyword", "nsq_num": "long"}}}, "version": "863ec18194ee5dbac75bdd4c2979a722bb2783fa", "images": [{"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "makeemail": {"name": "makeemail", "description": "TODO short description of the service", "repository": "git@github.com:lyft/make-email.git", "tests": [{"name": "python2", "type": "jailed", "command": "python -3 -m pytest"}, {"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "python": {"py3k": {"linters": ["modernize", "pylint"]}}, "image_type": "tool", "languages": ["python"], "version": "b893a8f36b0e9e1e982342b4eb7322469914f938", "images": [{"parent": {"name": "pythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "pythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "malwaresignatures": {"team_email": "security-team@lyft.com", "tests": [{"type": "startup", "group": "malwaresignatures.dev", "name": "startup"}, {"container": "malwaresignatures.legacy", "command": "make test_lint", "group": "malwaresignatures.dev", "name": "lint", "type": "execution"}], "slack": null, "repository": "git@github.com:lyft/malwaresignatures.git", "deploy": [{"legacy": true, "automatic": true, "name": "development"}, {"legacy": true, "automatic": true, "name": "staging"}, {"legacy": true, "name": "production"}], "name": "malwaresignatures", "version": "4ad88e09eccd8c54eccf1d349a9867171a9f6137", "parent": {"version": "10b756fe9f2d5a0d2791787c1f3d327a3931730f", "name": "opsbase", "buildargs": ["IAM_ROLE"], "external": false}, "groups": [{"name": "dev", "members": ["control.dev", "malwaresignatures.legacy"]}], "containers": [{"command": "/code/ops/base/entrypoint.sh", "start_time": 600, "provision": "/code/ops/base/starters/post_starters.sh", "name": "legacy"}, {"once": true, "command": "/code/malwaresignatures/run_entrypoint.sh", "name": "run", "start_phase": "sequential_init"}], "description": "Malware signatures data-deploy build and publishing"}, "manifestaggregator": {"name": "manifestaggregator", "description": "manifestaggregator", "repository": "git@github.com:lyft/manifestaggregator.git", "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "containers": [{"name": "run", "command": "/srv/lambda/venv/bin/python -m manifestaggregator.aws_lambda.lambda_function"}], "groups": [{"name": "dev", "members": ["control.minimal", "manifestaggregator.run"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}]}], "image_type": "lambda", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}]}}, "version": "0a86f4ab125ac7643e905a5eb55079c1e3345c65", "images": [{"parent": {"name": "lambci/lambda", "version": "build-python3.6", "sub_image": null, "external": true}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "lambci/lambda", "version": "build-python3.6", "sub_image": null, "external": true}}, "manifestlint": {"name": "manifestlint", "description": "a linter for manifests", "repository": "git@github.com:lyft/manifestlint.git", "slack": "#devx-bots", "team_email": "devx-team@lyft.com", "docs": {"section": "Infrastructure"}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "lint", "command": "/code/manifestlint/entrypoint.sh", "mounts": ["/var/run/docker_sockets", "/srv/control"]}], "groups": [{"name": "dev", "members": ["dnsmasq.server", "metadataproxy.server", "manifestlint.lint"]}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}]}], "languages": ["bash", "python"], "image_type": "tool", "tests": [{"name": "unit", "type": "jailed", "command": "pytest -vvv /code/manifestlint/tests/unit/"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "version": "9b3eb9b92a3d907077ba18a6836018817a96997b", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "mapattributes": {"name": "mapattributes", "repository": "git@github.com:lyft/mapattributes.git", "description": "Service for search functionalities over the map elements in the Lyft Map", "service_tier": 2, "team_email": "navxp-eng@lyft.com", "pagerduty_escalation_policy": "NavXP", "slack": "#mapping-nav-bots", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2igocli:e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": "k8s", "packages": ["awscli"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- mapattributes", "limits": {"cpu": 4, "memory": "512Mi"}, "sub_image": "k8s", "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "mapattributes.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "mapattributes.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "mapattributes.dev", "container": "mapattributes.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "coverage", "type": "jailed", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}], "facets": [{"name": "main", "member": "mapattributes.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "mapattributes.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "23:59 America/Los_Angeles"}, "deploy": [{"name": "staging", "automatic": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "automatic": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production", "automatic": true, "bake_time_minutes": 0, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "mapattributes"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}}}}, "logging": {"mapattributes": {"fields": {"map_version": "keyword", "method": "keyword", "service": "keyword", "valid_map_versions": "keyword"}}}, "version": "36ef6953f31c052170bcb4f998e20d9e730161b7", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "mapcuration": {"name": "mapcuration", "description": "Python service used for creating, assigning, and servicing data curation tasks for the MAP organization", "repository": "git@github.com:lyft/mapcuration.git", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "spin", "command": "sleep infinity"}], "slack": "#av-kn-viz-bots", "pagerduty_escalation_policy": "AV Knowledge Visualization", "team_email": "talos@lyft.com", "groups": [{"name": "dev", "members": ["control.dev", "acl.dev", "imageryingest.dev", "redis.dev", "mapcuration.legacy", "multiredis.dev", "elasticsearch6.dev", "jobscheduler.dev", "mailer.dev", "tcs.legacy", "sqs.server"]}, {"name": "unittest", "members": ["mapcuration.spin"]}], "tests": [{"name": "startup", "type": "startup", "group": "mapcuration.dev"}, {"name": "unit", "type": "execution", "group": "mapcuration.unittest", "container": "mapcuration.spin", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "mapcuration"}, {"name": "mapcurationbatch"}], "common_settings": {"internal_hosts": {"mailer": null, "imageryingest": null, "tcs": null}, "external_hosts": {"kinesis_iad": null, "spannergoogleapis": null, "s3_iad": null, "firehose_iad": null}, "redis": {"mapcurationmultiredis": {"port": 6380, "op_timeout_ms": 1250, "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}}}}, "logging": {"mapcuration": {"fields": {"field_name": "keyword", "error_msg": "keyword", "error_id": "keyword", "event_name": "keyword", "error_code": "long", "client_type": "keyword", "message": "keyword", "endpoint": "keyword", "is_internal": "boolean", "major_app_version": "keyword", "os": "keyword"}}, "mapcurationbatch": {"fields": {"event_name": "keyword", "error_id": "keyword", "field_name": "keyword", "error_msg": "keyword"}}}, "version": "fce95b01be40b4342d2f515ecf5d00575b4aa11e", "images": [{"parent": {"name": "opsbase", "version": "bd8615cdc0a53fe60b894b4b0cc3447deeb0e366", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "bd8615cdc0a53fe60b894b4b0cc3447deeb0e366", "sub_image": null, "external": false}}, "mapcurationfe": {"name": "mapcurationfe", "description": "Frontend service for human operators to complete data curation tasks for MAP org", "repository": "git@github.com:lyft/mapcurationfe.git", "image_type": "service", "service_tier": 2, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"service_type": "nodejs", "internal_service": true, "frontend_service": true}, "frontend": {"node_version": "8.12.0-1nodesource1"}, "slack": "#av-kn-viz-bots", "pagerduty_escalation_policy": "AV Knowledge Visualization", "team_email": "talos@lyft.com", "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "mapcurationfe.legacy", "imageryingest.dev", "mapcuration.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "mapcurationfe.dev"}, {"name": "unit", "type": "execution", "group": "mapcurationfe.dev", "container": "mapcurationfe.legacy", "command": "make test_coverage"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "deploy": [{"name": "staging", "automatic": true, "legacy": true, "bake_time_minutes": 1, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "bake_time_minutes": 1, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "mapcurationfe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"acl": null, "avingest": null, "avstapling": null, "avxrays": null, "imageryingest": null, "mapcuration": null, "tcs": null, "privacyaudit": null}, "redis": {"mapcurationfemultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}}}}, "version": "fc76f3d990f537a1939500265d3ec15d586bae86", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "mapeditorfe": {"name": "mapeditorfe", "description": "Frontend service for visualizing and editing an AV map", "repository": "git@github.com:lyft/mapeditorfe.git", "slack": "#av-kn-viz-bots", "team_email": "talos@lyft.com", "pagerduty_escalation_policy": "AV Knowledge Visualization", "image_type": "service", "service_tier": 3, "languages": ["bash", "javascript"], "credentials": false, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "mapeditorfe.legacy"]}, {"name": "service_group", "members": ["mapeditorfe.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "mapeditorfe.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "mapeditorfe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null}}}}, "version": "c7867ac5d921467852ebc6b79e9c15fdd816fae5", "images": [{"parent": {"name": "opsbase", "version": "49dd0dfae9cc8fb0ead221682d5a4e774b7fc089", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "49dd0dfae9cc8fb0ead221682d5a4e774b7fc089", "sub_image": null, "external": false}}, "mapelement": {"name": "mapelement", "description": "A service to serve basemap data. Basemap data consists of all the map elments used at Lyft, road network segment, road network nodes, lane, intersection, building footprint, traffic control elements to name a few, and the list will grow.", "repository": "git@github.com:lyft/mapelement.git", "image_type": "service", "service_tier": 3, "slack": "#base-maps-bot", "team_email": "basemap-eng@lyft.com", "pagerduty_escalation_policy": "basemap-service", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/mapelement", "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["control.dev", "mapelement.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "mapelement.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "bake_time_minutes": 1}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "facets": [{"name": "main", "member": "mapelement.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "canary", "member": "mapelement.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "envoy": {"profile": "python", "settings": {"services": [{"name": "mapelement"}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:deb42d25da0e6d5fe565c019883e458b4b31b696"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "logging": {"mapelement": {"fields": {"exception": {"message": "keyword", "class": "keyword"}}}}, "version": "f6c756840347e98034013acea72acb54883669f8", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "mapgraph": {"name": "mapgraph", "description": "Map-as-graph interface", "repository": "git@github.com:lyft/mapgraph.git", "credentials_legacy": false, "image_type": "library", "languages": ["python"], "containers": [{"name": "devel", "privileged": true, "command": "sleep infinity", "provision": "run-parts --verbose --exit-on-error /code/mapgraph/provision/"}], "groups": [{"name": "dev", "members": ["control.dev", "mapgraph.devel"]}], "tests": [{"name": "python2", "type": "execution", "group": "mapgraph.dev", "container": "mapgraph.devel", "command": "python -3 -m pytest tests"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "docs": {"autogen_modules": ["mapgraph"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "version": "7acb6185eb4f2d34726526bdfe17adeead164183", "images": [{"parent": {"name": "pythonlibrary", "version": "43289f67531b4d2721c10c101192632d25ec4912", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "43289f67531b4d2721c10c101192632d25ec4912", "sub_image": null, "external": false}}, "mapmatching": {"name": "mapmatching", "description": "Python mapmatching library", "repository": "git@github.com:lyft/mapmatching.git", "credentials": true, "credentials_legacy": false, "containers": [{"name": "devel", "command": "/bin/bash -c 'while true; do sleep 3600; done'", "provision": "run-parts --verbose --exit-on-error /code/mapmatching/provision/"}], "groups": [{"name": "dev", "members": ["control.dev", "mapmatching.devel"]}], "slack": "#locations", "team_email": "locations-eng@lyft.com", "tests": [{"name": "startup", "type": "startup", "group": "mapmatching.dev"}, {"name": "unit", "type": "execution", "group": "mapmatching.dev", "container": "mapmatching.devel", "command": "pytest --junit-xml=build/unit.xml --cov=. --cov-report=xml tests/unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "mapmatching.dev", "container": "mapmatching.devel", "command": "bash -c \"make sync_analysis && pytest --junit-xml=build/int.xml tests/integration\"", "reports": {"junit": "build/int.xml"}}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["python"], "image_type": "library", "docs": {"autogen_modules": ["mapmatching"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "ba3d568e948d2d0efd75621eaaef66b3b79482d1", "images": [{"parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}}, "mappinginternal": {"name": "mappinginternal", "description": "Frontend for Mapping Internal Tools and Visualizations", "repository": "git@github.com:lyft/mappinginternal.git", "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"internal_service": true, "frontend_service": true}, "slack": "#base-maps-bot", "pagerduty_escalation_policy": "basemap-service", "team_email": "basemap-eng@lyft.com", "groups": [{"name": "dev", "members": ["control.dev", "mappinginternal.legacy", "tom.dev", "locations.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "mappinginternal.dev"}, {"name": "unit", "type": "execution", "group": "mappinginternal.dev", "container": "mappinginternal.legacy", "command": "make test_coverage", "reports": {"cobertura": ".coverage/cobertura-coverage.xml"}}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "deploy": [{"name": "staging", "automatic": true, "legacy": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "languages": ["javascript"], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "mappinginternal"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"tom": null}}}}, "version": "adb18420fe283564cfc96333a242c83448a65d05", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "mappingperception": {"name": "mappingperception", "description": "AV Scenarios code base library", "repository": "git@github.com:lyft/mappingperception.git", "slack": "#av-scenarios", "team_email": "av-scenarios@lyft.com", "credentials": true, "credentials_legacy": false, "image_type": "tool", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/mlplatformnotebook3gpu:e8f07c87b1e134b58678bb4aecb513d661363789"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:77bc248dcdf3d408786f858d3916c931a07c4f11", "sub_image": "s2ipythonlibrary"}}]}}, "containers": [{"name": "sandbox", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["mappingperception.sandbox"]}], "tests": [{"name": "test_lint", "type": "jailed", "command": "make lint", "sub_image": "s2ipythonlibrary"}, {"name": "test_exec", "type": "execution", "group": "mappingperception.dev", "container": "mappingperception.sandbox", "command": "make test"}], "deploy": [{"name": "staging", "legacy": false}, {"name": "production", "legacy": false}], "lyftlearn": {"models": {"scenarios_example_model0": {"model_file": "codelab/example0/scenarios_saved_model_example.ipynb", "description": "first model", "team": "av-scenarios", "owner_email": "psun@lyft.com"}, "scenarios_automation_pipeline": {"model_file": "scenarios_auto_pipeline.ipynb", "description": "detection + tracking + action classification", "team": "av-scenarios", "owner_email": "psun@lyft.com"}}}, "version": "1610c123eb35c5152b11c72f9672ee34e42dc32e", "images": [{"parent": {"name": "mlplatformnotebook3gpu", "version": "e8f07c87b1e134b58678bb4aecb513d661363789", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipythonlibrary", "version": "77bc248dcdf3d408786f858d3916c931a07c4f11", "sub_image": null, "external": false}, "sub_image": "s2ipythonlibrary"}], "parent": {"name": "mlplatformnotebook3gpu", "version": "e8f07c87b1e134b58678bb4aecb513d661363789", "sub_image": null, "external": false}}, "maptiles": {"name": "maptiles", "description": "Lyftmap tile service", "repository": "git@github.com:lyft/maptiles.git", "image_type": "service", "service_tier": 3, "slack": "#base-maps-bot", "team_email": "basemap-eng@lyft.com", "pagerduty_escalation_policy": "basemap-service", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/maptiles", "sub_image": "k8s"}, {"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "maptiles.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "maptiles.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}]}]], "facets": [{"name": "main", "member": "maptiles.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 4}}}}, {"name": "canary", "member": "maptiles.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "envoy": {"profile": "python", "settings": {"services": [{"name": "maptiles"}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:a2a4fdca992c5289dd17d5083ea8250afc452ebd", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "50dc7fe087a686a4410e7ce9aa5bc005dafa0aaa", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "a2a4fdca992c5289dd17d5083ea8250afc452ebd", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "mapvizint": {"name": "mapvizint", "description": "Frontend service for visualizing geospatial data", "repository": "git@github.com:lyft/mapvizint.git", "image_type": "service", "service_tier": 3, "slack": "#base-maps-bot", "team_email": "basemap-eng@lyft.com", "pagerduty_escalation_policy": "scope-service", "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "frontend": {"node_version": "10.14.1-1nodesource1", "symlink_node_modules": true}, "groups": [{"name": "dev", "members": ["control.dev", "mapvizint.legacy", "maptiles.legacy", "metadataproxy.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "mapvizint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}, {"name": "cypress", "type": "execution", "group": "mapvizint.dev", "container": "mapvizint.legacy", "command": "make test_integration"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "links": [{"text": "runbook", "url": "https://github.com/lyft/mapvizint/blob/master/docs/runbook.md"}], "envoy": {"profile": "python", "settings": {"services": [{"name": "mapvizint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"acl": null, "infraassets": null, "mapelement": null, "maptiles": null, "superset": null, "avmdcnavigation": null, "avscenariosexpo": null, "dispatch": null, "privacyaudit": null, "passengerqueues": null, "placessearch": null}}}}, "version": "b5d8494b59460ae5754ded6aa49ddaa4723b1bc1", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "mapworkflows": {"name": "mapworkflows", "description": "Basemap batch processing workflows repository.", "repository": "git@github.com:lyft/mapworkflows.git", "image_type": "service", "service_tier": 2, "languages": ["python"], "credentials": true, "containers": [{"name": "legacy", "start_time": 60, "command": "/bin/bash", "provision": "echo \"what hath god wrought\""}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "mapworkflows.legacy", "lyftidl.server"]}], "tests": [{"name": "spark_integration", "type": "execution", "group": "mapworkflows.dev", "container": "mapworkflows.legacy", "command": "make test_spark_integration"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}, {"name": "workflow_registration", "type": "execution", "group": "mapworkflows.dev", "container": "mapworkflows.legacy", "command": "service_venv mbadmin register-workflows new"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [[{"name": "development", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_development"}], [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_staging"}], [{"name": "production", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_production"}]], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "slack": "#base-maps-bot", "team_email": "basemap-eng@lyft.com", "pagerduty_escalation_policy": "basemap-service", "envoy": {"profile": "python", "settings": {"services": [{"name": "mapworkflows"}], "common_settings": {"internal_hosts": {"mailer": null}, "external_hosts": {"dynamodb_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "version": "638bc7f3e11eb0e893f8045e1b7adaadac433dcb", "images": [{"parent": {"name": "flytesparkbionicbase", "version": "8014645207d15c589909cc9077ac48e841c45d5a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "flytesparkbionicbase", "version": "8014645207d15c589909cc9077ac48e841c45d5a", "sub_image": null, "external": false}}, "marketdata": {"name": "marketdata", "description": "Ingest and serve market data (compi, local events, etc)", "repository": "git@github.com:lyft/marketdata.git", "credentials": true, "languages": ["python"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "batch", "command": "dumb-init -- service_venv python cron_jobs/scrape_drivers.py", "workdir": "/code/marketdata", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s"}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/marketdata", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "marketdata.legacy"]}, {"name": "integration", "members": ["marketdata.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "marketdata.dev"}, {"name": "unit", "type": "execution", "group": "marketdata.dev", "container": "marketdata.legacy", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "marketdata.integration", "container": "marketdata.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": false}, "targets": [{"facet": "marketdatabatch"}, {"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": false}, "targets": [{"facet": "marketdatabatch"}, {"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": false}}, {"name": "production", "legacy": true, "targets": [{"facet": "canary"}, {"facet": "marketdatabatch"}, {"facet": "main"}], "kubernetes": {"enabled": false}}], "slack": "#locations", "pagerduty_escalation_policy": "Locations", "team_email": "locations@lyft.com", "image_type": "service", "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "marketdata"}, {"name": "marketdatabatch"}], "common_settings": {"internal_hosts": {"jobschedulerbulkweb": null, "regions": null, "rides": null, "routes": null, "routesapi": null, "locations": null, "locationsregionsearch": null, "supply": null, "users": null}, "external_hosts": {"dynamodb_iad": null}}, "override_settings": [{"services": [{"name": "marketdata"}], "settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"marketevents": null, "viewport": null}}}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "logging": {"marketdata": {"fields": {"method": "keyword"}}}, "facets": [{"name": "marketdatabatch", "member": "marketdata.batch", "type": "worker", "envoy_service": "marketdatabatch", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "main", "member": "marketdata.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 5, "max_size": 50}}}}, {"name": "canary", "member": "marketdata.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "version": "c7d320e71ca352c6d64dddd07355b5b1b54c26d0", "images": [{"parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}}, "marketevents": {"name": "marketevents", "description": "Service to collect and store local events data (such as concerts, sporting events, conferences) for Lyft regions, and generate analytics events for Hive", "repository": "git@github.com:lyft/marketevents.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=10 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/marketevents", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "collecteventsvenue", "command": "dumb-init -- service_venv python manage.py collect_venues_events", "workdir": "/code/marketevents", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "getvenuescapacity", "command": "dumb-init -- service_venv python manage.py get_venues_capacity", "workdir": "/code/marketevents", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}], "facets": [{"name": "main", "member": "marketevents.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 28}}}}, {"name": "canary", "member": "marketevents.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "getvenuescapacity", "member": "marketevents.getvenuescapacity", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 18 * * *"}, {"name": "collecteventsvenue", "member": "marketevents.collecteventsvenue", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 19 * * *"}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:deb42d25da0e6d5fe565c019883e458b4b31b696", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:c3098adb2f161965705569bc06f2b06d4cd073d6", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "marketevents.legacy"]}, {"name": "integration", "members": ["marketevents.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "marketevents.dev"}, {"name": "unit", "type": "execution", "group": "marketevents.dev", "container": "marketevents.legacy", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "marketevents.integration", "container": "marketevents.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#decision-apps-eng", "pagerduty_escalation_policy": "Command Center Services", "team_email": "decision-apps@lyft.com", "deploy": [{"name": "staging", "legacy": false, "automatic": true, "targets": [{"facet": "main"}, {"facet": "getvenuescapacity"}, {"facet": "collecteventsvenue"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d"}, {"legacy": false, "name": "production", "targets": [{"facet": "canary"}, {"facet": "main"}, {"facet": "getvenuescapacity"}, {"facet": "collecteventsvenue"}], "kubernetes": {"enabled": true}}]], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "marketevents"}, {"name": "marketeventsbatch"}], "common_settings": {"internal_hosts": {"jobschedulerbulkweb": null, "regions": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}}, "override_settings": [{"services": [{"name": "marketevents"}], "settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}}}]}}, "languages": ["python"], "version": "a1e067f300fbb8a93d8a54d73af72aad82ae8ed2", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c3098adb2f161965705569bc06f2b06d4cd073d6", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "marketforecast": {"name": "marketforecast", "description": "Predict market forecast data using Delphi model.", "repository": "git@github.com:lyft/marketforecast.git", "image_type": "service", "languages": ["python", "bash"], "credentials": false, "slack": "#decision-apps-eng", "pagerduty_escalation_policy": "Command Center Services", "team_email": "decision-apps@lyft.com", "deploy": [{"name": "production", "legacy": false}], "containers": [{"name": "notebook", "command": "/venv/bin/jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password='' --notebook-dir=/mnt/user-home", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}], "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "marketforecast"}]}}, "lyftlearn": {"models": {"legacy_delphi": {"model_file": "delphi_scripts/legacy_delphi.ipynb", "description": "Predict 13 week of market forecast data using Delphi model", "team": "DSP", "owner_email": "hugh@lyft.com"}}, "notebook_templates": [{"template_name": "market-forecast", "short_description": "Image for market-forecast team", "long_description": "Image for market-forecast team", "owner": "hmiles"}]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:11022eadee570eb960e727715e14c89eb7c93a57", "sub_image": "precommit"}}]}}, "version": "963b76c3f63c7067976bfb4966f151d5714b4425", "images": [{"parent": {"name": "mlplatformnotebook3", "version": "3778be74e1d37117ad471f38870fc5c2b98a5758", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "11022eadee570eb960e727715e14c89eb7c93a57", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "mlplatformnotebook3", "version": "3778be74e1d37117ad471f38870fc5c2b98a5758", "sub_image": null, "external": false}}, "markethealthinternal": {"name": "markethealthinternal", "description": "Market Health Command Center for TOM.", "repository": "git@github.com:lyft/markethealthinternal.git", "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "frontend": {"node_version": "8.9.1-1nodesource1"}, "custom": {"internal_service": true, "frontend_service": true}, "slack": "#decision-apps-eng", "pagerduty_escalation_policy": "Command Center Services", "team_email": "decision-apps@lyft.com", "groups": [{"name": "dev", "members": ["control.dev", "markethealthinternal.legacy", "tom.dev", "bizmetrics.dev"]}, {"name": "devall", "members": ["control.dev", "markethealthinternal.legacy", "marketevents.dev", "marketweather.dev", "incentiveconfig.dev", "superset.dev", "tom.dev", "bizmetrics.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "markethealthinternal.dev"}, {"name": "unit", "type": "execution", "group": "markethealthinternal.dev", "container": "markethealthinternal.legacy", "command": "make test_coverage"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "deploy": [{"name": "staging", "automatic": true, "legacy": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "languages": ["javascript"], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "markethealthinternal"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"tom": null, "acl": null, "incentiveconfig": null, "ridestreaks": null, "marketevents": null, "marketweather": null, "superset": null, "drivercomp": null, "detargetingapi": null, "driverheatmaps": null, "privacyaudit": null, "bizmetrics": null}}}}, "version": "21aed73accce35f5a2639f610ca208d1e5ce6036", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "markethealthlib": {"name": "markethealthlib", "description": "Market Health common library", "repository": "git@github.com:lyft/python-markethealth-lib.git", "containers": [{"name": "devel", "command": "/bin/bash -c 'while true; do sleep 3600; done'"}], "tests": [{"name": "python2", "type": "jailed", "command": "py.test tests/"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "languages": ["python"], "image_type": "library", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "version": "a25569dbaf0136c6548f08d9a53af3504956e569", "images": [{"parent": {"name": "pythonlibrary", "version": "84c82cc74ab7a2d2bdde44d273644d7ae69eeae1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "84c82cc74ab7a2d2bdde44d273644d7ae69eeae1", "sub_image": null, "external": false}}, "marketplaceconfig": {"name": "marketplaceconfig", "description": "Static data for marketplaceconfig", "repository": "git@github.com:lyft/marketplaceconfig.git", "image_type": "data", "service_tier": 0, "slack": "#dispatch-bots", "team_email": "dispatch@lyft.com", "pagerduty_escalation_policy": "Dispatch", "languages": ["bash"], "credentials": false, "containers": [{"name": "run", "command": "/code/marketplaceconfig/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/marketplaceconfig"]}, {"name": "service", "command": "/code/marketplaceconfig/service_entrypoint.sh"}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "run_in_dev": false, "command": "pre-commit run --all-files --show-diff-on-failure"}], "docs": {"disable": true}, "deploy": [[{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}]], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "version": "a2daa6120a0f7978bb216b7fe704c4bc414800ac", "images": [{"parent": {"name": "imagebase", "version": "3d05522cd0526907149ca4c05273c28771c398bf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "imagebase", "version": "3d05522cd0526907149ca4c05273c28771c398bf", "sub_image": null, "external": false}}, "marketplaceint": {"name": "marketplaceint", "description": "TODO short description of the service", "repository": "git@github.com:lyft/marketplaceint.git", "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"internal_service": true, "frontend_service": true}, "slack": "#pricing", "team_email": "pricing@lyft.com", "pagerduty_escalation_policy": "Pricing", "groups": [{"name": "dev", "members": ["control.dev", "marketplaceint.legacy", "helium.legacy", "tom.legacy"]}, {"name": "integration", "members": ["marketplaceint.dev", "helium.dev", "tom.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "marketplaceint.dev"}, {"name": "unit", "type": "execution", "group": "marketplaceint.dev", "container": "marketplaceint.legacy", "command": "make test_coverage"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "deploy": [{"name": "staging", "automatic": true, "legacy": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "languages": ["javascript"], "image_type": "service", "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "marketplaceint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"tom": null, "acl": null, "helium": null, "flexppz": null, "privacyaudit": null}}}}, "version": "09bf6768ae98e778d563fd88eebf54adf8bc432c", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "marketplacestdlib": {"name": "marketplacestdlib", "description": "A library of common idioms used in Lyft marketplace and mapping microservices.", "repository": "git@github.com:lyft/python-marketplace-stdlib.git", "credentials_legacy": false, "containers": [{"name": "devel", "privileged": true, "command": "/bin/bash -c 'while true; do sleep 3600; done'"}], "groups": [{"name": "dev", "members": ["control.dev", "marketplacestdlib.devel"]}], "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "unit3", "type": "jailed", "command": "make test_unit3"}, {"name": "integration", "type": "execution", "command": "make test_integration", "group": "marketplacestdlib.dev", "container": "marketplacestdlib.devel"}, {"name": "integration3", "type": "execution", "command": "make test_integration3", "group": "marketplacestdlib.dev", "container": "marketplacestdlib.devel"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["python"], "image_type": "library", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:a8b1babf37d5c1c0e12bccec2324f05b1f2b617f"}}]}}, "version": "41814a6af29e3360240284f5bbb2800da0360d09", "images": [{"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipythonlibrary", "version": "a8b1babf37d5c1c0e12bccec2324f05b1f2b617f", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "a8b1babf37d5c1c0e12bccec2324f05b1f2b617f", "sub_image": null, "external": false}}, "marketwatch": {"name": "marketwatch", "description": "Service to stream data from Kinesis/kafka to druid via tranquility libraries", "repository": "git@github.com:lyft/marketwatch.git", "containers": [{"name": "server", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "druid.dev", "marketwatch.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "marketwatch.dev"}, {"name": "unittest", "type": "execution", "group": "marketwatch.dev", "container": "marketwatch.server", "command": "mvn test surefire-report:report -Dcheckstyle.skip=true", "reports": {"surefire": "target/site/surefire-report.html"}}, {"name": "integration", "type": "execution", "group": "marketwatch.dev", "container": "marketwatch.server", "command": "mvn test-compile failsafe:integration-test failsafe:verify -Dcheckstyle.skip=true", "reports": {"failsafe": "target/failsafe-reports/failsafe-summary.xml"}}, {"name": "checkstyle", "type": "execution", "group": "marketwatch.dev", "container": "marketwatch.server", "command": "mvn checkstyle:check", "reports": {"checkstyle": "target/checkstyle-report.txt"}}], "slack": "#druid-dev-bot", "team_email": "dp-analyticsinfra@lyft.com", "pagerduty_escalation_policy": "Data Infra Interactive", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": false}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "languages": ["java", "bash"], "image_type": "service", "streamingplatform": {"jobmanagers": [{"name": "marketwatch", "development": {"num_taskmanagers": 0, "taskmanager": {"num_slots": 0}}, "staging": {"num_taskmanagers": 0, "taskmanager": {"num_slots": 0}}, "production": {"num_taskmanagers": 0, "taskmanager": {"num_slots": 0}}, "jobs": [{"name": "marketwatch", "jar": "marketwatch-1.0.0-SNAPSHOT.jar", "class": "com.lyft.marketwatch.Main", "development": {"parallelism": 0}, "staging": {"parallelism": 0}, "production": {"parallelism": 0}}]}]}, "service_tier": 2, "version": "a69fc8c3adb53e2f297888671576595cf6ee8984", "images": [{"parent": {"name": "java8", "version": "7ec648d70f5221be9c32f4b30889073683cd11a6", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "7ec648d70f5221be9c32f4b30889073683cd11a6", "sub_image": null, "external": false}}, "marketweather": {"name": "marketweather", "description": "Service to collect and store weather data", "repository": "git@github.com:lyft/marketweather.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:3258c1df880d24734bd34f6704fc48e8ae774688", "sub_image": "k8s"}}, {"name": "s2iplus", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=10 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/marketweather", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2.625Gi"}}, {"name": "collectfutureweather", "command": "dumb-init -- service_venv manage collect_future_weather", "workdir": "/code/marketweather", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "collectactualweather", "command": "dumb-init -- service_venv manage collect_actual_weather", "workdir": "/code/marketweather", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "collecthourlyweather", "command": "dumb-init -- service_venv manage collect_hourly_weather", "workdir": "/code/marketweather", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}], "facets": [{"name": "main", "member": "marketweather.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 3, "max_size": 10}}}}, {"name": "canary", "member": "marketweather.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "collectfutureweather", "member": "marketweather.collectfutureweather", "type": "cron", "concurrency_policy": "forbid", "schedule": "8 17 * * *"}, {"name": "collectactualweather", "member": "marketweather.collectactualweather", "type": "cron", "concurrency_policy": "forbid", "schedule": "4 17 * * *"}, {"name": "collecthourlyweather", "member": "marketweather.collecthourlyweather", "type": "cron", "concurrency_policy": "forbid", "schedule": "*/30 * * * *"}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "groups": [{"name": "dev", "members": ["control.dev", "marketweather.legacy", "jobscheduler.dev"]}, {"name": "integration", "members": ["marketweather.dev"]}], "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "startup", "type": "startup", "group": "marketweather.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "marketweather.integration", "container": "marketweather.legacy", "command": "make test_integration"}], "slack": "#decision-apps-eng", "pagerduty_escalation_policy": "Command Center Services", "team_email": "decision-apps@lyft.com", "deploy": [{"name": "staging", "legacy": false, "automatic": true, "targets": [{"facet": "main"}, {"facet": "collectfutureweather"}, {"facet": "collectactualweather"}, {"facet": "collecthourlyweather"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"legacy": false, "name": "production", "targets": [{"facet": "canary"}, {"facet": "main"}, {"facet": "collectfutureweather"}, {"facet": "collectactualweather"}, {"facet": "collecthourlyweather"}], "kubernetes": {"enabled": true}}]], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "marketweather"}, {"name": "marketweatherbatch"}], "common_settings": {"internal_hosts": {"jobschedulerbulkweb": null, "regions": null}, "external_hosts": {"firehose_iad": null}}, "override_settings": [{"services": [{"name": "marketweather"}], "settings": {"external_hosts": {"darksky": null, "dynamodb_iad": null}}}]}}, "languages": ["python"], "logging": {"marketweather": {"fields": {"attempt_num": "long", "failed_record_count": "long", "failed_record": "keyword", "error_id": "keyword", "error_msg": "keyword", "event_name": "keyword", "field_name": "keyword"}}}, "version": "e5ff20fda1bb4972acacb846a79b956f7911fca5", "images": [{"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "3258c1df880d24734bd34f6704fc48e8ae774688", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "martechscoring": {"name": "martechscoring", "description": "Experimental service for driver propensity scoring", "repository": "git@github.com:lyft/martechscoring.git", "image_type": "service", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "martechscoring.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "martechscoring.dev"}, {"name": "unit", "type": "execution", "group": "martechscoring.dev", "container": "martechscoring.legacy", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#symphony-eng", "team_email": "symphony-team@lyft.com", "pagerduty_escalation_policy": "AdTech", "deploy": [{"name": "staging", "legacy": true, "automatic": true}, {"name": "canary", "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "martechscoring"}, {"name": "martechscoringbatch"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "internal_hosts": {"acquisitionguarantees": null, "adtech": null, "flexibleincentives": null, "jobschedulernormalweb": null, "jobschedulerbulkweb": null, "mailer": null, "mozartgateway": null, "tcseditor": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"martechscoring": {"fields": {"adset_id": "keyword", "atom_id": "keyword", "context_name": "keyword", "task_id": "keyword", "task_type": "keyword", "area": "keyword", "rows": "long", "bid": "float", "applicant_id": "keyword", "applicant_quality_estimate": "float", "status_or_applied_at": "keyword", "google_click_id": "keyword", "applied_at": "date", "channels": "keyword", "version": "keyword", "schema": "keyword", "table": "keyword"}}, "martechscoringbatch": {"fields": {"scoring_algo_name": "keyword", "recommendation_algo_name": "keyword", "channel": "keyword", "will_publish": "boolean", "spreadsheetId": "keyword", "totalUpdatedCells": "long", "totalUpdatedRows": "long", "responses": "keyword", "totalUpdatedSheets": "long", "totalUpdatedColumns": "long", "replies": "keyword"}}}, "version": "f4e769445f1689e081d107831092e8d15c71c6b3", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "matching": {"name": "matching", "description": "a stateless matching platform for dispatch decisions", "repository": "git@github.com:lyft/matching.git", "image_type": "service", "service_tier": 0, "languages": ["go", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.mock", "sub_image": "mockmatching"}}]}}, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh"}, {"name": "small", "command": "dumb-init -- matching", "sub_image": "k8s", "limits": {"cpu": 8, "memory": "16Gi"}}, {"name": "mock", "command": "/code/ops/base/entrypoint.sh", "sub_image": "mockmatching", "exports": [{"name": "api", "port": 9211, "protocol": "http2"}]}], "facets": [{"name": "smallmain", "member": "matching.small", "type": "service", "envoy_service": "matchingsmall", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 5}, "production": {"min_size": 10, "max_size": 50}}}}, {"name": "smallcanary", "member": "matching.small", "type": "service", "envoy_service": "matchingsmall", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "lyftidl.server", "redis.dev", "matching.service", "dnsmasq.server"]}, {"name": "integration", "members": ["dispatch.dev", "compliance.dev", "courier.dev", "dsfeatures.dev", "etaproxy.dev", "ghostmatching.dev", "matching.dev", "matchingplayback.dev", "matchingsolver.dev", "modelexec.dev", "modelmetrics.dev", "modelproxy.dev", "pickupoptimizer.dev", "tcs.dev"]}, {"name": "mocktesting", "members": ["control.dev", "dnsmasq.server", "lyftidl.server", "matching.mock"]}], "pulldeploy_components": {"data": ["marketplaceconfig", "regioncfgdata"]}, "tests": [{"name": "startup", "type": "startup", "group": "matching.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "matching.integration", "container": "matching.service", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#dispatch-bots", "pagerduty_escalation_policy": "Dispatch", "team_email": "optimal-dispatch@lyft.com", "slack_deploy_notification_environments": ["staging", "canary", "production"], "deploy": [{"name": "staging", "legacy": true, "targets": [{"facet": "smallmain"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "links": [{"text": "Runbook", "url": "https://github.com/lyft/matching/blob/master/docs/RUNBOOK.md"}, {"text": "Dashboards", "url": "https://go/matching-drilldown-staging"}]}, {"name": "canary", "legacy": true, "targets": [{"facet": "smallcanary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "links": [{"text": "Runbook", "url": "https://github.com/lyft/matching/blob/master/docs/RUNBOOK.md"}, {"text": "Dashboards", "url": "https://go/matching-drilldown"}]}, [{"name": "production-us-east-1a", "legacy": true, "targets": [{"facet": "smallmain"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "targets": [{"facet": "smallmain"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true, "targets": [{"facet": "smallcanary"}, {"facet": "smallmain"}], "kubernetes": {"enabled": true}}], "deploy_settings": {"window_start": "07:00 America/Los_Angeles", "window_end": "18:00 America/Los_Angeles"}, "docs": {"godoc_packages": ["github.com/lyft/matching", "github.com/lyft/matching/cli", "github.com/lyft/matching/cli/replay", "github.com/lyft/matching/cli/replay/plangen", "github.com/lyft/matching/cli/replay/state", "github.com/lyft/matching/cli/replay/walking", "github.com/lyft/matching/clients", "github.com/lyft/matching/clients/eta", "github.com/lyft/matching/clients/modelexec", "github.com/lyft/matching/clients/tcs", "github.com/lyft/matching/clients/tolls", "github.com/lyft/matching/config", "github.com/lyft/matching/flow", "github.com/lyft/matching/flow/options", "github.com/lyft/matching/lib/assignmentgroupfilters", "github.com/lyft/matching/lib/boundaries", "github.com/lyft/matching/lib/clock", "github.com/lyft/matching/lib/clone", "github.com/lyft/matching/lib/compliance", "github.com/lyft/matching/lib/compliance/dispatchcompliance", "github.com/lyft/matching/lib/dispatch", "github.com/lyft/matching/lib/eta", "github.com/lyft/matching/lib/expectedmatchefficiency", "github.com/lyft/matching/lib/featureservice", "github.com/lyft/matching/lib/filters", "github.com/lyft/matching/lib/finder", "github.com/lyft/matching/lib/ghostmatch", "github.com/lyft/matching/lib/hydration", "github.com/lyft/matching/lib/insights", "github.com/lyft/matching/lib/locations", "github.com/lyft/matching/lib/matchingplayback", "github.com/lyft/matching/lib/math", "github.com/lyft/matching/lib/models", "github.com/lyft/matching/lib/monitoring", "github.com/lyft/matching/lib/pairwiserequirements", "github.com/lyft/matching/lib/permutation", "github.com/lyft/matching/lib/plan", "github.com/lyft/matching/lib/plan/generate", "github.com/lyft/matching/lib/plan/generate/collections", "github.com/lyft/matching/lib/plan/generate/config", "github.com/lyft/matching/lib/plan/generate/feasibilitygraphs", "github.com/lyft/matching/lib/plan/generate/feasibleorderings", "github.com/lyft/matching/lib/plan/generate/heuristicfilters", "github.com/lyft/matching/lib/plan/generate/heuristicfilters/permutationfilters", "github.com/lyft/matching/lib/plan/generate/knn", "github.com/lyft/matching/lib/plan/generate/postgenerationfilters", "github.com/lyft/matching/lib/plan/generate/problemcomponents", "github.com/lyft/matching/lib/plan/generate/reordering", "github.com/lyft/matching/lib/plan/generate/waypointpermutation", "github.com/lyft/matching/lib/plan/sorted", "github.com/lyft/matching/lib/plan/timing", "github.com/lyft/matching/lib/potentialplanoutcomes", "github.com/lyft/matching/lib/scoring", "github.com/lyft/matching/lib/scoring/calculator", "github.com/lyft/matching/lib/scoring/conversion", "github.com/lyft/matching/lib/scoring/conversion/realtime", "github.com/lyft/matching/lib/scoring/definitions", "github.com/lyft/matching/lib/shadow", "github.com/lyft/matching/lib/solver", "github.com/lyft/matching/lib/state", "github.com/lyft/matching/lib/state/matchloopid", "github.com/lyft/matching/lib/stats", "github.com/lyft/matching/lib/tolerateddelay", "github.com/lyft/matching/lib/tolls", "github.com/lyft/matching/lib/units", "github.com/lyft/matching/lib/util/grpc", "github.com/lyft/matching/lib/util/parallel", "github.com/lyft/matching/lib/util/protobuf", "github.com/lyft/matching/lib/util/workerpool", "github.com/lyft/matching/lib/validate", "github.com/lyft/matching/lib/walking", "github.com/lyft/matching/lib/walking/filters", "github.com/lyft/matching/lib/walking/inputs", "github.com/lyft/matching/services/matching_platform", "github.com/lyft/matching/services/matching_platform/config", "github.com/lyft/matching/services/matching_platform/grpc/handlers", "github.com/lyft/matching/services/matching_platform/model/region", "github.com/lyft/matching/services/sim_matching_platform", "github.com/lyft/matching/services/sim_matching_platform/grpc/handlers", "github.com/lyft/matching/testing", "github.com/lyft/matching/testing/clients/eta", "github.com/lyft/matching/testing/fixtures", "github.com/lyft/matching/testing/fixtures/assignmentgroups", "github.com/lyft/matching/testing/fixtures/table", "github.com/lyft/matching/testing/fixtures/transform", "github.com/lyft/matching/testing/fixtures/transformwitheta", "github.com/lyft/matching/testing/mock", "github.com/lyft/matching/testing/mock/clock", "github.com/lyft/matching/testing/mock/config", "github.com/lyft/matching/testing/mock/state", "github.com/lyft/matching/testing/solver", "github.com/lyft/matching/worker/analyticsqueue"]}, "envoy": {"profile": "go", "settings": {"services": [{"name": "matching"}, {"name": "matchingsmall"}, {"name": "matchingsimulated"}], "common_settings": {"redis": {"matchingmultiredis": {"port": 6380, "op_timeout_ms": 1000, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}, "authorization": {"bindings": {"dispatch": ["matching_platform"], "dispatchglobalmatchingworkers": ["matching_platform"], "dispatchmatchingworkerssmall": ["matching_platform"], "simulator2": ["matching_platform", "matching_platform_simulator"], "*": ["mock_matching"]}, "permissions": {"matching_platform": {"paths": ["/pb.lyft.matching.MatchingPlatform/*"]}, "matching_platform_simulator": {"paths": ["/pb.lyft.matching.SimMatchingPlatform/*"]}, "mock_matching": {"paths": ["/pb.lyft.matching.MockMatching/*"]}}}, "external_hosts": {"s3_iad": null, "firehose_iad": null}, "internal_hosts": {"compliance": null, "courier": null, "dispatch": null, "dispatchcompliance": null, "dsfeatures": null, "etaproxy": null, "eventingest": null, "ghostmatching": null, "matchingplayback": null, "matchingsolver": null, "modelexecsharedrides": null, "modelmetrics": null, "modelproxy": null, "tcs": null, "tolls": null}, "local_service": {"grpc_streaming": true}}}}, "logging": {"matching": {"fields": {"partition": "keyword", "sub_region": "keyword", "requestId": "keyword", "supply_id": "keyword", "supply_plan": "keyword", "job_id": "keyword", "job": "keyword", "err": "keyword", "model_descriptor": "keyword", "errVerbose": "keyword", "end_batch_window_timestamp": "keyword", "max_batch_window_duration": "long", "default_batch_window_duration": "long", "active_waypoints": "long", "max_active_waypoints": "long", "request": "keyword", "response": "keyword", "batch_retry_timeout": "keyword", "matching_context_status": "keyword", "elapsed_time": "keyword", "breakdown": "keyword", "waypoint_id": "keyword", "pickup_eta": "long", "max_pickup_eta": "long", "path": "keyword", "method": "keyword", "max_capacity": "long", "used_capacity": "long", "service": "keyword", "host": "keyword", "error": "keyword", "failure_domain": "keyword", "request_id": "keyword", "lyft_user_id": "keyword", "downstream_cluster": "keyword", "endpoint": "keyword", "code": "keyword", "walking_hotspot": "keyword", "threshold": "float", "invalid_ratio": "float", "region": "keyword", "conversion_prob": "float", "conversion_floor": "long", "cycle_id": "keyword", "key": "keyword", "dataDeployPath": "keyword", "signal": "keyword", "total_events": "long", "event_num": "long", "plan": "keyword", "filter": "keyword"}}, "matchingsmall": {"fields": {"partition": "keyword", "sub_region": "keyword", "requestId": "keyword", "supply_id": "keyword", "supply_plan": "keyword", "job_id": "keyword", "job": "keyword", "err": "keyword", "model_descriptor": "keyword", "errVerbose": "keyword", "end_batch_window_timestamp": "keyword", "max_batch_window_duration": "long", "default_batch_window_duration": "long", "active_waypoints": "long", "max_active_waypoints": "long", "request": "keyword", "response": "keyword", "batch_retry_timeout": "keyword", "matching_context_status": "keyword", "elapsed_time": "keyword", "breakdown": "keyword", "waypoint_id": "keyword", "pickup_eta": "long", "max_pickup_eta": "long", "path": "keyword", "method": "keyword", "max_capacity": "long", "used_capacity": "long", "service": "keyword", "host": "keyword", "error": "keyword", "failure_domain": "keyword", "request_id": "keyword", "lyft_user_id": "keyword", "downstream_cluster": "keyword", "endpoint": "keyword", "code": "keyword", "walking_hotspot": "keyword", "threshold": "float", "invalid_ratio": "float", "region": "keyword", "conversion_prob": "float", "conversion_floor": "long", "cycle_id": "keyword", "key": "keyword", "dataDeployPath": "keyword", "signal": "keyword", "total_events": "long", "event_num": "long", "plan": "keyword", "filter": "keyword"}}, "matchingsimulated": {"fields": {"partition": "keyword", "sub_region": "keyword", "requestId": "keyword", "supply_id": "keyword", "supply_plan": "keyword", "job_id": "keyword", "job": "keyword", "err": "keyword", "model_descriptor": "keyword", "errVerbose": "keyword", "end_batch_window_timestamp": "keyword", "max_batch_window_duration": "long", "default_batch_window_duration": "long", "active_waypoints": "long", "max_active_waypoints": "long", "request": "keyword", "response": "keyword", "batch_retry_timeout": "keyword", "matching_context_status": "keyword", "elapsed_time": "keyword", "breakdown": "keyword", "waypoint_id": "keyword", "pickup_eta": "long", "max_pickup_eta": "long", "path": "keyword", "method": "keyword", "max_capacity": "long", "used_capacity": "long", "service": "keyword", "host": "keyword", "error": "keyword", "failure_domain": "keyword", "request_id": "keyword", "lyft_user_id": "keyword", "downstream_cluster": "keyword", "endpoint": "keyword", "code": "keyword", "walking_hotspot": "keyword", "threshold": "float", "invalid_ratio": "float", "region": "keyword", "conversion_prob": "float", "conversion_floor": "long", "cycle_id": "keyword", "key": "keyword", "dataDeployPath": "keyword", "signal": "keyword", "total_events": "long", "event_num": "long", "plan": "keyword", "filter": "keyword"}}}, "version": "0dcb3006698745d86e5cb99cdb65451e7822cfc9", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "go", "external": false}, "sub_image": "precommit"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": "mockmatching"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "matchinganalysis": {"name": "matchinganalysis", "description": "lib for analyzing matching cycle log", "repository": "git@github.com:lyft/matchinganalysis.git", "slack": "#dispatch", "team_email": "matching@lyft.com", "image_type": "library", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "languages": ["python"], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "928049a048ec47bbb9a4595918075180a42581ce", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "matchingconstraints": {"name": "matchingconstraints", "repository": "git@github.com:lyft/matchingconstraints.git", "description": "Generates various constraints for the global matching platform's algorithms", "service_tier": 1, "team_email": "marketplace-xp@lyft.com", "pagerduty_escalation_policy": "Marketplace XP", "slack": "#sharedrides-server", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- matchingconstraints", "sub_image": "k8s", "workdir": "/code/matchingconstraints", "limits": {"cpu": 1}}, {"name": "featureworker", "command": "dumb-init -- featureworker", "sub_image": "k8s", "workdir": "/code/matchingconstraints"}], "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "matchingconstraints.legacy"]}, {"name": "integration", "members": ["matchingconstraints.dev", "courier.dev", "dsfeatures.dev", "pricing.dev", "regions.dev", "offerings.dev"]}], "pulldeploy_components": {"data": ["marketplaceconfig"]}, "facets": [{"name": "main", "member": "matchingconstraints.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 3, "max_size": 30}}}}, {"name": "canary", "member": "matchingconstraints.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "featureworker", "member": "matchingconstraints.featureworker", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 1}}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "startup", "type": "startup", "group": "matchingconstraints.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "matchingconstraints.integration", "container": "matchingconstraints.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "coverage", "type": "execution", "group": "matchingconstraints.dev", "container": "matchingconstraints.legacy", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}, "autotrigger": false}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "featureworker"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "featureworker"}]}, [{"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "featureworker"}]}]], "envoy": {"profile": "go", "settings": {"common_settings": {"authorization": {"permissions": {"task_queue_permission": {"paths": ["/api/matchingconstraints/*"]}, "matchingconstraints_permission": {"paths": ["/pb.lyft.matchingconstraints.MatchingConstraints/*"]}}, "bindings": {"offerings": ["matchingconstraints_permission"], "taskqueuenormal": ["task_queue_permission"]}}, "redis": {"matchingconstraintsmultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}, "local_service": {"circuit_breakers": {"default": {"max_connections": 1000}}}, "internal_hosts": {"courier": null, "dsfeatures": null, "offerings": null, "pricing": null, "regions": null, "tcs": null}, "external_hosts": {"firehose_iad": null}}, "services": [{"name": "matchingconstraints"}]}}, "logging": {"matchingconstraints": {"fields": {"area": "keyword", "duplicateFeatureNames": "keyword", "endpoint": "keyword", "entityId": "keyword", "err": "keyword", "error": "keyword", "existingMetrics": "keyword", "featureDataType": "keyword", "featureKey": "keyword", "featureName": "keyword", "featureNames": "keyword", "featureValue": "keyword", "featureValueDataType": "keyword", "featureVersion": "keyword", "filteredGH5Data": "keyword", "filteredRegionData": "keyword", "fraction": "keyword", "gh5": "keyword", "gh5Data": "keyword", "grpc_code": "keyword", "method": "keyword", "metric": "keyword", "newMetricsToRegister": "keyword", "num_registered": "keyword", "observationTimestamp": "keyword", "productID": "keyword", "region_code": "keyword", "regionalData": "keyword", "requestId": "keyword", "service": "keyword", "sub_region": "keyword", "timesAndValues": "keyword", "varName": "keyword", "worker": "keyword"}}}, "version": "0c2b2efa89149d0581cff88d934f645c8e098189", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "matchingexecution": {"name": "matchingexecution", "description": "matchingexecution", "repository": "git@github.com:lyft/matchingexecution.git", "pagerduty_escalation_policy": "Dispatch", "team_email": "dispatch@lyft.com", "slack": "#dispatch-bots", "service_tier": 0, "slack_deploy_notification_environments": ["staging", "canary", "production"], "image_type": "service", "languages": ["go"], "credentials": true, "pulldeploy_components": {"data": ["marketplaceconfig", "translationdata"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh"}, {"name": "service", "command": "dumb-init -- matchingexecution", "workdir": "/code/matchingexecution", "limits": {"cpu": 2, "memory": "2Gi"}, "sub_image": "k8s", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}}], "facets": [{"name": "main", "member": "matchingexecution.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 400}}}}, {"name": "canary", "member": "matchingexecution.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "matchingexecution.legacy"]}, {"name": "integration", "members": ["predispatchjobs.integration", "jobscheduler.dev", "matchingexecution.dev", "rides.dev", "routesapi.dev", "locations.dev", "users.dev", "etaproxy.dev", "supply.dev", "ridescheduler.dev", "ridestate.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "matchingexecution.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "matchingexecution.integration", "container": "matchingexecution.legacy", "command": "make integration"}], "deploy": [[{"name": "staging-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "automatic": true, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}]}], {"name": "staging", "legacy": false, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}]}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}]}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}]}], "docs": {"godoc_packages": ["github.com/lyft/matchingexecution", "github.com/lyft/matchingexecution/cli", "github.com/lyft/matchingexecution/clients", "github.com/lyft/matchingexecution/clients/interfaces", "github.com/lyft/matchingexecution/config", "github.com/lyft/matchingexecution/lib/clock", "github.com/lyft/matchingexecution/lib/errors", "github.com/lyft/matchingexecution/lib/leasing", "github.com/lyft/matchingexecution/lib/leasing/conflictstats", "github.com/lyft/matchingexecution/lib/models", "github.com/lyft/matchingexecution/lib/operations/assignmentexecutiongroup", "github.com/lyft/matchingexecution/lib/transform", "github.com/lyft/matchingexecution/lib/transform/models", "github.com/lyft/matchingexecution/lib/util/grpcutil", "github.com/lyft/matchingexecution/lib/util/http", "github.com/lyft/matchingexecution/lib/util/interceptors", "github.com/lyft/matchingexecution/lib/validate", "github.com/lyft/matchingexecution/repositories/dynamodb/archivedassignmentexecution", "github.com/lyft/matchingexecution/repositories/dynamodb/assignmentexecution", "github.com/lyft/matchingexecution/services/assignmentexecutions", "github.com/lyft/matchingexecution/services/assignmentexecutions/config", "github.com/lyft/matchingexecution/services/assignmentexecutions/handlers", "github.com/lyft/matchingexecution/services/matchingexecution/config", "github.com/lyft/matchingexecution/services/matchingexecution/grpc", "github.com/lyft/matchingexecution/services/matchingexecution/grpc/handlers", "github.com/lyft/matchingexecution/services/matchingexecution/http", "github.com/lyft/matchingexecution/services/matchingexecution/http/handlers", "github.com/lyft/matchingexecution/testing/fixtures", "github.com/lyft/matchingexecution/testing/fixtures/models", "github.com/lyft/matchingexecution/testing/mocks", "github.com/lyft/matchingexecution/testing/mocks/clients", "github.com/lyft/matchingexecution/testing/mocks/repositories"]}, "envoy": {"profile": "go", "settings": {"services": [{"name": "matchingexecution"}], "common_settings": {"local_service": {"enable_gzip": true}, "internal_hosts": {"predispatchjobs": null, "dispatch": null, "jobschedulernormalweb": null, "matchingstate": null, "rides": null, "routesapi": null, "users": null, "locations": null, "etaproxy": null, "supply": null, "ridescheduler": null, "ridestate": null, "regions": null}, "external_hosts": {"dynamodb_cmh": null, "dynamodb_iad": null}}}}, "logging": {"matchingexecution": {"fields": {"code": "keyword", "path": "keyword", "method": "keyword", "host": "keyword", "service": "keyword", "dataDeployPath": "keyword", "jobID": "keyword", "jobType": "keyword", "supplyID": "keyword", "err": "keyword", "errorCode": "keyword", "flow": "keyword", "request": "keyword", "requesId": "keyword"}}}, "version": "26ad082a75dfd4a4db09b461df4413da7f7f3796", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "matchingmodels": {"name": "matchingmodels", "description": "A repository containing models used in dispatch and matching decisions.", "repository": "git@github.com:lyft/matchingmodels.git", "slack": "#dispatch", "team_email": "matching@lyft.com", "image_type": "library", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/lyftlearnnotebook:e8f1ef94149e9239bff3e54c9ccff3ea149e272f"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}]}}, "languages": ["python"], "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "lyftlearn", "command": "sleep infinity", "mounts": ["/var/run/docker_sockets", "/srv/control"]}], "groups": [{"name": "dev", "members": ["control.dev", "matchingmodels.spin"]}, {"name": "lyftlearn_group", "members": ["matchingmodels.lyftlearn"]}], "deploy": [{"name": "production", "legacy": false, "automatic": true}], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "register-models", "command": "make register-models", "type": "execution", "container": "matchingmodels.lyftlearn", "group": "matchingmodels.lyftlearn_group"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "lyftlearn": {"pip_requirements": ["model_requirements3.txt"], "models": {"matchingmodels-dummy": {"model_file": "models/dummy/model.py", "description": "dummy model to test depoy", "version": "0.0.4", "team": "matching", "owner_email": "agreenhall@lyft.com"}, "etalight": {"model_file": "models/etalight/model.py", "description": "standalone lightbm eta model for predicting pickup and dropoff segments", "version": "0.4.2", "team": "matching", "owner_email": "agreenhall@lyft.com"}, "distancelight": {"model_file": "models/distancelight/model.py", "description": "standalone lightbm distance model for predicting pickup and dropoff segments", "version": "0.4.2", "team": "matching", "owner_email": "agreenhall@lyft.com"}}}, "version": "3a5ee45759b571a22c7fa5c163235a4bb4588db6", "images": [{"parent": {"name": "lyftlearnnotebook", "version": "e8f1ef94149e9239bff3e54c9ccff3ea149e272f", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "lyftlearnnotebook", "version": "e8f1ef94149e9239bff3e54c9ccff3ea149e272f", "sub_image": null, "external": false}}, "matchingpipeline": {"name": "matchingpipeline", "repository": "git@github.com:lyft/matchingpipeline.git", "description": "A service that manages demand-supply matching and execution", "service_tier": 0, "team_email": "core-dispatch@lyft.com", "pagerduty_escalation_policy": "Dispatch", "slack": "#dispatch-bots", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:deb42d25da0e6d5fe565c019883e458b4b31b696"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- matchingpipeline", "limits": {"cpu": 4, "memory": "512Mi"}, "sub_image": "k8s", "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "matchingpipeline.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "matchingpipeline.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "matchingpipeline.dev", "container": "matchingpipeline.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "matchingpipeline.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "matchingpipeline.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {}, "services": [{"name": "matchingpipeline"}]}}, "version": "58d5a0167ee4c230b529fb843db2eda2e3717181", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "matchingpipelinescheduler": {"name": "matchingpipelinescheduler", "repository": "git@github.com:lyft/matchingpipelinescheduler.git", "description": "Service for invoking match cycles for every region in a continuous, reliable manner.", "service_tier": 0, "team_email": "core-dispatch@lyft.com", "pagerduty_escalation_policy": "matching-pipeline", "slack": "#dispatch-bots", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "pulldeploy_components": {"data": ["marketplaceconfig"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:ad1f97644c55caf5d2c23ca451dccc7fa41791ab", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- matchingpipelinescheduler", "limits": {"cpu": 4, "memory": "512Mi"}, "sub_image": "k8s", "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "matchingpipelinescheduler.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "matchingpipelinescheduler.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "matchingpipelinescheduler.dev", "container": "matchingpipelinescheduler.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "matchingpipelinescheduler.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 2, "max_size": 2}, "production": {"min_size": 2, "max_size": 5}}}}, {"name": "canary", "member": "matchingpipelinescheduler.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {"internal_hosts": {"matchingpipeline": null}, "external_hosts": {"dynamodb_iad": null}}, "services": [{"name": "matchingpipelinescheduler"}]}}, "version": "be21a6c0aa038a6af4a5a93b2d73958bfcb13e92", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "ad1f97644c55caf5d2c23ca451dccc7fa41791ab", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "matchingplayback": {"name": "matchingplayback", "repository": "git@github.com:lyft/matchingplayback.git", "description": "Assesses the impact of a proposed change to matching", "service_tier": 2, "team_email": "optimal-dispatch@lyft.com", "pagerduty_escalation_policy": "matchingplayback", "slack": "#matching-playback", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:117a4e318a5047db256d090dcfdee8ee6c76189c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- matchingplayback", "workdir": "/code/matchingplayback", "limits": {"cpu": 16, "memory": "32Gi"}, "sub_image": "k8s", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600, "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "matchingplayback.legacy"]}], "pulldeploy_components": {"data": ["marketplaceconfig", "regioncfgdata"]}, "tests": [{"name": "startup", "type": "startup", "group": "matchingplayback.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "matchingplayback.dev", "container": "matchingplayback.legacy", "command": "make integration"}, {"name": "coverage", "type": "jailed", "command": "./script/coverage-files", "reports": {"cobertura": "build/coverage.xml"}, "sub_image": "k8s"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "upstream_tests": {"test_set": {"matching": ["integration"]}}, "facets": [{"name": "main", "member": "matchingplayback.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "matchingplayback.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "bake_time_minutes": 0, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "bake_time_minutes": 0, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "matchingplayback"}], "common_settings": {"external_hosts": {"s3_iad": null}, "internal_hosts": {"compliance": null, "courier": null, "dispatch": null, "dispatchcompliance": null, "dsfeatures": null, "etaproxy": null, "eventingest": null, "matchingsolver": null, "modelexecsharedrides": null, "modelmetrics": null, "modelproxy": null, "tcs": null, "tolls": null}, "local_service": {"grpc_streaming": true}}}}, "version": "7c7dc18b82cd42e67cdab37e2f06f9b5e5db847a", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "117a4e318a5047db256d090dcfdee8ee6c76189c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "matchingsolver": {"name": "matchingsolver", "description": "Service that solves the matching graph for global matching platform", "repository": "git@github.com:lyft/matchingsolver.git", "image_type": "service", "service_tier": 0, "slack": "#dispatch-bots", "team_email": "optimal-dispatch@lyft.com", "pagerduty_escalation_policy": "Dispatch", "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/matchingsolver", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 30}}], "facets": [{"name": "main", "member": "matchingsolver.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 20, "max_size": 200}}}}, {"name": "canary", "member": "matchingsolver.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}, "profiling": {"enabled": false}}], "groups": [{"name": "dev", "members": ["control.dev", "matchingsolver.legacy", "lyftidl.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "matchingsolver.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "automatic": true, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "matchingsolver"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}}}}, "logging": {"matchingsolver": {"fields": {"cost": "float"}}}, "version": "edf7cb6b70ba3544648f22643d07a66d054498ce", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "py37", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "matchingstate": {"name": "matchingstate", "description": "matchingstate", "repository": "git@github.com:lyft/matchingstate.git", "slack": "#core-dispatch", "slack_deploy_notification_environments": ["staging", "canary", "production"], "pagerduty_escalation_policy": "Dispatch", "team_email": "core-dispatch@lyft.com", "image_type": "service", "service_tier": 0, "languages": ["go"], "credentials": true, "pulldeploy_components": {"data": ["marketplaceconfig"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh"}, {"name": "service", "command": "dumb-init -- matchingstate", "limits": {"cpu": 2, "memory": "2Gi"}, "sub_image": "k8s", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}}], "facets": [{"name": "main", "member": "matchingstate.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 30}, "environment": {"staging": {"min_size": 1, "max_size": 5}, "production": {"min_size": 3, "max_size": 200}}}}, {"name": "canary", "member": "matchingstate.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "matchingstate.legacy"]}, {"name": "integration", "members": ["badcompanions.dev", "matchingstate.dev", "usergroups.dev", "regions.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "matchingstate.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "matchingstate.integration", "container": "matchingstate.legacy", "command": "make integration"}], "deploy": [[{"name": "staging-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "automatic": true, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}]}], {"name": "staging", "legacy": false, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}]}], "docs": {"godoc_packages": ["github.com/lyft/matchingstate", "github.com/lyft/matchingstate/cli", "github.com/lyft/matchingstate/client", "github.com/lyft/matchingstate/config", "github.com/lyft/matchingstate/lib/clock", "github.com/lyft/matchingstate/lib/demandid", "github.com/lyft/matchingstate/lib/math", "github.com/lyft/matchingstate/lib/metadata", "github.com/lyft/matchingstate/lib/supplyhealth/model", "github.com/lyft/matchingstate/lib/supplyhealth/reasons", "github.com/lyft/matchingstate/lib/supplyhealth/webhook", "github.com/lyft/matchingstate/lib/supplyid", "github.com/lyft/matchingstate/lib/transform", "github.com/lyft/matchingstate/lib/util/grpcutil", "github.com/lyft/matchingstate/repositories/dynamodb/demandsession", "github.com/lyft/matchingstate/repositories/dynamodb/supplyhealth", "github.com/lyft/matchingstate/services/demandsessions", "github.com/lyft/matchingstate/services/demandsessions/config", "github.com/lyft/matchingstate/services/demandsessions/grpc/handlers", "github.com/lyft/matchingstate/services/supplyhealths/config", "github.com/lyft/matchingstate/services/supplyhealths/grpc", "github.com/lyft/matchingstate/services/supplyhealths/grpc/handlers", "github.com/lyft/matchingstate/services/supplyhealths/http", "github.com/lyft/matchingstate/services/supplyhealths/http/handlers", "github.com/lyft/matchingstate/testing/fixtures", "github.com/lyft/matchingstate/testing/proto"]}, "envoy": {"profile": "go", "settings": {"services": [{"name": "matchingstate"}], "common_settings": {"authorization": {"bindings": {"courier": ["demand_sessions"], "dispatch": ["demand_sessions", "supply_healths"], "dispatchglobalmatchingworkers": ["demand_sessions", "supply_healths"], "dispatchmatchingworkerssmall": ["demand_sessions", "supply_healths"], "matchingexecution": ["demand_sessions"], "ridesapi": ["demand_sessions"], "ridescheduler": ["demand_sessions"], "pickupoptimizer": ["demand_sessions"], "pickupoptimizer2019data": ["demand_sessions"], "taskqueuenormal": ["supply_healths_fanner2js"], "venues": ["demand_sessions"]}, "permissions": {"demand_sessions": {"paths": ["/pb.lyft.matchingstate.DemandSessions/*"]}, "supply_healths": {"paths": ["/pb.lyft.matchingstate.SupplyHealths/*"]}, "supply_healths_fanner2js": {"paths": ["/api/v1/supply_healths/*"]}}}, "internal_hosts": {"badcompanions": null, "usergroups": null, "regions": null}, "external_hosts": {"dynamodb_iad": null}}, "override_settings": [{"services": [{"name": "matchingstate", "service_instance": "development"}], "settings": {"authorization": {"bindings": {"goldentests": ["demand_sessions"]}}}}]}}, "logging": {"matchingstate": {"fields": {"requestId": "keyword", "demand_session": "keyword", "supply_id": "keyword", "driver_lyft_id": "keyword", "end": "long", "handler": "keyword", "active_models": "keyword", "event_name": "keyword", "service": "keyword", "downstream_cluster": "keyword", "request_id": "keyword", "endpoint": "keyword", "error": "keyword", "lyft_user_id": "keyword", "code": "keyword", "matchingstate_region": "keyword", "matchingstate_ride_id": "keyword", "matchingstate_user_id": "keyword", "method": "keyword", "path": "keyword", "host": "keyword", "dataDeployPath": "keyword", "signal": "keyword"}}}, "version": "9b28fe97297a06626c968fb7a3794da1b0a977b1", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "matncproxy": {"name": "matncproxy", "description": "Service to proxy requests between Lyft microservices and massdpu api", "repository": "git@github.com:lyft/matncproxy.git", "slack": "#do-cities-eng", "team_email": "cities@lyft.com", "pagerduty_escalation_policy": "Cities", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "matncproxy.legacy"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "startup", "type": "startup", "group": "matncproxy.dev"}, {"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production", "legacy": true}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "matncproxy"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}}, "override_settings": [{"services": [{"name": "matncproxy"}], "settings": {"authorization": {"permissions": {"create_driver": {"paths": ["/drivers"], "methods": ["POST"]}, "update_driver_info": {"paths": ["/drivers/*"], "methods": ["POST"]}, "get_driver_info": {"paths": ["/drivers/*"], "methods": ["GET"]}}, "bindings": {"ats": ["create_driver", "get_driver_info"], "atsbatch": ["create_driver", "get_driver_info"], "atsmatnc": ["create_driver", "get_driver_info"], "atsworkers": ["create_driver", "get_driver_info"], "regulatoryintegrationsairflow": ["create_driver", "get_driver_info", "update_driver_info"], "regulatoryintegrations": ["create_driver", "get_driver_info", "update_driver_info"], "regulatoryintegrationsworkers": ["create_driver", "get_driver_info", "update_driver_info"]}}}}]}}, "version": "996e2b761e30063192e59d4c30f6e1c433cdfa4b", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "mbplatformcluster": {"name": "mbplatformcluster", "description": "AWS Batch workers", "repository": "git@github.com:lyft/mbplatformcluster.git", "image_type": "service", "service_tier": 2, "languages": ["python", "bash"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": []}], "slack": "#flytecrew", "team_email": "flyte-eng@lyft.com", "pagerduty_escalation_policy": "Data Platform Flyte", "groups": [{"name": "dev", "members": ["control.dev", "mbplatformcluster.legacy"]}], "deploy": [{"name": "staging", "automatic": false, "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "python": {"mypy": {"python_versions": ["3.6"], "exclude": ["ops"]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "mbplatformcluster"}], "common_settings": {"internal_hosts": {"modeldiscovery": null, "dsfeatures": null}}}}, "version": "bd0bd769de3fb6628f12d6a4d5eeb12028ca3ccc", "images": [{"parent": {"name": "opsbase", "version": "7e2f9a3f6933ad0f114afd540c637237475ba38b", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "7e2f9a3f6933ad0f114afd540c637237475ba38b", "sub_image": null, "external": false}}, "mediadeviceproxy": {"name": "mediadeviceproxy", "description": "Service for media device to Lyft communication", "repository": "git@github.com:lyft/mediadeviceproxy.git", "slack": "#lyft-media-eng-bot", "team_email": "lyft-media-eng@lyft.com", "pagerduty_escalation_policy": "Lyft Media", "image_type": "service", "service_tier": 1, "languages": ["python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py38.b53cef4fa319d93186ad696836fe2985a4b6381d", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "mediadeviceproxy.legacy"]}, {"name": "service_group", "members": ["mediadeviceproxy.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "mediadeviceproxy.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "mediadeviceproxy.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "mediadeviceproxy.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "mediadeviceproxy"}], "common_settings": {"internal_hosts": {"devicemanager": null, "halodriver": null}}}}, "version": "9c477a54a5260d3b1c04476edb4ba7eba9647d73", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "b53cef4fa319d93186ad696836fe2985a4b6381d", "sub_image": "py38", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "meetingfeedback": {"name": "meetingfeedback", "description": "A service that collects, compiles and provides meeting feedback to organizers.", "repository": "git@github.com:lyft/meetingfeedback.git", "image_type": "service", "service_tier": 3, "slack": "#internal-productivity", "team_email": "internal-productivity@lyft.com", "pagerduty_escalation_policy": "Internal Productivity", "languages": ["bash", "javascript", "python"], "custom": {"service_type": "python", "internal_service": true, "frontend_service": true}, "credentials": true, "restricted_ssh": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 120, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "team.dev", "lyftidl.server", "meetingfeedback.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "meetingfeedback.dev"}, {"name": "build_dist", "type": "jailed", "command": "make build_dist"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "test", "type": "jailed", "command": "make test"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "meetingfeedback"}, {"name": "meetingfeedbackbatch"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"team": null}}}}, "version": "32a891b4d6a67885f248010ed3764ce7b7a6bcef", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "memberships": {"name": "memberships", "repository": "git@github.com:lyft/memberships.git", "description": "Product, offering, and lifecycle management for memberships", "service_tier": 2, "team_email": "rider-memberships-eng@lyft.com", "pagerduty_escalation_policy": "Memberships", "slack": "#memberships-bots", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:ca3113938113c18b77d7b0e77e771a603f5f7259"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:9da8e35dbaa78ac513f8934273bde2863ebe0c7c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- memberships", "limits": {"cpu": 4, "memory": "512Mi"}, "sub_image": "k8s", "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "memberships.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "memberships.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "memberships.dev", "container": "memberships.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "memberships.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "memberships.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {}, "services": [{"name": "memberships"}]}}, "version": "0ae92fa3f54fcf74d67842b613b9f4c432d0f48b", "images": [{"parent": {"name": "opsbase", "version": "ca3113938113c18b77d7b0e77e771a603f5f7259", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "9da8e35dbaa78ac513f8934273bde2863ebe0c7c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "ca3113938113c18b77d7b0e77e771a603f5f7259", "sub_image": null, "external": false}}, "membershipsapi": {"name": "membershipsapi", "description": "External facing API for all Memberships services and prodcuts", "repository": "git@github.com:lyft/membershipsapi.git", "slack": "#memberships-bots", "team_email": "rider-memberships-eng@lyft.com", "pagerduty_escalation_policy": "Memberships", "image_type": "service", "service_tier": 2, "languages": ["python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:a2a148f3c4ba6040ca9ebd40dd21772f53aa1f1b", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.cac3baf704d97ad18fdbd9c698656473254455d5", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "membershipsapi.legacy"]}, {"name": "service_group", "members": ["membershipsapi.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "membershipsapi.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "membershipsapi.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "membershipsapi.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "membershipsapi"}], "common_settings": {"internal_hosts": {"ridepasses": null, "riderperks": null}, "external_hosts": {"contentful_preview": null, "contentful_delivery": null}, "redis_clusters": {"membershipsapi": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "version": "4ab653ad828a72e1e3dbe5ded83b0b7eebead6f8", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "a2a148f3c4ba6040ca9ebd40dd21772f53aa1f1b", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "cac3baf704d97ad18fdbd9c698656473254455d5", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "memestachebackend": {"name": "memestachebackend", "description": "Backend for Memestache, a tool for creating and sharing memes", "repository": "git@github.com:lyft/memestachebackend.git", "slack": "#memestache", "team_email": "memestache-team@lyft.com", "pagerduty_escalation_policy": "Memestache", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:68547afa9d7dbf0c41d37c8e1d4661607d6f674b", "packages": ["libxmlsec1-dev", "pkg-config"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.a2a4fdca992c5289dd17d5083ea8250afc452ebd", "sub_image": "k8s", "packages": ["libxmlsec1-dev", "pkg-config"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/memestachebackend", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "memestachebackend.legacy"]}, {"name": "service_group", "members": ["memestachebackend.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "memestachebackend.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "memestachebackend.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "memestachebackend.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "memestachebackend"}]}}, "version": "996792ff150798c27b922d0b0e3df0b1ab8b3a4c", "images": [{"parent": {"name": "opsbase", "version": "68547afa9d7dbf0c41d37c8e1d4661607d6f674b", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "a2a4fdca992c5289dd17d5083ea8250afc452ebd", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "68547afa9d7dbf0c41d37c8e1d4661607d6f674b", "sub_image": null, "external": false}}, "messaging": {"name": "messaging", "description": "messaging service for multichannel interpolated templates", "repository": "git@github.com:lyft/messaging.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}], "limits": {"environment": {"development": {"memory": "0.5Gi", "cpu": 0.55}}}}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/messaging", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi"}}, {"name": "updatetemplatetranslationstatus", "command": "dumb-init -- service_venv python manage.py update_template_translation_status", "sub_image": "k8s", "workdir": "/code/messaging"}, {"name": "restoretemplatesfromexport", "command": "dumb-init -- service_venv python manage.py restore_templates_from_export", "sub_image": "k8s", "workdir": "/code/messaging"}, {"name": "downloadmessagehistory", "command": "dumb-init -- service_venv python manage.py download_message_history", "sub_image": "k8s", "workdir": "/code/messaging"}, {"name": "processreferencetables", "command": "dumb-init -- service_venv python manage.py process_reference_tables", "sub_image": "k8s", "workdir": "/code/messaging"}, {"name": "processtrackingevents", "command": "dumb-init -- service_venv python manage.py process_tracking_events --email", "sub_image": "k8s", "workdir": "/code/messaging"}, {"name": "updatemessageowners", "command": "dumb-init -- service_venv python manage.py update_message_owners", "sub_image": "k8s", "workdir": "/code/messaging"}, {"name": "exportalltemplates", "command": "dumb-init -- service_venv python manage.py export_all_templates", "sub_image": "k8s", "workdir": "/code/messaging"}, {"name": "sendmessagetemplatestats", "command": "dumb-init -- service_venv python manage.py send_message_template_stats", "sub_image": "k8s", "workdir": "/code/messaging"}, {"name": "sendtemplatetranslationreport", "command": "dumb-init -- service_venv python manage.py send_template_translation_report", "sub_image": "k8s", "workdir": "/code/messaging"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "redis.dev", "elasticsearch5.server", "messaging.legacy"]}, {"name": "integration", "members": ["account.dev", "ats.qa_approve", "cancels.dev", "coupons.dev", "dborchestrator.legacy", "dispatch.dev", "dispatchavailability.dev", "dsfeatures.dev", "envoy.server", "green.dev", "jobscheduler.dev", "karma.dev", "ledger.dev", "legacyapi.integration", "matchingexecution.dev", "messaging.dev", "mongodb.dev", "paxrewardsview.dev", "paymentgateway.dev", "pricing.dev", "push.dev", "ridepasses.dev", "ridetimeestimator.dev", "regions.dev", "supply.dev", "tcs.dev", "trips.dev", "tripsapi.dev", "txnhub.legacy", "users.dev", "usereligibilities.dev", "usergroups.dev", "userpreferences.dev", "viewport.dev", "wallet.dev", "loyaltytiers.dev", "loyaltypoints.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "messaging.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "target": "tests/integration", "group": "messaging.integration", "virtualenv": "service_venv", "container": "messaging.legacy", "command": "make test_integration", "float_dependencies": "30 5-22 * * *", "reports": {"junit": "build/integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#notifications-bots", "team_email": "notifications-eng@lyft.com", "pagerduty_escalation_policy": "Notifications", "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}, {"facet": "restoretemplatesfromexport"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"legacy": false, "name": "production", "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "downloadmessagehistory"}, {"facet": "exportalltemplates"}, {"facet": "processreferencetables"}, {"facet": "processtrackingevents"}, {"facet": "sendmessagetemplatestats"}, {"facet": "updatemessageowners"}, {"facet": "updatetemplatetranslationstatus"}, {"facet": "sendtemplatetranslationreport"}], "kubernetes": {"enabled": true}}], "facets": [{"name": "main", "member": "messaging.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"criteria": {"cpu_target": 35}, "environment": {"staging": {"min_size": 1, "max_size": 5}, "production": {"min_size": 2, "max_size": 500}}}}, {"name": "canary", "member": "messaging.service", "type": "service", "canary": true, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "updatetemplatetranslationstatus", "member": "messaging.updatetemplatetranslationstatus", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "concurrency_policy": "forbid", "schedule": "0 * * * *"}, {"name": "restoretemplatesfromexport", "member": "messaging.restoretemplatesfromexport", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "schedule": "20 * * * *", "concurrency_policy": "forbid"}, {"name": "downloadmessagehistory", "type": "cron", "member": "messaging.downloadmessagehistory", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "schedule": "5 * * * *", "concurrency_policy": "forbid"}, {"name": "processreferencetables", "member": "messaging.processreferencetables", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "schedule": "*/4 * * * *", "concurrency_policy": "forbid"}, {"name": "processtrackingevents", "member": "messaging.processtrackingevents", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "schedule": "*/15 * * * *", "concurrency_policy": "forbid"}, {"name": "updatemessageowners", "member": "messaging.updatemessageowners", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "schedule": "25 9 * * *", "concurrency_policy": "forbid"}, {"name": "exportalltemplates", "member": "messaging.exportalltemplates", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "schedule": "10 * * * *", "concurrency_policy": "forbid"}, {"name": "sendmessagetemplatestats", "member": "messaging.sendmessagetemplatestats", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "schedule": "15 * * * *", "concurrency_policy": "forbid"}, {"name": "sendtemplatetranslationreport", "member": "messaging.sendtemplatetranslationreport", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "schedule": "0 16 * * 1", "concurrency_policy": "forbid"}], "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "languages": ["python"], "image_type": "service", "service_tier": 1, "envoy": {"profile": "python", "settings": {"services": [{"name": "messaging"}, {"name": "messagingbatch"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"account": null, "acquisitionguarantees": null, "ats": null, "audience": null, "backgroundcheck": {"tls_enabled": true}, "billingaggregator": null, "cancels": null, "chromeheadless": null, "consumerrentalspay": null, "coupons": null, "driverheatmaps": null, "driverloyalty": null, "drivermonitor": null, "driverridesinfo": null, "dsfeatures": null, "enterprise": null, "etaproxy": null, "family": null, "fare": null, "fleetlocations": null, "fleetmanagement": null, "flexibleincentives": null, "grow": null, "hqproxy": null, "incentiveguarantees": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "lastmile": null, "leadplatform": null, "ledger": null, "locations": null, "logistics": null, "loyaltypoints": null, "loyaltytiers": null, "mailer": null, "marketweather": null, "messaging": null, "offerings": null, "offeringsapi": null, "paxrewardsview": null, "payapi": null, "places": null, "push": null, "ratecards": null, "ratelimit": null, "ratings": null, "regions": null, "rentals": null, "ridechallenges": null, "ridelocations": null, "ridepasses": null, "rides": null, "ridesapi": null, "ridescheduler": null, "ridestreaks": null, "ridetimeestimator": null, "routes": null, "supply": null, "supplypartners": null, "switchboard": null, "tcs": null, "tcseditor": null, "team": null, "tripsapi": null, "usereligibilities": null, "usergroups": null, "userpreferences": null, "users": null, "vehicleservicecenters": null, "wallet": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "redis": {"messagingmultiredis": {"port": 6380}}, "authorization": {"permissions": {"render_url_creation": {"paths": ["/v1/message-render-url-creator"]}, "render_url_get": {"paths": ["/v1/message-render"], "methods": ["GET"]}, "render_url_post": {"paths": ["/v1/message-render"], "methods": ["POST"]}, "allow_all_other": {"not_paths": ["/v1/message-render-url-creator", "/v1/message-render"]}}, "bindings": {"banners": ["render_url_post"], "enterprise": ["render_url_post"], "enterprisebatch": ["render_url_post"], "enterpriseworkers": ["render_url_post"], "messagingint": ["render_url_creation"], "rideexpensing": ["render_url_post"], "envoy": ["render_url_get"], "tom": ["render_url_creation", "render_url_post"], "*": ["allow_all_other"]}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s", "packages": ["zip"]}}]}}, "logging": {"messaging": {"fields": {"user_id": "keyword", "message_template_id": "keyword", "message_template_name": "keyword", "job_id": "keyword", "inbox_template_id": "keyword", "failure_reason": "keyword", "ride_id": "keyword", "dedupe_key": "keyword", "ledger_invoice_id": "keyword", "email_type": "keyword", "ledger_order_id": "keyword", "send_error": "boolean", "reason": "keyword", "message_status": "keyword", "analytics_event_name": "keyword", "recipient_id": "keyword", "delay_seconds": "long", "jitter_seconds": "long", "found_channel": "keyword", "desired_channel": "keyword", "message_template_version": "keyword", "channel": "keyword", "error_message": "keyword", "app_type": "keyword", "postinterpolated": "keyword", "push_category": "keyword", "email_address": "keyword", "send_to_user_id": "keyword", "error_type": "keyword", "obj": "keyword", "path": "keyword", "error": "keyword", "deep_link": "keyword", "grpc_code": "keyword", "order_type": "keyword", "order_id": "keyword", "message_type": "keyword", "message_id": "keyword", "route_id": "keyword", "flagged_word": "keyword", "exc": "keyword", "version": "keyword", "active_minor_version": "long", "report_end_time_ms": "keyword", "report_start_time_ms": "keyword", "driver_id": "keyword", "current_time": "keyword", "report_ride_cutoff_time_ms": "keyword", "Accept-Language": "keyword", "X-Ot-Span-Context": "keyword", "X-Envoy-Downstream-Service-Node": "keyword", "Content-Length": "keyword", "Host": "keyword", "X-Request-Id": "keyword", "X-Envoy-External-Address": "keyword", "X-Forwarded-For": "keyword", "X-Forwarded-Proto": "keyword", "X-Envoy-Downstream-Service-Cluster": "keyword", "Accept": "keyword", "User-Agent": "keyword", "Accept-Encoding": "keyword", "User-Device": "keyword", "X-Session": "keyword", "X-Request-Attempt": "keyword", "X-Client-Session-Id": "keyword", "X-Carrier": "keyword", "passenger_id": "keyword", "X-Location": "keyword", "ride_type": "keyword", "stops": "keyword", "X-Design-Id": "keyword", "X-Device-Density": "keyword", "X-Locale-Language": "keyword", "X-Locale-Region": "keyword", "Ot-Tracer-Sampled": "keyword", "Ot-Tracer-Spanid": "keyword", "Ot-Tracer-Traceid": "keyword", "Content-Language": "keyword", "X-Timestamp-Ms": "keyword", "X-Analytics-Dev": "keyword", "service": "keyword", "attribute": "keyword", "e": "keyword", "card_source": "keyword", "payment_method": "keyword", "Cookie": "keyword", "creator": "keyword", "channels": "keyword", "status_code": "long", "cc": "keyword", "subject": "keyword", "to": "keyword", "message_template_version_id": "keyword", "inbox_template": "keyword", "card_type": "keyword", "If-Modified-Since": "keyword", "participant_id": "keyword", "recipient_user_id": "keyword", "is_business_ride": "boolean", "active_version_id": "keyword", "X-Carrier-B64": "keyword", "active_minor_version_id": "long", "send_to_applicant_id": "keyword", "X-Client-Trace-Id": "keyword", "params": "keyword", "identifier": "keyword", "charge_account_id": "keyword", "X-Cbt": "keyword", "code": "long", "interpolation_error": "keyword", "X-Lyft-Refresh-Token-Hash": "keyword", "X-Lyft-Scopes": "keyword", "work_email": "keyword", "Lyft-Version": "keyword", "X-Lyft-Client-Id": "keyword", "X-Lyft-Session-Id": "keyword", "email": "keyword", "organization_id": "keyword"}}, "messagingbatch": {"fields": {"message_template_id": "keyword", "entered": "long", "fail_rate": "float", "status": "keyword", "reason": "keyword", "path": "keyword", "end_time_ms": "keyword", "start_time_ms": "keyword", "last_send_time_ms": "keyword", "template_ids": "keyword", "query": "keyword", "repeat_template_ids": "keyword", "templates_found": "keyword", "to": "keyword", "subject": "keyword", "cc": "keyword", "argv": "keyword", "error": "keyword", "message_owner": {"parent_id": "keyword", "message_owner_id": "keyword", "message_owner_name": "keyword", "message_owner_type": "keyword", "external_id": "keyword"}, "owner_id": "keyword"}}}, "version": "5eef2ba224728a88c9892620b6396080bd768b88", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "messagingint": {"name": "messagingint", "description": "Front End for templated Messaging tools that will be accessed from TOM", "repository": "git@github.com:lyft/messagingint.git", "slack": "#notifications-bots", "team_email": "notifications-eng@lyft.com", "pagerduty_escalation_policy": "Notifications", "image_type": "service", "service_tier": 2, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "messaging.dev", "tom.dev", "messagingint.legacy", "campaigns.legacy", "audience.legacy"]}, {"name": "service_group", "members": ["messagingint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "messagingint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "messagingint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"tom": null, "messaging": null, "campaignstorage": null, "audience": null, "acl": null, "privacyaudit": null}}}}, "version": "fcb468e390e76294dd5f655d4fa712cb34a07280", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "metadataproxy": {"name": "metadataproxy", "description": "Intercepts calls to EC2 Metadata Service from containers.", "repository": "git@github.com:lyft/metadataproxy.git", "pagerduty_escalation_policy": "DevX", "team_email": "devnull@lyft.com", "containers": [{"name": "server", "command": "/code/metadataproxy/entrypoint.sh", "provision": "/code/metadataproxy/provision.sh", "network": "host", "mounts": ["/var/run/docker_sockets"], "start_phase": "sequential_init", "privileged": true}], "groups": [{"name": "dev", "members": ["metadataproxy.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "metadataproxy.dev"}], "deploy": [{"name": "development", "legacy": false}, {"name": "staging", "legacy": false}, {"name": "canary", "legacy": false}, {"name": "production", "legacy": false}], "builder": {"name": "docker_build", "params": {"dockerfile": "Dockerfile.private"}}, "version": "ad764633636e551105be43d142e587b9bd17ddf4", "images": [{"parent": {"name": "imagebase", "version": "d73781c2355e7b4dd3f04e9bf95a15c40761b359", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "d73781c2355e7b4dd3f04e9bf95a15c40761b359", "sub_image": null, "external": false}}, "metaservice": {"name": "metaservice", "description": "TODO short description of the service", "repository": "git@github.com:lyft/metaservice.git", "slack": "#devx-bots", "team_email": "devx-team@lyft.com", "pagerduty_escalation_policy": "DevX", "image_type": "tool", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "containers": [{"name": "spin", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["control.minimal", "metaservice.spin"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests/unit"}, {"name": "integration", "type": "execution", "group": "metaservice.dev", "container": "metaservice.spin", "command": "pytest tests/integration"}], "deploy": [{"name": "staging-fast", "legacy": false, "orca": [{"region": "iad", "iam_role": "orca-metaservice", "credentials": true, "subargs": "state.highstate test=True 'pillar={\"fast\":true}'"}]}, [{"name": "production-fast", "legacy": false, "orca": [{"region": "iad", "iam_role": "orca-metaservice", "credentials": true, "subargs": "state.highstate 'pillar={\"fast\":true}'"}]}, {"name": "production-slow", "legacy": false, "orca": [{"region": "iad", "iam_role": "orca-metaservice", "credentials": true}]}, {"name": "staging-slow", "legacy": false, "orca": [{"region": "iad", "iam_role": "orca-metaservice", "credentials": true, "subargs": "state.highstate test=True"}]}]], "version": "e671c45512e699f79406ae842f95114f6d02792e", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "metaservicebots": {"name": "metaservicebots", "description": "Manages github bots for lyft", "repository": "git@github.com:lyft/metaservicebots.git", "slack": "#security", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "team_email": "security-engineering@lyft.com", "image_type": "tool", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "deploy": [{"name": "staging", "automatic": true, "legacy": false, "orca": [{"region": "iad", "iam_role": "orca-metaservice", "credentials": true, "subargs": "state.highstate test=True"}]}, {"name": "production", "automatic": true, "legacy": false, "orca": [{"region": "iad", "iam_role": "orca-metaservice", "credentials": true, "subargs": "state.highstate"}]}], "version": "cd7b76b0be43d16e934c24c08094e76b0fc2f31a", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "metricsdiscoveryengine": {"name": "metricsdiscoveryengine", "repository": "git@github.com:lyft/metricsdiscoveryengine.git", "description": "metrics discovery and aggregation service", "service_tier": 3, "team_email": "observability-visibility-team@lyft.com", "pagerduty_escalation_policy": "Observability Visibility", "slack": "#m3", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:3b396b0c34b5bba2c6c8576025a90009d34a9350", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- metricsdiscoveryengine", "limits": {"cpu": 4, "memory": "512Mi"}, "sub_image": "k8s", "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "metricsdiscoveryengine.legacy", "redis.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "metricsdiscoveryengine.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "metricsdiscoveryengine.dev", "container": "metricsdiscoveryengine.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "metricsdiscoveryengine.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "metricsdiscoveryengine.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {"redis_clusters": {"metricsdiscoveryengine": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}, "services": [{"name": "metricsdiscoveryengine"}]}}, "version": "c2f9c3897410c2cecb46325c138410cc803ee800", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "3b396b0c34b5bba2c6c8576025a90009d34a9350", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "metricsingest": {"name": "metricsingest", "repository": "git@github.com:lyft/metricsingest.git", "description": "Service that handles external clients' metrics ingestion.", "service_tier": 2, "team_email": "client-networking@lyft.com", "slack": "#client-networking-dev", "pagerduty_escalation_policy": "Client Networking", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:deb42d25da0e6d5fe565c019883e458b4b31b696"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- metricsingest", "workdir": "/code/metricsingest", "limits": {"cpu": 4, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "metricsingest.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "metricsingest.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "metricsingest.dev", "container": "metricsingest.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "metricsingest.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "metricsingest.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {"local_service": {"grpc_streaming": true}}, "services": [{"name": "metricsingest"}]}}, "version": "4c1710906ca17429a72cbeb3914efb71972b20c0", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "migrations": {"name": "migrations", "description": "Service to schedule, control and manage migrations", "repository": "git@github.com:lyft/migrations.git", "image_type": "service", "languages": ["go"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- migrations", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}}], "facets": [{"name": "main", "member": "migrations.service", "type": "service", "autoscaling": {"environment": {"production": {"min_size": 1, "max_size": 6}, "staging": {"min_size": 1, "max_size": 3}}}}, {"name": "canary", "member": "migrations.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:8ad0040e2e37145a4ff8cdfc6669f48462d32b14", "sub_image": "k8s"}}]}}, "groups": [{"name": "dev", "members": ["control.dev", "taskqueue.dev", "dynamodb.server", "minio.server", "migrationworkers.dev", "migrations.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "migrations.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "migrations.dev", "container": "migrations.legacy", "command": "make integration"}, {"name": "coverage", "type": "execution", "group": "migrations.dev", "container": "migrations.legacy", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#async-tasks-platform", "notification_overrides": {"deploy": {"slack": "#async-tasks-deploy"}, "pr_merge": {"slack": "#async-tasks-deploy"}, "test_failure": {"slack": "#async-tasks-deploy", "environments": ["production"]}}, "pagerduty_escalation_policy": "Async Tasks Platform", "team_email": "async-tasks-platform@lyft.com", "slack_deploy_notification_environments": ["canary", "production"], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "migrations"}, {"name": "migrationscli"}], "common_settings": {"internal_hosts": {"taskqueuemigrationweb": null, "taskqueuenormalweb": null, "taskqueuebulkweb": null}, "external_hosts": {"dynamodb_iad": null, "sqs_iad": null, "sqs_pdx": null}}}}, "service_tier": 3, "logging": {"migrations": {"fields": {"work name": "keyword", "err": "keyword", "migration Id": "keyword", "migration Name": "keyword", "location": "keyword", "file path": "keyword", "file count": "long", "file location": "keyword", "migrationId": "keyword", "Id": "keyword", "Name": "keyword", "local file": "keyword", "lyftID": "keyword", "MigrationId": "keyword", "path": "keyword", "method": "keyword", "host": "keyword", "migration name": "keyword", "migration id": "keyword", "service": "keyword", "signal": "keyword", "id": "keyword", "error": "keyword", "code": "keyword", "lyft_user_id": "keyword", "endpoint": "keyword", "request_id": "keyword", "downstream_cluster": "keyword"}}}, "version": "915cdc1cc715796d33258f646abf5ee8a72c3de5", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "go", "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2igocli", "version": "8ad0040e2e37145a4ff8cdfc6669f48462d32b14", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "migrationworkers": {"name": "migrationworkers", "description": "Service to execute custom migration code", "repository": "git@github.com:lyft/migrationworkers.git", "image_type": "service", "service_tier": 2, "slack": "#async-tasks-platform", "notification_overrides": {"deploy": {"slack": "#async-tasks-deploy"}, "pr_merge": {"slack": "#async-tasks-deploy"}, "test_failure": {"slack": "#async-tasks-deploy", "environments": ["production"]}}, "team_email": "async-tasks-platform@lyft.com", "pagerduty_escalation_policy": "Async Tasks Platform", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "sub_image": "k8s", "command": "service_venv gunicorn app:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 4, "memory": "4Gi", "environment": {"development": {"cpu": 1, "memory": "2Gi"}}}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}}], "facets": [{"name": "main", "member": "migrationworkers.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 20}, "production": {"min_size": 1, "max_size": 40}}}}, {"name": "canary", "member": "migrationworkers.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "elasticsearch6.server", "migrationworkers.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "migrationworkers.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "migrationworkers"}], "common_settings": {"internal_hosts": {"account": null, "auth": null, "compi": null, "coupons": null, "custodian": null, "dbproxy": null, "dbproxyauth": null, "dbproxybenchmark": null, "dbproxyfare": null, "driverearnings": null, "driverheatmaps": null, "drivermonitor": null, "driverridesinfo": null, "dsfeatures": null, "dsfeatureswrites": null, "enterprise": null, "enterprisedispatch": null, "green": null, "incidentassistant": null, "invites": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "karma": null, "ledger": null, "migrationworkers": null, "mongodbtailer": null, "payapi": null, "ratings": null, "rides": null, "ridesapi": null, "spots": null, "supplyrecords": null, "supporttext": null, "tripsapi": null}, "external_hosts": {"dynamodb_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:949781cc88ec78616c8cd3d9a22f3bba32c7b743", "sub_image": "k8s"}}]}}, "logging": {"migrationworkers": {"fields": {"data": {"migrationId": "keyword", "messageBody": "keyword", "lyftId": "keyword", "commonData": "keyword", "driver_id": "keyword", "pretend": "boolean"}, "error": "keyword"}}}, "version": "5dc3fc01e6a8189d3ba191d8982eeb17e2a4fec8", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "949781cc88ec78616c8cd3d9a22f3bba32c7b743", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "minio": {"name": "minio", "description": "minio is a mock s3 server used during development", "repository": "git@github.com:lyft/containers.git:minio", "docs": {"section": "Infrastructure"}, "containers": [{"name": "server", "command": "/code/containers/minio/entrypoint.sh", "exports": [{"name": "web", "port": 8901}]}], "groups": [{"name": "dev", "members": ["control.dev", "minio.server"]}], "tests": [{"name": "start", "type": "startup", "group": "minio.dev"}], "deploy": [{"name": "development", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false}], "languages": ["bash"], "image_type": "tool", "version": "9ee9440569d9fb8bc828938ab8fa205fa797dcf3", "images": [{"parent": {"name": "imagebase", "version": "b2a0efc8cc0c1978979bc09af20933379e6c1c20", "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "b2a0efc8cc0c1978979bc09af20933379e6c1c20", "external": false}}, "mlflowflyteexperiment": {"name": "mlflowflyteexperiment", "description": "Experimental Studies for Spark on LyftLearn", "repository": "git@github.com:lyft/mlflowflyteexperiment.git", "slack": "#ml-platform-bots", "team_email": "mlplatform@lyft.com", "pagerduty_escalation_policy": "Forecasting", "image_type": "flyteworkflow", "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "mlflowflyteexperiment.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "mlflowflyteexperiment.dev", "container": "mlflowflyteexperiment.spin", "command": "make register_for_pr"}], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "version": "29484746f106c4f65e148dd47b3e5d53a14e754b", "images": [{"parent": {"name": "flytebase", "version": "3d0fb8e846282c9d854dc3f28b4d404e71277914", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "flytebase", "version": "3d0fb8e846282c9d854dc3f28b4d404e71277914", "sub_image": null, "external": false}}, "mlflowlyftlearn": {"name": "mlflowlyftlearn", "description": "Fugue Lyftlearn Base Image", "repository": "git@github.com:lyft/mlflowlyftlearn.git", "image_type": "tool", "slack": "#ml-platform-bots", "team_email": "mlplatform@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/lyftlearnnotebook:e8f1ef94149e9239bff3e54c9ccff3ea149e272f"}}]}}, "deploy": [{"name": "production", "legacy": false}], "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "lyftlearn", "command": "sleep infinity", "sub_image": "lyftlearn", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "notebook", "command": "/code/venvs/venv/bin/jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password=''", "privileged": true, "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}], "groups": [{"name": "lyftlearn_group", "members": ["mlflowlyftlearn.lyftlearn"]}], "tests": [{"name": "test-lyftlearn", "type": "execution", "container": "mlflowlyftlearn.lyftlearn", "group": "mlflowlyftlearn.lyftlearn_group", "command": "make test_lyftlearn"}], "lyftlearn": {}, "version": "772654d95c3574717f47074db2c500d2eca24166", "images": [{"parent": {"name": "lyftlearnnotebook", "version": "e8f1ef94149e9239bff3e54c9ccff3ea149e272f", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "lyftlearnnotebook", "version": "e8f1ef94149e9239bff3e54c9ccff3ea149e272f", "sub_image": null, "external": false}}, "mlpbilling": {"name": "mlpbilling", "description": "MLP Billing", "repository": "git@github.com:lyft/mlpbilling.git", "slack": "#ml-platform-bots", "team_email": "ds-platform@lyft.com", "pagerduty_escalation_policy": "DS Platform", "image_type": "service", "service_tier": 3, "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}, {"name": "lyftlearn", "command": "sleep infinity", "sub_image": "lyftlearn", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}, {"name": "sparkui", "port": 4040, "protocol": "http"}], "mounts": ["/var/run/docker_sockets", "/srv/control"]}], "groups": [{"name": "dev", "members": ["control.dev", "mlpbilling.spin"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.lyftlearn", "sub_image": "lyftlearn"}}]}}, "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "mlpbilling.dev", "container": "mlpbilling.spin", "command": "make register_for_pr"}], "deploy": [[{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_development"}], [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_staging"}], [{"name": "production", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_production"}]], "version": "b5de8dc7c89284daa120288e32fb3814285fafb7", "images": [{"parent": {"name": "flytesparkbase", "version": "ea8b691fef3dc56fef3b71d3c6c54a28116b1635", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "lyftlearnspark", "version": "784b2870cc65088aefc3b892067fcdfef872cb51", "sub_image": null, "external": false}, "sub_image": "lyftlearn"}], "parent": {"name": "flytesparkbase", "version": "ea8b691fef3dc56fef3b71d3c6c54a28116b1635", "sub_image": null, "external": false}}, "mlpipelines": {"name": "mlpipelines", "description": "Service for building machine learning pipelines", "repository": "git@github.com:lyft/mlpipelines.git", "image_type": "service", "service_tier": 2, "slack": "#ml-platform", "team_email": "ds-platform@lyft.com", "pagerduty_escalation_policy": "DS Platform", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "mlpipelines.legacy", "minio.server"]}, {"name": "integration", "members": ["mlpipelines.dev", "modelconfig.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "mlpipelines.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "mlpipelines.integration", "container": "mlpipelines.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}, {"name": "update_pipelines", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "mlpipelines"}]}}, "notification_overrides": {"deploy": {"slack": "#ml-platform-bots", "environments": ["canary", "production"]}, "test_failure": {"slack": "#ml-platform-bots", "environments": ["production"]}, "pr_merge": {"slack": "#ml-platform-bots"}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"mlpipelines": {"fields": {"is_deprecated": "boolean", "limit": "long", "pipeline_uuid": "keyword", "model_uuid": "keyword", "owner_email": "keyword", "model_name": "keyword", "skip": "long", "group_uuid": "keyword", "csv_s3_path": "keyword", "s3_bucket": "keyword", "s3_key": "keyword", "presigned_url": "keyword", "resource_spec": {"memory_gb": "long", "cpu": "long", "gpu": "long"}, "workflow_id": "keyword", "uuid": "keyword", "schedule": "keyword", "job_type": "keyword", "team": "keyword", "model_version": "keyword", "started_at": "keyword", "executor_email": "keyword", "is_one_time": "boolean", "num_total": "long", "is_stopped": "boolean", "hyperparameters": {"region": "keyword", "param_2": "keyword", "param_1": "keyword", "is_prod": "boolean", "ds_string": "date", "is_backfill": "boolean", "learning_rate": "float", "max_depth": "long", "metric": "keyword", "nthread": "long", "end_date": "date", "seed": "long", "data_version": "long", "min_child_weight": "long", "prototype_version": "long", "num_leaves": "long", "output_hive_table_name": "keyword", "early_stopping_round": "long", "objective": "keyword", "start_date": "date", "n_estimators": "long"}, "exception": {"message": "keyword", "class": "keyword"}, "configparameters": {"other_regions": "boolean", "regions": "keyword", "csv_s3_path": "keyword"}}}}, "version": "fcd656578a5c42c4e8b8a36b2b0b315f3d3dda49", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "mlplatformnotebook2": {"name": "mlplatformnotebook2", "description": "mlplatformnotebook image for python 2", "repository": "git@github.com:lyft/tensorflowbase.git:mlplatformnotebook2", "image_type": "tool", "slack": "#ml-platform-bots", "team_email": "ml-platform-team@lyft.com", "deploy": [{"name": "production", "legacy": false}], "containers": [{"name": "notebook", "command": "/venv/bin/jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password='' --notebook-dir=/mnt/user-home", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}], "tests": [{"name": "model_test", "type": "jailed", "command": "make test_model"}], "lyftlearn": {"notebook_templates": [{"template_name": "Python 2 Legacy", "long_description": "- awscli>=1.15.46\n - pulp>=1.6.8\n - numpy>=1.14.0\n - pandas>=0.22.0\n - lyft-analysis>=2.28.0\n - qds-sdk==1.9.8post1\n - lyft-dsp-features>=1.0.0\n - lyft-idl>=241.15.2\n - lyftlearn==3.1.24\n - lyftlearnclient>=0.6.8\n - keras>=2.1.0\n - torchvision>=0.2.1\n - psutil>=5.4.6\n - folium>=0.5.0\n - seaborn>=0.8.1\n - ortools>=6.0.0\n - statsmodels>=0.9.0\n - joblib>=0.11\n - plotly>=3.2.0\n - pytest-cov>=2.5.1\n - pytest-mock>=1.6.3\n - pytest>=3.3.0\n", "short_description": "Python 2 and Common Libraries", "rank": 12, "owner": "namirbekian", "lyftlearn_instances": ["default", "av"]}]}, "languages": ["javascript", "python"], "version": "f3b43186748e331e2bf065aa4076bba022b9943f", "images": [{"parent": {"name": "tf110cpupy2xenial", "version": "2bd3861a57872fd30937fc50fb1db420996c3749", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "tf110cpupy2xenial", "version": "2bd3861a57872fd30937fc50fb1db420996c3749", "sub_image": null, "external": false}}, "mlplatformnotebook2gpu": {"name": "mlplatformnotebook2gpu", "description": "mlplatformnotebook image for python 2", "repository": "git@github.com:lyft/tensorflowbase.git:mlplatformnotebook2gpu", "image_type": "tool", "slack": "#ml-platform-bots", "team_email": "ml-platform-team@lyft.com", "deploy": [{"name": "production", "legacy": false}], "containers": [{"name": "notebook", "command": "/venv/bin/jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password='' --notebook-dir=/mnt/user-home", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}], "lyftlearn": {"notebook_templates": [{"template_name": "python-2-gpu", "display_name": "Python 2 GPU Legacy", "long_description": "- awscli>=1.15.46\n - pulp>=1.6.8\n - numpy>=1.14.0\n - pandas>=0.22.0\n - lyft-analysis>=2.28.0\n - qds-sdk==1.9.8post1\n - lyft-dsp-features>=1.0.0\n - lyft-idl>=241.15.2\n - lyftlearn==3.1.24\n - lyftlearnclient>=0.6.8\n - keras>=2.1.0\n - torchvision>=0.2.1\n - psutil>=5.4.6\n - folium>=0.5.0\n - seaborn>=0.8.1\n - ortools>=6.0.0\n - statsmodels>=0.9.0\n - joblib>=0.11\n - plotly>=3.2.0\n - plotly>=3.2.0\n - pytest-cov>=2.5.1\n - pytest-mock>=1.6.3\n - pytest>=3.3.0\n", "short_description": "Python 2, Tensorflow, GPU Drivers", "rank": 14, "owner": "namirbekian", "lyftlearn_instances": ["default", "av"], "additional_containers": {"tensorboard": {"image": "docker.io/tensorflow/tensorflow", "version": "1.8.0", "command": ["/usr/local/bin/tensorboard"], "args": ["--logdir=/tmp/tensorflow"], "sidecar": true}}, "network": {"notebook": {"port": 8888, "public": true}, "tensorboard": {"port": 6006, "public": true}}}]}, "languages": ["javascript", "python"], "version": "f3b43186748e331e2bf065aa4076bba022b9943f", "images": [{"parent": {"name": "tf110gpupy2xenial", "version": "3abab70408df4e984aa7b0871503afdafc1d1b3e", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "tf110gpupy2xenial", "version": "3abab70408df4e984aa7b0871503afdafc1d1b3e", "sub_image": null, "external": false}}, "mlplatformnotebook3": {"name": "mlplatformnotebook3", "description": "mlplatformnotebook image for python 3", "repository": "git@github.com:lyft/tensorflowbase.git:mlplatformnotebook3", "image_type": "tool", "slack": "#ml-platform-bots", "team_email": "ml-platform-team@lyft.com", "deploy": [{"name": "production", "legacy": false}], "containers": [{"name": "notebook", "command": "/venv/bin/jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password='' --notebook-dir=/mnt/user-home", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}], "lyftlearn": {"notebook_templates": [{"template_name": "Python 3 Legacy", "long_description": "- awscli>=1.15.46\n - pulp>=1.6.8\n - numpy>=1.14.0\n - pandas>=0.22.0\n - lyft-analysis>=2.28.0\n - qds-sdk==1.9.8post1\n - lyft-dsp-features>=1.0.0\n - lyft-idl>=241.15.2\n - lyftlearn==3.1.24\n - lyftlearnclient>=0.6.8\n - keras>=2.1.0\n - torchvision>=0.2.1\n - matplotlib\n - psutil>=5.4.6\n - folium>=0.5.0\n - seaborn>=0.8.1\n - py3-ortools>=6.0.0\n - statsmodels>=0.9.0\n - joblib>=0.11\n - plotly>=3.2.0\n - pytest-cov>=2.5.1\n - pytest-mock>=1.6.3\n - pytest>=3.3.0\n", "short_description": "Python 3 and Common Libraries", "lyftlearn_instances": ["default", "av"], "rank": 11, "owner": "namirbekian"}]}, "languages": ["javascript", "python"], "version": "f3b43186748e331e2bf065aa4076bba022b9943f", "images": [{"parent": {"name": "tf110cpupy3xenial", "version": "2bd3861a57872fd30937fc50fb1db420996c3749", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "tf110cpupy3xenial", "version": "2bd3861a57872fd30937fc50fb1db420996c3749", "sub_image": null, "external": false}}, "mlplatformnotebook3gpu": {"name": "mlplatformnotebook3gpu", "description": "mlplatformnotebook image for python 3", "repository": "git@github.com:lyft/tensorflowbase.git:mlplatformnotebook3gpu", "image_type": "tool", "slack": "#ml-platform-bots", "team_email": "ml-platform-team@lyft.com", "deploy": [{"name": "production", "legacy": false}], "containers": [{"name": "notebook", "command": "/venv/bin/jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password='' --notebook-dir=/mnt/user-home", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}], "lyftlearn": {"notebook_templates": [{"template_name": "python-3-gpu", "display_name": "Python 3 GPU Legacy", "long_description": "- awscli>=1.15.46\n - pulp>=1.6.8\n - numpy>=1.14.0\n - pandas>=0.22.0\n - lyft-analysis>=2.28.0\n - qds-sdk==1.9.8post1\n - lyft-dsp-features>=1.0.0\n - lyft-idl>=241.15.2\n - lyftlearn==3.1.24\n - lyftlearnclient>=0.6.8\n - keras>=2.1.0\n - torchvision>=0.2.1\n - matplotlib\n - psutil>=5.4.6\n - folium>=0.5.0\n - seaborn>=0.8.1\n - py3-ortools>=6.0.0\n - statsmodels>=0.9.0\n - joblib>=0.11\n - plotly>=3.2.0\n - pytest-cov>=2.5.1\n - pytest-mock>=1.6.3\n - pytest>=3.3.0\n", "short_description": "Python 3, Tensorflow, GPU Drivers", "lyftlearn_instances": ["default", "av"], "rank": 13, "owner": "namirbekian", "additional_containers": {"tensorboard": {"image": "docker.io/tensorflow/tensorflow", "version": "1.8.0", "command": ["/usr/local/bin/tensorboard"], "args": ["--logdir=/tmp/tensorflow"], "sidecar": true}}, "network": {"notebook": {"port": 8888, "public": true}, "tensorboard": {"port": 6006, "public": true}}}]}, "languages": ["javascript", "python"], "version": "f3b43186748e331e2bf065aa4076bba022b9943f", "images": [{"parent": {"name": "tf110gpupy3xenial", "version": "3abab70408df4e984aa7b0871503afdafc1d1b3e", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "tf110gpupy3xenial", "version": "3abab70408df4e984aa7b0871503afdafc1d1b3e", "sub_image": null, "external": false}}, "mlplatformtools": {"name": "mlplatformtools", "description": "mlplatformtools base images for Lyft", "repository": "git@github.com:lyft/tensorflowbase.git:mlplatformtools", "image_type": "tool", "slack": "#ml-platform-bots", "team_email": "ml-platform@lyft.com", "credentials": true, "containers": [{"name": "register", "command": "/code/tensorflowbase/mlplatformtools/entrypoint.sh", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "spin", "command": "sleep infinity"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}]}], "groups": [{"name": "test", "members": ["mlplatformtools.spin"]}], "tests": [{"name": "lint", "type": "jailed", "command": "make test_lint"}, {"name": "integration", "type": "execution", "group": "mlplatformtools.test", "container": "mlplatformtools.spin", "command": "make test_integration"}], "version": "d89d9923a79ba26688fdefc2536696106c85b427", "images": [{"parent": {"name": "lyftlearnbase", "version": "9fa1b9b0c6af74620fb11e3d26e7afc20861d9be", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "lyftlearnbase", "version": "9fa1b9b0c6af74620fb11e3d26e7afc20861d9be", "sub_image": null, "external": false}}, "mobilebuilds": {"name": "mobilebuilds", "description": "Containers for triggering mobile builds on providers", "repository": "git@github.com:lyft/mobilebuilds.git", "credentials": true, "credentials_legacy": false, "docs": {"disable": true}, "slack": "#client-tooling-prs", "team_email": "client-tooling@lyft.com", "containers": [{"name": "agent", "command": "sleep infinity", "network": "host", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "buildplatform", "command": "scripts/build-platform.sh", "network": "host", "mounts": ["/var/run/docker_sockets", "/srv/control"]}], "groups": [{"name": "dev", "members": ["mobilebuilds.agent"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["bash", "python"], "image_type": "tool", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "version": "22464cf7f2c7568504b65fb6b2296dddac945919", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "mobiledashboardint": {"name": "mobiledashboardint", "description": "Internal dashboard to track client processes such as mentorship / onboarding", "repository": "git@github.com:lyft/mobiledashboardint.git", "image_type": "service", "service_tier": 3, "slack": "#mi-alerts", "team_email": "martin@lyft.com", "pagerduty_escalation_policy": "devnull", "languages": ["python", "bash"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "mobiledashboardint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "mobiledashboardint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "python": {"mypy": {"python_versions": ["3.6"], "exclude": ["ops"]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "mobiledashboardint"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}}}}, "version": "5c1f8fa695a73db5855efc960f48452e3a4cf331", "images": [{"parent": {"name": "opsbase", "version": "5bd42ef8212d12aa097e760f9718d76facca8da5", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "5bd42ef8212d12aa097e760f9718d76facca8da5", "sub_image": null, "external": false}}, "mobilewebhooks": {"name": "mobilewebhooks", "description": "A webhook handler for mobile specific actions", "repository": "git@github.com:lyft/mobilewebhooks.git", "slack": "#client-tooling-prs", "team_email": "client-tooling@lyft.com", "pagerduty_escalation_policy": "Mobile CI", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": true, "docs": {"disable": true}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/mobilewebhooks", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "mobilewebhooks.legacy"]}, {"name": "service_group", "members": ["mobilewebhooks.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "mobilewebhooks.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "mobilewebhooks.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "mobilewebhooks.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "mobilewebhooks"}]}}, "version": "29fd5fea8d5679fb67e0ff8395edd357e3e2c8bb", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "mobility": {"name": "mobility", "description": "Service that fetches public mobility data from cities and competitors for internal reporting", "repository": "git@github.com:lyft/mobility.git", "slack": "#lbs-mapping-pod", "team_email": "mobility@lyft.com", "pagerduty_escalation_policy": "General Bike Share Feed (GBFS)", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:deb42d25da0e6d5fe565c019883e458b4b31b696"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/mobility", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "jumpbikelocationscron", "command": "dumb-init -- service_venv python app/scripts/gbfs.py jump-bike", "workdir": "/code/mobility", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "limelocationscron", "command": "dumb-init -- service_venv python app/scripts/gbfs.py lime", "workdir": "/code/mobility", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "birdlocationscron", "command": "dumb-init -- service_venv python app/scripts/gbfs.py bird", "workdir": "/code/mobility", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "wheelslocationscron", "command": "dumb-init -- service_venv python app/scripts/gbfs.py wheels", "workdir": "/code/mobility", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "spinlocationscron", "command": "dumb-init -- service_venv python app/scripts/gbfs.py spin", "workdir": "/code/mobility", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "skiplocationscron", "command": "dumb-init -- service_venv python app/scripts/gbfs.py skip", "workdir": "/code/mobility", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "boltlocationscron", "command": "dumb-init -- service_venv python app/scripts/gbfs.py bolt", "workdir": "/code/mobility", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "gridbikelocationscron", "command": "dumb-init -- service_venv python app/scripts/gbfs.py grid-bike", "workdir": "/code/mobility", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "relaybikelocationscron", "command": "dumb-init -- service_venv python app/scripts/gbfs.py relay-bike", "workdir": "/code/mobility", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "cyclehoplocationscron", "command": "dumb-init -- service_venv python app/scripts/gbfs.py cyclehop", "workdir": "/code/mobility", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "uberlocationscron", "command": "dumb-init -- service_venv python app/scripts/gbfs.py uber", "workdir": "/code/mobility", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "hoprlocationscron", "command": "dumb-init -- service_venv python app/scripts/gbfs.py hopr", "workdir": "/code/mobility", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}], "groups": [{"name": "dev", "members": ["control.dev", "mobility.legacy"]}, {"name": "service_group", "members": ["mobility.legacy"]}, {"name": "integration", "members": ["mobility.dev", "jobscheduler.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "mobility.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "mobility.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 5, "max_size": 10}}}}, {"name": "canary", "member": "mobility.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "jumpbikelocationscron", "member": "mobility.jumpbikelocationscron", "type": "cron", "schedule": "* * * * *"}, {"name": "limelocationscron", "member": "mobility.limelocationscron", "type": "cron", "schedule": "* * * * *"}, {"name": "birdlocationscron", "member": "mobility.birdlocationscron", "type": "cron", "schedule": "* * * * *"}, {"name": "wheelslocationscron", "member": "mobility.wheelslocationscron", "type": "cron", "schedule": "* * * * *"}, {"name": "spinlocationscron", "member": "mobility.spinlocationscron", "type": "cron", "schedule": "* * * * *"}, {"name": "skiplocationscron", "member": "mobility.skiplocationscron", "type": "cron", "schedule": "* * * * *"}, {"name": "boltlocationscron", "member": "mobility.boltlocationscron", "type": "cron", "schedule": "* * * * *"}, {"name": "gridbikelocationscron", "member": "mobility.gridbikelocationscron", "type": "cron", "schedule": "* * * * *"}, {"name": "relaybikelocationscron", "member": "mobility.relaybikelocationscron", "type": "cron", "schedule": "* * * * *"}, {"name": "cyclehoplocationscron", "member": "mobility.cyclehoplocationscron", "type": "cron", "schedule": "* * * * *"}, {"name": "uberlocationscron", "member": "mobility.uberlocationscron", "type": "cron", "schedule": "* * * * *"}, {"name": "hoprlocationscron", "member": "mobility.hoprlocationscron", "type": "cron", "schedule": "* * * * *"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "jumpbikelocationscron"}, {"facet": "limelocationscron"}, {"facet": "birdlocationscron"}, {"facet": "wheelslocationscron"}, {"facet": "spinlocationscron"}, {"facet": "skiplocationscron"}, {"facet": "boltlocationscron"}, {"facet": "gridbikelocationscron"}, {"facet": "relaybikelocationscron"}, {"facet": "cyclehoplocationscron"}, {"facet": "uberlocationscron"}, {"facet": "hoprlocationscron"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "jumpbikelocationscron"}, {"facet": "limelocationscron"}, {"facet": "birdlocationscron"}, {"facet": "wheelslocationscron"}, {"facet": "spinlocationscron"}, {"facet": "skiplocationscron"}, {"facet": "boltlocationscron"}, {"facet": "gridbikelocationscron"}, {"facet": "relaybikelocationscron"}, {"facet": "cyclehoplocationscron"}, {"facet": "uberlocationscron"}, {"facet": "hoprlocationscron"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "mobility"}], "common_settings": {"internal_hosts": {"jobschedulernormalweb": null, "jobschedulerbulkweb": null}}}}, "version": "b833c17b662a6d374a3d8515cb0c52d0b5490d90", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "mobilitydashfe": {"name": "mobilitydashfe", "description": "Serves webview to enable linking a bike share account with the Lyft app", "repository": "git@github.com:lyft/mobilitydashfe.git", "slack": "#lbs-mobility-data", "team_email": "trix@lyft.com", "pagerduty_escalation_policy": "Identity Eng", "image_type": "service", "service_tier": 2, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "mobilitydashfe.legacy"]}, {"name": "service_group", "members": ["mobilitydashfe.legacy"]}, {"name": "onebox", "members": ["dnsmasq.server", "envoy.server", "mobilitydashfe.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "mobilitydashfe.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "mobilitydashfe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"lastmile": null, "mobility": null}}}}, "version": "259b70684460ef33d8c8b4361f1d62a5ef96f9de", "images": [{"parent": {"name": "opsbase", "version": "89fa8b66419579eaf9b7422dc1c0bf43b005d183", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "89fa8b66419579eaf9b7422dc1c0bf43b005d183", "sub_image": null, "external": false}}, "modebridge": {"name": "modebridge", "description": "Service for running mode bridge", "repository": "git@github.com:lyft/modebridge.git", "image_type": "service", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "modebridge.legacy"]}], "slack": "#data-platform", "team_email": "vap-eng@lyft.com", "pagerduty_escalation_policy": "Superset", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "service_tier": 2, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "version": "53228ed6b41c3259d8798bcd0887b802c4bdab5e", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "modelbuilderadmin": {"name": "modelbuilderadmin", "description": "modelbuilderadmin", "repository": "git@github.com:lyft/modelbuilderadmin.git", "image_type": "service", "service_tier": 3, "slack": "#flyte", "team_email": "flyte-eng@lyft.com", "pagerduty_escalation_policy": "Data Platform Flyte", "languages": ["go", "golang", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "modelbuilderadmin.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "modelbuilderadmin.dev"}, {"name": "unit", "type": "execution", "group": "modelbuilderadmin.dev", "container": "modelbuilderadmin.legacy", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "modelbuilderadmin.dev", "container": "modelbuilderadmin.legacy", "command": "make integration"}], "slack_deploy_notification_environments": ["canary", "production"], "deploy": [{"name": "staging", "legacy": false, "automatic": true}, {"name": "canary", "legacy": false}, {"name": "production", "legacy": false}], "docs": {"godoc_packages": ["github.com/lyft/modelbuilderadmin", "github.com/lyft/modelbuilderadmin/services/model_builder_admin"]}, "envoy": {"profile": "go", "settings": {"services": [{"name": "modelbuilderadmin"}], "common_settings": {"internal_hosts": {"mailer": null}, "external_hosts": {"dynamodb_iad": null}}}}, "version": "5f448389c74e7fbaabf19b58a371aa3c3bc569c6", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "modelbuilderagent": {"name": "modelbuilderagent", "description": "modelbuilderagent", "repository": "git@github.com:lyft/modelbuilderagent.git", "image_type": "service", "service_tier": 2, "slack": "#flyte", "team_email": "flyte-eng@lyft.com", "pagerduty_escalation_policy": "Data Platform Flyte", "languages": ["go", "golang", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "modelbuilderagent.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "modelbuilderagent.dev"}, {"name": "unit", "type": "execution", "group": "modelbuilderagent.dev", "container": "modelbuilderagent.legacy", "command": "make test_unit"}], "slack_deploy_notification_environments": ["canary", "production"], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "docs": {"godoc_packages": ["github.com/lyft/modelbuilderagent/pkg", "github.com/lyft/modelbuilderagent/pkg/activity_fetcher", "github.com/lyft/modelbuilderagent/pkg/admin_executor", "github.com/lyft/modelbuilderagent/pkg/aws_client", "github.com/lyft/modelbuilderagent/pkg/batchexecutor", "github.com/lyft/modelbuilderagent/pkg/batchexecutor/informers", "github.com/lyft/modelbuilderagent/pkg/config", "github.com/lyft/modelbuilderagent/pkg/kubeexecutor", "github.com/lyft/modelbuilderagent/pkg/modelbuilder", "github.com/lyft/modelbuilderagent/pkg/plugins/task_flows", "github.com/lyft/modelbuilderagent/pkg/plugins/task_flows/batch_flow", "github.com/lyft/modelbuilderagent/pkg/quboleexecutor", "github.com/lyft/modelbuilderagent/pkg/quboleexecutor/quboleinformer", "github.com/lyft/modelbuilderagent/pkg/replayer", "github.com/lyft/modelbuilderagent/pkg/resource", "github.com/lyft/modelbuilderagent/pkg/services", "github.com/lyft/modelbuilderagent/pkg/services/admin_service", "github.com/lyft/modelbuilderagent/pkg/services/discoveryclient", "github.com/lyft/modelbuilderagent/pkg/services/quboleclient", "github.com/lyft/modelbuilderagent/pkg/services/resourcemanager", "github.com/lyft/modelbuilderagent/pkg/state", "github.com/lyft/modelbuilderagent/pkg/statemachine", "github.com/lyft/modelbuilderagent/pkg/util", "github.com/lyft/modelbuilderagent/pkg/workflow", "github.com/lyft/modelbuilderagent/pkg/workflow_executor"]}, "envoy": {"profile": "go", "settings": {"services": [{"name": "modelbuilderagent"}, {"name": "modelbuilderagentv2"}], "common_settings": {"internal_hosts": {"modelbuilderadmin": null, "modeldiscovery": null, "flyteresourcemanager": null, "ratelimit": null}}}}, "logging": {"modelbuilderagent": {"fields": {"wid": "keyword", "activity": "keyword", "workflow": "keyword", "run_id": "keyword", "subtask_id": "keyword"}}}, "version": "6f3942311c0b6cce6bd7cef1167d73aeb77dbf58", "images": [{"parent": {"name": "opsbase", "version": "431b58e72ff19dbc9960ab39037ad568711359fa", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "431b58e72ff19dbc9960ab39037ad568711359fa", "sub_image": null, "external": false}}, "modelbuilderapi": {"name": "modelbuilderapi", "description": "Modelbuilder API for creating your own workflows (a python library)", "repository": "git@github.com:lyft/modelbuilderapi.git", "credentials": true, "image_type": "library", "slack": "#flyte", "team_email": "flyte-eng@lyft.com", "languages": ["python"], "docs": {"autogen_modules": ["lyft_modelbuilder", "lyft_modelbuilder/api/public", "flytekitextensions", "flytekit"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "test", "command": "service_venv start_jupyter.sh 8080 /code/modelbuilderapi/sample_notebooks", "exports": [{"name": "web", "port": 8080}]}], "groups": [{"name": "tester", "members": ["control.dev", "modelbuilderapi.test"]}], "tests": [{"name": "unit3", "type": "execution", "command": "make unit_python3", "group": "modelbuilderapi.tester", "container": "modelbuilderapi.test"}, {"name": "functional", "type": "execution", "group": "modelbuilderapi.tester", "container": "modelbuilderapi.test", "command": "make functionaltests"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [[{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_development"}], [{"name": "staging", "legacy": true, "automatic": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_staging"}], [{"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_production"}]], "version": "fbeee4d4a4f6ae6ecafcdc2c3cca7ceecf9e069e", "images": [{"parent": {"name": "pythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "modelbuilderint": {"name": "modelbuilderint", "description": "Web Dashboard for the ModelBuilder Admin service", "repository": "git@github.com:lyft/modelbuilderint.git", "image_type": "service", "service_tier": 3, "slack": "#flyte", "team_email": "flyte-eng@lyft.com", "pagerduty_escalation_policy": "Data Platform Flyte", "languages": ["javascript", "bash"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "groups": [{"name": "dev", "members": ["control.dev", "modelbuilderint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "modelbuilderint.dev"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true}, {"name": "canary", "legacy": false}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "modelbuilderint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"modelbuilderadmin": null}}}}, "version": "393b5776b0a50f7960a2f1d7c70de09fefe24caf", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "modelbuildertemplate": {"name": "modelbuildertemplate", "team_email": "flyte-eng@lyft.com", "description": "This repo is used for testing and demonstration purposes only.  Please use the yeoman generator instead of cloning this repo!", "repository": "git@github.com:lyft/modelbuildertemplate.git", "image_type": "service", "languages": ["python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/modelbuildertemplate/entrypoint.sh", "provision": "echo \"Started the entrypoint\"", "start_time": 300, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "modelbuildertemplate.legacy"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "modelbuildertemplate.dev", "container": "modelbuildertemplate.legacy", "command": "service_venv mbadmin register-workflows new"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "slack": "#flyte", "pagerduty_escalation_policy": "Data Platform Flyte", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}]}}, "service_tier": 3, "version": "0e7399c0ed81eed7ebadc54749a88424d3582b90", "images": [{"parent": {"name": "flytesparkexperimentalbase", "version": "e34aa7198509c4770aa29933c03473565444b673", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "flytesparkexperimentalbase", "version": "e34aa7198509c4770aa29933c03473565444b673", "sub_image": null, "external": false}}, "modelconfig": {"name": "modelconfig", "description": "Service for model metadata and configuration", "repository": "git@github.com:lyft/modelconfig.git", "image_type": "service", "service_tier": 2, "slack": "#ml-platform-bots", "team_email": "ds-platform@lyft.com", "pagerduty_escalation_policy": "DS Platform", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "modelconfig.legacy", "postgresql.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "modelconfig.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "modelconfig.dev", "container": "modelconfig.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "notification_overrides": {"deploy": {"slack": "#ml-platform-bots", "environments": ["canary", "production"]}, "test_failure": {"slack": "#ml-platform-bots", "environments": ["production"]}, "pr_merge": {"slack": "#ml-platform-bots"}}, "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "modelconfig"}], "common_settings": {"internal_hosts": {"modelmetrics": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "logging": {"modelconfig": {"fields": {"presigned_url": "keyword", "pipeline": {"resource_spec": {"cpu": "long", "gpu": "long", "memory_gb": "long", "name": "keyword", "memory": "long", "cost": "float"}, "uuid": "keyword", "job_type": "keyword", "is_deprecated": "boolean", "configparameters": {"csv_s3_path": "keyword"}, "is_stopped": "boolean", "owner_email": "keyword", "_sa_instance_state": "keyword", "workflow_id": "keyword", "schedule": "keyword", "model_version": "keyword", "created_at": "date", "updated_at": "date", "model_name": "keyword", "team": "keyword", "model_uuid": "keyword", "hyperparameters": {"max_depth": "long", "learning_rate": "float", "n_estimators": "long", "s_3_folder_name": "keyword", "ds": "keyword", "region_timezone": "keyword", "version": "keyword", "region": "keyword"}, "prior_workflow_ids": "keyword"}, "csv_s3_path": "keyword", "error": "keyword"}}}, "version": "7743686b1e53a9ed9ec8300a66edd734d40c6db7", "images": [{"parent": {"name": "opsbase", "version": "89fa8b66419579eaf9b7422dc1c0bf43b005d183", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "89fa8b66419579eaf9b7422dc1c0bf43b005d183", "sub_image": null, "external": false}}, "modeldiscovery": {"name": "modeldiscovery", "description": "modeldiscovery", "repository": "git@github.com:lyft/modeldiscovery.git", "image_type": "service", "service_tier": 2, "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "postgresql.server", "modeldiscovery.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "modeldiscovery.dev"}, {"name": "unit", "type": "execution", "group": "modeldiscovery.dev", "container": "modeldiscovery.legacy", "command": "make test_unit"}], "slack": "#flytecrew", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "flyte-eng@lyft.com", "pagerduty_escalation_policy": "Data Platform Flyte", "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false}]], "languages": ["go"], "docs": {"godoc_packages": ["github.com/lyft/modeldiscovery", "github.com/lyft/modeldiscovery/services/artifacts/grpc/handlers"]}, "envoy": {"profile": "go", "settings": {"services": [{"name": "modeldiscovery"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 900}}}, "external_hosts": {"dynamodb_iad": null}}}}, "version": "23b209318d2c9c6cc46edbf91de98baa0e85e059", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "modelexec": {"name": "modelexec", "description": "Data science model execution (aka scoring, inference, eval)", "repository": "git@github.com:lyft/modelexec.git", "image_type": "service", "service_tier": 0, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "docker_build", "params": {"buildargs": ["SERVICE_NAME=modelexec"]}}]}}, "containers": [{"name": "legacy", "command": "/lyft/override_entrypoint.sh", "provision": "/lyft/override_post_starters.sh", "start_time": 600, "exports": [{"name": "api", "port": 8080}]}, {"name": "fraud", "command": "service_venv gunicorn wsgi:app --workers=10 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/modelexec", "limits": {"cpu": 10, "memory": "100Gi"}}], "facets": [{"name": "fraudk8s", "member": "modelexec.fraud", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "modelexec.legacy"]}, {"name": "integration", "members": ["modelexec.dev", "modelconfig.dev", "inferencedb.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "modelexec.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy"}, {"name": "integration", "type": "execution", "group": "modelexec.integration", "container": "modelexec.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "unit_legacy", "type": "execution", "command": "make test_unit", "container": "modelexec.legacy", "group": "modelexec.dev", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}], "slack": "#ml-platform-bots", "notification_overrides": {"deploy": {"slack": "#ml-platform-bots", "environments": ["canary", "production"]}, "test_failure": {"slack": "#ml-platform-bots", "environments": ["production"]}, "pr_merge": {"slack": "#ml-platform-bots"}}, "team_email": "ds-platform@lyft.com", "pagerduty_escalation_policy": "DS Platform", "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}], "automatic": true}, [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}], {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1b", "legacy": true, "availability_zone": "us-east-1b"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production-us-east-1e", "legacy": true, "availability_zone": "us-east-1e"}], [{"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "modelexec"}, {"name": "modelexecadaptivepricing"}, {"name": "modelexeccancels"}, {"name": "modelexecdispatch"}, {"name": "modelexecforecasting"}, {"name": "modelexecfraud"}, {"name": "modelexeclocations"}, {"name": "modelexecmatching"}, {"name": "modelexecmisc"}, {"name": "modelexecofferings"}, {"name": "modelexecpacman"}, {"name": "modelexecpricing"}, {"name": "modelexecpricingxp"}, {"name": "modelexecridelocations"}, {"name": "modelexecsharedrides"}, {"name": "modelexecsimulator"}, {"name": "modelexecsupport"}, {"name": "modelexectolls"}, {"name": "modelexectollsdyn"}, {"name": "modelexecvenues"}, {"name": "modelexecp1"}], "common_settings": {"internal_hosts": {"modelconfig": null, "modelexec": null, "inferencedb": null}, "external_hosts": {"firehose_iad": null}}}}, "logging": {"modelexec": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexecadaptivepricing": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexeccancels": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexecdispatch": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexecforecasting": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexecfraud": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexeclocations": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexecmatching": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexecmisc": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexecofferings": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexecpacman": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexecpricing": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexecpricingxp": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexecridelocations": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexecsharedrides": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexecsimulator": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexecsupport": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexectolls": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexectollsdyn": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexecvenues": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}, "modelexecp1": {"fields": {"asg": "keyword", "available_models": "keyword", "available_versions": "keyword", "error": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "is_default_version": "boolean", "location": "keyword", "model_location": "keyword", "model_name": "keyword", "model_version": "keyword", "name": "keyword", "path": "keyword", "use_default": "boolean", "version": "keyword"}}}, "version": "3e99812373547b0fd3c2139fe05a70839162cf12", "images": [{"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "modelexecupdate": {"name": "modelexecupdate", "description": "Fork of modelexec for testing new lib versions", "repository": "git@github.com:lyft/modelexecupdate.git", "image_type": "service", "service_tier": 2, "languages": ["python", "bash"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:32cbb00e867909feba916f53c84c05d17bad9c3f", "sub_image": "precommit"}}, {"name": "docker_build", "params": {"buildargs": ["SERVICE_NAME=modelexecupdate"]}}]}}, "containers": [{"name": "legacy", "command": "/lyft/override_entrypoint.sh", "provision": "/lyft/override_post_starters.sh", "start_time": 500, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "modelexecupdate.legacy"]}, {"name": "integration", "members": ["modelexecupdate.dev", "modelconfig.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "modelexecupdate.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "execution", "group": "modelexecupdate.dev", "container": "modelexecupdate.legacy", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "skip_threshold": 999}, {"name": "integration", "type": "execution", "group": "modelexecupdate.integration", "container": "modelexecupdate.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}, "skip_threshold": 999}], "slack": "#ml-platform", "notification_overrides": {"deploy": {"slack": "#ml-platform-bots", "environments": ["canary", "production"]}, "test_failure": {"slack": "#ml-platform-bots", "environments": ["production"]}, "pr_merge": {"slack": "#ml-platform-bots"}}, "team_email": "ds-platform@lyft.com", "pagerduty_escalation_policy": "DS Platform", "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}]}, [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}], {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1b", "legacy": true, "availability_zone": "us-east-1b"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production-us-east-1e", "legacy": true, "availability_zone": "us-east-1e"}], [{"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "modelexecupdate"}], "common_settings": {"internal_hosts": {"modelconfig": null}}}}, "version": "b7c3583efc57b33bcf34d3dbd3732b5ad2506007", "images": [{"parent": {"name": "precommit", "version": "32cbb00e867909feba916f53c84c05d17bad9c3f", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "opsbase", "version": "3f0e393d0ca259ed059ffdf0f4f8e41462512923", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "3f0e393d0ca259ed059ffdf0f4f8e41462512923", "sub_image": null, "external": false}}, "modelexecworkflows": {"name": "modelexecworkflows", "description": "modelexec online metrics", "repository": "git@github.com:lyft/modelexecworkflows.git", "slack": "#ml-platform-bots", "team_email": "ds-platform@lyft.com", "pagerduty_escalation_policy": "DS Platform", "service_tier": 2, "image_type": "flyteworkflow", "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "modelexecworkflows.spin"]}], "tests": [{"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "workflow_registration", "type": "execution", "group": "modelexecworkflows.dev", "container": "modelexecworkflows.spin", "command": "make register_for_pr"}], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "credentials": true, "version": "f32a71901ecc186981bb8cf17fbc76d99e45d159", "images": [{"parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}}, "modelinfralib": {"name": "modelinfralib", "description": "Core abstractions for Model Infra batch jobs (for use with Flyte and Analystbox)", "repository": "git@github.com:lyft/model-infra-lib.git", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipythonlibrary:66d815e6ba03c9515c0c2273ecca13036015715d", "packages": ["openjdk-8-jdk-headless"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "unit2", "type": "jailed", "command": "make test_unit2"}, {"name": "unit3", "type": "jailed", "command": "make test_unit3"}, {"name": "integration2", "type": "jailed", "command": "make test_integration2"}, {"name": "integration3", "type": "jailed", "command": "make test_integration3"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "9c986c896b9fdd7a995a9e0ad6fa7cf0609b4b29", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "modelmetrics": {"name": "modelmetrics", "description": "ML model accuracy tracking", "repository": "git@github.com:lyft/modelmetrics.git", "image_type": "service", "service_tier": 2, "slack": "#ml-platform-bots", "team_email": "ds-platform@lyft.com", "pagerduty_escalation_policy": "DS Platform", "languages": ["python", "bash"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "modelmetrics.legacy"]}, {"name": "integration", "members": ["modelmetrics.dev"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ae71afaa459d200bb7c1c119d33f346df53518fc", "sub_image": "precommit"}}]}}, "tests": [{"name": "startup", "type": "startup", "group": "modelmetrics.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "modelmetrics.integration", "container": "modelmetrics.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], [{"name": "production", "legacy": true}]], "python": {"mypy": {"python_versions": ["3.6"], "exclude": ["ops", "tests"]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "modelmetrics"}, {"name": "modelmetricsworkers"}, {"name": "modelmetricswrites"}], "common_settings": {"external_hosts": {"firehose_iad": null, "kinesis_iad": null}}}}, "version": "dc29b2324babb56922e314a004fd811e1fed4b05", "images": [{"parent": {"name": "opsbase", "version": "74ce20f8dfbbc75d2bda33eba577a617fb92f1bf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ae71afaa459d200bb7c1c119d33f346df53518fc", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "74ce20f8dfbbc75d2bda33eba577a617fb92f1bf", "sub_image": null, "external": false}}, "modelproxy": {"name": "modelproxy", "description": "modelproxy", "repository": "git@github.com:lyft/modelproxy.git", "slack": "#modelproxy", "pagerduty_escalation_policy": "Model Proxy", "team_email": "parker@lyft.com", "service_tier": 2, "slack_deploy_notification_environments": ["staging", "canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "modelproxy.service", "dnsmasq.server"]}, {"name": "integration", "members": ["modelproxy.dev", "modelexec.dev"]}], "pulldeploy_components": {"data": ["marketplaceconfig"]}, "tests": [{"name": "startup", "type": "startup", "group": "modelproxy.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "modelproxy.integration", "container": "modelproxy.service", "command": "make integration"}, {"name": "coverage", "type": "jailed", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1b", "legacy": true, "availability_zone": "us-east-1b"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production-us-east-1e", "legacy": true, "availability_zone": "us-east-1e"}, {"name": "production", "legacy": true}]], "docs": {"godoc_packages": ["github.com/lyft/modelproxy", "github.com/lyft/modelproxy/cli", "github.com/lyft/modelproxy/clients", "github.com/lyft/modelproxy/clients/modelexec", "github.com/lyft/modelproxy/config", "github.com/lyft/modelproxy/services/modelproxy", "github.com/lyft/modelproxy/services/modelproxy/client", "github.com/lyft/modelproxy/services/modelproxy/config", "github.com/lyft/modelproxy/services/modelproxy/fixtures", "github.com/lyft/modelproxy/services/modelproxy/grpc/handlers", "github.com/lyft/modelproxy/services/modelproxy/infer", "github.com/lyft/modelproxy/services/modelproxy/infer/parser", "github.com/lyft/modelproxy/services/modelproxy/records", "github.com/lyft/modelproxy/services/modelproxy/registry"]}, "envoy": {"profile": "go", "settings": {"services": [{"name": "modelproxy"}], "common_settings": {"internal_hosts": {"modelexecsharedrides": null, "modelexecofferings": null, "modelexecmisc": null, "eventingest": null, "tensorgym": null}}}}, "logging": {"modelproxy": {"fields": {"err": "keyword", "version": "keyword", "model_name": "keyword", "requestId": "keyword"}}}, "version": "0a77307b2bb9b52c370bd0dee3bbac5b43d8ac15", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "modes": {"name": "modes", "description": "Primary source of truth for Ride Modes configurations", "pagerduty_escalation_policy": "Purchase Flow", "team_email": "purchase-flow-eng@lyft.com", "repository": "git@github.com:lyft/modes.git", "image_type": "service", "service_tier": 0, "credentials_legacy": true, "languages": ["go"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2iplus", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s", "packages": ["awscli", "unzip"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "modes.service", "idl.server", "dynamodb.server"]}, {"name": "integration", "members": ["regions.dev", "modes.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "modes.dev"}, {"name": "unit", "type": "jailed", "command": "make tests"}, {"name": "integration", "type": "execution", "group": "modes.integration", "container": "modes.service", "command": "make integration"}, {"name": "coverage", "type": "jailed", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#purchase-flow", "notification_overrides": {"behind_notifications": {"slack": "#purchase-flow-bots"}, "pr_open": {"slack": "#purchase-flow-prs"}, "pr_merge": {"slack": "#purchase-flow-bots"}, "deploy": {"slack": "#purchase-flow-bots"}, "deploy_failure": {"slack": "#purchase-flow-bots"}}, "deploy": [{"name": "staging-us-east-1a", "availability_zone": "us-east-1a", "legacy": true, "bake_time_minutes": 10, "automatic": true}, {"name": "staging", "legacy": true, "automatic": false, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "go", "settings": {"services": [{"name": "modes"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 900, "max_requests": 70}}}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "internal_hosts": {"eventingest": null, "regions": null}}}}, "pulldeploy_components": {"data": ["translationdata", "marketplaceconfig"]}, "logging": {"modes": {"fields": {"mapId": "integer", "modeId": "keyword", "regionsKey": "keyword", "productKey": "keyword", "err": "text", "origin": "keyword", "originRegionCode": "keyword", "destination": "keyword", "destinationRegionCode": "keyword", "numAvailableModes": "integer", "isDispatchable": "boolean"}}}, "version": "db51894e539e35059794ca33c31823e0fd4ff469", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "mongodb": {"name": "mongodb", "description": "local development version of mongodb database", "repository": "git@github.com:lyft/containers.git:mongodb", "credentials": true, "credentials_legacy": false, "docs": {"section": "Infrastructure"}, "containers": [{"name": "server", "command": "/code/containers/mongodb/entrypoint.sh", "provision": "/code/containers/mongodb/provision.sh", "snapshot": {"dump": "mongodump --out", "restore": "/code/containers/mongodb/restore.sh"}, "start_time": 300, "start_phase": "sequential_storage", "exports": [{"name": "mongodb", "port": 27017}]}, {"name": "viewer", "command": "/code/containers/mongodb/viewer-entrypoint.sh", "exports": [{"name": "web", "port": 80}]}], "groups": [{"name": "dev", "members": ["control.dev", "mongodb.server"]}], "tests": [{"name": "start", "type": "startup", "group": "mongodb.dev"}], "upstream_tests": {"on_commit": true, "test_set": {"ats": ["legacyunit"], "courier": ["unit", "integration"], "dbproxyauth": ["startup"], "dbproxypodie": ["startup"], "directorysync": ["unit", "integration"], "drivestat": ["unit"], "enterprise": ["unit", "integration", "terraform-checkformat", "terraform-validate"], "etl": ["unit", "integration", "e2e"], "family": ["unit", "integration", "build_dist"], "financial": ["unit", "integration"], "godfather": ["integration"], "green": ["unit", "integration", "expresspay_fixtures", "payout_fixtures"], "guardian": ["unit", "integration_sharded"], "kitchensink": ["integration"], "legacyapi": ["integration"], "lyfttestlib": ["integration"], "messaging": ["integration"], "pythonlyftdatavalidation": ["integration"], "readonlydb": ["integration"], "rentals": ["component", "component_resources", "integration", "goldenpath"], "rides": ["unit"], "routes": ["unit"], "tolls": ["unit", "integration"], "txnhub": ["unit", "integration"], "users": ["unit", "integration"]}}, "deploy": [{"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false}, {"name": "canary", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false}], "image_type": "tool", "languages": ["bash"], "slack": "#ds-mongo-pod", "team_email": "ds-mongo@lyft.com", "version": "06eb4beb35db93fa79e7c4a3791dda434f971407", "images": [{"parent": {"name": "bionicbase", "version": "adbcd802e999b6a1ff5a176181a4d4d108efa40d", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "adbcd802e999b6a1ff5a176181a4d4d108efa40d", "sub_image": null, "external": false}}, "mongodblogstreamer": {"name": "mongodblogstreamer", "description": "mongodblog streamer", "repository": "git@github.com:lyft/mongodblogstreamer.git", "image_type": "service", "service_tier": 2, "slack": "#ds-mongo-pod", "team_email": "ds-data@lyft.com", "pagerduty_escalation_policy": "DS Data Pipeline", "languages": ["python", "bash"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "mongodblogstreamer.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "mongodblogstreamer.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "python": {"mypy": {"python_versions": ["3.6"], "exclude": ["ops"]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "mongodblogstreamer"}]}}, "version": "569d07546d0e69ed97bec9cb720e07a80c8cac70", "images": [{"parent": {"name": "opsbase", "version": "be15551ec923d766f35792d16021d265fca9e318", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "be15551ec923d766f35792d16021d265fca9e318", "sub_image": null, "external": false}}, "mongodbtailer": {"name": "mongodbtailer", "description": "mongodbtailer", "repository": "git@github.com:lyft/mongodbtailer.git", "image_type": "service", "languages": ["go"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "mongodbtailer.legacy", "kinesis.dev", "analyticsingest.dev", "streamcheck.dev", "kafka.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "mongodbtailer.dev"}, {"name": "unit", "type": "execution", "group": "mongodbtailer.dev", "container": "mongodbtailer.legacy", "command": "make test_unit"}], "slack": "#ds-mongo-pod", "service_tier": 3, "pagerduty_escalation_policy": "DS Data Pipeline", "team_email": "datastore-team@lyft.com", "deploy": [{"name": "staging", "legacy": true, "automatic": true}, {"name": "canary", "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "mongodbtailer"}], "common_settings": {"internal_hosts": {"analyticsingest": null, "streamcheck": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null}}}}, "logging": {"mongodbtailer": {"fields": {"path": "keyword", "method": "keyword", "host": "keyword", "service": "keyword", "signal": "keyword"}}}, "version": "ec12f7d6d1bd3cf914d3a2c95c3ca9b6e117ffbd", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "mongostats": {"name": "mongostats", "description": "This service extracts mongostats from mongo data nodes in mlab and pushes them to wavefront", "repository": "git@github.com:lyft/mongostats.git", "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "mongostats.legacy"]}], "slack": "#ds-mongo-pod", "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS Mongo", "tests": [{"name": "startup", "type": "startup", "group": "mongostats.dev"}, {"name": "unit", "type": "execution", "group": "mongostats.dev", "container": "mongostats.legacy", "command": "make test_unit"}, {"name": "coverage", "type": "execution", "group": "mongostats.dev", "container": "mongostats.legacy", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "languages": ["go"], "image_type": "service", "service_tier": 1, "envoy": {"profile": "go", "settings": {"services": [{"name": "mongostats"}]}}, "version": "52934af4a7edcd7e75908ad8bd98e4360a4c4de2", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "mongostreams": {"name": "mongostreams", "description": "Service for consuming all changes happening to MongoDB clusters.", "repository": "git@github.com:lyft/mongostreams.git", "image_type": "service", "service_tier": 3, "slack": "#ds-mongo-pod", "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "DS Mongo", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "kinesis.server", "sqs.server", "mongostreams.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "mongostreams.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "mongostreams"}], "common_settings": {"internal_hosts": {"dbproxyrides": null, "dbproxyroutes": null, "dbproxyenterprise": null, "analyticsingest": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null, "firehose_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"mongostreams": {"fields": {"shard_info": "keyword", "reason": "keyword"}}}, "version": "cb5cdc69d5f4e641cedef6af5defd29e626eb087", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "mozart": {"name": "mozart", "description": "Mozart Gateway and Control Plane to manage DataInfra services and resources.", "repository": "git@github.com:lyft/datacontrolservices.git:mozart/infra", "image_type": "service", "slack": "#mozart-dev", "team_email": "dp-infra-core@lyft.com", "pagerduty_escalation_policy": "Data Infra Compute", "service_tier": 3, "slack_deploy_notification_environments": ["canary", "production"], "languages": ["python", "go", "java", "bash"], "credentials": true, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "idl.server"]}], "deploy": [{"name": "staging", "legacy": true, "automatic": true}, {"name": "production", "legacy": true}], "envoy": {"profile": "go", "settings": {"services": [{"name": "mozart"}], "common_settings": {"internal_hosts": {"ratelimit": null}}}}, "version": "6f0f3b29d4cab5ec04b2e04c540f765d85fc7417", "images": [{"parent": {"name": "opsbase", "version": "3f0e393d0ca259ed059ffdf0f4f8e41462512923", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "3f0e393d0ca259ed059ffdf0f4f8e41462512923", "sub_image": null, "external": false}}, "mozartgateway": {"name": "mozartgateway", "description": "Mozart API Gateway", "repository": "git@github.com:lyft/datacontrolservices.git:mozart/usvcs/gosvcs/gateway", "image_type": "service", "slack": "#mozart-dev", "team_email": "mozart-dev@lyft.com", "pagerduty_escalation_policy": "MozartGateway", "service_tier": 3, "slack_deploy_notification_environments": ["staging", "canary", "production"], "languages": ["bash", "go", "java", "python"], "credentials": true, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh", "exports": [{"name": "http", "port": 8080}]}, {"name": "run", "command": "/go/src/github.com/lyft/datacontrolservices/mozart/usvcs/gosvcs/gateway/cmd/entrypoint.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.dev", "redis.dev", "hivemetastore.dev", "mozartgateway.service"]}], "tests": [{"name": "integration", "type": "execution", "group": "mozartgateway.dev", "container": "mozartgateway.service", "command": "make integration"}], "deploy": [{"name": "staging", "automatic": true, "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "mozartgateway"}], "common_settings": {"internal_hosts": {"mozartgateway": null, "ratelimit": null}, "external_hosts": {"dynamodb_iad": null, "s3_iad": null}, "redis": {"mozartgatewaymultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 32768}}}}}}, "logging": {"mozartgateway": {"fields": {"method": "keyword", "service": "keyword", "requestId": "keyword", "path": "keyword", "host": "keyword", "signal": "keyword", "postgres": "keyword", "endpoint": "keyword", "lyft_user_id": "keyword", "code": "keyword", "downstream_cluster": "keyword", "error": "keyword", "request_id": "keyword"}}}, "version": "b285c2f9d4a65fb86e240f7b9ffee78a6f45e896", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "mparticledata": {"name": "mparticledata", "description": "Flink service that will process mparticle events", "repository": "git@github.com:lyft/mparticledata.git", "slack": "#data-platform-dev", "team_email": "dp-analyticsinfra@lyft.com", "pagerduty_escalation_policy": "Motivate Datamart", "languages": ["bash", "java"], "image_type": "service", "service_tier": 2, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "mparticledata.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "mparticledata.dev"}, {"name": "integration", "type": "execution", "group": "mparticledata.dev", "container": "mparticledata.legacy", "command": "mvn clean verify -P '!disable-integration-tests'"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "streamingplatform": {"version": "1.2-SNAPSHOT", "flink_config_overrides": [{"key": "state.backend", "value": "filesystem"}], "jobmanagers": [{"name": "mparticledata", "jobs": [{"name": "mparticledata", "jar": "mparticledata-1.0.0-SNAPSHOT.jar", "class": "com.lyft.app.StreamingStarterClient", "description": "Flink service that will process mparticle events", "development": {"parallelism": 1}, "staging": {"parallelism": 1}, "production": {"parallelism": 48}}]}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "mparticledata"}, {"name": "mparticledatajobmanager"}, {"name": "mparticledatataskmanager"}], "common_settings": {}, "override_settings": [{"services": [{"name": "mparticledata", "service_instance": "development"}], "settings": {"external_hosts": {"kinesis_iad": null}}}, {"services": [{"name": "mparticledatajobmanager", "service_instance": "development"}], "settings": {"external_hosts": {"kinesis_iad": null}}}, {"services": [{"name": "mparticledatataskmanager", "service_instance": "development"}], "settings": {"external_hosts": {"kinesis_iad": null}}}]}}, "logging": {"mparticledatataskmanager": {"fields": {"traceback": "keyword", "attempt_num": "long", "exception": "keyword", "failed_record": "keyword"}}}, "version": "7f90f027a5f7ab84a77c4e8d4402c7f4bb4dbb37", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "multiflinkk8s": {"name": "multiflinkk8s", "description": "A service that demonstrates how to run multiple flink jobs", "repository": "git@github.com:lyft/streamperfbench.git:multiflinkk8s", "slack": "#streaming-compute", "team_email": "streaming-compute@lyft.com", "pagerduty_escalation_policy": "devnull", "languages": ["bash", "java"], "image_type": "service", "service_tier": 3, "streamingplatform": {"kubernetes": true, "applications": ["multiflinkk8s1", "multiflinkk8s2"], "stages": {"multiflinkk8s1-staging": {"configuration": "multiflinkk8s1-staging.jsonnet"}, "multiflinkk8s2-staging": {"configuration": "multiflinkk8s2-staging.jsonnet"}, "multiflinkk8s1-production": {"configuration": "multiflinkk8s1-production.jsonnet"}, "multiflinkk8s2-production": {"configuration": "multiflinkk8s2-production.jsonnet"}}}, "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}, [{"name": "multiflinkk8s1-staging", "legacy": false, "automatic": false}, {"name": "multiflinkk8s2-staging", "legacy": false, "automatic": false}], {"name": "production", "legacy": false, "automatic": false, "orca": [{"region": "iad"}]}, [{"name": "multiflinkk8s1-production", "legacy": false, "automatic": false}, {"name": "multiflinkk8s2-production", "legacy": false, "automatic": false}]], "builder": {"name": "s2i", "params": {"builder": "lyft/s2istreamingplatformflink:sp20.e7ff259c7ba6843ae339496819df7d443d843872"}}, "containers": [{"name": "main", "command": "sleep infinity"}], "version": "d06748ee424ba803ead2f3c2f7cb07887f4f38a8", "images": [{"parent": {"name": "s2istreamingplatformflink", "version": "e7ff259c7ba6843ae339496819df7d443d843872", "sub_image": "sp20", "external": false}, "sub_image": null}], "parent": {"name": "s2istreamingplatformflink", "version": "e7ff259c7ba6843ae339496819df7d443d843872", "sub_image": "sp20", "external": false}}, "multimodalrouting": {"name": "multimodalrouting", "repository": "git@github.com:lyft/multimodalrouting.git", "description": "Provides a multimodal routing service", "service_tier": 1, "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "MultimodalRouting", "slack": "#multimodal-routing", "image_type": "service", "languages": ["go"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 420}], "groups": [{"name": "dev", "members": ["control.dev", "multimodalrouting.legacy", "places.dev", "rideableavailability.dev", "rideablerouting.dev", "etaproxy.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "multimodalrouting.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "multimodalrouting.dev", "container": "multimodalrouting.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "command": "make lint"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}], [{"name": "production-us-east-1b", "legacy": true, "availability_zone": "us-east-1b"}], [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production-us-east-1e", "legacy": true, "availability_zone": "us-east-1e"}, {"name": "production-us-east-1f", "legacy": true, "availability_zone": "us-east-1f"}], {"name": "production", "legacy": true}], "envoy": {"profile": "go", "settings": {"common_settings": {"internal_hosts": {"places": null, "transit": null, "rideableavailability": null, "rideablerouting": null, "trafischedulesapi": null, "etaproxy": null}, "local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080"}}, "services": [{"name": "multimodalrouting"}]}}, "logging": {"multimodalrouting": {"fields": {"service": "keyword", "method": "keyword", "requestId": "keyword", "err": "keyword", "numStops": "long", "numRoutes": "long", "destinationCoordLat": "float", "originCoordLon": "float", "destinationCoordLon": "float", "originCoordLat": "float", "routingDuration": "float", "Rounds": "long"}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}]}}, "version": "0b0da3e752c249e5f4044cda0f95ec0e046801b1", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "multiredis": {"name": "multiredis", "description": "Shared provisioning code for Redis instances at Lyft", "repository": "git@github.com:lyft/multiredis.git", "report_ci": true, "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "redis", "port": 22120}]}], "groups": [{"name": "dev", "members": ["multiredis.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "multiredis.dev"}], "slack": "#networking", "team_email": "network-team@lyft.com", "pagerduty_escalation_policy": "Networking", "deploy": [{"name": "development", "legacy": true}, {"name": "staging", "legacy": true, "automatic": true}, {"name": "canary", "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "image_type": "tool", "version": "9325db0480a5843f861caa690cd02b2d6d6241a4", "images": [{"parent": {"name": "opsbase", "version": "cdd195f45babe43e1974bf540e000bbc54aeafdb", "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "cdd195f45babe43e1974bf540e000bbc54aeafdb", "external": false}}, "mypy": {"name": "mypy", "description": "Mypy type checker", "repository": "git@github.com:lyft/containers.git:mypy", "slack": "#dev-python", "team_email": "devx-team@lyft.com", "docs": {"section": "Infrastructure"}, "containers": [{"name": "mypy", "command": "/code/containers/mypy/entrypoint.sh", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "watch", "command": "/code/containers/mypy/watch.sh", "mounts": ["/var/run/docker_sockets", "/srv/control"]}], "python": {"mypy": {"python_versions": ["3.6"]}}, "deploy": [{"name": "development", "legacy": false}, {"name": "staging", "legacy": false, "automatic": true}, {"name": "canary", "legacy": false}, {"name": "production", "legacy": false}], "languages": ["python", "bash"], "image_type": "tool", "version": "d750c7fbca616bb3f2904304bde76bbc22ce5236", "images": [{"parent": {"name": "bionicbase", "version": "c3382212118c3b3a62d4c82a7cf8ff7ea9cce056", "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "c3382212118c3b3a62d4c82a7cf8ff7ea9cce056", "external": false}}, "mysql": {"name": "mysql", "description": "mysql database server", "repository": "git@github.com:lyft/containers.git:mysql", "containers": [{"name": "server", "start_phase": "parallel_storage", "provision": "/code/containers/mysql/provision.sh", "command": "/code/containers/mysql/entrypoint.sh", "exports": [{"name": "mysql", "port": 3306}]}], "groups": [{"name": "dev", "members": ["control.dev", "mysql.server"]}], "tests": [{"name": "start", "type": "startup", "group": "mysql.dev"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false}, {"name": "canary", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false}], "languages": ["bash"], "image_type": "tool", "slack": "#ds-aws-pod", "team_email": "ds-aws@lyft.com", "version": "f0f7910fde92303126a0c75f836c2839110192b9", "images": [{"parent": {"name": "imagebase", "version": "876dbc1b4548b1b19a192303633555cafa7f9e08", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "876dbc1b4548b1b19a192303633555cafa7f9e08", "sub_image": null, "external": false}}, "nats": {"name": "nats", "description": "nats", "repository": "git@github.com:lyft/nats.git", "image_type": "service", "languages": ["go"], "credentials": false, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh", "limits": {"environment": {"development": {"memory": "0.19Gi", "cpu": 0.8}}}}], "groups": [{"name": "dev", "members": ["control.dev", "nats.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "nats.dev"}], "slack": "#q4-push", "slack_deploy_notification_environments": ["staging", "canary", "production"], "pagerduty_escalation_policy": "IDL Tools", "team_email": "idl-tools@lyft.com", "deploy": [{"name": "staging", "legacy": true, "automatic": false, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "service_tier": 1, "version": "33b95bb6f8081b79d65dcf72bb2dc403d0874a8f", "images": [{"parent": {"name": "opsbase", "version": "e6298e7b6ba0c062918e656d651de3ad48092f2a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "e6298e7b6ba0c062918e656d651de3ad48092f2a", "sub_image": null, "external": false}}, "navprototype": {"name": "navprototype", "description": "Backend service for a nav prototype", "repository": "git@github.com:lyft/navprototype.git", "slack": "#mapping-nav", "team_email": "eliot@lyft.com", "pagerduty_escalation_policy": "Eliot Walker", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:deb42d25da0e6d5fe565c019883e458b4b31b696"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/navprototype", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "navprototype.legacy"]}, {"name": "service_group", "members": ["navprototype.legacy"]}, {"name": "integration", "members": ["maptiles.dev", "routingengine.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "navprototype.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "navprototype.service", "type": "service", "environment_files": ["ops/env.yaml"], "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "navprototype.service", "type": "service", "canary": true, "environment_files": ["ops/env.yaml"], "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "automatic": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production", "automatic": true, "bake_time_minutes": 0, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "navprototype"}], "common_settings": {"internal_hosts": {"maptiles": null, "routingengine": null, "routingenginena20180101": null, "routingenginena20190710": null}}}}, "version": "3f5763a7e459822c8f57c31118983038fe84b9cf", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "nesdatapipeline": {"name": "nesdatapipeline", "description": "negative experience score", "repository": "git@github.com:lyft/nesdatapipeline.git", "slack": "#data-nes-bots", "pagerduty_escalation_policy": "nesdatapolicy", "team_email": "sdabas@lyft.com", "image_type": "flyteworkflow", "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "nesdatapipeline.spin"]}], "tests": [{"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "workflow_registration", "type": "execution", "group": "nesdatapipeline.dev", "container": "nesdatapipeline.spin", "command": "make register_for_pr"}], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "register_development", "legacy": true, "automatic": true, "role": "data-deploy", "orca": []}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "register_staging", "legacy": true, "automatic": true, "role": "data-deploy", "orca": []}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "register_production", "role": "data-deploy", "automatic": true, "legacy": true, "orca": []}], "version": "19c098f5c4c2ea0235ea60e99b1f712888a9c068", "images": [{"parent": {"name": "flytesparkbase", "version": "ea8b691fef3dc56fef3b71d3c6c54a28116b1635", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "flytesparkbase", "version": "ea8b691fef3dc56fef3b71d3c6c54a28116b1635", "sub_image": null, "external": false}}, "networkingtools": {"name": "networkingtools", "description": "Networking's batch box repo containing crons and other tools", "repository": "git@github.com:lyft/networkingtools.git", "image_type": "service", "service_tier": 2, "slack": "#networking", "team_email": "network-team@lyft.com", "pagerduty_escalation_policy": "Networking", "languages": ["bash", "python", "golang"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "networkingtools.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "networkingtools.dev"}], "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "version": "030305ae9946c8475bb3e1aca38fa3d4146f9d39", "images": [{"parent": {"name": "opsbase", "version": "dc7a704e79825ca7b625490e3a91c8e0b4549600", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "dc7a704e79825ca7b625490e3a91c8e0b4549600", "sub_image": null, "external": false}}, "nexus": {"name": "nexus", "description": "nexus", "repository": "git@github.com:lyft/nexus.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libgeos-c1", "libspatialindex-c3"]}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=2 --limit-request-line 8190 --forwarded-allow-ips=\"*\" -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/nexus", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "retrievewisebudgetplans", "command": "dumb-init -- service_venv python -m app.scripts.retrieve_wise_budget_plans", "workdir": "/code/nexus", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "genericpolls3fornewcoupondrops", "command": "dumb-init -- service_venv python -m app.scripts.poll_s3_for_new_coupon_drops", "sub_image": "k8s", "workdir": "/code/nexus", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "backfillpolls3fornewcoupondrops", "command": "dumb-init -- service_venv python -m app.scripts.poll_s3_for_new_coupon_drops -t backfill_drop -o", "sub_image": "k8s", "workdir": "/code/nexus", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "wisecostcurve", "command": "dumb-init -- service_venv python -m app.scripts.run_wise_workflow", "sub_image": "k8s", "workdir": "/code/nexus", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "polls3fortntcampaigns", "command": "dumb-init -- service_venv python -m app.scripts.poll_s3_for_new_tnt_events", "sub_image": "k8s", "workdir": "/code/nexus", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "polls3forcashback", "command": "dumb-init -- service_venv python -m app.scripts.poll_s3_for_lyft_cashback", "sub_image": "k8s", "workdir": "/code/nexus", "limits": {"cpu": 1, "memory": "2Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "redis.server", "nexus.legacy"]}], "facets": [{"name": "main", "member": "nexus.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 25}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 9, "max_size": 80}}}}, {"name": "canary", "member": "nexus.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "retrievewisebudgetplans", "member": "nexus.retrievewisebudgetplans", "type": "batch"}, {"name": "retrievewisebudgetplanscron", "member": "nexus.retrievewisebudgetplans", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 18 * * 5"}, {"name": "genericpolls3fornewcoupondrops", "member": "nexus.genericpolls3fornewcoupondrops", "type": "batch"}, {"name": "wisecostcurvebatch", "member": "nexus.wisecostcurve", "type": "batch"}, {"name": "backfillpolls3fornewcoupondropscron", "member": "nexus.backfillpolls3fornewcoupondrops", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 17 * * 0,1,3,4,5,6"}, {"name": "backfillpolls3fornewcoupondropscrontuesday", "member": "nexus.backfillpolls3fornewcoupondrops", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 14 * * 2"}, {"name": "wisecostcurvecron", "member": "nexus.wisecostcurve", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 18 * * 1"}, {"name": "polls3fortntcampaignscron", "member": "nexus.polls3fortntcampaigns", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 18 * * *"}, {"name": "polls3forcashbackcron", "member": "nexus.polls3forcashback", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 18 * * *"}], "envoy": {"profile": "python", "settings": {"services": [{"name": "nexus"}, {"name": "nexusbatch"}], "common_settings": {"internal_hosts": {"acquisitionbonuses": null, "coupons": null, "engagementplatform": null, "jobschedulerbulkweb": null, "mailer": null, "messaging": null, "omnibot": null, "ratelimit": null, "regions": null, "ridepasses": null, "switchboard": null, "supply": null, "tcs": null, "users": null, "usergroups": null, "detargetingapi": null}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}}}}, "tests": [{"name": "startup", "type": "startup", "group": "nexus.dev"}, {"name": "unit", "type": "jailed", "sub_image": "k8s", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "nexus.dev", "container": "nexus.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#rider-incentives-dev", "team_email": "rider-incentives-eng@lyft.com", "pagerduty_escalation_policy": "Rider Incentives", "deploy": [{"name": "staging", "automatic": true, "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}, {"facet": "genericpolls3fornewcoupondrops"}, {"facet": "retrievewisebudgetplans"}, {"facet": "retrievewisebudgetplanscron"}, {"facet": "wisecostcurvecron"}, {"facet": "wisecostcurvebatch"}, {"facet": "polls3fortntcampaignscron"}, {"facet": "polls3forcashbackcron"}], "kubernetes": {"enabled": true}, "bake_time_minutes": 5}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}, {"facet": "retrievewisebudgetplans"}], "kubernetes": {"enabled": true}, "bake_time_minutes": 5}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "bake_time_minutes": 5}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "bake_time_minutes": 5}], {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}, {"facet": "retrievewisebudgetplans"}, {"facet": "retrievewisebudgetplanscron"}, {"facet": "genericpolls3fornewcoupondrops"}, {"facet": "backfillpolls3fornewcoupondropscron"}, {"facet": "backfillpolls3fornewcoupondropscrontuesday"}, {"facet": "wisecostcurvecron"}, {"facet": "wisecostcurvebatch"}, {"facet": "polls3fortntcampaignscron"}, {"facet": "polls3forcashbackcron"}], "kubernetes": {"enabled": true}, "bake_time_minutes": 5}], "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "languages": ["javascript", "python"], "image_type": "service", "service_tier": 2, "logging": {"nexus": {"fields": {"campaign_id": "keyword", "webhook_title": "keyword", "user_id": "keyword", "owner": "keyword", "request_headers": "keyword", "data": {"campaign_api_id": "keyword", "campaign_name": "keyword", "recipients": "long", "url": "keyword", "app_group_name": "keyword", "targeted_users": "keyword"}, "text": "keyword", "drop_cash": {"is_new_driver": "keyword", "cash_amount": "keyword"}, "pax_targeting": "boolean", "error": "keyword", "code": "long"}}}, "version": "c02df87c301085ee6d8f42b812e7ff1c7cb68ad0", "images": [{"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "nlbcontroller": {"name": "nlbcontroller", "description": "Kubernetes pod-aware NLB controller", "repository": "git@github.com:lyft/nlbcontroller.git", "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "docs": {"section": "Infrastructure"}, "builder": {"name": "s2i", "params": {"builder": "lyft/s2igo:6dfd1e3d993029d23065d2762b1bfcee2f45431e"}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}], "deploy": [{"name": "staging-boba2", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1d", "cluster.lyft.net/cluster_name": "boba2", "cluster.lyft.net/environment": "staging", "cluster.lyft.net/gpu": "true", "cluster.lyft.net/region": "us-east-1", "cluster.lyft.net/sla": "infra-dev"}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["boba2"]}}, "orca": [{"region": "iad"}]}, [{"name": "staging-core-0", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1a", "cluster.lyft.net/environment": "staging", "cluster.lyft.net/role": "core"}}}, {"name": "staging-core-1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1b", "cluster.lyft.net/environment": "staging", "cluster.lyft.net/role": "core"}}}, {"name": "staging-core-2", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1d", "cluster.lyft.net/environment": "staging", "cluster.lyft.net/role": "core"}}}, {"name": "staging-core-3", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1e", "cluster.lyft.net/environment": "staging", "cluster.lyft.net/role": "core"}}}, {"name": "staging-core-4", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1f", "cluster.lyft.net/environment": "staging", "cluster.lyft.net/role": "core"}}}], {"name": "staging-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/environment": "staging", "cluster.lyft.net/role": "core"}}}, {"name": "staging-stateful", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/environment": "staging", "cluster.lyft.net/role": "stateful"}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}}}, [{"name": "production-core-0", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1a", "cluster.lyft.net/environment": "production", "cluster.lyft.net/role": "core"}}}, {"name": "production-core-1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1b", "cluster.lyft.net/environment": "production", "cluster.lyft.net/role": "core"}}}, {"name": "production-core-2", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1d", "cluster.lyft.net/environment": "production", "cluster.lyft.net/role": "core"}}}, {"name": "production-core-3", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1e", "cluster.lyft.net/environment": "production", "cluster.lyft.net/role": "core"}}}, {"name": "production-core-4", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1f", "cluster.lyft.net/environment": "production", "cluster.lyft.net/role": "core"}}}], {"name": "production-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/environment": "production", "cluster.lyft.net/role": "core"}}, "orca": [{"region": "iad"}]}], "languages": ["go"], "image_type": "service", "service_tier": 3, "version": "3d99d29f6fb31538e11e636ad32067966581e9f9", "images": [{"parent": {"name": "s2igo", "version": "6dfd1e3d993029d23065d2762b1bfcee2f45431e", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igo", "version": "6dfd1e3d993029d23065d2762b1bfcee2f45431e", "sub_image": null, "external": false}}, "nlpmodels": {"name": "nlpmodels", "description": "NLP models in lyft", "repository": "git@github.com:lyft/nlpmodels.git", "image_type": "tool", "slack": "#nlp-tools", "team_email": "aakbariankaljahi@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}]}}, "deploy": [{"name": "production", "legacy": false}], "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "lyftlearn", "command": "sleep infinity", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "notebook", "command": "/code/venvs/venv/bin/jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password=''", "privileged": true, "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}], "groups": [{"name": "lyftlearn_group", "members": ["nlp_models.lyftlearn"]}], "tests": [{"name": "test-lyftlearn", "type": "execution", "autotrigger": false, "container": "nlp_models.lyftlearn", "group": "nlp_models.lyftlearn_group", "command": "make test_lyftlearn"}], "lyftlearn": {}, "version": "770057531a285f57eaf457339e15a732c0f8ca39", "images": [{"parent": {"name": "lyftlearnbase", "version": "78bfb1420cc290ce3ef4f759a38ce82943119a25", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "lyftlearnbase", "version": "78bfb1420cc290ce3ef4f759a38ce82943119a25", "sub_image": null, "external": false}}, "nodeconditioncontroller": {"name": "nodeconditioncontroller", "description": "Custom controller for node status condition changes", "repository": "git@github.com:lyft/node-condition-controller.git", "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "credentials": false, "docs": {"section": "Infrastructure"}, "builder": {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c"}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}], "deploy": [[{"name": "staging-infra-dev-sla", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "infra-dev"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "staging-sidecar-test1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "infra-dev"}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sidecar-test1"]}}}, {"name": "staging-boba2", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "infra-dev"}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["boba2"]}}}], [{"name": "staging-sla", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "staging"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "staging-us-east-1", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "staging"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "staging-us-east-1b", "legacy": false, "availability_zone": "us-east-1b", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "staging-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "staging"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "staging-us-east-1e", "legacy": false, "availability_zone": "us-east-1e", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "staging"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "staging-us-east-1f", "legacy": false, "availability_zone": "us-east-1f", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "staging"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], [{"name": "production-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-titan", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["spark"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["titan"]}}}, {"name": "production-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-devkube", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}}}, {"name": "production-lyftlearn-av", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn-av"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml-av"]}}}, {"name": "production-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "flyte"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}}, {"name": "production-critical-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "flytecritical"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}}}], [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1b", "legacy": false, "availability_zone": "us-east-1b", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1e", "legacy": false, "availability_zone": "us-east-1e", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1f", "legacy": false, "availability_zone": "us-east-1f", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], [{"name": "custom-sla", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": "custom"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}]], "languages": ["go"], "image_type": "service", "service_tier": 3, "version": "38785faea41de323e1dee8f853918433313a5f8f", "images": [{"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}}, "nodejs": {"name": "nodejs", "description": "base image for nodejs images", "repository": "git@github.com:lyft/containers.git:nodejs", "deploy": [{"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false}, {"name": "canary", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false}], "languages": [], "image_type": "library", "version": "d322f7fe12bd6236e2642106783c6351fc87d095", "images": [{"parent": {"name": "imagebase", "version": "876dbc1b4548b1b19a192303633555cafa7f9e08", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "876dbc1b4548b1b19a192303633555cafa7f9e08", "sub_image": null, "external": false}}, "nodeproblemdetector": {"name": "nodeproblemdetector", "description": "daemonset that detects node problems and marks node conditions", "repository": "git@github.com:lyft/node-problem-detector.git", "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "credentials": false, "pagerduty_escalation_policy": "Provisioning", "docs": {"section": "Infrastructure"}, "deploy": [{"name": "staging-sidecar-test1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sidecar-test1"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sidecar-test1"]}}}, [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "staging-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}}}, {"name": "staging-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "staging-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "staging-flink", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flink"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["flink"]}}}, {"name": "staging-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flyte"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}], [{"name": "production-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-lyftlearn-av", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn-av"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml-av"]}}}, {"name": "production-titan", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["spark"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["titan"]}}}, {"name": "production-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flyte"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-critical-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flytecritical"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-devkube", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}}}, {"name": "production-devkubestaging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkubestaging"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}}}], [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1b", "legacy": false, "availability_zone": "us-east-1b", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1e", "legacy": false, "availability_zone": "us-east-1e", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}, {"name": "production-us-east-1f", "legacy": false, "availability_zone": "us-east-1f", "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "*"}}}], "languages": ["bash"], "image_type": "service", "service_tier": 3, "version": "56025c344d323a6bd6ece0c8748b167d2d4a8996", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "notes": {"name": "notes", "description": "TODO short description of the service", "repository": "git@github.com:lyft/notes.git", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/notes", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "1Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "elasticsearch5.server", "dynamostreams.dev", "supply.dev", "notes.legacy"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["openssl", "libssl-dev", "python3.6", "libgeos-c1", "libspatialindex-c3"]}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "facets": [{"name": "main", "member": "notes.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 2, "max_size": 30}}}}, {"name": "canary", "member": "notes.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "tests": [{"name": "startup", "type": "startup", "group": "notes.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "notes.dev", "container": "notes.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "team_email": "support-eng-ast@lyft.com", "pagerduty_escalation_policy": "Associate Tools", "slack": "#support-bots", "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"availability_zone": "us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "name": "production-us-east-1d"}, {"legacy": false, "name": "production", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "deploy_settings": {"window_start": "09:00 US/Central", "window_end": "18:00 US/Central"}, "languages": ["python"], "image_type": "service", "service_tier": 2, "pulldeploy_components": {"data": ["regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "notes"}], "common_settings": {"internal_hosts": {"supply": null, "ratelimit": null, "regions": null, "robocop": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}}}}, "logging": {"notes": {"fields": {"event_name": "keyword", "user": "keyword"}}}, "version": "0b73c04282823dc35ce98b43ce0042cdd6a49c2a", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "nsqpy": {"name": "nsqpy", "description": "nsq-py", "repository": "git@github.com:lyft/nsq-py.git", "team_email": "devnull@lyft.com", "slack": "#devx-bots", "credentials": true, "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:33c3858ae5c7dee41a02ede081071a230c234049"}}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy"}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true}], "languages": ["python"], "image_type": "library", "version": "71e65abb3153c61bf024fc7f7b3735e22ff498af", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "33c3858ae5c7dee41a02ede081071a230c234049", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "33c3858ae5c7dee41a02ede081071a230c234049", "sub_image": null, "external": false}}, "obstools": {"name": "obstools", "description": "A less hatted version of opstools", "repository": "git@github.com:lyft/obstools.git", "credentials": true, "containers": [{"name": "productioniad", "command": "/code/obstools/k8s-entrypoint.sh /code/obstools/harunner -queue=obstools-cron-production-iad -concurrency=1 -config=/code/obstools/ops/config/states/obstools/harunner-production.toml", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "quboleproductioniad", "command": "/code/obstools/k8s-entrypoint.sh /code/obstools/harunner -queue=obstools-qubole-cron-production-iad -concurrency=1 -config=/code/obstools/ops/config/states/obstools/harunner-production.toml", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "level5productioniad", "command": "/code/obstools/k8s-entrypoint.sh /code/obstools/harunner -queue=obstools-level5-cron-production-iad -concurrency=1 -config=/code/obstools/ops/config/states/obstools/harunner-production.toml", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "productionpdx", "command": "/code/obstools/k8s-entrypoint.sh /code/obstools/harunner -queue=obstools-cron-production-pdx -concurrency=1 -config=/code/obstools/ops/config/states/obstools/harunner-production.toml", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "quboleproductionpdx", "command": "/code/obstools/k8s-entrypoint.sh /code/obstools/harunner -queue=obstools-qubole-cron-production-pdx -concurrency=1 -config=/code/obstools/ops/config/states/obstools/harunner-production.toml", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "level5productionpdx", "command": "/code/obstools/k8s-entrypoint.sh /code/obstools/harunner -queue=obstools-level5-cron-production-pdx -concurrency=1 -config=/code/obstools/ops/config/states/obstools/harunner-production.toml", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "stagingiad", "command": "/code/obstools/k8s-entrypoint.sh /code/obstools/harunner -queue=obstools-cron-staging-iad -concurrency=1 -config=/code/obstools/ops/config/states/obstools/harunner-staging.toml", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "qubolestagingiad", "command": "/code/obstools/k8s-entrypoint.sh /code/obstools/harunner -queue=obstools-qubole-cron-staging-iad -concurrency=1 -config=/code/obstools/ops/config/states/obstools/harunner-staging.toml", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "level5stagingiad", "command": "/code/obstools/k8s-entrypoint.sh /code/obstools/harunner -queue=obstools-level5-cron-staging-iad -concurrency=1 -config=/code/obstools/ops/config/states/obstools/harunner-staging.toml", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "stagingpdx", "command": "/code/obstools/k8s-entrypoint.sh /code/obstools/harunner -queue=obstools-cron-staging-pdx -concurrency=1 -config=/code/obstools/ops/config/states/obstools/harunner-staging.toml", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "qubolestagingpdx", "command": "/code/obstools/k8s-entrypoint.sh /code/obstools/harunner -queue=obstools-qubole-cron-staging-pdx -concurrency=1 -config=/code/obstools/ops/config/states/obstools/harunner-staging.toml", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "level5stagingpdx", "command": "/code/obstools/k8s-entrypoint.sh /code/obstools/harunner -queue=obstools-level5-cron-staging-pdx -concurrency=1 -config=/code/obstools/ops/config/states/obstools/harunner-staging.toml", "limits": {"cpu": 1, "memory": "2Gi"}}, {"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "obstools.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "obstools.dev"}, {"name": "unit", "type": "execution", "group": "obstools.dev", "container": "obstools.legacy", "command": "make test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "pagerduty_escalation_policy": "Observability Visibility", "team_email": "observability-visibility-team@lyft.com", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#observabot"}, "pr_merge": {"slack": "#observabot"}}, "audit_blacklist": ["envoyAudit"], "facets": [{"name": "stagingiad", "member": "obstools.stagingiad", "sidecars": ["heka", "statsd", "fluentbit"], "type": "service", "autoscaling": {"min_size": 1, "max_size": 10}}, {"name": "qubolestagingiad", "member": "obstools.qubolestagingiad", "sidecars": ["heka", "statsd", "fluentbit"], "type": "service", "autoscaling": {"min_size": 1, "max_size": 10}}, {"name": "level5stagingiad", "member": "obstools.level5stagingiad", "sidecars": ["heka", "statsd", "fluentbit"], "type": "service", "autoscaling": {"min_size": 1, "max_size": 10}}, {"name": "stagingpdx", "member": "obstools.stagingpdx", "sidecars": ["heka", "statsd", "fluentbit"], "type": "service", "autoscaling": {"min_size": 1, "max_size": 10}}, {"name": "qubolestagingpdx", "member": "obstools.qubolestagingpdx", "sidecars": ["heka", "statsd", "fluentbit"], "type": "service", "autoscaling": {"min_size": 1, "max_size": 10}}, {"name": "level5stagingpdx", "member": "obstools.level5stagingpdx", "sidecars": ["heka", "statsd", "fluentbit"], "type": "service", "autoscaling": {"min_size": 1, "max_size": 10}}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "targets": [{"facet": "stagingiad"}, {"facet": "qubolestagingiad"}, {"facet": "level5stagingiad"}, {"facet": "stagingpdx"}, {"facet": "qubolestagingpdx"}, {"facet": "level5stagingpdx"}], "kubernetes": {"enabled": false, "cluster_labels": {"cluster.lyft.net/role": "infra"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}}, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "crontab", "legacy": true, "orca": []}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "slack_deploy_notification_environments": ["staging", "canary", "crontab", "production"], "languages": ["bash", "python", "javascript", "golang"], "image_type": "service", "service_tier": 2, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": "precommit"}}]}}, "version": "4039c362e832d0fd07396ded45e15c26ddcc42ab", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "offergateway": {"name": "offergateway", "repository": "git@github.com:lyft/offergateway.git", "description": "A golang gateway for populating the mode selector", "service_tier": 1, "team_email": "purchase-flow-eng@lyft.com", "pagerduty_escalation_policy": "Purchase Flow", "slack": "#purchase-flow", "notification_overrides": {"behind_notifications": {"slack": "#purchase-flow-bots"}, "pr_open": {"slack": "#purchase-flow-prs"}, "pr_merge": {"slack": "#purchase-flow-bots"}, "deploy": {"slack": "#purchase-flow-bots"}, "deploy_failure": {"slack": "#purchase-flow-bots"}}, "slack_deploy_notification_environments": ["staging", "canary", "production"], "image_type": "service", "languages": ["go"], "pulldeploy_components": {"data": ["marketplaceconfig", "translationdata"]}, "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:9da8e35dbaa78ac513f8934273bde2863ebe0c7c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- offergateway", "limits": {"cpu": 4, "memory": "512Mi"}, "sub_image": "k8s", "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "offergateway.legacy"]}, {"name": "integration", "members": ["offergateway.dev", "offerings.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "offergateway.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "offergateway.integration", "container": "offergateway.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "offergateway.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "offergateway.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 1000}}, "hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"firehose_iad": null}, "internal_hosts": {"offerings": null, "offeringsapi": null, "regions": null, "tcs": null, "eventingest": null}}, "services": [{"name": "offergateway"}]}}, "version": "363c1c0a1fe267c76dd38b5e942f835d4250de5e", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "9da8e35dbaa78ac513f8934273bde2863ebe0c7c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "offerings": {"name": "offerings", "description": "offerings", "repository": "git@github.com:lyft/offerings.git", "image_type": "service", "languages": ["go"], "credentials": true, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh"}, {"name": "k8sservice", "command": "dumb-init -- offerings", "workdir": "/code/offerings", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}], "facets": [{"name": "main", "member": "offerings.k8sservice", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 4, "max_size": 60}}}}, {"name": "canary", "member": "offerings.k8sservice", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "offerings.service", "dynamodb.server"]}, {"name": "integration", "members": ["offerings.dev", "courier.dev", "fare.dev", "etaproxy.legacy", "etablender.legacy", "abacus.dev", "legacyridetypes.dev", "matchingconstraints.dev", "modelexec.dev", "dsfeatures.dev", "regions.legacy", "routingengine.legacy", "rides.legacy", "modes.dev", "pricing.dev", "users.legacy", "coupons.minimal", "venues.dev"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "tests": [{"name": "startup", "type": "startup", "group": "offerings.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "offerings.integration", "container": "offerings.service", "command": "make integration"}, {"name": "lint", "type": "jailed", "command": "pre-commit run --all-files --show-diff-on-failure", "sub_image": "precommit"}], "pulldeploy_components": {"data": ["marketplaceconfig", "translationdata"]}, "slack": "#purchase-flow", "pagerduty_escalation_policy": "Purchase Flow", "team_email": "purchase-flow-eng@lyft.com", "service_tier": 0, "notification_overrides": {"behind_notifications": {"slack": "#purchase-flow-bots"}, "pr_open": {"slack": "#purchase-flow-prs"}, "pr_merge": {"slack": "#purchase-flow-bots"}, "deploy": {"slack": "#purchase-flow-bots"}, "deploy_failure": {"slack": "#purchase-flow-bots"}}, "slack_deploy_notification_environments": ["staging", "canary", "production"], "deploy": [{"name": "staging-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "bake_time_minutes": 10, "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "staging", "legacy": false, "bake_time_minutes": 10, "automatic": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "bake_time_minutes": 15}, [{"name": "production-us-east-1a", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "bake_time_minutes": 15, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "bake_time_minutes": 15, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "offerings"}], "common_settings": {"redis": {"offeringsmultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}, "local_service": {"circuit_breakers": {"default": {"max_connections": 1000}}}, "internal_hosts": {"autonomous": null, "coupons": null, "dispatchforesight": null, "dsfeatures": null, "enterprise": null, "eventingest": null, "fare": null, "ghostmatching": null, "lastmile": null, "legacyridetypes": null, "matchingconstraints": null, "modes": null, "modelexecmisc": null, "modelexecofferings": null, "modelproxy": null, "regions": null, "rides": null, "routeplanner": null, "paxsavings": null, "tcs": null, "users": null, "usergroups": null, "venues": null, "transitdatadecorator": null}, "external_hosts": {"firehose_iad": null, "dynamodb_iad": null}}}}, "logging": {"offerings": {"fields": {"requestId": "keyword", "request": "keyword", "dest_region_code": "keyword", "region_code": "keyword", "missing_product": "keyword", "passenger_id": "keyword", "client_id": "keyword", "lyft_score": "float", "lyft_plus_score": "float", "lyft_premium_score": "float", "lyft_lux_suv_score": "float", "lyft_line_score": "float", "lyft_lux_score": "float", "err": "keyword", "errVerbose": "keyword", "description": "keyword", "offer_id": "keyword", "title": "keyword", "reason": "keyword", "offer_product_id": "keyword", "numPostRequestOffers": "long", "upsellEngineVersion": "keyword", "varName": "keyword", "strategy": "keyword", "failure_domain": "keyword", "err_type": "keyword", "error": "keyword", "target": {"client_id": "keyword", "mark_exposure": "boolean", "user_id": "keyword"}, "paxID": "keyword", "service": "keyword", "status_code": "long", "Content-Length": "keyword", "Accept-Encoding": "keyword", "X-Amz-Date": "keyword", "X-Envoy-Upstream-Rq-Per-Try-Timeout-Ms": "keyword", "X-Envoy-Max-Retries": "keyword", "Content-Type": "keyword", "X-Amz-Target": "keyword", "X-Envoy-Retry-On": "keyword", "user_agent": "keyword", "X-Amz-Security-Token": "keyword", "aws": {"code": "keyword", "message": "keyword", "origerr": "keyword"}, "Authorization": "keyword", "method": "keyword", "path": "keyword", "error_type": "keyword", "languageBase": "keyword", "languageRegion": "keyword", "userRegion": "keyword", "mapId": "long", "prevRevision": "long", "newRevision": "keyword", "host": "keyword", "tags": "keyword", "plural": "keyword", "translationNote": "keyword", "string": "keyword", "id_key": "keyword", "locale": "keyword", "model_version": "keyword", "refreshPeriod": "float", "maps": "keyword", "dataDeployPath": "keyword", "namespace": "keyword", "signal": "keyword", "errs": "keyword", "recNames": "keyword", "lastModified": "float", "latestRevision": "long", "errorVerbose": "keyword", "failed_record_count": "long", "attempt_num": "long", "products": "keyword", "mode_product_key": "keyword", "shadow_modes_product": "boolean", "use_modes_golden_path": "boolean", "for_mode_products": "boolean", "field": "keyword", "product_ids": "keyword", "pin_etas": "keyword", "mode_id": "keyword", "overrides": "keyword", "metadata": "keyword", "downstream_cluster": "keyword"}}}, "version": "902072350482604a161cc4530ddf19676a5cdf9b", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "offeringsapi": {"name": "offeringsapi", "description": "python proxy for offerings service", "repository": "git@github.com:lyft/offeringsapi.git", "image_type": "service", "service_tier": 0, "team_email": "purchase-flow-eng@lyft.com", "pagerduty_escalation_policy": "Purchase Flow", "slack": "#purchase-flow", "notification_overrides": {"pr_open": {"slack": "#purchase-flow-prs"}, "pr_merge": {"slack": "#purchase-flow-bots"}, "deploy": {"slack": "#purchase-flow-bots"}, "deploy_failure": {"slack": "#purchase-flow-bots"}}, "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "offeringsapi.legacy"]}, {"name": "integration", "members": ["offeringsapi.dev", "offerings.integration"]}], "tests": [{"name": "startup", "type": "startup", "group": "offeringsapi.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "offeringsapi.integration", "container": "offeringsapi.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "pulldeploy_components": {"data": ["marketplaceconfig"]}, "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "offeringsapi"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 1000}}, "hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"firehose_iad": null}, "internal_hosts": {"offerings": null, "tcs": null}}, "override_settings": [{"settings": {}, "services": [{"name": "offeringsapi", "service_instance": "staging", "traffic_mirror": [{"match": {"prefix": "/v1/offerings"}, "route": "offergateway", "runtime_key_prefix": "internal_routing.offeringsapi.mirror.offerings"}, {"match": {"prefix": "/v1/active-offer"}, "route": "offergateway", "runtime_key_prefix": "internal_routing.offeringsapi.mirror.active_offer"}]}]}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}]}}, "version": "1cc6ee8cb78e9583f650c0af7f20250b8d20cbc9", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "offlinegateway": {"name": "offlinegateway", "description": "Payment service in Gateway to handle offline payment tasks", "repository": "git@github.com:lyft/offlinegateway.git", "slack": "#pay-processing", "team_email": "pay-processing-eng@lists.lyft.com", "pagerduty_escalation_policy": "Pay Processing", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/offlinegateway", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dbproxy.dev", "dynamodb.dev", "metadataproxy.server", "offlinegateway.legacy"]}, {"name": "integration", "members": ["control.dev", "dbproxy.dev", "jobscheduler.dev", "offlinegateway.legacy"]}, {"name": "service_group", "members": ["offlinegateway.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "offlinegateway.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "offlinegateway.integration", "container": "offlinegateway.legacy", "command": "make test_integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "offlinegateway.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "offlinegateway.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "notification_overrides": {"deploy": {"slack": "#pay-proc-deploys", "environments": ["production", "staging"]}, "pr_open": {"slack": "#pay-processing"}, "test_failure": {"slack": "#pay-proc-deploys", "environments": ["production"]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "offlinegateway"}], "common_settings": {"internal_hosts": {"jobschedulerbulkweb": null, "jobschedulernormalweb": null, "paymentgateway": null, "green": null, "dbproxy": null, "tcs": null}, "external_hosts": {"dynamodb_iad": null, "stripe": null}}}}, "logging": {"offlinegateway": {"fields": {"dispute_amount": "keyword", "dispute_processor": "keyword", "dispute_record_id": "keyword", "network_reason_code": "keyword", "notification_action": "keyword", "notification_id": "keyword", "notification_status": "keyword", "provider": "keyword", "transaction_amount": "keyword", "transaction_id": "keyword"}}}, "version": "fab3c0e2d2d792ac87d8e2fff1776348b2e458ab", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "offlinemileagetracker": {"name": "offlinemileagetracker", "description": "Tier 1 Python service to track off platform miles for expressdrive drivers", "repository": "git@github.com:lyft/offlinemileagetracker.git", "slack": "#xd-hub", "notification_overrides": {"deploy": {"slack": "#xd-hub"}}, "team_email": "xd-eng@lyft.com", "pagerduty_escalation_policy": "XD Core Backend", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s", "packages": ["default-jre-headless", "liblog4j1.2-java", "lbzip2"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/offlinemileagetracker", "limits": {"cpu": 4, "memory": "8Gi", "environment": {"development": {"memory": "1Gi", "cpu": 1}}}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "kclworker", "command": "dumb-init -- /code/kcl/kcl-worker.sh", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi", "environment": {"development": {"memory": "1Gi", "cpu": 1}}}, "readiness_probe": {"exec_probe": {"command": ["kcl_worker_readiness_check"]}, "period_seconds": 60, "initial_delay_seconds": 30}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "redis.server", "offlinemileagetracker.legacy"]}, {"name": "service_group", "members": ["offlinemileagetracker.legacy"]}, {"name": "integration", "members": ["offlinemileagetracker.dev", "ats.qa_approve", "lyfttestlib.core"]}], "tests": [{"name": "startup", "type": "startup", "group": "offlinemileagetracker.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "offlinemileagetracker.integration", "container": "offlinemileagetracker.legacy", "command": "make test_integration", "reports": {"junit": "build/integration.xml"}}], "facets": [{"name": "main", "member": "offlinemileagetracker.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 15}}}}, {"name": "kcl", "member": "offlinemileagetracker.kclworker", "type": "worker", "max_surge": "50%", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 10, "max_size": 10}}}}, {"name": "canary", "member": "offlinemileagetracker.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "kclcanary", "member": "offlinemileagetracker.kclworker", "type": "worker", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "kcl"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "kclcanary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "kcl"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "kcl"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "kcl"}, {"facet": "kclcanary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "offlinemileagetracker"}, {"name": "offlinemileagetrackerkcl"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "redis": {"mileagetrackermultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 8192}}}, "internal_hosts": {"offlinemileagetracker": null, "pusher": null, "ratelimit": null, "supply": null, "tcs": null, "users": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}}}}, "logging": {"offlinemileagetracker": {"fields": {"driver_id": "long", "vehicle_id": "long", "lyft_id": "long", "region_code": "keyword", "key_prefix": "keyword", "error": "keyword", "service_name": "keyword", "bad_response": "keyword", "error_code": "long", "error_details": "keyword", "error_message": "keyword", "start_time_ms": "date", "end_time_ms": "date", "status_code": "long", "distance_m": "long", "offline_distance_m": "long", "online_distance_m": "long", "total_distance_m": "long", "end_odometer_reading_m": "long", "start_odometer_reading_m": "long", "request": {"driver_id": "long", "start_time_ms": "date", "end_time_ms": "date"}}}}, "version": "6c24ece35c7649065b18a702fe077b7e88484cd3", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "omnibot": {"name": "omnibot", "description": "One slackbot to rule them all", "repository": "git@github.com:lyft/omnibot-private.git", "image_type": "service", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "sqs.server", "omnibot.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "omnibot.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "slack": "#internal-productivity", "team_email": "internal-productivity@lyft.com", "pagerduty_escalation_policy": "Internal Productivity", "docs": {"autogen_modules": ["omnibot"]}, "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "omnibot"}, {"name": "omnibotbatch"}], "common_settings": {"internal_hosts": {"family": null, "docs": null, "deploybot": null, "releasebot": null, "scrumbot": null, "intelgraphbot": null, "airportreport": null, "leadplatform": null, "surveybot2": null, "loadtestbot": null, "changebot": null, "serviceportal": null, "incidentassistant": null, "adhocinfra": null, "techlearning": null}, "external_hosts": {"sqs_iad": null}, "redis": {"omnibotmultiredis": {"port": 6380, "op_timeout_ms": 400}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"omnibot": {"fields": {"app": "keyword", "app_id": "keyword", "bot": "keyword", "bot_receiver": "keyword", "team": "keyword", "team_id": "keyword", "channel_id": "keyword", "event_type": "keyword", "event_ts": "keyword", "trigger_id": "keyword", "command": "keyword", "retry": "long", "callback_id": "keyword", "component_type": "keyword", "user": "keyword", "error": "keyword"}}}, "version": "01973d8f169fa007effa013db2cfc8c42896ecda", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "onboardingflow": {"name": "onboardingflow", "description": "A service to handle requests and responses of FormBuilder based onboarding clients", "repository": "git@github.com:lyft/onboardingflow.git", "image_type": "service", "service_tier": 1, "slack": "#do-eng-all", "team_email": "do-funnel@lyft.com", "pagerduty_escalation_policy": "Driver Applicant Onboarding", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- service_venv gunicorn app:app --workers=2 -k gevent --max-requests 25000 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/onboardingflow", "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "limits": {"cpu": 2, "memory": "4Gi"}}], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libspatialindex-dev", "libgeos-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:53c1fcd0802a76d61805f43de43b8c21b4dda361", "sub_image": "k8s"}}]}}, "facets": [{"name": "main", "member": "onboardingflow.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 5}}}}, {"name": "canary", "member": "onboardingflow.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "onboardingflow.legacy"]}, {"name": "integration", "members": ["onboardingflow.dev", "account.legacy", "acquisitionguarantees.legacy", "amp.legacy", "ats.legacy", "auth.legacy", "backgroundcheck.legacy", "compliance.service", "control.dev", "dborchestrator.legacy", "dbproxyauth.legacy", "dispatch.legacy", "dispatchavailability.legacy", "drivermode.legacy", "driverridesinfo.legacy", "dynamodb.server", "elasticsearch.server", "elasticsearch5.server", "elasticsearch6.server", "enterprise.legacy", "envoy.server", "featurebuilderdata.run", "green.legacy", "jobscheduler.legacy", "karma.legacy", "kinesis.server", "leadplatform.legacy", "legacyapi.legacy", "legacyoauth.legacy", "legacyridescheduler.legacy", "legacyridetypes.legacy", "locations.legacy", "logistics.legacy", "lyftidl.server", "mongodb.server", "postgresql.server", "publicapi.legacy", "ratelimit.legacy", "redis.server", "regions.legacy", "rentals.legacy", "routesapi.legacy", "sqs.server", "supply.legacy", "supplypartners.legacy", "supplyrecords.service", "switchboard.legacy", "tripsapi.legacy", "trips.dev", "usergroups.legacy", "users.dev", "vehiclemetadata.dev", "viewport.legacy", "wallet.legacy", "walletapi.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "onboardingflow.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "onboardingflow.integration", "container": "onboardingflow.legacy", "target": "tests/e2e", "targets": ["tests/e2e"], "framework": "pytest"}], "notification_overrides": {"behind_notifications": {"slack": "#do-funnel-bots"}, "pr_merge": {"slack": "#do-funnel-bots"}, "deploy": {"slack": "#do-funnel-bots"}, "deploy_failure": {"slack": "#do-funnel-bots"}}, "deploy": [{"name": "staging", "legacy": false, "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "links": [{"text": "OFS Runbook", "url": "https://github.com/lyft/o/blob/master/docs/runbook.md"}]}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "links": [{"text": "OFS Runbook", "url": "https://github.com/lyft/o/blob/master/docs/runbook.md"}]}, {"name": "production-us-east-1a", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}, "links": [{"text": "OFS Runbook", "url": "https://github.com/lyft/o/blob/master/docs/runbook.md"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "onboardingflow"}], "common_settings": {"internal_hosts": {"ats": {"tls_enabled": true}, "backgroundcheck": {"tls_enabled": true}, "compliance": null, "coupons": null, "driverridesinfo": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "logistics": null, "messaging": null, "notes": null, "regions": null, "rentals": null, "supply": null, "supplypartners": null, "supplyrecords": {"tls_enabled": true}, "tcs": null, "users": null}, "external_hosts": {"firehose_iad": null}, "redis": {"onboardingflowmultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}, "authorization": {"permissions": {"client_driverapplication": {"paths": ["/client/driverapplication*"]}, "client_driverdocuments": {"paths": ["/client/driverdocuments*"]}, "client_license_upload": {"paths": ["/client/onboarding_flow/license_upload"]}, "client_post_approval": {"paths": ["/client/driver-post-approval*"]}, "client_profile_photo_upload": {"paths": ["/client/onboarding_flow/profile_photo_upload"]}, "client_document_scan": {"paths": ["/client/onboarding_flow/document_scan"]}, "client_airport_permit": {"paths": ["/client/onboarding-flow-airport-permit-flow", "/client/onboarding-flow-airport-permit-upload", "/client/onboarding-flow-airport-permit-generate-url", "/client/onboarding-flow-airport-permit-codes"]}, "formbuilder_application": {"paths": ["/v1/formbuilder-driverapplication*"]}, "formbuilder_documents": {"paths": ["/v1/formbuilder-driverdocuments*"]}, "formbuilder_postapproval": {"paths": ["/v1/formbuilder-driver-post-approval*"]}, "images_callback": {"paths": ["/_s3_images/*", "/_svc_images/*"]}, "test_endpoints": {"paths": ["/test*"]}}, "bindings": {"driverfrontend": ["client_driverapplication"], "envoy": ["client_driverapplication", "client_airport_permit", "client_driverdocuments", "client_license_upload", "client_post_approval", "client_profile_photo_upload", "client_document_scan", "formbuilder_application", "formbuilder_documents", "formbuilder_postapproval"], "images": ["images_callback"], "onboardingflow": ["test_endpoints"]}}}, "override_settings": [{"services": [{"name": "onboardingflow", "service_instance": "development"}], "settings": {"external_hosts": {"dynamodb_iad": null}, "authorization": {"bindings": {"*": ["test_endpoints"]}}}}]}}, "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "logging": {"onboardingflow": {"fields": {"lyft_id": "keyword", "applicant_id": "keyword", "applicant_lyft_id": "keyword", "applicant": {"lyftId": "keyword", "user": "keyword", "id": "keyword"}, "params": {"id": "keyword", "vehicle_lyft_id": "keyword"}, "email": "keyword", "phone_number": "keyword", "is_rental": "boolean", "vehicle_id": "keyword", "vehicle_lyft_id": "keyword", "vehicle": {"lyftId": "keyword", "id": "keyword", "make": "keyword", "year": "long", "model": "keyword"}, "document": {"documentType": "keyword", "id": "keyword"}, "document_id": "keyword", "document_type": "keyword", "document_name": "keyword", "attribute_name": "keyword", "check_type": "keyword", "region": "keyword", "new_region": "keyword", "old_region": "keyword", "region_code": "keyword", "applicant_region": "keyword", "action": "keyword", "step_name": "keyword", "funnel_type": "keyword", "quick_identifier": "keyword", "label": "keyword", "source": "keyword", "name": "keyword", "request_id": "keyword", "status": "keyword", "method": "keyword", "user_agent": "keyword", "actor": "keyword", "url": "keyword", "code": "keyword", "value": "keyword", "reason": "keyword", "error": "keyword", "error_code": "long", "error_message": "keyword", "grpc_error": {"msg": "keyword", "service": "keyword", "endpoint": "keyword", "aws_request_id": "keyword"}, "app_version": "keyword", "platform": "keyword", "migration_name": "keyword", "queue_name": "keyword", "status_code": "long", "request_path": "keyword", "request_method": "keyword", "event_name": "keyword", "requirement": "keyword", "downstream_service_cluster": "keyword", "partner_id": "keyword"}}}, "version": "6335096f25a442278167cf019ad9be7a15724286", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "53c1fcd0802a76d61805f43de43b8c21b4dda361", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "onebox": {"name": "onebox", "description": "onebox allows a collection of services to run on a single node", "repository": "git@github.com:lyft/onebox.git", "slack": "#devx-bots", "team_email": "devx-team@lyft.com", "pagerduty_escalation_policy": "DevX", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "credentials_legacy": false, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "agent", "command": "./entrypoint.sh", "network": "host", "mounts": ["/var/run/docker_sockets", "/srv/control", "/etc/onebox", "/etc/cloudenv"]}, {"name": "leasecron", "command": "python -m cron --minutely python -m lease", "network": "host", "mounts": ["/srv/control", "/etc/cloudenv", "/etc/onebox", "/var/run/docker_sockets"]}, {"name": "cleancron", "command": "python -m cron --hourly ./auto_clean.sh", "network": "host", "mounts": ["/srv/control", "/etc/onebox", "/etc/cloudenv", "/var/run/docker_sockets"]}, {"name": "warmupnode", "command": "python -m cron --daily ./warmup_node.sh", "network": "host", "mounts": ["/srv/control", "/etc/onebox", "/etc/cloudenv", "/var/run/docker_sockets"]}, {"name": "env", "command": "./setup_onebox_env.sh", "once": true, "mounts": ["/usr/local/sbin", "/etc/profile.d/"]}, {"name": "assign", "command": "python -m assign", "mounts": ["/var/run/docker_sockets", "/srv/control", "/etc/onebox", "/etc/cloudenv"]}, {"name": "quickassign", "command": "python -m quickassign", "mounts": ["/etc/cloudenv"]}, {"name": "restart", "command": "./restart", "mounts": ["/var/run/docker_sockets", "/srv/control"]}], "groups": [{"name": "small", "members": ["dnsmasq.dev", "onebox.agent", "onebox.leasecron", "onebox.cleancron", "onebox.warmupnode", "onebox.env"]}], "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "bake_time_minutes": 0}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "bake_time_minutes": 0}, {"name": "production", "legacy": false}], "version": "3751576e2f65269a56d54c124e9224bb52241430", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "onlinelearning": {"name": "onlinelearning", "description": "A service used for tuning parameters online.", "repository": "git@github.com:lyft/onlinelearning.git", "slack": "#onlinelearning", "team_email": "marketplace-labs-eng@lyft.com", "pagerduty_escalation_policy": "onlinelearning", "image_type": "service", "service_tier": 1, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "onlinelearning.legacy"]}, {"name": "service_group", "members": ["onlinelearning.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "onlinelearning.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "onlinelearning.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "onlinelearning.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "onlinelearning"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}}}}, "version": "c22a12380a954b43c9cfd64e2bb249c7499bb68b", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "opentripplanner": {"name": "opentripplanner", "description": "The OpenTripPlanner multimodal journey planning system", "service_tier": 1, "repository": "git@github.com:lyft/opentripplanner-private.git", "slack": "#transit-deploy", "team_email": "transit-tech@lyft.com", "pagerduty_escalation_policy": "Transit", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 420, "exports": [{"name": "http", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "opentripplanner.legacy"]}, {"name": "integration", "members": ["offerings.dev", "publicapi.dev", "opentripplanner.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "opentripplanner.dev"}], "deploy": [{"name": "staging", "legacy": true, "automatic": false, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1b", "legacy": true, "availability_zone": "us-east-1b"}, {"name": "production", "legacy": true}]], "languages": ["java"], "image_type": "service", "python": {"mypy": {"python_versions": ["3.6"]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "opentripplanner"}, {"name": "opentripplannerbatch"}], "common_settings": {"internal_hosts": {"offerings": null, "publicapi": null, "dispatchavailability": null}, "external_hosts": {"dynamodb_iad": null}, "local_service": {"circuit_breakers": {"default": {"max_connections": 200}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}}}}, "logging": {"opentripplannerbatch": {"fields": {"command": "keyword", "cron_uuid": "keyword", "attempt": "long"}}}, "version": "d4de1e5bec229072f316f283bdb39843853009c3", "images": [{"parent": {"name": "java8", "version": "7ec648d70f5221be9c32f4b30889073683cd11a6", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "7ec648d70f5221be9c32f4b30889073683cd11a6", "sub_image": null, "external": false}}, "opsbase": {"name": "opsbase", "description": "toolset to execute salt based scripts", "repository": "git@github.com:lyft/ops.git:base", "slack": "#base-train", "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "image_type": "tool", "credentials_legacy": false, "python": {"py3k": {"linters": ["modernize", "pylint"], "include": ["pytest_collect.py"]}}, "containers": [{"name": "spin", "command": "sleep infinity"}], "groups": [{"name": "testgroup", "members": ["control.dev", "opsbase.spin"]}], "tests": [{"name": "unit", "type": "execution", "group": "opsbase.testgroup", "container": "opsbase.spin", "command": "/code/ops/base/unit_test_venv py.test -vvv --ignore=/code/ops/base/tests/test_services.py /code/ops/base/tests"}, {"name": "nsqtest", "type": "execution", "group": "opsbase.testgroup", "container": "opsbase.spin", "command": "bash -c \"/srv/nsq2ext/nsq2ext_venv py.test -vvv /code/ops/base/ops/config/states/base/nsq/nsq2ext\""}, {"name": "highstate", "type": "jailed", "command": "salt-call state.show_highstate"}, {"name": "config-syntax", "type": "jailed", "command": "/code/ops/base/tests/test_config_syntax.sh"}, {"name": "shellcheck", "type": "jailed", "command": "bash -c \"/usr/local/bin/salt-call state.sls base.shutdown && cat /code/ops/base/shellcheck_whitelist | xargs shellcheck\""}, {"name": "pylint", "type": "tool", "tool": "pylint.lint"}, {"name": "salt-pylint", "type": "execution", "group": "opsbase.testgroup", "container": "opsbase.spin", "command": "make test_salt_pylint"}], "deploy": [[{"name": "staging", "legacy": true, "bake_time_minutes": 25}], {"name": "canary", "bake_time_minutes": 25, "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1b", "legacy": true, "availability_zone": "us-east-1b"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production-us-east-1e", "legacy": true, "availability_zone": "us-east-1e"}, {"name": "production-us-east-1f", "legacy": true, "availability_zone": "us-east-1f"}], [{"name": "production", "legacy": true}]], "languages": ["javascript", "python"], "version": "3d50e5951ded707bd421f3dbd0862692381e5aba", "images": [{"parent": {"name": "imagebase", "version": "3d05522cd0526907149ca4c05273c28771c398bf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "3d05522cd0526907149ca4c05273c28771c398bf", "sub_image": null, "external": false}}, "opsreview": {"name": "opsreview", "description": "Review PD incidents", "repository": "git@github.com:lyft/opsreview-private.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.dev", "opsreview.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "opsreview.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml", "pylint": "build/flake8.txt"}}, {"name": "integration", "type": "execution", "group": "opsreview.dev", "container": "opsreview.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true}, {"name": "canary", "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "languages": ["javascript", "python"], "image_type": "service", "service_tier": 3, "pagerduty_escalation_policy": "devnull", "team_email": "devnull@lyft.com", "envoy": {"profile": "python", "settings": {"services": [{"name": "opsreview"}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "version": "f252410114edcea41cae421d45d4ed11bde82371", "images": [{"parent": {"name": "opsbase", "version": "89fa8b66419579eaf9b7422dc1c0bf43b005d183", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "89fa8b66419579eaf9b7422dc1c0bf43b005d183", "sub_image": null, "external": false}}, "opstasks": {"name": "opstasks", "description": "Service to track, manage, and dispatch work done by operations staff", "repository": "git@github.com:lyft/opstasks.git", "slack": "#lbs-otech-deploy", "team_email": "lbs-otech-eng@lyft.com", "pagerduty_escalation_policy": "LBS OTech", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libgeos-dev", "libspatialindex-dev", "redis-tools"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev", "redis-tools"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn opstasks.flask_app:app --workers=3 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/opstasks", "limits": {"cpu": 2, "memory": "1024Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "notification_overrides": {"pr_open": {"slack": "#lbs-otech-deploy"}}, "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "regions.dev", "redis.dev", "opstasks.legacy"]}, {"name": "integration", "members": ["fanner.dev", "jobscheduler.dev", "locations.dev", "lastmile.dev", "users.dev", "places.dev", "routes.dev", "usergroups.dev", "opstasks.dev"]}, {"name": "service_group", "members": ["opstasks.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "opstasks.dev"}, {"name": "unit", "type": "jailed", "run_in_pr": true, "run_in_dev": true, "framework": "pytest"}, {"name": "integration", "type": "sharded", "group": "opstasks.integration", "container": "opstasks.legacy", "target": "tests/integration/", "virtualenv": "service_venv", "run_in_pr": true, "run_in_dev": true, "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "opstasks.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 3, "max_size": 5}}}}, {"name": "canary", "member": "opstasks.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "16:00 America/New_York"}, "envoy": {"profile": "python", "settings": {"services": [{"name": "opstasks"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"fleetlocations": null, "jobschedulernormalweb": null, "lastmile": null, "locations": null, "locationsregionsearch": null, "places": null, "regions": null, "routes": null, "tcs": null, "usergroups": null, "users": null}, "redis": {"opstasksmultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}}}}, "logging": {"opstasks": {"fields": {"asset_id": "keyword", "work_service_id": "keyword", "work_order_id": "keyword", "service_status": "keyword", "service_type": "keyword", "external_ops_user_id": "keyword", "ops_source": "keyword", "region_code": "keyword", "rideable_name": "keyword", "task_id": "keyword", "user_id": "keyword", "vehicle_id": "keyword"}}}, "version": "785a7ec9a2d24b58d47292e0d8456f2695ee1a1a", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "opstools": {"name": "opstools", "description": "batch box for ops, wears too many hats", "repository": "git@github.com:lyft/ops.git:opstools", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "opstools.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "opstools.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "slack": "#compute-bots", "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "deploy": [{"name": "production", "legacy": true, "orca": [{"region": "iad"}], "automatic": false}], "languages": ["bash", "python"], "image_type": "service", "service_tier": 3, "python": {"py3k": {"linters": ["modernize", "pylint"]}, "mypy": {"python_versions": ["3.6"]}}, "version": "1c0e9df2a084893694296fb0826d9ae39ff8ab6f", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "orca": {"name": "orca", "description": "toolset to execute orchestration", "repository": "git@github.com:lyft/ops.git:orca", "docs": {"section": "Infrastructure"}, "slack": "#compute-bots", "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "image_type": "tool", "containers": [{"name": "run", "command": "/srv/salt/venv/bin/python -m orca.entrypoint", "network": "host", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "orcatest", "command": "/srv/salt/venv/bin/python -m orca.orcatest", "network": "host"}, {"name": "awsactions", "command": "/srv/salt/venv/bin/python -m orca.awsactions.cli", "network": "host"}], "tests": [{"name": "shellcheck", "type": "tool", "tool": "shellcheck.lint"}, {"name": "unit", "type": "jailed", "command": "/srv/salt/venv/bin/python -m orca.test_unit"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"account_name": "zimride", "region": "iad"}], "automatic": false, "links": [{"text": "Deployment runbook", "url": "https://docs.lyft.net/eng/orca/runbook.html#deploying-orca-changes"}]}, {"name": "production", "legacy": false, "orca": [{"account_name": "zimride", "region": "iad"}, {"account_name": "sandbox", "region": "iad"}, {"account_name": "lyftqubole", "region": "iad"}]}], "languages": ["bash", "python"], "python": {"mypy": {"python_versions": ["3.6"], "exclude": ["modules"]}}, "version": "4a6ac14f94f8cc62dd55e83843b6541a2e5a5af7", "images": [{"parent": {"name": "opsbase", "version": "7ebfcc1cee9da49d956fa666c9bf26a0c1a8ac43", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "7ebfcc1cee9da49d956fa666c9bf26a0c1a8ac43", "sub_image": null, "external": false}}, "osmtaskingmanager": {"name": "osmtaskingmanager", "description": "Task manager to edit Open Street Map for the Map Curation team", "repository": "git@github.com:lyft/osmtaskingmanager.git", "image_type": "service", "service_tier": 3, "slack": "#base-maps-bot", "team_email": "basemap-eng@lyft.com", "pagerduty_escalation_policy": "basemap-service", "languages": ["python", "bash"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "osmtaskingmanager.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "osmtaskingmanager.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "python": {"mypy": {"python_versions": ["3.6"], "exclude": ["ops", "app"]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "osmtaskingmanager"}]}}, "version": "31d9a225e049d7d2e5c48a8db5c1c24c1b30072b", "images": [{"parent": {"name": "opsbase", "version": "be15551ec923d766f35792d16021d265fca9e318", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "be15551ec923d766f35792d16021d265fca9e318", "sub_image": null, "external": false}}, "osscla": {"name": "osscla", "description": "osscla", "image_type": "service", "repository": "git@github.com:lyft/osscla-private.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 30, "exports": [{"name": "api", "port": 80}]}], "groups": [{"name": "dev", "members": ["control.dev", "sqs.server", "dynamodb.server", "osscla.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "osscla.dev"}, {"name": "unit", "type": "execution", "group": "osscla.dev", "container": "osscla.legacy", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt"}}, {"name": "integration", "type": "execution", "group": "osscla.dev", "container": "osscla.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true}], "slack": "#internal-productivity", "team_email": "internal-productivity@lyft.com", "pagerduty_escalation_policy": "Internal Productivity", "languages": ["javascript", "python"], "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "osscla"}]}}, "version": "e236e009f6dbc01ebf35204da7055e053ffb50a3", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "packer": {"name": "packer", "description": "packer", "repository": "git@github.com:lyft/ops.git:packer", "report_ci": true, "image_type": "tool", "credentials_legacy": true, "languages": ["bash", "python"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "run", "command": "/srv/salt/venv/bin/python -m packer.cli"}], "groups": [{"name": "dev", "members": ["control.dev", "packer.run"]}], "tests": [{"name": "startup", "type": "startup", "group": "packer.dev"}], "slack": "#deploys-bots", "pagerduty_escalation_policy": "Provisioning", "team_email": "provisioning-team@lyft.com", "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "version": "79e0b7d37de55cf446703d71d398f9acc6359e6a", "images": [{"parent": {"name": "orca", "version": "55cc4fd1a3ebaa26e320b037fb0f5e613a1c4d90", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "orca", "version": "55cc4fd1a3ebaa26e320b037fb0f5e613a1c4d90", "sub_image": null, "external": false}}, "pagerdutygen": {"name": "pagerdutygen", "description": "pagerdutygen", "repository": "git@github.com:lyft/pagerdutygen.git", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "team_email": "observability-team@lyft.com", "pagerduty_escalation_policy": "Observability", "image_type": "tool", "languages": ["bash", "python"], "deploy": [{"name": "staging", "legacy": false, "orca": []}, {"name": "production", "legacy": false, "orca": []}], "version": "6ffd164fd785d1438c8ab8571448e887d2f9e125", "images": [{"parent": {"name": "imagebase", "version": "ad9e30baab8d6d07ef902d05a3bb20de5e18fd68", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "ad9e30baab8d6d07ef902d05a3bb20de5e18fd68", "sub_image": null, "external": false}}, "paidacqtools": {"name": "paidacqtools", "description": "A collection of tools for the use of paid marketing team", "repository": "git@github.com:lyft/paidacqtools.git", "image_type": "service", "service_tier": 3, "slack": "#symphony-eng", "team_email": "symphony-team@lyft.com", "pagerduty_escalation_policy": "AdTech", "languages": ["python", "bash"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "paidacqtools.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "paidacqtools.dev"}, {"name": "unit", "type": "restricted", "group": "paidacqtools.dev", "container": "paidacqtools.legacy", "command": "make test_unit", "whitelist": ["googleusercontent.com.", "paidacqtools-legacy.dev.lyft.net.", "paidacqtools-development-iad-onebox.lyft.net."]}], "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "python": {"mypy": {"python_versions": ["3.6"], "exclude": ["ops"]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "paidacqtools"}, {"name": "paidacqtoolsbatch"}]}}, "version": "c856559a909377e5616cea6f7b981827be5c407d", "images": [{"parent": {"name": "opsbase", "version": "9191990c87a4e8bf34e85ea1f3cf854effe4edb7", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "9191990c87a4e8bf34e85ea1f3cf854effe4edb7", "sub_image": null, "external": false}}, "passengerqueues": {"name": "passengerqueues", "description": "Allowing passengers to pair with drivers at designated pickup queues in real time", "repository": "git@github.com:lyft/passengerqueues.git", "image_type": "service", "service_tier": 0, "slack": "#venues", "team_email": "venues-eng@lyft.com", "pagerduty_escalation_policy": "Airports and Venues", "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:81f3a62b033eff99133851326875cb87f53b6de1", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/passengerqueues", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "3Gi"}}, {"name": "expiresessions", "command": "dumb-init -- service_venv python manage.py expire_sessions --write=true", "workdir": "/code/passengerqueues", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}], "facets": [{"name": "main", "member": "passengerqueues.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 2, "max_size": 3}, "production": {"min_size": 3, "max_size": 10}}}}, {"name": "canary", "member": "passengerqueues.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "expiresessions", "member": "passengerqueues.expiresessions", "type": "cron", "schedule": "*/30 * * * *"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "idl.server", "passengerqueues.legacy"]}, {"name": "integration", "members": ["lyfttestlib.ride", "passengerqueues.dev", "tcs.dev", "venues.dev", "predispatchjobs.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "passengerqueues.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "float_dependencies": "H 5-22 * * *", "type": "sharded", "group": "passengerqueues.integration", "container": "passengerqueues.legacy", "target": "tests/integration", "virtualenv": "service_venv", "reports": {"junit": "build/integration.xml"}}], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "links": [{"text": "Runbook", "url": "https://github.com/lyft/passengerqueues/blob/master/docs/runbook.md"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "expiresessions"}]}, {"name": "canary", "legacy": false, "links": [{"text": "Runbook", "url": "https://github.com/lyft/passengerqueues/blob/master/docs/runbook.md"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "links": [{"text": "Runbook", "url": "https://github.com/lyft/passengerqueues/blob/master/docs/runbook.md"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "expiresessions"}]}], "pulldeploy_components": {"data": ["translationdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "passengerqueues"}], "common_settings": {"internal_hosts": {"dispatch": null, "etaproxy": null, "jobschedulernormalweb": null, "jobschedulerbulkweb": null, "locations": null, "messaging": null, "passengerqueues": null, "predispatchjobs": null, "ratelimit": null, "rides": null, "ridesapi": null, "supply": null, "tcs": null, "users": null, "venues": null}, "external_hosts": {"dynamodb_iad": null}}}}, "version": "a452fe681c1d1438959c192678e1c9db35f98aa0", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "81f3a62b033eff99133851326875cb87f53b6de1", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "passengerxpapi": {"name": "passengerxpapi", "description": "APIs to provider better passenger experience", "repository": "git@github.com:lyft/passengerxpapi.git", "image_type": "service", "service_tier": 2, "slack": "#cancel-policy-server", "team_email": "cancel-xp-eng@lyft.com", "pagerduty_escalation_policy": "CancelsExperience", "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libgeos-dev", "libspatialindex-dev", "openssl", "libssl-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev", "openssl", "libssl-dev"]}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/passengerxpapi", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "3Gi"}}], "facets": [{"name": "main", "member": "passengerxpapi.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 6}}}}, {"name": "canary", "member": "passengerxpapi.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "passengerxpapi.legacy"]}, {"name": "integration", "members": ["account.dev", "control.dev", "dispatch.integration", "dispatchavailability.dev", "drivermode.dev", "green.dev", "locations.dev", "passengerxpapi.dev", "places.dev", "regions.dev", "rides.dev", "ridesapi.dev", "ridelocations.dev", "suggesteddestinations.dev", "users.dev", "viewport.dev", "wallet.dev", "walletapi.dev", "idl.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "passengerxpapi.dev"}, {"name": "format", "type": "jailed", "command": "make test_format"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "passengerxpapi.integration", "container": "passengerxpapi.legacy", "command": "make test_integration", "reports": {"junit": "build/integration.xml"}}], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "pulldeploy_components": {"data": ["translationdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "passengerxpapi"}], "common_settings": {"internal_hosts": {"jobschedulerbulkweb": null, "passengerxpapi": null, "places": null, "ridelocations": null, "suggesteddestinations": null, "tcs": null, "users": null, "venues": null}, "external_hosts": {"firehose_iad": null}}}}, "links": [{"text": "Runbook", "url": "https://github.com/lyft/passengerxpapi/tree/master/docs/runbook.md"}], "version": "7d54f6dbb2378f0b6557d428f930d43f49a847f0", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "paxgrowthinternal": {"name": "paxgrowthinternal", "description": "Frontend for Pax Growth Internal Tools", "repository": "git@github.com:lyft/paxgrowthinternal.git", "credentials": false, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"internal_service": true, "frontend_service": true}, "slack": "#memberships", "pagerduty_escalation_policy": "Memberships", "team_email": "rider-memberships-eng@lyft.com", "groups": [{"name": "dev", "members": ["control.dev", "paxgrowthinternal.legacy", "tom.dev", "coupons.dev"]}, {"name": "integration", "members": ["account.dev", "accountfrontend.dev", "coupons.dev", "paxgrowthinternal.dev", "couponsfrontend.dev", "green.dev", "ledger.dev", "regions.dev", "switchboard.dev", "tom.dev", "users.dev", "www2.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "paxgrowthinternal.dev"}, {"name": "unit", "type": "execution", "group": "paxgrowthinternal.dev", "container": "paxgrowthinternal.legacy", "command": "make test_coverage"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "deploy": [{"name": "staging", "automatic": true, "legacy": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}], {"legacy": true, "name": "production"}], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "paxgrowthinternal"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"tom": null}}}}, "languages": ["javascript"], "version": "1626ba1ef50ac2e431e37c349fa04cc2ad565832", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "paxqueuestools": {"name": "paxqueuestools", "description": "A backend service for passengerqueues and related tools", "repository": "git@github.com:lyft/paxqueuestools.git", "slack": "#pickup-services", "team_email": "pickup-team@lyft.com", "pagerduty_escalation_policy": "Pickup XP Server", "image_type": "service", "service_tier": 2, "languages": ["python", "bash"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:36518650f40787ad43faa9717259a01880989029"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:64b9eee6a3a28f977b42d3a263db43009607e69d", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/paxqueuestools", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "paxqueuestools.legacy"]}, {"name": "service_group", "members": ["paxqueuestools.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "paxqueuestools.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "paxqueuestools.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "paxqueuestools.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "paxqueuestools"}], "common_settings": {"internal_hosts": {"messaging": null, "ratelimit": null}, "external_hosts": {"dynamodb_iad": null}}}}, "version": "d40ab4a597f01b3e3164be60e22a0032fc036f44", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "64b9eee6a3a28f977b42d3a263db43009607e69d", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "paxrewardsview": {"name": "paxrewardsview", "description": "Exposes data to the client to allow us to track progress towards passenger goals.", "repository": "git@github.com:lyft/paxrewardsview.git", "image_type": "service", "service_tier": 2, "slack": "#rider-incentives-dev", "team_email": "rider-incentives-eng@lyft.com", "pagerduty_escalation_policy": "Rider Incentives", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "paxrewardsview.legacy", "redis.dev"]}, {"name": "integration", "members": ["account.dev", "goldentests.integration", "dryft.legacy", "dsfeatures.dev", "flexibleincentives.dev", "ratings.dev", "taskqueue.service", "users.dev", "usereligibilities.dev", "paxrewardsview.dev", "regions.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "paxrewardsview.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}, {"name": "integration", "type": "execution", "group": "paxrewardsview.integration", "container": "paxrewardsview.legacy", "command": "make test_integration", "autotrigger": false, "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1b", "legacy": true, "availability_zone": "us-east-1b"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production-us-east-1f", "legacy": true, "availability_zone": "us-east-1f"}], {"name": "production", "legacy": true, "links": [{"text": "Runbook", "url": "https://github.com/lyft/paxrewardsview/blob/master/docs/runbook.md"}]}], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "paxrewardsview"}, {"name": "paxrewardsviewbatch"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "internal_hosts": {"coupons": null, "distributedlock": null, "dsfeatures": null, "dsfeatureswrites": null, "engagementplatform": null, "enterprise": null, "flexibleincentives": null, "ledger": null, "jobschedulerbulkweb": null, "ratelimit": null, "regions": null, "pricing": null, "rides": null, "taskqueuebulkweb": null, "tcs": null, "tripsapi": null, "usereligibilities": null, "userpreferences": null, "users": null}, "redis_clusters": {"paxrewardsview": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "logging": {"paxrewardsview": {"fields": {"user_id": "keyword", "goal_id": "long", "reward_id": "long", "weekly_count": "long", "error_code": "long", "message": "keyword", "client_type": "keyword", "endpoint": "keyword", "major_app_version": "keyword", "is_internal": "boolean", "error_class": "keyword", "os": "keyword", "coupon_code": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "call_signature": "keyword", "exc_type": "keyword", "code": "long", "error": "keyword", "error_description": "keyword", "client_id": "keyword", "attempted_goal_id": "long", "campaign_id": "keyword", "campaign_instance_id": "keyword"}}, "paxrewardsviewbatch": {"fields": {"service_instance": "keyword", "expected_credit_cost": "float", "r28_upper": "long", "expected_incremental_bookings": "float", "s3_prefix": "keyword", "query_ds": "date", "r28_lower": "long"}}}, "version": "be2736813dee52216af1f11cc6ea738c0576f46b", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "paxsavings": {"name": "paxsavings", "description": "paxsavings", "repository": "git@github.com:lyft/paxsavings.git", "slack": "#mxp-server-pod", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "paxsavings.service", "dynamodb.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "paxsavings.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "coverage_files", "type": "jailed", "run_in_pr": false, "command": "make coverage_files", "reports": {"cobertura": "build/coverage.xml"}}], "pagerduty_escalation_policy": "Marketplace XP", "team_email": "marketplace-xp@lyft.com", "service_tier": 2, "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "paxsavings"}], "common_settings": {"internal_hosts": {"offerings": null}, "external_hosts": {"dynamodb_iad": null}}}}, "logging": {"paxsavings": {"fields": {"path": "keyword", "method": "keyword", "host": "keyword", "service": "keyword", "signal": "keyword", "err": "keyword", "ride_id": "keyword", "rideId": "keyword", "requestId": "keyword", "passengerId": "keyword", "offer_id": "keyword", "offerId": "keyword", "passenger_id": "keyword"}}}, "version": "8ff398917827accc5f6a7bc6e09b4cbadd116fad", "images": [{"parent": {"name": "opsbase", "version": "89fa8b66419579eaf9b7422dc1c0bf43b005d183", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "89fa8b66419579eaf9b7422dc1c0bf43b005d183", "sub_image": null, "external": false}}, "payapi": {"name": "payapi", "description": "An API layer for managing/retrieving payments information from Green and Ledger", "slack": "#pay-platform", "service_tier": 1, "repository": "git@github.com:lyft/payapi.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/payapi", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "envoy.server", "payapi.legacy"]}, {"name": "integration", "members": ["abacus.dev", "cancels.dev", "payapi.dev", "green.dev", "ledger.dev", "account.dev", "ats.qa_approve", "auth.dev", "fare.dev", "flaggedtrips.dev", "jobscheduler.dev", "locations.dev", "publicapi.dev", "regions.dev", "switchboard.dev", "supply.dev", "users.dev", "usereligibilities.dev", "usergroups.dev", "coupons.dev", "wallet.dev", "viewport.dev", "routes.dev", "etaproxy.dev", "dispatch.integration", "tcs.dev", "txnhub.dev", "userpreferences.dev", "karma.dev", "elasticsearch6.server"]}, {"name": "integration_fixtures", "members": ["envoy.dev", "ledger.dev", "payapi.dev", "routes.dev", "jobscheduler.dev"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"cobertura": "build/unit_coverage.xml", "junit": "build/unittests.xml"}}, {"name": "integration", "type": "execution", "group": "payapi.integration", "container": "payapi.legacy", "command": "make test_integration", "float_dependencies": "H 5-22 * * *", "autotrigger": false, "reports": {"junit": "build/integrationtests.xml", "cobertura": "build/integration_coverage.xml"}}, {"name": "coverage", "type": "jailed", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration_fixtures", "type": "execution", "group": "payapi.integration_fixtures", "container": "payapi.legacy", "command": "make integration_fixtures", "reports": {"junit": "build/integrationtests.xml"}}], "team_email": "pay-platform-eng@lists.lyft.com", "pagerduty_escalation_policy": "Pay Platform", "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], {"legacy": false, "name": "production", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata", "marketplaceconfig"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "packages": ["libgeos-dev", "libspatialindex-dev"], "buildargs": ["PY3_MIGRATE=true"]}}]}}, "facets": [{"name": "main", "member": "payapi.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 10}, "production": {"min_size": 2, "max_size": 250, "criteria": {"cpu_target": 40}}}}}, {"name": "canary", "member": "payapi.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1, "criteria": {"cpu_target": 40}}}], "languages": ["python"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "payapi"}], "common_settings": {"internal_hosts": {"abacus": {"tls_enabled": true}, "account": {"tls_enabled": true}, "ats": {"tls_enabled": true}, "billingaggregator": null, "cancels": null, "coupons": null, "enterprise": null, "fare": null, "green": {"tls_enabled": true}, "grow": null, "jobschedulermigrationweb": null, "jobschedulernormalweb": null, "jobschedulerbulkweb": null, "karma": null, "ledger": {"tls_enabled": true}, "locations": null, "locationsmapmatch": null, "logistics": null, "messaging": null, "payapi": null, "publicapi": null, "ratelimit": null, "regions": null, "rentals": {"tls_enabled": true}, "ridehistory": null, "rides": null, "ridesapi": null, "routes": null, "supply": null, "supplyrecords": {"tls_enabled": true}, "tcs": null, "trips": null, "tripsapi": null, "txnhub": null, "users": {"tls_enabled": true}, "usereligibilities": null, "usergroups": null, "userpreferences": null, "userprivacyrights": null, "wallet": {"tls_enabled": true}, "walletapi": {"tls_enabled": true}}, "external_hosts": {"firehose_iad": null}}}}, "notification_overrides": {"deploy": {"slack": "#pay-platform-deploys", "environments": ["production", "staging"]}, "pr_open": {"slack": "#pay-platform"}}, "version": "bb875f6bd81624d68004eae493ffe68954838426", "images": [{"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "paydisputes": {"name": "paydisputes", "description": "Organizes, packages, and distributes information surrounding payment disputes such as chargebacks and retrievals", "repository": "git@github.com:lyft/paydisputes.git", "image_type": "service", "service_tier": 2, "slack": "#paydisputes", "team_email": "dev-fraud@lyft.com", "pagerduty_escalation_policy": "Fraud Platform", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "paydisputes.legacy", "rides.dev", "users.dev", "lyfttestlib.core", "lyfttestlib.ride", "chromeheadless.service", "tcs.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "paydisputes.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "execution", "group": "paydisputes.dev", "container": "paydisputes.legacy", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "paydisputes.dev", "container": "paydisputes.legacy", "command": "make test_integration"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "paydisputes"}], "common_settings": {"internal_hosts": {"green": null, "users": null, "chromeheadless": null, "rides": null, "tcs": null}, "external_hosts": {"dynamodb_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "0ab594f65351462a146cc0a15f7ec81ed00f36ff", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "payfingerprint": {"name": "payfingerprint", "description": "Service that provides a unified credt/debit card entity across payment providers", "repository": "git@github.com:lyft/payfingerprint.git", "image_type": "service", "service_tier": 1, "slack": "#fraudsquad", "team_email": "dev-fraud@lyft.com", "pagerduty_escalation_policy": "Fraud Platform", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "payfingerprint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "payfingerprint.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "virtualenv": "service_venv", "markers": "not unit_legacy"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "container": "payfingerprint.legacy", "group": "payfingerprint.dev", "framework": "pytest", "coverage": false, "targets": ["tests/unit"], "virtualenv": "service_venv", "markers": "unit_legacy"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "payfingerprint"}], "common_settings": {"internal_hosts": {"payfingerprint": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"payfingerprint": {"fields": {"chargeaccount_cc_fingerprint": "keyword", "chargeaccount_id": "keyword", "event_name": "keyword", "__metadata__": {"fanner_time": "keyword", "logged_at": "keyword", "aic_time": "keyword"}, "reporter_ip_address": "keyword", "occurred_at": "keyword", "user_lyft_id": "keyword", "event_id": "keyword", "reporter_hostname": "keyword", "http_request_id": "keyword", "source_pipeline": "keyword", "status": "keyword", "chargeaccount_method": "keyword", "modified_by_charge_account_updater": "keyword", "is_simulated_ride": "keyword", "chargeaccount_default": "keyword", "chargeaccount_cc_expired": "keyword", "chargeaccount_failed": "keyword", "chargeaccount_cc_last_4": "keyword", "chargeaccount_provider": "keyword", "chargeaccount_cc_expiration_date": "keyword", "chargeaccount_commuter_network": "keyword", "chargeaccount_is_default_business": "keyword", "chargeaccount_cc_type": "keyword", "chargeaccount_fingerprint": "keyword", "chargeaccount_cc_billing_type": "keyword", "chargeaccount_cc_card_id": "keyword", "chargeaccount_cc_iin": "keyword", "lyft_cc_id": "keyword", "parent": "keyword", "expiration_date": "keyword", "chargeaccount_ids": "keyword", "last_4": "keyword", "case": "keyword", "type": "keyword", "billing_type": "keyword", "iin": "keyword", "chargeaccount_cc_issuer": "keyword", "chargeaccount_cc_brand": "keyword", "chargeaccount_cc_funding": "keyword", "brand": "keyword", "funding": "keyword", "country": "keyword", "chargeaccount_cc_source": "keyword", "source": "keyword", "chargeaccount_created_at": "keyword", "description": "keyword", "provider_fingerprints": {"stripe": "keyword", "first_data": "keyword", "braintree": "keyword"}, "chargeaccount_cc_country": "keyword", "chargeaccount_cc_description": "keyword", "chargeaccount_cc_valid_cvc": "keyword", "chargeaccount_cc_valid_address_zip": "keyword", "chargeaccount_customer_id": "keyword", "address_zip": "keyword", "chargeaccount_cc_address_zip": "keyword", "chargeaccount_cc_product_code": "keyword", "merged_cc_ids": "keyword", "chargeaccount_cc_original_product_code": "keyword", "chargeaccount_labeltype": "keyword", "chargeaccount_label": "keyword", "message": "keyword", "lyft_decline_code": "keyword", "card_error_code": "keyword", "card_decline_code": "keyword", "attempt_num": "long", "sleep_time": "float", "exception": {"class": "keyword", "message": "keyword"}, "event_status": "keyword", "chargeaccount_cc_address_line1": "keyword", "chargeaccount_cc_valid_address_line1": "keyword", "chargeaccount_cc_address_state": "keyword", "chargeaccount_cc_address_city": "keyword", "chargeaccount_cc_address_line2": "keyword"}}}, "version": "000938ef2926e528f90e59c02d015f05d4fc9619", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "paymentgateway": {"name": "paymentgateway", "description": "Service to support payment transactions between Lyft and external payment processors", "repository": "git@github.com:lyft/paymentgateway.git", "image_type": "service", "service_tier": 1, "slack": "#pay-processing", "team_email": "pay-processing-eng@lists.lyft.com", "pagerduty_escalation_policy": "Pay Processing", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dbproxypaymentgateway.dev", "idl.server", "paymentgateway.legacy", "redis.dev"]}, {"name": "integration", "members": ["account.integration", "control.dev", "dbproxypaymentgateway.dev", "jobscheduler.dev", "paymentgateway.legacy", "redis.dev", "tcs.dev", "wallet.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "paymentgateway.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "paymentgateway.integration", "container": "paymentgateway.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}], {"legacy": true, "name": "production"}], "notification_overrides": {"deploy": {"slack": "#pay-proc-deploys", "environments": ["production", "staging"]}, "pr_open": {"slack": "#pay-processing"}, "test_failure": {"slack": "#pay-proc-deploys", "environments": ["production"]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "paymentgateway"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"dbproxypaymentgateway": null, "green": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "paymentgateway": null, "tcs": null, "txnhub": null, "txnhubworkers": null, "users": null, "walletapi": null, "wallet": null}, "external_hosts": {"stripe": null}}, "override_settings": [{"services": [{"name": "paymentgateway"}], "settings": {"redis": {"paymentgatewaymultiredis": {"port": 6380, "op_timeout_ms": 1250}}}}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"paymentgateway": {"fields": {"transaction_id": "keyword", "participant_id": "keyword", "action": "keyword", "arguments": "keyword", "charge_account_id": "keyword", "provider": "keyword", "parent_transaction_id": "keyword", "status": "keyword", "provider_notification_type": "keyword", "provider_notification_id": "keyword", "downstream_reference_id": "keyword", "charge_id": "keyword", "reason": "keyword", "payout_id": "keyword"}}}, "version": "afe168d13eb4ca2d85dcebba316c0c3aeb0125ee", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "paymonitor": {"name": "paymonitor", "description": "Eventual consistency checker for payments transactions", "repository": "git@github.com:lyft/paymonitor.git", "image_type": "service", "service_tier": 2, "slack": "#billing-platform", "team_email": "billing-platform@lyft.com", "pagerduty_escalation_policy": "Payments - Billing Platform", "languages": ["python", "bash"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/paymonitor", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "paymonitor.legacy"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "startup", "type": "startup", "group": "paymonitor.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "facets": [{"name": "main", "member": "paymonitor.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "paymonitor.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}]}]], "python": {"mypy": {"python_versions": ["3.7"], "include": ["app"], "exclude": ["tests", "ops", "loadtest"]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:32cbb00e867909feba916f53c84c05d17bad9c3f", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:4242eab259283a64a1365cc459b3a7d0cdb0c7fb", "sub_image": "k8s"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "paymonitor"}], "common_settings": {"internal_hosts": {"jobschedulerbulkweb": null, "jobschedulernormalweb": null, "jobschedulerurgentweb": null, "ledger": null, "rides": null}}}}, "version": "e3c811b554cd1bb3342b00c7aba864fe0e193191", "images": [{"parent": {"name": "opsbase", "version": "3f0e393d0ca259ed059ffdf0f4f8e41462512923", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "32cbb00e867909feba916f53c84c05d17bad9c3f", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "4242eab259283a64a1365cc459b3a7d0cdb0c7fb", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "3f0e393d0ca259ed059ffdf0f4f8e41462512923", "sub_image": null, "external": false}}, "paytoolsint": {"name": "paytoolsint", "description": "Frontend service to host all Pay Tools accessed from TOM", "repository": "git@github.com:lyft/paytoolsint.git", "slack": "#pay-frontend", "team_email": "pay-experience-eng@lists.lyft.com", "pagerduty_escalation_policy": "Pay Frontend", "image_type": "service", "service_tier": 2, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "paytoolsint.legacy", "wwwbrochurefe.legacy"]}, {"name": "service_group", "members": ["paytoolsint.legacy"]}], "deploy": [{"name": "staging", "automatic": true, "bake_time_minutes": 1, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "bake_time_minutes": 1, "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "bake_time_minutes": 1, "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "bake_time_minutes": 1, "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "bake_time_minutes": 1, "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "paytoolsint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"green": null, "lastmile": null, "ledger": null, "payapi": null, "tom": null, "privacyaudit": null}}}}, "version": "b38fcb2e0041b7e691f040384e615c088cf18e44", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "personaldatastore": {"name": "personaldatastore", "description": "Service to manage personal data", "repository": "git@github.com:lyft/personaldatastore.git", "slack": "#data-platform-dev", "team_email": "data-platform-security-dev@lyft.com", "pagerduty_escalation_policy": "Data Security", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:36518650f40787ad43faa9717259a01880989029"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/personaldatastore", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "personaldatastore.legacy"]}, {"name": "service_group", "members": ["personaldatastore.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "personaldatastore.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "personaldatastore.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "personaldatastore.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "orca": [{"region": "iad"}], "legacy": true, "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "personaldatastore"}]}}, "version": "25f90504615502dc718768420dd5e63a2048c4ed", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "pickupcomms": {"name": "pickupcomms", "description": "Manage pickup related communications between pax/driver", "repository": "git@github.com:lyft/pickupcomms.git", "image_type": "service", "service_tier": 1, "slack": "#pickup-services", "team_email": "pickup-team@lyft.com", "pagerduty_escalation_policy": "Pickup XP Server", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/pickupcomms", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "3Gi"}}], "facets": [{"name": "main", "member": "pickupcomms.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-pickupcomms-env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 10}}}}, {"name": "canary", "member": "pickupcomms.service", "type": "service", "canary": true, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-pickupcomms-env.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "pickupcomms.legacy"]}, {"name": "integration", "members": ["analyticsingest.dev", "karma.dev", "pickupcomms.dev", "lyfttestlib.ride", "pusher.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "pickupcomms.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "float_dependencies": "H 5-22 * * *", "type": "sharded", "group": "pickupcomms.dev", "container": "pickupcomms.legacy", "target": "tests/integration", "virtualenv": "service_venv", "reports": {"junit": "build/integration.xml"}}], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true, "links": [{"text": "Runbook", "url": "https://github.com/lyft/pickupcomms/blob/master/docs/runbook.md"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "links": [{"text": "Runbook", "url": "https://github.com/lyft/pickupcomms/blob/master/docs/runbook.md"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}], "links": [{"text": "Runbook", "url": "https://github.com/lyft/pickupcomms/blob/master/docs/runbook.md"}]}], "pulldeploy_components": {"data": ["translationdata"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "pickupcomms"}], "common_settings": {"internal_hosts": {"karma": null, "enterprisedispatch": null, "pickupcomms": null, "pusher": null, "rides": null, "tcs": null, "users": null}, "external_hosts": {"dynamodb_iad": null}}}}, "logging": {"pickupcomms": {"fields": {"ride_id": "keyword", "message": "keyword", "os": "keyword", "error_code": "long", "client_type": "keyword", "is_internal": "boolean", "major_app_version": "keyword", "error_class": "keyword", "endpoint": "keyword", "client_id": "keyword", "user_id": "keyword", "driver_id": "keyword", "response": "keyword", "grpc_code": "keyword"}}}, "version": "3428d499b838b4c29101fb9a0c1f4dcb41aa2396", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "pickupoptimizer": {"name": "pickupoptimizer", "description": "pickupoptimizer", "repository": "git@github.com:lyft/pickupoptimizer.git", "slack": "#dispatch-bots", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 120, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "pickupoptimizer.legacy"]}, {"name": "integration", "members": ["account.dev", "analyticsingest.dev", "dispatch.integration", "dispatchavailability.dev", "drivermode.dev", "green.dev", "messaging.dev", "regions.dev", "rides.dev", "ridesapi.dev", "spots.dev", "users.dev", "venues.dev", "viewport.dev", "wallet.dev", "walletapi.dev", "pickupoptimizer.legacy"]}, {"name": "qa", "members": ["account.dev", "analyticsingest.dev", "dispatch.integration", "dispatchavailability.dev", "drivermode.dev", "etaproxy.dev", "fanner.dev", "green.dev", "messaging.dev", "regions.dev", "rides.dev", "ridesapi.dev", "spots.dev", "users.dev", "venues.integration", "viewport.dev", "wallet.dev", "walletapi.dev", "pickupoptimizer.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "pickupoptimizer.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml"}}, {"name": "integration", "type": "sharded", "group": "pickupoptimizer.dev", "container": "pickupoptimizer.legacy", "target": "tests/integration", "virtualenv": "service_venv", "reports": {"junit": "build/integration.xml"}}, {"name": "format", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "team_email": "dispatch@lyft.com", "pagerduty_escalation_policy": "Dispatch", "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "pulldeploy_components": {"data": ["marketplaceconfig", "regioncfgdata", "translationdata"]}, "languages": ["python"], "image_type": "service", "service_tier": 2, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit", "packages": ["g++"]}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "pickupoptimizer"}, {"name": "pickupoptimizer2019data"}, {"name": "pickupoptimizerbatch"}], "common_settings": {"internal_hosts": {"etaproxy": null, "tcs": null, "regions": null, "rides": null, "venues": null, "ridelocations": null, "spots": null, "matchingstate": null}, "external_hosts": {"firehose_iad": null, "google_maps_https": null, "kinesis_iad": null}}}}, "logging": {"pickupoptimizer": {"fields": {"num_dropoff_stops": "long", "num_pickup_stops": "long", "request_data": {"lat_lng": "keyword"}, "ride_id": "keyword", "status_code": "long", "user_id": "keyword", "prediction": {"duration": "integer", "mu_log_duration": "float", "var_log_duration": "float", "distance": "integer", "mu_log_distance": "float", "var_log_distance": "float", "route": "keyword", "method": "keyword", "segment_id": "long"}, "response_id": "long", "method": "keyword"}}}, "version": "9cdaa6ee84423f416e99bb08b70a6138965a11e9", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "piprot": {"name": "piprot", "description": "Track out of date Python dependencies", "repository": "git@github.com:lyft/containers.git:piprot", "slack": "#dev-environment", "team_email": "devx-team@lyft.com", "containers": [{"name": "run", "command": "python3.6 -m piprot.piprot", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "spin", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["dnsmasq.server", "piprot.spin"]}], "tests": [{"name": "shellcheck", "type": "linter", "autotrigger": false}, {"name": "unit", "type": "jailed", "command": "pytest --junitxml=.build/unit.xml tests/unit", "reports": {"jnit": ".build/unit.xml"}}, {"name": "integration", "type": "execution", "group": "piprot.dev", "container": "piprot.spin", "command": "pytest --junitxml=.build/integration.xml tests/integration", "reports": {"jnit": ".build/integration.xml"}}], "python": {"mypy": {"python_versions": ["3.6"]}}, "deploy": [{"name": "development", "legacy": false}, {"name": "staging", "legacy": false, "automatic": true}, {"name": "canary", "legacy": false}, {"name": "production", "legacy": false}], "languages": ["python", "bash"], "image_type": "tool", "version": "65e678ac27798913f3710e80f6c79456b787d5df", "images": [{"parent": {"name": "python", "version": "5c21bac15486851eece786886253b41bda5f14d8", "external": false}, "sub_image": null}], "parent": {"name": "python", "version": "5c21bac15486851eece786886253b41bda5f14d8", "external": false}}, "piptools": {"name": "piptools", "description": "piptools container for generating requirements", "repository": "git@github.com:lyft/piptools.git", "slack": "#devx-bots", "team_email": "devx-team@lyft.com", "image_type": "tool", "languages": ["bash", "python"], "docs": {"section": "Infrastructure"}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "compile", "command": "/code/piptools/compile.sh", "network": "host"}, {"name": "check", "command": "/code/piptools/check.sh", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "validate", "command": "/code/piptools/lint.sh validate", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "requirementslint", "command": "/code/piptools/lint.sh requirementslint", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "compileserver", "command": "python -m lyftpiptools.server"}], "groups": [{"name": "dev", "members": ["control.minimal", "piptools.compileserver"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests/unit"}, {"name": "startup", "type": "startup", "group": "piptools.dev"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true}, {"name": "production", "legacy": false, "automatic": true}], "version": "863431fb6f0dad522421e2d31a3f4fa23b540826", "images": [{"parent": {"name": "python", "version": "1af4dede3343b86204a78134646e08798cab04de", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "python", "version": "1af4dede3343b86204a78134646e08798cab04de", "sub_image": null, "external": false}}, "places": {"name": "places", "description": "Gateway for third-party geocoding services", "repository": "git@github.com:lyft/places.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "places.legacy", "redis.dev", "routingengine.dev"]}, {"name": "integration", "members": ["places.dev", "ridelocations.dev", "redis.dev", "regions.dev", "users.dev", "auth.dev", "account.dev"]}], "pulldeploy_components": {"data": ["marketplaceconfig", "regioncfgdata"]}, "configsets": ["atlantisdata"], "tests": [{"name": "startup", "type": "startup", "group": "places.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "env TEST_TAGS=\"not unit_legacy\" make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "places.integration", "container": "places.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "unit_legacy", "type": "execution", "command": "env make test_unit", "container": "places.legacy", "group": "places.dev", "reports": {"junit": "build/unit_legacy.xml", "cobertura": "build/coverage_legacy.xml"}}], "slack": "#places", "pagerduty_escalation_policy": "Places", "team_email": "spots-places-team@lyft.com", "service_tier": 0, "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "20:00 America/New_York"}, "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}], {"legacy": true, "name": "production"}], "languages": ["python"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "places"}], "common_settings": {"internal_hosts": {"jobschedulernormalweb": null, "jobschedulerbulkweb": null, "places": null, "ratelimit": null, "regions": null, "ridelocations": null, "routingengine": null, "routingenginena20190710": null, "suggesteddestinations": null, "tcs": null}, "external_hosts": {"firehose_iad": null, "geonames": null, "google_maps_https": null, "here_geocoder_https": null, "here_places_https": null, "here_reverse_geocoder_https": null}, "redis_clusters": {"placesec": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 1250, "outlier_detection": {"consecutive_5xx": 25, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}}, "authorization": {"permissions": {"any": {"paths": ["/*"]}}, "bindings": {"accidents": ["any"], "accidentsint": ["any"], "ats": ["any"], "avingest": ["any"], "avingestbackfill": ["any"], "avingestindex": ["any"], "avingestmissions": ["any"], "compi": ["any"], "compibatch": ["any"], "dispatchforesight": ["any"], "dispatchglobalmatchingworkers": ["any"], "dispatchmatchingworkerssmall": ["any"], "dlcfeatures": ["any"], "emergencyassist": ["any"], "enterprisebatch": ["any"], "enterpriseint": ["any"], "envoy": ["any"], "etaproxy": ["any"], "etl": ["any"], "sharedairflowworker": ["any"], "etltars": ["any"], "family": ["any"], "fare": ["any"], "gmapsmobile": ["any"], "graphql": ["any"], "grow": ["any"], "karma": ["any"], "karmaupdate": ["any"], "lastmile": ["any"], "lbsint": ["any"], "leadplatformint": ["any"], "localeventsint": ["any"], "loyaltypartnerships": ["any"], "messaging": ["any"], "opstasks": ["any"], "passengerxpapi": ["any"], "pickupoptimizer": ["any"], "places": ["any"], "ridelocations": ["any"], "ridepasses": ["any"], "ridesapi": ["any"], "robocop": ["any"], "suggesteddestinations": ["any"], "suggesteddestinationskcl": ["any"], "taskqueuenormal": ["any"], "tom": ["any"], "transit": ["any"], "transitbatch": ["any"], "viewport": ["any"], "wwwbrochurefe": ["any"]}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"places": {"fields": {"data": {"lat": "float", "lng": "float"}, "endpoint": "keyword", "error": {"client_id": "keyword", "client_type": "keyword", "endpoint": "keyword", "error_class": "keyword", "error_code": "long", "is_internal": "boolean", "major_app_version": "keyword", "message": {"error": "keyword", "error_description": "keyword"}, "os": "keyword", "user_id": "keyword"}, "exception": "keyword", "headers": {"X-Lyft-User-Id": "keyword"}, "lat": "float", "lng": "float", "missing_fields": "keyword", "nsq_num": "long", "nsq_topic": "keyword", "provider": "keyword", "query": "keyword", "query_len": "long", "request_url": "keyword", "response_text": "keyword", "response_url": "keyword", "result": {"bbox": "keyword", "category": "keyword", "categoryTitle": "keyword", "completion": "keyword", "distance": "long", "highlightedTitle": "keyword", "highlightedVicinity": "keyword", "href": "keyword", "id": "keyword", "position": "keyword", "resultType": "keyword", "title": "keyword", "type": "keyword", "vicinity": "keyword"}, "status_code": "long", "use_osm": "boolean"}}}, "version": "b6ffcc9e2623b08b0148fddddcbe511634d5d016", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "placessearch": {"name": "placessearch", "description": "Gateway for search on lyft places/pois.", "repository": "git@github.com:lyft/placessearch.git", "slack": "#places", "team_email": "spots-places-eng@lyft.com", "pagerduty_escalation_policy": "Places", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:7217bb50d71d786ef58610aafb6403846a9e518b"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/placessearch", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "elasticsearch6.server", "placessearch.legacy", "placesworkflows.spin"]}, {"name": "service_group", "members": ["placessearch.legacy"]}, {"name": "integration", "members": ["placessearch.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "placessearch.dev"}, {"name": "unit", "type": "jailed", "command": "service_venv pytest --cov=app --junitxml=build/unit.xml --cov-report=xml tests/unit", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "placessearch.integration", "command": "service_venv python3 -m pytest --junit-xml=build/int.xml tests/integration", "container": "placessearch.legacy", "reports": {"junit": "build/int.xml"}}], "facets": [{"name": "main", "member": "placessearch.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls"], "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "placessearch.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "20:00 America/New_York"}, "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "placessearch"}]}}, "version": "8ff4fcbc036d70b9a84753770a299cd0d09678c0", "images": [{"parent": {"name": "opsbase", "version": "7217bb50d71d786ef58610aafb6403846a9e518b", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "7217bb50d71d786ef58610aafb6403846a9e518b", "sub_image": null, "external": false}}, "placesworkflows": {"name": "placesworkflows", "description": "flyte workflow for places data management", "repository": "git@github.com:lyft/placesworkflows.git", "slack": "#places", "team_email": "spots-places-eng@lyft.com", "pagerduty_escalation_policy": "Places", "image_type": "flyteworkflow", "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "elasticsearch6.server", "placesworkflows.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "placesworkflows.dev", "container": "placesworkflows.spin", "command": "make register_for_pr"}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "20:00 America/New_York"}, "deploy": [[{"name": "development", "automatic": true, "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_development"}], [{"name": "staging", "automatic": true, "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_staging"}], [{"name": "production", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_production"}]], "credentials": true, "version": "05544c57a7abfa5f8cf7cd9acedec07073e9a572", "images": [{"parent": {"name": "flytesparkbase", "version": "ea8b691fef3dc56fef3b71d3c6c54a28116b1635", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "flytesparkbase", "version": "ea8b691fef3dc56fef3b71d3c6c54a28116b1635", "sub_image": null, "external": false}}, "platformfeecalculator": {"name": "platformfeecalculator", "description": "A service to calculate platform fees for Enterprise products to charge organizations", "repository": "git@github.com:lyft/platformfeecalculator.git", "image_type": "service", "service_tier": 1, "slack": "#enterprise-deploy", "team_email": "enterprise-platform@lyft.com", "pagerduty_escalation_policy": "Enterprise Commerce", "languages": ["python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "1Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "platformfeecalculator.legacy", "dynamodb.server"]}, {"name": "integration", "members": ["abacus.dev", "coupons.dev", "enterprise.dev", "green.dev", "ledger.dev", "platformfeecalculator.dev", "rides.dev", "rideprograms.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "platformfeecalculator.dev"}, {"name": "test", "type": "execution", "group": "platformfeecalculator.integration", "container": "platformfeecalculator.legacy", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "platformfeecalculator.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 3}}}}, {"name": "canary", "member": "platformfeecalculator.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": true, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}]], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:b53cef4fa319d93186ad696836fe2985a4b6381d", "sub_image": "k8s"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "platformfeecalculator"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 400}}}, "internal_hosts": {"abacus": null, "coupons": null, "enterprise": null, "green": null, "jobschedulernormalweb": null, "ledger": null, "rideprograms": null, "rides": null}, "external_hosts": {"dynamodb_iad": null}}}}, "logging": {"platformfeecalculator": {"fields": {"organization_id": "keyword", "ancillary_id": "keyword", "pf_plan_id": "keyword", "activate_date": "date", "fee_type": "keyword", "usage_type": "keyword", "sfdc_name_id": "keyword", "ride_invoice_id": "keyword", "ride_order_id": "keyword", "platform_fee_order_id": "keyword", "region": "keyword", "currency": "keyword", "ca_id": "keyword", "idempotent_timestamp": "long", "bad_response_status_code": "long", "bad_response_content": "keyword", "bad_response_service": "keyword", "bad_response_url": "keyword", "bad_response_method": "keyword"}}}, "version": "d18453438c0dbbe7f9e0376efdc7df84d4bf61df", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "b53cef4fa319d93186ad696836fe2985a4b6381d", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "podie": {"name": "podie", "description": "RPC interface to DBproxy", "repository": "git@github.com:lyft/podie.git", "image_type": "library", "languages": ["python"], "credentials_legacy": false, "docs": {"autogen_env": "python3.6", "autogen_modules": ["podie"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "docs", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["podie.docs", "idl.service", "idl.server"]}], "slack": "#stash", "team_email": "datastore-team@lyft.com", "tests": [{"name": "test", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "e6aa332f4e29b135978aae23714c666dc5cfd305", "images": [{"parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}}, "postgresql": {"name": "postgresql", "description": "postgresql database server", "repository": "git@github.com:lyft/containers.git:postgresql", "containers": [{"name": "server", "provision": "/code/containers/postgresql/provision.sh", "command": "/code/containers/postgresql/entrypoint.sh", "start_phase": "parallel_storage", "start_time": 240, "snapshot": {"dump": "/code/containers/postgresql/snapshot.sh", "restore": "/code/containers/postgresql/restore.sh"}, "exports": [{"name": "postgresql", "port": 5432}]}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server"]}], "upstream_tests": {"on_commit": true, "test_set": {"airflowinfra": ["startup"], "analyticsingest": ["integration"], "analyticsquerybench": ["startup"], "analyticstagger": ["integration"], "ats": ["e2e", "legacyunit"], "auroratailer": ["integration"], "bizmetrics": ["startup"], "cancelmitigation": ["integration"], "compdashboard": ["unit"], "dataplatformadmin": ["unit", "integration"], "datatagger": ["startup"], "demand": ["unit", "integration"], "enterprisedispatch": ["unit", "integration", "e2e"], "etl": ["unit", "integration", "e2e"], "financial": ["unit", "integration_sharded"], "financialadmin": ["unit"], "grow": ["unit", "integration", "e2e"], "guardian": ["unit", "integration_sharded"], "incidentassistant": ["startup"], "legacyapi": ["integration"], "lyfttestlib": ["integration"], "modelconfig": ["integration"], "modeldiscovery": ["unit"], "opsreview": ["integration"], "osmtaskingmanager": ["startup"], "pythonlyftdatavalidation": ["integration"], "pythonlyftprocessorid": ["integration"], "regulatoryintegrations": ["unit", "integration"], "rentals": ["integration", "goldenpath"], "streamingest": ["integration"], "supportcontact": ["unit", "integration"], "switchboard": ["unit", "integration"], "tcseditor": ["unit", "integration"], "tcsresults": ["unit", "integration"], "tensorgym": ["unit", "integration"], "tom": ["unitfe", "integration"], "trafirealtimeagents": ["integration"], "trafischedulesapi": ["start"], "trafistorageapi": ["start"], "transit": ["integration"], "txnhub": ["unit", "integration"], "vulndbmirror": ["startup"]}}, "tests": [{"name": "start", "type": "startup", "group": "postgresql.dev"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false}, {"name": "canary", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false}], "languages": ["bash"], "image_type": "tool", "slack": "#ds-aws-pod", "team_email": "ds-aws@lyft.com", "version": "a5ac90b3e860732d74c7ab434043381879cc496b", "images": [{"parent": {"name": "imagebase", "version": "3c20e510035d026521544782122dd07302df0028", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "3c20e510035d026521544782122dd07302df0028", "sub_image": null, "external": false}}, "postgresql10": {"name": "postgresql10", "description": "postgresql 10 database server for local development", "repository": "git@github.com:lyft/postgresql10.git", "containers": [{"name": "server", "provision": "/code/postgresql10/provision.sh", "command": "/code/postgresql10/entrypoint.sh", "start_phase": "parallel_storage", "start_time": 120, "snapshot": {"dump": "/code/postgresql10/snapshot.sh", "restore": "/code/postgresql10/restore.sh"}, "exports": [{"name": "postgresql", "port": 5432}]}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql10.server"]}], "tests": [{"name": "start", "type": "startup", "group": "postgresql10.dev"}], "deploy": [{"name": "production", "legacy": false}], "languages": ["bash"], "image_type": "tool", "slack": "#deploys-bots", "team_email": "deploys-team@lyft.com", "version": "30f44026b332130597318a901c64ced70362bd1c", "images": [{"parent": {"name": "bionicbase", "version": "5538c34a74b8563f41b4197ae4cc502741aa76f1", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "5538c34a74b8563f41b4197ae4cc502741aa76f1", "sub_image": null, "external": false}}, "ppzconfig": {"name": "ppzconfig", "description": "Manages configuration of Personal Power Zones", "repository": "git@github.com:lyft/ppzconfig.git", "slack": "#de-positioning-deploy", "team_email": "driver-positioning-core@lyft.com", "pagerduty_escalation_policy": "Driver Positioning", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "pulldeploy_components": {"data": ["regioncfgdata"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:67939e7ef4bbc8a9d3ba388292d96609188a03d6", "packages": ["libkrb5-dev"], "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/ppzconfig", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "ppzconfig.legacy"]}, {"name": "service_group", "members": ["ppzconfig.legacy"]}, {"name": "integration", "members": ["adtechworkflows.dev", "ppzconfig.dev", "tcs.dev", "tcseditor.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "ppzconfig.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "ppzconfig.integration", "container": "ppzconfig.legacy", "command": "make test_integration"}], "facets": [{"name": "main", "member": "ppzconfig.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 60}}}}, {"name": "canary", "member": "ppzconfig.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "orca": [{"region": "iad"}], "legacy": true, "kubernetes": {"enabled": false}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true, "kubernetes": {"enabled": false}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true, "kubernetes": {"enabled": false}, "targets": [{"facet": "main"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "ppzconfig"}, {"name": "ppzconfigbatch"}], "common_settings": {"internal_hosts": {"adtechworkflows": null, "jobschedulerbulkweb": null, "mailer": null, "tcs": null, "tcseditor": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null}}}}, "logging": {"ppzconfig": {"fields": {"driver_region": "keyword", "driver_id": "keyword", "experiment_name": "keyword", "ppz_launch_time_ms": "keyword", "orchestrator_version": "keyword", "entity_type": "keyword", "entity": "keyword", "traceback": "keyword", "attempt_num": "long", "exception": "keyword", "failed_record": "keyword", "error": "keyword"}}, "ppzconfigbatch": {"fields": {"region": "keyword", "task_name": "keyword", "driver_group_name": "keyword", "usergroup_name": "keyword", "group_name": "keyword", "drivers_list_s3_path": "keyword", "experiment_publish_time_ms": "keyword", "is_instant_full_rollout": "boolean", "experiment_name": "keyword"}}}, "version": "18809277b784dec087d3bd994362fbbf9d268dac", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "67939e7ef4bbc8a9d3ba388292d96609188a03d6", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "predictionlabels": {"name": "predictionlabels", "description": "Common location for defining prediction labels and providing rule/model metrics", "repository": "git@github.com:lyft/predictionlabels.git", "slack": "#fraudsquad", "team_email": "dev-fraud@lyft.com", "pagerduty_escalation_policy": "Fraud Platform", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/predictionlabels", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "predictionlabels.legacy"]}, {"name": "service_group", "members": ["predictionlabels.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "predictionlabels.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "predictionlabels.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "predictionlabels.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "predictionlabels"}], "common_settings": {"internal_hosts": {"dsfeatures": null}}}}, "version": "b972c703bac6d637e72a30b0c4dac585bdd20156", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "predispatchjobs": {"name": "predispatchjobs", "description": "State management and source of truth for pre-dispatch requests", "repository": "git@github.com:lyft/predispatchjobs.git", "image_type": "service", "service_tier": 1, "slack": "#core-dispatch", "team_email": "core-dispatch@lyft.com", "pagerduty_escalation_policy": "Dispatch", "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit", "packages": ["g++"]}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/predispatchjobs", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 30}}], "facets": [{"name": "main", "member": "predispatchjobs.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 200}}}}, {"name": "canary", "member": "predispatchjobs.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "idl.server", "predispatchjobs.legacy"]}, {"name": "integration", "members": ["account.dev", "dispatch.legacy", "matchingexecution.dev", "fanner.dev", "etaproxy.dev", "green.dev", "locations.dev", "jobscheduler.dev", "predispatchjobs.dev", "viewport.dev", "wallet.dev", "walletapi.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "predispatchjobs.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "command": "make test_integration", "container": "predispatchjobs.legacy", "group": "predispatchjobs.integration"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "links": [{"text": "Runbook", "url": "https://github.com/lyft/predispatchjobs/blob/master/docs/runbook.md"}], "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "predispatchjobs"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"account": null, "dispatch": null, "dispatchforesight": null, "etaproxy": null, "jobschedulernormalweb": null, "locations": null, "matchingexecution": null, "predispatchjobs": null, "regions": null, "routes": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}}}}, "pulldeploy_components": {"data": ["marketplaceconfig", "translationdata", "regioncfgdata"]}, "logging": {"predispatchjobs": {"fields": {"os": "keyword", "endpoint": "keyword", "major_app_version": "keyword", "is_internal": "boolean", "error_code": "long", "message": "keyword", "client_type": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "route_name": "keyword", "impl_method": "keyword", "region": "keyword", "new_status": "keyword", "old_status": "keyword", "supply_id": "keyword", "pre_dispatch_id": "keyword"}}}, "version": "864b429d0b6c7c85608c4523d0bbc51e7ff3fcc9", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "py37", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "prestoinfra": {"name": "prestoinfra", "description": "Presto Dedicated Cluster", "repository": "git@github.com:lyft/prestoinfra.git", "image_type": "service", "languages": ["bash", "java", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 120, "exports": [{"name": "coordinator", "port": 8081}]}], "groups": [{"name": "dev", "members": ["control.dev", "hivemetastore.dev", "prestoinfra.legacy", "postgresql.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "prestoinfra.dev"}, {"name": "integration", "type": "execution", "group": "prestoinfra.dev", "container": "prestoinfra.legacy", "command": "mvn -B test failsafe:integration-test failsafe:verify", "reports": {"failsafe-summary": "target/site/failsafe-report.html"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#presto-dev-bot", "team_email": "presto-dev@lyft.com", "pagerduty_escalation_policy": "Data Infra Interactive", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "bake_time_minutes": 2}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "prestoinfra"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8081"}, "health_check_endpoint": "/v1/status"}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"prestoinfrasch0coordinator": {"fields": {"attempt_num": "long", "exception": "keyword", "traceback": "keyword", "failed_record": "keyword"}}, "prestoinfraadhoc2coordinator": {"fields": {"attempt_num": "long", "traceback": "keyword", "exception": "keyword", "failed_record": "keyword"}}, "prestoinfrafraudcoordinator": {"fields": {"exception": "keyword", "traceback": "keyword", "attempt_num": "long", "failed_record": "keyword"}}, "prestoinfranextcoordinator": {"fields": {"traceback": "keyword", "exception": "keyword", "attempt_num": "long", "failed_record": "keyword"}}, "prestoinfraadhoc3coordinator": {"fields": {"traceback": "keyword", "attempt_num": "long", "exception": "keyword", "failed_record": "keyword"}}, "prestoinfraadhoc0coordinator": {"fields": {"traceback": "keyword", "exception": "keyword", "attempt_num": "long", "failed_record": "keyword"}}, "prestoinfralvault0coordinator": {"fields": {"attempt_num": "long", "exception": "keyword", "traceback": "keyword", "failed_record": "keyword"}}, "prestoinfralvault1coordinator": {"fields": {"attempt_num": "long", "exception": "keyword", "traceback": "keyword", "failed_record": "keyword"}}, "prestoinfracvault0coordinator": {"fields": {"attempt_num": "long", "exception": "keyword", "traceback": "keyword", "failed_record": "keyword"}}, "prestoinfracvault1coordinator": {"fields": {"attempt_num": "long", "exception": "keyword", "traceback": "keyword", "failed_record": "keyword"}}, "prestoinfralbs0coordinator": {"fields": {"attempt_num": "long", "exception": "keyword", "traceback": "keyword", "failed_record": "keyword"}}, "prestoinfralbs1coordinator": {"fields": {"attempt_num": "long", "exception": "keyword", "traceback": "keyword", "failed_record": "keyword"}}}, "version": "435ba02a4913039b1d16ac279923943896f13396", "images": [{"parent": {"name": "java11", "version": "a8e44aa952f728554175d7640a3f444923e7c88c", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "java11", "version": "a8e44aa952f728554175d7640a3f444923e7c88c", "sub_image": null, "external": false}}, "prestoproxy": {"name": "prestoproxy", "description": "Presto Proxy Service", "repository": "git@github.com:lyft/prestoproxy.git", "image_type": "service", "languages": ["java"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 120, "exports": [{"name": "requestrouter", "port": 8080}, {"name": "api_ui", "port": 8090}, {"name": "admin", "port": 8091}]}], "groups": [{"name": "dev", "members": ["control.dev", "mysql.dev", "prestoinfra.dev", "prestoproxy.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "prestoproxy.dev", "autotrigger": false}, {"name": "integration", "type": "execution", "group": "prestoproxy.dev", "container": "prestoproxy.legacy", "command": "mvn -B test failsafe:integration-test failsafe:verify", "reports": {"failsafe-summary": "target/site/failsafe-report.html"}}], "slack": "#presto-dev-bot", "team_email": "presto-dev@lyft.com", "pagerduty_escalation_policy": "Data Infra Interactive", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "prestoproxy"}, {"name": "prestoproxyui"}], "common_settings": {}, "override_settings": [{"services": [{"name": "prestoproxy"}], "settings": {"local_service": {"hosts_url": "http://127.0.0.1:8080"}, "health_check_endpoint": "/gateway"}}]}}, "version": "aac26fe1aca12c8bcc709214e7c76d3bf378e6e6", "images": [{"parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}}, "pricecommander": {"name": "pricecommander", "repository": "git@github.com:lyft/pricecommander.git", "description": "pricecommander", "service_tier": 2, "team_email": "pricing-xp@lyft.com", "pagerduty_escalation_policy": "Pricing Experience", "slack": "#pricing-experience", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2igocli:117a4e318a5047db256d090dcfdee8ee6c76189c", "sub_image": "k8s", "packages": ["postgresql-client-10"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- pricecommander", "workdir": "/code/pricecommander", "limits": {"cpu": 1, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "pricecommander.legacy", "idl.server", "postgresql.server", "regions.dev"]}, {"name": "integration", "members": ["regions.dev", "pricecommander.legacy", "postgresql.server"]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "tests": [{"name": "startup", "type": "startup", "group": "pricecommander.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "pricecommander.dev", "container": "pricecommander.legacy", "command": "make integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "pricecommander.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "pricecommander.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "pricecommander"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "internal_hosts": {"regions": null, "regionsadmin": null}}}}, "version": "4c465fe9646e48d90e18f2221f29563802c7d86c", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "117a4e318a5047db256d090dcfdee8ee6c76189c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "pricecommanderint": {"name": "pricecommanderint", "description": "A frontend hosting UIs to manage changes on price levers, such as rate cards.", "repository": "git@github.com:lyft/pricecommanderint.git", "slack": "#pricing-xp-public", "notification_overrides": {"deploy": {"slack": "#pricing-xp-bots"}, "deploy_failure": {"slack": "#pricing-xp-bots"}, "test_failure": {"slack": "#pricing-xp-bots"}, "master_failure": {"slack": "#pricing-xp-bots"}, "pr_merge": {"slack": "#pricing-xp-bots"}, "behind_notifications": {"slack": "#pricing-xp-bots"}}, "team_email": "pricing-xp@lyft.com", "pagerduty_escalation_policy": "Pricing Experience", "image_type": "service", "service_tier": 2, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "pricecommanderint.legacy", "pricecommander.legacy"]}, {"name": "service_group", "members": ["pricecommanderint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "pricecommanderint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "autotrigger": false}, {"name": "lint", "type": "jailed", "command": "make test_lint", "autotrigger": false}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "pricecommanderint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null, "privacyaudit": null, "pricecommander": null, "pricecommanderint": null}}}}, "version": "09f6fe6e50094be8fd5b7c9e51f1ff1dcae5ade1", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "priceoptimizer": {"name": "priceoptimizer", "description": "Api that returns optimal price parameters for use by Fare service", "repository": "git@github.com:lyft/priceoptimizer.git", "image_type": "service", "service_tier": 0, "team_email": "planned-pricing@lyft.com", "pagerduty_escalation_policy": "Planned Pricing", "languages": ["python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 --reuse-port -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/priceoptimizer", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "6Gi"}}, {"name": "worker", "command": "dumb-init -- service_venv python -m manage job_worker -j normal", "workdir": "/code/priceoptimizer", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "6Gi"}}, {"name": "updatedeltanrpr", "command": "dumb-init -- service_venv python manage.py update_delta_nrpr", "workdir": "/code/priceoptimizer", "sub_image": "k8s"}], "facets": [{"name": "priceoptimizer", "member": "priceoptimizer.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 10}, "environment": {"staging": {"min_size": 1, "max_size": 5}, "production": {"min_size": 2, "max_size": 50, "criteria": {"cpu_target": 15}}}}}, {"name": "priceoptimizerbulk", "member": "priceoptimizerbulk.service", "type": "service", "envoy_service": "priceoptimizerbulk", "autoscaling": {"criteria": {"cpu_target": 10}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 12, "criteria": {"cpu_target": 20}}}}}, {"name": "priceoptimizermodelexecution", "member": "priceoptimizermodelexecution.service", "type": "service", "envoy_service": "priceoptimizermodelexecution", "autoscaling": {"criteria": {"cpu_target": 10}, "environment": {"staging": {"min_size": 1, "max_size": 5}, "production": {"min_size": 1, "max_size": 40, "criteria": {"cpu_target": 25}}}}}, {"name": "priceoptimizerworker", "member": "priceoptimizerworker.worker", "type": "worker", "envoy_service": "priceoptimizerworker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 2}}}}, {"name": "canary", "member": "priceoptimizer.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 15}, "min_size": 1, "max_size": 1}}, {"name": "cronnrpr", "member": "priceoptimizer.updatedeltanrpr", "type": "cron", "schedule": "0 4 * * *"}], "facet_groups": [{"name": "priceoptimizerasgs", "members": ["priceoptimizer", "priceoptimizerbulk", "priceoptimizermodelexecution", "priceoptimizerworker"]}, {"name": "jobs", "members": ["cronnrpr"]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "configsets": ["atlantisdata"], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "priceoptimizer.legacy", "sqs.server"]}, {"name": "integration", "members": ["priceoptimizer.dev", "modelexec.dev", "dsfeatures.dev", "regions.dev", "jobscheduler.dev", "modelconfig.dev", "kibana.dev", "mailer.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "priceoptimizer.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "coverage": true}, {"name": "integration", "type": "execution", "group": "priceoptimizer.integration", "container": "priceoptimizer.legacy", "target": "tests/integration", "command": "make test_integration", "virtualenv": "service_venv", "float_dependencies": "30 14,23 * * *", "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#pricing-pisco", "slack_deploy_notification_environments": ["canary", "production"], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": ["core-staging-0", "core-staging-2", "core-staging-3"]}}, "targets": [{"facet_group": "priceoptimizerasgs"}], "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": ["core-prod-0", "core-prod-2", "core-prod-3"]}}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "availability_zone": "us-east-1a", "targets": [{"facet_group": "priceoptimizerasgs"}]}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "availability_zone": "us-east-1d", "targets": [{"facet_group": "priceoptimizerasgs"}]}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": ["core-prod-0", "core-prod-2", "core-prod-3"]}}, "targets": [{"facet_group": "priceoptimizerasgs"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "priceoptimizer"}, {"name": "priceoptimizerworker"}, {"name": "priceoptimizerbulk"}, {"name": "priceoptimizerbatch"}, {"name": "priceoptimizermodelexecution"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"mailer": null, "dsfeatures": null, "modelexecpricing": null, "modelbuilderadmin": null, "helium": null, "modelconfig": null, "priceoptimizer": null, "regions": null, "regionsadmin": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "tcs": null, "tcseditor": null}, "external_hosts": {"dynamodb_iad": null, "sqs_iad": null, "firehose_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["openssl", "libssl-dev", "pkg-config", "libxmlsec1-dev", "libgeos-c1", "libspatialindex-c3", "awscli"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s", "packages": ["awscli"]}}]}}, "logging": {"priceoptimizer": {"fields": {"flyte_id": "keyword", "model_version": "keyword", "ride_type": "keyword", "dest_lat": "float", "request_epoch_seconds": "long", "origin_lat": "float", "dest_lng": "float", "origin_lng": "float", "origin_region": "keyword", "min_base_fare_cents": "long", "rate_card_cents_per_mile": "long", "prime_time_multiplier": "float", "should_log": "boolean", "passenger_id": "keyword", "rate_card_cents_per_minute": "long", "courier_route_valid": "boolean", "trip_duration_seconds": "long", "tolls_cents": "long", "upfront_fare_cents": "long", "base_fare_cents": "long", "distance_miles": "float", "flat_cost_cents": "long", "net_ratio_tax_cents": "long", "ratio_tax_rate": "float", "pick_up_charge_cents": "long", "flat_revenue_cents": "long", "model_run_id": "keyword", "standard_fare_adjustment_cents": "long", "debug_price": "boolean", "model_version_override": "keyword", "flyte_id_override": "keyword", "region": "keyword", "fee_for_second_passenger_cents": "long", "courier_discount_cents": "long", "current_timestamp": "long", "exception_class": "keyword", "is_factual": "boolean", "should_emit_analytics_event": "boolean", "http_id": "keyword", "should_stat": "boolean", "version": "keyword", "model": "keyword", "estimated_standard_upfront_fare_cents": "long", "delta_from_standard_baseline_fare_cents": "long", "features": {"dest_geohash_lng": "float", "origin_geohash_lng": "float", "origin_geohash_lat": "float", "hour_of_day": "long", "day_of_week": "long", "dest_geohash_lat": "float", "second_of_week_local": "long", "dest_lat": "float", "dest_lng": "float", "second_of_day_local": "long", "origin_lng": "float", "origin_lat": "float"}, "requests": "keyword", "errors": {"upfront_fare_cents": "keyword"}, "errors_str": "keyword", "feature_api_enabled": "boolean", "experiment": "keyword", "start_time_epoch": "keyword", "schedule_status": "keyword", "deploy_flyte_id": "keyword", "attempt_num": "long", "failed_record_count": "long", "retired_models": "keyword", "created_at": "long", "feature_sync_flyte_id": "keyword", "traceback": "keyword", "feature_sync_status": "keyword", "feature_group": "keyword", "feature_name": "keyword", "feature_version": "long", "grpc_code": "keyword", "exception": "keyword", "failed_record": "keyword", "model_name": "keyword"}}, "priceoptimizerbulk": {"fields": {"exception_class": "keyword", "requests": "keyword", "origin_region": "keyword", "flyte_id": "keyword", "model_version": "keyword", "current_timestamp": "long", "exception_code": "long"}}, "priceoptimizermodelexecution": {"fields": {"exception_class": "keyword", "requests": "keyword", "origin_region": "keyword", "flyte_id": "keyword", "model_version": "keyword", "current_timestamp": "long", "exception_code": "long"}}, "priceoptimizerworker": {"fields": {"exception_class": "keyword", "version": "keyword", "model": "keyword", "message_id": "keyword", "features": {"dest_geohash_lat": "float", "origin_geohash_lng": "float", "hour_of_day": "long", "dest_geohash_lng": "float", "origin_geohash_lat": "float", "day_of_week": "long", "dest_lng": "float", "line_blackout": "float", "dest_lat": "float", "second_of_week_local": "long", "standard_exp_delta_pct": "float", "origin_lat": "float", "origin_lng": "float"}, "body": "keyword", "created_at": "long", "ttl_minutes": "long", "job_id": "keyword", "expires_at": "date", "job_name": "keyword", "feature_sync_flyte_id": "keyword", "job_method_args": {"flyte_ids": "keyword", "user": "keyword", "courier_theta_multiplier": "float", "courier_ics_multiplier": "float", "std_theta": "float", "shadow_price_sync_flyte_id": "keyword", "flyte_id": "keyword"}, "job_expire_args": {"user": "keyword", "flyte_ids": "keyword", "flyte_id": "keyword", "shadow_price_sync_flyte_id": "keyword"}, "flyte_id": "keyword", "origin_region": "keyword", "model_version": "keyword", "model_name": "keyword", "queue_url": "keyword", "error": "keyword", "ride_type": "keyword", "shadow_price_sync_flyte_id": "keyword", "requests": "keyword"}}}, "version": "d44194e017fc0faea5a0c6edace7c87b537c60d2", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "priceoptimizerconfigdata": {"name": "priceoptimizerconfigdata", "description": "Runtime configuration data for priceoptimizerconfigdata", "repository": "git@github.com:lyft/priceoptimizerconfigdata.git", "image_type": "data", "service_tier": 2, "slack": "#pricing-pisco", "team_email": "planned-pricing@lyft.com", "pagerduty_escalation_policy": "Planned Pricing", "languages": ["bash", "python"], "builder": {"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, "docs": {"disable": true}, "credentials": false, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/priceoptimizerconfigdata"]}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "9f98e125c85e8d22e300bd3d9996e2cd1e746835", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "priceoptimizerlib": {"name": "priceoptimizerlib", "description": "Models, constants, helper functions repo for the priceoptimizer and priceoptimizeroffline services.", "repository": "git@github.com:lyft/priceoptimizerlib.git", "slack": "#pricing-pisco", "team_email": "planned-pricing@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:66d815e6ba03c9515c0c2273ecca13036015715d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest --cov-report=xml --no-cov-on-fail --cov=priceoptimizerlib/. tests", "reports": {"cobertura": "build/coverage.xml"}}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "02ecbd46dba25b95b93a2e16b05790bf40804b40", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "priceoptimizeroffline": {"name": "priceoptimizeroffline", "description": "Repo for running price optimizer models in Flyte", "repository": "git@github.com:lyft/priceoptimizeroffline.git", "image_type": "service", "service_tier": 2, "slack": "#pricing-pisco", "team_email": "pricing-team@lyft.com", "pagerduty_escalation_policy": "Planned Pricing", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "spin", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["control.dev", "priceoptimizeroffline.spin", "dnsmasq.server"]}, {"name": "integration", "members": ["priceoptimizeroffline.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "priceoptimizeroffline.dev"}, {"name": "unit", "type": "execution", "group": "priceoptimizeroffline.dev", "container": "priceoptimizeroffline.spin", "command": "make test_unit_fast_only", "reports": {"junit": "build/nosetests.xml", "cobertura": "build/coverage.xml"}}, {"name": "workflow_registration", "type": "execution", "group": "priceoptimizeroffline.dev", "container": "priceoptimizeroffline.spin", "command": "make release_development"}, {"name": "slow_unit_tests", "type": "sharded", "group": "priceoptimizeroffline.dev", "container": "priceoptimizeroffline.spin", "target": "tests/unit", "max_subset_retries": 0, "skip_threshold": 999, "max_shard_duration": 5, "virtualenv": "service_venv", "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "development", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "automatic": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "0fd3ba72227d473eca1b7c07ac097fac5dad98da", "images": [{"parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}}, "pricing": {"name": "pricing", "description": "pricing service and worker to compute primetime (PT)", "repository": "git@github.com:lyft/pricing.git", "credentials": true, "containers": [{"name": "service", "sub_image": "k8s", "command": "service_venv gunicorn  pricing.web:app --workers=8 -k gevent --worker-connections=1000 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/pricing", "limits": {"memory": "8Gi", "cpu": 8}}, {"name": "gpuworker", "sub_image": "pricingworkergpu", "command": "service_venv python -m manage pricing_worker_gpu", "limits": {"memory": "16Gi", "cpu": 6, "gpu": 1}}, {"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 120, "exports": [{"name": "api", "port": 8080}], "limits": {"environment": {"development": {"memory": "4.5Gi", "cpu": 1.8}}}}], "facets": [{"name": "main", "member": "pricing.service", "type": "service", "autoscaling": {"environment": {"production": {"min_size": 16, "max_size": 200}, "staging": {"min_size": 1, "max_size": 3}}}}, {"name": "canary", "member": "pricing.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "gpuworker", "member": "pricing.gpuworker", "type": "worker", "envoy_service": "pricingworkergpu", "autoscaling": {"environment": {"production": {"min_size": 6, "max_size": 6}, "staging": {"min_size": 1, "max_size": 1}}}}], "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "pricing.legacy", "idl.server"]}, {"name": "integration", "members": ["account.minimal", "demand.dev", "dsfeatures.dev", "ghostmatching.dev", "pricing.dev", "pricingdata.run", "priceoptimizer.dev", "ratelimit.dev", "users.dev", "tcs.dev"]}], "pulldeploy_components": {"data": ["pricingdata", "regioncfgdata"]}, "configsets": ["demanddata", "atlantisdata"], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "start", "type": "startup", "group": "pricing.dev"}, {"name": "unit", "type": "execution", "group": "pricing.dev", "container": "pricing.legacy", "command": "make test_unit", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml", "pylint": "build/flake8.txt"}}, {"name": "integration", "type": "execution", "group": "pricing.integration", "container": "pricing.legacy", "command": "make test_int", "reports": {"junit": "build/int.xml"}}], "slack": "#pricing-adaptive-dep", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "adaptive-pricing@lyft.com", "pagerduty_escalation_policy": "Adaptive-Pricing", "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}], "automatic": true}, [{"name": "staging", "legacy": true, "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "orca": [{"region": "iad"}]}, {"name": "staging-gpu", "legacy": false, "targets": [{"facet": "gpuworker"}], "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/gpu": "true", "cluster.lyft.net/cluster_name": "core-staging-1"}}}], [{"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}], [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-prod-2-k8s", "legacy": false, "targets": [{"facet": "gpuworker"}], "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/gpu": "true", "cluster.lyft.net/cluster_name": "core-prod-2"}}}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production-prod-4-k8s", "legacy": false, "targets": [{"facet": "gpuworker"}], "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/gpu": "true", "cluster.lyft.net/cluster_name": "core-prod-4"}}}], [{"name": "production", "legacy": true}, {"name": "production-k8s", "targets": [{"facet": "gpuworker"}], "legacy": false, "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/gpu": "true"}}}]], "service_tier": 0, "languages": ["javascript", "python"], "image_type": "service", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.k8s", "sub_image": "pricingworkergpu"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": "k8s", "packages": ["libfreetype6-dev", "libjpeg-dev"]}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "pricing"}, {"name": "pricingworker"}, {"name": "pricingworkergpu"}], "common_settings": {"local_service": {"enable_gzip": true}, "internal_hosts": {"demand": null, "dispatch": null, "dsfeatures": null, "dsfeatureswrites": null, "ghostmatching": null, "locations": null, "locationsregionsearch": null, "priceoptimizer": null, "priceoptimizerbulk": null, "ratelimit": null, "regions": null, "routesapi": null, "shorttermforecaster": null, "supply": null, "supplycontrollercounter": null, "tcs": null, "users": null}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}, "redis_clusters": {"pricing": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400, "outlier_detection": {"consecutive_5xx": 100, "enforcing_success_rate": 0}}}}, "override_settings": [{"services": [{"name": "pricing", "service_instance": "development"}], "settings": {"internal_hosts": {"pricing": null}}}]}}, "logging": {"pricingworker": {"fields": {"pricing_region": "keyword", "method": "keyword", "input_name": "keyword", "region": "keyword", "forecast_count": "long", "unhealthy_percent": "long", "model": "keyword", "version": "keyword", "value_version": "keyword", "model_version": "keyword", "worker_name": "keyword", "compliance_model_version": "keyword", "bonus_model_version": "keyword", "ppz_model_version": "keyword", "is_region_method": "boolean", "hardware": "keyword", "conversion_method": "keyword", "forecast_type": "long", "status": "long", "horizon_min": "keyword", "upm_type": "keyword", "nsq_num": "long", "nsq_topic": "keyword", "prev_param_name": "keyword", "pricing_method": "keyword", "feature": "keyword", "lock_value": "keyword"}}, "pricing": {"fields": {"file_path": "keyword", "pricing_region": "keyword", "region": "keyword", "pt_count": "long", "original_fuzzy_pt_version": "keyword", "final_fuzzy_pt_version": "keyword", "original_pricing_method": "keyword", "pickup_utc_time": "date", "method": "keyword", "driver_id": "keyword", "approved_region": "keyword", "driver_region": "keyword", "user_agent": "keyword", "is_ppz_driver": "boolean", "pricing_method": "keyword", "hardware": "keyword", "is_region_method": "boolean", "driver_user_id": "keyword", "nsq_num": "long", "nsq_topic": "keyword", "route_name": "keyword", "impl_method": "keyword", "controller_method": "keyword", "feature": "keyword"}}}, "version": "c389729447850e7ba2398f3309472bc659cea73a", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": null, "external": false}, "sub_image": "pricingworkergpu"}, {"parent": {"name": "s2ipython3", "version": "8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "pricingdata": {"name": "pricingdata", "description": "Static data for pricing", "repository": "git@github.com:lyft/pricingdata.git", "image_type": "data", "service_tier": 1, "slack": "#pricing", "team_email": "pricing-eng@lyft.com", "pagerduty_escalation_policy": "Pricing", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "run", "command": "/code/pricingdata/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/pricingdata"]}, {"name": "service", "command": "/code/pricingdata/service_entrypoint.sh"}, {"name": "spin", "command": "sleep infinity"}], "groups": [{"name": "test_group", "members": ["control.dev", "pricingdata.spin", "metadataproxy.server"]}, {"name": "dev", "members": ["control.dev", "pricingdata.spin", "metadataproxy.server"]}], "tests": [{"name": "unit", "type": "execution", "run_in_dev": false, "container": "pricingdata.spin", "command": "make test_unit", "group": "pricingdata.test_group"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "automatic": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "automatic": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true, "automatic": true}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "212c49553964cdc6126c0d95cef560ec94940025", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "pricingmodels": {"name": "pricingmodels", "description": "pricing machine learning models", "repository": "git@github.com:lyft/pricing-models.git", "credentials": true, "credentials_legacy": true, "containers": [{"name": "devel", "privileged": true, "command": "/bin/bash -c 'while true; do sleep 3600; done'"}], "groups": [{"name": "dev", "members": ["control.dev", "pricingmodels.devel"]}], "tests": [{"name": "unit", "type": "execution", "group": "pricingmodels.dev", "container": "pricingmodels.devel", "command": "make test_unit", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml", "pylint": "build/flake8.txt"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "automatic": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "slack": "#pricing-adaptive-dep", "team_email": "adaptive-pricing@lyft.com", "pagerduty_escalation_policy": "Adaptive-Pricing", "pulldeploy_components": {"data": ["regioncfgdata"]}, "audit_blacklist": ["envoyAudit"], "languages": ["python"], "image_type": "library", "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipythonlibrary:cd9c1f80771b70a87955d14f24168afcb80a3f5f", "packages": ["gcc", "libfreetype6-dev", "libgeos-c1v5", "libgeos-dev", "libkrb5-dev", "pkg-config", "python-numpy", "python-pandas", "unzip"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}]}}, "version": "3c7ba3d47af548ffb423319e3ee925d28b832313", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "cd9c1f80771b70a87955d14f24168afcb80a3f5f", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "cd9c1f80771b70a87955d14f24168afcb80a3f5f", "sub_image": null, "external": false}}, "pricingnotebookpy2": {"name": "pricingnotebookpy2", "description": "Notebook image for pricing-models running python 2", "repository": "git@github.com:lyft/tensorflowbase.git:pricingnotebookpy2", "image_type": "tool", "slack": "#pricing", "team_email": "datascience@lyft.com", "pagerduty_escalation_policy": "Data Science", "deploy": [{"name": "production", "legacy": false}], "containers": [{"name": "notebook", "command": "/venv/bin/jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password='' --notebook-dir=/mnt/user-home", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}], "lyftlearn": {"notebook_templates": [{"template_name": "pricing-models-py2", "long_description": "- pricing-models>=2.53.4", "short_description": "Pricing-models running Python 2", "owner": "ssubrahmanyam"}]}, "version": "88acd75a6ad89410fcc44da8f2a32b0a8e21d0e3", "images": [{"parent": {"name": "tf110cpupy2xenial", "version": "2bd3861a57872fd30937fc50fb1db420996c3749", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "tf110cpupy2xenial", "version": "2bd3861a57872fd30937fc50fb1db420996c3749", "sub_image": null, "external": false}}, "pricingoffline": {"name": "pricingoffline", "description": "pricing model training", "repository": "git@github.com:lyft/pricingoffline.git", "image_type": "service", "languages": ["python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "routingengine.dev", "pricingoffline.legacy"]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "tests": [{"name": "startup", "type": "startup", "group": "pricingoffline.dev"}, {"name": "workflow_registration", "type": "execution", "group": "pricingoffline.dev", "container": "pricingoffline.legacy", "command": "service_venv mbadmin register-workflows new -n pricingoffline -i development"}, {"name": "unit", "type": "execution", "group": "pricingoffline.dev", "container": "pricingoffline.legacy", "command": "make test_unit", "reports": {"junit": "build/nosetests.xml", "cobertura": "build/coverage.xml", "pylint": "build/flake8.txt"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#pricing-adaptive-dep", "slack_deploy_notification_environments": ["production"], "team_email": "adaptive-pricing@lyft.com", "pagerduty_escalation_policy": "Adaptive-Pricing", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "pricingoffline"}], "common_settings": {"internal_hosts": {"regions": null, "modeldiscovery": null, "etaproxy": null, "routingengine": null}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "e87c4103f86b93df2352ad6753c4b0d9efa228db", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "pricingrealtime": {"name": "pricingrealtime", "description": "pricing streaming service", "repository": "git@github.com:lyft/pricingrealtime.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "pricingrealtime.legacy", "lyftidl.server"]}, {"name": "integration", "members": ["pricingrealtime.dev", "users.dev", "locations.dev", "supply.dev", "demand.dev", "regions.dev", "dispatch.dev", "pricing.dev", "pricingdata.run"]}], "configsets": ["pricingrealtimedata"], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "startup", "type": "startup", "group": "pricingrealtime.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "virtualenv": "service_venv", "markers": "not unit_legacy"}, {"name": "integration", "type": "execution", "group": "pricingrealtime.integration", "container": "pricingrealtime.legacy", "command": "make test_int"}, {"name": "unit_legacy", "type": "execution", "framework": "pytest", "coverage": false, "markers": "unit_legacy", "container": "pricingrealtime.legacy", "group": "pricingrealtime.dev", "targets": ["tests/unit"], "virtualenv": "service_venv"}], "slack": "#pricing-adaptive-dep", "team_email": "adaptive-pricing@lyft.com", "pagerduty_escalation_policy": "Adaptive-Pricing", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "streamingplatform": {"version": "1.4-SNAPSHOT", "beam_version": "2.18.0-lyft20200206", "jobmanagers": [{"name": "pricingrealtime", "production": {"num_taskmanagers": 40, "availability_zone": "us-east-1d", "taskmanager": {"instance_type_override": "m5.4xlarge", "num_slots": 8}}, "staging": {"num_taskmanagers": 2, "availability_zone": "us-east-1d", "taskmanager": {"instance_type_override": "m5.4xlarge", "num_slots": 8}}, "jobs": [{"name": "pricingrealtime", "type": "beam-python", "pipeline": "pricingrealtime.workflow", "description": "To launch the pricingrealtime workflow", "development": {"parallelism": 2}, "staging": {"parallelism": 16}, "production": {"parallelism": 312}}]}]}, "languages": ["bash", "python"], "image_type": "flinkjob", "service_tier": 1, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}]}}, "pulldeploy_components": {"data": ["pricingdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "pricingrealtime"}, {"name": "pricingrealtimetaskmanager"}, {"name": "pricingrealtimejobmanager"}], "common_settings": {"local_service": {"enable_gzip": true}, "internal_hosts": {"users": null, "locations": null, "locationsregionsearch": null, "supply": null, "demand": null, "regions": null, "dispatch": null, "pricing": null}, "external_hosts": {"kinesis_iad": null, "firehose_iad": null}}}}, "logging": {"pricingrealtimetaskmanager": {"fields": {"attempt_num": "long", "failed_record_count": "long", "failed_record": "keyword"}}}, "version": "f96df933d7eb8e0f3e6edc7ca611ba3cdb23f03e", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "pricingrealtimedata": {"name": "pricingrealtimedata", "description": "Runtime configuration data for pricingrealtime", "repository": "git@github.com:lyft/pricingrealtimedata.git", "image_type": "data", "service_tier": 2, "slack": "#pricing-adaptive-dep", "team_email": "adaptive-pricing@lyft.com", "pagerduty_escalation_policy": "devnull", "languages": ["bash", "python"], "builder": {"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, "credentials": false, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/pricingrealtimedata"]}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "fb0c2febee96dcd2751781b7d821bf59fe2446ef", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "primetimewatch": {"name": "primetimewatch", "description": "Realtime primtime watcher for debugging PT models", "repository": "git@github.com:lyft/primetimewatch.git", "slack": "#pricing-adaptive-dep", "team_email": "adaptive-pricing@lyft.com", "pagerduty_escalation_policy": "Adaptive-Pricing", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.f158fc443308053a55bb14f70df28b360689df17", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "primetimewatch.legacy"]}, {"name": "service_group", "members": ["primetimewatch.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "primetimewatch.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "primetimewatch.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 3}}}}, {"name": "canary", "member": "primetimewatch.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "bake_time_minutes": 1}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "bake_time_minutes": 1}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a", "bake_time_minutes": 1}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d", "bake_time_minutes": 1}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "primetimewatch"}], "common_settings": {"redis_clusters": {"primetimewatch": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400, "outlier_detection": {"consecutive_5xx": 100, "enforcing_success_rate": 0}}}}}}, "version": "f659d65978d3efd7daa5004ab5ff3ca8caf24a48", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "f158fc443308053a55bb14f70df28b360689df17", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "privacyalerts": {"name": "privacyalerts", "description": "Service that alerts teams regarding privacy compliance violations", "repository": "git@github.com:lyft/privacyalerts.git", "slack": "#data-privacy", "team_email": "data-privacy@lyft.com", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "pagerduty_escalation_policy": "Data Privacy", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "processviolationscronjob", "command": "dumb-init -- service_venv python manage.py process_violations", "workdir": "/code/privacyalerts", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/privacyalerts", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "privacyalerts.legacy"]}, {"name": "service_group", "members": ["privacyalerts.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "privacyalerts.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "privacyalerts.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "privacyalerts.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}, {"name": "processviolationscronjob", "member": "privacyalerts.processviolationscronjob", "type": "cron", "schedule": "0 10,16 * * 1-5"}], "deploy": [{"name": "staging", "automatic": true, "bake_time_minutes": 2, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "bake_time_minutes": 2, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "bake_time_minutes": 2, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "bake_time_minutes": 2, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "processviolationscronjob"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "privacyalerts"}]}}, "version": "4023b2b5ff3abfa50b864ed4fe9f94af4a6fe343", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "privacyaudit": {"name": "privacyaudit", "description": "Log and audit access to internal tools like TOM for privacy reasons", "repository": "git@github.com:lyft/privacyaudit.git", "slack": "#security-deploys", "team_email": "data-privacy@lyft.com", "pagerduty_escalation_policy": "Data Privacy", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:deb42d25da0e6d5fe565c019883e458b4b31b696"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/privacyaudit", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "privacyaudit.legacy"]}, {"name": "service_group", "members": ["privacyaudit.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "privacyaudit.dev"}, {"name": "unit", "type": "execution", "group": "privacyaudit.dev", "container": "privacyaudit.legacy", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "privacyaudit.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 20}}}}, {"name": "canary", "member": "privacyaudit.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "privacyaudit"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}}}}, "version": "352d1f7206a5ffebe5db7220408357b4145c9881", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "profiling": {"name": "profiling", "description": "SQS management for automated profiling process in creating flamegraphs.", "repository": "git@github.com:lyft/profiling.git", "slack": "#resilience", "notification_overrides": {"deploy": {"slack": "#resilience-bots", "environments": ["production", "staging"]}, "pr_merge": {"slack": "#resilience-bots"}}, "team_email": "resilience-team@lyft.com", "pagerduty_escalation_policy": "Resilience", "image_type": "service", "service_tier": 3, "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s", "sources": [{"name": "ppa-gophers-archive", "source": "deb http://ppa.launchpad.net/gophers/archive/ubuntu bionic main", "keyid": "9AD198E9"}], "packages": ["golang-1.11-go", "graphviz"]}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- service_venv python -m profiling.sqs_worker", "workdir": "/code/profiling", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "7.5Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "sqs.server", "profiling.legacy"]}], "facets": [{"name": "main", "member": "profiling.service", "type": "worker", "envoy_service": "profiling", "autoscaling": {"environment": {"staging": {"min_size": 2, "max_size": 5}, "production": {"min_size": 3, "max_size": 10}}}}, {"name": "canary", "member": "profiling.service", "type": "worker", "envoy_service": "profiling", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "tests": [{"name": "startup", "type": "startup", "group": "profiling.dev"}, {"name": "unit", "type": "jailed", "command": "make test", "reports": {"junit": "build/unit.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"legacy": false, "name": "production", "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "profiling"}], "common_settings": {"external_hosts": {"s3_iad": null, "firehose_iad": null}}}}, "version": "1515473298b698dfca6bffd74e5528b0f430ca4e", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "projecthealth": {"name": "projecthealth", "description": "Service providing an open platform to summarize health and compliance signals of Lyft projects", "repository": "git@github.com:lyft/projecthealth.git", "slack": "#projecthealth", "team_email": "devnull@lyft.com", "pagerduty_escalation_policy": "devnull", "image_type": "service", "service_tier": 3, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "projecthealth.legacy"]}, {"name": "service_group", "members": ["projecthealth.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "projecthealth.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "projecthealth.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "projecthealth.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "projecthealth"}]}}, "version": "bb977c0db2f45433a37d4303e45532a0533341e9", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "protocgenlyftandroid": {"name": "protocgenlyftandroid", "description": "Generate Kotlin/Java files from protos", "repository": "git@github.com:lyft/protoc-gen-lyftandroid.git", "slack": "#client-tooling-prs", "team_email": "client-tooling@lyft.com", "docs": {"disable": true}, "image_type": "tool", "containers": [{"name": "code", "network": "host", "command": "./entrypoint.sh"}, {"name": "gen", "command": "make generate"}, {"name": "test", "command": "make gradle_test"}], "groups": [{"name": "dev", "members": ["protocgenlyftandroid.code"]}], "tests": [{"name": "gradlebuild", "type": "execution", "group": "protocgenlyftandroid.dev", "container": "protocgenlyftandroid.code", "command": "make build_generated"}], "deploy": [{"name": "production", "legacy": true, "role": "protocgenlyftandroid-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}], "version": "0b2dd4a68845428c9bea45547a5c0b6182f05f79", "images": [{"parent": {"name": "ubuntu", "version": "14.04", "sub_image": null, "external": true}, "sub_image": null}], "parent": {"name": "ubuntu", "version": "14.04", "sub_image": null, "external": true}}, "ptmodelexec": {"name": "ptmodelexec", "description": "pricing streaming app based model execution service", "repository": "git@github.com:lyft/ptmodelexec.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "ptmodelexec.legacy", "lyftidl.server", "redis.dev"]}, {"name": "integration", "members": ["ptmodelexec.dev", "ghostmatching.dev", "regions.dev", "pricing.dev", "pricingdata.run", "kafka.server", "tcs.dev"]}], "configsets": ["ptmodelexecdata"], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "startup", "type": "startup", "group": "ptmodelexec.dev"}], "slack": "#pricing-adaptive-dep", "team_email": "adaptive-pricing@lyft.com", "pagerduty_escalation_policy": "Adaptive-Pricing", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "streamingplatform": {"version": "1.4-SNAPSHOT", "beam_version": "2.16.0-lyft20200116", "jobmanagers": [{"name": "ptmodelexec", "production": {"num_taskmanagers": 60, "availability_zone": "us-east-1d", "taskmanager": {"instance_type_override": "r5.4xlarge", "num_slots": 4}}, "staging": {"num_taskmanagers": 2, "availability_zone": "us-east-1d", "taskmanager": {"instance_type_override": "r5.4xlarge", "num_slots": 4}}, "jobs": [{"name": "ptmodelexec", "type": "beam-python", "pipeline": "ptmodelexec.workflow", "description": "To launch the pricing model execution workflow", "development": {"parallelism": 2}, "staging": {"parallelism": 8}, "production": {"parallelism": 236}}]}]}, "languages": ["bash", "python"], "image_type": "flinkjob", "service_tier": 1, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "pulldeploy_components": {"data": ["pricingdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "ptmodelexec"}, {"name": "ptmodelexectaskmanager"}, {"name": "ptmodelexecjobmanager"}], "common_settings": {"local_service": {"enable_gzip": true}, "internal_hosts": {"ghostmatching": null, "locationsregionsearch": null, "pricing": null, "regions": null, "routesapi": null, "supply": null, "users": null, "tcs": null}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}, "redis_clusters": {"ptmodelexec": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400, "outlier_detection": {"consecutive_5xx": 100, "enforcing_success_rate": 0}}}}}}, "logging": {"ptmodelexectaskmanager": {"fields": {"attempt_num": "long", "failed_record_count": "long", "failed_record": "keyword", "pricingrealtime_region": "keyword", "model_version": "keyword", "method": "keyword"}}}, "version": "5f98a9ccb8c968305b739837ff92221362c8513e", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "ptmodelexecdata": {"name": "ptmodelexecdata", "description": "Runtime configuration data for ptmodelexec", "repository": "git@github.com:lyft/ptmodelexecdata.git", "image_type": "data", "service_tier": 2, "slack": "#pricing-adaptive-dep", "team_email": "adaptive-pricing@lyft.com", "pagerduty_escalation_policy": "devnull", "languages": ["bash", "python"], "builder": {"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, "credentials": false, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/ptmodelexecdata"]}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "bf57adec7a34af436f699f621144a5da1d446181", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "publicapi": {"name": "publicapi", "description": "publicapi", "repository": "git@github.com:lyft/publicapi.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "legacyridetypes.dev", "dispatchavailability.dev", "redis.server", "envoy.server", "legacyoauth.dev", "publicapi.legacy", "streamingest.dev"]}, {"name": "integration", "members": ["abacus.dev", "account.dev", "ats.qa_approve", "auth.dev", "cancels.dev", "courier.dev", "coupons.dev", "dispatch.dev", "dispatchavailability.dev", "drivermode.dev", "enterprise.dev", "enterprisedispatch.dev", "etaproxy.dev", "fanner.dev", "fare.dev", "green.dev", "jobscheduler.dev", "karma.dev", "ledger.dev", "legacyoauth.dev", "legacyridetypes.dev", "locations.dev", "matchingexecution.dev", "matchingstate.dev", "messaging.dev", "payapi.dev", "pricing.dev", "push.dev", "ratings.dev", "regions.dev", "rentals.dev", "ridehistory.dev", "rides.dev", "ridesapi.dev", "rideexpensing.dev", "ridexppredictor.dev", "ridelocations.dev", "ridetimeestimator.dev", "routes.dev", "routesapi.dev", "supply.dev", "streamingest.dev", "switchboard.dev", "telegraph.dev", "tcs.dev", "trips.dev", "tripsapi.dev", "users.dev", "usergroups.dev", "venues.dev", "viewport.dev", "wallet.dev", "publicapi.dev", "tolls.dev"]}], "tests": [{"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy", "virtualenv": "service_venv"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "sharded", "target": "tests/integration*", "virtualenv": "service_venv", "float_dependencies": "0 5-22 * * *", "group": "publicapi.dev", "container": "publicapi.legacy", "run_in_pr": false, "run_in_dev": false, "skip_threshold": 5, "reports": {"junit": "build/integration.xml"}}, {"name": "integration_core_services", "type": "sharded", "target": "tests/integration_core_services", "virtualenv": "service_venv", "group": "publicapi.dev", "container": "publicapi.legacy", "run_in_dev": false, "skip_threshold": 5, "reports": {"junit": "build/integration.xml"}}, {"name": "unit_legacy", "type": "execution", "framework": "pytest", "coverage": false, "markers": "unit_legacy", "container": "publicapi.legacy", "group": "publicapi.dev", "targets": ["tests/unit"], "virtualenv": "service_venv"}], "upstream_tests": {"on_commit": true, "test_set": {"ridesapi": ["integration"], "routesapi": ["integration"]}}, "slack": "#publicapi", "team_email": "core-services@lyft.com", "pagerduty_escalation_policy": "API", "pulldeploy_components": {"data": ["marketplaceconfig", "regioncfgdata", "translationdata"]}, "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "service_tier": 0, "languages": ["python", "javascript"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "publicapi"}], "common_settings": {"local_service": {"enable_gzip": true}, "internal_hosts": {"account": null, "auth": null, "autonomous": null, "coupons": null, "courier": null, "dispatch": null, "dispatchavailability": null, "enterprise": null, "enterprisedispatch": null, "etaproxy": null, "fare": null, "green": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "ledger": null, "legacyoauth": null, "legacyridescheduler": null, "legacyridetypes": null, "offerings": null, "payapi": null, "pricing": null, "ratelimit": null, "regions": null, "ridehistory": null, "rides": null, "ridesapi": null, "ridelocations": null, "ridescheduler": null, "ridetimeestimator": null, "routes": null, "routesapi": null, "supply": null, "switchboard": null, "tcs": null, "telegraph": null, "usergroups": null, "users": null, "venues": null, "wallet": null}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}, "redis": {"publicapimultiredis": {"port": 6380}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "logging": {"publicapi": {"fields": {"bucket_map": "keyword", "user_id": "keyword", "user_lyft_id": "keyword"}}}, "version": "3c5d20b73f905aae1e475eb5169fa6fb55a89d65", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "push": {"name": "push", "description": "sends push notifications to lyft users", "repository": "git@github.com:lyft/push.git", "image_type": "service", "languages": ["python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "heartbeatsilentpushnotifications", "command": "dumb-init -- service_venv python manage.py heartbeat_silent_push_notifications", "sub_image": "k8s", "workdir": "/code/push", "limits": {"cpu": 4}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "jobscheduler.dev", "redis.dev", "push.legacy"]}, {"name": "integration", "members": ["push.dev", "users.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "push.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "sharded", "target": "tests/integration", "group": "push.integration", "virtualenv": "service_venv", "container": "push.legacy", "command": "make test_integration", "float_dependencies": "30 5-22 * * *", "reports": {"junit": "build/integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}], "targets": [{"facet": "heartbeatsilentpushnotifications"}], "kubernetes": {"enabled": true}}, {"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, [{"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "facets": [{"name": "heartbeatsilentpushnotifications", "member": "push.heartbeatsilentpushnotifications", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "schedule": "0/20 * * * *", "concurrency_policy": "replace"}], "slack": "#notifications-bots", "team_email": "notifications-eng@lyft.com", "pagerduty_escalation_policy": "Notifications", "service_tier": 1, "envoy": {"profile": "python", "settings": {"services": [{"name": "push"}, {"name": "pushapn"}, {"name": "pushgcm"}, {"name": "pushmotivate"}, {"name": "pushbatch"}], "common_settings": {"internal_hosts": {"jobschedulernormalweb": null, "jobschedulerbulkweb": null, "tcs": null, "users": null}, "external_hosts": {"apns": null, "apns_dev": null, "dynamodb_iad": null, "firehose_iad": null, "gcm": null, "fcm": null}, "redis": {"pushmultiredis": {"port": 6380}}}, "override_settings": [{"services": [{"name": "push"}], "settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"pushapn": null, "pushgcm": null, "pushmotivate": null, "userpreferences": null}}}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "logging": {"push": {"fields": {"time_to_live": "long", "event_type": "keyword", "exc": "keyword", "registration_ids": "keyword", "registration_id": "keyword", "topic": "keyword", "push_id": "keyword", "relayed_by": "keyword", "status": "keyword", "provider_occurred_at": "date", "message_id": "keyword", "http_code": "long", "provider": "keyword", "payload_size": "long", "push_event": "keyword", "serialized_push_payload": "keyword", "user_id": "keyword", "token": "keyword", "user_lyft_id": "keyword", "source_pipeline": "keyword", "is_simulated_ride": "boolean", "event_name": "keyword", "occurred_at": "keyword", "http_id": "keyword", "reporter_hostname": "keyword", "reporter_ip_address": "keyword", "event_id": "keyword", "reason": "keyword", "source": "keyword", "os": "keyword", "error_code": "long", "client_type": "keyword", "is_internal": "boolean", "message": "keyword", "major_app_version": "keyword", "endpoint": "keyword", "message_type": "keyword", "code": "long", "error_message": "keyword", "push_payload": {"time_to_live": "keyword", "registration_id": "keyword", "topic": "keyword"}, "app_type": "keyword", "message_body": "keyword", "message_title": "keyword", "user_agent": "keyword", "error": "keyword", "params": {"token": "keyword", "provider": "keyword", "notifications_allowed": "boolean", "badge_allowed": "boolean", "alert_allowed": "boolean", "sound_allowed": "boolean"}, "gevent_pause_detector": {"max_blocking_time": "float"}, "deep_link": "keyword", "message_template_id": "keyword", "priority": "keyword", "subscription_category": "keyword", "show_in_foreground": "boolean", "ttl_seconds": "long", "owner_id": "keyword", "tcs_response_code": "long", "failed_record_count": "long", "attempt_num": "long", "client_source": "keyword"}}, "pushgcm": {"fields": {"push_id": "keyword", "provider": "keyword", "http_code": "long", "message_type": "keyword", "user_id": "keyword", "app_type": "keyword", "event": "keyword", "error": "keyword", "payload_size": "long", "push_event": "keyword", "serialized_push_payload": "keyword", "code": "long", "error_message": "keyword", "gevent_pause_detector": {"max_blocking_time": "float"}}}, "pushapn": {"fields": {"push_id": "keyword", "http_code": "long", "message_type": "keyword", "provider": "keyword", "user_id": "keyword", "app_type": "keyword", "event": "keyword", "now": "float", "code": "long", "msg": "keyword", "topic": "keyword", "error_message": "keyword", "exp": "float", "gevent_pause_detector": {"max_blocking_time": "float"}, "response_body": "keyword"}}, "pushmotivate": {"fields": {"push_id": "keyword", "http_code": "long", "message_type": "keyword", "provider": "keyword", "user_id": "keyword", "app_type": "keyword", "event": "keyword", "now": "float", "code": "long", "msg": "keyword", "topic": "keyword", "error_message": "keyword", "exp": "float", "gevent_pause_detector": {"max_blocking_time": "float"}, "response_body": "keyword"}}, "pushbatch": {"fields": {"push_id": "keyword", "http_code": "long", "message_type": "keyword", "provider": "keyword", "user_id": "keyword", "app_type": "keyword", "event": "keyword", "now": "float", "code": "long", "msg": "keyword", "topic": "keyword", "error_message": "keyword", "exp": "float", "gevent_pause_detector": {"max_blocking_time": "float"}, "response_body": "keyword"}}}, "version": "826e3a5f1566828afd2b792f8b040157f456f5fa", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "pusher": {"name": "pusher", "description": "API Push Service", "pagerduty_escalation_policy": "IDL Tools", "team_email": "idl-tools@lyft.com", "repository": "git@github.com:lyft/pusher.git", "image_type": "service", "credentials": true, "credentials_legacy": true, "languages": ["go"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh"}, {"name": "main", "command": "dumb-init -- pusher", "workdir": "/code/pusher", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "pusher.service", "nats.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "pusher.dev"}, {"name": "integration", "type": "execution", "container": "pusher.service", "command": "make integration", "group": "pusher.dev"}, {"name": "coverage", "type": "jailed", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#q4-push", "slack_deploy_notification_environments": ["staging", "canary", "production"], "facets": [{"name": "main", "member": "pusher.main", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 60}}}}, {"name": "canary", "member": "pusher.main", "type": "service", "canary": true, "requirements": {"singleton": true}, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": false}, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": false}, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": false}, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": false}, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": false}}]], "service_tier": 1, "envoy": {"profile": "go", "settings": {"services": [{"name": "pusher"}], "common_settings": {"nats_enabled": true, "internal_hosts": {"emergencyassist": null, "eventingest": null, "iotgateway": null, "legacyapi": null, "pickupcomms": null, "pusher": null, "ridechat": null, "ridesapi": null, "routesapi": null, "sharelocation": null, "tripsapi": null, "expressdrivefeapi": null}, "authorization": {"permissions": {"subscriber": {"paths": ["/v1/push", "/pb.api.endpoints.v1.pusher.Pusher/Stream"], "methods": ["GET", "POST"]}, "internal_subscriber": {"paths": ["/pb.api.endpoints.v1.pusher.Pusher/StreamInternal"], "methods": ["GET", "POST"]}, "demo": {"paths": ["/demo"], "methods": ["GET"]}, "broadcaster": {"paths": ["/pb.api.endpoints.v1.pusher.Pusher/Broadcast"], "methods": ["POST"]}}, "bindings": {"emergencyassist": ["broadcaster"], "locationsworkers": ["broadcaster"], "locationsrtmmprocess": ["broadcaster"], "locationsrtmmworker": ["broadcaster"], "locationsymprocess": ["broadcaster"], "locationsingest": ["broadcaster"], "custodian": ["broadcaster"], "pickupcomms": ["broadcaster"], "ridechat": ["broadcaster"], "ridesapi": ["broadcaster"], "tripsapi": ["broadcaster"], "sharelocation": ["broadcaster"], "dispatch": ["broadcaster"], "pusher": ["demo"], "envoy": ["subscriber", "demo"], "iotgateway": ["subscriber", "broadcaster", "internal_subscriber"]}}, "local_service": {"grpc_streaming": true, "circuit_breakers": {"default": {"max_connections": 2048}}}}}}, "logging": {"pusher": {"fields": {"requestId": "keyword", "event": "keyword", "error": "keyword", "errorVerbose": "keyword", "target": {"headers": {"X-Envoy-External-Address": "keyword", "X-Lyft-User-Id": "keyword", "X-Lyft-Client-Id": "keyword", "X-Lyft-Session-Id": "keyword", "X-Request-Id": "keyword", "Accept-Encoding": "keyword", "Accept": "keyword", "User-Agent": "keyword", "X-Forwarded-For": "keyword", "X-Lyft-Scopes": "keyword", "X-Forwarded-Proto": "keyword", "X-Ot-Span-Context": "keyword", "If-Modified-Since": "keyword"}, "service": "keyword", "query": "keyword", "method": "keyword", "path": "keyword"}, "stream_id": "keyword", "X-Update-Request": "keyword"}}}, "version": "588a33d3fc516b381cf23b4b8f9ae13a0f9de4a3", "images": [{"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "py3k": {"name": "py3k", "description": "Python 3 Compatibility", "repository": "git@github.com:lyft/containers.git:py3k", "slack": "#devx-bots", "team_email": "devx-team@lyft.com", "docs": {"section": "Infrastructure"}, "containers": [{"name": "py3k", "command": "/code/containers/py3k/entrypoint.sh", "mounts": ["/var/run/docker_sockets", "/srv/control"]}], "python": {"mypy": {"python_versions": ["2.7"]}, "py3k": {"linters": ["modernize", "pylint"]}}, "deploy": [{"name": "development", "legacy": false}, {"name": "staging", "legacy": false, "automatic": true}, {"name": "canary", "legacy": false}, {"name": "production", "legacy": false}], "languages": ["python", "bash"], "image_type": "tool", "version": "d577b3a7d86743538af6b3b39a74d7d7ef308546", "images": [{"parent": {"name": "bionicbase", "version": "31d726718508f714ba995b5d2439c97d48dd2be2", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "31d726718508f714ba995b5d2439c97d48dd2be2", "sub_image": null, "external": false}}, "pyasyncbenchmark": {"name": "pyasyncbenchmark", "description": "For benchmarking different Python async Frameworks", "repository": "git@github.com:lyft/pyasyncbenchmark.git", "image_type": "service", "service_tier": 3, "pagerduty_escalation_policy": "devnull", "team_email": "devnull@lyft.com", "slack": "#python-async", "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "packages": ["htop", "strace"]}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.httpbin", "sub_image": "httpbin"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.bench", "sub_image": "bench"}}]}}, "containers": [{"name": "flaskgevent", "command": "dumb-init -- service_venv gunicorn flask_gevent.wsgi:app --workers 8 -k gevent --worker-connections 10000 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/pyasyncbenchmark", "limits": {"cpu": 8, "memory": "2048Mi"}}, {"name": "uwsgiflaskgevent", "command": "dumb-init -- service_venv uwsgi --processes 8 --gevent-monkey-patch --gevent 1000 --manage-script-name --mount=/=flask_gevent.wsgi:app --ini uwsgi.ini", "workdir": "/code/pyasyncbenchmark", "limits": {"cpu": 4, "memory": "512Mi"}, "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 10, "timeout_seconds": 2}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}}}, {"name": "starletteasyncio", "command": "dumb-init -- service_venv gunicorn starlette_asyncio.app:app --workers 8 -k uvicorn.workers.UvicornWorker -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/pyasyncbenchmark", "limits": {"cpu": 4, "memory": "512Mi"}}, {"name": "httpbin", "command": "dumb-init -- pipenv run -- gunicorn httpbin:app -k gevent --workers 8 --bind \"unix:/run/gunicorn/gunicorn.sock\" --bind \":8080\"", "workdir": "/httpbin", "sub_image": "httpbin", "limits": {"cpu": 8, "memory": "1024Mi"}, "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/", "port": 8080}, "initial_delay_seconds": 10, "timeout_seconds": 2}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/", "port": 8080}}}, {"name": "bench", "command": "dumb-init -- /bin/bash -c -- \"while true; do sleep 10000; done\"", "workdir": "/code/pyasyncbenchmark", "sub_image": "bench", "limits": {"cpu": 1, "memory": "256Mi"}}, {"name": "playground", "command": "dumb-init -- /bin/bash -c -- \"while true; do sleep 10000; done\"", "workdir": "/code/pyasyncbenchmark", "limits": {"cpu": 4, "memory": "512Mi"}}], "facets": [{"name": "flaskgevent", "member": "pyasyncbenchmark.flaskgevent", "type": "service", "envoy_service": "pyasyncbenchmarkflaskgevent", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "starletteasyncio", "member": "pyasyncbenchmark.starletteasyncio", "type": "service", "envoy_service": "pyasyncbenchmarkstarletteasyncio", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "uwsgiflaskgevent", "member": "pyasyncbenchmark.uwsgiflaskgevent", "type": "service", "envoy_service": "pyasyncbenchmarkuwsgiflaskgevent", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "httpbin", "member": "pyasyncbenchmark.httpbin", "type": "service", "envoy_service": "pyasyncbenchmarkhttpbin", "autoscaling": {"min_size": 32, "max_size": 32}}, {"name": "bench", "member": "pyasyncbenchmark.bench", "type": "worker", "envoy_service": "pyasyncbenchmarkbench", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "playground", "member": "pyasyncbenchmark.playground", "type": "worker", "envoy_service": "pyasyncbenchmarkplayground", "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "clusterLabels": [{"cluster.lyft.net/role": "infra"}, {"cluster.lyft.net/clustername": "infrastaging"}], "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}, "targets": [{"facet": "flaskgevent"}, {"facet": "starletteasyncio"}, {"facet": "httpbin"}, {"facet": "bench"}, {"facet": "playground"}, {"facet": "uwsgiflaskgevent"}]}, {"name": "production", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": "core-prod-4"}}, "targets": [{"facet": "playground"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "pyasyncbenchmarkflaskgevent"}, {"name": "pyasyncbenchmarkuwsgiflaskgevent"}, {"name": "pyasyncbenchmarkstarletteasyncio"}, {"name": "pyasyncbenchmarkbench", "traffic_type": "egress_only"}, {"name": "pyasyncbenchmarkplayground", "traffic_type": "egress_only"}, {"name": "pyasyncbenchmarkhttpbin"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_requests": 4200000, "max_connections": 4200000}}}}, "override_settings": [{"services": [{"name": "pyasyncbenchmarkflaskgevent"}, {"name": "pyasyncbenchmarkstarletteasyncio"}, {"name": "pyasyncbenchmarkuwsgiflaskgevent"}], "settings": {"internal_hosts": {"pyasyncbenchmarkhttpbin": null}}}, {"services": [{"name": "pyasyncbenchmarkbench"}, {"name": "pyasyncbenchmarkplayground"}], "settings": {"internal_hosts": {"pyasyncbenchmarkflaskgevent": null, "pyasyncbenchmarkstarletteasyncio": null, "pyasyncbenchmarkuwsgiflaskgevent": null}}}, {"services": [{"name": "pyasyncbenchmarkhttpbin"}], "settings": {"local_service": {"hosts_url": "http://127.0.0.1:8080"}, "health_check_endpoint": "/"}}]}}, "version": "79b61ff8bd545618aff7719b914ba95ed0d8b461", "images": [{"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "py37", "external": false}, "sub_image": null}, {"parent": {"name": "bionicbase", "version": "ee338ebf71e054b132773aefdd8870b1bd4f3aa2", "sub_image": null, "external": false}, "sub_image": "httpbin"}, {"parent": {"name": "bionicbase", "version": "ee338ebf71e054b132773aefdd8870b1bd4f3aa2", "sub_image": null, "external": false}, "sub_image": "bench"}], "parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "py37", "external": false}}, "pydynamicconfig": {"name": "pydynamicconfig", "description": "structured dynamic configuration and experimentation python library", "repository": "git@github.com:lyft/pydynamicconfig.git", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "slack": "#optimal-dispatch", "team_email": "optimal-dispatch@lyft.com", "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "c76eaf1e215fe27e750dc8e6087b2f8b67fa5d25", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "pyexample2": {"name": "pyexample2", "description": "pyexample2", "repository": "git@github.com:lyft/pyexample2.git", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}, {"name": "docker_build"}, {"name": "configset", "params": {"embedded": true}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "spinner", "command": "service_venv python /code/pyexample2/fork.py 19", "sub_image": "k8s", "limits": {"cpu": 19, "memory": "1Gi"}}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/pyexample2", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi", "environment": {"development": {"cpu": 1.6, "memory": "1.66Gi"}}}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}}, {"name": "job", "command": "dumb-init -- service_venv python manage.py azinfo", "workdir": "/code/pyexample2", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "100Mi"}}, {"name": "workers", "command": "dumb-init -- service_venv python manage.py loadtest", "workdir": "/code/pyexample2", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "batch", "command": "dumb-init -- service_venv python manage.py", "workdir": "/code/pyexample2", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "256Mi"}}], "groups": [{"name": "dev", "members": ["control.dev", "eventingest.service", "pyexample2.legacy"]}, {"name": "integration", "members": ["pyexample2.dev"]}, {"name": "service_group", "members": ["pyexample2.service", "pyexample2.workers"]}], "configsets": ["pyexample2"], "tests": [{"name": "shellcheck", "type": "tool", "tool": "shellcheck.lint"}, {"name": "unit", "type": "jailed", "sub_image": "k8s", "command": "make test_unit"}, {"name": "unit3", "type": "jailed", "command": "service_venv python -bb -m pytest tests/unit", "autotrigger": false}, {"name": "configset", "type": "tool", "tool": "configsettest.test"}, {"name": "integration", "type": "sharded", "group": "pyexample2.dev", "container": "pyexample2.legacy", "target": "tests/integration", "virtualenv": "service_venv", "float_dependencies": "H/20 5-22 * * *", "reports": {"junit": "build/integration.xml", "cobertura": "build/coverage.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#compute-bots", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "pyexample2", "audit_blacklist": ["envoyAudit"], "facets": [{"name": "main", "member": "pyexample2.service", "type": "service", "watch_remote_files": {"staging": [{"name": "testfile", "s3_url": "s3://lyft-infra/pyexample2/watchedfiles/staging.txt"}], "production": [{"name": "testfile", "s3_url": "s3://lyft-infra/pyexample2/watchedfiles/production.txt"}]}, "autoscaling": {"min_size": 1, "max_size": 3}}, {"name": "workers", "member": "pyexample2.workers", "type": "worker", "max_surge": "50%", "envoy_service": "pyexample2workers", "autoscaling": {"min_size": 4, "max_size": 4}}, {"name": "canary", "member": "pyexample2.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}, {"name": "canaryworkers", "member": "pyexample2.workers", "type": "worker", "envoy_service": "pyexample2workers", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}, {"name": "cronjob", "member": "pyexample2.job", "type": "cron", "schedule": "*/1 * * * *"}, {"name": "batchmanage", "member": "pyexample2.batch", "type": "batch"}, {"name": "spinner", "member": "pyexample2.spinner", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "mongoworker", "type": "worker", "requirements": {"mongo": true}, "member": "pyexample2.workers"}], "deploy": [{"name": "staging", "legacy": true, "bake_time_minutes": 1, "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "workers"}, {"facet": "cronjob"}, {"facet": "batchmanage"}, {"facet": "spinner"}, {"facet": "mongoworker"}]}, [{"name": "staging-boba2", "targets": [{"facet": "main"}, {"facet": "workers"}], "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": ["infra-dev"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["boba2"]}}}, {"name": "staging-boba", "targets": [{"facet": "main"}, {"facet": "workers"}], "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": ["infra-dev"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["boba"]}}}, {"name": "staging-provtest", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "provtest"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "provtest"}}, "targets": [{"facet": "main"}, {"facet": "workers"}]}, {"name": "staging-sidecar-test1", "automatic": true, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "sidecar-test1"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "sidecar-test1"}}, "targets": [{"facet": "main"}, {"facet": "workers"}]}, {"name": "staging-envoyminimesh", "automatic": true, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "envoyminimesh"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "envoyminimesh"}}, "targets": [{"facet": "main"}, {"facet": "workers"}]}], {"name": "canary", "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "canaryworkers"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "workers"}]}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "workers"}]}, {"name": "production", "legacy": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "canaryworkers"}, {"facet": "main"}, {"facet": "workers"}, {"facet": "cronjob"}, {"facet": "batchmanage"}, {"facet": "mongoworker"}]}]], "orchestrate": {"types": [{"name": "terraform"}], "steps": [{"name": "staging"}]}, "languages": ["bash", "python"], "image_type": "service", "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "pyexample2"}, {"name": "pyexample2resilience"}, {"name": "pyexample2workers"}], "common_settings": {"internal_hosts": {"kitchensink": null, "eventingest": null, "pyexample2": null, "pyexample2workers": null}}, "override_settings": [{"settings": {}, "services": [{"name": "pyexample2", "traffic_mirror": [{"match": {"prefix": "/workworkwork"}, "route": "pyexample2resilience", "runtime_key_prefix": "internal_routing.pyexample2.mirror.testing1"}, {"match": {"path": "/traffic/mirror/endpoint"}, "route": "pyexample2resilience", "runtime_key_prefix": "internal_routing.pyexample2.mirror.testing2"}]}]}]}}, "redline": [{"service_name": "pyexample2", "schedule": {"minute": 0, "hour": 18, "day": "mon"}, "thresholds": {"completion_checks": {"min_requests_per_minute": 1000}, "health_checks": {"max_response_time_p95_ms": 5}}, "custom_completion_checks": [], "custom_health_checks": []}], "logging": {"pyexample2": {"fields": {"error": "keyword"}}}, "version": "2fb0321bb1647dcdc7f282cbc280b712eec7979e", "images": [{"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "scratch", "version": "", "sub_image": "", "external": true}, "sub_image": "data"}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}}, "pyexample37": {"name": "pyexample37", "description": "testing oopsbae py37", "repository": "git@github.com:lyft/pyexample37.git", "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "pyexample2", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:36518650f40787ad43faa9717259a01880989029"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/pyexample37", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "pyexample37.legacy"]}, {"name": "service_group", "members": ["pyexample37.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "pyexample37.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "pyexample37.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "pyexample37.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "pyexample37"}]}}, "version": "0a95303be87c6bc520168846c7639dcfbdff2e08", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "pylint": {"name": "pylint", "description": "python linter container", "repository": "git@github.com:lyft/containers.git:pylint", "slack": "#dev-python", "team_email": "devx-team@lyft.com", "docs": {"section": "Infrastructure"}, "containers": [{"name": "lint", "command": "/code/containers/pylint/entrypoint.sh", "mounts": ["/var/run/docker_sockets", "/srv/control"]}], "deploy": [{"name": "development", "legacy": false}, {"name": "staging", "legacy": false, "automatic": true}, {"name": "canary", "legacy": false}, {"name": "production", "legacy": false}], "languages": ["bash"], "image_type": "tool", "version": "d0c1504d17bfb493e393135b0ecfa38adf6044fa", "images": [{"parent": {"name": "bionicbase", "version": "07a2d1fb34425c9da0fbdc0bcf7c1ac2cb6fd969", "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "07a2d1fb34425c9da0fbdc0bcf7c1ac2cb6fd969", "external": false}}, "pyosrm": {"name": "pyosrm", "description": "Python bindings for OSRM", "repository": "git@github.com:lyft/pyosrm-private.git", "privileged": true, "credentials": true, "credentials_legacy": false, "containers": [{"name": "devel", "privileged": true, "command": "/bin/bash -c 'while true; do sleep 3600; done'", "provision": "run-parts --verbose --exit-on-error /code/pyosrm-private/provision/"}], "groups": [{"name": "dev", "members": ["control.dev", "pyosrm.devel"]}], "tests": [{"name": "startup", "type": "startup", "group": "pyosrm.dev"}, {"name": "unit", "type": "restricted", "group": "pyosrm.dev", "container": "pyosrm.devel", "command": "make test_unit", "whitelist": ["elasticsearch-server.dev.lyft.net.", "securityalerts-development-iad-onebox.lyft.net."]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy"}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true}], "languages": ["python"], "image_type": "library", "slack": "#locations", "team_email": "locations@lyft.com", "version": "d0bddd19ea7d6bfb021114465b018effc8e2e55a", "images": [{"parent": {"name": "pythonlibrary", "version": "d11ee40942f424088df3107d5d1a7f82bfbe8866", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "pythonlibrary", "version": "d11ee40942f424088df3107d5d1a7f82bfbe8866", "sub_image": null, "external": false}}, "pytestlyftanalytics": {"name": "pytestlyftanalytics", "description": "Pytest plugin validate analytics events", "repository": "git@github.com:lyft/pytest-lyft-analytics.git", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "python2", "type": "jailed", "command": "make unit_python2", "reports": {"junit": "build/unit.xml"}}, {"name": "python3", "type": "jailed", "command": "make unit_python3", "reports": {"junit": "build/unit.xml"}}, {"name": "lint", "type": "jailed", "command": "make lint", "reports": {"flake8": "build/flake8.txt", "pylint": "build/pylint.txt"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy"}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true}], "languages": ["python"], "image_type": "library", "slack": "#ci-bots", "team_email": "test-frameworks@lyft.com", "version": "fcf6eec4a1968f6ece6813eefc2cc10bf44f0afb", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "pytestlyftmetadata": {"name": "pytestlyftmetadata", "description": "Pytest plugin to track additional metadata per test case", "repository": "git@github.com:lyft/pytest-lyft-metadata.git", "image_type": "library", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:77bc248dcdf3d408786f858d3916c931a07c4f11"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d657f3b7287f6e1f4b530fc8610e1602d7c07934", "sub_image": "precommit"}}]}}, "languages": ["python"], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "python": {"mypy": {"python_versions": ["2.7", "3.6"]}}, "py3k": {"linters": ["modernize"]}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "slack": "#ci-bots", "team_email": "test-frameworks@lyft.com", "version": "8e9790e6e9d8d4842c9c56838229d488af3f924d", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "77bc248dcdf3d408786f858d3916c931a07c4f11", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d657f3b7287f6e1f4b530fc8610e1602d7c07934", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "77bc248dcdf3d408786f858d3916c931a07c4f11", "sub_image": null, "external": false}}, "pytestlyftpluginbase": {"name": "pytestlyftpluginbase", "description": "Pytest plugin base class to serve as skeleton for future pytest plugins.", "repository": "git@github.com:lyft/pytest-lyft-plugin-base.git", "slack": "#ci-bots", "team_email": "test-frameworks@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:4c8c826702be34d5e76f91244812acff644d19fd"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "94bc6023d3ff41ae1393f0a7bb5e46320a9214fd", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "4c8c826702be34d5e76f91244812acff644d19fd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "4c8c826702be34d5e76f91244812acff644d19fd", "sub_image": null, "external": false}}, "pytestlyftruntime": {"name": "pytestlyftruntime", "description": "Pytest plugin to help test runtime in unit tests", "repository": "git@github.com:lyft/pytest-lyft-runtime.git", "slack": "#ci-bots", "team_email": "test-frameworks@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:42924d83da5db3628058a3a442006af6bb02a331"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy"}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true}], "version": "4be3a01d9b202b7fba2af8394cd90bdcb3791aa8", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "42924d83da5db3628058a3a442006af6bb02a331", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "42924d83da5db3628058a3a442006af6bb02a331", "sub_image": null, "external": false}}, "pytestlyfttracing": {"name": "pytestlyfttracing", "description": "pytest plugin that adds tracing to integration/e2e tests.", "repository": "git@github.com:lyft/pytest-lyft-tracing.git", "image_type": "library", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:a4c9f130270ae9f5f2559df8d3e15c904da4ce51"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:32cbb00e867909feba916f53c84c05d17bad9c3f", "sub_image": "precommit"}}]}}, "languages": ["python"], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "py3k": {"linters": ["modernize", "pylint"]}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "slack": "#ci-bots", "team_email": "test-frameworks@lyft.com", "version": "5c070458f1428b508e11fd99acf00c34080b8e2f", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "a4c9f130270ae9f5f2559df8d3e15c904da4ce51", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "32cbb00e867909feba916f53c84c05d17bad9c3f", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "a4c9f130270ae9f5f2559df8d3e15c904da4ce51", "sub_image": null, "external": false}}, "python": {"parent": {"version": "26e21a5dd66ba80415099edf05917ca3414d1002", "name": "imagebase", "buildargs": [], "external": false}, "description": "python runtime container", "repository": "git@github.com:lyft/containers.git:python", "deploy": [{"legacy": false, "name": "development", "orca": [{"region": "iad", "orca_location": "ops"}]}, {"legacy": false, "automatic": true, "name": "staging", "orca": [{"region": "iad", "orca_location": "ops"}]}, {"legacy": false, "name": "canary", "orca": [{"region": "iad", "orca_location": "ops"}]}, {"legacy": false, "name": "production"}], "docs": {"section": "Infrastructure"}, "version": "aaed4894cfa9512aee4392a9028a0c0e96c5cde8", "name": "python"}, "pythonlogtester": {"name": "pythonlogtester", "description": "POC python service for new logging pipeline", "repository": "git@github.com:lyft/pythonlogtester.git", "image_type": "service", "service_tier": 3, "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "team_email": "obs-analysis@lyft.com", "pagerduty_escalation_policy": "Observability-Analysis", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "worker", "command": "service_venv python /code/pythonlogtester/spam_logs.py", "workdir": "/code/pythonlogtester", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}], "facets": [{"name": "pythonlogtester", "member": "pythonlogtester.worker", "type": "worker", "envoy_service": "pythonlogtester", "sidecars": ["envoy-worker", "statsd", "heka", "fluentbit"], "autoscaling": {"min_size": 1, "max_size": 10}}], "groups": [{"name": "dev", "members": ["control.dev", "pythonlogtester.legacy", "logproxy.legacy"]}], "tests": [{"name": "unit", "type": "jailed", "command": "/bin/true"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [[{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "staging-obs-dev", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["obs-dev"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["obs-dev"]}}, "targets": [{"facet": "pythonlogtester"}], "automatic": true}], {"name": "canary", "legacy": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "pythonlogtester"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "pythonlogtester"}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipython3:6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}, {"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "25e03ca3dcd12dfbea0b4852ca7d8d69bea320b7", "images": [{"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "5bc01cbcc263ebcd8871aa633e4bfb97b4bd5fe5", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "5bc01cbcc263ebcd8871aa633e4bfb97b4bd5fe5", "sub_image": null, "external": false}}, "pythonlyftacqincentivescommon": {"name": "pythonlyftacqincentivescommon", "description": "Common libraries used at Acquisition Incentives Referrals team", "repository": "git@github.com:lyft/python-lyft-acq-incentives-common.git", "image_type": "library", "slack": "#acq-incentives", "team_email": "acq-incentives-referrals@lyft.com", "notification_overrides": {"deploy": {"slack": "#acq-incentives-bot", "environments": ["production", "canary", "staging"]}, "deploy_failure": {"slack": "#acq-incentives-bot"}, "test_failure": {"slack": "#acq-incentives-bot", "email": "acq-incentives-referrals@lyft.com", "environments": ["production"]}, "master_failure": {"slack": "#acq-incentives-bot"}, "pr_merge": {"slack": "#acq-incentives-bot"}, "pr_open": {"slack": "#acq-incentives-bot"}}, "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "558746263b19524f895fbddcb76ae96949e7385d", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "pythonlyftamundsenutils": {"name": "pythonlyftamundsenutils", "description": "common utils for amundsen", "repository": "git@github.com:lyft/python-lyft-amundsenutils.git", "image_type": "library", "languages": ["python"], "slack": "#amundsen-dev", "team_email": "dp-tools@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "a7d41fb529f4781d185bab363837a4c23009bd44", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "pythonlyftauditlog": {"name": "pythonlyftauditlog", "description": "A python logging library managed by the security team for the logging and collection of events that operate on or around sensitive data", "repository": "git@github.com:lyft/python-lyft-auditlog.git", "image_type": "library", "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:55c478deab6328177d91bfa5066925d7754c6096"}}, "languages": ["python"], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "command": "flake8 ."}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "slack": "#security", "team_email": "security-team@lyft.com", "version": "2d3d07250bfc96b0b9f04f2f5daa0de40b033910", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "55c478deab6328177d91bfa5066925d7754c6096", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "55c478deab6328177d91bfa5066925d7754c6096", "sub_image": null, "external": false}}, "pythonlyftavmap": {"name": "pythonlyftavmap", "description": "Lib supporting work with MapFragment protos, including Lanes and Junctions (i.e. AV maps)", "repository": "git@github.com:lyft/python-lyft-avmap-lib.git", "slack": "#av-mapping-semantic", "team_email": "av-mapping-platform@lyft.com", "image_type": "library", "languages": ["python"], "credentials": true, "containers": [{"name": "test", "command": "/bin/bash -c 'sleep infinity'"}], "groups": [{"name": "dev", "members": ["pythonlyftavmap.test"]}, {"name": "integration", "members": ["control.dev", "pythonlyftavmap.test"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipythonlibrary:4c8c826702be34d5e76f91244812acff644d19fd", "packages": ["libopencv-dev", "libgfortran3", "python-opencv", "python3.6-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "pythonlyftavmap.integration", "container": "pythonlyftavmap.test", "command": "make test_integration", "reports": {"junit": "build/integration.xml"}}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "docs": {"autogen_modules": ["lyft_avmap"]}, "version": "7dfd4a204d50c3da7c331df322084f8e50596bbc", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "4c8c826702be34d5e76f91244812acff644d19fd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "4c8c826702be34d5e76f91244812acff644d19fd", "sub_image": null, "external": false}}, "pythonlyftavrepositioning": {"name": "pythonlyftavrepositioning", "description": "Library hosting control algorithms for preemptively repositioning (rebalancing) autonomous vehicles", "repository": "git@github.com:lyft/avrepositioning.git", "image_type": "library", "builder": {"name": "s2iplus", "params": {"builder": "lyft/s2ipythonlibrary:562ba126965b0517d8d18f346e55a9027d9eb4ac", "packages": ["glpk-utils"]}}, "languages": ["python"], "slack": "#autonomous-server", "team_email": "autonomous-team@lyft.com", "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "command": "flake8 ."}], "containers": [{"name": "test", "command": "echo \"Hello <%= name %>\"<% } %>"}], "python": {"mypy": {"python_versions": ["3.6", "2.7"]}}, "py3k": {"linters": ["modernize", "pylint"]}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "b9d23f1ffd71cdc43c2d1f816334018ae9baf871", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "562ba126965b0517d8d18f346e55a9027d9eb4ac", "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "562ba126965b0517d8d18f346e55a9027d9eb4ac", "external": false}}, "pythonlyftbailoutmodels": {"name": "pythonlyftbailoutmodels", "description": "Science models and analysis for Bailout classification", "repository": "git@github.com:lyft/bailout-models.git", "image_type": "library", "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:0a696ea0d6d0f867fc7f53603e88446116bd8fdd"}}, "languages": ["python"], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "command": "make lint"}], "python": {"mypy": {"python_versions": ["3.6"]}}, "py3k": {"linters": ["modernize", "pylint"]}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "a7a4bddb01aaef6c6db04b86c40cae2825e89123", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "0a696ea0d6d0f867fc7f53603e88446116bd8fdd", "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "0a696ea0d6d0f867fc7f53603e88446116bd8fdd", "external": false}}, "pythonlyftblueprints": {"name": "pythonlyftblueprints", "description": "Library for Lyft specific Flask blueprints, which enables using the dependency injection pattern at the resource level.", "repository": "git@github.com:lyft/python-lyft-blueprints.git", "slack": "#dev-python", "team_email": "egoh@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:b9950d8fa81701c8d10423bf6ea7f4f3bec4808a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:405142ddf8cb558d3f18760198bd250d585266a0", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "5f6f7bf5de058eb30cdfb0b755b249b22e3a5360", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "b9950d8fa81701c8d10423bf6ea7f4f3bec4808a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "405142ddf8cb558d3f18760198bd250d585266a0", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "b9950d8fa81701c8d10423bf6ea7f4f3bec4808a", "sub_image": null, "external": false}}, "pythonlyftcancels": {"name": "pythonlyftcancels", "description": "A Python client library for accessing the Cancels service", "repository": "git@github.com:lyft/python-lyft-cancels.git", "slack": "#cancels-xp-server", "team_email": "cancel-xp-eng@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:66d815e6ba03c9515c0c2273ecca13036015715d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit2", "type": "jailed", "command": "python -3 -m pytest tests/unit"}, {"name": "unit3", "type": "jailed", "command": "python3 -bb -m pytest tests/unit"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "37ed8d93aba57da3370e387c57301670d22f8aa0", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "pythonlyftcausalinference": {"name": "pythonlyftcausalinference", "description": "inferring causality without proper experiments", "repository": "git@github.com:lyft/python-lyft-causal-inference.git", "slack": "#mlabs-experimentation-pod", "team_email": "mlabs@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:4c8c826702be34d5e76f91244812acff644d19fd"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "68f22ba42b118b448c3a885569c3cd4bbbaeba84", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "4c8c826702be34d5e76f91244812acff644d19fd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "4c8c826702be34d5e76f91244812acff644d19fd", "sub_image": null, "external": false}}, "pythonlyftclaimsdata": {"name": "pythonlyftclaimsdata", "description": "Python library for parsing proprietary claims data formats", "repository": "git@github.com:lyft/python-lyft-claims-data.git", "slack": "#insurance", "team_email": "insurance-eng@lists.lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3bc33a5dadcbcb4159f72a8f6e1c0e8637eca138"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "5ba9e3e2fc02054cdcd87d6b18691e4a127d5317", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3bc33a5dadcbcb4159f72a8f6e1c0e8637eca138", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3bc33a5dadcbcb4159f72a8f6e1c0e8637eca138", "sub_image": null, "external": false}}, "pythonlyftclothoid": {"name": "pythonlyftclothoid", "description": "Library to compute clothoid (Euler spiral) arc interpolating two points &amp; directions", "repository": "git@github.com:lyft/python-lyft-clothoid.git", "slack": "#av-mapping-eng", "team_email": "av-mapping@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:172547c58bd791e6098a83841cd78a39570b6b26"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:5d372ca5080523a25f750dcfca7a781f0341b460", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "609251bb2fb3d5db6fea25dda0d5e6a2a660ab3d", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "172547c58bd791e6098a83841cd78a39570b6b26", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "5d372ca5080523a25f750dcfca7a781f0341b460", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "172547c58bd791e6098a83841cd78a39570b6b26", "sub_image": null, "external": false}}, "pythonlyftcommonspark": {"name": "pythonlyftcommonspark", "description": "common spark libraries for Lyft", "repository": "git@github.com:lyft/python-lyft-common-spark.git", "slack": "#spark-dev-bot", "team_email": "dp-infra-compute@lyft.com", "image_type": "tool", "languages": ["python"], "containers": [{"name": "spin", "command": "sleep infinity"}], "deploy": [{"name": "development", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false}, {"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false}, {"name": "production", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}], "version": "8bf1b51adea8ba3dac51c0cd4fafa5b5d313c7f2", "images": [{"parent": {"name": "java8", "version": "e9e63f36a6c9539f0c410ab92de2f55f242a45a3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "e9e63f36a6c9539f0c410ab92de2f55f242a45a3", "sub_image": null, "external": false}}, "pythonlyftconcur": {"name": "pythonlyftconcur", "description": "Concur API client", "repository": "git@github.com:lyft/python-lyft-concur.git", "slack": "#enterprise-dev", "team_email": "enterprise-platform@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "7a195cdacade934499a8e0a6ad20784e89a1bd19", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "pythonlyftconfigbuilder": {"name": "pythonlyftconfigbuilder", "description": "Library to ease creating configuration by using template composition. Provides strong validation primities.", "repository": "git@github.com:lyft/python-lyft-configbuilder.git", "slack": "#data-platform-dev", "team_email": "dp-infra-compute@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:0e195a1e438e6e534051afee1392cf51a7d7461c"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "fb325f76f549dbb6bee79adba2d9a06c7690bac7", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "0e195a1e438e6e534051afee1392cf51a7d7461c", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "0e195a1e438e6e534051afee1392cf51a7d7461c", "sub_image": null, "external": false}}, "pythonlyftcoreservicemodels": {"name": "pythonlyftcoreservicemodels", "description": "Thin layer on top of our core services to provide common business logic", "repository": "git@github.com:lyft/python-lyft-core-service-models.git", "slack": "#core-services-prs", "team_email": "core-services@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:8eb74e3f575bc58ffe068e5e42d9d6e4f4aef8c8"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "5952a7c1a15833ed5ef1987cef4f0da9944f062e", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "8eb74e3f575bc58ffe068e5e42d9d6e4f4aef8c8", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "8eb74e3f575bc58ffe068e5e42d9d6e4f4aef8c8", "sub_image": null, "external": false}}, "pythonlyftdatavalidation": {"name": "pythonlyftdatavalidation", "description": "Library for doing data comparison and validation checks of the same datasets in multiple databases and tables", "repository": "git@github.com:lyft/python-lyft-data-validation.git", "image_type": "library", "languages": ["python"], "slack": "#data-validation-dev", "team_email": "financial-infra-dev@lyft.com", "credentials": true, "credentials_legacy": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipythonlibrary:cd9c1f80771b70a87955d14f24168afcb80a3f5f", "packages": ["libpq-dev"]}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.integration", "sub_image": "integration"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "containers": [{"name": "test", "sub_image": "integration", "command": "/bin/bash -c 'while true; do sleep 3600; done'"}], "groups": [{"name": "dev", "members": ["hivemetastore.dev", "mongodb.dev", "minio.server", "postgresql.server", "pythonlyftdatavalidation.test", "mailer.dev"]}, {"name": "integration", "members": ["lyftdatavalidation.dev"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "sub_image": "integration", "command": "make test_integration", "group": "pythonlyftdatavalidation.dev", "container": "pythonlyftdatavalidation.test", "reports": {"junit": "build/integration.xml"}}, {"name": "integration_sharded", "type": "sharded", "group": "pythonlyftdatavalidation.dev", "container": "pythonlyftdatavalidation.test", "sub_image": "integration", "target": "tests/integration", "max_shard_duration": 8, "virtualenv": "service_venv", "autotrigger": false, "reports": {"junit": "build/integration.xml"}}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "lyftdatavalidation"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"mailer": null}}}}, "version": "4fc031e378932b703d6512c11e36957e725ecb73", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "cd9c1f80771b70a87955d14f24168afcb80a3f5f", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": "integration"}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "cd9c1f80771b70a87955d14f24168afcb80a3f5f", "sub_image": null, "external": false}}, "pythonlyftdatetime": {"name": "pythonlyftdatetime", "description": "Datetime functions.", "repository": "git@github.com:lyft/python-lyft-datetime.git", "image_type": "library", "slack": "#xd-hub", "team_email": "xd-eng@lyft.com", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:66d815e6ba03c9515c0c2273ecca13036015715d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests"]}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "7a59cecd08186e488994ad95881262813c6b42d1", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "pythonlyftdecompshadowcalls": {"name": "pythonlyftdecompshadowcalls", "description": "Helpers to create and manage shadow calls during a service decomp.", "repository": "git@github.com:lyft/python-lyft-decomp-shadow-calls.git", "slack": "#decomp-shadow-calls", "team_email": "radams@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:f2a98d180628850d25ce7fac6fc4c05c92439fb0"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "568bc33cd3e4b36ed649a296bfc34cb68b5da0d8", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "f2a98d180628850d25ce7fac6fc4c05c92439fb0", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "f2a98d180628850d25ce7fac6fc4c05c92439fb0", "sub_image": null, "external": false}}, "pythonlyftdetectionanalyticutils": {"name": "pythonlyftdetectionanalyticutils", "description": "Utilities for writing detection analytics services in python", "repository": "git@github.com:lyft/python-lyft-detection-analytic-utils.git", "slack": "#security-detection", "team_email": "security-detection@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:4b8c23b6728489591ca50b96f5d74825091057f0"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d1cb9c056a95d78685702e724b485de3870be5c2", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "e24d8a45f512bdc6897e9135bae3ce638596763d", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "4b8c23b6728489591ca50b96f5d74825091057f0", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d1cb9c056a95d78685702e724b485de3870be5c2", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "4b8c23b6728489591ca50b96f5d74825091057f0", "sub_image": null, "external": false}}, "pythonlyftenterprise": {"name": "pythonlyftenterprise", "description": "Library to share common code across enterprise services", "repository": "git@github.com:lyft/python-lyft-enterprise.git", "slack": "#enterprise-deploy", "team_email": "enterprise-eng@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:bfcab904bb6581a337a57520e83d05f99eff0bfd"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests --cov=lyft_enterprise --cov-fail-under=100 --cov-report=term-missing:skip-covered --cov-report=xml --cov-report=html -vvv"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "9eca9e32951ba306c34d2c8a2e86f68545a744b0", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "bfcab904bb6581a337a57520e83d05f99eff0bfd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "bfcab904bb6581a337a57520e83d05f99eff0bfd", "sub_image": null, "external": false}}, "pythonlyftetl": {"name": "pythonlyftetl", "description": "The stdlib for ETL development at Lyft", "repository": "git@github.com:lyft/python-lyft-etl.git", "slack": "#data-platform", "team_email": "dp-tools@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:66d815e6ba03c9515c0c2273ecca13036015715d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "fbfc3aaedaade949ad4072e0d115304c07f54bc1", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "pythonlyftexceptions": {"name": "pythonlyftexceptions", "description": "Common exceptions at Lyft", "repository": "git@github.com:lyft/python-lyft-exceptions.git", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "automatic": true, "legacy": true, "role": "lyftpypi-production-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}], "tests": [{"name": "python2", "type": "jailed", "command": "make unit_python2"}, {"name": "python3", "type": "jailed", "command": "make unit_python3"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "languages": ["python"], "image_type": "library", "version": "c6cfaf41629341ad1fda8657ac327bdfb7a3248a", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "pythonlyftfinancialtools": {"name": "pythonlyftfinancialtools", "description": "Library to encapsulate base code for financial data processing and reporting", "repository": "git@github.com:lyft/python-lyft-financial-tools.git", "image_type": "library", "languages": ["python"], "slack": "#financial-infra", "team_email": "financial-infra-dev@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipythonlibrary:4c8c826702be34d5e76f91244812acff644d19fd", "packages": ["libpq-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "47ecee84821c56c06a90fed965d755b6cae06051", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "4c8c826702be34d5e76f91244812acff644d19fd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "4c8c826702be34d5e76f91244812acff644d19fd", "sub_image": null, "external": false}}, "pythonlyftfireman": {"name": "pythonlyftfireman", "description": "Client for Lyft's internal Fireman service", "repository": "git@github.com:lyft/python-lyft-fireman.git", "image_type": "library", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "team_email": "observability-team@lyft.com", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:66d815e6ba03c9515c0c2273ecca13036015715d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "5fd195cde8370f2eefa54a50ed6b6d28fd1a317a", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "pythonlyftflake8plugins": {"name": "pythonlyftflake8plugins", "description": "Lyft plugins for flake8", "repository": "git@github.com:lyft/python-lyft-flake8-plugins.git", "image_type": "library", "slack": "#xd-hub", "team_email": "xd-eng@lyft.com", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:a4c9f130270ae9f5f2559df8d3e15c904da4ce51"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:32cbb00e867909feba916f53c84c05d17bad9c3f", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "py3k": {"linters": ["modernize", "pylint"]}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "fb7cab58de2d51c312f58c33f9443f9ea78d2730", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "a4c9f130270ae9f5f2559df8d3e15c904da4ce51", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "32cbb00e867909feba916f53c84c05d17bad9c3f", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "a4c9f130270ae9f5f2559df8d3e15c904da4ce51", "sub_image": null, "external": false}}, "pythonlyftflytekit": {"name": "pythonlyftflytekit", "description": "Lyft-internal extensions to the flytekit package for the purpose of building Flyte 2.0 workflows at Lyft.", "repository": "git@github.com:lyft/python-lyft-flytekit.git", "slack": "#flyte-eng", "team_email": "flyte-eng@lyft.com", "image_type": "library", "languages": ["python"], "docs": {"autogen_modules": ["flytekit/flytekit"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:2ce6d22d2593683967e2d381e8e026dc0868e62f", "sub_image": "precommit"}}]}}, "containers": [{"name": "test", "command": "sleep infinite"}], "groups": [{"name": "tester", "members": ["control.dev", "pythonlyftflytekit.test"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "c9d1ff7fc215833542632c3807cb424b04fdc2d2", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "2ce6d22d2593683967e2d381e8e026dc0868e62f", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "pythonlyftforecasting": {"name": "pythonlyftforecasting", "description": "Common utils for time series forecasting", "repository": "git@github.com:lyft/python-lyft-forecasting.git", "image_type": "library", "slack": "#forecasting-bots", "team_email": "forecasting-team@lyft.com", "pagerduty_escalation_policy": "Forecasting", "languages": ["python"], "docs": {"autogen_env": "python3.6", "autogen_modules": ["lyft_forecasting"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "cda62197880bfd1ed0d1b3181ca538341cbe1c0d", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "pythonlyftforecastingspark": {"name": "pythonlyftforecastingspark", "description": "Forcasting team spark library", "repository": "git@github.com:lyft/python-lyft-forecasting-spark.git", "slack": "#forecasting-bots", "team_email": "forecasting-bots@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:b5c594c2308fc948b5752ed14fe9ed93c0fb88f8"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:904cda9508e86d948f166d1ecf10a94c8d9ed7b0", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "py3k": {"linters": ["modernize", "pylint"]}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "7ed04979a912136fadf7a724ac35fee10cf2fae1", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "b5c594c2308fc948b5752ed14fe9ed93c0fb88f8", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "904cda9508e86d948f166d1ecf10a94c8d9ed7b0", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "b5c594c2308fc948b5752ed14fe9ed93c0fb88f8", "sub_image": null, "external": false}}, "pythonlyftfraudml": {"name": "pythonlyftfraudml", "description": "library containing fraud model training utilities", "repository": "git@github.com:lyft/python-lyft-fraudml.git", "slack": "#fraudsquad", "team_email": "integrity-eng@lists.lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:b5ebc24ed0f222c26afb72903b741487af01ca7e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "7f7e13779acec254b9acbb0b7c7d477a74dec63d", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "b5ebc24ed0f222c26afb72903b741487af01ca7e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "b5ebc24ed0f222c26afb72903b741487af01ca7e", "sub_image": null, "external": false}}, "pythonlyftfugue": {"name": "pythonlyftfugue", "description": "Library for Lyft ML micro-workflow", "repository": "git@github.com:lyft/python-lyft-fugue.git", "slack": "#forecasting-bots", "team_email": "forecasting-bots@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:33c3858ae5c7dee41a02ede081071a230c234049"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:cb417f6767ff5d9cbf6dbf99526d361bcefdf4a5", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "py3k": {"linters": ["modernize", "pylint"]}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "6f7b62b580c808d0db7ec509432dbbcb61673070", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "33c3858ae5c7dee41a02ede081071a230c234049", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "cb417f6767ff5d9cbf6dbf99526d361bcefdf4a5", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "33c3858ae5c7dee41a02ede081071a230c234049", "sub_image": null, "external": false}}, "pythonlyftfuguespark": {"name": "pythonlyftfuguespark", "description": "Spark extension for Fugue project", "repository": "git@github.com:lyft/python-lyft-fugue-spark.git", "slack": "#forecasting-bots", "team_email": "forecasting-bots@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:33c3858ae5c7dee41a02ede081071a230c234049"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:cb417f6767ff5d9cbf6dbf99526d361bcefdf4a5", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "py3k": {"linters": ["modernize", "pylint"]}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "dd51087eb459f3916e68d49f1095668f91fcb212", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "33c3858ae5c7dee41a02ede081071a230c234049", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "cb417f6767ff5d9cbf6dbf99526d361bcefdf4a5", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "33c3858ae5c7dee41a02ede081071a230c234049", "sub_image": null, "external": false}}, "pythonlyftfuguesql": {"name": "pythonlyftfuguesql", "description": "SQL Language for Lyft ml micro workflow", "repository": "git@github.com:lyft/python-lyft-fugue-sql.git", "slack": "#forecasting-bots", "team_email": "forecasting-bots@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:33c3858ae5c7dee41a02ede081071a230c234049"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:cb417f6767ff5d9cbf6dbf99526d361bcefdf4a5", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "py3k": {"linters": ["modernize", "pylint"]}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "dcaec0146a9c3eb6185bd9fb8cc2b5867860bc71", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "33c3858ae5c7dee41a02ede081071a230c234049", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "cb417f6767ff5d9cbf6dbf99526d361bcefdf4a5", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "33c3858ae5c7dee41a02ede081071a230c234049", "sub_image": null, "external": false}}, "pythonlyftgeoboost": {"name": "pythonlyftgeoboost", "description": "Machine learning library based on Gradient Boosted Trees with special features for spatial and temporal data", "repository": "git@github.com:lyft/python-lyft-geoboost.git", "slack": "#geo-boost", "team_email": "ocohen@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "f360a442b72b75d60fe611517537a20cf8e6c232", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "pythonlyftgeotranslationclient": {"name": "pythonlyftgeotranslationclient", "description": "Python library for performing geospatial translations for simulated tests", "repository": "git@github.com:lyft/python-geotranslation-client.git", "team_email": "locations@lyft.com", "slack": "#atlantis", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "2872dbd57c7a110448756ff50350612afe2d1699", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "pythonlyftgevent": {"name": "pythonlyftgevent", "description": "Python library for gevent utilities.", "repository": "git@github.com:lyft/python-lyft-gevent.git", "image_type": "library", "slack": "#dev-null", "team_email": "devnull@lyft.com", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "3e2ecee355e6e2c1dc939c7d55164c06135009d9", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "pythonlyftinsurancepolicies": {"name": "pythonlyftinsurancepolicies", "description": "A package for reading static insurance policy data", "repository": "git@github.com:lyft/python-lyft-insurance-policies.git", "slack": "#insurance", "team_email": "insurance-tech@lists.lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:c5f0a2aa2e21b525c8a4abe7227c7e2253a53d33"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests/unit"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "ecfa4e1cc9f6c358e9a43b20bfcb155d805801e2", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "c5f0a2aa2e21b525c8a4abe7227c7e2253a53d33", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "c5f0a2aa2e21b525c8a4abe7227c7e2253a53d33", "sub_image": null, "external": false}}, "pythonlyftintrepidstdlib": {"name": "pythonlyftintrepidstdlib", "description": "Core HTE and optimization algorithms along with helper functions used for individualized treatment prediction", "repository": "git@github.com:lyft/python-lyft-intrepid-stdlib.git", "slack": "#intrepid-dev", "team_email": "rider-incentives-eng@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.rimage", "sub_image": "rimage"}}]}}, "containers": [{"name": "rimage", "privileged": true, "command": "sleep infinity", "sub_image": "rimage"}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "sub_image": "rimage", "framework": "pytest", "targets": ["tests"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "cbb69366d53469765750e70b31e38aed2ddbff1c", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "rimages", "version": "17ed34eb0a281139a8f4548cd4898e940fb4ae22", "sub_image": null, "external": false}, "sub_image": "rimage"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "pythonlyftlbsscience": {"name": "pythonlyftlbsscience", "description": "Models implemented by LBS-Science", "repository": "git@github.com:lyft/python-lyft-lbs-science.git", "slack": "#lbs-science-dev", "team_email": "lbs-science@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipythonlibrary:7631b0bdfcc24b8ad06701f697cd54c9db8005f2", "packages": ["libkrb5-dev", "libpq-dev"]}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile", "sub_image": "lyftlearn"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "containers": [{"name": "spin", "command": "sleep infinity", "sub_image": "lyftlearn"}, {"name": "notebook", "command": "jupyter lab --ip='0.0.0.0' --allow-root --no-browser --NotebookApp.token='' --NotebookApp.password=''", "sub_image": "lyftlearn", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}], "lyftlearn": {}, "version": "5e30cc48bf73b81a7df6f79d799eec2353a88416", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "7631b0bdfcc24b8ad06701f697cd54c9db8005f2", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "lyftlearnbase", "version": "0f2151a39d52a1927827f91af53a1f9785297ce0", "sub_image": null, "external": false}, "sub_image": "lyftlearn"}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "7631b0bdfcc24b8ad06701f697cd54c9db8005f2", "sub_image": null, "external": false}}, "pythonlyftlgtmclient": {"name": "pythonlyftlgtmclient", "description": "Python client for Semmle LGTM", "repository": "git@github.com:lyft/python-lyft-lgtm-client.git", "slack": "#security", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "team_email": "security-engineering@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:e3c1563feb37914a9ae3290cdec86a709d556f16"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "54a4b09cffb284beb5ebf7e31988de60031183f2", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "e3c1563feb37914a9ae3290cdec86a709d556f16", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "e3c1563feb37914a9ae3290cdec86a709d556f16", "sub_image": null, "external": false}}, "pythonlyftlocalization": {"name": "pythonlyftlocalization", "description": "Lyft python library for localization", "repository": "git@github.com:lyft/python-lyft-localization.git", "image_type": "library", "slack": "#i18n", "team_email": "i18n@lyft.com", "languages": ["python"], "credentials": true, "credentials_legacy": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "container", "command": "echo \"Hello pythonlyftlocalization\""}], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy"}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true}], "version": "0bdedc468ad08cda2aafd4f192b2882c4d7abdfe", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "pythonlyftlyftlearncore": {"name": "pythonlyftlyftlearncore", "description": "Core API for lyftlearn", "repository": "git@github.com:lyft/python-lyft-lyftlearncore.git", "slack": "#ml-platform-bots", "team_email": "ds-platform@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:66d815e6ba03c9515c0c2273ecca13036015715d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "a7cbad1fe07c995386a69e8a28730af61f1dc9eb", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "pythonlyftlyftlearnimagetools": {"name": "pythonlyftlyftlearnimagetools", "description": "Tooling for Lyftlearn images", "repository": "git@github.com:lyft/python-lyft-lyftlearnimagetools.git", "slack": "#ml-platform-bots", "team_email": "ds-platform@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "containers": [{"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "46176e62b940e423f7203dc1491f98c5f2313b5f", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "pythonlyftmembershipscommon": {"name": "pythonlyftmembershipscommon", "description": "Common data models and logic for Memberships services", "repository": "git@github.com:lyft/python-lyft-memberships-common.git", "slack": "#memberships-bots", "team_email": "rider-memberships-eng@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:8a37b94c533d24791306a0319071ba58eef2952f"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "380dcb86500e5fd57a8c1b6901030a2525480a1b", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "8a37b94c533d24791306a0319071ba58eef2952f", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "8a37b94c533d24791306a0319071ba58eef2952f", "sub_image": null, "external": false}}, "pythonlyftmlflow": {"name": "pythonlyftmlflow", "description": "Library for Lyft ML micro-workflow", "repository": "git@github.com:lyft/python-lyft-ml-flow.git", "slack": "#forecasting-bots", "team_email": "forecasting-bots@lyft.com", "image_type": "library", "languages": ["java", "python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:f2a98d180628850d25ce7fac6fc4c05c92439fb0"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "4914582b98023d2f661e9ab0c185db8223116a48", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "f2a98d180628850d25ce7fac6fc4c05c92439fb0", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "f2a98d180628850d25ce7fac6fc4c05c92439fb0", "sub_image": null, "external": false}}, "pythonlyftmlflowexp": {"name": "pythonlyftmlflowexp", "description": "Experimental ml micro workflow", "repository": "git@github.com:lyft/python-lyft-ml-flow-exp.git", "slack": "#forecasting-bots", "team_email": "forecasting-bots@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f769f96d9c865b2a10affa0f21862d3148afce21", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "ad92b160c8060a1122f140a0e2c67d84ba454af2", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f769f96d9c865b2a10affa0f21862d3148afce21", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "pythonlyftmlflowspark": {"name": "pythonlyftmlflowspark", "description": "Spark extension for Fugue project", "repository": "git@github.com:lyft/python-lyft-ml-flow-spark.git", "slack": "#forecasting-bots", "team_email": "forecasting-bots@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:33c3858ae5c7dee41a02ede081071a230c234049"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:28e39e6f597d94733f236de463dc9d18ad6af692", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "py3k": {"linters": ["modernize", "pylint"]}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "9874dfa39ff08f651d0b9eb20a96263492e72074", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "33c3858ae5c7dee41a02ede081071a230c234049", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "28e39e6f597d94733f236de463dc9d18ad6af692", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "33c3858ae5c7dee41a02ede081071a230c234049", "sub_image": null, "external": false}}, "pythonlyftmlflowsql": {"name": "pythonlyftmlflowsql", "description": "SQL Language for Lyft ml micro workflow", "repository": "git@github.com:lyft/python-lyft-ml-flow-sql.git", "slack": "#forecasting-bots", "team_email": "forecasting-bots@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:a0cb4e2766bc8fd66915739084ee5e961a0cb071"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:28e39e6f597d94733f236de463dc9d18ad6af692", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "py3k": {"linters": ["modernize", "pylint"]}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "867d16d166ba13258d2d756fce953e7c57c23d9f", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "a0cb4e2766bc8fd66915739084ee5e961a0cb071", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "28e39e6f597d94733f236de463dc9d18ad6af692", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "a0cb4e2766bc8fd66915739084ee5e961a0cb071", "sub_image": null, "external": false}}, "pythonlyftmozart": {"name": "pythonlyftmozart", "description": "Mozart Python SDK", "repository": "git@github.com:lyft/datacontrolservices.git:mozart/sdk/python", "slack": "#mozart-dev", "team_email": "mozart-dev@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "6ab56d8ad01e446adaa2e8a73ee7bf0b6ef30f64", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "pythonlyftnotary": {"name": "pythonlyftnotary", "description": "Library for verifying client signatures", "repository": "git@github.com:lyft/python-lyft-notary.git", "slack": "#fraudsquad", "team_email": "dev-fraud@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "4e02cc2a63929801567aeeab75623e7a4e9990a5", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "pythonlyftonlinelearning": {"name": "pythonlyftonlinelearning", "description": "Online learning python lib", "repository": "git@github.com:lyft/python-lyft-onlinelearning.git", "slack": "#onlinelearning", "team_email": "marketplace-labs-eng@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:1678499b05ddb7f22194f1519ccdec75e36891da"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:a2a148f3c4ba6040ca9ebd40dd21772f53aa1f1b", "sub_image": "precommit"}}]}}, "containers": [{"name": "test", "command": "/bin/bash -c 'sleep infinity'"}], "groups": [{"name": "integration", "members": ["pythonlyftonlinelearning.test"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests/unit"]}, {"name": "integration", "type": "execution", "command": "python3 -m pytest tests/integration", "container": "pythonlyftonlinelearning.test", "group": "pythonlyftonlinelearning.integration", "virtualenv": "service_venv", "reports": {"junit": "build/integration.xml"}, "autotrigger": false}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "2224e4c2dbe21a14ce7a1806d255307daa852190", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "1678499b05ddb7f22194f1519ccdec75e36891da", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "a2a148f3c4ba6040ca9ebd40dd21772f53aa1f1b", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "1678499b05ddb7f22194f1519ccdec75e36891da", "sub_image": null, "external": false}}, "pythonlyftpaxincentiveslib": {"name": "pythonlyftpaxincentiveslib", "description": "Shared logic for PAX incentives services", "repository": "git@github.com:lyft/python-lyft-pax-incentives-lib.git", "slack": "#pax-engagement-dev", "team_email": "pax-incentives-eng@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:8bfed34ff4db6b8124cd63f59b39569aca083f17"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:b94838691bc7132a22e1d0885aef4d6ff1ab75d5", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "f60da79de64feeddd1da584adb7adcb58d4133b4", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "8bfed34ff4db6b8124cd63f59b39569aca083f17", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "b94838691bc7132a22e1d0885aef4d6ff1ab75d5", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "8bfed34ff4db6b8124cd63f59b39569aca083f17", "sub_image": null, "external": false}}, "pythonlyftplannedsupplymodels": {"name": "pythonlyftplannedsupplymodels", "description": "Python library for storing the planned supply models.", "repository": "git@github.com:lyft/python-lyft-planned-supply-models.git", "slack": "#driver-labs-bot", "team_email": "dxp-science@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:8a37b94c533d24791306a0319071ba58eef2952f"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure", "autotrigger": false}, {"name": "unit", "type": "jailed", "framework": "pytest", "autotrigger": false}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "e23d53e44605dce58c3a5d9328b8bf5190220797", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "8a37b94c533d24791306a0319071ba58eef2952f", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "8a37b94c533d24791306a0319071ba58eef2952f", "sub_image": null, "external": false}}, "pythonlyftppzcommon": {"name": "pythonlyftppzcommon", "description": "PPZ Library to share code primarily among PPZ services", "repository": "git@github.com:lyft/python-lyft-ppz-common.git", "slack": "#de-positioning-deploy", "team_email": "pacman-eng@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:4d476d359926d519b85089598f04ac4cb40dc70d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "0e72252abe1f572612cb4a0bd90da96be2751ef9", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "4d476d359926d519b85089598f04ac4cb40dc70d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "4d476d359926d519b85089598f04ac4cb40dc70d", "sub_image": null, "external": false}}, "pythonlyftpredispatch": {"name": "pythonlyftpredispatch", "description": "Python library for pre dispatch algorithms", "repository": "git@github.com:lyft/python-lyft-pre-dispatch.git", "slack": "#venues", "team_email": "venues-eng@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:e3c1563feb37914a9ae3290cdec86a709d556f16"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "32678c15325f2a52f229a890eeb0e46ab26a8407", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "e3c1563feb37914a9ae3290cdec86a709d556f16", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "e3c1563feb37914a9ae3290cdec86a709d556f16", "sub_image": null, "external": false}}, "pythonlyftpricingstdlib": {"name": "pythonlyftpricingstdlib", "description": "A Python library of common idioms used in pricing.", "repository": "git@github.com:lyft/python-lyft-pricing-stdlib.git", "slack": "#pricing-adaptive", "team_email": "adaptive-pricing@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:4fb9992beaa2dcf838dd4d66458e1bcbede1bd5e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "79b8afb7cfffd6ec06a4d5b3d74873e04f895526", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "4fb9992beaa2dcf838dd4d66458e1bcbede1bd5e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "4fb9992beaa2dcf838dd4d66458e1bcbede1bd5e", "sub_image": null, "external": false}}, "pythonlyftprism": {"name": "pythonlyftprism", "description": "Python library for interacting with PRISM conversion model", "repository": "git@github.com:lyft/python-lyft-prism.git", "slack": "#shield-ci", "team_email": "shield@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "b0379591a669b73c4ee808db415c5a7ebb05e82b", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "pythonlyftprivacytools": {"name": "pythonlyftprivacytools", "description": "User-privacy rights tools will be stored as a python library in this repo", "repository": "git@github.com:lyft/python-lyft-privacytools.git", "slack": "#privacy-tools", "team_email": "urm-team@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:66d815e6ba03c9515c0c2273ecca13036015715d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "notification_overrides": {"pr_merge": {"slack": "#upr-team"}}, "version": "2fd2cc6006b95c99b59d5dd03db18c50c9d1dfcf", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "pythonlyftprocessorid": {"name": "pythonlyftprocessorid", "description": "Restricted Python library for processor id information", "repository": "git@github.com:lyft/python-lyft-processor-id.git", "slack": "#financial-infra", "team_email": "financial-infra@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:66d815e6ba03c9515c0c2273ecca13036015715d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "test", "command": "/bin/bash -c 'sleep infinity'"}], "groups": [{"name": "dev", "members": ["hivemetastore.dev", "postgresql.server", "pythonlyftprocessorid.test"]}, {"name": "integration", "members": ["hivemetastore.dev", "postgresql.server", "pythonlyftprocessorid.test"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "command": "make test_integration", "group": "pythonlyftprocessorid.dev", "container": "pythonlyftprocessorid.test", "reports": {"junit": "build/integration.xml"}}, {"name": "integration_sharded", "type": "sharded", "group": "pythonlyftprocessorid.dev", "container": "pythonlyftprocessorid.test", "target": "tests/integration", "max_shard_duration": 8, "virtualenv": "service_venv", "autotrigger": false, "reports": {"junit": "build/integration.xml"}}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "3b51737c686f84ed1487e7b99cf2168e2949218d", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "pythonlyftprofiling": {"name": "pythonlyftprofiling", "description": "Tools for profiling Python apps", "repository": "git@github.com:lyft/python-lyft-profiling.git", "image_type": "library", "slack": "#notifications", "team_email": "notifications-eng@lyft.com", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:33c3858ae5c7dee41a02ede081071a230c234049"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:cb417f6767ff5d9cbf6dbf99526d361bcefdf4a5", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "py3k": {"linters": ["modernize", "pylint"]}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "a6165196120ea263e037a6b9bb680101c37f67c9", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "33c3858ae5c7dee41a02ede081071a230c234049", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "cb417f6767ff5d9cbf6dbf99526d361bcefdf4a5", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "33c3858ae5c7dee41a02ede081071a230c234049", "sub_image": null, "external": false}}, "pythonlyftpythonavkafkalib": {"name": "pythonlyftpythonavkafkalib", "description": "Lib wrapping confluent kafka lib, with different default config ,monitoring plug in (using lyft-kafka), and enforcing kafka conventions defined for L5 org", "repository": "git@github.com:lyft/avkafka-lib.git", "image_type": "library", "slack": "#av-backend-deploys", "team_email": "av-backend@lyft.com", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:4421cb76458c161478182cef2d99b93414133b50"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:32cbb00e867909feba916f53c84c05d17bad9c3f", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "py3k": {"linters": ["modernize", "pylint"]}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "90ee3da0bcb9fb89ffba8ff6c7a2309be1309d0a", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "4421cb76458c161478182cef2d99b93414133b50", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "32cbb00e867909feba916f53c84c05d17bad9c3f", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "4421cb76458c161478182cef2d99b93414133b50", "sub_image": null, "external": false}}, "pythonlyftratelimit": {"name": "pythonlyftratelimit", "description": "client for the ratelimit service", "repository": "git@github.com:lyft/python-lyft-ratelimit.git", "image_type": "library", "languages": ["python"], "credentials": true, "tests": [{"name": "python2", "type": "jailed", "command": "python -3 -m pytest tests"}, {"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest tests"}, {"name": "lint", "type": "jailed", "command": "flake8 ."}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy"}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true}], "python": {"py3k": {"linters": ["modernize", "pylint"]}}, "version": "7711cf3848e2cfe24b64b471c445c780fda91157", "images": [{"parent": {"name": "pythonlibrary", "version": "b8cb0f3c13be06780f6a45c79670f371566566f5", "external": false}, "sub_image": null}], "parent": {"name": "pythonlibrary", "version": "b8cb0f3c13be06780f6a45c79670f371566566f5", "external": false}}, "pythonlyftriderperks": {"name": "pythonlyftriderperks", "description": "Python client for riderperks service, which would provide info about available perks and eligibility of perks", "repository": "git@github.com:lyft/python-lyft-riderperks.git", "slack": "#memberships", "team_email": "rider-memberships-eng@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "a730324320f635239e4e7d2ce3e410db9034d0d2", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "pythonlyftriskmodels": {"name": "pythonlyftriskmodels", "description": "code for creating and executing machine learning models to minimize insurance and accident risk on Lyft", "repository": "git@github.com:lyft/python-lyft-risk-models.git", "image_type": "library", "slack": "#insurance", "team_email": "insurance-tech@lists.lyft.com", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipythonlibrary:66d815e6ba03c9515c0c2273ecca13036015715d", "packages": ["libkrb5-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "devel", "privileged": true, "command": "sleep infinity"}], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "3a1051a1397ae82283e2786be7d340127a5c2432", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "66d815e6ba03c9515c0c2273ecca13036015715d", "sub_image": null, "external": false}}, "pythonlyftspark": {"name": "pythonlyftspark", "description": "Python library for Spark on K8s infrastructure @ Lyft", "repository": "git@github.com:lyft/python-lyft-spark.git", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "slack": "#spark-dev-bot", "team_email": "spark-dev@lyft.com", "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "7f13defcd290e49da4631397a0f740daea74e500", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "pythonlyftspc": {"name": "pythonlyftspc", "description": "A statistical process control package", "repository": "git@github.com:lyft/python-lyft-spc.git", "slack": "#lyft_spc", "team_email": "lyft_spc@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:698ed39b35403bed0de48eedd4c32dd22c5d5d7d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "98f76167be85d0124578ff13592fb743085c2fde", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "698ed39b35403bed0de48eedd4c32dd22c5d5d7d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "698ed39b35403bed0de48eedd4c32dd22c5d5d7d", "sub_image": null, "external": false}}, "pythonlyftspconfigstore": {"name": "pythonlyftspconfigstore", "description": "Client library for interacting with the streaming config store used for blue/green deployments of streaming applications", "repository": "git@github.com:lyft/python-lyft-spconfigstore.git", "slack": "#streaming-compute", "team_email": "streaming-compute@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:4c8c826702be34d5e76f91244812acff644d19fd"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest --junit-xml=build/test_result.xml --cov=tests/unit/ --no-cov-on-fail --cov-report=xml:build/coverage.xml -- tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "e49a3a4a3d135d4e4f8b83993b90052e090844c1", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "4c8c826702be34d5e76f91244812acff644d19fd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "4c8c826702be34d5e76f91244812acff644d19fd", "sub_image": null, "external": false}}, "pythonlyftstreamingforecasterlib": {"name": "pythonlyftstreamingforecasterlib", "description": "Utilities for StreamingForecaster models", "repository": "git@github.com:lyft/python-lyft-streamingforecasterlib.git", "image_type": "library", "slack": "#forecasting-bots", "team_email": "forecasting-team@lyft.com", "pagerduty_escalation_policy": "Forecasting", "languages": ["python"], "docs": {"autogen_env": "python3.7", "autogen_modules": ["lyft_streamingforecasterlib"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:cd9c1f80771b70a87955d14f24168afcb80a3f5f"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "c73e015243e2f193a6273b6c236bc2e35faa9c0b", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "cd9c1f80771b70a87955d14f24168afcb80a3f5f", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "cd9c1f80771b70a87955d14f24168afcb80a3f5f", "sub_image": null, "external": false}}, "pythonlyftsuntime": {"name": "pythonlyftsuntime", "description": "A python repository for sunrise and sunset calculations", "repository": "git@github.com:lyft/python-lyft-suntime.git", "slack": "#brand-xp", "team_email": "brand-xp@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:a1ce1358ebab0b42ec13f11280842e5f939df29d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:38c8e1fa0300cd528521868e1aa01d9a636839e2", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "fc7541fce8d9413bd50454a50549d831288d0678", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "a1ce1358ebab0b42ec13f11280842e5f939df29d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "38c8e1fa0300cd528521868e1aa01d9a636839e2", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "a1ce1358ebab0b42ec13f11280842e5f939df29d", "sub_image": null, "external": false}}, "pythonlyfttaskqueueclient": {"name": "pythonlyfttaskqueueclient", "description": "Python client for interacting with TaskQueue", "repository": "git@github.com:lyft/python-lyft-taskqueue-client.git", "slack": "#async-tasks-platform", "team_email": "core-infra-tools@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:4d476d359926d519b85089598f04ac4cb40dc70d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:b3a6d48dc9c6678285cea7a073aeb8b4e0108a85", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests"]}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "18b1c797574d4e1524e40e9e531ac7717c4cc5ec", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "4d476d359926d519b85089598f04ac4cb40dc70d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "b3a6d48dc9c6678285cea7a073aeb8b4e0108a85", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "4d476d359926d519b85089598f04ac4cb40dc70d", "sub_image": null, "external": false}}, "pythonlyfttimeseriescounter": {"name": "pythonlyfttimeseriescounter", "description": "python lib for time series counter on top of redis", "repository": "git@github.com:lyft/python-lyft-timeseriescounter.git", "image_type": "library", "slack": "#notifications", "team_email": "notifications-dev@lyft.com", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:562ba126965b0517d8d18f346e55a9027d9eb4ac"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:9bd31d30c8ac5f6d50dec5e4fdd8075729395c64", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "py3k": {"linters": ["modernize", "pylint"]}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "1b5040343e30987ad25958e65a7c6c7df9fe65f2", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "562ba126965b0517d8d18f346e55a9027d9eb4ac", "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "9bd31d30c8ac5f6d50dec5e4fdd8075729395c64", "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "562ba126965b0517d8d18f346e55a9027d9eb4ac", "external": false}}, "pythonlyftvehicles": {"name": "pythonlyftvehicles", "description": "Python library for shared vehicle utilities.", "repository": "git@github.com:lyft/python-lyft-vehicles.git", "slack": "#fm-hub", "team_email": "xd-fm-eng@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "python2", "type": "jailed", "command": "python2 -m pytest tests"}, {"name": "python3", "type": "jailed", "command": "python3 -m pytest tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "2a5eacf8224c218b454a1cee287fafb6d3c8f00a", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "pythonlyftvertextaxclient": {"name": "pythonlyftvertextaxclient", "description": "client for vertex", "repository": "git@github.com:lyft/python-lyft-vertex-tax-client.git", "slack": "#vertex-tax-integration", "team_email": "vertex-tax-integration@lyft.com", "image_type": "library", "notification_overrides": {"deploy": {"slack": "#vertex-tax-integration", "environments": ["production", "canary", "staging"]}, "deploy_failure": {"slack": "#vertex-tax-integration"}, "test_failure": {"slack": "#vertex-tax-integration", "email": "vertex-tax-integration@lyft.com", "environments": ["production"]}, "master_failure": {"slack": "#vertex-tax-integration"}, "pr_merge": {"slack": "#vertex-tax-integration"}, "pr_open": {"slack": "#vertex-tax-integration"}}, "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipythonlibrary:8eb74e3f575bc58ffe068e5e42d9d6e4f4aef8c8", "packages": ["pkg-config", "libxmlsec1-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure", "run_in_pr": true, "run_in_dev": true}, {"name": "unit", "type": "jailed", "framework": "pytest", "run_in_pr": true, "run_in_dev": true}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "65231999baeb849872ee19e10f53442ade7cd219", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "8eb74e3f575bc58ffe068e5e42d9d6e4f4aef8c8", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "8eb74e3f575bc58ffe068e5e42d9d6e4f4aef8c8", "sub_image": null, "external": false}}, "pythonlyftvulndbmirrorclient": {"name": "pythonlyftvulndbmirrorclient", "description": "Python client library for the vulndbmirror service.", "repository": "git@github.com:lyft/python-lyft-vulndbmirrorclient.git", "slack": "#infraintelgraph", "team_email": "security-intel@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:32ec3d3b9e333e31b147b448e462f0fc4b795b7d"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:32cbb00e867909feba916f53c84c05d17bad9c3f", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "97516d2667f96b914c881bdea835c1213ec91c9d", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "32ec3d3b9e333e31b147b448e462f0fc4b795b7d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "32cbb00e867909feba916f53c84c05d17bad9c3f", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "32ec3d3b9e333e31b147b448e462f0fc4b795b7d", "sub_image": null, "external": false}}, "pythonlyftweb": {"name": "pythonlyftweb", "description": "Library for publicly served web APIs", "repository": "git@github.com:lyft/python-lyft-web.git", "slack": "#frontend", "team_email": "frontend@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit2", "type": "jailed", "command": "env PYTHON_VERSION=2 python -3 -m pytest tests"}, {"name": "unit3", "type": "jailed", "command": "env PYTHON_VERSION=3 python3 -bb -m pytest tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "ed225f6d0cf42a51a32c6bed795f4ac3abddd482", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "pythonlyftwfql": {"name": "pythonlyftwfql", "description": "wavefrontql parser and linter", "repository": "git@github.com:lyft/wavefrontql.git", "image_type": "library", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#observabot"}, "pr_merge": {"slack": "#observabot"}}, "team_email": "observability-visibility-team@lyft.com", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:8a37b94c533d24791306a0319071ba58eef2952f"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": "precommit"}}]}}, "tests": [{"name": "sanity", "type": "jailed", "command": "python3 run_tests.py"}, {"name": "lint", "type": "jailed", "command": "pre-commit run --all-files --show-diff-on-failure", "sub_image": "precommit"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "version": "73059e052453cfceb3a4b385d7cf88bee62ba92e", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "8a37b94c533d24791306a0319071ba58eef2952f", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "8a37b94c533d24791306a0319071ba58eef2952f", "sub_image": null, "external": false}}, "pythontnwanalyticslib": {"name": "pythontnwanalyticslib", "description": "Common code required for TNW Python analytics", "repository": "git@github.com:lyft/tnw-PyAnalyticsCommon3.git", "slack": "#tnw-bots", "team_email": "zlongogalea@lyft.com", "image_type": "library", "languages": ["python"], "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:e1806b5eb105d190089a7d5dd33ca0a28390d38e"}}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "automatic": true, "role": "lyftpypi-production-iad-deploy", "orca": [{"region": "iad"}]}], "version": "cdad862d5e57410a89797bcf7609cf74fb05956f", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "e1806b5eb105d190089a7d5dd33ca0a28390d38e", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "e1806b5eb105d190089a7d5dd33ca0a28390d38e", "sub_image": null, "external": false}}, "qdssdkpy": {"name": "qdssdkpy", "description": "private repackaging of qds-sdk with python3 patches", "repository": "git@github.com:lyft/qds-sdk-py-private.git", "credentials": true, "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:8eb01319a937b7398aefeac54f187d178e660185"}}, "tests": [{"name": "unit", "type": "jailed", "command": "pytest"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "automatic": true}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true}], "languages": ["python"], "image_type": "library", "version": "048250e24f87dfe013890261780bb1e74284781e", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "8eb01319a937b7398aefeac54f187d178e660185", "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "8eb01319a937b7398aefeac54f187d178e660185", "external": false}}, "queryxp": {"name": "queryxp", "description": "Query XP backend svc", "repository": "git@github.com:lyft/queryxp.git", "slack": "#dap-dev-ops", "team_email": "vap-eng@lyft.com", "pagerduty_escalation_policy": "Superset", "image_type": "service", "service_tier": 3, "languages": ["python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "packages": ["libmysqlclient-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s", "packages": ["libmysqlclient-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --timeout 600 --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "queryxp.legacy", "mozartgateway.dev"]}, {"name": "service_group", "members": ["queryxp.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "queryxp.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "queryxp.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "queryxp.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "bake_time_minutes": 0, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "bake_time_minutes": 0, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "queryxp"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"mozartgateway": null}}}}, "version": "03ac18fb8b986b1d4245c7dbf3c5cc9dd882136a", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "queryxpint": {"name": "queryxpint", "description": "Query experience (qubole-like) frontend", "repository": "git@github.com:lyft/queryxpint.git", "slack": "#dap-dev-ops", "team_email": "vap-eng@lyft.com", "pagerduty_escalation_policy": "Superset", "image_type": "service", "service_tier": 3, "languages": ["javascript"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/s2inode:service.a5ad0b823f5be56d35bd730beaa050a09f49628c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "cdnupload", "command": "/code/queryxpint/cdn-upload", "sub_image": "k8s"}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "queryxpint.legacy", "queryxp.dev"]}, {"name": "service_group", "members": ["queryxpint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "queryxpint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "facets": [{"name": "assets", "member": "feexample.cdnupload", "type": "job"}, {"name": "main", "member": "queryxpint.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "queryxpint.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "queryxpint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null, "queryxp": null}}}}, "version": "763046fd0736d5574661da124a3b614f2d625f1e", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2inode", "version": "a5ad0b823f5be56d35bd730beaa050a09f49628c", "sub_image": "service", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "rangerinfra": {"name": "rangerinfra", "description": "Infra for Apache Ranger", "repository": "git@github.com:lyft/rangerinfra.git", "slack": "#data-platform-dev", "team_email": "data-platform-security-dev@lyft.com", "pagerduty_escalation_policy": "Data Security", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "web", "port": 6080}]}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "rangerinfra.legacy"]}], "deploy": [{"name": "staging", "orca": [{"region": "iad"}], "legacy": true, "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "rangerinfra"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:6080"}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "version": "3e2b66b15f8264378a1e8c84e4ecc659b75ff670", "images": [{"parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}}, "ratecards": {"name": "ratecards", "description": "ratecards", "repository": "git@github.com:lyft/ratecards.git", "service_tier": 0, "slack": "#rate-cards-eng", "team_email": "rate-cards-service-team@lyft.com", "pagerduty_escalation_policy": "Pricing Experience", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "ratecards", "workdir": "/code/ratecards", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}], "facets": [{"name": "main", "member": "ratecards.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 12}}}}, {"name": "canary", "member": "ratecards.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "configsets": ["segmentedratecarddata"], "groups": [{"name": "dev", "members": ["control.dev", "regions.dev", "ratecards.legacy", "rides.dev", "routes.dev", "idl.server", "supply.dev", "dsfeatures.dev"]}, {"name": "integration", "members": ["ratecards.dev"]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "tests": [{"name": "startup", "type": "startup", "group": "ratecards.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "ratecards.integration", "container": "ratecards.legacy", "command": "make integration"}, {"name": "coverage", "type": "jailed", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}], "envoy": {"profile": "go", "settings": {"services": [{"name": "ratecards"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 900}}}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "internal_hosts": {"regions": null, "rides": null, "routes": null, "supply": null, "tcs": null, "dsfeatures": null}}}}, "logging": {"ratecards": {"fields": {"requestId": "keyword", "mapId": "long", "lat": "float", "lng": "float", "error": "keyword", "user-agent": "keyword", "method": "keyword", "protocol": "keyword", "currency": "keyword", "stack": "keyword", "unknownDistanceUnits": "keyword", "panic": "boolean"}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "4d314e7bb7500bb38e62084ccc12d1d3a4f7d151", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "ratelimit": {"name": "ratelimit", "description": "ratelimit", "repository": "git@github.com:lyft/ratelimit-private.git", "containers": [{"name": "legacy", "workdir": "/go/src/github.com/lyft/ratelimit-private", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- ratelimit-private", "workdir": "/code/ratelimit-private", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "ratelimit.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "ratelimit.dev"}, {"name": "unit", "type": "execution", "group": "ratelimit.dev", "container": "ratelimit.legacy", "command": "make test_unit"}], "slack": "#networking", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "network-team@lyft.com", "notification_overrides": {"deploy": {"slack": "#networking-bots", "environments": ["production", "staging"]}, "pr_merge": {"slack": "#networking-bots"}}, "pagerduty_escalation_policy": "Networking", "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}], {"name": "copy_ratelimit_check_to_s3", "legacy": true, "kubernetes": {"enabled": false}, "automatic": true, "orca": []}], "languages": ["go"], "image_type": "service", "service_tier": 1, "envoy": {"profile": "go", "settings": {"services": [{"name": "ratelimit"}], "common_settings": {"redis": {"ratelimitmultiredis": {"port": 6380, "health_check": {"timeout_ms": 1000, "interval_ms": 5000}, "outlier_detection": {"consecutive_5xx": 100, "enforcing_success_rate": 0}}, "ratelimitpersecondmultiredis": {"port": 6381, "health_check": {"timeout_ms": 1000, "interval_ms": 5000}, "outlier_detection": {"consecutive_5xx": 100, "enforcing_success_rate": 0}}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/opsbase:deb42d25da0e6d5fe565c019883e458b4b31b696"}}]}}, "facets": [{"name": "main", "member": "ratelimit.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 30, "max_size": 60, "criteria": {"cpu_target": 40}}}}}, {"name": "canary", "member": "ratelimit.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "version": "f2b1ee79d86d6d7e0243b8a50fe7d470c952f11f", "images": [{"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "ratings": {"name": "ratings", "description": "Manages and tracks ratings and flags for users in Lyft", "repository": "git@github.com:lyft/ratings.git", "service_tier": 1, "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn ratings:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/ratings", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}], "facets": [{"name": "main", "member": "ratings.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 25}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 20}}}}, {"name": "canary", "member": "ratings.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 25}, "min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "ratings.legacy"]}, {"name": "integration", "members": ["ratings.dev", "badcompanions.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "ratings.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "coverage": false}, {"name": "integration", "type": "execution", "group": "ratings.integration", "container": "ratings.legacy", "command": "make test_integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#driving-backend", "team_email": "driving-eng@lyft.com", "pagerduty_escalation_policy": "Driving Team", "deploy": [{"name": "staging", "legacy": false, "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}], "pulldeploy_components": {"data": ["translationdata"]}, "languages": ["python"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "ratings"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "kinesis_iad": null, "firehose_iad": null, "sqs_iad": null}, "internal_hosts": {"badcompanions": null, "driverloyalty": null, "drivermonitor": null, "jobschedulernormalweb": null, "notes": null, "ratelimit": null, "rides": null, "ridesapi": null, "routes": null, "supplyrecords": {"tls_enabled": true}, "supportcontact": null, "tcs": null, "users": null, "venues": null}}}}, "logging": {"ratings": {"fields": {"args": {"event_name": "keyword", "ride_id": "keyword", "driver_lyft_id": "keyword", "passenger_lyft_id": "keyword"}, "caller": "keyword", "current_rating": "long", "current_ride_id": "keyword", "excluded_reason": "keyword", "is_excluded": "boolean", "occurred_at_ms": "long", "ride_already_excluded_id": "keyword", "ride_already_excluded_rating": "long", "ride_id": "keyword", "ride_passenger_id": "long", "ride_previously_excluded_id": "keyword", "ride_previously_excluded_rating": "long", "ride_previously_excluded_timestamp_ms": "long", "ride_to_exclude_id": "keyword", "ride_to_exclude_rating": "long", "ride_to_exclude_timestamp_ms": "long", "ride_type": "keyword", "user_id": "keyword", "ride_completion_percentage_by_distance": "float", "ride_completion_percentage_by_time": "float", "original_ratings_to_trigger": "keyword", "original_available_ratings": "keyword", "available_ratings": "keyword", "ratings_to_trigger": "keyword", "time_elapsed_in_ride_sec": "long", "current_question_id": "keyword", "is_pickup_locked": "boolean", "has_desired_pickup_location": "boolean", "new_ratings_to_trigger": "keyword", "potential_walking_ride": "boolean", "has_alternate_walking_pickup": "boolean", "is_v2": "boolean", "action": "keyword", "is_dropoff_locked": "boolean", "has_desired_dropoff_location": "boolean", "passenger_id": "keyword", "driver_id": "keyword", "new_available_ratings": "keyword", "error": {"os": "keyword", "endpoint": "keyword", "client_type": "keyword", "error_code": "long", "message": {"error": "keyword", "error_detail": "keyword", "error_description": "keyword"}, "major_app_version": "keyword", "is_internal": "boolean", "error_class": "keyword", "user_id": "keyword", "client_id": "keyword"}, "actor_id": "keyword", "rating_type": "keyword", "event_name": "keyword", "as_role": "keyword", "of_role": "keyword", "timestamp_ms": "keyword", "pickup": "long", "route": "long", "time_elapsed_since_request_sec": "long", "rating_p2d": "long", "response": "keyword", "walking|pickup": "long", "code_name": "keyword", "code_num": "long", "walking|dropoff": "long", "version": "long", "version_in_db": "long", "tcs_response_code": "long", "entry": "keyword", "type": "keyword", "rating_sum": "long", "rated_rides": "long", "current_state": "keyword", "client_version": "keyword", "client_app": "keyword", "client_platform": "keyword", "mismatch_median_p2d_rating": "boolean", "mismatch_num_rides": "boolean", "mismatch_rating_sum": "boolean", "median_p2d_rating_v2": "long", "median_p2d_rating": "long", "excluded_p2d": "keyword", "excluded_p2d_reason": "keyword", "autorated_p2d": "keyword", "excluded_d2p": "keyword", "excluded_d2p_reason": "keyword", "old_rating": "keyword", "should_update_driver": "keyword", "should_update_pax": "keyword", "exclusion_only": "boolean", "rating_d2p": "long", "batched_ids_match": "boolean", "num_batched_ride_ids": "long", "num_excluded_batched_ride_ids": "long", "rdm_exists": "boolean", "role": "keyword", "significant_diff": "boolean", "failure_reason": "keyword", "relative_ratings_diff": "float", "absolute_ratings_diff": "float", "is_date_filtered": "boolean", "pretend": "boolean", "flag_type": "keyword", "flag": "keyword", "field_name": "keyword", "field_changed": "boolean", "rides_rating_sum": "long", "ride_details_rating_sum": "long", "rides_num_rides": "long", "ride_details_num_rides": "long", "ride_details_avg_rating": "float", "rides_avg_rating": "float", "rating_currently_shown_to_user": "boolean", "rating_will_be_shown_to_user": "boolean", "ratings_diff": "boolean", "compliments_diff": "boolean", "improvements_diff": "boolean", "num_common_rides": "long", "num_rides_missing_from_ride_details": "long", "num_rides_missing_from_rides": "long", "ride_details_has_more_rides": "boolean"}}}, "version": "0a018dc6722edae6710a719a3c31787283d0c788", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "readonlydb": {"name": "readonlydb", "description": "readonlydb", "repository": "git@github.com:lyft/readonlydb.git", "restricted_ssh": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "readonlydb.legacy", "mongodb.server"]}, {"name": "integration", "members": ["readonlydb.dev", "jobscheduler.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "readonlydb.dev"}, {"name": "integration", "type": "execution", "group": "readonlydb.integration", "container": "readonlydb.legacy", "command": "make test_integration", "reports": {"junit": "build/integration.xml"}}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#core-datastores-bots", "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "Datastores AWS and Mongo", "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "languages": ["bash", "javascript", "python"], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "readonlydb"}, {"name": "readonlydbsecondary"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"enterprise": null, "rides": null, "jobschedulernormalweb": null}, "mongos": {"users": {"production": {"ratelimit": true, "clusters": [{"port": 27019, "hosts": ["r033197-a2.mlab.com:27817", "r033197-b2.mlab.com:27817", "r033197-c2.mlab.com:27817", "r033197-d2.mlab.com:27817"]}]}, "staging": {"ratelimit": true, "clusters": [{"port": 27019, "hosts": ["r055605-a0.mlab.com:27817"]}]}}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "version": "2afe54d4e4920bbe81853bc159442bea1c24475c", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "realtimecostusage": {"name": "realtimecostusage", "description": "Lyft real-time usage and cost platform to shows what's the unused and used capacity, usage and cost on AWS infrastructure at Lyft in real-time", "repository": "git@github.com:lyft/realtimecostusage.git", "slack": "#capacity", "team_email": "capacity-team@lyft.com", "pagerduty_escalation_policy": "Capacity", "image_type": "service", "service_tier": 2, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "8Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "ec2snapshotloader", "command": "dumb-init -- service_venv python manage.py ec2-instances-snapshot-loader", "workdir": "/code/realtimecostusage", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "realtimecostusage.legacy"]}, {"name": "service_group", "members": ["realtimecostusage.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "realtimecostusage.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "realtimecostusage.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "realtimecostusage.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}, {"name": "ec2snapshotloader", "member": "realtimecostusage.ec2snapshotloader", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 * * * *"}], "deploy": [{"name": "staging", "bake_time_minutes": 0, "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "bake_time_minutes": 0, "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "bake_time_minutes": 0, "automatic": true, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "bake_time_minutes": 0, "automatic": true, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "bake_time_minutes": 0, "automatic": true, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "ec2snapshotloader"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "realtimecostusage"}], "common_settings": {"internal_hosts": {"infraevents": null}}}}, "version": "01676a06eaa92a5f2b00b3f3f63a7c40eda35622", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "rebalancer": {"name": "rebalancer", "description": "Rebalancer for HPA's across Kubernetes core clusters", "repository": "git@github.com:lyft/rebalancer.git", "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "image_type": "service", "languages": ["go"], "builder": {"name": "s2i", "params": {"builder": "lyft/s2igo:b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6"}}, "containers": [{"name": "run", "command": "rebalancer"}], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}], "deploy": [{"name": "staging-boba2", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["boba2"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["boba2"]}}}, {"name": "production-infra", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "clusterLabels": [{"cluster.lyft.net/role": ["infra"]}, {"cluster.lyft.net/cluster_name": ["infra"]}], "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}], "service_tier": 3, "version": "aefbb2f108acb3bd053abd27252cf49672804771", "images": [{"parent": {"name": "s2igo", "version": "b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igo", "version": "b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6", "sub_image": null, "external": false}}, "redirects": {"name": "redirects", "description": "Handles www.lyft.com 301 and 302 redirects", "repository": "git@github.com:lyft/redirects.git", "image_type": "service", "service_tier": 1, "slack": "#lyftcom", "team_email": "frontend-platform@lyft.com", "pagerduty_escalation_policy": "Web UX", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "redirects.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "redirects.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "redirects"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 500}}, "hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"www2": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"redirects": {"fields": {"signed_url": "keyword", "user_id": "keyword", "browser_language_header": "keyword", "lyft_display_language_header": "keyword", "signed_user": "keyword", "current_user": "keyword", "exception": {"class": "keyword", "message": "keyword"}}}}, "version": "4791c14a673911d4151d1d7bb60ae82aadebee60", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "redis": {"name": "redis", "description": "redis database server", "repository": "git@github.com:lyft/containers.git:redis", "slack": "#core-datastores", "team_email": "datastore-team@lyft.com", "containers": [{"name": "server", "start_phase": "parallel_storage", "exports": [{"name": "redis", "port": 6379}]}], "groups": [{"name": "dev", "members": ["control.dev", "redis.server"]}], "upstream_tests": {"on_commit": true, "test_set": {"acl": ["unit", "integration"], "adtech": ["unit", "integration"], "ats": ["e2e", "legacyunit"], "audience": ["integration"], "badcompanions": ["integration"], "bss": ["integration_0", "integration_1", "integration_2", "integration_3", "integration_4"], "campaigns": ["integration"], "challenges": ["integration"], "compi": ["unit", "integration"], "compliance": ["integration"], "coupons": ["integration"], "courier": ["unit", "integration"], "demand": ["unit", "integration"], "deployapi": ["startup", "configset"], "deploybot": ["startup", "configset"], "dispatch": ["unit_legacy", "integration", "e2e_airports", "e2e_dispatch"], "driverheatmaps": ["unit", "integration"], "driverprompts": ["integration"], "drivestat": ["startup", "unit"], "dsfeatures": ["unit", "integration", "coverage"], "e2etest": ["startup"], "engagementplatform": ["integration"], "enterprise": ["unit", "integration"], "enterprisedispatch": ["unit", "integration", "e2e"], "escrowdriverpay": ["startup", "pytests"], "etaproxy": ["unit", "integration", "sanity", "coverage"], "etl": ["unit", "integration", "e2e"], "fare": ["unit", "integration"], "firstdata": ["unit", "integration"], "fleetmanagement": ["component", "integration"], "flexibleincentives": ["integration"], "flexppz": ["integration"], "geofencereporter": ["startup", "unit"], "ghostmatching": ["integration"], "gmapsmobile": ["integration"], "godfather": ["integration"], "goldentests": ["integration", "dispatch"], "grow": ["unit", "integration", "e2e"], "growthe2etests": ["integration"], "guardian": ["unit", "integration_sharded"], "helium": ["unit", "integration"], "help": ["unit", "integration"], "incentiveconfig": ["integration", "coverage"], "jobscheduler": ["startup", "unified"], "karma": ["unit", "integration"], "kibanaingest": ["test_integration"], "lastmile": ["unit", "integration"], "lbsdecisionsupport": ["startup"], "leadplatform": ["integration"], "legacyapi": ["integration"], "localevents": ["integration"], "locations": ["integration"], "locationssearch": ["integration"], "lyfttestlib": ["integration"], "mailer": ["integration"], "mapcuration": ["startup", "unit"], "mapcurationfe": ["startup", "unit"], "messaging": ["integration"], "nexus": ["integration"], "offerings": ["integration"], "offlinemileagetracker": ["startup"], "omnibot": ["startup"], "paymentgateway": ["integration"], "places": ["unit", "integration"], "pricing": ["unit", "integration"], "pricingrealtime": ["unit", "integration"], "publicapi": ["unit", "integration_core_services"], "push": ["integration"], "ratelimit": ["startup", "unit"], "redisbenchmark": ["startup"], "referrals": ["startup"], "regions": ["unit", "integration"], "regulatoryintegrations": ["unit", "integration"], "rentals": ["component", "component_resources", "integration", "goldenpath"], "ridemonitor": ["integration"], "rides": ["startup", "unit", "coverage"], "ridescheduler": ["unit", "integration"], "ridestreaks": ["integration"], "ridetimeestimator": ["unit", "integration"], "ridexppredictor": ["integration"], "robocop": ["integration"], "routes": ["startup", "unit", "coverage"], "securitylogingestng": ["startup"], "serviceportal": ["startup"], "shorttermforecaster": ["startup", "unit"], "simulatedrides": ["tsc"], "simworld": ["startup"], "statscache": ["startup"], "suggesteddestinations": ["startup", "unit"], "superset": ["startup"], "supply": ["integration"], "supplycontroller": ["startup"], "supplyrecords": ["integration"], "taskqueue": ["startup"], "tcs": ["unit", "integration"], "team": ["integration"], "testpricingrt": ["startup"], "tolls": ["unit", "integration"], "tom": ["unitfe", "integration"], "trafideparturesapi": ["start", "unit"], "trafiextdeparturesapi": ["start", "unit"], "trafirealtimeagents": ["integration"], "transit": ["integration"], "transitdata": ["unit", "integration"], "usergroups": ["unit", "integration"], "users": ["unit", "integration"], "vehiclemetadata": ["startup", "unit"], "venues": ["unit", "integration"], "viewport": ["unit", "integration"], "wallet": ["startup", "lint", "unit", "coverage"], "walletapi": ["integration", "coverage"], "www2": ["unit"], "wwwbrochurefe": ["startup", "unit", "lint"], "wwwdriveronboardingfe": ["startup", "unit", "lint"]}}, "tests": [{"name": "start", "type": "startup", "group": "redis.dev"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false}, {"name": "production", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["bash"], "image_type": "tool", "version": "476724b31359f9c8379171e974287376283010b8", "images": [{"parent": {"name": "imagebase", "version": "c1e859a9753a8fc357121e7c126cc0a3b7679ea7", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "imagebase", "version": "c1e859a9753a8fc357121e7c126cc0a3b7679ea7", "sub_image": null, "external": false}}, "refactorator": {"name": "refactorator", "description": "Tool for conducting mass refactorings.", "repository": "git@github.com:lyft/refactorator.git", "credentials": true, "slack": "#devx-bots", "team_email": "devx-team@lyft.com", "pagerduty_escalation_policy": "DevX", "docs": {"section": "Infrastructure", "autogen_env": "python3.6", "autogen_modules": ["refactorator"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "run", "command": "python3.6 -m refactorator.cli", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "spin", "command": "sleep infinity", "mounts": ["/var/run/docker_sockets", "/srv/control"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "python3.6 -m pytest /code/refactorator/tests"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": true}, {"name": "production", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["bash", "python"], "image_type": "tool", "version": "9405563e7a575acd0100f67af0985c7e168b08de", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "referrals": {"name": "referrals", "description": "Service to support referrals across different modes", "repository": "git@github.com:lyft/referrals.git", "slack": "#acq-incentives", "team_email": "acq-incentives-referrals@lyft.com", "pagerduty_escalation_policy": "Referrals Team", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "notification_overrides": {"deploy": {"slack": "#acq-incentives-bot", "environments": ["production", "canary", "staging"]}, "deploy_failure": {"slack": "#acq-incentives-bot"}, "test_failure": {"slack": "#acq-incentives-bot", "email": "acq-incentives-referrals@lyft.com", "environments": ["production"]}, "master_failure": {"slack": "#acq-incentives-bot"}, "pr_merge": {"slack": "#acq-incentives-bot"}, "pr_open": {"slack": "#acq-incentives-bot"}}, "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent --worker-connections=1000 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/referrals", "limits": {"cpu": 2, "memory": "2Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "referrals.legacy", "dynamodb.server", "redis.dev"]}, {"name": "service_group", "members": ["referrals.legacy"]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "tests": [{"name": "startup", "type": "startup", "group": "referrals.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "referrals.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 3, "max_size": 30}}}}, {"name": "canary", "member": "referrals.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "referrals"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acquisitionguarantees": null, "ats": null, "coupons": null, "users": null, "flexibleincentives": null, "jobschedulernormalweb": null, "supply": null, "supplyrecords": {"tls_enabled": true}, "regions": null}, "external_hosts": {"dynamodb_iad": null}, "redis": {"referralsmultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}}}}, "version": "07979887310bceee1afe68a5e7594885ba996793", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "reflection": {"name": "reflection", "description": "IDL Reflection Service", "repository": "git@github.com:lyft/reflection.git", "service_tier": 0, "team_email": "idl-tools@lyft.com", "pagerduty_escalation_policy": "IDL Tools", "slack": "#idl-bots", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:c1e2d5c25643b7ca394caded92a0d09d2896b2fc", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}]}}, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh"}, {"name": "main", "command": "dumb-init -- wrap reflection", "workdir": "/code/reflection", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "2Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "reflection.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "reflection.dev"}, {"name": "unit", "type": "jailed", "command": "make unit-tests"}, {"name": "release-unit", "type": "jailed", "command": "make release-unit-tests"}, {"name": "integration", "type": "execution", "group": "reflection.dev", "container": "reflection.service", "command": "make integration-tests"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "reflection.main", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 0, "max_size": 0}, "production": {"min_size": 0, "max_size": 0}}}}, {"name": "canary", "member": "reflection.main", "type": "service", "canary": true, "autoscaling": {"min_size": 0, "max_size": 0}}], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "automatic": true, "orca": [{"region": "iad"}]}, [{"name": "canary-us-east-1a", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1a"}}}, {"name": "canary-us-east-1b", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1b"}}}, {"name": "canary-us-east-1d", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1c"}}}, {"name": "canary-us-east-1e", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1e"}}}, {"name": "canary-us-east-1f", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/az": "us-east-1f"}}}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}], [{"name": "production-us-east-1a", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1b", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1b"}, {"name": "production-us-east-1d", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1d"}, {"name": "production-us-east-1e", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1e"}, {"name": "production-us-east-1f", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1f"}], {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}], "envoy": {"profile": "go", "settings": {"services": [{"name": "reflection"}]}}, "logging": {"reflection": {"fields": {"err": "keyword", "errVerbose": "keyword"}}}, "version": "596517d60e2e2ac6afd3f4f0400fe817bd094326", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "c1e2d5c25643b7ca394caded92a0d09d2896b2fc", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "regioncfgdata": {"name": "regioncfgdata", "description": "Static data for regioncfg", "repository": "git@github.com:lyft/regioncfgdata.git", "image_type": "data", "service_tier": 1, "team_email": "cities@lyft.com", "pagerduty_escalation_policy": "Cities", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "run", "command": "/code/regioncfgdata/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/regioncfgdata"]}, {"name": "service", "command": "/code/regioncfgdata/service_entrypoint.sh"}, {"name": "spin", "command": "sleep infinity"}], "groups": [{"name": "test_group", "members": ["control.dev", "regioncfgdata.spin"]}], "tests": [{"name": "unit", "type": "jailed", "run_in_dev": false, "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "submit_queue": {"v3_auto_deploy": true}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "280fca95682dce8ab9bfb21c3225bdc16eec347c", "images": [{"parent": {"name": "python", "version": "1af4dede3343b86204a78134646e08798cab04de", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "python", "version": "1af4dede3343b86204a78134646e08798cab04de", "sub_image": null, "external": false}}, "regions": {"name": "regions", "description": "regions", "repository": "git@github.com:lyft/regions.git", "slack": "#regions-service", "team_email": "cities@lyft.com", "pagerduty_escalation_policy": "Cities", "service_tier": 0, "credentials": true, "start_phase": "sequential_service", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 480, "start_phase": "sequential_service", "exports": [{"name": "api", "port": 8080}], "limits": {"environment": {"development": {"memory": "2.2Gi", "cpu": 0.5}}}}, {"name": "test", "command": "env ENV_OVERRIDE=development /code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 480, "start_phase": "sequential_service", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "redis.server", "elasticsearch5.server", "jobscheduler.dev", "regions.legacy"]}, {"name": "devextended", "members": ["regions.dev", "team.devextended", "mailer.dev"]}, {"name": "testing", "members": ["control.dev", "dynamodb.server", "redis.server", "elasticsearch5.server", "jobscheduler.dev", "regions.test"]}, {"name": "integration", "members": ["regions.testing", "venues.dev", "ratelimit.dev", "modes.dev", "compliance.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "regions.dev"}, {"name": "unit", "type": "jailed", "command": "env TEST_TAGS=\"not unit_legacy\" make test_unit"}, {"name": "integration", "type": "execution", "group": "regions.integration", "container": "regions.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "command": "make test_unit", "container": "regions.test", "group": "regions.testing"}], "upstream_tests": {"on_commit": false, "test_set": {"coupons": ["integration"], "rentals": ["integration"], "ridescheduler": ["integration"], "switchboard": ["integration"], "venues": ["integration"], "expressdrivefe": ["e2e"]}}, "deploy": [{"name": "staging", "legacy": true, "automatic": true}, {"name": "canary", "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "languages": ["python"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "regions"}, {"name": "regionsadmin"}, {"name": "regionsworkers"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 200}}}, "internal_hosts": {"compliance": null, "jobschedulernormalweb": null, "jobschedulernormalwebloadtest": null, "mailer": null, "venues": null, "modes": null, "team": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null, "s3_iad": null}, "redis": {"regionsmultiredis": {"port": 6380}}}, "override_settings": [{"services": [{"name": "regions"}], "settings": {"internal_hosts": {"mailer": null, "ratelimit": null, "regions": null, "regionsadmin": null, "team": null}}}, {"services": [{"name": "regionsadmin"}], "settings": {"internal_hosts": {"mailer": null, "regionsadmin": null, "team": null}}}]}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "logging": {"regions": {"fields": {"action": "keyword", "id": "keyword"}}, "regionsworkers": {"fields": {"map_id": "integer", "release_id": "keyword"}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "version": "a4fde4d8aaaa0c8498fa034e133390243ad1c738", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "regionslib": {"name": "regionslib", "description": "Client for accessing regional configuration data from regions service with caching capabilities", "repository": "git@github.com:lyft/python-regions-client.git", "team_email": "cities@lyft.com", "slack": "#regions-service", "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["python"], "image_type": "library", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "a340d38287bc821798927cc486b5f47bcde451a9", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "regulatoryintegrations": {"name": "regulatoryintegrations", "description": "Service manages regulatory and compliance integrations with regulators", "repository": "git@github.com:lyft/regulatoryintegrations.git", "image_type": "service", "service_tier": 1, "slack": "#do-cities-eng", "team_email": "cities@lyft.com", "pagerduty_escalation_policy": "Cities", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "postgresql.dev", "redis.dev", "mailer.dev", "regulatoryintegrations.legacy", "sqs.dev"]}, {"name": "integration", "members": ["regulatoryintegrations.dev"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "startup", "type": "startup", "group": "regulatoryintegrations.dev"}, {"name": "unit", "type": "jailed", "command": "env TEST_TAGS=\"not unit_legacy\" make test_unit_jail"}, {"name": "unit_legacy", "type": "execution", "group": "regulatoryintegrations.dev", "container": "regulatoryintegrations.legacy", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "regulatoryintegrations.integration", "container": "regulatoryintegrations.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "regulatoryintegrations"}, {"name": "regulatoryintegrationsairflow"}, {"name": "regulatoryintegrationsworkers", "traffic_type": "egress_only"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "sqs_iad": null}, "internal_hosts": {"ats": {"tls_enabled": true}, "backgroundcheck": {"tls_enabled": true}, "compliance": {"tls_enabled": true}, "driverridesinfo": {"tls_enabled": true}, "jobschedulerbulkweb": {"tls_enabled": true}, "jobschedulernormalweb": {"tls_enabled": true}, "logistics": {"tls_enabled": true}, "mailer": {"tls_enabled": true}, "matncproxy": {"tls_enabled": true}, "notes": {"tls_enabled": true}, "messaging": {"tls_enabled": true}, "regions": {"tls_enabled": true}, "supply": {"tls_enabled": true}, "supplyrecords": {"tls_enabled": true}, "users": {"tls_enabled": true}, "vehiclemetadata": {"tls_enabled": true}}}, "override_settings": [{"services": [{"name": "regulatoryintegrations"}], "settings": {"authorization": {"permissions": {"access_token": {"paths": ["/access_token/*"], "methods": ["GET"]}, "event_handler": {"paths": ["/event_handler/*"], "methods": ["POST"]}, "regulatory_data": {"paths": ["/regulatory_data/*"], "methods": ["GET", "POST"]}, "saml": {"paths": ["/v1/saml/*"]}, "tom": {"paths": ["/tom/*"], "methods": ["GET", "POST"]}, "dobi": {"paths": ["/dobi/*"], "methods": ["GET"]}, "create_update_integration": {"paths": ["/driver/*"], "methods": ["POST"]}, "get_driver_info": {"paths": ["/driver/*"], "methods": ["GET"]}}, "bindings": {"ats": ["create_update_integration", "get_driver_info"], "atsbatch": ["create_update_integration", "get_driver_info"], "atssearchworkers": ["create_update_integration", "get_driver_info"], "atsworkers": ["create_update_integration", "get_driver_info"], "driveronboardingint": ["dobi", "tom"], "envoy": ["access_token", "saml"], "taskqueuebulk": ["event_handler", "create_update_integration"], "taskqueuenormal": ["event_handler", "create_update_integration"], "tom": ["tom"], "*": ["regulatory_data"]}}}}, {"services": [{"name": "regulatoryintegrationsairflow"}], "settings": {"internal_hosts": {"regulatoryintegrations": {"tls_enabled": true}}, "local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "health_check_endpoint": "/health"}}]}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "logging": {"regulatoryintegrations": {"fields": {"attempt": "long", "code": "long", "command": "keyword", "cron_uuid": "keyword", "document_type": "keyword", "driver_id": "keyword", "exception": {"class": "keyword", "message": "keyword"}, "integration_name": "keyword", "lyft_id": "keyword", "not_ready_reason": "keyword", "output_name": "keyword", "owner": "keyword", "response": "keyword", "vehicle_id": "keyword"}}}, "version": "8287ce7001f59f097cc58b7a5a0afec442b61b0f", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "releasebot": {"name": "releasebot", "description": "A slackbot that tells you which client release a change is in and the expected rollout date", "repository": "git@github.com:lyft/releasebot.git", "image_type": "service", "service_tier": 3, "slack": "#featurebot", "team_email": "mbi@lyft.com", "pagerduty_escalation_policy": "Support XP", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "envoy.server", "omnibot.dev", "dynamodb.dev", "appreleases.dev", "releasebot.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "releasebot.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "releasebot"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null}, "internal_hosts": {"appreleases": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"releasebot": {"fields": {"base": "keyword", "head": "keyword", "repo": "keyword"}}}, "version": "661c5aafa944ae6c963cd5f0194e546814006b83", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "remoteexecution": {"name": "remoteexecution", "description": "The main node of a bazel remote execution bazel server", "repository": "git@github.com:lyft/remoteexecution.git", "slack": "#client-tooling-prs", "team_email": "client-tooling@lyft.com", "pagerduty_escalation_policy": "Mobile CI", "docs": {"disable": true}, "image_type": "service", "service_tier": 3, "languages": ["bash", "java"], "containers": [{"name": "buildfarmcontainer", "command": "./run.sh", "workdir": "/code/remoteexecution", "limits": {"cpu": 2, "memory": "4096Mi"}, "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}}], "facets": [{"name": "buildfarmmain", "member": "remoteexecution.buildfarmcontainer", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "buildfarmmain"}], "kubernetes": {"enabled": true, "clusterLabels": [{"cluster.lyft.net/role": "infra"}, {"cluster.lyft.net/clustername": "infrastaging"}], "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "acl": {"admin_policies": ["kubernetes-client-tooling-admin"]}}}, {"name": "production", "legacy": false, "orca": [{"iam_role": "orca-admin", "region": "iad"}], "targets": [{"facet": "buildfarmmain"}], "kubernetes": {"enabled": true, "clusterLabels": [{"cluster.lyft.net/role": "infra"}, {"cluster.lyft.net/cluster_name": "infra"}], "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "acl": {"admin_policies": ["kubernetes-client-tooling-admin"]}}}], "envoy": {"profile": "go", "settings": {"services": [{"name": "remoteexecution"}], "common_settings": {"local_service": {"grpc_streaming": true, "circuit_breakers": {"default": {"max_connections": 1024}}}}}}, "version": "e357b1ac8fde7fe2a305644dc4b5b8efd67f0ad8", "images": [{"parent": {"name": "bionicbase", "version": "79d6fd72e42955b716a788e1ecb23667a443cdb2", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "79d6fd72e42955b716a788e1ecb23667a443cdb2", "sub_image": null, "external": false}}, "remotefiledeployscontroller": {"name": "remotefiledeployscontroller", "description": "remote filede ploys controller controller", "repository": "git@github.com:lyft/remotefiledeployscontroller.git", "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "slack": "#compute-bots", "docs": {"section": "Infrastructure"}, "image_type": "service", "service_tier": 3, "languages": ["go"], "builder": {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c"}}, "tests": [{"name": "unit", "type": "jailed", "command": "go test github.com/lyft/remotefiledeployscontroller/..."}], "deploy": [[{"name": "staging-sonata", "legacy": false, "kubernetes": {"enabled": true, "mode": "direct", "cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}, "interpolation_vars": {"kiam_env": "staging"}}}], [{"name": "staging-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "interpolation_vars": {"kiam_env": "staging"}}}], [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}, "interpolation_vars": {"kiam_env": "staging"}}}], [{"name": "production-sonata", "legacy": false, "kubernetes": {"enabled": true, "mode": "direct", "cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}, "interpolation_vars": {"kiam_env": "production"}}}], [{"name": "production-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "interpolation_vars": {"kiam_env": "production"}}}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}, "interpolation_vars": {"kiam_env": "production"}}}]], "version": "988f99595d36a99c629696a04e413f624ee33012", "images": [{"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}}, "rentals": {"name": "rentals", "description": "rentals", "repository": "git@github.com:lyft/rentals.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}], "start_phase": "sequential_service"}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/rentals", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "eventshighpri", "command": "dumb-init -- python app/workers/events.py --priority HIGH", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "eventsnormalpri", "command": "dumb-init -- python app/workers/events.py --priority NORMAL", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "batch", "command": "dumb-init -- service_venv python manage.py", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "dailyhertzrenewalemail", "command": "dumb-init -- service_venv python manage.py admin-hertz-email-renewals --duration=daily --email=production", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "markincompletebillsfailed", "command": "dumb-init -- service_venv python manage.py admin-mark-incomplete-bills-failed", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "weeklypagerdutyreport", "command": "dumb-init -- service_venv python manage.py admin-email-pd-alerts --include-stats", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "hertzdailyreservationcaps", "command": "dumb-init -- service_venv python manage.py admin-email-provider-caps-csv --email_address=\"jcolloca@hertz.com,bepstein@lyft.com,chorton@hertz.com,rohit.vincentjoseph@hertz.com,jin.wang@hertz.com,pkauzmann@lyft.com,egray@lyft.com,cap-change@lyft.com\"  --provider_id=\"hertz\" --include_location_hours=True", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "fddailyreservationcaps", "command": "dumb-init -- service_venv python manage.py admin-email-provider-caps-csv --email_address=\"bepstein@lyft.com,cap-change@lyft.com\" --provider_id=\"flexdrive\"", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "verifyledgerordersinfinalizingstate", "command": "dumb-init -- service_venv python manage.py billing-verify-ledger-orders --state finalizing", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "verifyledgerordersinsuccessstate", "command": "dumb-init -- service_venv python manage.py billing-verify-ledger-orders --state success", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "createmissingbillingmodel", "command": "dumb-init -- service_venv python manage.py billing-scan-missing-bills --generate-bills --send-email --email-address=\"xd-eng-verbose@lyft.com\"", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "findrentalfeesmissingbills", "command": "dumb-init -- service_venv python manage.py admin-rental-fees-missing-bills", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "warmsovostaxescache", "command": "dumb-init -- service_venv python manage.py tax-cache-warming", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "weeklybillingstatus", "command": "dumb-init -- service_venv python manage.py admin-weekly-billing-status", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "autoadvancestuckbillingnotstarted", "command": "dumb-init -- service_venv python manage.py admin-process-rental-billing-state --current_state='NOT_STARTED'", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "autoadvancestuckbillingfinalizing", "command": "dumb-init -- service_venv python manage.py admin-process-rental-billing-state --current_state='FINALIZING'", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "weeklyratecardcomms", "command": "dumb-init -- service_venv python manage.py weekly-ratecard-comms", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "riderequirementlevel0escalation", "command": "dumb-init -- service_venv python manage.py ride-requirement-level-0-escalation", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "riderequirementlevel1escalation", "command": "dumb-init -- service_venv python manage.py ride-requirement-level-1-escalation", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "persistriderequirementtohistory", "command": "dumb-init -- service_venv python manage.py persist-ride-requirement-to-history", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "failedchargeslevel0escalation", "command": "dumb-init -- service_venv python manage.py failed-charges-level-0-escalation", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "persistrentalbehavior", "command": "dumb-init -- service_venv python manage.py persist-rental-behavior --dry-run=0", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "validatevehiclepricingplans", "command": "dumb-init -- service_venv python manage.py validate-vehicle-pricing-plans", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "weeklyrefreshactivetierratecard", "command": "dumb-init -- service_venv python manage.py weekly-refresh-active-tier-ratecard", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "sendweeklywithholdingfeescomms", "command": "dumb-init -- service_venv python manage.py send-weekly-withholding-fees-comms", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}], "facets": [{"name": "main", "member": "rentals.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 10}}}}, {"name": "canary", "member": "rentals.service", "type": "service", "canary": true, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "eventworkerscanary", "member": "rentals.eventworkers", "type": "worker", "canary": true, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "eventworkers", "member": "rentals.eventworkers", "type": "worker", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "batchmanage", "member": "rentals.batch", "type": "batch"}, {"name": "dailyhertzrenewalemail", "member": "rentals.dailyhertzrenewalemail", "type": "cron", "schedule": "0 0 * * *"}, {"name": "markincompletebillsfailed", "member": "rentals.markincompletebillsfailed", "type": "cron", "schedule": "0 13 * * 2"}, {"name": "weeklypagerdutyreport", "member": "rentals.weeklypagerdutyreport", "type": "cron", "schedule": "0 18 * * 1"}, {"name": "hertzdailyreservationcaps", "member": "rentals.hertzdailyreservationcaps", "type": "cron", "schedule": "0 9 * * *"}, {"name": "fddailyreservationcaps", "member": "rentals.fddailyreservationcaps", "type": "cron", "schedule": "0 9 * * *"}, {"name": "verifyledgerordersinfinalizingstate", "member": "rentals.verifyledgerordersinfinalizingstate", "type": "cron", "schedule": "0 1 * * 2"}, {"name": "verifyledgerordersinsuccessstate", "member": "rentals.verifyledgerordersinsuccessstate", "type": "cron", "schedule": "0 5 * * 2"}, {"name": "createmissingbillingmodel", "member": "rentals.createmissingbillingmodel", "type": "cron", "schedule": "0 18 * * *"}, {"name": "findrentalfeesmissingbills", "member": "rentals.findrentalfeesmissingbills", "type": "cron", "schedule": "0 20 * * 0"}, {"name": "warmsovostaxescache", "member": "rentals.warmsovostaxescache", "type": "cron", "schedule": "0 0 1,15 * *"}, {"name": "weeklybillingstatusmonday", "member": "rentals.weeklybillingstatus", "type": "cron", "schedule": "0 12-23 * * 1"}, {"name": "weeklybillingstatustuesday", "member": "rentals.weeklybillingstatus", "type": "cron", "schedule": "0 0-11 * * 2"}, {"name": "autoadvancestuckbillingnotstarted", "member": "rentals.autoadvancestuckbillingnotstarted", "type": "cron", "schedule": "30 17 * * 1"}, {"name": "autoadvancestuckbillingfinalizing", "member": "rentals.autoadvancestuckbillingfinalizing", "type": "cron", "schedule": "00 5 * * 2"}, {"name": "weeklyratecardcomms", "member": "rentals.weeklyratecardcomms", "type": "cron", "schedule": "0 5 * * *"}, {"name": "riderequirementlevel0escalation", "member": "rentals.riderequirementlevel0escalation", "type": "cron", "schedule": "0 1 * * 5,6,0"}, {"name": "riderequirementlevel1escalation", "member": "rentals.riderequirementlevel1escalation", "type": "cron", "schedule": "0 0 * * 1"}, {"name": "persistriderequirementtohistory", "member": "rentals.persistriderequirementtohistory", "type": "cron", "schedule": "30 14 * * 1"}, {"name": "failedchargeslevel0escalation", "member": "rentals.failedchargeslevel0escalation", "type": "cron", "schedule": "0 15 * * 6"}, {"name": "persistrentalbehavior", "member": "rentals.persistrentalbehavior", "type": "cron", "schedule": "0 0 * * 1"}, {"name": "validatevehiclepricingplans", "member": "rentals.validatevehiclepricingplans", "type": "cron", "schedule": "0 2 * * *"}, {"name": "weeklyrefreshactivetierratecard", "member": "rentals.weeklyrefreshactivetierratecard", "type": "cron", "schedule": "0 8 * * 1"}, {"name": "sendweeklywithholdingfeescomms", "member": "rentals.sendweeklywithholdingfeescomms", "type": "cron", "schedule": "0 1 * * 1"}], "configsets": ["segmentedratecarddata"], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "elasticsearch5.server", "redis.dev", "idl.server", "rentals.legacy"]}, {"name": "integration", "members": ["lyfttestlib.ride", "chromeheadless.service", "dbproxypaymentgateway.legacy", "fleetlocations.legacy", "fleetmanagement.legacy", "leadplatform.legacy", "logistics.legacy", "notes.legacy", "paymentgateway.legacy", "referrals.legacy", "rentals.legacy", "txnhub.legacy"]}, {"name": "eventworkers", "members": ["rentals.eventshighpri", "rentals.eventsnormalpri"]}], "tests": [{"name": "startup", "type": "startup", "group": "rentals.dev"}, {"name": "component", "type": "sharded", "shard_at": "file", "group": "rentals.dev", "execution_group": "rentals.dev", "container": "rentals.legacy", "target": "tests/component/component", "virtualenv": "service_venv", "max_shard_duration": 6, "run_in_pr": false, "run_in_dev": true, "skip_threshold": 70, "max_subset_retries": 1, "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "component_resources", "type": "sharded", "shard_at": "file", "group": "rentals.dev", "execution_group": "rentals.dev", "container": "rentals.legacy", "target": "tests/component/component_resources", "virtualenv": "service_venv", "max_shard_duration": 5, "run_in_pr": true, "run_in_dev": false, "skip_threshold": 70, "max_subset_retries": 1, "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "unit", "type": "jailed", "command": "make test_unit", "run_in_pr": true, "run_in_dev": true, "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml", "coverage_html": "build/coverage_html"}}, {"name": "integration", "type": "sharded", "group": "rentals.dev", "container": "rentals.legacy", "target": "tests/integration/", "virtualenv": "integration_venv", "run_in_pr": false, "run_in_dev": true, "float_dependencies": "H 6-22 * * *", "skip_threshold": 2, "max_subset_retries": 1, "reports": {"junit": "build/integration.xml"}}, {"name": "goldenpath", "type": "execution", "group": "rentals.integration", "container": "rentals.legacy", "command": "make noop", "target": "tests/goldenpath/", "virtualenv": "integration_venv", "run_in_pr": false, "run_in_dev": true, "reports": {"junit": "build/goldenpath.xml"}}, {"name": "ats_upstream", "type": "execution", "group": "rentals.integration", "container": "rentals.legacy", "command": "make test_ats_upstream", "target": "tests/integration", "virtualenv": "integration_venv", "run_in_pr": false, "run_in_dev": false, "reports": {"junit": "build/integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "upstream_tests": {"on_commit": false, "test_set": {"rentalsflexdrivetests": [{"name": "test_api_lyft", "revision": 5.0}], "rentalsabgtests": [{"name": "test_api_lyft_rentals", "revision": "v4.74"}]}}, "slack": "#xd-hub", "team_email": "xd-eng@lyft.com", "pagerduty_escalation_policy": "XD Core Backend", "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}, {"facet": "eventworkers"}, {"facet": "weeklybillingstatusmonday"}, {"facet": "weeklybillingstatustuesday"}, {"facet": "autoadvancestuckbillingnotstarted"}, {"facet": "autoadvancestuckbillingfinalizing"}, {"facet": "weeklyratecardcomms"}, {"facet": "riderequirementlevel0escalation"}, {"facet": "riderequirementlevel1escalation"}, {"facet": "persistriderequirementtohistory"}, {"facet": "failedchargeslevel0escalation"}, {"facet": "persistrentalbehavior"}, {"facet": "validatevehiclepricingplans"}, {"facet": "weeklyrefreshactivetierratecard"}, {"facet": "sendweeklywithholdingfeescomms"}, {"facet": "batchmanage"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "automatic": true, "links": [{"text": "SIMSFO Simrides Simulation Dashboard", "url": "https://grafana.lyft.net/dashboard/db/simulation-drilldown?refresh=1m&orgId=1&from=now-1h&to=now-1m&var-environment=staging&var-simulation=rentals-simsfo"}]}, {"name": "canary", "legacy": false, "targets": [{"facet": "eventworkerscanary"}, {"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "links": [{"text": "XD Health Dash", "url": "https://grafana.lyft.net/dashboard/db/xd-health"}, {"text": "Deploying Rentals Runbook", "url": "https://github.com/lyft/rentals/blob/master/docs/RUNBOOK.md#how-to-deploy"}, {"text": "Custom Kibana Dash", "url": "https://kibana.lyft.net/app/kibana#/dashboard/Rentals"}]}, [{"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "targets": [{"facet": "eventworkers"}, {"facet": "main"}], "kubernetes": {"enabled": true}, "links": [{"text": "Custom Kibana AZ 1a Dash", "url": "https://kibana.lyft.net/app/kibana#/dashboard/57c11300-b6bf-11e8-af25-419dbca4fb4d"}]}, {"name": "production-us-east-1d", "availability_zone": "us-east-1d", "legacy": false, "targets": [{"facet": "eventworkers"}, {"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "targets": [{"facet": "eventworkers"}, {"facet": "main"}, {"facet": "canary"}, {"facet": "main"}, {"facet": "canary"}, {"facet": "dailyhertzrenewalemail"}, {"facet": "markincompletebillsfailed"}, {"facet": "weeklypagerdutyreport"}, {"facet": "hertzdailyreservationcaps"}, {"facet": "fddailyreservationcaps"}, {"facet": "verifyledgerordersinfinalizingstate"}, {"facet": "verifyledgerordersinsuccessstate"}, {"facet": "createmissingbillingmodel"}, {"facet": "findrentalfeesmissingbills"}, {"facet": "warmsovostaxescache"}, {"facet": "weeklybillingstatusmonday"}, {"facet": "weeklybillingstatustuesday"}, {"facet": "autoadvancestuckbillingnotstarted"}, {"facet": "autoadvancestuckbillingfinalizing"}, {"facet": "weeklyratecardcomms"}, {"facet": "riderequirementlevel0escalation"}, {"facet": "riderequirementlevel1escalation"}, {"facet": "persistriderequirementtohistory"}, {"facet": "failedchargeslevel0escalation"}, {"facet": "persistrentalbehavior"}, {"facet": "validatevehiclepricingplans"}, {"facet": "weeklyrefreshactivetierratecard"}, {"facet": "sendweeklywithholdingfeescomms"}, {"facet": "batchmanage"}], "kubernetes": {"enabled": true}}], "service_tier": 1, "languages": ["python"], "image_type": "service", "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:bd8615cdc0a53fe60b894b4b0cc3447deeb0e366", "packages": ["libgeos-dev", "libspatialindex-dev", "libxmlsec1-dev", "pkg-config", "screen", "vim"]}}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev", "vim", "screen"]}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "rentals"}, {"name": "rentalsbatch"}, {"name": "rentalsworkers"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 300}}}, "internal_hosts": {"accidentrisk": null, "ats": {"tls_enabled": true}, "chromeheadless": null, "compliance": null, "driverridesinfo": null, "dsfeatures": null, "dsfeatureswrites": null, "fleetlocations": null, "fleetmanagement": null, "green": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "karma": null, "ledger": null, "mailer": null, "messaging": null, "notes": null, "offlinemileagetracker": null, "payapi": null, "pusher": null, "ratelimit": null, "ratings": null, "regions": null, "rentals": null, "ridechallenges": null, "rides": null, "supply": null, "supplyrecords": {"tls_enabled": true}, "tcs": null, "txnhub": null, "users": null, "vehiclemetadata": null, "wallet": null}, "external_hosts": {"abg": null, "dynamodb_iad": null, "firehose_iad": null, "flexdrive": null, "hertz": null, "hertz_dash": null, "kinesis_iad": null, "s3_iad": null, "sovos_prod": null, "sqs_iad": null}, "redis": {"rentalsmultiredis": {"port": 6380}}}}}, "logging": {"rentals": {"fields": {"actor": {"actor_type": "keyword", "agent_email": "keyword", "display_name": "keyword", "lyft_id": "keyword", "system_name": "keyword"}, "billing_end_dt_ms": "keyword", "billing_start_dt_ms": "keyword", "code": "long", "compound_rental_id": "keyword", "compound_reservation_id": "keyword", "days_before_end_of_rental_term": "long", "driver_id": "keyword", "error_code": "keyword", "error_details": "keyword", "error_message": "keyword", "event_id": "keyword", "event_name": "keyword", "lyft_location_id": "keyword", "lyft_vehicle_id": "keyword", "method": "keyword", "payload": {"ContactKey": "keyword", "Data": {"amount": "keyword", "lyft_id": "keyword"}, "EventDefinitionKey": "keyword", "values": {"dropoff_location_id": "keyword", "end_date_time": "keyword", "expected_end_date_time": "keyword", "failed_charge_consequence": "keyword", "is_in_auto_renew": "boolean", "last_failed_charge_amount": "long", "lyft_id": "keyword", "original_start_date_time": "keyword", "region_code": "keyword", "rental_provider_id": "keyword", "rental_state": "keyword", "reservation_id": "keyword", "scheduled_dropoff_date_time": "keyword", "start_date_time": "keyword"}}, "payment_plan_id_tuple": "keyword", "provider_id": "keyword", "ra_number": "keyword", "rental_id": "keyword", "request_id": "keyword", "request_parameters": {"admin_override": "keyword", "billing_date_str": "date", "billing_end_date": "date", "cancel_provider_reservation": "keyword", "cancellation_reason": "keyword", "date_of_birth": "date", "deposit_type": "keyword", "dry_run": "keyword", "email": "keyword", "end_ms": "keyword", "filter_externally_visible": "keyword", "include_all_incentive_types": "keyword", "include_linked_regions": "keyword", "lat": "keyword", "lng": "keyword", "lyft_id": "keyword", "lyft_vehicle_id": "keyword", "page": "keyword", "pay_period": "date", "query_ms": "keyword", "region": "keyword", "region_code": "keyword", "rental_provider_id": "keyword", "scheduled_pickup_ms": "keyword", "sort_by": "keyword", "sort_order": "keyword", "start_ms": "keyword", "type": "keyword", "upload_to_s3": "keyword", "vehicle_class": "keyword", "vehicle_ids": "keyword", "renew_trigger": "keyword"}, "response": "keyword", "subscription_id": "keyword", "url": "keyword", "user_id": "keyword", "context": "keyword"}}}, "version": "3d058186c1e928a912e42d0a07931babea6459d2", "images": [{"parent": {"name": "opsbase", "version": "bd8615cdc0a53fe60b894b4b0cc3447deeb0e366", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "bd8615cdc0a53fe60b894b4b0cc3447deeb0e366", "sub_image": null, "external": false}}, "rentalsabgtests": {"name": "rentalsabgtests", "description": "Scenario-based test development kit for the ABG vehicles and rentals API", "repository": "git@github.com:lyft/rentalsabgtests.git", "slack": "#xd-hub", "credentials": false, "containers": [{"name": "spin", "command": "sleep infinity"}], "groups": [{"name": "integration", "members": ["rentals.dev", "rentalsabgtests.spin"]}], "tests": [{"name": "smoke", "type": "jailed", "command": "make test_smoke", "reports": {"junit": "build/unit.xml"}}, {"name": "lint", "type": "jailed", "command": "make lint", "reports": {"flake8": "build/flake8.txt", "pylint": "build/pylint.txt"}}, {"name": "test_api_lyft_rentals", "type": "execution", "group": "rentalsabgtests.integration", "container": "rentalsabgtests.spin", "command": "make test_api_lyft_rentals", "autotrigger": false, "run_in_pr": false, "run_in_dev": false, "reports": {"junit": "build/unit.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["python"], "image_type": "library", "team_email": "xd-eng@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "version": "4c9ffd8ccce5ed5c9a95bf11867c5066c0c549e0", "images": [{"parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "b95732f15a1d02c0092728184863a4163dff17d0", "sub_image": null, "external": false}}, "rentalsflexdrivetests": {"name": "rentalsflexdrivetests", "description": "Scenario-based test development kit for the Flexdrive vehicles and rentals API", "repository": "git@github.com:lyft/rentalsflexdrivetests.git", "credentials": false, "containers": [{"name": "spin", "command": "sleep infinity"}], "groups": [{"name": "integration", "members": ["fleetmanagement.dev", "rentals.dev", "rentalsflexdrivetests.spin"]}], "tests": [{"name": "smoke", "type": "jailed", "command": "make test_smoke", "reports": {"junit": "build/unit.xml"}}, {"name": "lint", "type": "jailed", "command": "make lint", "reports": {"flake8": "build/flake8.txt", "pylint": "build/pylint.txt"}}, {"name": "test_api_lyft", "type": "execution", "group": "rentalsflexdrivetests.integration", "container": "rentalsflexdrivetests.spin", "command": "make test_api_lyft", "autotrigger": false, "reports": {"junit": "build/unit.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["python"], "image_type": "library", "slack": "#xd-hub", "team_email": "xd-eng@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "version": "a09d9ca32389e3798eecb27f2154a447c09034b4", "images": [{"parent": {"name": "pythonlibrary", "version": "84c82cc74ab7a2d2bdde44d273644d7ae69eeae1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "84c82cc74ab7a2d2bdde44d273644d7ae69eeae1", "sub_image": null, "external": false}}, "repokid": {"name": "repokid", "description": "AWS Least Privilege for Distributed, High-Velocity Deployment.", "repository": "git@github.com:lyft/repokid.git", "image_type": "library", "languages": ["python"], "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:c421d769bbd8479005c5a72d3c46b1eac64cc89d"}}, "tests": [{"name": "unit2", "type": "jailed", "command": "python2 -3 -m pytest repokid/tests"}, {"name": "unit3", "type": "jailed", "command": "python3 -m pytest repokid/tests"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "slack": "#security", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "team_email": "security-engineering@lyft.com", "version": "3468ec73fd71878bbaf8a44c4d3967be791fff8d", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "c421d769bbd8479005c5a72d3c46b1eac64cc89d", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "c421d769bbd8479005c5a72d3c46b1eac64cc89d", "sub_image": null, "external": false}}, "repomanager": {"name": "repomanager", "description": "repomanager", "repository": "git@github.com:lyft/repomanager.git", "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "slack": "#compute-bots", "docs": {"section": "Infrastructure"}, "image_type": "service", "service_tier": 3, "languages": ["go"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igo:fa0c4921e2e8481015324ac1a2b841013a1a2fdf"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "docker_build", "params": {"sub_image": "docker", "dockerfile": "Dockerfile"}}]}}, "containers": [{"name": "run", "command": "repomanager server", "exports": [{"name": "api", "port": 8080}], "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/health", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/health", "port": 8080}, "initial_delay_seconds": 5, "timeout_seconds": 5}}], "tests": [{"name": "unit", "type": "jailed", "command": "bash -c \"GO111MODULE=on go test ./...\""}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "repomanager.run", "type": "service", "sidecars": ["statsd", "heka", "fluentbit"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 3, "max_size": 3}}}}], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "interpolation_vars": {"kiam_env": "staging"}}, "automatic": true}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "interpolation_vars": {"kiam_env": "production"}}}], "version": "86e41c9de9b79b9f04f4d231d1368eb9080659e7", "images": [{"parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}, {"parent": {"name": "bionicbase", "version": "1e528f4b38210368cdf8837ac5d8060c4a8fe90b", "sub_image": null, "external": false}, "sub_image": "docker"}], "parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}}, "retool": {"name": "retool", "description": "Deployment of retool.com", "repository": "git@github.com:lyft/retool.git", "slack": "#lyft-media-eng-bot", "team_email": "lyft-media-eng@lyft.com", "service_tier": 3, "pagerduty_escalation_policy": "Lyft Media", "languages": [], "image_type": "service", "builder": {"name": "docker_build", "params": {"dockerfile": "Dockerfile", "sub_image": null}}, "containers": [{"name": "interactive", "command": "/bin/bash"}], "deploy": [{"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "mode": "direct", "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "cluster_labels": {"cluster.lyft.net/role": "infra"}}}], "version": "599e4168d489c904cb6597dfe02c1ad7f1ec218d", "images": [{"parent": {"name": "scratch", "version": "", "sub_image": null, "external": true}, "sub_image": null}], "parent": {"name": "scratch", "version": "", "sub_image": null, "external": true}}, "rideableavailability": {"name": "rideableavailability", "repository": "git@github.com:lyft/rideableavailability.git", "description": "rideableavailability", "service_tier": 1, "team_email": "lbs-eng@lyft.com", "pagerduty_escalation_policy": "LBS Mapping Pod", "slack": "#lbs-deploy", "notification_overrides": {"pr_open": {"slack": "#lbs-mapping-pod-bots"}, "pr_merge": {"slack": "#lbs-mapping-pod-bots"}}, "deploy_settings": {"window_start": "08:30 America/New_York", "window_end": "16:00 America/Los_Angeles"}, "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- rideableavailability", "workdir": "/code/rideableavailability", "limits": {"cpu": 2, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600}], "pulldeploy_components": {"data": ["marketplaceconfig"]}, "groups": [{"name": "dev", "members": ["control.dev", "rideableavailability.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "rideableavailability.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "rideableavailability.dev", "container": "rideableavailability.legacy", "command": "make integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "rideableavailability.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "rideableavailability.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {}, "services": [{"name": "rideableavailability"}]}}, "logging": {"rideableavailability": {"fields": {"region": "keyword", "bucket": "keyword", "path": "keyword", "station_id": "keyword", "external_id": "keyword", "rideable_type": "keyword", "rideable_id": "keyword"}}}, "version": "fc134d404c8be1d17a3064732adf6cc748507cc3", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "rideablelogs": {"name": "rideablelogs", "description": "Receives logs from rideable firmwares, via an https endpoint", "repository": "git@github.com:lyft/rideablelogs.git", "slack": "#lbs-deploy", "team_email": "lbs-eng@lyft.com", "pagerduty_escalation_policy": "Lastmile", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:deb42d25da0e6d5fe565c019883e458b4b31b696"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn rideablelogs.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/rideablelogs", "limits": {"cpu": 2, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "rideablelogs.legacy"]}, {"name": "service_group", "members": ["rideablelogs.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "rideablelogs.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "rideablelogs.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "rideablelogs.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "rideablelogs"}]}}, "logging": {"rideablelogs": {"fields": {"rideable_external_id": "keyword", "firmware_hash": "keyword", "filename": "keyword", "client_timestamp": "keyword"}, "unindexed_fields": ["datetime", "fault_code", "fault_message", "fault_timestamp_ms", "level", "line_number", "protobuf", "rideable-logs", "rideable_log"]}}, "version": "dc7d8d065e469a9754ab67974e9cb95205da9b2e", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "rideablerouting": {"name": "rideablerouting", "repository": "git@github.com:lyft/rideablerouting.git", "description": "see the route planner design doc", "service_tier": 1, "team_email": "purchase-flow-eng@lyft.com", "pagerduty_escalation_policy": "Purchase Flow", "slack": "#purchase-flow", "notification_overrides": {"pr_open": {"slack": "#purchase-flow-prs"}, "pr_merge": {"slack": "#purchase-flow-bots"}, "deploy": {"slack": "#purchase-flow-bots"}, "deploy_failure": {"slack": "#purchase-flow-bots"}}, "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- rideablerouting", "workdir": "/code/rideablerouting", "limits": {"cpu": 2, "memory": "2Gi"}, "sub_image": "k8s", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600}], "pulldeploy_components": {"data": ["marketplaceconfig"]}, "groups": [{"name": "dev", "members": ["control.dev", "rideablerouting.legacy"]}, {"name": "integration", "members": ["control.dev", "rideablerouting.dev", "etaproxy.dev", "rideableavailability.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "rideablerouting.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "rideablerouting.integration", "container": "rideablerouting.legacy", "command": "make integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "rideablerouting.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 0, "max_size": 0}, "production": {"min_size": 0, "max_size": 0}}}}, {"name": "canary", "member": "rideablerouting.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {"internal_hosts": {"rideableavailability": null, "etaproxy": null, "eventingest": null}}, "services": [{"name": "rideablerouting"}]}}, "version": "a8d9560e273a5d3d2fd91d42bf6d1cdfb2c7ba47", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "ridechallenges": {"name": "ridechallenges", "description": "Tracks offers and bonus eligibility for driver ride challenge incentives", "repository": "git@github.com:lyft/ridechallenges.git", "image_type": "service", "service_tier": 1, "slack": "#driver-incentives-bots", "team_email": "de-retention@lyft.com", "pagerduty_escalation_policy": "DE Retention", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=4 -k gevent --worker-connections=1000 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/ridechallenges", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "dailyofferauditandrecovery", "command": "dumb-init -- service_venv python manage.py audit_offers -r", "workdir": "/code/ridechallenges", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi"}}, {"name": "ridechallengesstagingoffercreation", "command": "dumb-init -- service_venv python manage.py create_offers_staging", "workdir": "/code/ridechallenges", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi"}}, {"name": "auditoffers", "command": "dumb-init -- service_venv python manage.py audit_offers", "workdir": "/code/ridechallenges", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "8Gi"}}, {"name": "offercreationqa", "command": "dumb-init -- service_venv python manage.py create_ride_challenges", "workdir": "/code/ridechallenges", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "4Gi"}}], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "facets": [{"name": "main", "member": "ridechallenges.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 8}}}}, {"name": "canary", "member": "ridechallenges.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "dailyofferauditandrecovery", "member": "ridechallenges.dailyofferauditandrecovery", "type": "cron", "schedule": "30 19 * * *"}, {"name": "ridechallengesstagingoffercreation", "member": "ridechallenges.ridechallengesstagingoffercreation", "type": "cron", "schedule": "0 12 * * *"}, {"name": "auditoffers", "member": "ridechallenges.auditoffers", "type": "batch"}, {"name": "offercreationqa", "member": "ridechallenges.offercreationqa", "type": "batch"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "ridechallenges.legacy", "incentiveconfig.legacy"]}, {"name": "integration", "members": ["driverridesinfo.dev", "ridechallenges.dev", "jobscheduler.dev", "incentiveconfig.dev", "trips.dev", "tripsapi.dev", "usergroups.dev", "users.dev", "push.dev"]}, {"name": "e2e", "members": ["ridechallenges.integration", "driverridesinfo.dev", "account.dev", "ats.qa_approve", "cancels.dev", "dispatch.dev", "dispatchavailability.integration", "dsfeatures.dev", "dynamodb.dev", "fanner.dev", "green.dev", "jobscheduler.dev", "karma.dev", "locations.dev", "messaging.dev", "ridesapi.dev", "routes.dev", "tcs.dev", "venues.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "ridechallenges.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "ridechallenges.integration", "container": "ridechallenges.legacy", "command": "make test_integration", "reports": {"junit": "build/local_integration.xml"}}, {"name": "e2e", "type": "execution", "command": "make test_e2e", "group": "ridechallenges.e2e", "container": "ridechallenges.legacy", "virtualenv": "integration_venv", "target": "e2e_tests", "autotrigger": false, "float_dependencies": "0 5-22 * * *", "reports": {"junit": "build/e2e_integration.xml"}}, {"name": "coverage", "type": "execution", "container": "ridechallenges.legacy", "group": "ridechallenges.dev", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}, {"facet": "auditoffers"}, {"facet": "ridechallengesstagingoffercreation"}, {"facet": "dailyofferauditandrecovery"}, {"facet": "offercreationqa"}], "kubernetes": {"enabled": true}, "automatic": true}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "auditoffers"}, {"facet": "dailyofferauditandrecovery"}], "kubernetes": {"enabled": true}}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "ridechallenges"}, {"name": "ridechallengesbatch"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 900}}}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "internal_hosts": {"driverridesinfo": null, "jobschedulerbulkweb": null, "ledger": null, "push": null, "regions": null, "ridechallenges": null, "rides": null, "supply": null, "tcs": null, "users": null, "usergroups": null}}}}, "logging": {"ridechallengesbatch": {"fields": {"num_succeeded_offers": "long", "num_failed_offers": "long"}}, "ridechallenges": {"fields": {"offer_id": "keyword", "recover_offer": "boolean", "driver_id": "keyword", "offer": "text", "offer_type": "keyword", "occurred_at": "keyword", "event_type": "keyword", "region": "keyword", "variant_name": "keyword", "experiment_name": "keyword", "exposure_type": "keyword", "order_data": "text", "allocation_id": "keyword", "amount": {"amount": "long", "currency": "keyword", "exponent": "long"}, "code": "long", "ride_ids_only_in_service": "keyword", "new_offer": "text", "existing_offer": "text", "ride_ids_only_in_offer": "keyword", "offer_details": "text", "error_code": "long", "delight_moment_type": "keyword", "error_message": "keyword", "existing_offer_id": "keyword", "start_time": "date", "end_time": "date"}}}, "version": "b76b50c0ee485c6e6412b2868155250883bbd352", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "ridechat": {"name": "ridechat", "description": "For facilitating chat between riders and drivers", "repository": "git@github.com:lyft/ridechat.git", "slack": "#pickup-services", "team_email": "rider-collaboration@lyft.com", "pagerduty_escalation_policy": "Pickup XP Server", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/ridechat", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "redis.dev", "ridechat.legacy"]}, {"name": "integration", "members": ["analyticsingest.dev", "karma.dev", "ridechat.dev", "lyfttestlib.ride", "pusher.dev", "routesapi.dev", "tripsapi.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "ridechat.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "sharded", "float_dependencies": "H 5-22 * * *", "group": "ridechat.dev", "container": "ridechat.legacy", "target": "tests/integration", "virtualenv": "service_venv", "run_in_pr": false, "reports": {"junit": "build/integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "ridechat.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 20}}}}, {"name": "canary", "member": "ridechat.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "ridechat"}], "common_settings": {"internal_hosts": {"karma": null, "locationsrouteline": null, "messaging": null, "push": null, "pusher": null, "ridechat": null, "rides": null, "ridesapi": null, "routesapi": null, "switchboard": null, "tcs": null, "tripsapi": null, "trips": null, "users": null}, "external_hosts": {"dynamodb_iad": null}, "redis_clusters": {"ridechat": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "logging": {"ridechat": {"fields": {"ride_id": "keyword", "message": "keyword", "os": "keyword", "error_code": "long", "client_type": "keyword", "is_internal": "boolean", "major_app_version": "keyword", "error_class": "keyword", "endpoint": "keyword", "client_id": "keyword", "user_id": "keyword", "driver_id": "keyword", "response": "keyword", "grpc_code": "keyword"}}}, "pulldeploy_components": {"data": ["translationdata"]}, "links": [{"text": "Runbook", "url": "https://github.com/lyft/ridechat/blob/master/docs/runbook.md"}], "version": "6f008fd8d98ccea7e1b4814aa43816391febea77", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f7b25e0bad15c0ce9a08707ef862e42c59aaf221", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "rideexpensing": {"name": "rideexpensing", "description": "Sends receipts to expense management providers", "repository": "git@github.com:lyft/rideexpensing.git", "image_type": "service", "languages": ["python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/rideexpensing", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "768Mi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "facets": [{"name": "main", "member": "rideexpensing.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 5}}, {"name": "canary", "member": "rideexpensing.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "rideexpensing.legacy"]}, {"name": "integration", "members": ["control.dev", "dynamodb.server", "rideexpensing.dev", "taskqueue.dev"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "startup", "type": "startup", "group": "rideexpensing.dev"}, {"name": "unit", "type": "execution", "group": "rideexpensing.integration", "container": "rideexpensing.legacy", "framework": "pytest"}], "slack": "#enterprise-deploy", "team_email": "enterprise-commerce-eng@lists.lyft.com", "pagerduty_escalation_policy": "Enterprise Commerce", "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, [{"name": "production-us-east-1d", "availability_zone": "us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "pulldeploy_components": {"data": ["regioncfgdata"]}, "service_tier": 1, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "packages": ["libgeos-c1", "libspatialindex-c3"]}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "rideexpensing"}], "common_settings": {"internal_hosts": {"chromeheadless": null, "enterprise": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "ledger": null, "mailer": null, "messaging": null, "regions": null, "rideexpensing": null, "rides": null, "userprivacyrights": null, "users": null, "taskqueuebulkweb": null, "taskqueuenormalweb": null}, "external_hosts": {"concur": null, "concur_emea": null, "dynamodb_iad": null, "firehose_iad": null}}}}, "logging": {"rideexpensing": {"fields": {"url": "keyword", "error": "keyword", "submission_id": "keyword", "provider_id": "keyword", "old_provider_id": "keyword", "status_code": "long", "ride_id": "keyword", "user_id": "keyword", "event_id": "keyword", "content": "keyword", "html": "keyword", "green_charge_id": "keyword", "order_id": "keyword", "code_num": "long", "charge_id": "keyword", "code_name": "keyword", "submission_time": "keyword", "concur_correlation_id": "keyword", "concur_error_category": "keyword", "concur_error_code": "long", "counterparty_id": "keyword", "invoice_id": "keyword", "provider_user_id": "keyword", "concur_company_id": "keyword"}}}, "version": "1971fe485ae2f0f704e82fd259981f6b1009b235", "images": [{"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "ridehistory": {"name": "ridehistory", "description": "ridehistory", "repository": "git@github.com:lyft/ridehistory.git", "credentials": true, "containers": [{"name": "legacy", "start_time": 180, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}], "limits": {"environment": {"development": {"memory": "2.5Gi", "cpu": 0.1}}}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "ridehistory.legacy", "idl.server"]}, {"name": "integration", "members": ["account.dev", "ats.dev", "auth.dev", "cancels.dev", "coupons.dev", "dispatch.dev", "enterprise.dev", "etaproxy.dev", "fare.dev", "green.dev", "guardian.dev", "jobscheduler.dev", "karma.dev", "ledger.dev", "locations.dev", "pricing.dev", "publicapi.dev", "ratecards.dev", "regions.dev", "ridehistory.dev", "ridelocations.dev", "rides.dev", "ridescheduler.dev", "supply.dev", "switchboard.dev", "tom.dev", "users.dev", "www2.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "ridehistory.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy", "virtualenv": "service_venv"}, {"name": "integration", "type": "execution", "group": "ridehistory.integration", "container": "ridehistory.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "command": "env TEST_TAGS=\"unit_legacy\" make test_unit", "container": "ridehistory.legacy", "group": "ridehistory.dev", "reports": {"junit": "build/unit.xml"}}], "slack": "#support-xp-eng", "notification_overrides": {"deploy": {"slack": "#support-xp-bots"}, "deploy_failure": {"slack": "#support-xp-bots"}, "test_failure": {"slack": "#support-xp-bots", "environments": ["production"]}, "master_failure": {"slack": "#support-xp-bots"}, "pr_merge": {"slack": "#support-xp-bots"}}, "team_email": "support-xp@lyft.com", "pagerduty_escalation_policy": "Support XP", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": true}, [{"name": "production-us-east-1d", "availability_zone": "us-east-1d", "legacy": true}, {"name": "production", "legacy": true}]], "languages": ["python"], "image_type": "service", "service_tier": 1, "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "ridehistory"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "enable_gzip": true, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"ats": null, "cancels": null, "coupons": null, "enterprise": null, "guardian": null, "grow": null, "help": null, "ledger": null, "messaging": null, "payapi": null, "ratecards": null, "regions": null, "rides": null, "routes": null, "supply": null, "supportcontact": null, "switchboard": null, "tcs": null, "usergroups": null, "users": null, "wallet": null, "www2": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null, "firehose_iad": null, "mapbox": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"ridehistory": {"fields": {"route_id": "keyword", "route_drop_off_or_processed": "boolean", "distance_meters": "long", "duration_seconds": "long", "log_data": {"distance_meters": "long", "route_type_label": "keyword", "route_distance": {"value": "float", "unit": "keyword"}, "duration_seconds": "long"}, "order_ids": "keyword", "user_id": "keyword", "ride_id": "keyword", "case_id": "long", "error": {"error_code": "long", "is_internal": "boolean", "client_type": "keyword", "endpoint": "keyword", "message": {"error": "keyword", "error_description": "keyword", "error_detail": "keyword"}, "os": "keyword", "major_app_version": "keyword", "user_id": "keyword", "error_class": "keyword", "client_id": "keyword"}, "exception": "keyword", "stop_type": "long", "ride_type_internal_name": "keyword", "message": "keyword"}}}, "version": "5b799fee7912d7811b20888f846280efe4c687fa", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "ridelocations": {"name": "ridelocations", "description": "ridelocations", "repository": "git@github.com:lyft/ridelocations.git", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 800, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "ridelocations.legacy"]}, {"name": "integration", "members": ["kinesis.server", "messaging.dev", "places.integration", "ridelocations.dev", "rides.dev", "routingengine.dev", "spots.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "ridelocations.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "virtualenv": "service_venv", "markers": "not unit_legacy"}, {"name": "integration", "type": "execution", "group": "ridelocations.integration", "container": "ridelocations.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "framework": "pytest", "coverage": false, "markers": "unit_legacy", "container": "ridelocations.legacy", "group": "ridelocations.dev", "targets": ["tests/unit"], "virtualenv": "service_venv"}], "slack": "#places", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "spots-places-team@lyft.com", "pagerduty_escalation_policy": "Places", "service_tier": 1, "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "20:00 America/New_York"}, "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "languages": ["python"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "ridelocations"}, {"name": "ridelocationsbatch"}, {"name": "ridelocationsbulk"}, {"name": "ridelocationskcl"}], "common_settings": {"internal_hosts": {"dsfeatures": null, "jobschedulernormalweb": null, "jobschedulerbulkweb": null, "messaging": null, "modeldiscovery": null, "modelexecmisc": null, "places": null, "regions": null, "rides": null, "ridelocations": null, "roadsupdated": null, "routingengine": null, "routingenginena20190710": null, "spots": null, "tcs": null, "userprivacyrights": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "logging": {"ridelocationskcl": {"fields": {"shard_info": "keyword", "reason": "keyword"}}, "ridelocationsbulk": {"fields": {"response": "keyword", "code": "long"}}, "ridelocations": {"fields": {"response": "keyword", "code": "long", "headers": {"X-Lyft-User-Id": "keyword"}, "error": "keyword", "data": {"lng": "float", "lat": "float"}, "status_code": "long"}}}, "credentials": true, "version": "7c3fdb3ebf51c30826641bb3469e28b709de5521", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "ridelocsmetrics": {"name": "ridelocsmetrics", "description": "Flink application to monitor ridelocations event-based metrics in realtime", "repository": "git@github.com:lyft/ridelocsmetrics.git", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "locationswatch.dev", "ridelocsmetrics.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "ridelocsmetrics.dev"}, {"name": "integration", "type": "execution", "group": "ridelocsmetrics.dev", "container": "ridelocsmetrics.legacy", "command": "mvn verify -P '!disable-integration-tests'"}], "slack": "#places", "team_email": "spots-places-team@lyft.com", "pagerduty_escalation_policy": "Places", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "languages": ["bash", "java"], "image_type": "service", "service_tier": 3, "streamingplatform": {"version": "1.2-SNAPSHOT", "flink_config_overrides": [{"key": "state.backend", "value": "filesystem"}], "jobmanagers": [{"name": "ridelocsmetrics", "jobs": [{"name": "ridelocsmetrics", "jar": "ridelocsmetrics-1.0.0-SNAPSHOT.jar", "class": "com.lyft.app.RideLocsMetricsJobDriver", "description": null, "development": {"parallelism": 1}, "staging": {"parallelism": 1}, "production": {"parallelism": 64}}]}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "ridelocsmetrics"}, {"name": "ridelocsmetricsjobmanager"}, {"name": "ridelocsmetricstaskmanager"}], "common_settings": {"external_hosts": {"kinesis_iad": null}, "internal_hosts": {"locationswatch": null}}}}, "version": "135aa6bb5592d639cb1e21efa257b2f02bb41b14", "images": [{"parent": {"name": "opsbase", "version": "8e738741d84a4e5507052068fa7dafe771cb111a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "8e738741d84a4e5507052068fa7dafe771cb111a", "sub_image": null, "external": false}}, "ridemonitor": {"name": "ridemonitor", "description": "Monitors and classifies traits of ongoing rides", "repository": "git@github.com:lyft/ridemonitor.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:bd8615cdc0a53fe60b894b4b0cc3447deeb0e366", "packages": ["default-jre-headless", "liblog4j1.2-java", "libblas-dev", "liblapack-dev", "libatlas-base-dev", "gfortran", "awscli", "libfreetype6-dev", "libxft-dev", "python-tk", "libgeos-c1", "libspatialindex-c3"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"sub_image": "k8s", "builder": "lyft/s2ipython3:8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "packages": ["default-jre-headless", "liblog4j1.2-java", "libblas-dev", "liblapack-dev", "libatlas-base-dev", "gfortran", "g++-5", "awscli"], "buildargs": ["CXX=g++-5"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "kclworker", "sub_image": "k8s", "command": "dumb-init -- service_venv /code/kcl/kcl-worker.sh", "limits": {"cpu": 4, "memory": "8Gi"}}, {"name": "spoofingdetectionworker", "workdir": "/code/ridemonitor", "sub_image": "k8s", "command": "dumb-init -- service_venv python -m app.workers.spoofing_detection_worker --num_cpus 4", "limits": {"cpu": 8, "memory": "8Gi"}}, {"name": "worker", "workdir": "/code/ridemonitor", "sub_image": "k8s", "command": "dumb-init -- service_venv /code/ridemonitor/bin/start-worker.sh", "limits": {"cpu": 8, "memory": "8Gi"}}], "facets": [{"name": "kcl", "member": "ridemonitor.kclworker", "type": "worker", "envoy_service": "ridemonitorkcl", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 12, "max_size": 25}}}}, {"name": "kclcanary", "member": "ridemonitor.kclworker", "type": "worker", "envoy_service": "ridemonitorkcl", "canary": true, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "spoofingdetection", "member": "ridemonitor.spoofingdetectionworker", "type": "worker", "envoy_service": "spoofingdetectionworkers", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 5}}}}, {"name": "spoofingdetectioncanary", "member": "ridemonitor.spoofingdetectionworker", "type": "worker", "envoy_service": "spoofingdetectionworkers", "canary": true, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "ridemonitorworker", "member": "ridemonitor.worker", "type": "worker", "envoy_service": "ridemonitorworkers", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 24, "max_size": 50}}}}, {"name": "ridemonitorworkercanary", "member": "ridemonitor.worker", "type": "worker", "envoy_service": "ridemonitorworkers", "canary": true, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "ridemonitor.legacy"]}, {"name": "integration", "members": ["ridemonitor.dev", "kinesis.server", "ratelimit.legacy", "redis.server", "usergroups.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "ridemonitor.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "ridemonitor.integration", "container": "ridemonitor.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#driving-backend", "service_tier": 2, "team_email": "driving-eng@lyft.com", "pagerduty_escalation_policy": "Driving Team", "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "kcl"}, {"facet": "spoofingdetection"}, {"facet": "ridemonitorworker"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "kclcanary"}, {"facet": "spoofingdetectioncanary"}, {"facet": "ridemonitorworkercanary"}], "kubernetes": {"enabled": true}}, [{"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "targets": [{"facet": "kcl"}, {"facet": "spoofingdetection"}, {"facet": "ridemonitorworker"}], "kubernetes": {"enabled": true}}, {"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "targets": [{"facet": "kcl"}, {"facet": "spoofingdetection"}, {"facet": "ridemonitorworker"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "targets": [{"facet": "kcl"}, {"facet": "spoofingdetection"}, {"facet": "ridemonitorworker"}], "kubernetes": {"enabled": true}}], "pulldeploy_components": {"data": ["marketplaceconfig", "translationdata", "regioncfgdata"]}, "languages": ["bash", "python"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "ridemonitor"}, {"name": "ridemonitorbatch"}, {"name": "ridemonitorkcl"}, {"name": "ridemonitorworkers"}, {"name": "spoofingdetectionworkers"}], "common_settings": {}, "override_settings": [{"services": [{"name": "ridemonitor"}], "settings": {"internal_hosts": {"cancels": null, "etaproxy": null, "messaging": null, "locations": null, "ratelimit": null, "regions": null, "rides": null, "ridesapi": null, "ridescheduler": null, "routes": null, "routesapi": null, "switchboard": null, "tcs": null, "usergroups": null, "users": null, "venues": null, "viewport": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "redis": {"ridemonitormultiredis": {"port": 6380, "op_timeout_ms": 1250, "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}}}}, {"services": [{"name": "ridemonitorbatch"}], "settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}}}, {"services": [{"name": "ridemonitorkcl"}], "settings": {"internal_hosts": {"etaproxy": null, "regions": null, "ridesapi": null, "ridescheduler": null, "switchboard": null, "tcs": null, "usergroups": null, "venues": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "redis": {"ridemonitormultiredis": {"port": 6380, "op_timeout_ms": 1250, "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}}}}, {"services": [{"name": "ridemonitorworkers"}], "settings": {"internal_hosts": {"cancels": null, "etaproxy": null, "messaging": null, "locations": null, "ratelimit": null, "regions": null, "rides": null, "ridesapi": null, "ridescheduler": null, "routes": null, "routesapi": null, "switchboard": null, "tcs": null, "usergroups": null, "users": null, "venues": null, "viewport": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "redis": {"ridemonitormultiredis": {"port": 6380, "op_timeout_ms": 1250, "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}}}}, {"services": [{"name": "spoofingdetectionworkers"}], "settings": {"internal_hosts": {"locations": null, "regions": null, "rides": null, "routes": null, "routesapi": null, "users": null, "venues": null, "viewport": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "redis": {"ridemonitormultiredis": {"port": 6380, "op_timeout_ms": 1250, "outlier_detection": {"consecutive_5xx": 1000, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}}}}]}}, "logging": {"ridemonitor": {"fields": {"ride_id": "keyword", "bailout_model_name": "keyword", "bailout_reason": "keyword"}}, "ridemonitorworkers": {"fields": {"ride_id": "keyword", "event_name": "keyword", "field_name": "keyword", "error_msg": "keyword", "error_id": "keyword", "field_value": "keyword", "event_data": {"due_to_bailout": "boolean", "is_linkable": "boolean", "ride_id": "keyword", "version_number": "keyword", "driver_lyft_id": "keyword", "destination_lng": "float", "event_name": "keyword", "ride_state": "keyword", "destination_lat": "float", "passenger_lyft_id": "keyword", "lookup_table_date": "date", "region": "keyword", "is_linkable_score": "float", "previous_is_linkable": "boolean"}, "kwargs": "keyword", "pax_lyft_id": "keyword", "event": {"lookup_table_date": "date", "event_name": "keyword", "is_linkable_score": "float", "ride_id": "keyword", "version_number": "keyword", "region": "keyword", "features_json": "keyword", "user_id": "keyword"}, "model": "keyword", "next_run_timestamp": "float", "region": "keyword", "pickup_index": "long", "bailout_penalty_waived": "boolean", "bailout_reason": "keyword", "bailout_probability_threshold": "float", "bailout_tolerance": "long", "response": {"bailed_out": "boolean"}, "url": "keyword", "bad_response": "keyword", "service_name": "keyword", "status_code": "keyword", "linked_ride_id": "keyword", "current_ride_id": "keyword", "success": "boolean", "name": "keyword", "lock_timeout_sec": "long", "driver_id": "keyword", "passenger_id": "keyword", "exception": "keyword", "destination_lng": "float", "destination_lat": "float", "gh": "keyword", "ride_region": "keyword", "class_name": "keyword", "lat": "float", "lng": "float", "target_lat": "float", "target_lng": "float", "code": "long", "run_timestamp": "float", "start_time_s": "float", "processes_in_pool": "long", "attempt_num": "long", "user_id": "keyword", "failed_record_count": "long", "traceback": "keyword"}}, "ridemonitorkcl": {"fields": {"error_id": "keyword", "field_name": "keyword", "error_msg": "keyword", "event_name": "keyword", "field_value": "long", "event_data": {"lookup_table_date": "date", "due_to_bailout": "boolean", "destination_lng": "float", "destination_lat": "float", "driver_lyft_id": "keyword", "region": "keyword", "ride_id": "keyword", "passenger_lyft_id": "keyword", "previous_is_linkable": "boolean", "event_name": "keyword", "ride_state": "keyword", "is_linkable_score": "long", "version_number": "keyword", "is_linkable": "boolean"}, "reason": "keyword", "loc1": {"lng": "float", "recorded_at_ms": "keyword", "accuracy": "float", "lat": "float", "device_id": "keyword", "bearing": "float", "is_mock": "boolean"}, "loc2": {"recorded_at_ms": "keyword", "accuracy": "float", "lng": "float", "lat": "float", "device_id": "keyword", "bearing": "float"}, "driver": "keyword", "speed_mph": "float", "lat": "float", "lng": "float"}}}, "version": "ac6b24cb31f64cf92db37ce1a2b79ad751a58609", "images": [{"parent": {"name": "opsbase", "version": "bd8615cdc0a53fe60b894b4b0cc3447deeb0e366", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "bd8615cdc0a53fe60b894b4b0cc3447deeb0e366", "sub_image": null, "external": false}}, "ridepasses": {"name": "ridepasses", "description": "Lyft subscriptions and ridepasses", "repository": "git@github.com:lyft/ridepasses.git", "image_type": "service", "service_tier": 2, "slack": "#memberships-bots", "team_email": "rider-memberships-eng@lyft.com", "pagerduty_escalation_policy": "Memberships", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/ridepasses", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "auditor", "command": "dumb-init -- service_venv flask worker auditor", "workdir": "/code/ridepasses", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "6Gi"}}, {"name": "lowriderauditor", "command": "dumb-init -- service_venv flask worker lowrider_auditor", "workdir": "/code/ridepasses", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "6Gi"}}, {"name": "script", "command": "dumb-init -- service_venv", "workdir": "/code/ridepasses", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "6G"}}], "facets": [{"name": "main", "member": "ridepasses.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 5, "max_size": 200}}}}, {"name": "canary", "member": "ridepasses.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-env.sls"], "canary": true, "profiling": {"enabled": false}, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "auditor", "member": "ridepasses.auditor", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-env.sls"], "schedule": "0 * * * *"}, {"name": "lowriderauditor", "member": "ridepasses.lowriderauditor", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-env.sls"], "schedule": "0 9 * * *"}, {"name": "script", "member": "ridepasses.script", "type": "batch", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-env.sls"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}]}}, "groups": [{"name": "minimal", "members": ["control.dev", "dynamodb.dev", "elasticsearch.dev", "ridepasses.legacy"]}, {"name": "dev", "members": ["control.dev", "redis.dev", "dynamodb.dev", "ridepasses.legacy", "ridepassesfe.legacy", "taskqueue.dev", "riderperks.legacy"]}, {"name": "integration", "members": ["account.minimal", "coupons.legacy", "envoy.server", "green.legacy", "jobscheduler.dev", "karma.dev", "ledger.dev", "locations.dev", "messaging.dev", "places.legacy", "paymentgateway.dev", "regions.dev", "riderperks.legacy", "ridesapi.dev", "ridepasses.legacy", "switchboard.dev", "taskqueue.dev", "txnhub.legacy", "tcs.legacy", "trips.dev", "tripsapi.dev", "users.dev", "usereligibilities.dev", "viewport.dev", "walletapi.dev", "wallet.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "ridepasses.minimal"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration_core", "type": "execution", "group": "ridepasses.integration", "container": "ridepasses.legacy", "command": "make test_integration_core", "reports": {"junit": "build/integration.xml"}}, {"name": "integration_intro_pricing", "type": "sharded", "group": "ridepasses.minimal", "container": "ridepasses.legacy", "target": "tests/integration/intro_pricing", "virtualenv": "integration_venv", "float_dependencies": "H 9-17 * * *", "reports": {"junit": "build/integration.xml"}}, {"name": "integration_pausing_and_reactivation", "type": "sharded", "group": "ridepasses.minimal", "container": "ridepasses.legacy", "target": "tests/integration/pausing_and_reactivation", "virtualenv": "integration_venv", "float_dependencies": "H 9-17 * * *", "reports": {"junit": "build/integration.xml"}}, {"name": "integration_payment_failures", "type": "sharded", "group": "ridepasses.minimal", "container": "ridepasses.legacy", "target": "tests/integration/payment_failures", "virtualenv": "integration_venv", "float_dependencies": "H 9-17 * * *", "reports": {"junit": "build/integration.xml"}}, {"name": "integration_lowrider", "type": "sharded", "group": "ridepasses.minimal", "container": "ridepasses.legacy", "target": "tests/integration/lowrider", "virtualenv": "integration_venv", "float_dependencies": "H 9-17 * * *", "autotrigger": false, "reports": {"junit": "build/integration.xml"}}], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}, {"facet": "auditor"}, {"facet": "script"}], "kubernetes": {"enabled": true}, "automatic": true, "orca": [{"region": "iad"}], "links": [{"text": "ridepasses runbook", "url": "https://github.com/lyft/ridepasses/blob/master/docs/runbook.md"}, {"text": "sim staging kibana search", "url": "https://kibana-staging.lyft.net/goto/87dc083de1e9fbdbda47539c229de826"}, {"text": "sim staging wavefront", "url": "https://lyft.wavefront.com/u/Xh865fZWRy"}, {"text": "sim staging grafana", "url": "https://grafana.lyft.net/dashboard/db/simulatedrides?refresh=1m&panelId=26&fullscreen&orgId=1&var-environment=staging"}]}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "auditor"}, {"facet": "lowriderauditor"}, {"facet": "script"}], "kubernetes": {"enabled": true}}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "notification_overrides": {"test_failure": {"disabled": true}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "ridepasses"}, {"name": "ridepassesauditor"}], "common_settings": {"internal_hosts": {"coupons": null, "green": null, "ledger": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "taskqueuenormalweb": null, "taskqueuebulkweb": null, "places": null, "ratelimit": null, "regions": null, "ridepasses": null, "riderperks": null, "tcs": null, "trips": null, "tripsapi": null, "users": null, "usereligibilities": null, "wallet": null, "walletapi": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "redis": {"ridepassesmultiredis": {"port": 6380}}}}}, "logging": {"ridepasses": {"fields": {"coupon_charge_account_id": "keyword", "exc_type": "keyword", "call_signature": "keyword", "code": "long", "tcs_response_code": "long", "package_id": "keyword", "job_id": "keyword", "user_id": "keyword", "ride_pass_id": "keyword", "error": "keyword", "error_description": "keyword", "run_id": "keyword", "audit_type": "keyword", "ledger_id": "keyword", "minutes_stuck": "long", "order_id": "keyword", "minutes_late": "long", "audit_name": "keyword", "failure_cause": "keyword"}}}, "version": "8f03ac5a20261b845a271b1e51a6c181e55c32b8", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "ridepassesfe": {"name": "ridepassesfe", "description": "Web Frontend for Lyft's Ride-pass / Subscription / Membership based Products", "repository": "git@github.com:lyft/ridepassesfe.git", "slack": "#memberships-bots", "team_email": "rider-memberships-eng@lists.lyft.com", "pagerduty_escalation_policy": "Memberships", "image_type": "service", "service_tier": 2, "languages": ["javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "workdir": "/code/ridepassesfe", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "cdnupload", "command": "/code/ridepassesfe/cdn-upload", "workdir": "/code/ridepassesfe", "sub_image": "k8s"}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "www2.dev", "ridepassesfe.legacy", "accountfrontend.dev", "users.dev", "tcs.legacy"]}, {"name": "service_group", "members": ["ridepassesfe.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "ridepassesfe.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "tsc", "type": "execution", "container": "ridepassesfe.legacy", "group": "ridepassesfe.service_group", "command": "make test_tsc"}, {"name": "lint", "type": "execution", "container": "ridepassesfe.legacy", "group": "ridepassesfe.service_group", "command": "make test_lint"}], "pulldeploy_components": {"data": ["translationdata"]}, "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "ridepassesfe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"www2": null, "users": null, "ridepasses": null, "tcs": null, "coupons": null, "robocop": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2inode:service.f633733a7fe0e80669ecd9bb6ee09b12d06a9666", "sub_image": "k8s"}}, {"name": "docker_build"}]}}, "facets": [{"name": "main", "member": "ridepassesfe.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 2}}}}, {"name": "canary", "member": "ridepassesfe.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "assets", "member": "ridepassesfe.cdnupload", "type": "job"}], "version": "25f7fff78d0b736d2c0517b06fd92f486a8c076f", "images": [{"parent": {"name": "s2inode", "version": "f633733a7fe0e80669ecd9bb6ee09b12d06a9666", "sub_image": "service", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "rideprograms": {"name": "rideprograms", "description": "Service for managing enterprise ride programs", "repository": "git@github.com:lyft/rideprograms.git", "slack": "#ride-programs-dev", "team_email": "enteprise-rp-eng@lyft.com", "pagerduty_escalation_policy": "Ride Programs", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "packages": ["libgeos-c1", "libspatialindex-c3", "libcurl4-openssl-dev", "libssl-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s", "packages": ["libcurl4-openssl-dev", "libssl-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/rideprograms", "limits": {"cpu": 2, "memory": "2Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "worker", "command": "dumb-init -- service_venv celery -A app.celery.celery worker --loglevel=debug --pool=gevent --max-tasks-per-child 10", "workdir": "/code/rideprograms", "sub_image": "k8s"}, {"name": "creditsauditcron", "command": "dumb-init -- service_venv manage audit_ride_program_credits_programs -e 'enterprise-rp-eng@lists.lyft.com'", "workdir": "/code/rideprograms", "sub_image": "k8s"}, {"name": "lyftcomcreditsauditcron", "command": "dumb-init -- service_venv manage audit_lyftcom_credits", "workdir": "/code/rideprograms", "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "redis.dev", "rideprograms.legacy", "regions.dev", "taskqueue.dev"]}, {"name": "service_group", "members": ["rideprograms.legacy"]}, {"name": "integration", "members": ["ats.legacy", "coupons.dev", "enterprise.dev", "enterpriseorgapi.dev", "green.dev", "jobscheduler.legacy", "karma.legacy", "ledger.dev", "pricing.legacy", "regions.dev", "rideprograms.dev", "rides.legacy", "ridesapi.legacy", "tom.legacy", "trips.dev", "tripsapi.dev", "users.dev", "wallet.dev", "walletapi.dev", "postgresql.server", "www2.dev", "taskqueue.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "rideprograms.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy"}, {"name": "integration", "type": "execution", "group": "rideprograms.dev", "container": "rideprograms.legacy", "target": "tests/integration/", "command": "make test_integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "e2e", "type": "execution", "group": "rideprograms.integration", "container": "rideprograms.legacy", "target": "tests/e2e", "command": "make test_e2e", "reports": {"junit": "build/integration.xml"}}, {"name": "unit_legacy", "type": "execution", "autotrigger": false, "container": "rideprograms.legacy", "group": "rideprograms.dev", "framework": "pytest", "coverage": false, "targets": ["tests/unit"], "markers": "unit_legacy"}], "facets": [{"name": "main", "member": "rideprograms.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 5}}}}, {"name": "canary", "member": "rideprograms.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "workers", "member": "rideprograms.worker", "type": "worker", "autoscaling": {"criteria": {"cpu_target": 40}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 3}}}}, {"name": "creditsauditcron", "member": "rideprograms.creditsauditcron", "type": "cron", "schedule": "0 15 * * *"}, {"name": "lyftcomcreditsauditcron", "member": "rideprograms.lyftcomcreditsauditcron", "type": "cron", "schedule": "0 */2 * * *"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "workers"}, {"facet": "creditsauditcron"}, {"facet": "lyftcomcreditsauditcron"}]}, {"name": "canary", "links": [{"text": "Runbook", "url": "https://docs.lyft.net/eng/rideprograms/runbook.html"}, {"text": "Lightstep", "url": "https://go/rp-lightstep"}], "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "workers"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "workers"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "creditsauditcron"}, {"facet": "workers"}, {"facet": "lyftcomcreditsauditcron"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "rideprograms"}], "common_settings": {"internal_hosts": {"coupons": null, "enterprise": null, "enterpriseorgapi": null, "jobschedulernormalweb": null, "messaging": null, "platformfeecalculator": null, "ratelimit": null, "regions": null, "regionsadmin": null, "rideprograms": null, "userprivacyrights": null, "users": null, "taskqueuenormalweb": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "redis_clusters": {"rideprograms": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 700}}}}}, "logging": {"rideprograms": {"fields": {"client_id": "keyword", "code": "keyword", "coupon_code": "keyword", "customer_id": "keyword", "downstream_service": "keyword", "email": "keyword", "endpoint": "keyword", "lyft_user_id": "keyword", "organization_lyft_id": "keyword", "organization_slug": "keyword", "phone_number": "keyword", "ride_program_benefit_id": "keyword", "ride_program_credit_id": "keyword", "ride_program_instance_id": "keyword", "ride_program_id": "keyword", "method": "keyword", "shape_id": "keyword", "status_code": "integer", "user_id": "long"}}}, "version": "9f50e026cbd6c2acfd6727dbc18715376b7980bd", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "ridereplayint": {"name": "ridereplayint", "description": "Frontend for debugging system decisions for rides + sessions.", "repository": "git@github.com:lyft/ridereplayint.git", "image_type": "service", "service_tier": 3, "slack": "#marketplace-health", "team_email": "marketplace-health@lyft.com", "pagerduty_escalation_policy": "Replay", "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "ridereplayint.legacy", "tom.dev"]}], "configsets": ["graphqldata"], "tests": [{"name": "startup", "type": "startup", "group": "ridereplayint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "eslint", "type": "jailed", "command": "make test_lint"}, {"name": "graphql-schema", "type": "execution", "group": "ridereplayint.dev", "container": "ridereplayint.legacy", "command": "make test_graphql_schema", "autotrigger": false}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "ridereplayint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"tom": null}}}}, "version": "3306e9c96379b9e1bddf6c8898c3c9f2f78301dd", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "riderperks": {"name": "riderperks", "description": "Service that handles configuration and redemption of rider membership perks", "repository": "git@github.com:lyft/riderperks.git", "slack": "#memberships-bots", "team_email": "rider-memberships-eng@lyft.com", "pagerduty_escalation_policy": "Memberships", "image_type": "service", "service_tier": 0, "languages": ["python", "bash"], "credentials": false, "pulldeploy_components": {"data": ["regioncfgdata"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/riderperks", "limits": {"cpu": 2, "memory": "4Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "users.dev", "dsfeatures.legacy", "riderperks.legacy"]}, {"name": "service_group", "members": ["riderperks.legacy"]}, {"name": "integration", "members": ["lyfttestlib.core", "green.legacy", "karma.dev", "locations.dev", "switchboard.dev", "users.dev", "viewport.dev", "walletapi.dev", "wallet.dev", "riderperks.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "riderperks.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "target": "tests/integration", "group": "riderperks.integration", "container": "riderperks.legacy", "virtualenv": "integration_venv", "command": "make test_integration", "reports": {"junit": "build/integration.xml"}}], "facets": [{"name": "main", "member": "riderperks.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 10}}}}, {"name": "canary", "member": "riderperks.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "riderperks"}], "common_settings": {"internal_hosts": {"cancels": null, "cetconcessions": null, "coupons": null, "dsfeatures": null, "jobschedulernormalweb": null, "riderperks": null, "rides": null, "tcs": null, "users": null, "usereligibilities": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "redis": {"riderperksmultiredis": {"port": 6380}}}}}, "version": "8cd4bb6d1e6ada375bacb4c7c0b3a14337b2bc0b", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "riderweb": {"name": "riderweb", "description": "Lyft web client for riders", "repository": "git@github.com:lyft/riderweb.git", "slack": "#riderweb-team", "team_email": "webux-eng@lyft.com", "pagerduty_escalation_policy": "Rider Web", "image_type": "service", "service_tier": 2, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "riderweb.legacy"]}, {"name": "integration", "members": ["accountfrontend.integration", "dispatchavailability.integration", "offeringsapi.integration", "places.integration", "ratings.integration", "ridetimeestimator.integration", "walletapi.integration", "wwwbrochurefe.dev", "wwwenterprisefe.dev"]}, {"name": "service_group", "members": ["riderweb.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "riderweb.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "riderweb"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"account": null}}}}, "version": "993f0f415139b04e75c4ff1d21c94169c14ef9b4", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "rides": {"name": "rides", "description": "rides", "repository": "git@github.com:lyft/rides.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- rides", "workdir": "/code/rides", "sub_image": "k8s", "limits": {"cpu": 6, "memory": "6Gi"}}], "facets": [{"name": "main", "member": "rides.service", "type": "service", "requirements": {"mongo": true}, "autoscaling": {"environment": {"staging": {"min_size": 2, "max_size": 60}, "production": {"min_size": 5, "max_size": 120}}}}, {"name": "canary", "member": "rides.service", "type": "service", "canary": true, "requirements": {"mongo": true}, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "mongodb.server", "rides.legacy", "redis.dev", "dbproxyrides.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "rides.dev"}, {"name": "unit", "type": "jailed", "framework": "go", "coverage_options": {"omit": "(main.go|mock_rides_config.go|internal/mockery|internal/testing|services/internal)"}}, {"name": "integration", "type": "execution", "group": "rides.dev", "container": "rides.legacy", "framework": "go", "coverage_options": {"omit": "(main.go|mock_rides_config.go|internal/mockery|internal/testing|services/internal)"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#rides", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "core-services@lyft.com", "pagerduty_escalation_policy": "API", "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}], "service_tier": 0, "languages": ["go"], "image_type": "service", "envoy": {"profile": "go", "settings": {"services": [{"name": "rides"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "mongos": {"rides": {"production": {"local_ratelimit": {"fill_interval": "0.2s", "max_tokens": 30, "tokens_per_fill": 1}, "ratelimit": true, "clusters": [{"port": 27020, "hosts": ["r027189-10.mlab.com:27817", "r027189-11.mlab.com:27817", "r027189-12.mlab.com:27817", "r027189-13.mlab.com:27817", "r027189-14.mlab.com:27817", "r027189-15.mlab.com:27817", "r027189-16.mlab.com:27817", "r027189-17.mlab.com:27817", "r027189-18.mlab.com:27817", "r027189-19.mlab.com:27817", "r027189-20.mlab.com:27817", "r027189-21.mlab.com:27817", "r027189-22.mlab.com:27817", "r027189-23.mlab.com:27817", "r027189-24.mlab.com:27817", "r027189-25.mlab.com:27817", "r027189-26.mlab.com:27817", "r027189-27.mlab.com:27817", "r027189-28.mlab.com:27817", "r027189-29.mlab.com:27817", "r027189-30.mlab.com:27817", "r027189-31.mlab.com:27817", "r027189-32.mlab.com:27817", "r027189-33.mlab.com:27817", "r027189-34.mlab.com:27817", "r027189-35.mlab.com:27817", "r027189-36.mlab.com:27817", "r027189-37.mlab.com:27817", "r027189-38.mlab.com:27817", "r027189-39.mlab.com:27817"]}]}, "staging": {"local_ratelimit": {"fill_interval": "0.2s", "max_tokens": 30, "tokens_per_fill": 1}, "ratelimit": true, "clusters": [{"port": 27020, "hosts": ["r055605-a0.mlab.com:27817", "r055605-a1.mlab.com:27817"]}]}}}, "redis_clusters": {"rides": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 300, "read_policy": "PREFER_MASTER", "health_check": {"timeout_ms": 1000, "interval_ms": 5000}, "outlier_detection": {"consecutive_5xx": 200, "enforcing_success_rate": 0}}}, "internal_hosts": {"dbproxyrides": null}}}}, "logging": {"rides": {"fields": {"requestId": "keyword", "rideId": "keyword", "transitionTo": "keyword", "transitionFrom": "keyword", "driverId": "keyword", "requestRevision": "long", "bailout": "boolean", "routeId": "keyword", "revision": "long", "newStatus": "keyword", "service": "keyword", "request_id": "keyword", "code": "keyword", "downstream_cluster": "keyword", "error": "keyword", "endpoint": "keyword", "lyft_user_id": "keyword", "field": {"route_id": "keyword", "route": {"domain": "keyword", "identifier": "keyword"}, "drivernotifystartedat": "keyword"}, "downstreamCluster": "keyword", "actorRole": "keyword", "rpc": "keyword", "tip_amount": "long", "tip_currency": "keyword", "tip_exponent": "keyword", "method": "keyword", "path": "keyword", "host": "keyword", "autonomousProviderId": "keyword", "lastUpdateContext": {"downstreamCluster": "keyword", "method": "keyword", "userAgent": "keyword", "requestId": "keyword", "updatedTimestampMs": "long"}, "rides": {"operation": "keyword"}, "ignored": {"rideId": "keyword"}, "signal": "keyword", "protocol": "keyword", "panic": "boolean", "stack": "keyword", "user-agent": "keyword", "userAgent": "keyword", "userId": "keyword", "grpcMethod": "keyword", "grpcStatusCode": "long"}}}, "version": "d5893176ac0c867206ac0e632d056cea4dfd2cbe", "images": [{"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "ridesapi": {"name": "ridesapi", "description": "External API and compositional layer for managing rides", "repository": "git@github.com:lyft/ridesapi.git", "credentials": true, "pagerduty_escalation_policy": "API", "team_email": "api-services@lyft.com", "slack": "#rides-api", "slack_deploy_notification_environments": ["staging", "canary", "production", "production-us-east-1a", "production-us-east-1d"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app  --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/ridesapi", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "3Gi"}}], "facets": [{"name": "main", "member": "ridesapi.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 2, "max_size": 4}, "production": {"min_size": 8, "max_size": 500}}}}, {"name": "canary", "member": "ridesapi.service", "type": "service", "canary": true, "autoscaling": {"min_size": 2, "max_size": 2}}], "groups": [{"name": "dev", "members": ["ridesapi.legacy", "control.dev"]}, {"name": "integration", "members": ["lyfttestlib.ride", "passengerqueues.legacy", "places.legacy", "ridesapi.legacy"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "skip_threshold": 3, "reports": {"cobertura": "build/unit_coverage.xml", "junit": "build/unit_tests.xml"}}, {"name": "integration", "type": "sharded", "group": "ridesapi.dev", "container": "ridesapi.legacy", "target": "tests/integration", "virtualenv": "service_venv", "float_dependencies": "H 5-22 * * *", "skip_threshold": 2, "reports": {"junit": "build/integration.xml"}}, {"name": "ride_states", "type": "sharded", "group": "ridesapi.dev", "container": "ridesapi.legacy", "target": "tests/ride_states", "virtualenv": "service_venv", "float_dependencies": "H 5-22 * * *", "autotrigger": false, "skip_threshold": 3, "reports": {"junit": "build/integration.xml"}}], "pulldeploy_components": {"data": ["translationdata", "marketplaceconfig", "regioncfgdata"]}, "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}]}], "frozen_venv": true, "languages": ["python"], "image_type": "service", "service_tier": 0, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s", "packages": ["openssl"]}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "ridesapi"}], "common_settings": {"internal_hosts": {"autonomous": null, "badcompanions": null, "cancels": null, "coupons": null, "dispatch": null, "dispatchavailability": null, "driverearnings": null, "drivermode": null, "drivermonitor": null, "dsfeatures": null, "enterprise": null, "enterprisedispatch": null, "etaproxy": null, "fare": null, "green": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "jobschedulerurgentweb": null, "karma": null, "ledger": null, "locations": null, "locationsasync": null, "locationsmapmatch": null, "matchingexecution": null, "matchingstate": null, "messaging": null, "offerings": null, "passengerqueues": null, "payapi": null, "places": null, "pricing": null, "publicapi": null, "push": null, "pusher": null, "ratecards": null, "ratelimit": null, "ratings": null, "regions": null, "ridelocations": null, "riderperks": null, "rides": null, "ridescheduler": null, "ridestate": null, "ridetimeestimator": null, "ridexppredictor": null, "routes": null, "routesapi": null, "supply": null, "switchboard": null, "tcs": null, "trips": null, "tripsapi": null, "txnhub": null, "userpreferences": null, "users": null, "venues": null, "viewport": null, "wallet": null, "walletapi": null}, "external_hosts": {"firehose_iad": null}}}}, "logging": {"ridesapi": {"fields": {"ride_id": "keyword", "driver_id": "keyword", "route_id": "keyword", "user_id": "keyword", "state": "keyword", "ride_route_id": "keyword", "ride_driver_id": "keyword", "driver_queued_route_ids": "keyword", "passenger_id": "keyword", "driver_ride_id": "keyword", "endpoint": "keyword", "error_code": "keyword", "is_internal": "boolean", "os": "keyword", "major_app_version": "keyword", "message": "keyword", "client_type": "keyword", "error_class": "keyword", "client_id": "keyword", "ride_type": "keyword", "additional_log_params": {"lock_seconds": "long"}, "from_state": "keyword", "amount": "long", "route_unassociated_from_driver": "boolean", "ride_is_finished_for_driver": "boolean", "success": "boolean", "cancel_result": {"redispatch_success": "boolean", "cancel_success": "boolean", "trivial_success": "boolean"}, "payer_id": "keyword", "lng": "float", "lat": "float", "rideId": "keyword", "status_code": "keyword", "url": "keyword", "bad_response": "keyword", "actor_id": "keyword", "service_name": "keyword", "pessimistic_lock_key": "keyword", "requester_id": "keyword", "event_name": "keyword", "userId": "keyword", "field_name": "keyword", "error_msg": "keyword", "error_id": "keyword", "request_lat": "float", "request_lng": "float", "server_prime_time": "long", "is_fixed_fare_ride": "boolean", "last_updated": "keyword", "driver_carrier": "keyword", "user_lyft_id": "keyword", "feedback": "keyword", "rating": "long", "accept_screen_pt": "keyword", "accept_source": "keyword", "driver_eta": "long", "ride_ids": "keyword", "canceled": "boolean", "action_timestamp_ms": "keyword", "id": "keyword", "rated_at": "long", "field_value": "keyword", "charge_id": "keyword", "cost": "long", "currency": "keyword", "original_distance": "long", "original_duration": "long", "initial_ride": "keyword", "powerzone_pt": "keyword", "upfront_bonus": "keyword", "nudge_ride_ts": "long", "end_ride_ts": "long", "event": "keyword", "method": "keyword", "status": "keyword", "account_id": "keyword", "routeId": "keyword", "charge_status": "keyword", "ride_state": "keyword", "isMatchedToExistingRoute": "boolean", "isBailout": "boolean", "acceptSource": "long", "queued_route_ids": "keyword", "user_revision": "long", "type": "keyword", "envoy_headers": {"x-envoy-upstream-rq-timeout-ms": "keyword", "x-envoy-max-retries": "keyword", "x-envoy-upstream-rq-per-try-timeout-ms": "keyword", "x-envoy-retry-on": "keyword", "X-Lyft-Client-Id": "keyword", "User-Device": "keyword", "X-Carrier": "keyword"}, "invoices": "keyword", "use_locations_async": "boolean", "current_state": "keyword", "cancel_meta": {"show_driver_image": "boolean", "button_text": "keyword", "header": "keyword"}, "cancel_price": {"amount": "long", "description": "keyword", "currency": "keyword", "token": "keyword", "token_duration": "long"}, "caller": "keyword", "rating_p2d_method": "keyword", "retry_count": "long", "invoicing_priority": "keyword", "has_bearing": "boolean", "time_invoice_created_ms": "long", "time_since_invoice_creation_ms": "long", "current_time_ms": "long"}}}, "version": "d207d51a16f25799a2ce2e7caba3d15e8f6ace9b", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "ridescheduler": {"name": "ridescheduler", "description": "Dispatch and scheduling logic for scheduled rides", "service_tier": 1, "repository": "git@github.com:lyft/ridescheduler.git", "slack": "#dispatch-bots", "team_email": "dispatch@lyft.com", "pagerduty_escalation_policy": "Dispatch", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libgeos-c1", "libspatialindex-c3", "awscli"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.f158fc443308053a55bb14f70df28b360689df17", "sub_image": "k8s", "packages": ["awscli"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 30}}, {"name": "wrappedservice", "command": "dumb-init -- /code/ridescheduler/bin/ridescheduler", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 30}}], "facets": [{"name": "main", "member": "ridescheduler.wrappedservice", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 1, "max_size": 20}}}}, {"name": "canary", "member": "ridescheduler.wrappedservice", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}]}]], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "ridescheduler.legacy"]}, {"name": "integration", "members": ["account.dev", "badcompanions.dev", "compliance.dev", "dispatch.integration", "enterprise.dev", "enterprisedispatch.dev", "karma.dev", "ledger.dev", "matchingstate.dev", "ratecards.dev", "rideexpensing.dev", "ridesapi.dev", "usergroups.dev", "wallet.dev", "ridescheduler.dev"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "execution", "group": "ridescheduler.dev", "container": "ridescheduler.legacy", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml", "coverage_html": "build/coverage_html"}}, {"name": "integration", "type": "sharded", "group": "ridescheduler.dev", "container": "ridescheduler.legacy", "target": "tests/integration", "virtualenv": "integration_venv", "float_dependencies": "*/30 2-22 * * *", "skip_threshold": 999, "reports": {"junit": "build/integration.xml"}}, {"name": "start", "type": "startup", "group": "ridescheduler.dev"}], "pulldeploy_components": {"data": ["marketplaceconfig", "translationdata", "regioncfgdata"]}, "languages": ["javascript", "python"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "ridescheduler"}], "common_settings": {"internal_hosts": {"ats": null, "badcompanions": null, "compliance": null, "dispatch": null, "enterprise": null, "enterprisedispatch": null, "fare": null, "jobschedulernormalweb": null, "ledger": null, "locations": null, "logistics": null, "matchingstate": null, "messaging": null, "pricing": null, "publicapi": null, "push": null, "ratelimit": null, "ridelocations": null, "rides": null, "ridesapi": null, "ridescheduler": null, "regions": null, "supply": null, "tcs": null, "users": null, "viewport": null, "grow": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null, "firehose_iad": null}}, "override_settings": [{"services": [{"name": "ridescheduler", "service_instance": "development"}], "settings": {"internal_hosts": {"karma": null, "usergroups": null}}}]}}, "logging": {"ridescheduler": {"fields": {"scheduled_ride_id": "keyword", "deliver_after": "date", "data": "keyword", "driver_id": "keyword", "passenger_id": "keyword", "scheduled_pickup_time": "date", "target": "keyword", "template": "keyword", "delivery_time": "date", "name": "keyword", "type": "keyword", "pickup_lng": "float", "num_eligible_drivers": "long", "spt_lb_ct_delta": "float", "spt_ub_ct_delta": "float", "current_time": "date", "pre_accept_driver_nearby": "boolean", "spt_ub": "date", "pickup_lat": "float", "pickup_region": "keyword", "historic_eligible_drivers": "keyword", "nearby_drivers": "keyword", "recompute_time": "date", "rct_ct_delta": "float", "pre_accept_driver": "keyword", "object_id": "keyword", "reason": "keyword", "preaccept_driver_id": "keyword", "ride_id": "keyword", "ineligibility_reason": "keyword", "consent_requirements": "keyword", "payer_id": "keyword", "ride_type": "keyword", "payer_domain": "keyword", "scheduled_pickup_time_upper_bound": "date", "should_gmw_create_ride": "boolean", "id": "keyword", "requester_id": "keyword", "completed_reason": "keyword", "status": "keyword", "driver_lyft_id": "keyword", "event_id": "keyword", "event_name": "keyword", "query_key": "keyword", "scheduled_ride": "keyword", "user_id": "keyword", "is_late": "boolean", "lyft_ids": "keyword", "publicapi_error": "keyword", "origin": {"lng": "float", "lat": "float", "address": "keyword", "location_input_source": "keyword", "routable_address": "keyword", "place_name": "keyword", "place_id": "keyword"}, "lyft_id": "keyword", "method": "keyword", "lng": "float", "lat": "float", "response": "keyword", "given_scheduled_pickup_time": "date", "tolerance": "keyword", "delta": "keyword", "found_scheduled_pickup_time": "date", "error": "keyword", "error_description": "keyword", "error_detail": "keyword", "status_code": "long", "response_text": "keyword", "message_template_id": "keyword", "code": "long", "destination_lat": "float", "origin_lng": "float", "destination_lng": "float", "origin_lat": "float", "region": "keyword", "ride_ids": "keyword"}}}, "version": "87826d3a5b511bb3e93133c830db2319bd36e49a", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "f158fc443308053a55bb14f70df28b360689df17", "sub_image": "py37", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "ridestate": {"name": "ridestate", "description": "ridestate", "repository": "git@github.com:lyft/ridestate.git", "team_email": "api@lyft.com", "pagerduty_escalation_policy": "API", "service_tier": 1, "slack": "#ridestate", "slack_deploy_notification_environments": ["staging", "canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:77c41f39b1d42fc3b3fdf97d08edaed8fe4f7b0e", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "pulldeploy_components": {"data": ["marketplaceconfig"]}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- ridestate", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "1Gi"}}], "facets": [{"name": "main", "member": "ridestate.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 10}}}}, {"name": "canary", "member": "ridestate.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "ridestate.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "ridestate.dev"}, {"name": "unit", "type": "jailed", "framework": "go", "coverage_options": {"omit": "(main.go|internal|tests)"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "links": [{"text": "Runbook", "url": "https://github.com/lyft/ridestate/blob/docs/runbook.md"}], "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}], "envoy": {"profile": "go", "settings": {"services": [{"name": "ridestate"}], "common_settings": {"internal_hosts": {"dispatch": null, "locations": null, "rides": null, "ridesapi": null, "routes": null, "routesapi": null, "taskqueuenormalweb": null, "users": null}}}}, "logging": {"ridestate": {"fields": {"requestId": "keyword", "plan": "keyword", "initial_global_state": "keyword", "userAgent": "keyword", "stackTrace": "keyword", "grpcMethod": "keyword", "global_state": "keyword", "grpcStatusCode": "keyword", "ride_id": "keyword", "ride_status": "keyword", "plan_id": "keyword", "service": "keyword", "workflow_context": "keyword", "endpoint": "keyword", "request_id": "keyword", "lyft_user_id": "keyword", "error": "keyword", "downstream_cluster": "keyword", "code": "keyword", "driver_id": "keyword", "method": "keyword", "path": "keyword", "expected_ride_id": "keyword", "pessimistic_lock_key": "keyword", "host": "keyword", "missing_ride_id": "keyword", "duration": "keyword", "signal": "keyword", "route_id": "keyword", "request_body": "keyword", "new_stops": "keyword", "expected_route_id": "keyword", "expected_driver_id": "keyword", "expected_ride_status": "keyword", "new_routes": "keyword", "expected_queued_route_ids": "keyword", "current_routes": "keyword", "reassignment_id": "keyword", "has_pending_ride_assignment": "boolean", "has_open_driver_assignment": "boolean", "has_shared_route_changes": "boolean", "moves_ride_from_queued_route": "boolean", "moves_ride_to_queued_route": "boolean", "has_ride_removal": "boolean"}}}, "version": "95c835dd536642839d7fbb8011568eb58be5bbe7", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "77c41f39b1d42fc3b3fdf97d08edaed8fe4f7b0e", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "ridestreaks": {"name": "ridestreaks", "description": "Tracks bonus eligibility for drivers ride streaks", "repository": "git@github.com:lyft/ridestreaks.git", "image_type": "service", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/ridestreaks", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "1Gi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}}, {"name": "ridestreaksauditcron", "command": "dumb-init -- service_venv python manage.py ridestreaks_pay_incident --is_audit True", "workdir": "/code/ridestreaks", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "5Gi"}}, {"name": "discrepancycalculationcron", "command": "dumb-init -- service_venv python manage.py get_pay_discrepancy --is_previous_pay_period_audit True", "workdir": "/code/ridestreaks", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "createsimridesoffers", "command": "dumb-init -- service_venv python manage.py create_simride_offers", "workdir": "/code/ridestreaks", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "auditverification", "command": "dumb-init -- service_venv python manage.py verify_completed_incidents", "workdir": "/code/ridestreaks", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "streakspublish", "command": "dumb-init -- service_venv python manage.py create_weekly_streaks", "workdir": "/code/ridestreaks", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "realtimeexperimentspublish", "command": "dumb-init -- service_venv python manage.py verify_realtime_experiments_publish", "workdir": "/code/ridestreaks", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "verifyrealtimecohorts", "command": "dumb-init -- service_venv python manage.py check_realtime_cohorts", "workdir": "/code/ridestreaks", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "script", "command": "dumb-init -- service_venv", "workdir": "/code/ridestreaks", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi"}}], "facets": [{"name": "main", "member": "ridestreaks.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-ridestreaks-env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 2, "max_size": 40}}}}, {"name": "canary", "member": "ridestreaks.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-ridestreaks-env.sls"], "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}, {"name": "createsimridesofferscron", "member": "ridestreaks.createsimridesoffers", "type": "cron", "schedule": "0 * * * *", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-ridestreaks-env.sls"]}, {"name": "ridestreaksauditcron", "member": "ridestreaks.ridestreaksauditcron", "type": "cron", "schedule": "0 10 * * *", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-ridestreaks-env.sls"]}, {"name": "auditverificationcron", "member": "ridestreaks.auditverification", "type": "cron", "schedule": "*/10 * * * *", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-ridestreaks-env.sls"]}, {"name": "streakspublishcron", "member": "ridestreaks.streakspublish", "type": "cron", "schedule": "0 20 * * 5", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-ridestreaks-env.sls"]}, {"name": "discrepancycalculationcron", "member": "ridestreaks.discrepancycalculationcron", "type": "cron", "schedule": "0 10 * * 4", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-ridestreaks-env.sls"]}, {"name": "realtimeexperimentspublishcron", "member": "ridestreaks.realtimeexperimentspublish", "type": "cron", "schedule": "*/5 * * * *", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-ridestreaks-env.sls"]}, {"name": "verifyrealtimecohortscron", "member": "ridestreaks.verifyrealtimecohorts", "type": "cron", "schedule": "0 18 * * 5", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-ridestreaks-env.sls"]}, {"name": "script", "member": "ridestreaks.script", "type": "batch", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-ridestreaks-env.sls"]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "redis.dev", "ridestreaks.legacy"]}, {"name": "local_integration", "members": ["ridestreaks.dev", "jobscheduler.dev", "tcs.dev"]}, {"name": "integration", "members": ["ridestreaks.local_integration", "dispatch.integration", "account.dev", "fanner.dev"]}], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "tests": [{"name": "startup", "type": "startup", "group": "ridestreaks.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "ridestreaks.local_integration", "container": "ridestreaks.legacy", "command": "make test_integration", "reports": {"junit": "build/local_integration.xml"}}, {"name": "e2e", "type": "sharded", "group": "ridestreaks.dev", "container": "ridestreaks.legacy", "target": "tests/e2e", "virtualenv": "integration_venv", "float_dependencies": "0 5-22 * * *", "autotrigger": false, "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "targets": [{"facet": "main"}, {"facet": "createsimridesofferscron"}, {"facet": "script"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}, {"facet": "script"}, {"facet": "auditverificationcron"}, {"facet": "discrepancycalculationcron"}, {"facet": "realtimeexperimentspublishcron"}, {"facet": "verifyrealtimecohortscron"}, {"facet": "ridestreaksauditcron"}, {"facet": "streakspublishcron"}], "kubernetes": {"enabled": true}}]], "slack": "#driver-incentives-bots", "pagerduty_escalation_policy": "DE Conversion", "team_email": "de-conversion@lyft.com", "envoy": {"profile": "python", "settings": {"services": [{"name": "ridestreaks"}, {"name": "ridestreaksbatch"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "internal_hosts": {"detargetingapi": null, "dsfeatures": null, "incentiveconfig": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "ledger": null, "mailer": null, "regions": null, "rides": null, "ridestreaks": null, "routes": null, "supply": null, "tcs": null}, "redis": {"ridestreaksmultiredis": {"port": 6380, "op_timeout_ms": 400}}}, "override_settings": [{"services": [{"name": "ridestreaks"}], "settings": {"internal_hosts": {"adtechworkflows": null, "push": null, "regions": null, "ridehistory": null, "users": null}}}, {"services": [{"name": "ridestreaks", "service_instance": "development"}, {"name": "ridestreaksbatch", "service_instance": "development"}], "settings": {"internal_hosts": {"dispatch": null}}}, {"services": [{"name": "ridestreaks", "service_instance": "staging"}, {"name": "ridestreaksbatch", "service_instance": "staging"}], "settings": {"internal_hosts": {"viewport": null}}}]}}, "service_tier": 2, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s", "packages": ["tzdata", "openssl", "libssl-dev", "libgeos-dev", "libspatialindex-dev"]}}]}}, "logging": {"ridestreaks": {"fields": {"driver_id": "keyword", "event_id": "keyword", "incident_id": "keyword", "shift_end_reason": "keyword", "following_event": "keyword", "out_of_order_event": "keyword", "out_of_order_event_timestamp": "keyword", "diff_ms": "long", "following_event_timestamp": "keyword", "streak_id": "keyword", "source": "keyword", "time_category": "keyword", "event": {"event_type": "keyword", "occurred_at_ms": "keyword", "event_id": "keyword", "driver_id": "keyword", "ride_id": "keyword", "route_id": "keyword", "shift_end_lng": "float", "driver_shift_end_reason": "keyword", "shift_end_lat": "float", "driver_notification_result_status": "keyword", "cancellation_reason": "keyword", "bailout_penalty_waived": "boolean"}, "skipped_offer_id": "keyword", "existing_offer_id": "keyword", "window_end_time_ms": "keyword", "window_start_time_ms": "keyword", "end_lng": "float", "end_lat": "float", "recommendation_id": "keyword", "shift_type": "keyword", "shift_start_time": "keyword", "shift_end_time": "keyword", "driver_ids": "keyword", "event_timestamp_ms": "keyword", "streak_last_processed_event_timestamp_ms": "keyword", "event_type": "keyword", "streak": {"pay_period": "date", "incentive_id": "keyword", "bonus_exponent": "long", "num_rides_required": "long", "driver_id": "keyword", "bonus_amount": "long", "reason": "keyword", "rides": "keyword", "result": "keyword", "region": "keyword", "streak_id": "keyword", "bonus_currency": "keyword"}, "order_id": "keyword", "offer_id": "keyword", "drivers_s3_path": "keyword", "user_id": "keyword", "start_time_ms": "keyword", "end_time_ms": "keyword", "region": "keyword", "owed_amount": "long", "delight_event": "keyword", "error_code": "long", "message": "keyword", "rides": "keyword", "error": "keyword", "experiment_id": "keyword", "ride_id": "keyword", "num_online_drivers": "long", "num_offline_drivers": "long", "offline_only": "boolean", "num_original_cohort_drivers": "long", "last_timestamp_ms_to_process": "keyword"}}, "ridestreaksbatch": {"fields": {"offer_progress": "keyword", "incident_id": "keyword", "pay_incident": {"incident_driver_count": "long", "incident_id": "keyword", "state": "keyword", "end_time_ms": "keyword", "created_at_ms": "keyword", "start_time_ms": "keyword", "is_audit": "boolean"}, "expected_driver_count": "long", "processed_driver_count": "long", "experiment_id": "keyword", "num_drivers": "long", "processed_at": "keyword"}}}, "version": "6a2ab222828cd0b52af6f910ba3d11a6faac0dad", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "ridetimeestimates": {"name": "ridetimeestimates", "repository": "git@github.com:lyft/ridetimeestimates.git", "description": "service to return ETA/ETD values/ranges for all rideshare modes", "service_tier": 1, "team_email": "marketplace-xp@lyft.com", "pagerduty_escalation_policy": "Marketplace XP", "slack": "#mxp-server-pod", "slack_deploy_notification_environments": ["staging", "canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:9da8e35dbaa78ac513f8934273bde2863ebe0c7c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- ridetimeestimates", "limits": {"cpu": 4, "memory": "512Mi"}, "sub_image": "k8s", "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "ridetimeestimates.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "ridetimeestimates.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "ridetimeestimates.dev", "container": "ridetimeestimates.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "ridetimeestimates.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "ridetimeestimates.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {"internal_hosts": {"ghostmatching": null}}, "services": [{"name": "ridetimeestimates"}]}}, "version": "be95476b86f87afc68e7b37ad8a63377a7bb852e", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "9da8e35dbaa78ac513f8934273bde2863ebe0c7c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "ridetimeestimator": {"name": "ridetimeestimator", "description": "TODO short description of the service", "repository": "git@github.com:lyft/ridetimeestimator.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}], "start_time": 480}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "redis.dev", "ridetimeestimator.legacy"]}, {"name": "integration", "members": ["ridetimeestimator.dev", "abacus.dev", "etaproxy.dev", "publicapi.dev", "dispatchavailability.dev", "regions.dev", "account.dev", "auth.dev", "dispatch.integration", "locations.dev", "users.dev", "viewport.dev", "supply.dev", "jobscheduler.dev", "pricing.dev", "tcs.dev", "green.dev", "routes.dev", "fare.dev", "ats.dev", "legacyridetypes.dev", "dsfeatures.dev", "mozartgateway.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "ridetimeestimator.dev"}, {"name": "unit", "type": "execution", "group": "ridetimeestimator.dev", "container": "ridetimeestimator.legacy", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "ridetimeestimator.integration", "container": "ridetimeestimator.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#sharedrides-server", "slack_deploy_notification_environments": ["canary", "production"], "pagerduty_escalation_policy": "Marketplace XP", "team_email": "marketplace-xp@lyft.com", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, [{"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "pulldeploy_components": {"data": ["regioncfgdata"]}, "languages": ["python"], "image_type": "service", "service_tier": 1, "envoy": {"profile": "python", "settings": {"services": [{"name": "ridetimeestimator"}, {"name": "ridetimeestimatorworker"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080", "circuit_breakers": {"default": {"max_connections": 350}}, "ingress_ports": [9211, 80]}, "internal_hosts": {"etaproxy": null, "dispatchavailability": null, "dsfeatures": null, "modelexecsharedrides": null, "mozartgateway": null, "publicapi": null, "regions": null, "tcs": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "redis": {"ridetimeestimatormultiredis": {"port": 6380, "op_timeout_ms": 400}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "logging": {"ridetimeestimator": {"fields": {"lng": "float", "lat": "float", "user_lyft_id": "keyword", "default_tz": "keyword", "file_name": "keyword", "region": "keyword", "key": "keyword", "exception_class": "keyword", "failed_record_count": "long", "attempt_num": "long"}}, "ridetimeestimatorworker": {"fields": {"region": "keyword", "file_name": "keyword", "version": "keyword", "model": "keyword", "mean_absolute_error": "float", "quantile_loss": "float", "test_size": "long", "training_size": "long", "region_code": "keyword", "exception_class": "keyword", "builder": "keyword", "exception_code": "keyword"}}}, "version": "6635ed4f0011926046726e8869bf0e6e3eceedb8", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "ridevalidations": {"name": "ridevalidations", "description": "Provide ways for passengers and drivers to confirm it is the right ride", "repository": "git@github.com:lyft/ridevalidations.git", "slack": "#pickup-services", "team_email": "pickup-team@lyft.com", "pagerduty_escalation_policy": "Pickup XP Server", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/ridevalidations", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "ridevalidations.legacy", "idl.server", "dynamodb.dev"]}, {"name": "e2e", "members": ["ridevalidations.dev", "tcs.legacy", "rides.legacy", "supply.dev", "supplyrecords.dev", "users.dev", "lyfttestlib.ride"]}, {"name": "service_group", "members": ["ridevalidations.legacy"]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "tests": [{"name": "startup", "type": "startup", "group": "ridevalidations.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "repositories", "type": "execution", "framework": "pytest", "group": "ridevalidations.dev", "container": "ridevalidations.legacy", "targets": ["tests/repositories"], "coverage": false}, {"name": "integration", "type": "jailed", "framework": "pytest", "coverage": false}, {"name": "e2e", "type": "execution", "group": "ridevalidations.e2e", "container": "ridevalidations.legacy", "framework": "pytest", "coverage": false, "run_in_pr": false}], "facets": [{"name": "main", "member": "ridevalidations.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 3, "max_size": 5}}}}, {"name": "canary", "member": "ridevalidations.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "17:00 America/New_York"}, "deploy": [{"name": "staging", "links": [{"text": "Runbook", "url": "https://github.com/lyft/ridevalidations/blob/master/docs/runbook.md"}], "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "links": [{"text": "Runbook", "url": "https://github.com/lyft/ridevalidations/blob/master/docs/runbook.md"}], "orca": [{"region": "iad"}], "legacy": false, "bake_time_minutes": 15, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "links": [{"text": "Runbook", "url": "https://github.com/lyft/ridevalidations/blob/master/docs/runbook.md"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "ridevalidations"}], "common_settings": {"authorization": {"permissions": {"public": {"paths": ["/v1/ride-validations/read", "/v1/ride-validations/report-issue", "/v1/ride-validations/validate-ride"], "methods": ["POST"]}, "read_validation_attempts": {"paths": ["/v1/ride-validations/validation-attempts"], "methods": ["POST"]}, "create_qr_code": {"paths": ["/v1/ride-validations/qr-code"], "methods": ["POST"]}, "create_and_update_qr_codes_for_driver": {"paths": ["/v1/ride-validations/create-and-update-qr-codes-for-driver"], "methods": ["POST"]}}, "bindings": {"ats": ["create_and_update_qr_codes_for_driver", "create_qr_code"], "atsworkers": ["create_and_update_qr_codes_for_driver", "create_qr_code"], "envoy": ["public"], "tom": ["read_validation_attempts", "create_qr_code"], "jobscheduler": ["create_and_update_qr_codes_for_driver"], "taskqueuenormal": ["create_and_update_qr_codes_for_driver"]}}, "internal_hosts": {"jobschedulerbulkweb": null, "jobschedulernormalweb": null, "messaging": null, "regions": null, "rides": null, "supply": null, "supplyrecords": null, "tcs": null, "users": null, "ridevalidations": null}, "external_hosts": {"dynamodb_iad": null, "s3_iad": null, "firehose_iad": null}}}}, "logging": {"ridevalidations": {"fields": {"actor": "keyword", "event_name": "keyword", "driver_id": "keyword", "doc_id": "keyword", "vehicle_id": "keyword", "endpoint": "keyword", "path": "keyword", "status_code": "short", "result_error": "keyword", "result_error_description": "keyword", "user_id": "keyword", "user_agent": "keyword"}}}, "version": "0069edb0bfcbdd0b7d04a51920e9313e5d609b8a", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "ridexppredictor": {"name": "ridexppredictor", "description": "Service that can predict whether a ride will cause bad experience for the passenger (pricing wise only), output will have a probability score of a bad ride", "repository": "git@github.com:lyft/ridexppredictor.git", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}]}}, "image_type": "service", "service_tier": 1, "slack": "#support-xp-eng", "notification_overrides": {"deploy": {"slack": "#support-xp-bots"}, "deploy_failure": {"slack": "#support-xp-bots"}, "test_failure": {"slack": "#support-xp-bots", "environments": ["production"]}, "master_failure": {"slack": "#support-xp-bots"}, "pr_merge": {"slack": "#support-xp-bots"}}, "team_email": "support-tech@lyft.com", "pagerduty_escalation_policy": "Support XP", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/ridexppredictor", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "3Gi"}}, {"name": "pagerdutyreport", "command": "dumb-init -- service_venv python -m app.scripts.pull_alerts", "workdir": "/code/ridexppredictor", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}], "facets": [{"name": "main", "member": "ridexppredictor.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 4, "max_size": 100}}}}, {"name": "canary", "member": "ridexppredictor.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "pagerdutyreport", "member": "ridexppredictor.pagerdutyreport", "type": "cron", "schedule": "0 20 * * 1"}], "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "dynamodb.dev", "ridexppredictor.legacy"]}, {"name": "integration", "members": ["ridexppredictor.dev", "dsfeatures.dev", "modelexec.dev", "users.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "ridexppredictor.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "ridexppredictor.integration", "container": "ridexppredictor.legacy", "command": "make test_integration", "reports": {"junit": "build/integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "pagerdutyreport"}], "links": [{"text": "Runbook", "url": "https://github.com/lyft/ridexppredictor/docs/runbook.md"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], {"legacy": false, "name": "production", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "ridexppredictor"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"cetconcessions": null, "coupons": null, "dispatch": null, "dsfeatures": null, "locations": null, "messaging": null, "modelexecp1": null, "modelexecpricing": null, "modelexecpricingxp": null, "tcs": null, "users": null, "rentals": null, "rides": null, "supply": null, "venues": null, "pricing": null}, "external_hosts": {"firehose_iad": null, "dynamodb_iad": null}, "redis": {"ridexppredictormultiredis": {"port": 6380, "op_timeout_ms": 200}}}}}, "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "logging": {"ridexppredictor": {"fields": {"is_driver_allowed_to_change_dest_for_org": "boolean", "payer_organization": "keyword", "destination_set": "boolean", "user_id": "keyword", "metadata": {"intervention_type": "keyword", "analytics_id": "keyword", "value": "keyword", "template_type": "keyword", "constraints": "keyword", "enable_display_callback": "boolean", "image_url": "keyword", "body_text": "keyword", "title_text": "keyword", "is_dismissible": "boolean", "primary_button_text": "keyword", "auto_dismiss_countdown": "keyword", "max_total_impressions": "long", "primary_button_action_data": "keyword", "intervention_id": "keyword", "primary_button_action_type": "keyword", "secondary_button_text": "keyword", "secondary_button_action_data": "keyword", "secondary_button_action_type": "keyword", "image_size": "keyword"}, "is_intelligent": "boolean", "user_lat": "float", "user_lng": "float", "intervention_id": "keyword", "error_code": "long", "major_app_version": "keyword", "is_internal": "boolean", "client_type": "keyword", "endpoint": "keyword", "message": "keyword", "os": "keyword", "interventions": "keyword", "threshold": "float", "user": "keyword", "after_transformation": "keyword", "before_transformation": "keyword", "exception": "keyword", "exception_class": "keyword", "exception_code": "long", "attempt_num": "long", "failed_record_count": "long", "tcs_response_code": "long", "action": "keyword", "feature_name": "keyword", "entity_id": "keyword", "code": "keyword", "lyft_id": "keyword", "failed_record": "keyword", "response": "keyword", "attempt": "long", "message_template_id": "keyword", "concession_reason": "keyword", "automation_name": "keyword", "concession_type": "keyword", "is_automated": "boolean", "issued_at": "keyword", "coupon_code": "keyword", "ride_id": "keyword", "amount_cents": "long", "submission_reason": "keyword", "currency": "keyword", "agent_email": "keyword", "ride_type": "keyword", "is_concierge": "boolean", "threshold_secs": "long", "threshold_miles": "float", "driver_location_gh6": "keyword", "driver_region_code": "keyword", "channel": "keyword"}}}, "version": "2bbffd7ae7ec9db751f10fb272ccc321f59ec30b", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "riskonnectproxy": {"name": "riskonnectproxy", "description": "Proxy service that handles requests to and from Riskonnect (third party claims management system).", "repository": "git@github.com:lyft/riskonnectproxy.git", "image_type": "service", "service_tier": 2, "slack": "#insurance", "team_email": "insurance-tech@lists.lyft.com", "pagerduty_escalation_policy": "Insurance", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "idl.server", "jobscheduler.dev", "mailer.dev", "riskonnectproxy.legacy"]}, {"name": "integration", "members": ["riskonnectproxy.dev"]}, {"name": "service_group", "members": ["riskonnectproxy.legacy"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "startup", "type": "startup", "group": "riskonnectproxy.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "riskonnectproxy.integration", "container": "riskonnectproxy.legacy", "command": "make test_integration"}], "deploy": [{"name": "staging", "orca": [{"region": "iad"}], "legacy": true, "automatic": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "riskonnectproxy"}, {"name": "riskonnectproxybatch"}], "common_settings": {"internal_hosts": {"claims": null, "jobschedulernormalweb": null, "mailer": null, "regions": null}, "external_hosts": {"riskonnect": null, "zendesk_v2": null, "dynamodb_iad": null}}}}, "logging": {"riskonnectproxy": {"fields": {"riskonnect_id": "keyword", "zendesk_ticket_id": "integer", "epoch": "date", "latest_date_covered": "date"}}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "version": "1e0b9110d6b1df8a8042f8d43878372a6c98150a", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "roads": {"name": "roads", "description": "Road routing service", "repository": "git@github.com:lyft/roads.git", "credentials": false, "containers": [{"name": "legacy", "start_time": 500, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "privileged": true, "exports": [{"name": "api", "port": 8080}]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "configsets": ["atlantisdata"], "groups": [{"name": "dev", "members": ["control.dev", "roads.legacy"]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "roads"}, {"name": "roadsbatch"}, {"name": "roadsincremental"}, {"name": "roadsmapmatching"}, {"name": "roadsmapmatchingb"}, {"name": "roadspinned"}, {"name": "roadsrouting"}, {"name": "roadsupdated"}, {"name": "roadsrtmm"}, {"name": "roadsrtmmblue"}, {"name": "roadsrtmmlm"}, {"name": "roadsrtmmorange"}, {"name": "roadsroutingblue"}, {"name": "roadsroutinglm"}, {"name": "roadsroutingorange"}, {"name": "roadsincrementallm"}], "common_settings": {"internal_hosts": {"dsfeatures": null}, "local_service": {"circuit_breakers": {"default": {"max_connections": 200}}}}}}, "tests": [{"name": "startup", "type": "startup", "group": "roads.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml"}}, {"name": "integration", "type": "execution", "group": "roads.dev", "container": "roads.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "highstate", "type": "execution", "group": "roads.dev", "container": "roads.legacy", "command": "make test_highstate"}], "test_logs": ["/var/log/salt/minion"], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "pagerduty_escalation_policy": "LocationsAccuracy", "slack": "#localization-driver", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "locations@lyft.com", "languages": ["bash", "python"], "image_type": "service", "service_tier": 1, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"roadspinned": {"fields": {"atlantis_enabled": "boolean", "ts": "long", "coords": "keyword"}}, "roadsroutingblue": {"fields": {"original_length": "long", "original_kv": "keyword", "exception": "keyword", "input_loc_v2": "keyword"}}, "roadsroutinglm": {"fields": {"original_length": "long", "original_kv": "keyword", "exception": "keyword", "input_loc_v2": "keyword"}}, "roadsroutingorange": {"fields": {"original_length": "long", "original_kv": "keyword", "exception": "keyword", "input_loc_v2": "keyword"}}, "roadsrtmmblue": {"fields": {"original_length": "long", "original_kv": "keyword", "exception": "keyword", "input_loc_v2": "keyword"}}, "roadsrtmmorange": {"fields": {"original_length": "long", "original_kv": "keyword", "exception": "keyword", "input_loc_v2": "keyword"}}}, "version": "e7e0dbca3e261cfcde38b27a515c39274b237084", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "robocop": {"name": "robocop", "description": "Robotic traffic cop for lyft.com click routing and analytics", "repository": "git@github.com:lyft/robocop.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "redis.dev", "regions.dev", "tcs.dev", "users.dev", "robocop.legacy", "places.dev", "wwwbrochurefe.dev", "fare.dev"]}], "configsets": ["kafkaconfigdata"], "tests": [{"name": "startup", "type": "startup", "group": "robocop.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "robocop.dev", "container": "robocop.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#organic-traffic-bots", "team_email": "organic-traffic@lyft.com", "pagerduty_escalation_policy": "Web UX", "notification_overrides": {"pr_merge": {"slack": "#organic-traffic-bots"}, "pr_open": {"slack": "#organic-traffic-bots"}}, "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "languages": ["python"], "image_type": "service", "service_tier": 2, "pulldeploy_components": {"data": ["regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "robocop"}], "common_settings": {"internal_hosts": {"brochure": null, "fare": null, "jobschedulernormalweb": null, "messaging": null, "switchboard": null, "ratelimit": null, "regions": null, "users": null, "tcs": null, "places": null, "wwwbrochurefe": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null, "firehose_iad": null}, "redis": {"robocopmultiredis": {"port": 6380}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "logging": {"robocop": {"fields": {"client_ip": "keyword", "request_url": "keyword", "user_ip": "keyword", "fallback": "boolean", "decision": {"templates": "keyword"}, "failureReason": "keyword"}}}, "version": "044a448bd68e9672fb1503c79c6eda75d1b36ba8", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "routenetworkgenmodeleval": {"name": "routenetworkgenmodeleval", "description": "Library for generating speed observation and speed profile", "repository": "git@github.com:lyft/routenetworkgenmodeleval.git", "image_type": "library", "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:be92b86f3d025a9bc5fd6eceee42772c73736409"}}, "languages": ["python"], "credentials": false, "credentials_legacy": true, "containers": [{"name": "legacy", "command": "sleep infinity", "provision": "echo \"How many janky manifest files must a dev create\""}], "groups": [{"name": "dev", "members": ["control.dev", "routenetworkgenmodeleval.legacy"]}], "tests": [{"name": "test", "type": "execution", "group": "routenetworkgenmodeleval.dev", "container": "routenetworkgenmodeleval.legacy", "command": "make test"}, {"name": "lint", "type": "jailed", "command": "make lint"}], "python": {"mypy": {"python_versions": ["3.6"], "exclude": ["tests", "ops"]}}, "py3k": {"linters": ["modernize", "pylint"]}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "slack": "#eta-routenetworkgen", "team_email": "eta-team@lyft.com", "version": "3041f2a7dc7768828dd1d9618e2a30c0a9b67c99", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "be92b86f3d025a9bc5fd6eceee42772c73736409", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "be92b86f3d025a9bc5fd6eceee42772c73736409", "sub_image": null, "external": false}}, "routeplanner": {"name": "routeplanner", "repository": "git@github.com:lyft/routeplanner.git", "description": "see the route planner design doc", "service_tier": 1, "team_email": "purchase-flow-eng@lyft.com", "pagerduty_escalation_policy": "Purchase Flow", "slack": "#purchase-flow", "notification_overrides": {"behind_notifications": {"slack": "#purchase-flow-bots"}, "pr_open": {"slack": "#purchase-flow-prs"}, "pr_merge": {"slack": "#purchase-flow-bots"}, "deploy": {"slack": "#purchase-flow-bots"}, "deploy_failure": {"slack": "#purchase-flow-bots"}}, "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- routeplanner", "workdir": "/code/routeplanner", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600}], "pulldeploy_components": {"data": ["marketplaceconfig"]}, "groups": [{"name": "dev", "members": ["control.dev", "routeplanner.legacy"]}, {"name": "integration", "members": ["routeplanner.dev", "rideableavailability.dev", "etaproxy.dev", "multimodalrouting.dev", "trafipricingapi.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "routeplanner.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "routeplanner.integration", "container": "routeplanner.legacy", "command": "make integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "routeplanner.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "routeplanner.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {"internal_hosts": {"rideableavailability": null, "etaproxy": null, "eventingest": null, "multimodalrouting": null, "trafipricingapi": null}}, "services": [{"name": "routeplanner"}]}}, "logging": {"routeplanner": {"fields": {"region_code": "keyword", "node": "keyword", "err": "keyword", "destination_region": "keyword", "origin_region": "keyword"}}}, "version": "d71e891a1ef3bdd82dc0c07cbda564bd0dcf62b6", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "routes": {"name": "routes", "description": "routes", "repository": "git@github.com:lyft/routes.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- routes", "workdir": "/code/routes", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 15, "timeout_seconds": 1, "period_seconds": 10}}], "groups": [{"name": "dev", "members": ["control.dev", "mongodb.server", "routes.legacy", "redis.dev", "dbproxyroutes.dev"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igocli:e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}]}}, "facets": [{"name": "main", "member": "routes.service", "type": "service", "requirements": {"mongo": true}, "autoscaling": {"environment": {"staging": {"min_size": 2, "max_size": 60}, "production": {"min_size": 8, "max_size": 160}}}}, {"name": "canary", "member": "routes.service", "type": "service", "canary": true, "requirements": {"mongo": true}, "autoscaling": {"min_size": 1, "max_size": 1}}], "tests": [{"name": "startup", "type": "startup", "group": "routes.dev"}, {"name": "unit", "type": "jailed", "framework": "go", "coverage_options": {"omit": "(main.go|internal/mockery|tests|mock)"}}, {"name": "integration", "type": "execution", "group": "routes.dev", "container": "routes.legacy", "framework": "go", "coverage_options": {"omit": "(main.go|internal/mockery|tests|mock)"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "stashintegration", "type": "execution", "group": "routes.dev", "container": "routes.legacy", "command": "make shadowstash", "autotrigger": false}], "slack": "#routes", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "core-services@lyft.com", "pagerduty_escalation_policy": "API", "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}], "service_tier": 0, "languages": ["go"], "image_type": "service", "envoy": {"profile": "go", "settings": {"services": [{"name": "routes"}], "common_settings": {"external_hosts": {"firehose_iad": null}, "mongos": {"rides": {"production": {"local_ratelimit": {"fill_interval": "0.2s", "max_tokens": 30, "tokens_per_fill": 1}, "ratelimit": true, "clusters": [{"port": 27020, "hosts": ["r027189-10.mlab.com:27817", "r027189-11.mlab.com:27817", "r027189-12.mlab.com:27817", "r027189-13.mlab.com:27817", "r027189-14.mlab.com:27817", "r027189-15.mlab.com:27817", "r027189-16.mlab.com:27817", "r027189-17.mlab.com:27817", "r027189-18.mlab.com:27817", "r027189-19.mlab.com:27817", "r027189-20.mlab.com:27817", "r027189-21.mlab.com:27817", "r027189-22.mlab.com:27817", "r027189-23.mlab.com:27817", "r027189-24.mlab.com:27817", "r027189-25.mlab.com:27817", "r027189-26.mlab.com:27817", "r027189-27.mlab.com:27817", "r027189-28.mlab.com:27817", "r027189-29.mlab.com:27817", "r027189-30.mlab.com:27817", "r027189-31.mlab.com:27817", "r027189-32.mlab.com:27817", "r027189-33.mlab.com:27817", "r027189-34.mlab.com:27817", "r027189-35.mlab.com:27817", "r027189-36.mlab.com:27817", "r027189-37.mlab.com:27817", "r027189-38.mlab.com:27817", "r027189-39.mlab.com:27817"]}]}, "staging": {"local_ratelimit": {"fill_interval": "0.2s", "max_tokens": 30, "tokens_per_fill": 1}, "ratelimit": true, "clusters": [{"port": 27020, "hosts": ["r055605-a0.mlab.com:27817", "r055605-a1.mlab.com:27817"]}]}}}, "redis_clusters": {"routes": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 300, "read_policy": "PREFER_MASTER", "health_check": {"timeout_ms": 1000, "interval_ms": 5000}, "outlier_detection": {"consecutive_5xx": 200, "enforcing_success_rate": 0}}}, "internal_hosts": {"dbproxyroutes": null}}}}, "logging": {"routes": {"fields": {"code": "keyword", "downstream_cluster": "keyword", "driverId": "keyword", "endpoint": "keyword", "error": "keyword", "grpcMethod": "keyword", "grpcStatusCode": "long", "host": "keyword", "lyft_user_id": "keyword", "method": "keyword", "panic": "boolean", "path": "keyword", "request_id": "keyword", "requestId": "keyword", "routeId": "keyword", "stopId": "keyword", "service": "keyword", "signal": "keyword", "supplierId": "keyword", "user-agent": "keyword", "userAgent": "keyword", "driverIdsLen": "long", "durationMs": "long"}}}, "version": "84e4b5aea733dd57347000332eb518be96920eb4", "images": [{"parent": {"name": "s2igocli", "version": "e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}, {"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "routesapi": {"name": "routesapi", "description": "External API and compositional layer for managing routes", "repository": "git@github.com:lyft/routesapi.git", "image_type": "service", "service_tier": 0, "slack": "#routesapi", "team_email": "core-services@lyft.com", "pagerduty_escalation_policy": "API", "languages": ["python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app  --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/routesapi", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "2Gi"}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 5, "initial_delay_seconds": 10}}], "facets": [{"name": "main", "member": "routesapi.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 2, "max_size": 20}, "production": {"min_size": 12, "max_size": 280}}}}, {"name": "canary", "member": "routesapi.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "routesapi.legacy"]}, {"name": "integration", "members": ["account.dev", "analyticsingest.dev", "ats.qa_approve", "dispatch.dev", "dispatchavailability.dev", "fare.dev", "goldentests.integration", "jobscheduler.dev", "locations.legacy", "matching.dev", "matchingexecution.dev", "matchingsolver.dev", "publicapi.dev", "regions.dev", "rides.dev", "ridesapi.dev", "ridetimeestimator.dev", "ridexppredictor.dev", "routes.dev", "routesapi.dev", "tcs.dev", "users.dev", "wallet.dev", "walletapi.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "routesapi.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "routesapi.integration", "container": "routesapi.legacy", "command": "make test_integration", "reports": {"junit": "build/local_integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}], "pulldeploy_components": {"data": ["marketplaceconfig", "translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "routesapi"}], "common_settings": {"internal_hosts": {"dispatch": null, "dispatchcompliance": null, "etaproxy": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "locations": null, "locationsmapmatch": null, "matchingexecution": null, "payapi": null, "ratelimit": null, "regions": null, "rides": null, "ridesapi": null, "ridescheduler": null, "routes": null, "supply": null, "tcs": null, "usergroups": null, "users": null, "venues": null}, "external_hosts": {"firehose_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:3258c1df880d24734bd34f6704fc48e8ae774688", "sub_image": "k8s", "packages": ["openssl"]}}]}}, "logging": {"routesapi": {"fields": {"route_id": "keyword", "accept_screen_percentage": "long", "power_zone_percentage": "long", "prime_time": "long", "upfront_bonus": "long", "driver_id": "keyword", "action": "keyword", "rollout_name": "keyword", "source": "keyword", "shadow_source": "keyword", "status_code": "keyword", "service_name": "keyword", "url": "keyword", "bad_response": "keyword", "actual_type": "keyword", "mismatch_key": "keyword", "expected": "keyword", "expected_type": "keyword", "actual": "keyword", "client_type": "keyword", "endpoint": "keyword", "is_internal": "boolean", "major_app_version": "keyword", "os": "keyword", "error_code": "long", "message": "keyword", "error_class": "keyword", "accept_source": "keyword", "accept_lat": "float", "ride_ids": "keyword", "accept_lng": "float", "users_current_ride_id": "keyword", "routes_current_route_id": "keyword", "routes_current_ride_id": "keyword", "user_mode": "keyword", "error": "keyword", "exception_class": "keyword", "ride_id": "keyword", "ride_type": "keyword", "user_id": "keyword", "client_id": "keyword", "routes_queued_route_ids": "keyword", "exc": "keyword", "grpc_status_code": "keyword", "routeId": "keyword", "driverId": "keyword", "oldRouteId": "keyword", "state": "keyword", "function_name": "keyword", "users_queued_route_ids": "keyword", "failed_record_count": "long", "attempt_num": "long", "content": "keyword", "calling_method": "keyword", "old_route_id": "keyword", "pessimistic_lock_key": "long", "ride_route_ids": "keyword", "old_queued_route_ids": "keyword", "queued_route_ids": "keyword", "event_name": "keyword", "error_msg": "keyword", "field_value": "long", "error_id": "keyword", "field_name": "keyword", "failed_record": "keyword"}}}, "version": "c701c06d912fde66ba04780ffc03075da80b1662", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "3258c1df880d24734bd34f6704fc48e8ae774688", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "routeslib": {"name": "routeslib", "description": "TODO short description of the service", "repository": "git@github.com:lyft/py-rides-routes-lib.git", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:a4c9f130270ae9f5f2559df8d3e15c904da4ce51"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:32cbb00e867909feba916f53c84c05d17bad9c3f", "sub_image": "precommit"}}]}}, "credentials": true, "tests": [{"name": "python2", "type": "jailed", "command": "python -m pytest tests/unit"}, {"name": "python3", "type": "jailed", "command": "python3 -m pytest tests/unit"}, {"name": "flake", "type": "jailed", "command": "flake8"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "python": {"py3k": {"linters": ["modernize", "pylint"]}}, "image_type": "library", "languages": ["python"], "version": "1b01a35fd47903c0e171faa92555177dd6e83e90", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "a4c9f130270ae9f5f2559df8d3e15c904da4ce51", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "32cbb00e867909feba916f53c84c05d17bad9c3f", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "a4c9f130270ae9f5f2559df8d3e15c904da4ce51", "sub_image": null, "external": false}}, "routingengine": {"name": "routingengine", "description": "ETA Routing Engine", "repository": "git@github.com:lyft/routingengine.git", "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build", "params": {"dockerfile": "Dockerfile.k8s", "sub_image": "k8s"}}, {"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "nooverlay", "start_time": 600, "command": "env USE_NO_OVERLAY_GRAPH=1 DISABLE_DROP_CACHE=1 /code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- /usr/local/routingengine/release/routingengine", "sub_image": "k8s", "limits": {"cpu": 18, "memory": "40Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "lyftidl.server", "routingengine.legacy"]}, {"name": "dev_nooverlay", "members": ["control.dev", "lyftidl.server", "routingengine.nooverlay"]}], "tests": [{"name": "startup", "type": "startup", "group": "routingengine.dev"}, {"name": "unit", "type": "execution", "group": "routingengine.dev", "container": "routingengine.legacy", "command": "make test_unit"}, {"name": "format", "type": "execution", "group": "routingengine.dev", "container": "routingengine.legacy", "command": "make check_format"}, {"name": "coverage", "type": "execution", "group": "routingengine.dev", "container": "routingengine.legacy", "command": "make coverage"}, {"name": "debug-library", "type": "execution", "group": "routingengine.dev", "container": "routingengine.legacy", "command": "make test_data test_library_debug"}, {"name": "valgrind", "type": "execution", "group": "routingengine.dev", "container": "routingengine.legacy", "command": "make test_unit_valgrind"}, {"name": "package", "type": "execution", "group": "routingengine.dev", "container": "routingengine.legacy", "command": "make package"}, {"name": "publish_package", "type": "execution", "group": "routingengine.dev", "container": "routingengine.legacy", "command": "make publish_package", "run_in_pr": false}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#eta-router", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "eta@lyft.com", "upstream_tests": {"on_commit": true, "test_set": {"etaproxy": ["integration"], "locations": ["integration"]}}, "pagerduty_escalation_policy": "Routing", "service_tier": 0, "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "routingenginena20190710"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d", "bake_time_minutes": 0}, [{"name": "production-us-east-1b", "legacy": true, "availability_zone": "us-east-1b", "bake_time_minutes": 0}, {"name": "production-us-east-1e", "legacy": true, "availability_zone": "us-east-1e", "bake_time_minutes": 0}], {"name": "production", "legacy": true}], "facets": [{"name": "routingenginena20190710", "member": "routingengine.service", "envoy_service": "routingenginena20190710", "environment_files": ["ops/config/pillar/k8s-base-env.sls", "ops/config/pillar/k8s-routingenginena20190710-env.sls"], "type": "statefulservice", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 10}}}, "volume_claims": [{"name": "routingengine-data", "mount_path": "/code/data", "min_size": "100Gi", "max_size": "100Gi", "access_modes": ["read_write_once"], "storage_class": "reclaimdelete"}]}, {"name": "routingenginena20190710canary", "envoy_service": "routingenginena20190710", "member": "routingengine.service", "type": "statefulservice", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}, "volume_claims": [{"name": "routingengine-data", "mount_path": "/code/data", "min_size": "100Gi", "max_size": "100Gi", "access_modes": ["read_write_once"], "storage_class": "reclaimdelete"}]}], "languages": ["go", "python"], "image_type": "service", "envoy": {"profile": "go", "settings": {"services": [{"name": "routingengine"}, {"name": "routingenginena20180101"}, {"name": "routingenginena20190710"}, {"name": "routingenginena20200222"}, {"name": "routingenginena20200222no"}, {"name": "routingenginebatch"}, {"name": "routingengineexperimental"}, {"name": "routingengineintegration"}, {"name": "routingenginetransit"}, {"name": "routingenginenooverlay"}], "common_settings": {"internal_hosts": {"etaproxy": null, "routingengine": null}, "local_service": {"circuit_breakers": {"default": {"max_connections": 1024}}, "hosts_url": "tcp://127.0.0.1:8080"}, "authorization": {"permissions": {"grpc": {"paths": ["/pb.lyft.routingengine.RoutingEngine/*"]}, "grpcv2": {"paths": ["/pb.lyft.routingengine.v2.RoutingEngine/*"]}, "transit": {"paths": ["/pb.lyft.routingengine.transitrouting.TransitRouting/*"]}, "nearest_v2": {"paths": ["/pb.lyft.routingengine.v2.RoutingEngine/Nearest"]}}, "bindings": {"avmdcnavigation": ["grpc", "grpcv2"], "etaproxy": ["grpc", "grpcv2"], "etawatch": ["grpc", "grpcv2"], "locations": ["grpc", "grpcv2"], "locationsasync": ["grpc", "grpcv2"], "locationsbatch": ["grpc", "grpcv2"], "locationsmapmatch": ["grpc", "grpcv2"], "locationsrtmmprocess": ["grpc", "grpcv2"], "locationsrtmmworker": ["grpc", "grpcv2"], "locationsrtmmspworker": ["grpc", "grpcv2"], "locationsworkers": ["grpc", "grpcv2"], "navprototype": ["grpc", "grpcv2"], "places": ["grpc", "grpcv2"], "simulatedrides": ["grpc", "grpcv2"], "test": ["*"], "transit": ["transit"], "ridelocations": ["nearest_v2"], "ridelocationsbulk": ["nearest_v2"]}}}}}, "logging": {"routingengine": {"fields": {"path": "keyword", "method": "keyword", "host": "keyword", "service": "keyword", "signal": "keyword", "request_id": "keyword", "endpoint": "keyword", "downstream_cluster": "keyword", "code": "keyword", "lyft_user_id": "keyword", "error": "keyword", "requestId": "keyword"}}, "routingenginena20180101": {"fields": {"service": "keyword", "request_id": "keyword", "code": "keyword", "error": "keyword", "requestId": "keyword", "endpoint": "keyword", "downstream_cluster": "keyword", "lyft_user_id": "keyword", "path": "keyword", "method": "keyword", "host": "keyword", "signal": "keyword"}}, "routingenginena20200222": {"fields": {"service": "keyword", "request_id": "keyword", "code": "keyword", "error": "keyword", "requestId": "keyword", "endpoint": "keyword", "downstream_cluster": "keyword", "lyft_user_id": "keyword", "path": "keyword", "method": "keyword", "host": "keyword", "signal": "keyword"}}, "routingenginena20200222no": {"fields": {"service": "keyword", "request_id": "keyword", "code": "keyword", "error": "keyword", "requestId": "keyword", "endpoint": "keyword", "downstream_cluster": "keyword", "lyft_user_id": "keyword", "path": "keyword", "method": "keyword", "host": "keyword", "signal": "keyword"}}, "routingenginetransit": {"fields": {"path": "keyword", "method": "keyword", "host": "keyword", "service": "keyword", "signal": "keyword"}}, "routingengineexperimental": {"fields": {"path": "keyword", "method": "keyword", "host": "keyword", "service": "keyword"}}}, "version": "f0b064c25aeaf5881bcb73d5e8beaee65b771a48", "images": [{"parent": {"name": "s2igo", "version": "5ebf3b0f7b3f28c236b0afd8660fffe62b27cad5", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "rtools": {"name": "rtools", "description": "Lyftlearn image for R-studio", "repository": "git@github.com:lyft/rtools.git", "image_type": "tool", "slack": "#ml-platform-bots", "team_email": "ml-platform@lyft.com", "deploy": [{"name": "production", "legacy": false}], "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "notebook", "command": "/usr/bin/supervisord", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}, {"name": "rstudio", "port": 8787, "protocol": "http"}]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build", "params": {"dockerfile": "Dockerfile"}}]}}, "lyftlearn": {"notebook_templates": [{"template_name": "r-studio-base", "display_name": "R Studio Light", "long_description": "Lightweight image containing RStudio", "short_description": "Lightweight image containing RStudio", "rank": 10000, "owner": "namirbekian", "primary_container": {"command": ["/usr/bin/supervisord"], "args": []}, "network": {"notebook": {"port": 8888, "public": true}, "rstudio": {"port": 8787, "public": true}}}]}, "languages": ["python"], "version": "fbf84127e2e885ff0eeb9b1af58c58db6478bedb", "images": [{"parent": {"name": "lyftlearnbase", "version": "3d21a1b306c24babf0518769565ce287554d7539", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "lyftlearnbase", "version": "3d21a1b306c24babf0518769565ce287554d7539", "sub_image": null, "external": false}}, "rtsmconfigdata": {"name": "rtsmconfigdata", "description": "RTSM configuration managed by configset", "repository": "git@github.com:lyft/rtsmconfigdata.git", "image_type": "data", "service_tier": 2, "slack": "#pricing-adaptive-dep", "team_email": "adaptive-pricing@lyft.com", "pagerduty_escalation_policy": "devnull", "languages": ["bash", "python"], "builder": {"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, "credentials": false, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/rtsmconfigdata"]}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "9b98c58f8f5d611580a2c48e958f1896bf274654", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "rtsmfeaturestream": {"name": "rtsmfeaturestream", "description": "Repo for RTSM feature generation pipeline", "repository": "git@github.com:lyft/rtsmfeaturestream.git", "slack": "#de-positioning-deploy", "team_email": "driver-positioning-core@lyft.com", "pagerduty_escalation_policy": "Driver Positioning", "image_type": "service", "service_tier": 3, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ibeampython:7ecb99e34732b4416d8d0319b5c826bcc6b86487"}}]}}, "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true}, [{"name": "staging-rtsmfeaturestream1", "legacy": false, "automatic": true}, {"name": "staging-rtsmfeaturestream2", "legacy": false, "automatic": true}], {"name": "production", "legacy": false, "automatic": false, "orca": [{"region": "iad"}]}, [{"name": "production-rtsmfeaturestream1", "legacy": false, "automatic": false}, {"name": "production-rtsmfeaturestream2", "legacy": false, "automatic": false}]], "streamingplatform": {"kubernetes": true, "stages": {"staging-rtsmfeaturestream1": {"configuration": "rtsmfeaturestream1-staging.jsonnet"}, "staging-rtsmfeaturestream2": {"configuration": "rtsmfeaturestream2-staging.jsonnet"}, "production-rtsmfeaturestream1": {"configuration": "rtsmfeaturestream1-production.jsonnet"}, "production-rtsmfeaturestream2": {"configuration": "rtsmfeaturestream2-production.jsonnet"}}}, "languages": ["bash", "python"], "python": {"mypy": {"python_versions": ["3.6"]}}, "containers": [{"name": "service", "command": "/usr/local/s2i/flink-run local"}], "groups": [{"name": "dev", "members": ["control.dev", "rtsmfeaturestream.service"]}], "configsets": ["rtsmconfigdata"], "envoy": {"profile": "python", "settings": {"services": [{"name": "rtsmfeaturestream"}, {"name": "rtsmfeaturestreamjobmanager"}, {"name": "rtsmfeaturestreamtaskmanager"}], "common_settings": {"local_service": {"enable_gzip": true}, "internal_hosts": {"flexppz": null}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}}}}, "tests": [{"name": "unit", "type": "jailed", "framework": "pytest", "coverage": false, "target": "tests/unit"}, {"name": "integration", "type": "execution", "framework": "pytest", "coverage": false, "group": "rtsmfeaturestream.dev", "container": "rtsmfeaturestream.service", "target": "tests/integration"}], "version": "5a179517108782ed324939d890a5d396ab45a4e4", "images": [{"parent": {"name": "s2ibeampython", "version": "7ecb99e34732b4416d8d0319b5c826bcc6b86487", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ibeampython", "version": "7ecb99e34732b4416d8d0319b5c826bcc6b86487", "sub_image": null, "external": false}}, "runtime": {"name": "runtime", "description": "runtime configuration settings", "repository": "git@github.com:lyft/runtime.git", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.run", "sub_image": "run"}}]}}, "docs": {"disable": true}, "containers": [{"name": "run", "sub_image": "run", "command": "/code/runtime/entrypoint.sh", "once": true, "start_phase": "sequential_init"}, {"name": "service", "sub_image": "run", "command": "/code/runtime/service_entrypoint.sh"}, {"name": "spin", "sub_image": "run", "command": "sleep infinity"}, {"name": "configsets", "command": "/code/runtime/configset_entrypoint.sh"}], "groups": [{"name": "test_group", "members": ["control.dev", "runtime.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "shellcheck", "type": "tool", "run_in_dev": false, "tool": "shellcheck.lint"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "canary", "legacy": true, "orca": [], "links": [{"text": "Deploy Sentry", "url": "https://deploysentry.lyft.net/"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "orca": [], "links": [{"text": "Deploy Sentry", "url": "https://deploysentry.lyft.net/"}]}, {"name": "production", "legacy": true, "orca": []}], "slack": "#devops-notifications", "team_email": "deploys-team@lyft.com", "pagerduty_escalation_policy": "Deploys", "ci": {"tarball_download": true}, "audit_blacklist": ["envoyAudit"], "image_type": "data", "service_tier": 0, "languages": ["python"], "version": "3eb2a4f1d56e3f1044ea88f643443dec2b6258a9", "images": [{"parent": {"name": "python", "version": "1af4dede3343b86204a78134646e08798cab04de", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": "run"}], "parent": {"name": "python", "version": "1af4dede3343b86204a78134646e08798cab04de", "sub_image": null, "external": false}}, "runtimepull": {"name": "runtimepull", "description": "pull runtime", "repository": "git@github.com:lyft/k8s-sidecars.git:runtimepull", "slack": "#compute-bots", "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "credentials": false, "docs": {"section": "Infrastructure"}, "deploy": [[{"name": "staging-provtest", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "provtest"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "provtest"}}, "legacy": false}, {"name": "staging-infra-dev", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": ["infra-dev"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sidecar-test1", "obs-dev", "boba"]}}, "legacy": false}], [{"name": "staging-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "core"}}}, {"name": "staging-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "core"}}}, {"name": "staging-trustnetwork", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["trustnetwork"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["trustnetwork"]}}}, {"name": "staging-flink", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "flink"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "flink"}}}, {"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron", "infra"]}}}, {"name": "staging-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "deploys"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}}}, {"name": "staging-envoyminimesh", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["envoyminimesh"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["envoyminimesh"]}}}], [{"name": "production-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "deploys"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}}}, {"name": "production-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-devkube", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}}}, {"name": "production-trustnetwork", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["trustnetwork"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["trustnetwork"]}}}, {"name": "production-devkubestaging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkubestaging"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}}}], [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "core"}}}, {"name": "production-us-east-1b", "legacy": false, "availability_zone": "us-east-1b", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "core"}}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "core"}}}, {"name": "production-us-east-1e", "legacy": false, "availability_zone": "us-east-1e", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "core"}}}, {"name": "production-us-east-1f", "legacy": false, "availability_zone": "us-east-1f", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "core"}}}], {"name": "production", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron", "infra", "devkube"]}}}], "languages": ["bash"], "image_type": "service", "service_tier": 3, "version": "c663091cf6cdb7bd11f1f6eeada02d0614d9320f", "images": [{"parent": {"name": "bionicbase", "version": "ee338ebf71e054b132773aefdd8870b1bd4f3aa2", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "ee338ebf71e054b132773aefdd8870b1bd4f3aa2", "sub_image": null, "external": false}}, "s3auditor": {"name": "s3auditor", "description": "s3auditor", "repository": "git@github.com:lyft/s3auditor.git", "image_type": "service", "languages": ["golang"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "sqs.server", "ratelimit.dev", "s3auditor.legacy", "lyftidl.server", "dbproxy.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "s3auditor.dev"}, {"name": "unit", "type": "execution", "group": "s3auditor.dev", "container": "s3auditor.legacy", "command": "make tests"}], "service_tier": 3, "slack": "#ds-aws-pod", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "datastores-team@lyft.com", "pagerduty_escalation_policy": "DS AWS", "deploy": [{"name": "staging", "automatic": true, "legacy": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production", "legacy": true}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "s3auditor"}], "common_settings": {"internal_hosts": {"ratelimit": null, "dbproxy": null}, "external_hosts": {"sqs_iad": null, "s3_iad": null, "s3_pdx": null, "s3_sfo": null}}}}, "logging": {"s3auditor": {"fields": {"bucket": "keyword", "key": "keyword", "source_type": "keyword", "audit_failure": "boolean", "code": "long", "path": "keyword", "method": "keyword", "event_name": "keyword", "host": "keyword", "signal": "keyword"}}}, "version": "269b84680e6507257459858c31049036eb44cdc6", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "s3kinesisperf": {"name": "s3kinesisperf", "description": "S3 Kinesis read/join performance job", "repository": "git@github.com:lyft/streamperfbench.git:s3kinesisperf", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "zookeeper.server", "s3kinesisperf.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "s3kinesisperf.dev"}, {"name": "integration", "type": "execution", "group": "s3kinesisperf.dev", "container": "s3kinesisperf.legacy", "command": "mvn verify -P '!disable-integration-tests'"}], "slack": "#strm-compute-bots", "team_email": "nmurthy@lyft.com", "service_tier": 3, "pagerduty_escalation_policy": "devnull", "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true}, {"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "languages": ["java", "bash"], "image_type": "service", "streamingplatform": {"version": "1.3-SNAPSHOT", "jobmanagers": [{"name": "s3kinesisperf", "production": {"num_taskmanagers": 46, "taskmanager": {"num_slots": 4}}, "jobs": [{"name": "s3kinesisperf", "jar": "s3kinesisperf-1.0.0-SNAPSHOT.jar", "class": "com.lyft.s3kinesisperf.S3KinesisPerfClient", "description": "Sample application to exercise generator", "development": {"parallelism": 2}, "staging": {"parallelism": 16}, "production": {"parallelism": 180}}]}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "s3kinesisperf"}, {"name": "s3kinesisperfjobmanager"}, {"name": "s3kinesisperftaskmanager"}]}}, "version": "4a8334f6cf7af53861c4138df96f4fc6b52517d5", "images": [{"parent": {"name": "opsbase", "version": "ae516a0e9ff6999ab7f74954c04a99ac5cd5bf59", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "ae516a0e9ff6999ab7f74954c04a99ac5cd5bf59", "sub_image": null, "external": false}}, "samlbridge": {"name": "samlbridge", "description": "SAML bridge for internal applications", "repository": "git@github.com:lyft/samlbridge.git", "image_type": "service", "credentials": true, "restricted_ssh": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "frontend", "port": 9211}]}], "groups": [{"name": "dev", "members": ["control.dev", "samlbridge.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "samlbridge.dev"}], "slack": "#security", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "team_email": "security-engineering@lyft.com", "pagerduty_escalation_policy": "Security", "deploy": [{"name": "staging", "legacy": true, "automatic": true}, {"name": "canary", "legacy": true}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "languages": ["python"], "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "samlbridge"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"acl": null}}}}, "version": "4864cbd8115e1f2bc5ec5a820721a6843e382ac1", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "sandbox": {"name": "sandbox", "description": "Sandbox for developer apis", "repository": "git@github.com:lyft/sandbox.git", "slack": "#enterprise-productivity-bot", "team_email": "lb-productivity-eng@lyft.com", "pagerduty_escalation_policy": "business productivity", "image_type": "service", "service_tier": 2, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:458b2e30217d9d14e20befd527e5b98a44f43c19"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py38.c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "sandbox.legacy"]}, {"name": "service_group", "members": ["sandbox.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "sandbox.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "sandbox.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "sandbox.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "sandbox"}]}}, "version": "51d5bba93e0f8d3f3b3e662eb8f5b4d51ec733d3", "images": [{"parent": {"name": "opsbase", "version": "458b2e30217d9d14e20befd527e5b98a44f43c19", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "py38", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "458b2e30217d9d14e20befd527e5b98a44f43c19", "sub_image": null, "external": false}}, "scrumbot": {"name": "scrumbot", "description": "Slack bot to help organize and keep track of scrum updates for different teams", "repository": "git@github.com:lyft/scrumbot.git", "image_type": "service", "service_tier": 3, "slack": "#scrumbot-dev", "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "Datastores", "credentials": true, "languages": ["bash", "python"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "minimal", "members": ["control.dev", "scrumbot.legacy"]}, {"name": "dev", "members": ["scrumbot.minimal", "dynamodb.server", "omnibot.dev"]}, {"name": "integration", "members": ["scrumbot.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "scrumbot.minimal"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "execution", "group": "scrumbot.dev", "container": "scrumbot.legacy", "command": "service_venv pytest --junitxml=build/unit.xml tests/unit", "reports": {"junit": "build/unit.xml"}}, {"name": "integration", "type": "execution", "group": "scrumbot.integration", "container": "scrumbot.legacy", "command": "service_venv pytest --junitxml=build/integration.xml tests/integration", "reports": {"junit": "build/integration.xml"}}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}], {"legacy": true, "name": "production"}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:2ce6d22d2593683967e2d381e8e026dc0868e62f", "sub_image": "precommit"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "scrumbot"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"omnibot": null, "dynamodbquerier": null}, "external_hosts": {"dynamodb_iad": null, "dynamodb_cmh": null}}}}, "version": "042ecbb3fe1b2458d1bca4b610a5e71c2f269538", "images": [{"parent": {"name": "opsbase", "version": "e6298e7b6ba0c062918e656d651de3ad48092f2a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "2ce6d22d2593683967e2d381e8e026dc0868e62f", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "e6298e7b6ba0c062918e656d651de3ad48092f2a", "sub_image": null, "external": false}}, "seclib": {"name": "seclib", "description": "A library for common security helper functions an decorators.", "repository": "git@github.com:lyft/python-lyft-seclib.git", "report_ci": true, "credentials": true, "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:6d5214082669c24cab347ee3e72d74700d9977ed"}}, "tests": [{"name": "python2", "type": "jailed", "command": "python -3 -m pytest tests"}, {"name": "python3", "type": "jailed", "command": "python3 -bb -m pytest tests"}, {"name": "flake", "type": "jailed", "command": "flake8"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy"}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true}], "image_type": "library", "version": "d76e9c77ebf8a56e8784a3de25c6ef3843c83073", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "6d5214082669c24cab347ee3e72d74700d9977ed", "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "6d5214082669c24cab347ee3e72d74700d9977ed", "external": false}}, "sectools": {"name": "sectools", "description": "batch box for security crons", "repository": "git@github.com:lyft/sectools.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/sectools/provision.sh", "add_capabilities": ["audit_control", "audit_write"], "pid": "host"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "incidentassistant.dev", "sectools.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "sectools.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#security", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "pagerduty_escalation_policy": "Security", "team_email": "security-engineering@lyft.com", "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "production", "legacy": true, "orca": [{"region": "iad"}], "automatic": false}], "languages": ["bash", "python"], "image_type": "service", "service_tier": 3, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "configsets": ["chaosdata"], "envoy": {"profile": "python", "settings": {"services": [{"name": "sectools"}], "common_settings": {"internal_hosts": {"team": null, "incidentassistant": null}, "external_hosts": {"dynamodb_iad": null}}}}, "version": "24d05bf8627e791ba9dec277af60b8b2a4e1ff70", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "securityalerts": {"name": "securityalerts", "description": "Security alerting rules", "repository": "git@github.com:lyft/security-alerts.git", "credentials": true, "restricted_ssh": true, "slack": "#security", "team_email": "security-engineering@lyft.com", "pagerduty_escalation_policy": "Detection Primary", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "audit_blacklist": ["envoyAudit"], "languages": ["bash", "python"], "image_type": "service", "service_tier": 3, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "elasticsearch.dev", "idl.server", "kafka.server", "securityalerts.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "securityalerts.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "bake_time_minutes": 2, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "bake_time_minutes": 2, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "securityalerts"}, {"name": "securityalertsstream"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"securityalerts": null}, "external_hosts": {"dynamodb_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "b1741530bc77b122253ca13bc7b120d3774d8d54", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "securitylogarchivegithub": {"parent": {"version": "build-python2.7", "name": "lambci/lambda", "buildargs": [], "external": true}, "tests": [{"type": "jailed", "command": "make test", "name": "unit"}], "version": "07607e858ab619e81dce6214ca293fc76757bb6d", "name": "securitylogarchivegithub", "repository": "git@github.com:lyft/securitylogarchive-github.git", "deploy": [{"legacy": false, "name": "development"}, {"legacy": false, "name": "staging"}, {"legacy": false, "name": "canary"}, {"legacy": false, "name": "production"}], "description": "Receives GitHub Webhook events and archives them in S3", "containers": [{"command": "make clean", "name": "clean"}], "orca_environments": {"production": "zimride"}}, "securitylogingestng": {"name": "securitylogingestng", "description": "Service oriented architecture for securitylogingest lambdas", "repository": "git@github.com:lyft/securitylogingestng.git", "image_type": "service", "service_tier": 2, "slack": "#security", "team_email": "security-detection@lyft.com", "pagerduty_escalation_policy": "Detection Primary", "notification_overrides": {"deploy": {"slack": "#tnw-bots"}, "pr_merge": {"slack": "#tnw-bots"}}, "languages": ["bash", "python"], "credentials": true, "restricted_ssh": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "elasticsearch5.server", "kafka.server", "kinesis.server", "redis.dev", "sqs.server", "securitylogingestng.legacy"]}, {"name": "devextended", "members": ["securitylogingestng.dev", "team.dev", "incidentassistant.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "securitylogingestng.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production", "orca": [{"region": "iad"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "securitylogingestng"}, {"name": "securitylogingestbatch"}], "common_settings": {"internal_hosts": {"team": null, "users": null, "incidentassistant": null}, "external_hosts": {"dynamodb_iad": null}, "redis": {"securitylogingestngmultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "69f2b6ac85759720bd82cb15dfd10f9ebee156b6", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "segmentedratecarddata": {"name": "segmentedratecarddata", "description": "Runtime configuration data for Segmented Driver rate card", "repository": "git@github.com:lyft/segmentedratecarddata.git", "image_type": "data", "service_tier": 2, "slack": "#segmented-ratecard-data", "team_email": "xd-eng@lyft.com", "pagerduty_escalation_policy": "devnull", "languages": ["bash", "python"], "builder": {"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, "credentials": false, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/segmentedratecarddata"]}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "ccc6161f1f673296f4467a608ac0ef33faeee618", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "servicecatalog": {"name": "servicecatalog", "description": "Catalog of services at Lyft, their ownership, and the resources they're responsible for.", "repository": "git@github.com:lyft/servicecatalog.git", "slack": "#servicecatalog", "team_email": "capacity-team@lyft.com", "pagerduty_escalation_policy": "Capacity", "image_type": "service", "service_tier": 2, "languages": ["python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "ingestservices", "command": "dumb-init -- service_venv python manage.py ingest --what services", "workdir": "/code/servicecatalog", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "ingests3", "command": "dumb-init -- service_venv python manage.py ingest --what S3", "workdir": "/code/servicecatalog", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}, {"name": "ingestasgs", "command": "dumb-init -- service_venv python manage.py ingest --what EC2", "workdir": "/code/servicecatalog", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "servicecatalog.legacy"]}, {"name": "service_group", "members": ["servicecatalog.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "servicecatalog.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "servicecatalog.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "servicecatalog.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}, {"name": "ingestservices", "member": "servicecatalog.ingestservices", "type": "cron", "concurrency_policy": "forbid", "schedule": "*/15 * * * *"}, {"name": "ingests3", "member": "servicecatalog.ingests3", "type": "cron", "concurrency_policy": "forbid", "schedule": "12 12 * * *"}, {"name": "ingestasgs", "member": "servicecatalog.ingestasgs", "type": "cron", "concurrency_policy": "forbid", "schedule": "13 13 * * *"}], "deploy": [{"name": "staging", "bake_time_minutes": 0, "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "bake_time_minutes": 0, "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "bake_time_minutes": 0, "automatic": true, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "bake_time_minutes": 0, "automatic": true, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "bake_time_minutes": 0, "automatic": true, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "ingestservices"}, {"facet": "ingests3"}, {"facet": "ingestasgs"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "servicecatalog"}], "common_settings": {"internal_hosts": {"team": null}, "external_hosts": {"dynamodb_iad": null}}}}, "version": "fa15bd450e20faee5324d84864a0b0aad46e107f", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "serviceportal": {"name": "serviceportal", "description": "Service Portal to see all things service", "repository": "git@github.com:lyft/serviceportal.git", "credentials": true, "custom": {"frontend_service": true}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}, {"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "web", "port": 80}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/serviceportal", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "4Gi"}, "exports": [{"port": 20110}]}, {"name": "cacheupdater", "command": "dumb-init -- manage cache_updater", "workdir": "/code/serviceportal", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}}, {"name": "statsdstatusworker", "command": "dumb-init -- manage statsd_status_worker --clusters statsd,statsdfast,statsdanalytics", "workdir": "/code/serviceportal", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}}, {"name": "cloudwatchstatusworker", "command": "dumb-init -- manage cloudwatch_status_worker", "workdir": "/code/serviceportal", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}}, {"name": "esmappingstatusworker", "command": "dumb-init -- manage es_search_mappings", "workdir": "/code/serviceportal", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}}, {"name": "cacheupdaterhourly", "command": "manage cache_updater_hourly", "workdir": "/code/serviceportal", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}}], "facets": [{"name": "main", "member": "serviceportal.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 2}}, {"name": "canary", "member": "serviceportal.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "cacheupdater", "member": "serviceportal.cacheupdater", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "statsdstatusworker", "member": "serviceportal.statsdstatusworker", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "cloudwatchstatusworker", "member": "serviceportal.cloudwatchstatusworker", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "esmappingstatusworker", "member": "serviceportal.esmappingstatusworker", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "cacheupdaterhourly", "member": "serviceportal.cacheupdaterhourly", "type": "cron", "schedule": "@hourly"}], "groups": [{"name": "dev", "members": ["redis.server", "serviceportal.legacy", "infraevents.dev", "omnibot.dev"]}, {"name": "integration", "members": ["serviceportal.dev", "infraevents.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "serviceportal.dev"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#service-portal", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "obs-analysis@lyft.com", "pagerduty_escalation_policy": "Observability-Analysis", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "cacheupdater"}, {"facet": "statsdstatusworker"}, {"facet": "cloudwatchstatusworker"}, {"facet": "esmappingstatusworker"}, {"facet": "cacheupdaterhourly"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "orchestrate": {"types": [{"name": "terraform"}], "steps": [{"name": "staging"}]}, "languages": ["javascript", "python"], "image_type": "service", "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "serviceportal"}, {"name": "serviceportalworker"}, {"name": "serviceportalstatusworker"}], "common_settings": {"redis": {"serviceportalmultiredis": {"port": 6380}}}, "override_settings": [{"services": [{"name": "serviceportal"}], "settings": {"internal_hosts": {"infraevents": null, "omnibot": null, "tcseditor": null}}}]}}, "logging": {"serviceportalworker": {"fields": {"traceback": "keyword", "attempt_num": "long", "exception": "keyword", "failed_record": "keyword"}}}, "version": "c43da84e36c63f0eecbab5f8508f460a83e70b7f", "images": [{"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "serviceprovisioner": {"name": "serviceprovisioner", "description": "devkube service provisioning", "repository": "git@github.com:lyft/serviceprovisioner.git", "slack": "#devx-bots", "team_email": "devx-team@lyft.com", "image_type": "service", "service_tier": 3, "pagerduty_escalation_policy": "DevX", "languages": ["go"], "docs": {"section": "Infrastructure"}, "builder": {"name": "s2iplus", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "packages": ["unzip", "lbzip2"]}}, "containers": [{"name": "run", "command": "serviceprovisioner"}, {"name": "spin", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["serviceprovisioner.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "integration", "type": "execution", "group": "serviceprovisioner.dev", "container": "serviceprovisioner.spin", "command": "make integration"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true}, {"name": "production", "legacy": false}, {"name": "production-devkube", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}}}, {"name": "production-devkubestaging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkubestaging"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}}}], "version": "cdd449839465015caa4f7272f1385aa32cfcea12", "images": [{"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}}, "setl": {"name": "setl", "description": "Structured ETL repo", "repository": "git@github.com:lyft/setl.git", "slack": "#setl", "team_email": "twang@lyft.com", "pagerduty_escalation_policy": "data-tool-setl", "image_type": "flyteworkflow", "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "setl.spin"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure", "autotrigger": false}, {"name": "unit_legacy", "type": "execution", "command": "make test_unit", "group": "setl.dev", "container": "setl.spin"}, {"name": "workflow_registration", "type": "execution", "group": "setl.dev", "container": "setl.spin", "command": "make register_for_pr"}], "deploy": [[{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_development"}], [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_staging"}], [{"name": "production", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_production"}]], "credentials": true, "version": "9216a7b1c9c61fa1225a6ec4816186a385af18f6", "images": [{"parent": {"name": "flytesparkbase", "version": "ea8b691fef3dc56fef3b71d3c6c54a28116b1635", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "flytesparkbase", "version": "ea8b691fef3dc56fef3b71d3c6c54a28116b1635", "sub_image": null, "external": false}}, "setlmetastore": {"name": "setlmetastore", "description": "SETL Metastore", "repository": "git@github.com:lyft/setlmetastore.git", "slack": "#setl", "team_email": "twang@lyft.com", "pagerduty_escalation_policy": "data-tool-setl", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:8e738741d84a4e5507052068fa7dafe771cb111a", "packages": ["libmysqlclient-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s", "packages": ["libmysqlclient-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/setlmetastore", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "setlmetastore.legacy"]}, {"name": "service_group", "members": ["setlmetastore.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "setlmetastore.dev"}, {"name": "unit", "type": "jailed", "command": "service_venv pytest --cov=app --junitxml=build/unit.xml --cov-report=xml tests/unit", "reports": {"cobertura": "build/coverage.xml", "junit": "build/unit.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "setlmetastore.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "setlmetastore.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "setlmetastore"}]}}, "version": "da50ae09920d8d30f9eb9e397aa9db53f5dc32f6", "images": [{"parent": {"name": "opsbase", "version": "8e738741d84a4e5507052068fa7dafe771cb111a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "8e738741d84a4e5507052068fa7dafe771cb111a", "sub_image": null, "external": false}}, "shardworker": {"name": "shardworker", "description": "shardworker", "repository": "git@github.com:lyft/shardworker.git", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "shardworker.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "shardworker.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#locations", "team_email": "locations@lyft.com", "pagerduty_escalation_policy": "Locations", "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, [{"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "languages": ["python"], "image_type": "service", "service_tier": 1, "envoy": {"profile": "python", "settings": {"services": [{"name": "shardworker"}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "bc50d5f9c4b53758dce353664ce7e59118c150e7", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "sharelocation": {"name": "sharelocation", "description": "Service that allows users to share their location", "repository": "git@github.com:lyft/sharelocation.git", "slack": "#community-safety-bots", "team_email": "community-safety-eng@lyft.com", "pagerduty_escalation_policy": "Community Safety", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/sharelocation", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "sharelocation.legacy", "supply.legacy"]}, {"name": "integration", "members": ["messaging.dev", "sharelocation.dev", "trustedcontacts.dev", "users.dev"]}, {"name": "service_group", "members": ["sharelocation.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "sharelocation.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "sharelocation.integration", "container": "sharelocation.legacy", "command": "service_venv pytest tests/integration --disable-fixture-analytics-plugin"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "sharelocation.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "sharelocation.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "sharelocation"}], "common_settings": {"internal_hosts": {"jobschedulerbulkweb": null, "jobschedulernormalweb": null, "locations": null, "messaging": null, "pusher": null, "ratelimit": null, "rides": null, "routesapi": null, "supply": null, "trustedcontacts": null, "users": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "authorization": {"permissions": {"public_driver_share_location": {"paths": ["/v1/driver-share-location*"], "not_paths": ["/v1/driver-share-location-details/get"], "methods": ["POST"]}, "get_driver_share_location_details": {"paths": ["/v1/driver-share-location-details/get"], "methods": ["POST"]}, "get_driver_share_location_session": {"paths": ["/v1/driver-share-location-session/get"], "methods": ["POST"]}, "jobs": {"paths": ["/jobs/v1/*"], "methods": ["POST"]}, "urm": {"paths": ["/urm/*"], "methods": ["POST"]}}, "bindings": {"envoy": ["public_driver_share_location"], "jobscheduler": ["jobs", "urm"], "pusher": ["get_driver_share_location_session"], "sharelocationfe": ["get_driver_share_location_details"], "taskqueuebulk": ["jobs", "urm"], "taskqueuenormal": ["jobs", "urm"]}}}}}, "logging": {"sharelocation": {"fields": {"driver_id": "long", "token": "keyword"}}}, "pulldeploy_components": {"data": ["translationdata"]}, "version": "72b358cecd9a23a86051714e01bc7eead9c80318", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "sharelocationfe": {"name": "sharelocationfe", "description": "An external facing web frontend service to for showing shared locations", "repository": "git@github.com:lyft/sharelocationfe.git", "slack": "#insurance", "team_email": "insurance-eng@lists.lyft.com", "credentials": true, "pagerduty_escalation_policy": "Insurance FE", "image_type": "service", "service_tier": 2, "pulldeploy_components": {"data": ["translationdata"]}, "languages": ["bash", "javascript"], "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "sharelocationfe.legacy", "www2.dev", "tcs.legacy"]}, {"name": "service_group", "members": ["sharelocationfe.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "sharelocationfe.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "sharelocationfe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"users": null, "sharelocation": null}}}}, "version": "106ada29e7bb32b22209bac483a555625e02d19a", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "sheets": {"name": "sheets", "description": "Updates google spreadsheets from various sources.", "slack": "#ci-bots", "repository": "git@github.com:lyft/sheets.git", "credentials": true, "credentials_legacy": false, "pagerduty_escalation_policy": "CI and Deployments", "containers": [{"name": "onebox", "command": "/code/sheets/entrypoint.sh 1800 --spreadsheet onebox"}, {"name": "jailedunittests", "command": "/code/sheets/entrypoint.sh 3600 --spreadsheet Jailed\\ unittests\\ status"}, {"name": "stagingactions", "command": "/code/sheets/entrypoint.sh 300 --spreadsheet Staging\\ Actions"}], "groups": [{"name": "worker", "members": ["usergen.run", "dnsmasq.server", "runtime.run", "metadataproxy.server", "sheets.onebox", "sheets.jailedunittests", "sheets.stagingactions", "control.clean"]}], "tests": [{"name": "unit", "type": "jailed", "command": "pytest --junitxml=build/unit.xml tests", "reports": {"junit": "build/unit.xml"}}, {"name": "startup", "type": "startup", "group": "sheets.worker"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false}, {"name": "production", "legacy": false, "automatic": true}], "languages": ["bash", "python"], "image_type": "tool", "team_email": "automation-team@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": "precommit"}}]}}, "version": "f106023d891d9aa4adb2fd67d3fc5a4f92a479eb", "images": [{"parent": {"name": "bionicbase", "version": "cd263d041f3cba6944dc0591944aa66e13b53152", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "bionicbase", "version": "cd263d041f3cba6944dc0591944aa66e13b53152", "sub_image": null, "external": false}}, "shellcheck": {"name": "shellcheck", "description": "shellcheck linter container", "repository": "git@github.com:lyft/containers.git:shellcheck", "slack": "#devx-bots", "team_email": "devx-team@lyft.com", "containers": [{"name": "lint", "command": "/code/containers/shellcheck/entrypoint.sh", "mounts": ["/var/run/docker_sockets", "/srv/control"]}], "tests": [{"name": "shellcheck", "type": "tool", "tool": "shellcheck.lint"}], "upstream_tests": {"test_set": {"runtime": ["shellcheck"]}}, "deploy": [{"name": "staging", "legacy": false, "automatic": false}, {"name": "canary", "legacy": false}, {"name": "production", "legacy": false}], "image_type": "tool", "version": "bc7e4faf5ae5393e3c91544c6ef4d5269fdb841b", "images": [{"parent": {"name": "bionicbase", "version": "ee338ebf71e054b132773aefdd8870b1bd4f3aa2", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "ee338ebf71e054b132773aefdd8870b1bd4f3aa2", "sub_image": null, "external": false}}, "shield": {"name": "shield", "description": "Models to evaluate marketplace effects from user-split experiments", "repository": "git@github.com:lyft/shield.git", "slack": "#shield-ci", "team_email": "shield@lyft.com", "image_type": "tool", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/lyftlearnnotebook:2d8ea337705f7203c4431efb5bf9e974355bce3f"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.spark2", "sub_image": "spark"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "sub_image": "spark", "command": "pytest tests"}], "containers": [{"name": "spin", "command": "sleep infinity"}], "deploy": [{"name": "production", "legacy": false, "automatic": true, "orca": [{"region": "iad"}]}], "lyftlearn": {}, "version": "77a53331b4a1a69ee704d36700df2176af25709b", "images": [{"parent": {"name": "lyftlearnnotebook", "version": "2d8ea337705f7203c4431efb5bf9e974355bce3f", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "lyftlearnspark", "version": "afd8720c6a6c76e2beda8ca009240171868324f8", "sub_image": null, "external": false}, "sub_image": "spark"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "lyftlearnnotebook", "version": "2d8ea337705f7203c4431efb5bf9e974355bce3f", "sub_image": null, "external": false}}, "shiftearnings": {"name": "shiftearnings", "description": "T1 service to handle the calculation of shift-based earnings", "repository": "git@github.com:lyft/shiftearnings.git", "slack": "#dxp-backend", "team_email": "driver-earnings-xp-eng@lyft.com", "pagerduty_escalation_policy": "Driver Earnings XP", "image_type": "service", "service_tier": 1, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py38.b53cef4fa319d93186ad696836fe2985a4b6381d", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "shiftearnings.legacy"]}, {"name": "service_group", "members": ["shiftearnings.legacy"]}, {"name": "integration", "members": ["shiftearnings.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "shiftearnings.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "command": "make test_integration", "container": "shiftearnings.legacy", "group": "shiftearnings.integration", "run_in_pr": true}], "facets": [{"name": "main", "member": "shiftearnings.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "shiftearnings.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "shiftearnings"}]}}, "version": "65221f067334daa426b66e0460a5020b9065bd8d", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "b53cef4fa319d93186ad696836fe2985a4b6381d", "sub_image": "py38", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "shiftquotamanager": {"name": "shiftquotamanager", "description": "This service is used to manage creating and updating driver shifts.", "repository": "git@github.com:lyft/shiftquotamanager.git", "slack": "#driver-incentives-bots", "team_email": "de-conversion@lyft.com", "pagerduty_escalation_policy": "Driver Engagement", "image_type": "service", "service_tier": 1, "languages": ["python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py38.c807824b105c3e7f6a1a85ece6a1829a35e1ee26", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 1200, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "shiftquotamanager.legacy", "jobscheduler.dev"]}, {"name": "service_group", "members": ["shiftquotamanager.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "shiftquotamanager.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "shiftquotamanager.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "shiftquotamanager.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "shiftquotamanager"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}}, "external_hosts": {"firehose_iad": null}, "internal_hosts": {"shiftsapi": null, "jobschedulerbulkweb": null}}}}, "version": "9a6c7e89bd094b110a915ee2b276e497ef5dcdf8", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c807824b105c3e7f6a1a85ece6a1829a35e1ee26", "sub_image": "py38", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "shifts": {"name": "shifts", "repository": "git@github.com:lyft/shifts.git", "description": "shifts", "service_tier": 0, "team_email": "driver-labs-eng@lyft.com", "pagerduty_escalation_policy": "Driver Labs", "slack": "#driver-labs-bot", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- shifts", "limits": {"cpu": 4, "memory": "512Mi"}, "sub_image": "k8s", "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "shifts.legacy", "dynamodb.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "shifts.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "shifts.dev", "container": "shifts.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "coverage", "type": "execution", "command": "make coverage", "container": "shifts.legacy", "group": "shifts.dev", "reports": {"cobertura": "build/coverage.xml"}, "sub_image": "k8s"}], "facets": [{"name": "main", "member": "shifts.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 0, "max_size": 0}}}}, {"name": "canary", "member": "shifts.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {"external_hosts": {"dynamodb_iad": null}}, "services": [{"name": "shifts"}]}}, "logging": {"shifts": {"fields": {"driverLyftId": "keyword", "workShiftId": "keyword", "shiftQuotaId": "keyword", "startTime": "keyword", "startZone": "keyword", "error": "text", "shiftStartTimeRangeStart": "text", "shiftStartTimeRangeEnd": "text"}}}, "version": "9de4783e839db89f7bd7f44c6b6668b46f8fa432", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "shiftsapi": {"name": "shiftsapi", "description": "An interface and compositional layer into management of shift quotas and shift selection", "repository": "git@github.com:lyft/shiftsapi.git", "slack": "#driver-labs-bot", "team_email": "driver-labs-eng@lyft.com", "pagerduty_escalation_policy": "Driver Labs", "image_type": "service", "service_tier": 1, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.949781cc88ec78616c8cd3d9a22f3bba32c7b743", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "shiftsapi.legacy"]}, {"name": "integration", "members": ["shifts.dev", "shiftsapi.dev", "regions.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "shiftsapi.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "coverage": false}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "command": "make test_integration", "container": "shiftsapi.legacy", "group": "shiftsapi.integration", "reports": {"junit": "build/integration.xml"}}, {"name": "coverage", "type": "execution", "container": "shiftsapi.legacy", "group": "shiftsapi.dev", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}], "facets": [{"name": "main", "member": "shiftsapi.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "shiftsapi.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "shiftsapi"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"regions": null, "shifts": null}}}}, "logging": {"shiftsapi": {"fields": {"driver_id": "keyword", "region": "keyword", "response": "keyword", "code": "keyword", "shift_quota_id": "keyword", "work_shift_id": "keyword", "scheduled_start_time": "date", "scheduled_start_time_end": "date", "current_state": "keyword", "start_zone_map_id": "long", "start_zone_zone_id": "keyword", "mode": "keyword", "max_num_slots": "float", "shift_duration": "keyword", "start_range_start_time": "date", "start_range_end_time": "date", "work_shift_status": "text", "shift_quota": {"shift_quota_id": "keyword", "scheduled_start_time": "date", "shift_duration": "integer", "slots_total": "float", "slots_remaining": "float", "start_zone_map_id": "long", "start_zone_zone_id": "keyword", "mode": "keyword"}, "work_shift": {"driver_id": "keyword", "shift_quota_id": "keyword", "work_shift_id": "keyword", "scheduled_start_time": "date", "scheduled_start_time_end": "date", "current_state_status": "keyword", "current_state_occurred_at": "date", "start_zone_map_id": "long", "start_zone_zone_id": "keyword", "mode": "keyword"}}}}, "version": "bcef1f879270a55ebad145c3c742f23e28634186", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "949781cc88ec78616c8cd3d9a22f3bba32c7b743", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "shorttermforecaster": {"name": "shorttermforecaster", "description": "Compute and serve near-future forecasts of supply and demand.", "repository": "git@github.com:lyft/shorttermforecaster.git", "image_type": "service", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "start_time": 120, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "main", "command": "service_venv gunicorn wsgi:app --workers=2 --forwarded-allow-ips=\"*\" -k gevent --worker-connections=1000 --limit-request-line 8190 --timeout=90 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/shorttermforecaster", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}}, {"name": "job", "command": "dumb-init service_venv python -m manage supply_forecaster_worker", "workdir": "/code/shorttermforecaster", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "metricpumps", "command": "dumb-init service_venv python -m manage metric_pump_worker", "workdir": "/code/shorttermforecaster", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "healthprobe", "command": "dumb-init service_venv python -m manage health_probe --interval 300", "workdir": "/code/shorttermforecaster", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "idl.server", "redis.dev", "shorttermforecaster.legacy"]}], "pulldeploy_components": {"data": ["marketplaceconfig", "pricingdata", "regioncfgdata"]}, "tests": [{"name": "startup", "type": "startup", "group": "shorttermforecaster.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "execution", "group": "shorttermforecaster.dev", "container": "shorttermforecaster.legacy", "framework": "pytest"}], "slack": "#forecasting-bots", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "forecasting-team@lyft.com", "pagerduty_escalation_policy": "Forecasting", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "targets": [{"facet": "main"}, {"facet": "metricpumps"}, {"facet": "healthprobe"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], {"name": "production", "legacy": true, "targets": [{"facet": "canary"}, {"facet": "main"}, {"facet": "metricpumps"}, {"facet": "healthprobe"}], "kubernetes": {"enabled": true}}], "service_tier": 2, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s", "packages": ["awscli"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "facets": [{"name": "main", "member": "shorttermforecaster.main", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 6}, "production": {"min_size": 2, "max_size": 12}}}, "environment_files": ["ops/config/pillar/env.sls"]}, {"name": "canary", "member": "shorttermforecaster.main", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}, "environment_files": ["ops/config/pillar/env.sls"]}, {"name": "workers", "member": "shorttermforecaster.job", "type": "worker", "environment_files": ["ops/config/pillar/env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 4, "max_size": 4}, "production": {"min_size": 0, "max_size": 0}}}}, {"name": "canaryworkers", "member": "shorttermforecaster.job", "type": "worker", "canary": true, "environment_files": ["ops/config/pillar/env.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "metricpumps", "member": "shorttermforecaster.metricpumps", "type": "worker", "environment_files": ["ops/config/pillar/env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 3, "max_size": 3}, "production": {"min_size": 36, "max_size": 36}}}}, {"name": "healthprobe", "type": "cron", "schedule": "30 * * * *", "concurrency_policy": "Replace", "member": "shorttermforecaster.healthprobe"}], "envoy": {"profile": "python", "settings": {"services": [{"name": "shorttermforecaster"}, {"name": "shorttermforecasterworkers"}, {"name": "shorttermforecastermetricpumps"}], "common_settings": {"internal_hosts": {"demand": null, "dispatch": null, "modelconfig": null, "pricing": null, "rides": null, "routes": null, "viewport": null}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}, "redis": {"shorttermforecastermultiredis": {"port": 6380, "op_timeout_ms": 1250}}}}}, "docs": {"autogen_env": "python3.6", "autogen_modeules": ["app", "library"]}, "logging": {"shorttermforecaster": {"fields": {"exception_class": "keyword", "impl_method": "keyword", "route_name": "keyword"}}, "shorttermforecasterworkers": {"fields": {"forecast_region": "keyword", "horizon": "keyword", "forecast_type": "keyword", "model_version": "keyword", "exception_class": "keyword", "exception_code": "long", "chunk_id": "keyword", "method": "keyword", "some_geohashes": "keyword", "earliest_time_ms": "keyword", "latest_time_ms": "keyword", "failed_record_count": "long", "attempt_num": "long"}}}, "version": "65df1a12a97970aa3d8be6983eb89972b2770fdd", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "shutils": {"name": "shutils", "description": "A repo to manage and distribute internal shell utils", "repository": "git@github.com:lyft/shutils.git", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0"}}]}}, "containers": [{"name": "publish", "command": "/code/shutils/publish.sh"}], "facets": [{"name": "publish", "member": "shutils.publish", "type": "job"}], "docs": {"section": "Infrastructure"}, "tests": [{"name": "shellcheck", "type": "tool", "tool": "shellcheck.lint"}], "slack": "#devx-bots", "team_email": "devx-team@lyft.com", "pagerduty_escalation_policy": "DevX", "deploy": [{"name": "production", "automatic": true, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "publish"}], "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["bash"], "image_type": "tool", "version": "316ad0439e053697c456e57dbe1009f3b5467cea", "images": [{"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}}, "shuttleinternal": {"name": "shuttleinternal", "description": "Shuttle Team Internal Tools", "repository": "git@github.com:lyft/shuttleinternal.git", "image_type": "service", "languages": ["javascript", "bash"], "credentials": false, "slack": "#shuttle-server", "team_email": "podehnal@lyft.com", "pagerduty_escalation_policy": "Internal Tools", "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "groups": [{"name": "dev", "members": ["control.dev", "shuttleinternal.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "shuttleinternal.dev"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "shuttleinternal"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {}}}}, "service_tier": 3, "version": "e4b658d353417080840e248935b1518241649eac", "images": [{"parent": {"name": "opsbase", "version": "805e18ede9de2fb5f6cddf0d720eb54f9881cb0d", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "805e18ede9de2fb5f6cddf0d720eb54f9881cb0d", "sub_image": null, "external": false}}, "sidecarinjector": {"name": "sidecarinjector", "description": "sidecar injector using mutating webhook", "repository": "git@github.com:lyft/k8s-sidecar-injector.git", "pagerduty_escalation_policy": "Provisioning", "team_email": "compute-team@lyft.com", "slack": "#compute-bots", "credentials": false, "docs": {"section": "Infrastructure"}, "builder": {"name": "s2i", "params": {"builder": "lyft/s2igo:fa0c4921e2e8481015324ac1a2b841013a1a2fdf"}}, "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "deploy": [[{"name": "staging-sidecar-test1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sidecar-test1"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sidecar-test1"]}}}, {"name": "staging-boba", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["boba"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["boba"]}}}, {"name": "staging-boba2", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["boba2"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["boba2"]}}}, {"name": "staging-dross", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infratesting"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infratesting"]}}}, {"name": "staging-provtest", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["provtest"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["provtest"]}}}, {"name": "staging-envoyminimesh", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["envoyminimesh"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["envoyminimesh"]}}}], [{"name": "staging-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "staging-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "staging-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}, "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}, "interpolation_vars": {"kiam_env": "staging", "disable-deployment-updates": false}}}, {"name": "staging-stateful", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}, "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}}}, {"name": "staging-core-0", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": "core-staging-0", "cluster.lyft.net/role": "core"}}}, {"name": "staging-core-1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": "core-staging-1", "cluster.lyft.net/role": "core"}}}, {"name": "staging-core-2", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": "core-staging-2", "cluster.lyft.net/role": "core"}}}, {"name": "staging-core-3", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": "core-staging-3", "cluster.lyft.net/role": "core"}}}, {"name": "staging-core-4", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": "core-staging-4", "cluster.lyft.net/role": "core"}}}, {"name": "staging-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}}}, {"name": "staging-flink", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flink"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["flink"]}}}, {"name": "staging-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flyte"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "staging-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "staging-obs-dev", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["obs-dev"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["obs-dev"]}}}, {"name": "staging-trustnetwork", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["trustnetwork"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["trustnetwork"]}}}, {"name": "staging-allegro", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["allegro"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["allegro"]}}}, {"name": "staging-sonata", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}}}], {"name": "staging", "legacy": false, "kubernetes": {"enabled": true}}, [{"name": "production-deploys", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}, "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}}}, {"name": "production-stateful", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["stateful"]}, "cluster_labels": {"cluster.lyft.net/role": ["stateful"]}}}, {"name": "production-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-lyftlearn-av", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn-av"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml-av"]}}}, {"name": "production-ciinfra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["ciinfra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-titan", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["spark"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["titan"]}}}, {"name": "production-core-0", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": "core-prod-0", "cluster.lyft.net/role": "core"}}}, {"name": "production-core-1", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": "core-prod-1", "cluster.lyft.net/role": "core"}}}, {"name": "production-core-2", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": "core-prod-2", "cluster.lyft.net/role": "core"}}}, {"name": "production-core-3", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": "core-prod-3", "cluster.lyft.net/role": "core"}}}, {"name": "production-core-4", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/cluster_name": "core-prod-4", "cluster.lyft.net/role": "core"}}}, {"name": "production-core", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}}}, {"name": "production-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flyte"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-critical-flyte", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["flytecritical"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-devkube", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}, "interpolation_vars": {"disable-deployment-updates": true}}}, {"name": "production-devkubestaging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkubestaging"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}, "interpolation_vars": {"disable-deployment-updates": true}}}, {"name": "production-trustnetwork", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["trustnetwork"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["trustnetwork"]}}}, {"name": "production-sonata", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}}}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}}], "languages": ["go"], "image_type": "service", "service_tier": 3, "version": "8d764404d716863360c19895feabf11726b62c65", "images": [{"parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}}, "signalfxagent": {"name": "signalfxagent", "description": "daemonset that collects various host + container metrics for monitoring", "repository": "git@github.com:lyft/signalfx-agent.git", "slack": "#compute-bots", "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "image_type": "service", "credentials": false, "service_tier": 3, "docs": {"path": ".", "section": "Infrastructure"}, "deploy": [{"name": "staging-obs-dev", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["obs-dev"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["obs-dev"]}}}, [{"name": "staging-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra", "deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "staging-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}}}, {"name": "staging-trustnetwork", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["trustnetwork"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["trustnetwork"]}}}, {"name": "staging-ml", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn", "flyte"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "staging-core-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}}}, {"name": "staging-infra-dev-sla", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": ["infra-dev"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["boba", "boba2", "sidecar-test1"]}}}, {"name": "staging-dev-sla", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/sla": ["development"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["provtest"]}}}, {"name": "staging-dross", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/clustername": ["dross"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infratesting"]}}}, {"name": "staging-sonata", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["sonata"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["sonata"]}}}], {"name": "staging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}}}, [{"name": "production-core-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}}}, {"name": "production-infra", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra", "deploys"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}}}, {"name": "production-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}}}, {"name": "production-ml", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn", "flyte", "flytecritical"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}}}, {"name": "production-ml-av", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn-av"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml-av"]}}}, {"name": "production-trustnetwork", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["trustnetwork"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["trustnetwork"]}}}, {"name": "production-devkube", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkube"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkube"]}}}, {"name": "production-devkubestaging", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["devkubestaging"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["devkubestaging"]}}}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["core"]}}}], "version": "ba944acb3fa8a8f7f71508f1bcb3bff7f2d73d96", "images": [{"parent": {"name": "scratch", "version": "", "sub_image": null, "external": true}, "sub_image": null}], "parent": {"name": "scratch", "version": "", "sub_image": null, "external": true}}, "simpleflinkk8s": {"name": "simpleflinkk8s", "description": "A very simple Flink app used for testing the flink kubernetes operator", "repository": "git@github.com:lyft/streamperfbench.git:simple-flink-k8s", "slack": "#streaming-compute", "team_email": "streaming-compute@lyft.com", "pagerduty_escalation_policy": "devnull", "languages": ["bash", "java"], "image_type": "service", "service_tier": 3, "streamingplatform": {"kubernetes": true, "applications": [{"name": "simpleflinkk8s"}], "stages": {"staging": {"configuration": "staging.jsonnet"}, "production": {"configuration": "production.jsonnet"}}}, "deploy": [{"name": "staging", "legacy": false, "bake_time_minutes": 1, "orca": [{"region": "iad"}], "automatic": false}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}], "builder": {"name": "s2i", "params": {"builder": "lyft/s2istreamingplatformflink:sp20.e7ff259c7ba6843ae339496819df7d443d843872"}}, "containers": [{"name": "main", "command": "sleep infinity"}], "version": "ff5212d1ad2994c839149ac6bfdbf0104911fb26", "images": [{"parent": {"name": "s2istreamingplatformflink", "version": "e7ff259c7ba6843ae339496819df7d443d843872", "sub_image": "sp20", "external": false}, "sub_image": null}], "parent": {"name": "s2istreamingplatformflink", "version": "e7ff259c7ba6843ae339496819df7d443d843872", "sub_image": "sp20", "external": false}}, "simulatedrides": {"name": "simulatedrides", "description": "Orchestration of simulated Lyft rides", "repository": "git@github.com:lyft/simulatedrides.git", "credentials": true, "pulldeploy_components": {"data": ["regioncfgdata"]}, "configsets": ["atlantisdata"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 9211}]}], "frontend": {"node_version": "8.9.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "simulatedrides.legacy", "dynamodb.dev", "redis.dev"]}, {"name": "integration", "members": ["simulatedrides.qa", "autonomous.dev", "passengerqueues.dev", "ridechat.dev", "ridemonitor.dev", "helium.dev", "simulatedrides.dev"]}, {"name": "qa", "members": ["gg.qa"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "piptools-check", "type": "tool", "tool": "piptools.check"}, {"name": "startup", "type": "startup", "group": "simulatedrides.dev"}, {"name": "tsc", "type": "execution", "group": "simulatedrides.dev", "container": "simulatedrides.legacy", "command": "make test_tsc"}, {"name": "frontend", "type": "jailed", "command": "make test_frontend"}], "slack": "#sim-bots", "team_email": "simulation-platforms@lyft.com", "pagerduty_escalation_policy": "Simulation Platforms", "deploy": [{"name": "staging-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false, "links": [{"text": "Kibana - By msg (Staging us-east-1a)", "url": "https://kibana-staging.lyft.net/goto/691bb53628590014a1ee5c010011913e"}, {"text": "Kibana - Non-Action Errors (Staging us-east-1a)", "url": "https://kibana-staging.lyft.net/goto/b5c68dbc70d6413dbbcd32db8f93c5d9"}]}, {"name": "staging-us-east-1d", "legacy": true, "availability_zone": "us-east-1d", "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false, "links": [{"text": "Kibana - By msg (Staging us-east-1d)", "url": "https://kibana-staging.lyft.net/goto/09c67e1d4e32f3aedb1bd6279fa1726b"}, {"text": "Kibana - Non-Action Errors (Staging us-east-1d)", "url": "https://kibana-staging.lyft.net/goto/ed71e56499c5c981f80e77de7431d1cc"}]}, {"name": "staging", "legacy": true, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false, "links": [{"text": "Kibana - By msg (Staging)", "url": "https://kibana-staging.lyft.net/goto/349362081a2bbe5c165942ea9e058eb5"}, {"text": "Kibana - Non-Action Errors (Staging)", "url": "https://kibana-staging.lyft.net/goto/e557510a33b4883e801db3a3b2229a21"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"legacy": true, "name": "production", "orca": [{"orca_location": "ops", "region": "iad"}]}]], "slack_deploy_notification_environments": ["staging", "production"], "languages": ["python"], "image_type": "service", "service_tier": 2, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "simulatedrides"}], "common_settings": {"internal_hosts": {"account": null, "ats": null, "autonomous": null, "coupons": null, "jobschedulermigrationweb": null, "jobschedulernormalweb": null, "lastmile": null, "legacyoauth": null, "passengerqueues": null, "publicapi": null, "ratelimit": null, "regions": null, "rentals": null, "rides": null, "routesapi": null, "routingengine": null, "routingenginena20190710": null, "supply": null, "supplyrecords": {"tls_enabled": true}, "usergroups": null, "users": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null}}, "override_settings": [{"services": [{"name": "simulatedrides", "service_instance": "development"}], "settings": {"internal_hosts": {"enterprise": null, "walletapi": null}}}, {"services": [{"name": "simulatedrides", "service_instance": "staging"}], "settings": {"internal_hosts": {"walletapi": null}}}]}}, "logging": {"simulatedrides": {"fields": {"action": "keyword", "action_backoff": "float", "active_segment_type": "keyword", "active_segment_id": "keyword", "active_trips_ids": "keyword", "allowed_states": "keyword", "arrived_reason": "keyword", "base_url": "keyword", "behavior": "keyword", "cancel_meta": "keyword", "cancel_type": "keyword", "channel": "keyword", "client_config": "keyword", "client_composition": "keyword", "client_counts": "keyword", "client_key": "keyword", "client_name": "keyword", "client_type": "keyword", "clients": "long", "command": "keyword", "config_key": "keyword", "consecutive_errors": "long", "content": "keyword", "coords": "keyword", "current_leader_idx": "long", "delta": "long", "destination": "keyword", "dirty_state": "boolean", "event_type": "keyword", "exponent": "long", "failed_shutdown": "long", "format_errors": "keyword", "help_step": "keyword", "in_ride": "keyword", "invocation_type": "keyword", "job": "keyword", "json": {"current_ride_id": "keyword", "description": "keyword", "error": "keyword", "error_code": "keyword", "error_description": "keyword", "error_detail": "keyword", "error_message": "keyword", "ride_id": "keyword", "route_id": "keyword"}, "lifecycle_state": "keyword", "loop_name": "keyword", "lyft_id": "keyword", "marked": "long", "max_errors": "long", "maxed_rides": "keyword", "minimum_backoff": "float", "mode": "keyword", "new_ulu_rate_ms": "long", "num_users": "long", "number_to_add": "long", "offset": "long", "old_ride_id": "keyword", "old_ulu_rate_ms": "long", "partition_id": "long", "party_size": "long", "path_length": "long", "phone_number": "keyword", "pool_size": "long", "probability_modifier": "float", "reason": "keyword", "removed": "long", "request_type": "keyword", "replenish_count": "long", "replenish_queue": "keyword", "response": "keyword", "ride_count": "long", "ride_id": "keyword", "ride_ids": "keyword", "ride_status": "keyword", "ride_type": "keyword", "running_clients": "long", "service": "keyword", "sim_region": "keyword", "simulation": "keyword", "simulations": "keyword", "stack": "keyword", "state": "keyword", "status_code": "long", "stops": "keyword", "tier": "long", "total_partitions": "long", "transition": "keyword", "url": "keyword", "user_id": "keyword", "worker_shutdown": "boolean", "clients_running": "keyword", "clients_running_total": "keyword", "created_clients": "keyword", "finished_clients": "keyword", "shutdown_clients": "keyword", "client_list": "keyword", "clients_created": "keyword", "clients_removed": "keyword", "creation_deltas": "keyword", "running_count": "keyword", "shutdown_deltas": "keyword"}}}, "version": "1de646fc02f6d6c9b3a0975fb1c8711f42a25d13", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "simulator2": {"name": "simulator2", "description": "lyft simulation", "repository": "git@github.com:lyft/simulator2.git", "credentials": true, "containers": [{"name": "server", "command": "bash /code/simulator2/entrypoint.sh", "mounts": ["/var/run/docker.sock", "/srv/control"], "privileged": true}, {"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "privileged": true}], "groups": [{"name": "dev", "members": ["control.dev", "simulator2.legacy", "flyteredis.server", "matching.integration", "etaproxy.dev", "routingengine.dev"]}, {"name": "integration", "members": ["simulator2.dev"]}, {"name": "unit", "members": ["control.dev", "simulator2.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "simulator2.dev"}, {"name": "unit", "type": "execution", "group": "simulator2.unit", "container": "simulator2.legacy", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "simulator2-matching-integration", "type": "execution", "group": "simulator2.dev", "container": "simulator2.legacy", "command": "make test_simulator_matching_integration", "reports": {"junit": "build/integration.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#marketplace-health", "notification_overrides": {"deploy": {"slack": "#simulator-bots", "environments": ["canary", "production"]}, "test_failure": {"slack": "#simulator-bots", "environments": ["production"]}, "pr_merge": {"slack": "#simulator-bots"}}, "team_email": "sharedrides-health@lyft.com", "pagerduty_escalation_policy": "Shared Rides Health", "audit_blacklist": ["envoyAudit"], "languages": ["javascript", "python"], "image_type": "library", "service_tier": 3, "deploy": [{"name": "staging", "automatic": true, "legacy": true, "orca": []}, {"name": "production", "automatic": true, "legacy": true, "orca": []}], "envoy": {"profile": "python", "settings": {"services": [{"name": "simulator2"}], "common_settings": {"internal_hosts": {"matching": null, "etaproxy": null, "routingengine": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "version": "046353689e72ba00891d4837c75a7ba031b6658c", "images": [{"parent": {"name": "opsbase", "version": "2b5a476d830adfe9c66ec33dce50d14125b10d54", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "2b5a476d830adfe9c66ec33dce50d14125b10d54", "sub_image": null, "external": false}}, "simulatorui": {"name": "simulatorui", "description": "Simple UI to visualize results of Simulations", "repository": "git@github.com:lyft/simulatorui.git", "image_type": "service", "pagerduty_escalation_policy": "Shared Rides Health", "slack": "#simulator-bots", "team_email": "sharedrides-health@lyft.com", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 80}]}], "groups": [{"name": "dev", "members": ["control.dev", "simulatorui.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "simulatorui.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "simulatorui"}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "version": "1e2c6e33d4a31f5de4c4bd30ed354187143f1b97", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "simulatorworkflows": {"name": "simulatorworkflows", "description": "simulate marketplace", "repository": "git@github.com:lyft/simulatorworkflows.git", "image_type": "service", "service_tier": 3, "languages": ["python"], "credentials": true, "containers": [{"name": "legacy", "command": "/bin/bash", "provision": "echo \"what hath god wrought\""}], "groups": [{"name": "dev", "members": ["control.dev", "simulatorworkflows.legacy", "idl.server"]}, {"name": "integration", "members": ["simulatorworkflows.dev"]}], "tests": [{"name": "unit", "type": "execution", "group": "simulatorworkflows.dev", "container": "simulatorworkflows.legacy", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "command": "make test_unit"}, {"name": "simulation-accuracy", "type": "sharded", "group": "simulatorworkflows.dev", "container": "simulatorworkflows.legacy", "target": "tests/simulation_accuracy/", "autotrigger": false, "run_in_pr": false, "run_in_dev": false, "virtualenv": "service_venv", "shard_at": "file", "max_subset_retries": 0, "timeout": 180, "reports": {"junit": "build/integration.xml"}}, {"name": "simulation-v3-accuracy", "type": "sharded", "group": "simulatorworkflows.dev", "container": "simulatorworkflows.legacy", "target": "tests/simulation_accuracy_v3/", "autotrigger": false, "run_in_pr": false, "run_in_dev": false, "virtualenv": "service_venv", "shard_at": "file", "max_subset_retries": 0, "timeout": 1800, "reports": {"junit": "build/integration.xml"}}, {"name": "workflow_registration", "type": "execution", "group": "simulatorworkflows.dev", "container": "simulatorworkflows.legacy", "command": "make workflow_registration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#marketplace-health", "notification_overrides": {"deploy": {"slack": "#simulator-bots", "environments": ["canary", "production"]}, "test_failure": {"slack": "#simulator-bots", "environments": ["production"]}, "pr_merge": {"slack": "#simulator-bots"}}, "team_email": "sharedrides-health@lyft.com", "pagerduty_escalation_policy": "Shared Rides Health", "deploy": [{"name": "development", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}], "bake_time_minutes": 0}, {"name": "package_staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "automatic": false}], [{"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "package", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": false}]], "submit_queue": {"v3_auto_deploy": true}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "version": "a331e5f4c4029939a02f5d01f3241946f505f5e4", "images": [{"parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}}, "sloop": {"name": "sloop", "description": "Sloop is used to track and visualize the life of components in k8s", "repository": "git@github.com:lyft/sloop-private.git", "image_type": "service", "team_email": "compute-team@lyft.com", "slack": "#compute-bots", "pagerduty_escalation_policy": "Provisioning", "service_tier": 3, "deploy": [[{"name": "staging-lyftlearn", "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["lyftlearn"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["ml"]}, "interpolation_vars": {"cpu": 4, "memory": "10Gi"}}}, {"name": "staging-omnicron", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["omnicron"]}, "cluster_labels": {"cluster.lyft.net/role": ["omnicron"]}, "interpolation_vars": {"cpu": 4, "memory": "10Gi"}}}], {"name": "production", "legacy": false, "automatic": false}], "version": "995398ff02292bc0676c5162e0fd3251aebc0815", "images": [{"parent": {"name": "bionicbase", "version": "eaee436ed758c630fc3ec99b6a24c18c4e576c2b", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "eaee436ed758c630fc3ec99b6a24c18c4e576c2b", "sub_image": null, "external": false}}, "socialimpact": {"name": "socialimpact", "description": "Python service for social impact team projects", "repository": "git@github.com:lyft/socialimpact.git", "image_type": "service", "service_tier": 3, "slack": "#social-impact-dev", "team_email": "hlomax+socialimpact@lyft.com", "pagerduty_escalation_policy": "Social Impact", "languages": ["python", "bash"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "socialimpact.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "socialimpact.dev"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "unit", "type": "jailed", "target": "tests/unit", "virtualenv": "service_venv", "run_in_pr": true, "run_in_dev": true, "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "socialimpact.dev", "container": "socialimpact.legacy", "command": "make test_integration"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["translationdata"]}, "python": {"mypy": {"python_versions": ["3.6"], "exclude": ["ops"]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "socialimpact"}, {"name": "socialimpactbatch"}], "common_settings": {"local_service": {"enable_gzip": true}, "internal_hosts": {"places": null}, "external_hosts": {"dynamodb_iad": null}}}}, "version": "268a1b84b748b6f84d492862bf8e5480ce3eec6c", "images": [{"parent": {"name": "opsbase", "version": "8815879a92e14185f8f1df3b2f1a86629f86300f", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "8815879a92e14185f8f1df3b2f1a86629f86300f", "sub_image": null, "external": false}}, "sourcegraph": {"name": "sourcegraph", "description": "sourcegraph at Lyft", "repository": "git@github.com:lyft/sourcegraph.git", "docs": {"section": "Infrastructure"}, "slack": "#sourcegraph", "team_email": "devx-team@lyft.com", "image_type": "service", "service_tier": 3, "pagerduty_escalation_policy": "DevX", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "verifyuseremail", "command": "python -m sourcegraph.verifyuseremail"}], "tests": [{"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests"]}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "orca": [], "automatic": true, "links": [{"text": "Sourcegraph runbook", "url": "https://docs.lyft.net/eng/sourcegraph/runbook.html"}]}, {"name": "production", "orca": [{"iam_role": "orca-admin", "region": "iad"}], "kubernetes": {"enabled": true, "mode": "direct", "disable_interpolation": true, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "clusterLabels": {"cluster.lyft.net/role": ["infra"]}}, "legacy": false}], "languages": ["python"], "version": "bc2afe412377fd9bd196744ad79b6489186e3eb7", "images": [{"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}}, "spapi": {"name": "spapi", "description": "API for interacting with streamingplatform apps", "repository": "git@github.com:lyft/streamingplatform.git:spapi", "containers": [{"name": "dev", "command": "/bin/bash -c 'while true; do sleep 3600; done'"}, {"name": "service", "command": "dumb-init -- bin/api", "limits": {"memory": "16Gi", "cpu": 4}, "logging": {"format": "gojson"}}], "credentials": true, "logging": {"spapi": {"fields": {"user": "keyword", "cli_version": "keyword", "method": "keyword", "request_id": "keyword", "version": "keyword"}}}, "tests": [{"name": "unit", "type": "jailed", "command": "mvn -o test"}], "facets": [{"name": "main", "type": "service", "member": "spcli.service"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "bake_time_minutes": 1, "targets": {"facet": "main"}, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false, "automatic": false, "targets": {"facet": "main"}, "orca": [{"region": "iad"}]}], "languages": ["java"], "image_type": "service", "service_tier": 3, "slack": "#streaming-compute", "team_email": "streaming-compute@lyft.com", "pagerduty_escalation_policy": "devnull", "envoy": {"profile": "go", "settings": {"services": [{"name": "spapi"}], "common_settings": {}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ijava:java8.1614d45ed717846b2d159fad53e142a84d2f2139", "packages": ["openssh-client"]}}]}}, "version": "6986983ec56356c7f66ed46b90b9f7e7fb63864d", "images": [{"parent": {"name": "s2ijava", "version": "1614d45ed717846b2d159fad53e142a84d2f2139", "sub_image": "java8", "external": false}, "sub_image": null}], "parent": {"name": "s2ijava", "version": "1614d45ed717846b2d159fad53e142a84d2f2139", "sub_image": "java8", "external": false}}, "sparkinfraapi": {"name": "sparkinfraapi", "description": "Collection of libraries to for SparkInfra (Titan) APIs", "repository": "git@github.com:lyft/sparkinfraapi.git", "slack": "#spark-dev-bot", "team_email": "spark-dev@lyft.com", "pagerduty_escalation_policy": "Data Infra Compute", "service_tier": 2, "containers": [{"name": "code", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["sparkinfraapi.code"]}], "tests": [{"name": "unittest", "type": "execution", "group": "sparkinfraapi.dev", "container": "sparkinfraapi.code", "command": "mvn clean test -Dcheckstyle.skip=true"}], "deploy": [{"name": "development", "automatic": true, "legacy": true, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "languages": ["java"], "image_type": "service", "version": "283e8d164bcfc2e560743b7a006ab6972541d52c", "images": [{"parent": {"name": "java8", "version": "7ec648d70f5221be9c32f4b30889073683cd11a6", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "7ec648d70f5221be9c32f4b30889073683cd11a6", "sub_image": null, "external": false}}, "sparkmetrics": {"name": "sparkmetrics", "description": "JVM libraries to measure and emit apache spark job metrics", "repository": "git@github.com:lyft/sparkmetrics.git", "slack": "#spark-dev-bot", "team_email": "spark-dev@lyft.com", "credentials": true, "pagerduty_escalation_policy": "devnull", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build", "params": {"dockerfile": "Dockerfiles/sparkmetrics.dockerfile"}}]}}, "facets": [{"name": "fproduction", "member": "sparkmetrics.pushproduction", "type": "job"}], "containers": [{"name": "code", "command": "sleep infinity"}, {"name": "pushproduction", "command": "aws-okta exec zimride-sudo-developer -- aws s3 cp spark-stage-metrics/target/spark-stage-metrics-1.0.0.1.jar s3://lyft-infra/datainfra/dist/spark/deps/sparkmetrics/"}], "groups": [{"name": "dev", "members": ["sparkmetrics.code"]}], "tests": [{"name": "unittest", "type": "execution", "group": "sparkmetrics.dev", "container": "sparkmetrics.code", "command": "mvn test surefire-report:report -Dcheckstyle.skip=true"}, {"name": "integrationtest", "type": "execution", "group": "sparkmetrics.dev", "container": "sparkmetrics.code", "command": "mvn test-compile failsafe:integration-test failsafe:verify -Dcheckstyle.skip=true"}, {"name": "checkstyle", "type": "execution", "group": "sparkmetrics.dev", "container": "sparkmetrics.code", "command": "mvn checkstyle:check"}], "deploy": [{"name": "development", "automatic": true, "legacy": false}, {"name": "production", "automatic": true, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "fproduction"}], "orca": [{"region": "iad"}]}], "languages": ["java"], "image_type": "tool", "version": "cf29396fe47dbd505bd67f9697c6667f274999bb", "images": [{"parent": {"name": "java8", "version": "e9e63f36a6c9539f0c410ab92de2f55f242a45a3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "e9e63f36a6c9539f0c410ab92de2f55f242a45a3", "sub_image": null, "external": false}}, "sparkonk8scontainers": {"name": "sparkonk8scontainers", "description": "spark", "repository": "git@github.com:lyft/spark-on-k8s-containers.git", "languages": ["python"], "credentials": true, "image_type": "service", "service_tier": 2, "slack": "#spark-dev-bot", "team_email": "spark-dev@lyft.com", "pagerduty_escalation_policy": "Data Infra Compute", "containers": [{"name": "spin", "command": "/bin/bash", "provision": "echo \"what hath god wrought\""}], "groups": [{"name": "dev", "members": ["control.dev", "sparkonk8scontainers.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "register_stubs", "group": "sparkonk8scontainers.dev", "container": "sparkonk8scontainers.spin", "type": "execution", "command": "make register_stubs"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "development", "automatic": true, "legacy": true, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "version": "e424a856ae3fbea59586d5a56825fd2d32a007fb", "images": [{"parent": {"name": "flytesparkexperimentalbase", "version": "86c6e7084a830d6092b687ef3cd82de53ce62721", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "flytesparkexperimentalbase", "version": "86c6e7084a830d6092b687ef3cd82de53ce62721", "sub_image": null, "external": false}}, "sparkonk8sinfra": {"name": "sparkonk8sinfra", "description": "Spark Infra configuration and scripts", "repository": "git@github.com:lyft/spark-on-k8s-infra.git", "slack": "#spark-dev-bot", "team_email": "spark-dev@lyft.com", "credentials": false, "service_tier": 2, "pagerduty_escalation_policy": "Spark Infra", "image_type": "service", "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "development", "command": "/code/spark-on-k8s-infra/entrypoint.sh"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "spark", "cluster.lyft.net/environment": "production", "cluster.lyft.net/cluster": "sparkstaging"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "titan"}, "path": "environment/staging/sparkstaging"}}, {"name": "production", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false}, [{"name": "production-sparkadhoc1", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "spark", "cluster.lyft.net/environment": "production", "cluster.lyft.net/cluster": "sparkadhoc1"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "titan"}, "path": "environment/production/sparkadhoc1"}}, {"name": "production-sparkadhoc2", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "spark", "cluster.lyft.net/environment": "production", "cluster.lyft.net/cluster": "sparkadhoc2"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "titan"}, "path": "environment/production/sparkadhoc2"}}, {"name": "production-sparksched1", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "spark", "cluster.lyft.net/environment": "production", "cluster.lyft.net/cluster": "sparksched1"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "titan"}, "path": "environment/production/sparksched1"}}, {"name": "production-sparksched2", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "spark", "cluster.lyft.net/environment": "production", "cluster.lyft.net/cluster": "sparksched2"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "titan"}, "path": "environment/production/sparksched2"}}, {"name": "production-sparksched3", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "spark", "cluster.lyft.net/environment": "production", "cluster.lyft.net/cluster": "sparksched3"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "titan"}, "path": "environment/production/sparksched3"}}, {"name": "production-sparkfininfra1", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "spark", "cluster.lyft.net/environment": "production", "cluster.lyft.net/cluster": "sparkfininfra1"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "titan"}, "path": "environment/production/sparkfininfra1"}}, {"name": "production-sparkinfraprod", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "spark", "cluster.lyft.net/environment": "production", "cluster.lyft.net/cluster": "sparkinfraprod"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "titan"}, "path": "environment/production/sparkinfraprod"}}]], "languages": ["python"], "version": "43c6b553d1765138d3444529ebdd7de9021c8429", "images": [{"parent": {"name": "python", "version": "b27288a168ca4afb15e4e85893948cdfac51b556", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "python", "version": "b27288a168ca4afb15e4e85893948cdfac51b556", "sub_image": null, "external": false}}, "sparkrider": {"name": "sparkrider", "description": "Rider attributes using Spark pipeline", "repository": "git@github.com:lyft/sparkrider.git", "slack": "#data-platform-dev", "team_email": "data-eng@lyft.com", "pagerduty_escalation_policy": "Data Platform Tools", "image_type": "flyteworkflow", "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "sparkrider.spin"]}], "tests": [{"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "workflow_registration", "type": "execution", "group": "sparkrider.dev", "container": "sparkrider.spin", "command": "make register_for_pr"}], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "register_development", "legacy": true, "automatic": true, "role": "data-deploy", "orca": []}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "register_staging", "legacy": true, "automatic": true, "role": "data-deploy", "orca": []}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "register_production", "role": "data-deploy", "automatic": true, "legacy": true, "orca": []}], "version": "dcb4aa196ae90ad3047e7889394dcfa7bfd55b1f", "images": [{"parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}}, "sparksession": {"name": "sparksession", "description": "A spark session pipeline", "repository": "git@github.com:lyft/sparksession.git", "image_type": "service", "languages": ["python"], "credentials": true, "containers": [{"name": "spin", "command": "/code/sparksession/entrypoint.sh", "provision": "echo \"Started the entrypoint\"", "start_time": 300, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "sparksession.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "sparksession.dev", "container": "sparksession.spin", "command": "make release_current_env"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "team_email": "data-eng@lyft.com", "pagerduty_escalation_policy": "Sessions2_0", "slack": "#data-platform-dev", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "service_tier": 3, "version": "63fe16be33105473e03f3721a6c375f24a56d404", "images": [{"parent": {"name": "flytesparkbase", "version": "ea8b691fef3dc56fef3b71d3c6c54a28116b1635", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "flytesparkbase", "version": "ea8b691fef3dc56fef3b71d3c6c54a28116b1635", "sub_image": null, "external": false}}, "spcli": {"name": "spcli", "description": "CLI for interacting with streamingplatform apps", "repository": "git@github.com:lyft/streamingplatform.git:spcli", "containers": [{"name": "run", "command": "bin/sp"}, {"name": "dev", "command": "/bin/bash -c 'while true; do sleep 3600; done'"}], "credentials": true, "tests": [{"name": "unit", "type": "jailed", "command": "mvn -o test"}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true, "mode": "direct", "cluster_tolerations": {"cluster.lyft.net/restricted": "flink"}}, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false, "automatic": false, "kubernetes": {"enabled": true, "mode": "direct"}, "orca": [{"region": "iad"}]}], "languages": ["java"], "image_type": "tool", "service_tier": 3, "slack": "#streaming-compute", "team_email": "streaming-compute@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ijava:java8.1614d45ed717846b2d159fad53e142a84d2f2139", "packages": ["openssh-client"]}}]}}, "version": "426d6cb371458e4c892de13a9b9a7afcb76ebffb", "images": [{"parent": {"name": "s2ijava", "version": "1614d45ed717846b2d159fad53e142a84d2f2139", "sub_image": "java8", "external": false}, "sub_image": null}], "parent": {"name": "s2ijava", "version": "1614d45ed717846b2d159fad53e142a84d2f2139", "sub_image": "java8", "external": false}}, "speedobsv3": {"name": "speedobsv3", "description": "V3 streaming application for generating speed observations in realtime", "repository": "git@github.com:lyft/etastreaming.git:speedobsv3", "slack": "#eta-routenetworkgen", "team_email": "eta-service-eng@lyft.com", "pagerduty_escalation_policy": "Routing", "languages": ["java", "bash"], "image_type": "flinkjob", "service_tier": 1, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "speedobsv3.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "speedobsv3.dev"}, {"name": "integration", "type": "execution", "group": "speedobsv3.dev", "container": "speedobsv3.legacy", "command": "mvn verify -P '!disable-integration-tests'"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": false}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "streamingplatform": {"version": "1.2-SNAPSHOT", "flink_config_overrides": [{"key": "state.backend", "value": "filesystem"}], "jobmanagers": [{"name": "speedobsv3", "development": {"num_taskmanagers": 2, "taskmanager": {"num_slots": 2}}, "staging": {"num_taskmanagers": 2, "taskmanager": {"num_slots": 16}}, "production": {"num_taskmanagers": 12, "taskmanager": {"num_slots": 16}}, "jobs": [{"name": "speedobsv3", "jar": "speedobsv3-1.0.0-SNAPSHOT.jar", "class": "com.lyft.app.SpeedObservationsV3JobDriver", "description": "V2 streaming application for generating speed observations in realtime", "development": {"parallelism": 4}, "staging": {"parallelism": 32}, "production": {"parallelism": 192}}]}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "speedobsv3"}, {"name": "speedobsv3jobmanager"}, {"name": "speedobsv3taskmanager"}], "common_settings": {"external_hosts": {"kinesis_iad": null, "firehose_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": "precommit"}}]}}, "version": "6d53661184b91cb17df06eb279de0edd0e74773a", "images": [{"parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}}, "speedprofilev3": {"name": "speedprofilev3", "description": "V3 Streaming service for generating segment speed profiles in realtime", "repository": "git@github.com:lyft/etastreaming.git:speedprofilev3", "slack": "#eta-routenetworkgen", "team_email": "eta-service-eng@lyft.com", "pagerduty_escalation_policy": "Routing", "languages": ["bash", "java"], "image_type": "flinkjob", "service_tier": 1, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "speedprofilev3.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "speedprofilev3.dev"}, {"name": "integration", "type": "execution", "group": "speedprofilev3.dev", "container": "speedprofilev3.legacy", "command": "mvn verify -P '!disable-integration-tests'"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": false}, {"name": "production", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "streamingplatform": {"version": "1.2-SNAPSHOT", "flink_config_overrides": [{"key": "state.backend", "value": "filesystem"}], "jobmanagers": [{"name": "speedprofilev3", "development": {"num_taskmanagers": 2, "taskmanager": {"num_slots": 2}}, "staging": {"num_taskmanagers": 2, "taskmanager": {"num_slots": 16, "ebsvolume": {"mnt_name": "sdb", "size_gb": 3200, "volume_type": "st1"}}}, "production": {"num_taskmanagers": 12, "taskmanager": {"num_slots": 16, "ebsvolume": {"mnt_name": "sdb", "size_gb": 3200, "volume_type": "st1"}}}, "jobs": [{"name": "speedprofilev3", "jar": "speedprofilev3-1.0.0-SNAPSHOT.jar", "class": "com.lyft.app.SpeedProfileV3JobDriver", "description": "V2 Streaming service for generating segment speed profiles in realtime", "development": {"parallelism": 4}, "staging": {"parallelism": 32}, "production": {"parallelism": 192}}]}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "speedprofilev3"}, {"name": "speedprofilev3jobmanager"}, {"name": "speedprofilev3taskmanager"}], "common_settings": {"external_hosts": {"kinesis_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": "precommit"}}]}}, "version": "9a7fbfe0923f0ff5ad472617d7a3cf2c7417ec16", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "sphinxeditongithub": {"parent": {"version": "8db22cbf55d8d876836e6314dbc98db604819a69", "name": "pythonlibrary", "buildargs": [], "external": false}, "tests": [{"type": "jailed", "command": "make lint", "name": "lint"}], "name": "sphinxeditongithub", "repository": "git@github.com:lyft/sphinx-editongithub.git", "deploy": [{"role": "lyftpypi-staging-iad-deploy", "legacy": true, "automatic": true, "name": "staging", "orca": [{"region": "iad"}]}, {"role": "lyftpypi-production-iad-deploy", "legacy": true, "automatic": true, "name": "production", "orca": [{"region": "iad"}]}], "image_type": "library", "languages": ["python"], "version": "a2304b0741d01a27eed1c626035ae7280f125291", "credentials_legacy": false, "credentials": true, "containers": [{"command": "echo \"Hello sphinxeditongithub\"", "name": "container"}], "description": "sphinx extension for edit on github"}, "spots": {"name": "spots", "description": "API for accessing spots data", "repository": "git@github.com:lyft/spots.git", "slack": "#places", "team_email": "spots-places-eng@lyft.com", "pagerduty_escalation_policy": "Places", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit", "packages": ["g++", "libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "docker_build", "params": {"sub_image": "flyte"}}]}}, "containers": [{"name": "flyte", "start_time": 60, "command": "/bin/bash", "provision": "echo \"flyte\"", "sub_image": "flyte"}, {"name": "flyterelease", "start_time": 60, "command": "service_venv python flyte_release.py", "provision": "echo \"flyterelease\"", "sub_image": "flyte"}, {"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/spots", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "spots.legacy"]}, {"name": "service_group", "members": ["spots.legacy"]}, {"name": "integration", "members": ["spots.dev", "spots.flyte"]}], "tests": [{"name": "startup", "type": "startup", "group": "spots.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "spots.integration", "command": "service_venv python3 -m pytest --junit-xml=build/int.xml tests/integration", "container": "spots.legacy", "reports": {"junit": "build/int.xml"}}, {"name": "spark_integration", "type": "execution", "group": "spots.integration", "command": "service_venv python3 -m pytest tests/spark_integration", "container": "spots.flyte", "sub_image": "flyte"}, {"name": "workflow_registration", "type": "execution", "group": "spots.integration", "container": "spots.flyte", "command": "make register_for_pr", "sub_image": "flyte"}], "facets": [{"name": "main", "member": "spots.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls"], "autoscaling": {"criteria": {"cpu_target": 25}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 49}}}}, {"name": "canary", "member": "spots.service", "type": "service", "canary": true, "environment_files": ["ops/config/pillar/env.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "flyterelease", "member": "spots.flyterelease", "type": "job"}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "20:00 America/New_York"}, "deploy": [[{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "staging-flyte", "automatic": true, "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "flyterelease"}]}], [{"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-flyte", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "flyterelease"}]}], [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "spots"}], "common_settings": {"internal_hosts": {"places": null, "regions": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}}}}, "logging": {"spots": {"fields": {"request": {"lat": "float", "lng": "float", "radius_m": "integer", "release_version": "keyword", "source": "keyword", "limit": "integer", "require_segment_info": "boolean", "ranker": "keyword", "stop_type": "keyword"}, "region": "keyword", "reason": "keyword"}}}, "pulldeploy_components": {"data": ["marketplaceconfig", "regioncfgdata"]}, "configsets": ["atlantisdata"], "version": "61abb71b6247c484d46f7a9d098a75dbeb810c28", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "py37", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "flytesparkbase", "version": "ea8b691fef3dc56fef3b71d3c6c54a28116b1635", "sub_image": null, "external": false}, "sub_image": "flyte"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "spzookeeper": {"name": "spzookeeper", "description": "zookeeper for streaming platform", "repository": "git@github.com:lyft/streamingplatform.git:spzookeeper", "report_ci": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60}], "groups": [{"name": "dev", "members": ["control.dev", "spzookeeper.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "spzookeeper.dev"}], "slack": "#streaming", "team_email": "streaming@lyft.com", "pagerduty_escalation_policy": "Streaming", "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "languages": ["java", "bash"], "image_type": "service", "version": "7e38dc6b4becc23f0102dbb649cc70b065e18d49", "images": [{"parent": {"name": "opsbase", "version": "18643d2254ee65a9c9e6815d3e6c65fe415d9ccc", "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "18643d2254ee65a9c9e6815d3e6c65fe415d9ccc", "external": false}}, "sqs": {"name": "sqs", "description": "local development version of sqs", "repository": "git@github.com:lyft/containers.git:sqs", "containers": [{"name": "server", "command": "/code/containers/sqs/bin/entrypoint.sh", "start_phase": "parallel_storage", "start_time": 120, "exports": [{"name": "api", "start_time": 30, "port": 80}]}], "groups": [{"name": "dev", "members": ["control.dev", "sqs.server"]}], "tests": [{"name": "start", "type": "startup", "group": "sqs.dev"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false}, {"name": "canary", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false}], "image_type": "tool", "languages": ["bash", "python"], "slack": "#ds-aws-pod", "team_email": "datastore-team@lyft.com", "version": "acc4d674f0a12196941783fbaf8dd5be61ddd3e0", "images": [{"parent": {"name": "bionicbase", "version": "38f8acd74c5c0094f4cd2a232c3b90c7ad18396f", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "38f8acd74c5c0094f4cd2a232c3b90c7ad18396f", "sub_image": null, "external": false}}, "sshcache": {"name": "sshcache", "description": "Service to generate cache files (passwd, group, shadow) for ssh permissions", "repository": "git@github.com:lyft/sshcache.git", "slack": "#security", "team_email": "security-engineering@lyft.com", "pagerduty_escalation_policy": "Security", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "job", "command": "service_venv python manage.py generate_cache", "workdir": "/code/sshcache", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/sshcache", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "sshcache.legacy", "team.dev"]}, {"name": "service_group", "members": ["sshcache.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "sshcache.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "sshcache.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "canary", "member": "sshcache.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}, {"name": "cronjob", "member": "sshcache.job", "type": "cron", "schedule": "*/5 * * * *"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "cronjob"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "cronjob"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "sshcache"}], "common_settings": {"internal_hosts": {"team": null}}}}, "version": "f0910306ee667a11ad547db17f638cf1dbdd8cf7", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "stashdblib": {"name": "stashdblib", "description": "stashdblib", "repository": "git@github.com:lyft/stashdblib.git", "image_type": "service", "service_tier": 1, "languages": ["go"], "report_ci": true, "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "stashdblib.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "stashdblib.dev"}, {"name": "unit", "type": "restricted", "group": "stashdblib.dev", "container": "stashdblib.legacy", "command": "make test_unit", "whitelist": ["stashdblib-legacy.dev.lyft.net.", "stashdblib-development-iad-onebox.lyft.net."]}, {"name": "integration", "type": "execution", "group": "stashdblib.dev", "container": "stashdblib.legacy", "command": "make integration"}], "slack": "#ds-stash-pod", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "datastore-team@lyft.com", "pagerduty_escalation_policy": "devnull", "deploy": [{"name": "development", "legacy": false}, {"name": "staging", "legacy": false}, {"name": "canary", "legacy": false}, {"name": "production", "legacy": false}], "version": "3afe0018ca8acf47373d1d96dab98fa50ee23671", "images": [{"parent": {"name": "opsbase", "version": "8bf3478d15bb607bbaaa6fa35e0332734c993103", "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "8bf3478d15bb607bbaaa6fa35e0332734c993103", "external": false}}, "stashint": {"name": "stashint", "description": "Stash design tool", "repository": "git@github.com:lyft/stashint.git", "slack": "#design-systems-bots", "team_email": "design-systems@lyft.com", "pagerduty_escalation_policy": "Design Systems Web", "image_type": "service", "service_tier": 3, "languages": ["javascript"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093"}}, {"name": "s2i", "params": {"builder": "lyft/s2inode:service.5f32eb41536e7af59070375a897600aacb3e8066", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "cdnupload", "command": "/code/stashint/cdn-upload", "sub_image": "k8s"}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "stashint.legacy"]}, {"name": "service_group", "members": ["stashint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "stashint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "facets": [{"name": "assets", "member": "feexample.cdnupload", "type": "job"}, {"name": "main", "member": "stashint.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "stashint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null}}}}, "version": "2316dad9898c0afdf8d56463b209fd26bd66eb99", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2inode", "version": "5f32eb41536e7af59070375a897600aacb3e8066", "sub_image": "service", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "static": {"name": "static", "description": "static", "repository": "git@github.com:lyft/static.git", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "static.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "static.dev"}, {"name": "lint", "type": "execution", "group": "static.dev", "container": "static.legacy", "command": "make test_lint"}], "slack": "#frontend-bots", "team_email": "webux-eng@lyft.com", "pagerduty_escalation_policy": "Web UX", "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "production", "legacy": true, "automatic": true}], "languages": ["bash", "javascript"], "image_type": "tool", "service_tier": 1, "version": "03b7a9a353106a0a57b6eb224d64db0c42703a69", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "staticmaps": {"name": "staticmaps", "description": "Server side rendering of static maps", "repository": "git@github.com:lyft/staticmaps.git", "slack": "#base-maps-bot", "team_email": "basemap-eng@lyft.com", "pagerduty_escalation_policy": "basemap-service", "image_type": "service", "service_tier": 3, "languages": ["bash", "javascript"], "credentials": false, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "8.12.0-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "staticmaps.legacy", "maptiles.dev"]}, {"name": "service_group", "members": ["staticmaps.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "staticmaps.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "staticmaps.dev", "container": "staticmaps.legacy", "command": "make test_coverage"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "staticmaps"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"maptiles": null, "acl": null, "privacyaudit": null}}}}, "version": "6cc7dc4a468bfd499e65deea7eff1b9f0c862183", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "stationlogs": {"name": "stationlogs", "description": "Receive station's logs via https", "repository": "git@github.com:lyft/stationlogs.git", "slack": "#lbs-deploy", "team_email": "lbs-sta-team@lyft.com", "pagerduty_escalation_policy": "LBS BSS", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.81f3a62b033eff99133851326875cb87f53b6de1", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn stationlogs.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/stationlogs", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "stationlogs.legacy"]}, {"name": "service_group", "members": ["stationlogs.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "stationlogs.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "stationlogs.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "stationlogs.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "deploy_settings": {"window_start": "09:00 America/Montreal", "window_end": "16:00 America/Montreal"}, "envoy": {"profile": "python", "settings": {"services": [{"name": "stationlogs"}]}}, "logging": {"stationlogs": {"fields": {"LAST_STAT": "keyword", "NETCELLID": "keyword", "NETLOC": "keyword", "RSRP": "keyword", "RSRQ": "keyword", "SYSTEMTIME": "keyword", "UPTIME": "keyword", "service": "keyword", "tenant": "keyword", "terminal_tag": "keyword"}}}, "version": "d87eb81fca53f95a677c6dc984551bdcc5eb4d56", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "81f3a62b033eff99133851326875cb87f53b6de1", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "stations": {"name": "stations", "repository": "git@github.com:lyft/stations.git", "description": "Service for management of rideable stations", "service_tier": 1, "team_email": "lbs-stations-support@lyft.com", "pagerduty_escalation_policy": "LBS - Stations Service", "slack": "#lbs-deploy", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- stations noworker", "workdir": "/code/stations", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "1024Mi"}, "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600}, {"name": "updatestationscache", "command": "dumb-init -- stations", "workdir": "/code/stations", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi", "environment": {"development": {"memory": "512Mi", "cpu": 1}}}, "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "redis.dev", "stations.legacy", "iotgateway.dev"]}, {"name": "integration", "members": ["control.dev", "dynamodb.dev", "redis.dev", "stations.dev", "bss.dev", "iotgateway.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "stations.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "stations.integration", "container": "stations.legacy", "command": "make integration", "autotrigger": false}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "stations.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "stations.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}, {"name": "updatestationscacheworkers", "member": "stations.updatestationscache", "type": "worker", "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}, {"facet": "updatestationscacheworkers"}]}, {"name": "canary", "legacy": false, "automatic": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "updatestationscacheworkers"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "updatestationscacheworkers"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "updatestationscacheworkers"}]}], "deploy_settings": {"window_start": "08:00 America/New_York", "window_end": "18:00 America/New_York"}, "envoy": {"profile": "go", "settings": {"services": [{"name": "stations"}], "common_settings": {"local_service": {"grpc_streaming": true}, "internal_hosts": {"stations": null, "lastmile": null, "tcs": null, "iotgateway": null}, "external_hosts": {"dynamodb_iad": null}, "redis_clusters": {"stations": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}, "override_settings": [{"services": [{"name": "stations", "service_instance": "development"}], "settings": {"internal_hosts": {"bss": null}}}]}}, "logging": {"stations": {"fields": {"requestId": "keyword", "station_id": "keyword", "tenant": "keyword", "timestamp": "date", "rideable_name": "keyword", "service": "keyword", "method": "keyword", "worker": "keyword", "region": "keyword"}}}, "version": "e03844530172842f73dec6f8aa928e4797500c2b", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "statscache": {"name": "statscache", "description": "statscache", "repository": "git@github.com:lyft/statscache.git", "slack": "#compute-bots", "slack_deploy_notification_environments": ["canary", "production"], "team_email": "compute-team@lyft.com", "pagerduty_escalation_policy": "Provisioning", "image_type": "service", "service_tier": 3, "languages": ["go"], "credentials": false, "docs": {"path": ".", "section": "Infrastructure"}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:ab0c2d7e08a25456fad8c44ad7636283eedf04d9", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- statscache", "workdir": "/code/statscache", "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "statscache.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "statscache.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "coverage_files", "type": "jailed", "run_in_pr": false, "command": "make coverage_files", "reports": {"cobertura": "build/coverage.xml"}}], "facets": [{"name": "main", "type": "service", "member": "statscache.service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}}}}, {"name": "canary", "type": "service", "member": "statscache.service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}}}, "canary": true}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": false}, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}, {"name": "canary", "legacy": true, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": false}, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": false}}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": false}}], {"name": "production", "legacy": true, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": false}}], "envoy": {"profile": "go", "settings": {"services": [{"name": "statscache"}], "common_settings": {"redis": {"statscachemultiredis": {"port": 6380}}}}}, "version": "eba301831cdbe45e4ff38f9b016f98f3761d8d33", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "ab0c2d7e08a25456fad8c44ad7636283eedf04d9", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "statsd": {"name": "statsd", "description": "statsd service", "repository": "git@github.com:lyft/opsstatsd.git", "credentials": false, "restricted_ssh": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "statsd", "port": 8127}, {"name": "statsite", "port": 8128}]}, {"name": "agent", "command": "/code/opsstatsd/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "network": "host", "exports": [{"name": "statsrelay", "port": 8125}, {"name": "statsite", "port": 8123}]}], "groups": [{"name": "dev", "members": ["control.dev", "statsd.legacy"]}, {"name": "sidecar", "members": ["control.dev", "statsd.agent"]}], "tests": [{"name": "start", "type": "startup", "group": "statsd.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "python", "type": "jailed", "command": "make test_python"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#obs-bots"}, "pr_merge": {"slack": "#obs-bots"}}, "team_email": "observability-team@lyft.com", "pagerduty_escalation_policy": "Observability", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}, {"region": "sfo"}], "automatic": true}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}], {"name": "production", "legacy": true, "orca": [{"region": "iad"}, {"region": "sfo"}]}], "audit_blacklist": ["envoyAudit"], "languages": ["python"], "image_type": "service", "service_tier": 1, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "version": "23ba1b2fd35f24d026bc0edb10e66c51a9be6ffb", "images": [{"parent": {"name": "opsbase", "version": "7217bb50d71d786ef58610aafb6403846a9e518b", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "7217bb50d71d786ef58610aafb6403846a9e518b", "sub_image": null, "external": false}}, "storagecatalog": {"name": "storagecatalog", "description": "Datastore metadata service", "repository": "git@github.com:lyft/storagecatalog.git", "slack": "#ds-aws-pod", "team_email": "ds-aws@lyft.com", "pagerduty_escalation_policy": "DS AWS", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/storagecatalog", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "storagecatalog.legacy", "minio.server"]}, {"name": "integration", "members": ["storagecatalog.dev"]}, {"name": "service_group", "members": ["storagecatalog.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "storagecatalog.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "storagecatalog.integration", "virtualenv": "service_venv", "container": "storagecatalog.legacy", "command": "make test_integration", "reports": {"junit": "build/integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "storagecatalog.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "storagecatalog.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "storagecatalog"}], "common_settings": {"external_hosts": {"s3_iad": null}}}}, "version": "0569347d96dddc4809010fc05d2c83860d5bf387", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "stracer": {"name": "stracer", "description": "State analytics charts for state machine driven UI's", "repository": "git@github.com:lyft/stracer.git", "slack": "#state-analytics-charts", "team_email": "jpadilla@lyft.com", "pagerduty_escalation_policy": "stracer-eng", "image_type": "service", "service_tier": 2, "languages": ["bash", "javascript"], "credentials": false, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "stracer.legacy"]}, {"name": "service_group", "members": ["stracer.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "stracer.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "stracer"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null}}}}, "version": "3e9b8c2a32053a19482e208df9d189451198a56c", "images": [{"parent": {"name": "opsbase", "version": "a5f506e642e87706bc86124d006587f56a81bc83", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "a5f506e642e87706bc86124d006587f56a81bc83", "sub_image": null, "external": false}}, "streamcheck": {"name": "streamcheck", "description": "streamcheck", "repository": "git@github.com:lyft/streamcheck.git", "credentials": true, "image_type": "service", "service_tier": 2, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "2Gi"}}], "facets": [{"name": "main", "member": "streamcheck.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 50}}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "streamcheck.legacy"]}], "configsets": ["zippyconfigdata"], "tests": [{"name": "startup", "type": "startup", "group": "streamcheck.dev"}, {"name": "unit", "type": "jailed", "command": "service_venv python3 -bb -m pytest tests/unit"}, {"name": "integration", "type": "execution", "group": "streamcheck.dev", "container": "streamcheck.legacy", "command": "service_venv python3 -bb -m pytest tests/integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#streaming-pubsub", "team_email": "dataingest@lyft.com", "pagerduty_escalation_policy": "Streaming-PubSub", "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}], "languages": ["python"], "envoy": {"profile": "python", "settings": {"services": [{"name": "streamcheck"}, {"name": "streamcheck_batch_processor"}], "common_settings": {"external_hosts": {"firehose_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "precommit", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "logging": {"streamcheck": {"fields": {"missing_steps": "keyword", "pipeline_path_observed": "keyword", "entry_time": "date", "event_id": "keyword", "steps_observed": "keyword", "pipeline_name": "keyword", "event_name": "keyword"}}}, "version": "b8e43a49cdf2c5bf637fd8ba42d6ba4d46f7daa9", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "streamfeatures": {"name": "streamfeatures", "description": "Streaming jobs to populate features in dsfeatures service", "repository": "git@github.com:lyft/streamingfeatures.git", "report_ci": true, "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "dsfeatures.dev", "streamfeatures.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "streamfeatures.dev"}, {"name": "unit", "type": "execution", "group": "streamfeatures.dev", "command": "make test_unit", "container": "streamfeatures.legacy", "whitelist": ["streamfeatures-legacy.dev.lyft.net.", "streamfeatures-development-iad-onebox.lyft.net."]}], "slack": "#ds-platform", "team_email": "ds-platform@lyft.com", "pagerduty_escalation_policy": "DS Platform", "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "languages": ["java", "bash"], "image_type": "service", "streamingplatform": {"jobmanagers": [{"name": "streamfeatures", "development": {"num_taskmanagers": 1, "taskmanager": {"num_slots": 4}}, "staging": {"num_taskmanagers": 1, "taskmanager": {"num_slots": 12}}, "production": {"num_taskmanagers": 75, "taskmanager": {"num_slots": 12}}, "jobs": [{"name": "streamfeatures", "jar": "streamfeatures-1.0.0-SNAPSHOT.jar", "class": "com.lyft.dsp.Dryft", "description": "Real-time Data Processing", "development": {"parallelism": 4}, "staging": {"parallelism": 12}, "production": {"parallelism": 900}}]}]}, "version": "3f2e214253cb3e31a5bca744ac8efcd7eca2df54", "images": [{"parent": {"name": "opsbase", "version": "d2f6fcfc99a07c31c3d66b7185c2d10020e87469", "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "d2f6fcfc99a07c31c3d66b7185c2d10020e87469", "external": false}}, "streamingest": {"name": "streamingest", "description": "streamingest", "repository": "git@github.com:lyft/streamingest.git", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "analyticsingest.dev", "fanner.dev", "kinesis.server", "dynamodb.server", "postgresql.server", "streamingest.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "streamingest.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "streamingest.dev", "container": "streamingest.legacy", "schedule": "0 0-23 * * *", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#zippy-alerts", "team_email": "zippy-dev@lyft.com", "pagerduty_escalation_policy": "Zippy", "deploy": [{"name": "staging", "legacy": true, "automatic": false, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, [{"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "test_logs": ["/var/log/lyft/ingest-kcl-stderr.log"], "credentials": true, "languages": ["python"], "image_type": "service", "service_tier": 1, "envoy": {"profile": "python", "settings": {"services": [{"name": "streamingest"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"georegions": null}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}}}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "logging": {"streamingest": {"fields": {"shard_info": "keyword", "reason": "keyword", "event": "keyword", "attempt_num": "long", "failed_record_count": "long", "event_name": "keyword"}}}, "version": "d1bc371d5cba9357d031f2c55369f43f7a18c269", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "streamingforecaster": {"name": "streamingforecaster", "description": "Event-Driven forecast generation service", "repository": "git@github.com:lyft/streamingforecaster.git", "credentials": false, "team_email": "forecasting-team@lyft.com", "slack": "#forecasting-bots", "pagerduty_escalation_policy": "Forecasting", "service_tier": 2, "image_type": "service", "languages": ["bash", "java"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2istreamingplatformflink:sp20.f2556c4c9097b89daf9b854ade489f42003b63f1"}}, {"name": "s2i", "params": {"builder": "lyft/seldoncontainer:a9b59eaf36e50448b1687331df48d991f7cbddaa", "sub_image": "rollingmean", "buildargs": ["TEAM_NAME=forecasting", "MODEL_NAME=RollingMean", "MODEL_VERSION=0.0.1", "MODEL_WORKERS=6"]}}, {"name": "s2i", "params": {"builder": "lyft/seldoncontainer:0df3d27b84b5e24add0e009b81d82b3387b0b1e8", "sub_image": "autopilot", "buildargs": ["TEAM_NAME=forecasting", "MODEL_NAME=RealTimeForecastV0", "MODEL_VERSION=test"]}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "streamingforecaster"}, {"name": "streamingforecasterjobmanager"}, {"name": "streamingforecastertaskmanager"}, {"name": "streamingforecasterrollingmean"}, {"name": "streamingforecasterautopilot"}], "common_settings": {"internal_hosts": {"demand": null, "dispatch": null, "modelconfig": null, "pricing": null, "rides": null, "routes": null, "shorttermforecaster": null, "viewport": null, "modelexecforecasting": null, "streamingforecasterrollingmean": null, "streamingforecasterautopilot": null}}, "override_settings": [{"services": [{"name": "streamingforecasterrollingmean"}], "settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 5000}}, "hosts_url": "http://127.0.0.1:8080"}, "health_check_endpoint": "/health/ping"}}, {"services": [{"name": "streamingforecasterautopilot"}], "settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 5000}}, "hosts_url": "http://127.0.0.1:8080"}, "health_check_endpoint": "/health/ping"}}]}}, "containers": [{"name": "service", "command": "/docker-entrypoint.sh local"}, {"name": "rollingmean", "command": "/docker-entrypoint.sh", "sub_image": "rollingmean", "limits": {"cpu": 3, "memory": "6Gi"}, "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/health/ping", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 30}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/health/ping", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 30}}, {"name": "autopilot", "command": "/docker-entrypoint.sh", "sub_image": "autopilot", "limits": {"cpu": 3, "memory": "6Gi"}, "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/health/ping", "port": 8080}, "initial_delay_seconds": 120, "timeout_seconds": 60}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/health/ping", "port": 8080}, "initial_delay_seconds": 120, "timeout_seconds": 60}}], "facets": [{"name": "rollingmean", "member": "streamingforecaster.rollingmean", "type": "service", "envoy_service": "streamingforecasterrollingmean", "autoscaling": {"criteria": {"cpu_target": 65}, "environment": {"staging": {"min_size": 50, "max_size": 200}, "production": {"min_size": 50, "max_size": 200}}}}, {"name": "autopilot", "member": "streamingforecaster.autopilot", "type": "service", "envoy_service": "streamingforecasterautopilot", "autoscaling": {"criteria": {"cpu_target": 65}, "environment": {"staging": {"min_size": 5, "max_size": 20}, "production": {"min_size": 5, "max_size": 20}}}}], "groups": [{"name": "dev", "members": ["control.dev", "streamingforecaster.service", "streamingforecaster.rollingmean", "streamingforecaster.autopilot"]}], "tests": [{"name": "startup", "type": "startup", "group": "streamingforecaster.dev"}, {"name": "unit", "type": "execution", "command": "mvn test --settings /settings.xml", "group": "streamingforecaster.dev", "container": "streamingforecaster.service"}], "deploy": [{"name": "staging", "legacy": false, "automatic": false, "targets": [{"facet": "rollingmean"}, {"facet": "autopilot"}], "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": "core-staging-4"}}, "orca": [{"region": "iad"}]}, [{"name": "stflegacyma-staging", "legacy": false, "automatic": false}, {"name": "stflegacydev-staging", "legacy": false, "automatic": false}], {"name": "production", "legacy": false, "automatic": false, "targets": [{"facet": "rollingmean"}, {"facet": "autopilot"}], "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": "core-prod-4"}}, "orca": [{"region": "iad"}]}, [{"name": "stflegacyma-production", "legacy": false, "automatic": false}]], "streamingplatform": {"kubernetes": true, "applications": [{"namespace": "flink", "name": "streamingforecaster"}], "stages": {"stflegacyma-staging": {"configuration": "stflegacyma-staging.jsonnet"}, "stflegacydev-staging": {"configuration": "stflegacydev-staging.jsonnet"}, "stflegacyma-production": {"configuration": "stflegacyma-production.jsonnet"}}}, "version": "d637d5df44bef06816e49d9d13ef68b4d59ac881", "images": [{"parent": {"name": "s2istreamingplatformflink", "version": "f2556c4c9097b89daf9b854ade489f42003b63f1", "sub_image": "sp20", "external": false}, "sub_image": null}, {"parent": {"name": "seldoncontainer", "version": "a9b59eaf36e50448b1687331df48d991f7cbddaa", "sub_image": null, "external": false}, "sub_image": "rollingmean"}, {"parent": {"name": "seldoncontainer", "version": "0df3d27b84b5e24add0e009b81d82b3387b0b1e8", "sub_image": null, "external": false}, "sub_image": "autopilot"}], "parent": {"name": "s2istreamingplatformflink", "version": "f2556c4c9097b89daf9b854ade489f42003b63f1", "sub_image": "sp20", "external": false}}, "streamsync": {"name": "streamsync", "description": "Test service to exercise streamingservice yeoman generator", "repository": "git@github.com:lyft/streamsync.git", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 60, "exports": [{"name": "web", "port": 18080, "protocol": "http"}]}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "streamsync.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "streamsync.dev"}, {"name": "integration", "type": "execution", "group": "streamsync.dev", "container": "streamsync.legacy", "command": "mvn verify -P '!disable-integration-tests'"}], "slack": "#strm-compute-bots", "team_email": "streaming-compute@lyft.com", "service_tier": 3, "pagerduty_escalation_policy": "devnull", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "languages": ["bash", "java"], "image_type": "service", "streamingplatform": {"version": "1.4-SNAPSHOT", "jobmanagers": [{"name": "streamsync", "production": {"num_taskmanagers": 32, "taskmanager": {"num_slots": 4}}, "jobs": [{"name": "streamsync", "jar": "streamsync-1.0.0-SNAPSHOT.jar", "class": "com.lyft.app.StreamingStarterClient", "description": "Sample application to exercise generator", "development": {"parallelism": 2}, "staging": {"parallelism": 16}, "production": {"parallelism": 128}}]}]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "streamsync"}, {"name": "streamsyncjobmanager"}, {"name": "streamsynctaskmanager"}]}}, "version": "b910c15f54cf44a0aec533cc581bcc2ed85a7e77", "images": [{"parent": {"name": "opsbase", "version": "e6298e7b6ba0c062918e656d651de3ad48092f2a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "e6298e7b6ba0c062918e656d651de3ad48092f2a", "sub_image": null, "external": false}}, "strmgentest": {"name": "strmgentest", "description": "Tests the output of the streamingservicek8s generator", "repository": "git@github.com:lyft/streamperfbench.git:strmgentest", "slack": "#streaming-compute", "team_email": "streaming-compute@lyft.com", "pagerduty_escalation_policy": "devnull", "languages": ["java"], "image_type": "service", "service_tier": 3, "containers": [{"name": "service", "command": "/docker-entrypoint.sh local"}, {"name": "debug", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.dev", "strmgentest.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "strmgentest.dev"}, {"name": "unit", "type": "execution", "command": "mvn test --settings /settings.xml", "group": "strmgentest.dev", "container": "strmgentest.service"}, {"name": "integration", "type": "execution", "command": "mvn verify --settings /settings.xml -P '!disable-integration-tests'", "group": "strmgentest.dev", "container": "strmgentest.service"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "automatic": false}], "streamingplatform": {"kubernetes": true, "applications": ["strmgentest"]}, "builder": {"name": "s2i", "params": {"builder": "lyft/s2istreamingplatformflink:sp14.b668bacae71832cae0c405b5c83a406dee0703be"}}, "version": "f63d252366f43b0af90b506ecb1d20f1de3415d8", "images": [{"parent": {"name": "s2istreamingplatformflink", "version": "b668bacae71832cae0c405b5c83a406dee0703be", "sub_image": "sp14", "external": false}, "sub_image": null}], "parent": {"name": "s2istreamingplatformflink", "version": "b668bacae71832cae0c405b5c83a406dee0703be", "sub_image": "sp14", "external": false}}, "submitter": {"name": "submitter", "description": "Backend service for uploading solutions", "repository": "git@github.com:lyft/submitter.git", "slack": "#laptop-autograder", "team_email": "jnazario@lyft.com", "pagerduty_escalation_policy": "devnull", "image_type": "service", "service_tier": 3, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:326fbfdfd905a535297ba92da8059df23c5e1472"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "submitter.legacy"]}, {"name": "service_group", "members": ["submitter.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "submitter.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "submitter.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "submitter.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "submitter"}]}}, "version": "129279d2ffcafdcc5587e5e7786a21cdd8449dc8", "images": [{"parent": {"name": "opsbase", "version": "326fbfdfd905a535297ba92da8059df23c5e1472", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "326fbfdfd905a535297ba92da8059df23c5e1472", "sub_image": null, "external": false}}, "submitterfe": {"name": "submitterfe", "description": "Submitter tool for candidates", "repository": "git@github.com:lyft/submitterfe.git", "slack": "#laptop-autograder", "team_email": "jnazario@lyft.com", "pagerduty_escalation_policy": "devnull", "image_type": "service", "service_tier": 3, "languages": ["javascript"], "credentials": true, "frontend": {"node_version": "10.14.1-1nodesource1"}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2"}}, {"name": "s2i", "params": {"builder": "lyft/s2inode:service.e852e9730388c06f4f8191f7685311512bc4132b", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "cdnupload", "command": "/code/submitterfe/cdn-upload", "workdir": "/code/submitterfe", "sub_image": "k8s"}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "workdir": "/code/submitterfe", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "groups": [{"name": "dev", "members": ["control.dev", "submitterfe.legacy"]}, {"name": "service_group", "members": ["submitterfe.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "submitterfe.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "facets": [{"name": "assets", "member": "feexample.cdnupload", "type": "job"}, {"name": "main", "member": "submitterfe.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 0, "max_size": 0}}}}, {"name": "canary", "member": "submitterfe.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 0, "max_size": 0}}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "submitterfe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null, "submitter": null}}}}, "version": "cc06dc15446728283fa7b28cfd89ca6bdfbedcaa", "images": [{"parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2inode", "version": "e852e9730388c06f4f8191f7685311512bc4132b", "sub_image": "service", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "88eeb076da91bafc5e0e9cb19d18fc7a1f372fc2", "sub_image": null, "external": false}}, "suggesteddestinations": {"name": "suggesteddestinations", "description": "Python service thats returns suggested destinations based on your location and ride history.", "repository": "git@github.com:lyft/suggesteddestinations.git", "image_type": "service", "service_tier": 1, "pagerduty_escalation_policy": "Places", "team_email": "spots-places-team@lyft.com", "slack": "#places", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "suggesteddestinations.legacy"]}, {"name": "integration", "members": ["account.dev", "dispatch.integration", "dispatchavailability.dev", "drivermode.dev", "green.dev", "locations.dev", "regions.dev", "rides.dev", "ridesapi.dev", "suggesteddestinations.dev", "users.dev", "viewport.dev", "wallet.dev", "walletapi.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "suggesteddestinations.dev"}, {"name": "unit", "type": "jailed", "markers": "not unit_legacy", "framework": "pytest"}, {"name": "integration", "float_dependencies": "H 5-22 * * *", "type": "sharded", "group": "suggesteddestinations.integration", "container": "suggesteddestinations.legacy", "target": "tests/integration", "virtualenv": "service_venv", "reports": {"junit": "build/integration.xml"}, "autotrigger": false}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "framework": "pytest", "coverage": false, "markers": "unit_legacy", "container": "suggesteddestinations.legacy", "group": "suggesteddestinations.dev", "targets": ["tests/unit"]}], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "suggesteddestinations"}, {"name": "suggesteddestinationskcl"}], "common_settings": {"internal_hosts": {"analyticsingest": null, "jobschedulermigrationweb": null, "places": null, "regions": null, "suggesteddestinations": null, "tcs": null, "users": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null, "firehose_iad": null}, "redis": {"suggesteddestmultiredis": {"port": 6380, "op_timeout_ms": 400}}}}}, "links": [{"text": "Runbook", "url": "https://github.com/lyft/suggesteddestinations/tree/master/docs/runbook.md"}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "logging": {"suggesteddestinationskcl": {"fields": {"request": "keyword", "response": {"lng": "float", "lat": "float"}, "error": "keyword", "status_code": "long", "shard_info": "keyword", "reason": "keyword"}}}, "version": "d854fdf6e011f05d8089e0646d2ba0404e55427c", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "superset": {"name": "superset", "description": "internal visualization tool for interactively exploring lyft data (apache/incubator-superset)", "repository": "git@github.com:lyft/superset-private.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 80}]}], "groups": [{"name": "dev", "members": ["control.dev", "redis.server", "superset.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "superset.dev"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "slack": "#viz-dev", "pagerduty_escalation_policy": "Superset", "team_email": "vap-eng@lyft.com", "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "superset"}, {"name": "supersetbatch"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null}, "redis": {"supersetmultiredis": {"port": 6380, "op_timeout_ms": 400}}}}}, "logging": {"superset": {"fields": {"exception": "keyword", "traceback": "keyword", "attempt_num": "long", "failed_record": "keyword"}}}, "languages": ["python"], "version": "93871b67a53f1ff5c7925426f683d1fcf40cd5cb", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "supply": {"name": "supply", "description": "Primary source of truth for Driver and Vehicle data", "pagerduty_escalation_policy": "Driver Labs", "team_email": "driver-labs-eng@lyft.com", "repository": "git@github.com:lyft/supply.git", "image_type": "service", "service_tier": 0, "credentials": true, "languages": ["go"], "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- supply", "workdir": "/code/supply", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "2Gi"}}], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "docker_build"}]}}, "facets": [{"name": "main", "member": "supply.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 140}}}}, {"name": "canary", "member": "supply.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "supply.legacy", "idl.server", "redis.dev", "jobscheduler.dev"]}, {"name": "integration", "members": ["supply.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "supply.dev"}, {"name": "unit", "type": "jailed", "command": "make tests"}, {"name": "integration", "type": "execution", "group": "supply.integration", "container": "supply.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "coverage", "type": "jailed", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": false}, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}], "slack": "#driver-labs-bot", "slack_deploy_notification_environments": ["canary", "production"], "upstream_tests": {"on_commit": false, "test_set": {"rentals": ["integration"]}}, "envoy": {"profile": "go", "settings": {"services": [{"name": "supply"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "dynamodb_cmh": null, "kinesis_iad": null, "firehose_iad": null}, "internal_hosts": {"jobschedulernormalweb": null, "supply": null}, "redis": {"supplymultiredis": {"port": 6380}}, "authorization": {"permissions": {"commissions_read": {"paths": ["/pb.lyft.supply.driver_commissions.DriverCommissions/Get", "/pb.lyft.supply.driver_commissions.DriverCommissions/GetHighestQualified", "/pb.lyft.supply.driver_commissions.DriverCommissions/GetQualified", "/pb.lyft.supply.driver_commissions.DriverCommissions/GetDefault"], "methods": ["POST"]}, "shifts_read": {"paths": ["/pb.lyft.supply.drivershifts.DriverShifts/Get", "/pb.lyft.supply.drivershifts.DriverShifts/GetLatest", "/pb.lyft.supply.drivershifts.DriverShifts/GetAtTime", "/pb.lyft.supply.drivershifts.DriverShifts/GetForUserAndTimeRange", "/pb.lyft.supply.drivershifts.DriverShifts/GetPageForDriver", "/pb.lyft.supply.drivershifts.DriverShifts/GetAggregates"], "methods": ["POST"]}, "shifts_write": {"paths": ["/pb.lyft.supply.drivershifts.DriverShifts/Create", "/pb.lyft.supply.drivershifts.DriverShifts/EndShift"], "methods": ["POST"]}, "shifts_update": {"paths": ["/pb.lyft.supply.drivershifts.DriverShifts/SetDistance"], "methods": ["POST"]}, "vehicles_read": {"paths": ["/pb.lyft.supply.vehicles.Vehicles/Get", "/pb.lyft.supply.vehicles.Vehicles/GetByUserId"], "methods": ["POST"]}, "vehicles_write": {"paths": ["/pb.lyft.supply.vehicles.Vehicles/Create", "/pb.lyft.supply.vehicles.Vehicles/SetVehicleProperties", "/pb.lyft.supply.vehicles.Vehicles/SetUserId", "/pb.lyft.supply.vehicles.Vehicles/SetStatus", "/pb.lyft.supply.vehicles.Vehicles/SetRideTypes", "/pb.lyft.supply.vehicles.Vehicles/SetHasPremiumSeats", "/pb.lyft.supply.vehicles.Vehicles/SetPlateAndState", "/pb.lyft.supply.vehicles.Vehicles/SetIsLivery", "/pb.lyft.supply.vehicles.Vehicles/SetComplianceGroupId", "/pb.lyft.supply.vehicles.Vehicles/SetCreatedAt", "/pb.lyft.supply.vehicles.Vehicles/SetEngineType", "/pb.lyft.supply.vehicles.Vehicles/SetRideTypeGrandfathering", "/pb.lyft.supply.vehicles.Vehicles/SetCustomPhoto", "/pb.lyft.supply.vehicles.Vehicles/SetPartnerId"], "methods": ["POST"]}, "drivers_read": {"paths": ["/pb.lyft.supply.drivers.Drivers/Get", "/pb.lyft.supply.drivers.Drivers/GetPhoto", "/pb.lyft.supply.drivers.Drivers/GetWithVehicle"], "methods": ["POST"]}, "drivers_write": {"paths": ["/pb.lyft.supply.drivers.Drivers/Create", "/pb.lyft.supply.drivers.Drivers/Activate", "/pb.lyft.supply.drivers.Drivers/ActiveVehicleUpdate", "/pb.lyft.supply.drivers.Drivers/SetDefaultLocation", "/pb.lyft.supply.drivers.Drivers/IsProUpdate", "/pb.lyft.supply.drivers.Drivers/ApplicantFieldsUpdate", "/pb.lyft.supply.drivers.Drivers/ClientInfoUpdate", "/pb.lyft.supply.drivers.Drivers/DefaultNavAppUpdate", "/pb.lyft.supply.drivers.Drivers/SetIsMilitaryPersonnel", "/pb.lyft.supply.drivers.Drivers/DriverLoyaltyInfoUpdate", "/pb.lyft.supply.drivers.Drivers/SetComplianceGroupId", "/pb.lyft.supply.drivers.Drivers/SetVehiclePreference", "/pb.lyft.supply.drivers.Drivers/SetLoyaltyTier", "/pb.lyft.supply.drivers.Drivers/SetPhoto", "/pb.lyft.supply.drivers.Drivers/MigrateDriverDates"], "methods": ["POST"]}, "jobscheduler": {"paths": ["/drivers/urm/erasure*", "/vehicles/urm/erasure*"], "methods": ["POST"]}}, "bindings": {"*": ["vehicles_read", "vehicles_write", "drivers_read", "drivers_write"], "ats": ["shifts_read"], "atsbatch": ["shifts_read"], "atssearchworkers": ["shifts_read"], "atsworkers": ["shifts_read"], "accidents": ["shifts_read"], "bookkeeper": ["commissions_read"], "bookkeeperkcl": ["commissions_read"], "declientapi": ["shifts_read"], "driverbonus": ["commissions_read"], "drivercomp": ["shifts_read"], "drivermode": ["shifts_read", "shifts_write"], "driverprompts": ["shifts_read"], "drivestat": ["shifts_read"], "driverearnings": ["commissions_read"], "drivingintervals": ["shifts_read", "shifts_write"], "escrowdriverpay": ["commissions_read"], "graphql": ["shifts_read"], "green": ["shifts_read"], "incentiveguarantees": ["commissions_read"], "jobscheduler": ["jobscheduler"], "karma": ["commissions_read"], "messaging": ["shifts_read"], "offlinemileagetracker": ["shifts_read"], "onboardingflow": ["shifts_read"], "ratecards": ["commissions_read"], "rentals": ["shifts_read"], "ridesapi": ["commissions_read", "shifts_read"], "ridestreaks": ["shifts_read"], "sharelocation": ["shifts_read"], "switchboard": ["shifts_read"], "taskqueuenormal": ["jobscheduler"], "timecard": ["shifts_read", "shifts_update"], "tom": ["commissions_read", "shifts_read"], "wwwpayxpfe": ["shifts_read"]}}}, "override_settings": [{"services": [{"name": "supply", "service_instance": "development"}], "settings": {"authorization": {"bindings": {"offlinemileagetracker": ["shifts_read", "shifts_write"]}}}}]}}, "logging": {"supply": {"fields": {"requestId": "keyword", "user_id": "keyword", "driver_lyft_id": "keyword", "shift_mongo_id": "keyword", "in_service_area": "boolean", "primary_driving_region": "keyword", "user_lyft_id": "keyword", "start_lng": "float", "nearest_region": "keyword", "start_timestamp": "long", "vehicle_lyft_id": "keyword", "migration_source": "keyword", "is_autonomous": "boolean", "start_lat": "float", "start": "date", "in_active_region": "boolean", "is_simulated_ride": "boolean", "end_lat": "float", "end_lng": "float", "sign_out_reason": "keyword", "end_timestamp": "long", "end": "date", "distance": "long", "ride_type": "keyword", "mode": "keyword", "driver_obscured_id": "keyword", "driver_dest_lat": "float", "driver_dest_lng": "float", "driver_dest_routable_address": "keyword", "lyft_id": "keyword", "driver_dest_address": "keyword", "driver_default_lat": "float", "driver_default_lng": "float", "mpg": "long", "service": "keyword", "error": "keyword", "code": "keyword", "lyft_user_id": "keyword", "endpoint": "keyword", "request_id": "keyword", "downstream_cluster": "keyword", "region": "keyword", "rpcmethod": "keyword", "ids": "keyword", "user-agent": "keyword", "aws": {"message": "keyword", "code": "keyword", "origerr": "keyword", "requestid": "keyword", "statuscode": "long"}, "driving_region": "keyword", "user_obscured_id": "keyword", "active_vehicle_lyft_id": "keyword", "previous_vehicle_lyft_id": "keyword", "commission_percentage": "long", "driver_id": "keyword", "old_status": "keyword", "new_status": "keyword", "driver_approved": "boolean", "approved": "boolean", "vehicle_id": "keyword", "state": "keyword", "driver_dest_arrive_by_timestamp": "date", "grpcStatusCode": "keyword", "userAgent": "keyword", "grpcMethod": "keyword", "key": "keyword", "caller": "keyword", "range_keys": "long", "StartTimeMs": "keyword", "DriverId": "keyword", "old_region": "keyword", "new_region": "keyword", "path": "keyword", "method": "keyword", "request": "keyword", "driverId": "keyword", "new_applied_at": "float", "old_applied_at": "long", "vehicleId": "keyword", "host": "keyword", "new_is_pro": "boolean", "old_is_pro": "boolean", "vin": "keyword", "plate": "keyword"}}}, "version": "385af50ef706f31a7207f7a8013f355f84e7b374", "images": [{"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "supplycontroller": {"name": "supplycontroller", "description": "Monitor and determine desired level of driver supply", "repository": "git@github.com:lyft/supplycontroller.git", "slack": "#supplycontroller", "team_email": "mlabs@lyft.com", "pagerduty_escalation_policy": "supplycontroller", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build", "params": {"dockerfile": "Dockerfile.spark2", "sub_image": "spark"}}, {"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libkrb5-dev", "libspatialindex-dev", "libpq-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "k8s", "packages": ["default-jre-headless", "liblog4j1.2-java", "libkrb5-dev", "libspatialindex-dev", "iotop", "libpq-dev"]}}]}}, "containers": [{"name": "lyftlearn", "command": "sleep infinity", "sub_image": "spark", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}, {"name": "sparkui", "port": 4040, "protocol": "http"}], "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --reuse-port --workers=8 -k gevent --worker-connections 1 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/supplycontroller", "limits": {"cpu": 8, "memory": "10Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 61}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 11, "initial_delay_seconds": 13}, "exports": [{"name": "api", "port": 8080}]}, {"name": "kclworker", "command": "dumb-init -- /code/kclsupport/run_kcl_daemon.sh", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi", "environment": {"development": {"memory": "4Gi", "cpu": 1.2}}}, "readiness_probe": {"exec_probe": {"command": ["/code/supplycontroller/app/scripts/supplycontroller_readiness_check.sh"]}, "period_seconds": 11, "initial_delay_seconds": 13}, "liveness_probe": {"exec_probe": {"command": ["/code/supplycontroller/app/scripts/supplycontroller_liveness_check.sh"]}, "period_seconds": 19, "initial_delay_seconds": 307}}, {"name": "supplycontrollerworker", "command": "dumb-init -- service_venv python -m app.scripts.supplyoptimize", "workdir": "/code/supplycontroller", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "8Gi", "environment": {"development": {"memory": "8Gi", "cpu": 1.2}}}, "readiness_probe": {"exec_probe": {"command": ["/code/supplycontroller/app/scripts/supplycontroller_readiness_check.sh"]}, "period_seconds": 11, "initial_delay_seconds": 13}, "liveness_probe": {"exec_probe": {"command": ["/code/supplycontroller/app/scripts/supplycontroller_liveness_check.sh"]}, "period_seconds": 19, "initial_delay_seconds": 307}}], "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "18:00 America/New_York"}, "pulldeploy_components": {"data": ["regioncfgdata", "marketplaceconfig"]}, "groups": [{"name": "justlegacygroup", "members": ["supplycontroller.legacy"]}, {"name": "devlite", "members": ["control.dev", "supplycontroller.legacy", "dynamodb.server"]}, {"name": "dev", "members": ["control.dev", "kinesis.server", "analyticsingest.dev", "dynamodb.server", "fanner.dev", "ghostmatching.dev", "messaging.dev", "redis.server", "regions.dev", "supply.dev", "supplycontroller.legacy", "mozartgateway.dev", "ratecards.dev"]}, {"name": "service_group", "members": ["supplycontroller.legacy"]}, {"name": "lyftlearn_group", "members": ["supplycontroller.lyftlearn"]}, {"name": "integration", "members": ["supplycontroller.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "supplycontroller.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "k8s-scripts", "type": "jailed", "command": "make test_k8s_scripts"}, {"name": "unit", "type": "execution", "group": "supplycontroller.justlegacygroup", "container": "supplycontroller.legacy", "command": "make UNIT_TEST_DIRS='tests/unit/app tests/unit/models' MIN_COVERAGE=78 test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "supplycontroller.integration", "container": "supplycontroller.legacy", "command": "make UNIT_TEST_DIRS=tests/integration/fast MIN_COVERAGE=0 test_unit", "reports": {"junit": "build/unit.xml"}}, {"name": "pytest-optimize_loop", "autotrigger": false, "type": "execution", "group": "supplycontroller.justlegacygroup", "container": "supplycontroller.legacy", "command": "make UNIT_TEST_DIRS=tests/unit/optimize_loop MIN_COVERAGE=0 test_unit", "reports": {"junit": "build/unit.xml"}}, {"name": "pytest-quant", "type": "execution", "group": "supplycontroller.justlegacygroup", "container": "supplycontroller.legacy", "command": "make UNIT_TEST_DIRS=tests/unit/quant MIN_COVERAGE=0 test_unit", "reports": {"junit": "build/unit.xml"}}, {"name": "pytests-execution", "type": "execution", "group": "supplycontroller.integration", "container": "supplycontroller.legacy", "command": "make UNIT_TEST_DIRS=tests MIN_COVERAGE=0 test_unit", "autotrigger": false, "run_in_pr": false, "float_dependencies": "H 5-22 * * *", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}], "facets": [{"name": "main", "member": "supplycontroller.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 40}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 24}}}}, {"name": "counterfacet", "member": "supplycontroller.service", "type": "service", "envoy_service": "supplycontrollercounter", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 24}}}}, {"name": "batchfacet", "member": "supplycontroller.service", "type": "service", "envoy_service": "supplycontrollerbatch", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 24}}}}, {"name": "powermodeapifacet", "member": "supplycontroller.service", "type": "service", "envoy_service": "powermode", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 12}}}}, {"name": "powermodecounterfacet", "member": "supplycontroller.service", "type": "service", "envoy_service": "powermodecounter", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 24}}}}, {"name": "kclfacet", "member": "supplycontroller.kclworker", "type": "worker", "envoy_service": "supplycontrollerkcl", "max_surge": "50%", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 21, "max_size": 21}}}}, {"name": "workerfacet", "member": "supplycontroller.supplycontrollerworker", "type": "worker", "envoy_service": "supplycontrollerworker", "autoscaling": {"criteria": {"cpu_target": 60}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 16, "max_size": 96}}}}, {"name": "canary", "member": "supplycontroller.service", "type": "service", "canary": true, "autoscaling": {"min_size": 2, "max_size": 5}}, {"name": "powermodeapicanaryfacet", "member": "supplycontroller.service", "type": "service", "canary": true, "envoy_service": "powermode", "autoscaling": {"min_size": 2, "max_size": 5}}, {"name": "kclcanaryfacet", "member": "supplycontroller.kclworker", "type": "worker", "envoy_service": "supplycontrollerkcl", "canary": true, "autoscaling": {"environment": {"production": {"min_size": 1, "max_size": 1}, "staging": {"min_size": 0, "max_size": 0}}}}, {"name": "workercanaryfacet", "member": "supplycontroller.supplycontrollerworker", "type": "worker", "envoy_service": "supplycontrollerworker", "canary": true, "autoscaling": {"environment": {"production": {"min_size": 1, "max_size": 1}, "staging": {"min_size": 0, "max_size": 0}}}}, {"name": "batchcanaryfacet", "member": "supplycontroller.service", "type": "service", "canary": true, "envoy_service": "supplycontrollerbatch", "autoscaling": {"environment": {"staging": {"min_size": 0, "max_size": 0}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "counterfacet"}, {"facet": "batchfacet"}, {"facet": "kclfacet"}, {"facet": "workerfacet"}, {"facet": "powermodeapifacet"}, {"facet": "powermodecounterfacet"}]}, [{"name": "production-canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "kclcanaryfacet"}, {"facet": "workercanaryfacet"}, {"facet": "batchcanaryfacet"}, {"facet": "powermodeapicanaryfacet"}]}, {"name": "production-canary-us-east-1a", "availability_zone": "us-east-1a", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "kclcanaryfacet"}, {"facet": "workercanaryfacet"}, {"facet": "batchcanaryfacet"}, {"facet": "powermodeapicanaryfacet"}]}, {"name": "production-workercanary", "legacy": false, "automatic": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "workercanaryfacet"}]}, {"name": "production-apicanary", "legacy": false, "automatic": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-batchcanary", "legacy": false, "automatic": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "batchcanaryfacet"}]}, {"name": "production-worker", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "workerfacet"}]}, {"name": "production-api-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "counterfacet"}, {"facet": "batchfacet"}, {"facet": "powermodeapifacet"}, {"facet": "powermodecounterfacet"}]}, {"name": "production-api", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "batchfacet"}]}, {"name": "production-counterfacet", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "counterfacet"}]}, {"name": "production-kcl", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "kclfacet"}]}, {"name": "production-kcl-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "kclfacet"}]}, {"name": "production-powermode-canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "powermodeapicanaryfacet"}]}, {"name": "production-powermode-counterfacet", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "powermodecounterfacet"}]}, {"name": "production-powermode", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "powermodeapicanaryfacet"}, {"facet": "powermodeapifacet"}, {"facet": "powermodecounterfacet"}]}], {"name": "production-us-east-1a", "legacy": false, "automatic": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "kclfacet"}, {"facet": "kclcanaryfacet"}, {"facet": "workerfacet"}, {"facet": "workercanaryfacet"}, {"facet": "counterfacet"}, {"facet": "batchfacet"}, {"facet": "batchcanaryfacet"}, {"facet": "powermodeapifacet"}, {"facet": "powermodeapicanaryfacet"}, {"facet": "powermodecounterfacet"}], "availability_zone": "us-east-1a"}, {"name": "production", "legacy": false, "automatic": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "kclfacet"}, {"facet": "kclcanaryfacet"}, {"facet": "workerfacet"}, {"facet": "workercanaryfacet"}, {"facet": "counterfacet"}, {"facet": "batchfacet"}, {"facet": "batchcanaryfacet"}, {"facet": "powermodeapifacet"}, {"facet": "powermodeapicanaryfacet"}, {"facet": "powermodecounterfacet"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "supplycontroller"}, {"name": "supplycontrollerkcl"}, {"name": "supplycontrollerworker"}, {"name": "supplycontrollercounter"}, {"name": "supplycontrollerbatch"}, {"name": "powermode"}, {"name": "powermodecounter"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "redis": {"supplycontrolamultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 8192}}, "supplycontrolbmultiredis": {"port": 6381, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 8192}}, "supplycontrolcmultiredis": {"port": 6382, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 8192}}, "supplycontroldmultiredis": {"port": 6383, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 8192}}}, "redis_clusters": {"supplycontrol": {"aws_random_identifier": "vngjnv", "port": 6384, "op_timeout_ms": 200}}, "internal_hosts": {"acceptancerate": null, "driverheatmaps": null, "ghostmatching": null, "messaging": null, "pusher": null, "ratecards": null, "ratelimit": null, "regions": null, "supply": null, "supplycontroller": null, "supplycontrollercounter": null, "tcs": null, "users": null, "mozartgateway": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}}}}, "lyftlearn": {}, "logging": {"supplycontroller": {"fields": {"should_restrict_supply_request": {"supply_control_check_type": "long", "driver_lng": "float", "driver_lyft_id": {"id": "keyword"}, "driver_lat": "float", "driver_approved_region": "keyword", "will_honor_response": "boolean", "detailed_supply_caller_reason": "keyword"}, "check_inputs_driver": {"revision": "long", "lastUpdatedTimestamp": "keyword", "complianceGroupId": "long", "approvedDriverRegion": "keyword", "appliedAt": "long", "clientInfo": {"os": "long", "clientId": "keyword", "osVersion": "keyword", "appType": "long", "appName": "keyword", "versionArray": "long", "carrier": "keyword", "device": "keyword"}, "id": "keyword", "isProDriver": "boolean", "activeVehicleId": "keyword", "activatedAt": "long", "approvedDriver": "boolean", "defaultNavApp": "keyword", "driverLoyaltyInfo": {"currentTier": "keyword"}, "startedDriverApplication": "boolean", "whitelistedFromUnpairingForAccessibility": "boolean"}, "check_inputs_active_vehicle": {"rideTypes": "long", "lastUpdatedTimestamp": "keyword", "createdAt": "keyword", "userId": "keyword", "transparentPhoto": "keyword", "doors": "long", "revision": "long", "make": "keyword", "complianceGroupId": "long", "status": "long", "id": "keyword", "photo": "keyword", "year": "long", "model": "keyword", "color": "keyword", "seatbelts": "long", "state": "keyword", "plate": "keyword", "vin": "keyword", "hasPremiumSeatsSet": "boolean", "hasPremiumSeats": "boolean", "luxBlackGrandfathering": "boolean", "luxGrandfathering": "boolean", "mpg": "long", "isLivery": "boolean", "temporaryPlate": "boolean"}, "supply_policy_name": "keyword", "should_restrict_supply": "boolean", "supply_location_region": "keyword", "nsq_num": "long", "nsq_topic": "keyword", "restrict_request": {"driver_lyft_id": {"id": "keyword"}, "driver_lat": "float", "supply_control_check_type": "long", "driver_lng": "float", "driver_approved_region": "keyword", "detailed_supply_caller_reason": "keyword", "will_honor_response": "boolean"}, "issues": {"missing_driver_approved_region": "boolean"}, "calling_cluster": "keyword", "supply_region": "keyword", "driver_id": "keyword", "active_vehicle_id": "long", "approved_driver_region": "keyword", "state_kind": "keyword", "driver_lng": "float", "driver_lat": "float", "event": {"event_name": "keyword", "event_id": "keyword", "source_pipeline": "keyword", "logged_at": "keyword", "http_request_id": "keyword"}, "timestamp_string": "keyword", "error_id": "keyword", "error_msg": "keyword", "field_name": "keyword"}}}, "version": "be8e6a256c50bf8326566f8bafe4a2cfb9029287", "images": [{"parent": {"name": "lyftlearnspark", "version": "e1ea25b53d8de27093d039688b9de8e2dfff64ba", "sub_image": null, "external": false}, "sub_image": "spark"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "c65d5e6746f21bccb91a77cf5d798b2e1f50130d", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "supplypartners": {"name": "supplypartners", "description": "Service for Partners who manage supply assets", "repository": "git@github.com:lyft/supplypartners.git", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": false, "pagerduty_escalation_policy": "Driver Applicant Onboarding", "team_email": "do-funnel@lyft.com", "slack": "#do-eng-eng", "notification_overrides": {"behind_notifications": {"slack": "#do-funnel-bots"}, "pr_merge": {"slack": "#do-funnel-bots"}, "deploy": {"slack": "#do-funnel-bots"}, "deploy_failure": {"slack": "#do-funnel-bots"}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/supplypartners", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "supplypartners.legacy"]}, {"name": "integration", "members": ["control.dev", "dynamodb.dev", "supplypartners.legacy", "elasticsearch6.server", "lyfttestlib.core"]}, {"name": "service_group", "members": ["supplypartners.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "supplypartners.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "e2e", "type": "execution", "group": "supplypartners.integration", "container": "supplypartners.legacy", "target": "tests/e2e/", "virtualenv": "service_venv", "framework": "pytest", "coverage": false}], "facets": [{"name": "main", "member": "supplypartners.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "supplypartners.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "supplypartners"}], "common_settings": {"internal_hosts": {"ats": null, "compliance": null, "fleetmanagement": null, "jobschedulernormalweb": null, "regions": null, "supply": null, "supplyrecords": null, "taskqueuebulkweb": null, "taskqueuenormalweb": null, "users": null, "vehiclemetadata": null}, "external_hosts": {"kinesis_iad": null, "dynamodb_iad": null, "sqs_iad": null}}}}, "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "logging": {"supplypartners": {"fields": {"agreement_id": "keyword", "partner_id": "keyword", "partner_manager_id": "keyword", "partner_agreement_id": "keyword", "user_id": "keyword", "error": "keyword", "function": "keyword", "urm_request_id": "keyword", "driver_id": "keyword", "vehicle_id": "keyword", "vehicle_user_id": "keyword", "plate": "keyword", "count": "keyword", "status": "keyword", "arg": "keyword", "value": "keyword", "vin": "keyword"}}}, "version": "09b57df1049fe44617846e66d453214403c374d8", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "supplypartnersfe": {"name": "supplypartnersfe", "description": "Frontend service for supply partners", "repository": "git@github.com:lyft/supplypartnersfe.git", "slack": "#do-funnel-eng", "team_email": "do-funnel@lyft.com", "pagerduty_escalation_policy": "Driver Applicant Onboarding", "image_type": "service", "service_tier": 1, "languages": ["bash", "javascript"], "credentials": false, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "supplypartnersfe.legacy"]}, {"name": "integration", "members": ["supplypartnersfe.dev", "supplypartners.integration"]}, {"name": "service_group", "members": ["supplypartnersfe.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "supplypartnersfe.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "supplypartnersfe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"supplypartners": null}}}}, "version": "b52e4a976f3bb45a8bbc710fef0f4421c58a4bcd", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "supplyrecords": {"name": "supplyrecords", "description": "Driver and vehicle documents", "pagerduty_escalation_policy": "Cities", "team_email": "cities@lyft.com", "repository": "git@github.com:lyft/supplyrecords.git", "image_type": "service", "service_tier": 0, "languages": ["go"], "credentials": true, "credentials_legacy": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:77c41f39b1d42fc3b3fdf97d08edaed8fe4f7b0e", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "k8sservice", "command": "dumb-init -- supplyrecords", "limits": {"cpu": 4, "memory": "4Gi"}, "sub_image": "k8s"}], "facets": [{"name": "main", "member": "supplyrecords.k8sservice", "type": "service", "autoscaling": {"environment": {"production": {"max_size": 15, "min_size": 5}, "staging": {"max_size": 2, "min_size": 1}}}}, {"name": "canary", "member": "supplyrecords.k8sservice", "type": "service", "canary": true, "autoscaling": {"max_size": 1, "min_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "redis.dev", "supplyrecords.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "supplyrecords.dev"}, {"name": "unit", "type": "jailed", "command": "make tests"}, {"name": "integration", "type": "execution", "group": "supplyrecords.dev", "container": "supplyrecords.service", "command": "make integration"}, {"name": "coverage", "type": "jailed", "command": "make -f Makefile-k8s coverage", "reports": {"cobertura": "build/coverage.xml"}, "sub_image": "k8s"}, {"name": "precommit", "type": "jailed", "command": "pre-commit run --all-files --show-diff-on-failure", "sub_image": "precommit"}], "slack": "#do-cities-eng", "slack_deploy_notification_environments": ["canary", "production"], "upstream_tests": {"on_commit": false, "test_set": {"ats": ["e2e"], "rentals": ["integration", "goldenpath"]}}, "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true, "orca": [{"region": "iad"}], "links": [{"text": "Deployment Runbook", "url": "https://github.com/lyft/supplyrecords/blob/master/docs/runbook.md#how-to-deploy"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "supplyrecords"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 900}}}, "internal_hosts": {"jobschedulernormalweb": null}, "external_hosts": {"dynamodb_iad": null, "dynamodb_cmh": null, "kinesis_iad": null, "s3_iad": null, "s3_pdx": null, "firehose_iad": null}, "redis": {"supplyrecordsmultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}, "authorization": {"permissions": {"document_read": {"paths": ["/pb.lyft.supplyrecords.Supplyrecords/GetDocument", "/pb.lyft.supplyrecords.Supplyrecords/GetDocumentFile", "/pb.lyft.supplyrecords.Supplyrecords/GetDocumentFileCount", "/pb.lyft.supplyrecords.Supplyrecords/GetDocumentFileInfo", "/pb.lyft.supplyrecords.Supplyrecords/GetDocumentsByDuplicateId", "/pb.lyft.supplyrecords.Supplyrecords/GetDocumentsByNormalizedId", "/pb.lyft.supplyrecords.Supplyrecords/GetDocumentsByUser", "/pb.lyft.supplyrecords.Supplyrecords/GetDocumentsByUserAndStatus", "/pb.lyft.supplyrecords.Supplyrecords/GetDocumentsByVehicle", "/pb.lyft.supplyrecords.Supplyrecords/GetDocumentsByVehicleAndStatus", "/v1/supplyrecords/GetDocumentFile*"], "methods": ["POST", "GET"]}, "document_migration_write": {"paths": ["/pb.lyft.supplyrecords.Supplyrecords/RemoveDocument"], "methods": ["POST"]}, "document_write": {"paths": ["/pb.lyft.supplyrecords.Supplyrecords/CreateDocument", "/pb.lyft.supplyrecords.Supplyrecords/SetDocumentDriverId", "/pb.lyft.supplyrecords.Supplyrecords/SetDocumentEffective", "/pb.lyft.supplyrecords.Supplyrecords/SetDocumentExpiration", "/pb.lyft.supplyrecords.Supplyrecords/SetDocumentFile", "/pb.lyft.supplyrecords.Supplyrecords/SetDocumentMetadata", "/pb.lyft.supplyrecords.Supplyrecords/SetDocumentStatus", "/pb.lyft.supplyrecords.Supplyrecords/SetDocumentSubtype", "/v1/supplyrecords/SetDocumentFile*"], "methods": ["POST"]}, "upr_write": {"paths": ["/pb.lyft.supplyrecords.Supplyrecords/GdprPatch"], "methods": ["POST"]}, "document_file_url": {"paths": ["/pb.lyft.supplyrecords.Supplyrecords/GetDocumentFileUploadUrl"], "methods": ["POST"]}, "consent_read": {"paths": ["/pb.lyft.supplyrecords.Supplyrecords/GetConsentsByUser"], "methods": ["POST"]}, "consent_write": {"paths": ["/pb.lyft.supplyrecords.Supplyrecords/CreateConsent"], "methods": ["POST"]}, "block_read": {"paths": ["/pb.lyft.supplyrecords.Supplyrecords/GetBlocksByUser", "/pb.lyft.supplyrecords.Supplyrecords/BatchGetBlocksByUser", "/pb.lyft.supplyrecords.Supplyrecords/GetBlocksByVehicle"], "methods": ["POST"]}, "block_write": {"paths": ["/pb.lyft.supplyrecords.Supplyrecords/CreateBlock", "/pb.lyft.supplyrecords.Supplyrecords/RemoveBlock"], "methods": ["POST"]}, "check_read": {"paths": ["/pb.lyft.supplyrecords.Supplyrecords/GetChecksByUser"], "methods": ["POST"]}, "check_write": {"paths": ["/pb.lyft.supplyrecords.Supplyrecords/CreateCheck", "/pb.lyft.supplyrecords.Supplyrecords/RemoveCheck"], "methods": ["POST"]}, "internal_compliance": {"paths": ["/pb.lyft.supplyrecords.Supplyrecords/GetComplianceDocumentsByLyftIds", "/pb.lyft.supplyrecords.Supplyrecords/GetComplianceDocumentsByLyftIdsStream"], "methods": ["POST"]}, "jobscheduler": {"paths": ["/v1/jobscheduler/*"], "methods": ["POST"]}, "write_file_to_bucket": {"paths": ["/pb.lyft.supplyrecords.Supplyrecords/WriteFileToBucket"], "methods": ["POST"]}, "document_read_vault": {"paths": ["/pb.lyft.supplyrecords.Supplyrecords/GetVaultDocumentsByUser"], "methods": ["POST", "GET"]}}, "bindings": {"accidents": ["document_read", "block_read"], "accidentsbatch": ["block_read"], "acquisitionguarantees": ["block_read"], "amp": ["block_read"], "ats": ["document_file_url", "document_read", "document_migration_write", "document_write", "consent_read", "consent_write", "block_read", "block_write", "check_read", "check_write", "write_file_to_bucket"], "atsbatch": ["document_file_url", "document_read", "document_migration_write", "document_write", "consent_read", "consent_write", "block_read", "block_write", "check_read", "check_write", "write_file_to_bucket", "internal_compliance"], "atssearchworkers": ["document_file_url", "document_read", "document_write", "consent_read", "consent_write", "block_read", "block_write", "check_read", "check_write"], "atsworkers": ["document_file_url", "document_read", "document_write", "consent_read", "consent_write", "block_read", "block_write", "check_read", "check_write"], "autonomous": ["document_file_url", "document_read", "document_write", "check_read"], "autonomousworkers": ["document_file_url", "document_read", "document_write", "check_read"], "backgroundcheck": ["document_file_url", "block_read", "block_write", "check_read", "check_write", "consent_read", "document_read", "document_write"], "backgroundcheckbatch": ["document_file_url", "block_read", "block_write", "check_read", "check_write", "consent_read", "document_read", "document_write"], "backgroundcheckworkers": ["document_file_url", "block_read", "block_write", "check_read", "check_write", "consent_read", "document_read", "document_write"], "challenges": ["document_read", "block_write"], "compliance": ["internal_compliance", "block_write", "document_write", "consent_write", "check_write"], "dispatch": ["check_read", "document_read"], "drivermonitor": ["block_write", "document_write"], "driveronboardingint": ["block_read", "block_write", "check_read", "check_write", "consent_read", "consent_write", "document_file_url", "document_read", "document_write"], "drivestat": ["document_read"], "enterprisedispatch": ["document_read"], "financial": ["document_file_url", "document_read", "document_write", "document_read_vault"], "financialairflow": ["document_file_url", "document_read", "document_write", "document_read_vault"], "financialairflowworkers": ["document_file_url", "document_read", "document_write", "document_read_vault"], "fleetmanagement": ["block_read", "block_write"], "flexibleincentives": ["document_read"], "graphql": ["block_read", "consent_read", "check_read", "document_read"], "green": ["document_read"], "images": ["document_file_url", "document_read", "document_write"], "imagesworkers": ["document_file_url", "document_read", "document_write"], "inspolicies": ["document_file_url", "document_read", "document_write"], "jobscheduler": ["jobscheduler"], "karma": ["document_read"], "karmaupdate": ["document_read"], "leadplatformint": ["block_read", "block_write"], "migrationworkers": ["jobscheduler"], "onboardingflow": ["document_file_url", "document_read", "document_write", "consent_read", "consent_write", "block_read", "block_write", "check_read", "check_write", "write_file_to_bucket"], "payapi": ["document_file_url", "document_read", "document_write"], "ratings": ["block_read"], "referrals": ["block_read"], "loyaltypoints": ["block_read"], "loyaltytiers": ["block_read"], "regulatoryintegrations": ["block_read", "block_write", "check_read", "check_write", "consent_read", "document_file_url", "document_read", "document_write"], "regulatoryintegrationsairflow": ["block_read", "block_write", "check_read", "check_write", "consent_read", "document_file_url", "document_read", "document_write"], "regulatoryintegrationsworkers": ["block_read", "block_write", "check_read", "check_write", "consent_read", "document_file_url", "document_read", "document_write"], "rentals": ["document_read", "block_read", "block_write", "check_read", "consent_read", "document_file_url", "document_write"], "rentalsbatch": ["document_read", "document_write", "block_read", "block_write"], "rentalsworkers": ["document_read", "block_read", "block_write"], "ridevalidations": ["document_file_url", "document_read", "document_write"], "simulatedrides": ["block_read", "block_write"], "supplypartners": ["document_read", "document_write"], "supportactions": ["document_read"], "taskqueuenormal": ["jobscheduler"], "tom": ["document_file_url", "block_read", "check_read", "document_read", "document_write"], "userprivacyrights": ["document_read", "upr_write"], "vehicleinspection": ["document_file_url", "document_write", "document_read"], "vehicleservicecenters": ["document_read"], "wwwpayxpfe": ["document_file_url", "document_read", "document_write"], "test": ["*"]}}}}}, "logging": {"supplyrecords": {"fields": {"requestId": "keyword", "user_lyft_id": "keyword", "passed_at": "keyword", "actor": "keyword", "consent_requirement": "keyword", "consented_at": "keyword", "lyft_id": "keyword", "vehicle_lyft_id": "keyword", "aws": {"code": "keyword", "message": "keyword", "origerr": "keyword", "statuscode": "long", "requestid": "keyword"}, "error": "keyword", "endpoint": "keyword", "lyft_user_id": "keyword", "downstream_cluster": "keyword", "request_id": "keyword", "code": "keyword", "grpcStatusCode": "keyword", "grpcMethod": "keyword", "method": "keyword", "path": "keyword", "host": "keyword"}}}, "version": "637de448e1ba95abb0451fda09bb9c8fe51f6006", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "77c41f39b1d42fc3b3fdf97d08edaed8fe4f7b0e", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "supportactions": {"name": "supportactions", "description": "Service responsible for tracking all Support Actions taken by an Associate while working a Support Interaction.", "repository": "git@github.com:lyft/supportactions.git", "slack": "#support-bots", "team_email": "support-eng-ast@lyft.com", "pagerduty_escalation_policy": "Associate Tools", "image_type": "service", "service_tier": 2, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}, {"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["lbzip2", "libspatialindex-dev", "libgeos-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/supportactions", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "supportactions.legacy", "dynamodb.dev", "supportcontact.dev"]}, {"name": "service_group", "members": ["supportactions.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "supportactions.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "supportactions.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "supportactions.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "deploy_settings": {"window_start": "09:00 US/Central", "window_end": "18:00 US/Central"}, "envoy": {"profile": "python", "settings": {"services": [{"name": "supportactions"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"regions": null, "supportcontact": null, "users": null, "supply": null, "supplyrecords": null}}}}, "configsets": ["supportactionsdata"], "pulldeploy_components": {"data": ["regioncfgdata"]}, "version": "744c63a54a3aa913b84da25964dc26032e85a2cf", "images": [{"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "py37", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "supportactionsdata": {"name": "supportactionsdata", "description": "Runtime configuration data for supportactionsdata", "repository": "git@github.com:lyft/supportactionsdata.git", "image_type": "data", "service_tier": 2, "slack": "#support-bots", "team_email": "support-eng-ast@lyft.com", "pagerduty_escalation_policy": "Associate Tools", "languages": ["bash", "python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "credentials": false, "docs": {"disable": true}, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/supportactionsdata"]}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "5492bd58300f399d9c87a16e5efc88cbedfc9975", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "supportconfig": {"name": "supportconfig", "description": "Provides an API for working with metadata for Lyft support features", "repository": "git@github.com:lyft/supportconfig.git", "slack": "#support-bots", "team_email": "support-tech@lyft.com", "pagerduty_escalation_policy": "Support Platform", "image_type": "service", "service_tier": 1, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.080298aced8fc7d63b73d0b5675bf69e6453999d", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn supportconfig.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "configsets": ["supportcontactdata", "helpdata"], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "supportconfig.legacy"]}, {"name": "service_group", "members": ["supportconfig.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "supportconfig.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "supportconfig.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "supportconfig.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "supportconfig"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"users": null}}}}, "version": "8201c819d0f61dad6b04f3a1df606f1f8b66955e", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "080298aced8fc7d63b73d0b5675bf69e6453999d", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "supportcontact": {"name": "supportcontact", "description": "A lightweight, easily queryable storage and routing service for all support communication.", "repository": "git@github.com:lyft/supportcontact.git", "image_type": "service", "service_tier": 1, "slack": "#support-bots", "team_email": "support-tech@lyft.com", "pagerduty_escalation_policy": "Support Platform", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=3 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/supportcontact", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "1Gi"}}], "configsets": ["helpdata", "supportcontactdata"], "groups": [{"name": "dev", "members": ["control.dev", "jobscheduler.dev", "idl.server", "postgresql.server", "sqs.server", "supportconfig.legacy", "supportcontact.legacy"]}, {"name": "integration", "members": ["guardian.dev", "supportconfig.dev", "supportcontact.dev", "supportphone.dev", "supporttext.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "supportcontact.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "supportcontact.integration", "container": "supportcontact.legacy", "command": "make test_integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "upstream_tests": {"on_commit": true, "test_set": {"chat": ["integration"], "supportphone": ["integration"], "supporttext": ["integration"]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s", "packages": ["postgresql-client"]}}, {"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libgeos-dev", "libspatialindex-dev", "postgresql-client"]}}]}}, "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "main"}], "kubernetes": {"enabled": true}}]], "facets": [{"name": "main", "member": "supportcontact.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 50}}}}, {"name": "canary", "member": "supportcontact.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 2}}], "envoy": {"profile": "python", "settings": {"services": [{"name": "supportcontact"}], "common_settings": {"external_hosts": {"kinesis_iad": null, "firehose_iad": null}, "internal_hosts": {"guardian": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "messaging": null, "push": null, "ratelimit": null, "regions": null, "rides": null, "supportconfig": null, "supportcontact": null, "supportphone": null, "supporttext": null, "tcs": null, "users": null}}}}, "logging": {"supportcontact": {"fields": {"request_data": "keyword", "channel": "keyword", "ticket_id": "keyword", "interaction_id": "keyword", "case_id": "keyword", "user_phone": "keyword", "additional_fields": "keyword", "ticket_type": "keyword", "service_provider": "keyword", "user_id": "keyword", "user_email": "keyword", "target_queue": "keyword", "exception": {"message": "keyword", "class": "keyword"}, "method": "keyword", "phone_number": "keyword", "ticket_data": "keyword", "support_ticket_fields": {"additional_fields": {"source": "keyword", "subject": "keyword", "help_session_id": "keyword", "submission_reason": "keyword", "page_url": "keyword"}}, "route_name": "keyword", "impl_method": "keyword", "request": "keyword", "country_code": "keyword", "old_status": "keyword", "chat_session_id": "keyword", "failed_functions": "keyword", "new_status": "keyword"}}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "version": "da011991a7243c040d4adffb904e8f75dc841faf", "images": [{"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "supportcontactdata": {"name": "supportcontactdata", "description": "Support contact configs", "repository": "git@github.com:lyft/supportcontactdata.git", "image_type": "data", "service_tier": 1, "slack": "#support-bots", "team_email": "support-tech@lyft.com", "pagerduty_escalation_policy": "Support Platform", "languages": ["bash", "python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/supportcontactdata"]}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}, {"name": "unit", "type": "jailed", "run_in_dev": false, "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "c7067460d2206ec0275b164941c31c35651ee019", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "supportdataingest": {"name": "supportdataingest", "description": "Support Data ingest service for support analytics", "repository": "git@github.com:lyft/supportdataingest.git", "image_type": "service", "service_tier": 2, "slack": "#support-bots", "team_email": "support-data@lyft.com", "pagerduty_escalation_policy": "Support Platform", "languages": ["bash", "python"], "credentials": true, "docs": {"autogen_modules": ["supportdataingest"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "sqs.server", "dsfeatures.dev", "supportdataingest.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "supportdataingest.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "supportdataingest.dev", "container": "supportdataingest.legacy", "command": "make test_integration", "reports": {"junit": "build/integration.xml"}}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "supportdataingest"}, {"name": "supportdataingestbatch"}], "common_settings": {"internal_hosts": {"ats": null, "jobschedulernormalweb": null, "jobschedulerbulkweb": null, "messaging": null, "users": null, "dsfeatures": null, "dsfeatureswrites": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "qminder": null, "sqs_iad": null, "twilio": null, "zendesk_v2": null, "survey_monkey": null, "workday_roster": null}, "authorization": {"permissions": {"debugger": {"paths": ["/v1/debugger*"]}, "twilio_event": {"paths": ["/v1/ingest/twilio/event*"]}, "qminder_webhook": {"paths": ["/v1/ingest/qminder*"]}, "retail_nps_survey": {"paths": ["/v1/retail-nps-survey*"]}, "solved-ticket-event": {"paths": ["/v1/solved-ticket-event*"]}}, "bindings": {"envoy": ["debugger", "twilio_event", "qminder_webhook"], "jobschedulernormal": ["retail_nps_survey", "solved-ticket-event"], "taskqueuenormal": ["retail_nps_survey", "solved-ticket-event"]}}}}}, "logging": {"supportdataingest": {"fields": {"event_name": "keyword", "event": {"ingest_id": "keyword", "longitude": "keyword", "latitude": "keyword", "ticket_event_id": "keyword", "ticket_event_type": "keyword", "timestamp": "keyword", "child_event_via": "keyword", "child_event_id": "keyword", "reporter_ip_address": "keyword", "__metadata__": {"aic_time": "keyword", "fanner_time": "keyword", "logged_at": "keyword"}, "child_event_type": "keyword", "ticket_event_via": "keyword", "updater_id": "keyword", "event_id": "keyword", "logged_at": "keyword", "reporter_hostname": "keyword", "event_name": "keyword", "location": "keyword", "created_at": "date", "occurred_at": "keyword", "ticket_id": "keyword", "source_pipeline": "keyword", "status": "keyword", "previous_value": "keyword", "client": "keyword", "via_reference_id": "keyword"}, "field_name": "keyword", "field_value": "keyword", "error_id": "keyword", "error_msg": "keyword", "email": "keyword", "phone": "keyword", "exception": {"message": "keyword", "class": "keyword"}, "exception_class": "keyword", "exception_code": "long", "submission_reason": "keyword", "to": "keyword", "direction": "keyword", "TaskAttributes": "keyword", "TaskChannelUniqueName": "keyword", "TaskQueueName": "keyword", "TaskSid": "keyword", "EventType": "keyword"}}, "supportdataingestbatch": {"fields": {"error_msg": "keyword", "error_id": "keyword", "field_name": "keyword", "field_value": "keyword", "event_name": "keyword", "id": "keyword", "last_ingested_at": "date", "backfill": "boolean", "succeeded": "boolean", "time_started_at": "date", "time_finished_at": "date", "job_name": "keyword", "child_event_via": "keyword", "ticket_event_type": "keyword", "child_events": "keyword", "created_at": "date", "child_event_id": "keyword", "ticket_event_id": "keyword", "ticket_id": "long", "ticket_event_via": "keyword", "child_event_type": "keyword", "timestamp": "keyword", "occurred_at": "keyword", "via": "keyword", "event_type": "keyword", "updater_id": "keyword", "ip_address": "keyword", "latitude": "float", "location": "keyword", "longitude": "float", "phone_number": "keyword", "phone": "keyword", "client": "keyword", "flags": "keyword", "trusted": "boolean", "email": "keyword", "customer_email": "keyword", "source": "keyword", "count": "long", "field": "keyword", "percentage": "float", "resolution_reason": "keyword", "json_email_identifier": "keyword", "message_id": "keyword", "via_reference_id": "keyword", "raw_email_identifier": "keyword", "metric": "keyword", "current_time": "date", "exception": "keyword", "traceback": "keyword", "attempt_num": "long", "help_method": "keyword", "tickets_created": "long", "tickets_on_hold": "long", "tickets_solved": "long", "tickets_closed": "long", "communication_channel": "keyword", "failed_record": "keyword", "discrepancy": "float", "previous_value": "keyword"}}}, "version": "9121492b83e1bc69b0f3812e0df2d08b481db230", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "supportknowledgeint": {"name": "supportknowledgeint", "description": "Also known as Compass \u2014 An internal knowledge base for CET", "repository": "git@github.com:lyft/supportknowledgeint.git", "image_type": "service", "service_tier": 2, "slack": "#support-bots", "team_email": "support-eng-ast@lyft.com", "pagerduty_escalation_policy": "Associate Tools", "languages": ["javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "workdir": "/code/supportknowledgeint", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "cdnupload", "command": "/code/supportknowledgeint/cdn-upload", "workdir": "/code/supportknowledgeint", "sub_image": "k8s"}], "frontend": {"node_version": "10.14.1-1nodesource1"}, "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false}, "groups": [{"name": "dev", "members": ["control.dev", "supportknowledgeint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "supportknowledgeint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "execution", "group": "supportknowledgeint.dev", "container": "supportknowledgeint.legacy", "command": "make test_lint"}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "deploy_settings": {"window_start": "07:00 America/Los_Angeles", "window_end": "14:30 America/Los_Angeles"}, "envoy": {"profile": "python", "settings": {"services": [{"name": "supportknowledgeint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"tom": null, "acl": null, "privacyaudit": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2inode:service.c613d468388654eeca11d9a11603d9872a559e38", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}]}}, "facets": [{"name": "main", "member": "supportknowledgeint.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "supportknowledgeint.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "assets", "member": "supportknowledgeint.cdnupload", "type": "job"}], "version": "d2913078bf636e2713fb98e54bb195305c5a4fdd", "images": [{"parent": {"name": "s2inode", "version": "c613d468388654eeca11d9a11603d9872a559e38", "sub_image": "service", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "supportphone": {"name": "supportphone", "description": "A centralized service that routes calls to support associates", "repository": "git@github.com:lyft/supportphone.git", "image_type": "service", "service_tier": 1, "slack": "#support-bots", "team_email": "support-tech@lyft.com", "pagerduty_escalation_policy": "Support Platform", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn supportphone:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/supportphone", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}, {"name": "deletevoicerecordings", "command": "service_venv python manage.py delete_voice_recordings", "workdir": "/code/supportphone", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}], "configsets": ["supportcontactdata"], "groups": [{"name": "dev", "members": ["control.dev", "idl.server", "supportphone.legacy", "supportconfig.dev"]}, {"name": "integration", "members": ["supportphone.dev", "supportcontact.dev", "supportconfig.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "supportphone.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "supportphone.integration", "container": "supportphone.legacy", "command": "make test_integration"}], "upstream_tests": {"on_commit": true, "test_set": {"supportcontact": ["integration"]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}]}}, "facets": [{"name": "main", "member": "supportphone.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 20}}}}, {"name": "canary", "member": "supportphone.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "deletevoicerecordingscron", "member": "supportphone.deletevoicerecordings", "type": "cron", "schedule": "*/60 * * * *"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}, {"facet": "deletevoicerecordingscron"}], "kubernetes": {"enabled": true}, "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "deletevoicerecordingscron"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "supportphone"}], "common_settings": {"internal_hosts": {"supportphone": null, "supportconfig": null, "supportcontact": null, "users": null}, "external_hosts": {"twilio": null}, "authorization": {"permissions": {"ivr": {"paths": ["/v1/ivr*"]}, "inbound": {"paths": ["/v1/inbound*"]}, "voicemail": {"paths": ["/v1/instruct_task_assignment*", "/v1/voicemail*"]}, "status": {"paths": ["/v1/status*"]}, "fallback": {"paths": ["/v1/fallback*", "/v1/task/instruct/fallback*"]}, "sms": {"paths": ["/v1/sms/reply"]}}, "bindings": {"envoy": ["fallback", "ivr", "inbound", "voicemail", "status", "sms"], "supportcontact": ["*"]}}}}}, "logging": {"supportphone": {"fields": {"request": "keyword", "call_sid": "keyword", "target_queue": "keyword", "review_reason": "keyword", "to_phone_number": "keyword", "contact_form_selection": "keyword", "sid": "keyword", "payload": "keyword", "account_sid": "keyword", "level": "keyword", "from": "keyword", "phone_number": "keyword", "country_code": "keyword", "impl_method": "keyword", "route_name": "keyword", "interaction_id": "keyword", "hap": "keyword", "support_ticket_fields": {"additional_fields": {"tags": "keyword"}}, "ivr_console_id": "keyword", "current activity_sid": "keyword", "exception": {"class": "keyword", "message": "keyword"}}}}, "version": "0f2338213386edb0bd96791d0262667fa6ab17d6", "images": [{"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "supportplatformint": {"name": "supportplatformint", "description": "Internal web frontend for support associates", "repository": "git@github.com:lyft/supportplatformint.git", "image_type": "service", "service_tier": 1, "slack": "#support-bots", "team_email": "support-tech@lyft.com", "pagerduty_escalation_policy": "Support Platform", "languages": ["javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "workdir": "/code/supportplatformint", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "cdnupload", "command": "/code/supportplatformint/cdn-upload", "workdir": "/code/supportplatformint", "sub_image": "k8s"}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "supportplatformint.legacy", "supportactions.dev", "supporttoolscontent.dev", "supportconfig.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "supportplatformint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_coverage", "reports": {"cobertura": ".coverage/cobertura-coverage.xml"}}, {"name": "lint", "type": "execution", "group": "supportplatformint.dev", "container": "supportplatformint.legacy", "command": "make test_lint"}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"name": "production-beta", "legacy": false, "targets": [{"facet": "beta"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}], {"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "supportplatformint"}, {"name": "supportplatformintbeta"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null, "privacyaudit": null, "supportactions": null, "supportconfig": null, "supportcontact": null, "supporttext": null, "supporttoolscontent": null, "tom": null, "users": null}}}}, "logging": {"supportplatformint": {"fields": {"interactionId": "keyword", "status": "long", "body": "keyword", "ticketId": "keyword", "associateEmail": "keyword", "userId": "keyword", "taskUserPhone": "keyword", "lyftUserPhone": "keyword", "workerSid": "keyword", "lineno": "long", "error": "keyword", "filename": "keyword", "colno": "long", "taskSid": "keyword", "type": "keyword", "id": "keyword", "data": "keyword", "tasks": "keyword", "statName": "keyword", "message": "keyword", "stack": "keyword", "zendeskTicketId": "keyword"}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2inode:service.f633733a7fe0e80669ecd9bb6ee09b12d06a9666", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}]}}, "facets": [{"name": "main", "member": "supportplatformint.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 2}}}}, {"name": "canary", "member": "supportplatformint.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "beta", "member": "supportplatformint.service", "envoy_service": "supportplatformintbeta", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "assets", "member": "supportplatformint.cdnupload", "type": "job"}], "version": "86fa05e65268018df6fc699a126cb9c86a8f8baa", "images": [{"parent": {"name": "s2inode", "version": "f633733a7fe0e80669ecd9bb6ee09b12d06a9666", "sub_image": "service", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "supportqa": {"name": "supportqa", "description": "Backend for supportqaint, a tool to help support source and evaluate support cases.", "repository": "git@github.com:lyft/supportqa.git", "slack": "#support-bots", "team_email": "support-eng-ast@lyft.com", "pagerduty_escalation_policy": "Associate Tools", "image_type": "service", "service_tier": 2, "languages": ["python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 50, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app:app --workers=2 -k gevent --worker-connections=1000 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/supportqa", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "elasticsearch6.server", "supportqa.legacy"]}, {"name": "service_group", "members": ["supportqa.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "supportqa.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "supportqa.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 3, "max_size": 7}}}}, {"name": "canary", "member": "supportqa.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "deploy_settings": {"window_start": "09:00 US/Central", "window_end": "18:00 US/Central"}, "envoy": {"profile": "python", "settings": {"services": [{"name": "supportqa"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"callminer_ingest": null, "dynamodb_iad": null, "kinesis_iad": null}, "internal_hosts": {"tom": null}}}}, "version": "f1329051b1ed6c9ed11019dac1cbb7561046f599", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "supportqaint": {"name": "supportqaint", "description": "Service to source and evaluate support interactions", "repository": "git@github.com:lyft/supportqaint.git", "image_type": "service", "service_tier": 2, "slack": "#support-bots", "team_email": "support-eng-ast@lyft.com", "pagerduty_escalation_policy": "Associate Tools", "languages": ["javascript"], "credentials": true, "frontend": {"node_version": "10.14.1-1nodesource1"}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- npm run prod", "workdir": "/code/supportqaint", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}, "exports": [{"name": "api", "port": 8080}]}, {"name": "cdnupload", "command": "/code/supportqaint/cdn-upload", "workdir": "/code/supportqaint", "sub_image": "k8s"}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": false, "browserstack": false}, "groups": [{"name": "dev", "members": ["control.dev", "supportqa.dev", "supportqaint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "supportqaint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "execution", "group": "supportqaint.dev", "container": "supportqaint.legacy", "command": "make test_lint"}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "deploy_settings": {"window_start": "09:00 US/Central", "window_end": "18:00 US/Central"}, "envoy": {"profile": "python", "settings": {"services": [{"name": "supportqaint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"tom": null, "supportqa": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093"}}, {"name": "s2i", "params": {"builder": "lyft/s2inode:service.835f87582b1b091b3ef8895d577ba3439540abbe", "buildargs": ["ASSET_DIR=.dist/static", "CDN_PATH=_next/static"], "sub_image": "k8s"}}]}}, "facets": [{"name": "main", "member": "supportqaint.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "canary", "member": "supportqaint.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "assets", "member": "supportqaint.cdnupload", "type": "job"}], "version": "665b9a0db8b220c31a554752104fa6aa7c8e4009", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2inode", "version": "835f87582b1b091b3ef8895d577ba3439540abbe", "sub_image": "service", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "supporttext": {"name": "supporttext", "description": "A centralized service that routes sms and chat to support associates", "repository": "git@github.com:lyft/supporttext.git", "slack": "#support-bots", "team_email": "support-tech@lyft.com", "pagerduty_escalation_policy": "Support Platform", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}, {"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn supporttext:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/supporttext", "limits": {"cpu": 2, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "smsnumbercapacitymonitor", "command": "service_venv python manage.py sms_number_capacity_monitor", "workdir": "/code/supporttext", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}, {"name": "expireonholdinteractions", "command": "service_venv python manage.py expire_on_hold_interactions", "workdir": "/code/supporttext", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}, {"name": "closependingsimulatedinteractions", "command": "service_venv python manage.py close_pending_simulated_interactions", "workdir": "/code/supporttext", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}, {"name": "closestuckinteractions", "command": "service_venv python manage.py close_stuck_interactions", "workdir": "/code/supporttext", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}, {"name": "smsnumbersynchronizer", "command": "service_venv python manage.py sms_number_synchronizer", "workdir": "/code/supporttext", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}], "configsets": ["supportcontactdata"], "groups": [{"name": "dev", "members": ["control.dev", "idl.server", "dynamodb.dev", "supporttext.legacy"]}, {"name": "integration", "members": ["supportcontact.dev", "supporttext.dev", "lyfttestlib.core", "supportconfig.dev"]}, {"name": "service_group", "members": ["supporttext.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "supporttext.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "supporttext.integration", "container": "supporttext.legacy", "command": "make test_integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "upstream_tests": {"on_commit": true, "test_set": {"supportcontact": ["integration"]}}, "facets": [{"name": "main", "member": "supporttext.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 20}}}}, {"name": "canary", "member": "supporttext.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}, {"name": "smsnumbercapacitymonitorcron", "member": "supporttext.smsnumbercapacitymonitor", "type": "cron", "schedule": "@hourly"}, {"name": "expireonholdinteractionscron", "member": "supporttext.expireonholdinteractions", "type": "cron", "schedule": "*/5 * * * *"}, {"name": "closependingsimulatedinteractionscron", "member": "supporttext.closependingsimulatedinteractions", "type": "cron", "schedule": "*/10 * * * *"}, {"name": "closestuckinteractionscron", "member": "supporttext.closestuckinteractions", "type": "cron", "schedule": "*/30 * * * *"}, {"name": "smsnumbersynchronizercron", "member": "supporttext.smsnumbersynchronizer", "type": "cron", "schedule": "*/10 * * * *"}], "deploy": [{"name": "staging", "orca": [{"region": "iad"}], "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "smsnumbercapacitymonitorcron"}, {"facet": "expireonholdinteractionscron"}, {"facet": "closestuckinteractionscron"}, {"facet": "closependingsimulatedinteractionscron"}, {"facet": "smsnumbersynchronizercron"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "smsnumbercapacitymonitorcron"}, {"facet": "expireonholdinteractionscron"}, {"facet": "closestuckinteractionscron"}, {"facet": "smsnumbersynchronizercron"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "supporttext"}], "common_settings": {"internal_hosts": {"supportconfig": null, "supportcontact": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "twilio": null}, "authorization": {"permissions": {"external_inbound": {"paths": ["/v1/sms/inbound*", "/v1/chat/inbound*", "/v1/sms/status*"]}}, "bindings": {"envoy": ["external_inbound"], "chat": ["*"], "groundcontrol": ["*"], "migrationworkers": ["*"], "supportcontact": ["*"], "supportplatformint": ["*"]}}}}}, "logging": {"supporttext": {"fields": {"channel_sid": "keyword", "source": "keyword", "event_type": "keyword", "from": "keyword", "to": "keyword", "error_code": "keyword", "target_queue": "keyword", "support_interaction_id": "keyword", "from_phone_number": "keyword", "params": "keyword", "interaction_id": "keyword", "interaction_ids": "keyword", "lyft_phone_number": "keyword", "lyft_phone": "keyword", "message_id": "keyword", "session_id": "keyword", "session_name": "keyword", "metadata": {"interaction_id": "keyword", "target_queue": "keyword"}, "user_id": "keyword", "blacklist_status": "keyword", "url": "keyword", "exception": {"class": "keyword", "message": "keyword"}}}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "version": "55d5521d6a19cd2dfbaec61cb5f95bfab3c0ae45", "images": [{"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "py37", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "supporttoolscontent": {"name": "supporttoolscontent", "description": "Backend service for serving internal support content to customer service tooling", "repository": "git@github.com:lyft/supporttoolscontent.git", "slack": "#support-bots", "team_email": "support-eng-ast@lyft.com", "pagerduty_escalation_policy": "Associate Tools", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:deb42d25da0e6d5fe565c019883e458b4b31b696"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn supporttoolscontent.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/supporttoolscontent", "limits": {"cpu": 1, "memory": "128Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "supporttoolscontent.legacy"]}, {"name": "service_group", "members": ["supporttoolscontent.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "supporttoolscontent.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "supporttoolscontent.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "supporttoolscontent.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "deploy_settings": {"window_start": "09:00 US/Central", "window_end": "18:00 US/Central"}, "envoy": {"profile": "python", "settings": {"services": [{"name": "supporttoolscontent"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"family": null, "mailer": null}}}}, "version": "7858c6b626febf85c9cf7af712cf86b366f7f867", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "supportupdatesint": {"name": "supportupdatesint", "description": "An internal frontend service for sharing the latest news and updates affecting the CET team", "repository": "git@github.com:lyft/supportupdatesint.git", "slack": "#associate-tools-eng", "team_email": "support-eng-ast@lyft.com", "pagerduty_escalation_policy": "Support XP", "image_type": "service", "service_tier": 3, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "supportupdatesint.legacy"]}, {"name": "service_group", "members": ["supportupdatesint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "supportupdatesint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "execution", "group": "supportupdatesint.dev", "container": "supportupdatesint.legacy", "command": "make test_lint", "autotrigger": false}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "supportupdatesint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null, "supporttoolscontent": null}}}}, "version": "6a4b299f37258d8ee78ae7c78733f0bc0937e9ae", "images": [{"parent": {"name": "opsbase", "version": "06ce4a2cae6232fe3834c5c22664d30e640a62fd", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "06ce4a2cae6232fe3834c5c22664d30e640a62fd", "sub_image": null, "external": false}}, "surveybot2": {"name": "surveybot2", "description": "Slackbot used to distribute internal engineering productivity survey", "repository": "git@github.com:lyft/surveybot2.git", "image_type": "service", "service_tier": 3, "slack": "#survey-bot-support", "team_email": "devx-team@lyft.com", "pagerduty_escalation_policy": "DevX", "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "omnibot.dev", "team.dev", "surveybot2.legacy"]}, {"name": "integration", "members": ["surveybot2.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "surveybot2.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "surveybot2.integration", "container": "surveybot2.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "surveybot2"}, {"name": "surveybot2batch"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"omnibot": null, "team": null}}}}, "logging": {"surveybot2batch": {"fields": {"survey_id": "keyword", "email": "keyword", "slack_user": "keyword", "short_name": "keyword", "code": "long", "survey_name": "keyword"}}}, "version": "441186865e3461665ac4f4c898374a1b21a1b0d6", "images": [{"parent": {"name": "opsbase", "version": "8e738741d84a4e5507052068fa7dafe771cb111a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "8e738741d84a4e5507052068fa7dafe771cb111a", "sub_image": null, "external": false}}, "sustainability": {"name": "sustainability", "description": "A service repository storing code related to Lyft's sustainability efforts", "repository": "git@github.com:lyft/sustainability.git", "slack": "#sustainability-dev", "team_email": "bkim@lyft.com", "pagerduty_escalation_policy": "Sustainability Eng", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/sustainability", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "sustainability.legacy"]}, {"name": "service_group", "members": ["sustainability.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "sustainability.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "sustainability.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "sustainability.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "sustainability"}]}}, "version": "abf921000d1e96fbd219c1ba492455bc39ffd354", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "switchboard": {"name": "switchboard", "description": "switchboard", "repository": "git@github.com:lyft/switchboard.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "lyftidl.server", "ratelimit.dev", "switchboard.legacy"]}, {"name": "fixtures", "members": ["control.dev", "dynamodb.server", "lyftidl.server", "ratelimit.dev", "switchboard.legacy", "jobscheduler.dev"]}, {"name": "integration", "members": ["switchboard.dev", "jobscheduler.dev", "usergroups.dev", "users.dev", "regions.dev", "ratelimit.dev", "auth.dev", "postgresql.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "switchboard.dev"}, {"name": "unit", "type": "jailed", "command": "env TEST_TAGS=\"not unit_legacy\" make test_unit"}, {"name": "integration", "type": "execution", "group": "switchboard.integration", "container": "switchboard.legacy", "command": "make test_integration"}, {"name": "fixture", "type": "execution", "group": "switchboard.fixtures", "container": "switchboard.legacy", "command": "make test_fixture"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "command": "make test_unit", "container": "switchboard.legacy", "group": "switchboard.dev"}], "slack": "#notifications-bots", "team_email": "notifications-eng@lyft.com", "pagerduty_escalation_policy": "Notifications", "service_tier": 0, "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "languages": ["python"], "image_type": "service", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "switchboard"}, {"name": "switchboardbatch"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"jobschedulernormalweb": null, "regions": null, "switchboard": null}, "external_hosts": {"dynamodb_iad": null, "twilio": null}, "redis": {"switchboardmultiredis": {"port": 6380}}, "authorization": {"permissions": {"ride_message": {"paths": ["/v1/ride_message"]}, "allow_all_other": {"not_paths": ["/v1/ride_message"]}}, "bindings": {"ridechat": ["ride_message"], "*": ["allow_all_other"]}}}, "override_settings": [{"services": [{"name": "switchboard"}], "settings": {"internal_hosts": {"ats": null, "karma": null, "messaging": null, "ratelimit": null, "ridechat": null, "rides": null, "routes": null, "routesapi": null, "supply": null, "tcs": null, "tripsapi": null, "usergroups": null, "userpreferences": null, "users": null}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}}}]}}, "logging": {"switchboardbatch": {"fields": {"country": "keyword", "count": "long", "service_name": "keyword", "phone_number": "keyword", "service": "keyword", "provider": "keyword", "service_country": "keyword", "created_at": "keyword", "version": "long", "last_updated": "keyword", "expires_at": "keyword", "service_metadata": {"driver_id": "keyword"}, "list_size": "long"}}, "switchboard": {"fields": {"req": {"method": "keyword", "url": "keyword", "path": "keyword"}, "phone_number": "keyword", "service": "keyword", "expiration_timestamp_ms": "keyword", "to_user": "keyword", "from_user": "long", "ttl_ms": "long", "sid": "keyword", "driver_id": "keyword", "driven_recently": "boolean", "status": "keyword", "service_metadata": {"driver_id": "keyword"}, "ttl": "long", "to_number": "keyword", "kv": {"from_number": "keyword", "to_number": "keyword", "status_callback": "keyword", "recording_sid": "keyword", "from_phone_number": "keyword", "addon_key": "keyword", "call_sid": "keyword", "dial_number_url": "keyword", "to_twilio_number": "keyword", "to_user_lyft_id": "keyword", "pre_dial_play_url": "keyword", "recording_status_callback_method": "keyword", "recording_status_callback": "keyword", "record": "keyword", "transcript": "keyword", "recording_url": "keyword", "to_phone_number": "keyword", "recording_status": "keyword", "from_user_lyft_id": "keyword", "caller_lyft_id": "keyword", "driver_lyft_id": "keyword", "error": "keyword", "contact_sid": "keyword", "to_user": "keyword", "transcription_response_json": "keyword", "sid": "keyword", "user_id": "keyword", "has_ride_info": "boolean", "service": "keyword", "string": "keyword"}, "from_number": "keyword", "provider": "keyword", "incoming_type": "keyword", "leasing_service": "keyword", "route_action": {"action": "keyword", "url": "keyword", "to_phone_number": "keyword", "context": {"to_user_id": "keyword", "from_user_id": "keyword"}, "from_phone_number": "keyword", "to_user_id": "keyword"}, "call_context_provider": "keyword", "call_context_from_number": "keyword", "router_response_is_successful": "boolean", "call_context_sid": "keyword", "call_context_to_number": "keyword", "call_context_contact_type": "keyword", "router_response_type": "keyword", "call_context_from_user_id": "keyword", "call_context_to_user_id": "keyword", "message_type": "keyword", "exc": {"type": "keyword", "message": "keyword", "traceback": "keyword", "args": "keyword", "response": {"request": {"url": "keyword", "method": "keyword"}, "code": "long", "value": "keyword"}, "twilio": {"uri": "keyword", "method": "keyword", "code": "long", "status": "long"}}, "country": "keyword", "body": "keyword", "path": "keyword"}}}, "version": "02c7f6497a51a18253bded2b8a92d60065651eb9", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "taskqueue": {"name": "taskqueue", "description": "Service to schedule and deliver delayed jobs", "repository": "git@github.com:lyft/taskqueue.git", "image_type": "service", "languages": ["go"], "credentials": true, "credentials_legacy": true, "containers": [{"name": "service", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}]}}, "groups": [{"name": "dev", "members": ["control.dev", "sqs.server", "dynamodb.server", "redis.server", "jobscheduler.dev", "taskqueue.service"]}, {"name": "integration", "members": ["taskqueue.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "taskqueue.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "container": "taskqueue.service", "group": "taskqueue.integration", "command": "make integration", "reports": {"junit": "build/integration.xml"}}, {"name": "coverage_files", "type": "jailed", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#async-tasks-platform", "notification_overrides": {"deploy": {"slack": "#async-tasks-deploy"}, "pr_merge": {"slack": "#async-tasks-deploy"}, "test_failure": {"slack": "#async-tasks-deploy", "environments": ["production"]}}, "pagerduty_escalation_policy": "Async Tasks Platform", "team_email": "async-tasks-platform@lyft.com", "slack_deploy_notification_environments": ["staging", "canary", "production"], "service_tier": 0, "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "go", "settings": {"services": [{"name": "taskqueue"}, {"name": "taskqueueurgent", "traffic_type": "egress_only"}, {"name": "taskqueuebulk", "traffic_type": "egress_only"}, {"name": "taskqueuenormal", "traffic_type": "egress_only"}, {"name": "taskqueuemigration", "traffic_type": "egress_only"}, {"name": "taskqueuewebhook", "traffic_type": "egress_only"}, {"name": "taskqueuereaderwriterbulk", "traffic_type": "egress_only"}, {"name": "taskqueuereaderwriternormal", "traffic_type": "egress_only"}, {"name": "taskqueuescanner", "traffic_type": "egress_only"}, {"name": "taskqueuebulkweb"}, {"name": "taskqueuemigrationweb"}, {"name": "taskqueuenormalweb"}, {"name": "taskqueueurgentweb"}], "common_settings": {"internal_hosts": {"*": null}, "external_hosts": {"dynamodb_iad": null, "sqs_iad": null, "sqs_pdx": null}, "redis": {"jobschedulermultiredis": {"port": 9579}}}}}, "logging": {"taskqueueurgent": {"fields": {"topic": "keyword", "pagerduty_service": "keyword"}}, "taskqueuenormal": {"fields": {"topic": "keyword", "pagerduty_service": "keyword"}}, "taskqueuebulk": {"fields": {"topic": "keyword", "pagerduty_service": "keyword"}}, "taskqueueurgentweb": {"fields": {"topic": "keyword"}}, "taskqueuenormalweb": {"fields": {"topic": "keyword"}}, "taskqueuebulkweb": {"fields": {"topic": "keyword"}}}, "version": "9576f18eb9aa814a5cae774a0a0de137b8758b12", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "taskqueuereaderwriter": {"name": "taskqueuereaderwriter", "repository": "git@github.com:lyft/taskqueuereaderwriter.git", "description": "A service to run TaskQueue's slow path", "service_tier": 0, "slack": "#async-tasks-platform", "notification_overrides": {"deploy": {"slack": "#async-tasks-deploy"}, "pr_merge": {"slack": "#async-tasks-deploy"}, "test_failure": {"slack": "#async-tasks-deploy", "environments": ["production"]}}, "pagerduty_escalation_policy": "Async Tasks Platform", "team_email": "async-tasks-platform@lyft.com", "slack_deploy_notification_environments": ["staging", "canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:5c3bdc374928bda6d3b2074a7712e831b0b49758"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:8ad0040e2e37145a4ff8cdfc6669f48462d32b14", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "readernormal", "command": "dumb-init -- taskqueuereaderwriter start --service reader --priority normal", "limits": {"cpu": 4, "memory": "2Gi"}, "sub_image": "k8s", "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}, {"name": "readerbulk", "command": "dumb-init -- taskqueuereaderwriter start --service reader --priority bulk", "limits": {"cpu": 4, "memory": "2Gi"}, "sub_image": "k8s", "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}, {"name": "writernormal", "command": "dumb-init -- taskqueuereaderwriter start --service writer --priority normal", "limits": {"cpu": 4, "memory": "2Gi"}, "sub_image": "k8s", "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}, {"name": "writerbulk", "command": "dumb-init -- taskqueuereaderwriter start --service writer --priority bulk", "limits": {"cpu": 4, "memory": "2Gi"}, "sub_image": "k8s", "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "sqs.server", "dynamodb.server", "taskqueuereaderwriter.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "taskqueuereaderwriter.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "taskqueuereaderwriter.dev", "container": "taskqueuereaderwriter.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "readernormal", "member": "taskqueuereaderwriter.readernormal", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 20}}}}, {"name": "readerbulk", "member": "taskqueuereaderwriter.readerbulk", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 20}}}}, {"name": "writernormal", "member": "taskqueuereaderwriter.writernormal", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 20}}}}, {"name": "writerbulk", "member": "taskqueuereaderwriter.writerbulk", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 20}}}}, {"name": "readernormalcanary", "member": "taskqueuereaderwriter.readernormal", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "readerbulkcanary", "member": "taskqueuereaderwriter.readerbulk", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "writernormalcanary", "member": "taskqueuereaderwriter.writernormal", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "writerbulkcanary", "member": "taskqueuereaderwriter.writerbulk", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "facet_groups": [{"name": "canary", "members": ["readernormalcanary"]}, {"name": "main", "members": ["readernormal"]}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true, "mode": "mixed"}, "orca": [{"region": "iad"}], "targets": [{"facet_group": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true, "mode": "mixed"}, "targets": [{"facet_group": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true, "mode": "mixed"}, "targets": [{"facet_group": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true, "mode": "mixed"}, "targets": [{"facet_group": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "mode": "mixed"}, "targets": [{"facet_group": "main"}, {"facet_group": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {"external_hosts": {"dynamodb_iad": null, "sqs_iad": null, "sqs_pdx": null}}, "services": [{"name": "taskqueuereaderwriter"}]}}, "version": "381767508fb6b182c40c44664c44ba886e4dec54", "images": [{"parent": {"name": "opsbase", "version": "5c3bdc374928bda6d3b2074a7712e831b0b49758", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "8ad0040e2e37145a4ff8cdfc6669f48462d32b14", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "5c3bdc374928bda6d3b2074a7712e831b0b49758", "sub_image": null, "external": false}}, "tcs": {"name": "tcs", "description": "targeted configuration service", "repository": "git@github.com:lyft/tcs.git", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:40c411171447b7e18aab77bf2e3ed74bc6587622", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "start_time": 180, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "sub_image": "k8s", "command": "service_venv gunicorn app_wsgi:app --reuse-port --workers=8 -k gevent --worker-connections 1 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/tcs", "limits": {"cpu": 8, "memory": "4Gi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "facets": [{"name": "main", "member": "tcs.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 35}, "environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 2, "max_size": 540}}}}, {"name": "canary", "member": "tcs.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1}}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "usergroups.dev", "users.dev", "supply.dev", "tcs.legacy", "regions.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "tcs.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "virtualenv": "service_venv", "markers": "not unit_legacy"}, {"name": "integration", "type": "execution", "group": "tcs.dev", "container": "tcs.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "container": "tcs.legacy", "group": "tcs.dev", "framework": "pytest", "coverage": false, "targets": ["tests/unit"], "virtualenv": "service_venv", "markers": "unit_legacy"}], "team_email": "experimentation@lyft.com", "pagerduty_escalation_policy": "Experimentation", "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "links": [{"text": "Runbook deployment process", "url": "https://github.com/lyft/tcs/blob/master/docs/RUNBOOK.md#deployment-process"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "links": [{"text": "Runbook deployment process", "url": "https://github.com/lyft/tcs/blob/master/docs/RUNBOOK.md#deployment-process"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "links": [{"text": "Runbook deployment process", "url": "https://github.com/lyft/tcs/blob/master/docs/RUNBOOK.md#deployment-process"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "links": [{"text": "Runbook deployment process", "url": "https://github.com/lyft/tcs/blob/master/docs/RUNBOOK.md#deployment-process"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], {"name": "production", "legacy": false, "links": [{"text": "Runbook deployment process", "url": "https://github.com/lyft/tcs/blob/master/docs/RUNBOOK.md#deployment-process"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "slack": "#experimentation", "languages": ["python"], "image_type": "service", "service_tier": 1, "envoy": {"profile": "python", "settings": {"services": [{"name": "tcs"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 65}}}, "redis": {"tcsmultiredis": {"port": 6380}}, "redis_clusters": {"tcsresponsecache": {"aws_random_identifier": "vngjnv", "port": 6382, "op_timeout_ms": 400, "read_policy": "PREFER_MASTER"}}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}, "internal_hosts": {"usereligibilities": null, "usergroups": null, "users": null, "supply": null, "jobschedulerbulkweb": null, "ratelimit": null, "tcs": null, "www2": null, "regions": null}}}}, "logging": {"tcs": {"fields": {"gevent_pause_detector": {"max_blocking_time": "float"}, "exc_type": "keyword", "call_signature": "keyword", "code": "long", "error": "keyword", "error_description": "keyword"}}}, "version": "a8ef7fc386f377b0d84d10f35453b63c7752866d", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "40c411171447b7e18aab77bf2e3ed74bc6587622", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "tcseditor": {"name": "tcseditor", "description": "Service to manage configuration data for TCS", "repository": "git@github.com:lyft/tcseditor.git", "credentials": true, "image_type": "service", "languages": ["bash", "python"], "slack": "#experimentation", "team_email": "experimentation@lyft.com", "pagerduty_escalation_policy": "Experimentation", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s", "packages": ["postgresql"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/tcseditor", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}}, {"name": "tcseditoroverseer", "command": "service_venv python manage_overseer.py", "workdir": "/code/tcseditor", "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["adtechlogger.dev", "adtechworkflows.dev", "control.dev", "postgresql.dev", "tcs.dev", "tcseditor.legacy", "team.dev", "usergroups.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "tcseditor.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "virtualenv": "service_venv", "markers": "not unit_legacy"}, {"name": "integration", "type": "execution", "group": "tcseditor.dev", "container": "tcseditor.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "container": "tcseditor.legacy", "group": "tcseditor.dev", "framework": "pytest", "coverage": false, "targets": ["tests/unit"], "virtualenv": "service_venv", "markers": "unit_legacy"}], "deploy": [{"name": "staging", "automatic": true, "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}, {"facet": "tcseditoroverseer"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "tcseditoroverseer"}], "kubernetes": {"enabled": true}}], "facets": [{"name": "main", "member": "tcseditor.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "canary", "member": "tcseditor.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "tcseditoroverseer", "member": "tcseditor.tcseditoroverseer", "type": "cron", "environment_files": ["ops/config/pillar/env.sls"], "concurrency_policy": "forbid", "schedule": "*/30 * * * *"}], "service_tier": 1, "pulldeploy_components": {"data": ["marketplaceconfig", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "tcseditor"}, {"name": "tcseditoroverseer"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"adtech": null, "adtechworkflows": null, "mailer": null, "priceoptimizer": null, "tcs": null, "team": null, "regions": null, "usergroups": null, "users": null}}}}, "logging": {"tcseditor": {"fields": {"job_name": "keyword", "s3_bucket": "keyword", "group_name": "keyword", "email_address": "keyword", "s3_path": "keyword"}}}, "version": "724d1585a8a23601aafcd754810745438d241b5a", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "tcsint": {"name": "tcsint", "description": "TCS Internal", "repository": "git@github.com:lyft/tcsint.git", "image_type": "service", "service_tier": 2, "slack": "#experimentation", "team_email": "experimentation@lyft.com", "pagerduty_escalation_policy": "Experimentation", "frontend": {"node_version": "10.14.1-1nodesource1"}, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}], "limits": {"environment": {"development": {"memory": "1.8Gi", "cpu": 0.2}}}}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "groups": [{"name": "dev", "members": ["control.dev", "tcsint.legacy", "tom.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "tcsint.dev"}, {"name": "unit", "type": "execution", "group": "tcsint.dev", "container": "tcsint.legacy", "command": "make test_coverage"}, {"name": "lint", "type": "execution", "group": "tcsint.dev", "container": "tcsint.legacy", "command": "make test_lint"}], "deploy": [{"name": "staging", "automatic": true, "legacy": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["translationdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "tcsint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"kinesis_iad": null}, "internal_hosts": {"acl": null, "privacyaudit": null, "tom": null}}}}, "version": "a0227fa4df8eed1d4d86d8a5c4bd56069909f385", "images": [{"parent": {"name": "opsbase", "version": "458b2e30217d9d14e20befd527e5b98a44f43c19", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "458b2e30217d9d14e20befd527e5b98a44f43c19", "sub_image": null, "external": false}}, "tcsresults": {"name": "tcsresults", "description": "Service to provide results data for Experimentation Results Tool", "repository": "git@github.com:lyft/tcsresults.git", "image_type": "service", "languages": ["bash", "python"], "credentials": true, "slack": "#experimentation", "team_email": "experimentation@lyft.com", "pagerduty_escalation_policy": "Experimentation", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s", "packages": ["postgresql-client-10"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "sub_image": "k8s", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/tcsresults", "limits": {"cpu": 4, "memory": "3Gi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "tcsresultsgetexptmtda", "command": "dumb-init -- service_venv python manage.py get_tcseditor_experiments_metadata", "workdir": "/code/tcsresults", "sub_image": "k8s"}, {"name": "tcsresultsrt", "command": "dumb-init -- service_venv python manage.py realtime_alerting", "workdir": "/code/tcsresults", "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["control.dev", "tcsresults.legacy", "postgresql.dev", "idl.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "tcsresults.dev"}, {"name": "unit", "type": "execution", "group": "tcsresults.dev", "container": "tcsresults.legacy", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "tcsresults.dev", "container": "tcsresults.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "automatic": true, "legacy": false, "targets": [{"facet": "main"}, {"facet": "tcsresultsgetexptmtda"}, {"facet": "tcsresultsrt"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}, {"facet": "tcsresultsgetexptmtda"}, {"facet": "tcsresultsrt"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "tcsresultsgetexptmtda"}, {"facet": "tcsresultsrt"}], "kubernetes": {"enabled": true}}]], "facets": [{"name": "main", "member": "tcsresults.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 2}}}}, {"name": "canary", "member": "tcsresults.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "tcsresultsgetexptmtda", "member": "tcsresults.tcsresultsgetexptmtda", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "concurrency_policy": "forbid", "schedule": "* * * * *"}, {"name": "tcsresultsrt", "member": "tcsresults.tcsresultsrt", "type": "cron", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/env-k8s.sls"], "concurrency_policy": "forbid", "schedule": "*/5 * * * *"}], "service_tier": 3, "envoy": {"profile": "python", "settings": {"services": [{"name": "tcsresults"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"tcseditor": null, "tcsresults": null, "mailer": null}}}}, "version": "541ced1d8168c10b40aff197b22c62860ba1065f", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "tcsworkflows": {"name": "tcsworkflows", "description": "experimentation_metrics", "repository": "git@github.com:lyft/tcsworkflows.git", "image_type": "flyteworkflow", "languages": ["python"], "credentials": true, "slack": "#experimentation", "team_email": "experimentation@lyft.com", "pagerduty_escalation_policy": "Experimentation", "containers": [{"name": "spin", "command": "/bin/bash", "provision": "echo \"what hath god wrought\""}], "groups": [{"name": "dev", "members": ["control.dev", "tcsworkflows.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "tcsworkflows.dev", "container": "tcsworkflows.spin", "command": "service_venv mbadmin register-workflows new"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [[{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_development"}], [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_staging"}], [{"name": "production", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_production"}]], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "version": "419993a9728ef14f829e75ed357bb9a10a4f1c36", "images": [{"parent": {"name": "flytesparkbase", "version": "ea8b691fef3dc56fef3b71d3c6c54a28116b1635", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "flytesparkbase", "version": "ea8b691fef3dc56fef3b71d3c6c54a28116b1635", "sub_image": null, "external": false}}, "team": {"name": "team", "description": "team member management service", "repository": "git@github.com:lyft/team.git", "credentials": true, "restricted_ssh": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "dynamodb.dev", "elasticsearch5.server", "dynamostreams.dev", "team.legacy"]}, {"name": "devextended", "members": ["team.dev", "acl.dev", "tom.dev"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "team.dev", "container": "team.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#internal-productivity", "team_email": "internal-productivity@lyft.com", "pagerduty_escalation_policy": "Internal Productivity", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "languages": ["python"], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "team"}, {"name": "teambatch"}], "common_settings": {"internal_hosts": {"acl": null}, "external_hosts": {"dynamodb_iad": null}, "redis": {"teammultiredis": {"port": 6380}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "logging": {"teambatch": {"fields": {"hris_id": "keyword", "name": "keyword"}}, "team": {"fields": {"email": "keyword", "user": "keyword", "githubuser": "keyword", "actor": "keyword", "id": "keyword"}}}, "version": "c701bc9af4c07e8e9b717b293c3e4327f438bee2", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "techlearning": {"name": "techlearning", "description": "Internal tools to support Tech Learning team operations", "repository": "git@github.com:lyft/techlearning.git", "image_type": "service", "service_tier": 3, "slack": "#tech-learning", "team_email": "techlearning@lyft.com", "pagerduty_escalation_policy": "Tech Learning", "languages": ["bash", "javascript", "python"], "credentials": true, "custom": {"frontend_service": true}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "techlearning.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "techlearning.dev"}, {"name": "build_dist", "type": "jailed", "command": "make build_dist"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "techlearning.dev", "container": "techlearning.legacy", "command": "make test_integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "techlearning"}], "common_settings": {"internal_hosts": {"team": null, "omnibot": null}, "external_hosts": {"dynamodb_iad": null}}}}, "logging": {"techlearning": {"fields": {"exception": {"class": "keyword", "message": "keyword"}}}}, "version": "31f67b134bda58a5a9567b4e9fdc09a139df5d9b", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "techradar": {"name": "techradar", "description": "Central repository of existing, nascent and soon-to-be deprecated technologies at Lyft", "repository": "git@github.com:lyft/techradar.git", "slack": "#techradar-bots", "team_email": "sushant@lyft.com", "pagerduty_escalation_policy": "devnull", "image_type": "service", "service_tier": 3, "languages": ["javascript"], "credentials": false, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh"}, {"name": "service", "command": "dumb-init npm start", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 5, "timeout_seconds": 5}}], "facets": [{"name": "main", "member": "techradar.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "canary", "member": "techradar.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "validate", "type": "jailed", "command": "npm run validate"}], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "deploy": [{"name": "staging", "bake_time_minutes": 0, "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "bake_time_minutes": 0, "orca": [{"region": "iad"}], "automatic": true, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production", "automatic": true, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "techradar"}]}}, "version": "014b77172ec25409dadeccc63180dedd7f227086", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "telegraph": {"name": "telegraph", "description": "telegraph", "repository": "git@github.com:lyft/telegraph.git", "pagerduty_escalation_policy": "Enterprise Concierge", "team_email": "enterprise-concierge-eng@lists.lyft.com", "slack": "#enterprise-deploy", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/telegraph", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "4Gi"}}, {"name": "smokescreen", "command": "./smokescreen-1.0.0.binary", "workdir": "/code/smokescreen", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "telegraph.legacy"]}, {"name": "web", "members": ["telegraph.service", "telegraph.smokescreen"]}], "tests": [{"name": "style", "type": "execution", "group": "telegraph.dev", "container": "telegraph.legacy", "command": "make test_style", "reports": {"pylint": "build/flake8.txt"}}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "telegraph.dev", "container": "telegraph.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml", "cobertura": "build/int_coverage.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "service_tier": 2, "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"legacy": false, "name": "production", "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "facets": [{"name": "main", "member": "telegraph.web", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 3, "max_size": 6}}}}, {"name": "canary", "member": "telegraph.web", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "languages": ["python"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "telegraph"}], "common_settings": {"external_hosts": {"firehose_iad": null, "kinesis_iad": null}}}}, "logging": {"telegraph": {"fields": {"webhook_url": "keyword", "status_code": "long", "event_id": "keyword", "event_type": "keyword"}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s", "packages": ["awscli"]}}]}}, "version": "ddecb0e5b7db812bd008d9df00588b8b8152b478", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "telematicsalgorithms": {"name": "telematicsalgorithms", "description": "Algorithms to process the high-frequency telematics data", "repository": "git@github.com:lyft/python-lyft-telematics-algorithms.git", "slack": "#av-rs-telematics-traj", "team_email": "insurance-eng@lyft.com", "image_type": "library", "credentials": true, "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/s2ipythonlibrary:61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "packages": ["libpq-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile", "sub_image": "lyftlearn"}}]}}, "containers": [{"name": "spin", "command": "sleep infinity", "sub_image": "lyftlearn"}, {"name": "lyftlearn", "command": "sleep infinity", "sub_image": "lyftlearn", "mounts": ["/var/run/docker_sockets", "/srv/control"]}], "groups": [{"name": "dev", "members": ["control.dev", "telematicsalgorithms.spin"]}, {"name": "lyftlearn_group", "members": ["telematicsalgorithms.lyftlearn"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests/unit"]}, {"name": "register-models", "command": "make register-models", "type": "execution", "container": "telematicsalgorithms.lyftlearn", "group": "telematicsalgorithms.lyftlearn_group"}], "deploy": [{"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "lyftlearn": {}, "version": "4f046bf159e9ce8f0fe331070366153b7946e620", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "lyftlearnbase", "version": "0f2151a39d52a1927827f91af53a1f9785297ce0", "sub_image": null, "external": false}, "sub_image": "lyftlearn"}], "parent": {"name": "s2ipythonlibrary", "version": "61f8cd534332dabaabfd8d0fcf7c0a3553698f9e", "sub_image": null, "external": false}}, "telematicsflyte": {"name": "telematicsflyte", "description": "Flyte 2.0 repo for Telematics related workflows", "repository": "git@github.com:lyft/telematicsflyte.git", "credentials": true, "slack": "#insurance", "team_email": "insurance-tech@lists.lyft.com", "pagerduty_escalation_policy": "Insurance", "image_type": "flyteworkflow", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "telematicsflyte.spin"]}, {"name": "integration", "members": ["telematicsflyte.dev"]}], "tests": [{"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "workflow_registration", "type": "execution", "group": "telematicsflyte.dev", "container": "telematicsflyte.spin", "command": "make register_for_pr"}, {"name": "integration", "type": "execution", "group": "telematicsflyte.integration", "container": "telematicsflyte.spin", "command": "make test_integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [[{"name": "staging", "legacy": true, "automatic": true, "bake_time_minutes": 0, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_staging"}], [{"name": "production", "legacy": true, "orca": [{"region": "iad"}]}, {"legacy": true, "automatic": true, "role": "data-deploy", "name": "register_production"}]], "deploy_settings": {"window_start": "06:00 America/Los_Angeles", "window_end": "22:00 America/Los_Angeles"}, "version": "9616f89724a823ef7eb5c186c7882fc8f536233d", "images": [{"parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "flytebase", "version": "762feb40b00a9420cd6c9fbb994096e7c4c84b87", "sub_image": null, "external": false}}, "telematicsingest": {"name": "telematicsingest", "description": "Ingest frontend for telematics data", "repository": "git@github.com:lyft/telematicsingest.git", "image_type": "service", "service_tier": 1, "slack": "#insurance", "team_email": "insurance-tech@lyft.com", "pagerduty_escalation_policy": "Insurance", "languages": ["python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipython3:8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}}, {"name": "worker", "command": "dumb-init -- python -m worker", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "256Mi"}}], "facets": [{"name": "main", "member": "telematicsingest.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 3}}}}, {"name": "canary", "member": "telematicsingest.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "workers", "member": "telematicsingest.worker", "type": "worker", "autoscaling": {"min_size": 2, "max_size": 2}}], "groups": [{"name": "dev", "members": ["control.dev", "idl.server", "sqs.server", "dynamodb.server", "telematicsingest.legacy"]}, {"name": "integration", "members": ["jobscheduler.dev", "telematicsingest.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "telematicsingest.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "telematicsingest.integration", "container": "telematicsingest.legacy", "command": "make test_integration"}], "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": true}, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}, {"facet": "workers"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "workers"}], "availability_zone": "us-east-1a"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}, {"facet": "workers"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "telematicsingest"}], "common_settings": {"internal_hosts": {"jobschedulernormalweb": null}, "external_hosts": {"dynamodb_iad": null, "sqs_iad": null}}}}, "logging": {"telematicsingest": {"fields": {"app_id": "keyword", "app_version": "keyword", "callback_path": "keyword", "callback_sent_at_ms": "keyword", "callback_service_name": "keyword", "crash_analysis_request_end_time_ms": "keyword", "crash_analysis_request_id": "keyword", "crash_analysis_request_provider": "keyword", "crash_analysis_request_start_time_ms": "keyword", "crash_analysis_request_status": "keyword", "device_identifier": "keyword", "device_manufacturer": "keyword", "device_model": "keyword", "device_os": "keyword", "device_os_version": "keyword", "drive_id": "keyword", "end_time_ms": "keyword", "error": "keyword", "error_id": "long", "error_message": "keyword", "error_type": "keyword", "filename": "keyword", "from_key": "keyword", "message": {"ReceiptHandle": "keyword", "Body": "keyword", "MD5OfBody": "keyword", "MessageId": "keyword"}, "start_time_ms": "keyword", "to_key": "keyword", "user_id": "keyword"}}}, "version": "58c5b68cfeb4c870c68686f314faebb10b0efe3d", "images": [{"parent": {"name": "s2ipython3", "version": "8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "telematicslyftlearntasks": {"name": "telematicslyftlearntasks", "description": "Telematics data processing tasks that run on LyftLearn, invoked from Airflow", "repository": "git@github.com:lyft/telematics-lyftlearn-tasks.git", "slack": "#insurance", "credentials": true, "team_email": "insurance-tech@lists.lyft.com", "pagerduty_escalation_policy": "Insurance", "image_type": "tool", "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/lyftlearnbase:6c1adfbd79e1c43f4f7ef8fcf10e276e06774cd1"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}]}}, "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "lyftlearn", "command": "sleep infinity", "mounts": ["/var/run/docker_sockets", "/srv/control"]}], "groups": [{"name": "dev", "members": ["control.dev", "telematicslyftlearntasks.spin"]}, {"name": "integration", "members": ["telematicslyftlearntasks.dev"]}, {"name": "register_group", "members": ["telematicslyftlearntasks.lyftlearn"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests/unit"]}, {"name": "integration", "command": "make test_integration", "type": "execution", "group": "telematicslyftlearntasks.integration", "container": "telematicslyftlearntasks.spin"}, {"name": "register-models", "command": "make register_models", "type": "execution", "container": "telematicslyftlearntasks.lyftlearn", "group": "telematicslyftlearntasks.register_group"}], "deploy": [{"name": "production", "legacy": true}], "lyftlearn": {}, "version": "bc594ef261903942152811dda87427f2c45ee1aa", "images": [{"parent": {"name": "lyftlearnbase", "version": "6c1adfbd79e1c43f4f7ef8fcf10e276e06774cd1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "lyftlearnbase", "version": "6c1adfbd79e1c43f4f7ef8fcf10e276e06774cd1", "sub_image": null, "external": false}}, "telematicsworkflows": {"name": "telematicsworkflows", "description": "Telematics ingestion for sensor data for driver app", "repository": "git@github.com:lyft/telematicsworkflows.git", "image_type": "service", "languages": ["python"], "containers": [{"name": "spin", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["control.dev", "telematicsworkflows.spin"]}], "pagerduty_escalation_policy": "Insurance", "service_tier": 3, "slack": "#insurance", "team_email": "insurance+telematics@lyft.com", "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "telematicsworkflows.dev", "container": "telematicsworkflows.spin", "command": "service_venv mbadmin register-workflows new"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": "precommit"}}]}}, "version": "6b4bb17ec42e63b384618f02d627d196794ea716", "images": [{"parent": {"name": "flytebase", "version": "6d1c5d3854382dae3c76350be2038ff8045cbc9e", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "dff49905386bfefc75ec2b8bc37215053d66c54c", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "flytebase", "version": "6d1c5d3854382dae3c76350be2038ff8045cbc9e", "sub_image": null, "external": false}}, "tensorflow": {"name": "tensorflow", "description": "Tensorflow image for Lyftlearn environments", "repository": "git@github.com:lyft/lyftlearnimages.git:tensorflow", "image_type": "tool", "slack": "#ml-platform-bots", "team_email": "ml-platform-team@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.python2", "sub_image": "python2"}}]}}, "deploy": [{"name": "production", "legacy": false}], "containers": [{"name": "notebook", "command": "/venv/bin/jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password='' --notebook-dir=/mnt/user-home", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}, {"name": "notebook2", "command": "/venv/bin/jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password='' --notebook-dir=/mnt/user-home", "sub_image": "python2", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}], "lyftlearn": {"notebook_templates": [{"template_name": "Tensorflow Python 3", "long_description": "Python 3 image Tensorflow installed", "short_description": "Python 3 image Tensorflow installed", "owner": "namirbekian", "service_instances": ["staging"]}, {"template_name": "Tensorflow Python 2", "long_description": "Python 2 image Tensorflow installed", "short_description": "Python 2 image Tensorflow installed", "owner": "namirbekian", "sub_image": "python2", "service_instances": ["staging"]}]}, "version": "395c0d3f1a6c6632b76b3bef20be5d12da9676ed", "images": [{"parent": {"name": "lyftlearnbase", "version": "fdb5691b010f4f33d1c01825ad279763eafc191d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "lyftlearnbase", "version": "fdb5691b010f4f33d1c01825ad279763eafc191d", "sub_image": "python2", "external": false}, "sub_image": "python2"}], "parent": {"name": "lyftlearnbase", "version": "fdb5691b010f4f33d1c01825ad279763eafc191d", "sub_image": null, "external": false}}, "tensorflowgpu": {"name": "tensorflowgpu", "description": "Tensorflow image with GPU drivers", "repository": "git@github.com:lyft/lyftlearnimages.git:tensorflowgpu", "image_type": "tool", "slack": "#ml-platform-bots", "team_email": "ml-platform-team@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.python2", "sub_image": "python2"}}]}}, "deploy": [{"name": "production", "legacy": false}], "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "notebook", "command": "/venv/bin/jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password='' --notebook-dir=/mnt/user-home", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}, {"name": "notebook2", "command": "/venv/bin/jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password='' --notebook-dir=/mnt/user-home", "sub_image": "python2", "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}], "lyftlearn": {"notebook_templates": [{"template_name": "Tensorflow Python 3 GPU", "long_description": "Python 3 image with GPU drivers and Tensorflow", "short_description": "Python 3 image with GPU drivers and Tensorflow", "owner": "namirbekian", "service_instances": ["staging"]}, {"template_name": "Tensorflow Python 2 GPU", "long_description": "Python 2 image with GPU drivers and Tensorflow", "short_description": "Python 2 image with GPU drivers and Tensorflow", "owner": "namirbekian", "sub_image": "python2", "service_instances": ["staging"]}]}, "version": "9f7892a6776f1fb9e074afdf4d7fc6ec16de7958", "images": [{"parent": {"name": "lyftlearnbase", "version": "fdb5691b010f4f33d1c01825ad279763eafc191d", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "lyftlearnbase", "version": "fdb5691b010f4f33d1c01825ad279763eafc191d", "sub_image": "python2", "external": false}, "sub_image": "python2"}], "parent": {"name": "lyftlearnbase", "version": "fdb5691b010f4f33d1c01825ad279763eafc191d", "sub_image": null, "external": false}}, "tensorgym": {"name": "tensorgym", "description": "Deep learning model training system", "repository": "git@github.com:lyft/tensorgym.git", "image_type": "service", "languages": ["python"], "credentials": true, "credentials_legacy": true, "pagerduty_escalation_policy": "DS Platform", "team_email": "ds-platform@lyft.com", "slack": "#ml-platform-bots", "custom": {"frontend_service": true, "internal_service": true}, "containers": [{"name": "legacy", "start_time": 60, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "spin", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["control.dev", "tensorgym.legacy", "postgresql.server", "modelconfig.dev", "jobscheduler.dev", "ratelimit.dev", "mailer.dev", "inferencedb.dev"]}, {"name": "unittest", "members": ["tensorgym.spin"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "tests": [{"name": "startup", "type": "startup", "group": "tensorgym.dev"}, {"name": "unit", "type": "execution", "group": "tensorgym.unittest", "container": "tensorgym.spin", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "integration", "type": "execution", "group": "tensorgym.dev", "container": "tensorgym.legacy", "command": "make test_integration"}], "deploy": [[{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "lyftlearnstagingk8stemplates", "legacy": false, "automatic": true, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}, "clusterLabels": {"cluster.lyft.net/role": "lyftlearn", "cluster.lyft.net/environment": "staging"}, "path": "staging/lyftlearnstaging"}}], [{"name": "imagebuilder", "legacy": true}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "lyftlearnpdxk8stemplate", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml-av"}, "clusterLabels": {"cluster.lyft.net/role": "lyftlearn-av", "cluster.lyft.net/environment": "production"}, "path": "production/lyftlearn-av"}}, {"name": "lyftlearniadk8stemplates", "legacy": false, "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "ml"}, "clusterLabels": {"cluster.lyft.net/role": "lyftlearn", "cluster.lyft.net/environment": "production"}, "path": "production/lyftlearn-iad-1d"}}]], "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "tensorgym"}, {"name": "tensorgymav"}, {"name": "tensorgymavwatcher"}, {"name": "tensorgymbuilder"}, {"name": "tensorgymwatcher"}], "common_settings": {"internal_hosts": {"jobschedulernormalweb": null, "jobschedulerbulkweb": null, "messaging": null, "modelconfig": null, "tensorgym": null, "ratelimit": null, "mailer": null, "team": null, "inferencedb": null}, "external_hosts": {"firehose_iad": null}}}}, "logging": {"tensorgymav": {"fields": {"k8s-job-name": "keyword", "job-name": "keyword", "job-type": "keyword", "user_name": "keyword", "k8s_job_name": "keyword", "job_type": "keyword", "job_id": "keyword", "job_name": "keyword", "elapsed_seconds": "float", "label": "keyword", "num_jobs_trimmed": "long", "num_jobs_untrimmed": "long"}}, "tensorgymwatcher": {"fields": {"pod_uuid": "keyword", "event_name": "keyword", "state": "keyword", "status": "keyword", "state_transition_timestamp": "keyword", "reason": "keyword", "namespace": "keyword", "user_job_name": "keyword", "k8s_job_name": "keyword", "phase": "keyword", "job_state": "keyword", "message": "keyword", "conditions": "keyword", "last_state": "keyword", "container_id": "keyword", "active_deadline_seconds": "long", "start_time_seconds": "long", "end_time_seconds": "long", "metadata_uid": "keyword", "job_name": "keyword", "deletion_timestamp": "keyword", "cluster_name": "keyword", "cpu": "float", "pod_name": "keyword", "images": "keyword", "memory_gb": "float", "user": "keyword", "gpu": "float", "creation_timestamp": "keyword", "job_type": "keyword", "cost_dollars": "float", "job_uuid": "keyword", "job_label": "keyword", "completed_at": "keyword", "username": "keyword", "labels": {"lyft": {"com/ml-platform": "keyword", "com/job-uuid": "keyword", "com/batch-predict-job": "keyword", "com/training-job": "keyword", "com/katib-job": "keyword", "com/katib-user": "keyword", "com/dsbox": "keyword", "com/notebook-build-job": "keyword"}, "job-name": "keyword", "worker-id": "keyword", "katib-version": "keyword"}, "occurred_at": "keyword", "endpoints": {"notebook": "keyword", "tensorboard": "keyword", "rstudio": "keyword", "noteboo": "keyword"}, "previous_ready_at": "date", "new_ready_at": "date", "error_id": "keyword", "error_msg": "keyword", "field_value": "keyword", "field_name": "keyword", "name": "keyword", "annotations": {"iam": {"amazonaws": {"com/role": "keyword"}}}, "job": "keyword", "email_address": "keyword", "num_days": "long", "users_over_threshold": "keyword", "num_users_over_threshold": "long", "spend_threshold": "long"}}, "tensorgym": {"fields": {"k8s-job-name": "keyword", "job-name": "keyword", "job-type": "keyword", "k8s_job_name": "keyword", "user_name": "keyword", "job_type": "keyword", "job_id": "keyword", "job_name": "keyword", "model_uuid": "keyword", "hyperparameters": {"region": "keyword"}, "exception": "keyword"}}, "tensorgymavwatcher": {"fields": {"pod_uuid": "keyword", "event_name": "keyword", "state": "keyword", "state_transition_timestamp": "keyword", "status": "keyword", "namespace": "keyword", "user_job_name": "keyword", "reason": "keyword", "k8s_job_name": "keyword", "last_state": "keyword", "container_id": "keyword", "job_state": "keyword", "message": "keyword", "phase": "keyword", "conditions": "keyword", "active_deadline_seconds": "long", "metadata_uid": "keyword", "start_time_seconds": "long", "endpoints": {"tensorboard": "keyword", "notebook": "keyword"}, "job_name": "keyword", "cluster_name": "keyword", "cpu": "float", "pod_name": "keyword", "job_type": "keyword", "cost_dollars": "float", "user": "keyword", "images": "keyword", "memory_gb": "float", "creation_timestamp": "keyword", "gpu": "float", "job_uuid": "keyword", "occurred_at": "keyword", "new_ready_at": "date", "previous_ready_at": "date", "deletion_timestamp": "keyword", "end_time_seconds": "long", "labels": {"lyft": {"com/ml-platform": "keyword", "com/katib-user": "keyword", "com/katib-job": "keyword", "com/job-uuid": "keyword", "com/batch-predict-job": "keyword", "com/training-job": "keyword", "com/dsbox": "keyword"}, "worker-id": "keyword", "katib-version": "keyword", "job-name": "keyword"}, "job_label": "keyword", "username": "keyword", "completed_at": "keyword", "error_msg": "keyword", "field_value": "keyword", "error_id": "keyword", "field_name": "keyword", "pod": "keyword", "event_type": "keyword"}}}, "version": "ce69c48c35baca527274f24dd96fd6dec148ad68", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "terminatehost": {"name": "terminatehost", "description": "Checks aws asg list against discovery, term any that is not in it", "repository": "git@github.com:lyft/containers.git:terminatehost", "slack": "#dev-environment", "team_email": "provisioning-team@lyft.com", "docs": {"section": "Infrastructure"}, "containers": [{"name": "run", "command": "/code/containers/terminatehost/discovery_mismatch_resolver.py"}], "groups": [{"name": "dev", "members": ["dnsmasq.server", "metadataproxy.server", "terminatehost.run"]}], "deploy": [{"name": "development", "legacy": false}, {"name": "staging", "legacy": false, "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}]}], "languages": ["python", "bash"], "image_type": "tool", "version": "f02db4ac0c87d4670e4ee7cbfac45517a86b9a01", "images": [{"parent": {"name": "bionicbase", "version": "c3382212118c3b3a62d4c82a7cf8ff7ea9cce056", "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "c3382212118c3b3a62d4c82a7cf8ff7ea9cce056", "external": false}}, "terraform": {"name": "terraform", "description": "terraform", "repository": "git@github.com:lyft/containers.git:terraform", "image_type": "tool", "slack": "#terraform", "team_email": "orchestration-team@lyft.com", "pagerduty_escalation_policy": "Orchestration", "credentials": true, "containers": [{"name": "checkformat", "command": "python -m terraform.lint.checkformat", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "validate", "command": "python -m terraform.lint.validate", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "run", "command": "python -m terraform.cli", "mounts": ["/var/run/docker_sockets", "/srv/control", "/srv/workspace"]}], "groups": [{"name": "cli", "members": ["control.minimal", "terraform.run"]}], "tests": [{"name": "pylint", "type": "tool", "tool": "pylint.lint"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}], "automatic": false}, {"name": "production", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}], "credentials_legacy": false, "languages": ["python"], "version": "b896bb001775f8800b9732592ed1cf006be4cab1", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}}, "testanalyticsclient": {"name": "testanalyticsclient", "description": "testanalyticsclient - A shadow of analyticsclient (forked at a point in time) for TESTING only", "repository": "git@github.com:lyft/testanalyticsclient.git", "credentials": false, "slack": "#data-ingest-alerts", "team_email": "dataingest@lyft.com", "pagerduty_escalation_policy": "DataIngest", "containers": [{"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "python2", "type": "jailed", "command": "make test_python2"}, {"name": "python3", "type": "jailed", "command": "make test_python3"}, {"name": "analytics_utils", "type": "jailed", "command": "make test_analytics_utils"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["python", "bash"], "image_type": "library", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:32cbb00e867909feba916f53c84c05d17bad9c3f", "sub_image": "precommit"}}]}}, "version": "02cd4527f1f533fa506d3f6213b57dde1ebd027c", "images": [{"parent": {"name": "pythonlibrary", "version": "43a64e6c9b7025671a183fc6ca1d2283cc92cac6", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "32cbb00e867909feba916f53c84c05d17bad9c3f", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "pythonlibrary", "version": "43a64e6c9b7025671a183fc6ca1d2283cc92cac6", "sub_image": null, "external": false}}, "testbblmanager": {"name": "testbblmanager", "description": "Service for managing headless bubble clients for UI tests", "repository": "git@github.com:lyft/testbblmanager.git", "slack": "#testbblmanager", "team_email": "nmanoharan@lyft.com", "pagerduty_escalation_policy": "Testbblmanager", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:deb42d25da0e6d5fe565c019883e458b4b31b696"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/testbblmanager", "limits": {"cpu": 1, "memory": "1Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "testbblmanager.legacy"]}, {"name": "service_group", "members": ["testbblmanager.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "testbblmanager.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "testbblmanager.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"iam_role": "orca-admin", "region": "iad"}], "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "mode": "mixed"}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"iam_role": "orca-admin", "region": "iad"}], "automatic": true, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": ["infra"]}, "cluster_tolerations": {"cluster.lyft.net/restricted": ["infra"]}, "mode": "mixed"}, "targets": [{"facet": "main"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "testbblmanager"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"bblheadless": null}}}}, "version": "7113093b5f7762db7ccef3be7079923e1fd9185e", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "testbuildnotify": {"name": "testbuildnotify", "description": "testbuildnotify", "repository": "git@github.com:lyft/testbuildnotify.git", "slack": "#ci-bots", "team_email": "automation-team@lyft.com", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "testbuildnotify.legacy"]}], "tests": [{"name": "start", "type": "startup", "group": "testbuildnotify.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt"}}, {"name": "integration", "type": "execution", "group": "testbuildnotify.dev", "container": "testbuildnotify.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "commitonlyunit", "type": "execution", "group": "testbuildnotify.dev", "container": "testbuildnotify.legacy", "command": "make test_unit", "commit_only": true, "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "upstream_tests": {"on_commit": true, "test_set": {"buildnotify": ["unit"]}}, "pagerduty_escalation_policy": "CI and Deployments", "audit_blacklist": ["envoyAudit"], "deploy": [{"name": "development", "legacy": false, "orca": []}, {"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a", "orca": [{"region": "iad"}]}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d", "orca": [{"region": "iad"}]}, {"name": "production-us-east-1e", "legacy": true, "availability_zone": "us-east-1e", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}]], "submit_queue": {"v3_auto_deploy": true}, "languages": ["php", "bash", "python"], "image_type": "service", "service_tier": 3, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:33730d35bcd2ee744288051c2813d85e8faeafea", "sub_image": "precommit"}}]}}, "version": "aba03795a10a8ffd163c89a5487e53cce538bccb", "images": [{"parent": {"name": "opsbase", "version": "0df1afa8f77583dead83af470af5f3a03f3ebb10", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "33730d35bcd2ee744288051c2813d85e8faeafea", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "0df1afa8f77583dead83af470af5f3a03f3ebb10", "sub_image": null, "external": false}}, "testbuildnotifystaging": {"name": "testbuildnotifystaging", "description": "testbuildnotifystaging", "repository": "git@github.com:lyft/testbuildnotifystaging.git", "slack": "#ci-bots", "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "team_email": "automation-team@lyft.com", "notification_overrides": {"test_failure": {"disabled": true}, "pr_merge": {"disabled": true}, "deploy": {"disabled": true}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/testbuildnotifystaging", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}}], "groups": [{"name": "dev", "members": ["control.dev", "buildnotify.dev", "testbuildnotifystaging.legacy"]}], "facets": [{"name": "main", "member": "testbuildnotifystaging.service", "type": "service", "autoscaling": {"min_size": 0, "max_size": 0}}, {"name": "canary", "member": "testbuildnotifystaging.service", "type": "service", "canary": true, "autoscaling": {"min_size": 0, "max_size": 0}}], "deploy": [{"name": "staging", "bake_time_minutes": 0, "legacy": true, "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "bake_time_minutes": 0, "legacy": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "bake_time_minutes": 0, "legacy": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "bake_time_minutes": 0, "legacy": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "tests": [{"name": "pylint", "type": "tool", "tool": "pylint.lint"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "testbuildnotifystaging.dev", "container": "testbuildnotifystaging.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "pagerduty_escalation_policy": "Continuous Integration", "audit_blacklist": ["envoyAudit"], "envoy": {"profile": "python", "settings": {"services": [{"name": "testbuildnotifystaging"}], "common_settings": {}}}, "languages": ["bash", "python"], "image_type": "service", "service_tier": 3, "version": "be80f6e4ea099ccf4ddf7ba5135484a50174b614", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "testdeploysstaging": {"name": "testdeploysstaging", "description": "Repo to test deploys tooling in the staging environment", "repository": "git@github.com:lyft/testdeploysstaging.git", "slack": "#deploys-bots", "team_email": "deploys-team@lyft.com", "pagerduty_escalation_policy": "Deploys", "image_type": "service", "service_tier": 3, "languages": ["bash", "go"], "credentials": false, "docs": {"disable": true}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igo:fa0c4921e2e8481015324ac1a2b841013a1a2fdf"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": "precommit"}}]}}, "containers": [{"name": "worker", "command": "testdeploysstaging worker", "workdir": "/code/testdeploysstaging", "limits": {"cpu": 0.1, "memory": "64Mi"}}, {"name": "job", "command": "testdeploysstaging sleep", "workdir": "/code/testdeploysstaging", "limits": {"cpu": 0.1, "memory": "64Mi"}}], "groups": [{"name": "dev", "members": ["control.dev", "testdeploysstaging.worker"]}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "testdeploysstaging.worker", "type": "worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "canary", "member": "testdeploysstaging.worker", "type": "worker", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "job", "member": "testdeploysstaging.job", "type": "job"}], "deploy_settings": {"window_start": "00:00 America/Los_Angeles", "window_end": "00:00 America/Los_Angeles"}, "deploy": [{"name": "staging-job", "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "job"}], "legacy": false}, {"name": "staging-job6", "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "job"}], "legacy": false}, {"name": "staging", "automatic": true, "bake_time_minutes": 2, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "automatic": true, "bake_time_minutes": 2, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "bake_time_minutes": 0, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "bake_time_minutes": 0, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "testdeploysstaging"}]}}, "version": "76cd261b8dec056cc76db69e033f75791728f27f", "images": [{"parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}}, "testframework": {"name": "testframework", "description": "A collection of test helpers.", "repository": "git@github.com:lyft/lyft-test-framework.git", "image_type": "library", "languages": ["python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:a4c9f130270ae9f5f2559df8d3e15c904da4ce51"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:ad5b87bab0600c963f65ab11aff9d5566e10387e", "sub_image": "precommit"}}]}}, "tests": [{"name": "python2-unit", "type": "jailed", "command": "make python2_unit"}, {"name": "python3-unit", "type": "jailed", "command": "make python3_unit"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "slack": "#ci-bots", "team_email": "test-frameworks@lyft.com", "version": "744bb04a8e9ba2e8f0a48213a022b7ca1f66a05f", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "a4c9f130270ae9f5f2559df8d3e15c904da4ce51", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ad5b87bab0600c963f65ab11aff9d5566e10387e", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2ipythonlibrary", "version": "a4c9f130270ae9f5f2559df8d3e15c904da4ce51", "sub_image": null, "external": false}}, "testhistory": {"name": "testhistory", "description": "A service to act as a data access layer for other services", "repository": "git@github.com:lyft/testhistory.git", "slack": "#ci-bots", "team_email": "test-frameworks@lyft.com", "pagerduty_escalation_policy": "Test Frameworks", "image_type": "service", "service_tier": 3, "languages": ["python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "testhistory.legacy"]}, {"name": "service_group", "members": ["testhistory.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "testhistory.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "testhistory.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "testhistory.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "testhistory"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"testrunner": null}, "external_hosts": {"dynamodb_iad": null}}}}, "notification_overrides": {"master_failure": {"slack": "#tf-core-team"}}, "version": "6c8140bd41ad919eb0e5fd79c6442a34de40e52d", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "testidl": {"name": "testidl", "description": "Repository to test IDL pipeline", "repository": "git@github.com:lyft/testidl.git", "slack": "#idl-bots", "team_email": "idl-tools@lyft.com", "pagerduty_escalation_policy": "IDL Tools", "image_type": "tool", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c"}}]}}, "containers": [{"name": "service", "command": "sleep infinity"}], "groups": [{"name": "dev", "members": ["testidl.service"]}], "deploy": [{"name": "github", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, [{"name": "package_first", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "package_second", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "package_third", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "package_fourth", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "package_fifth", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "package_sixth", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "package_seventh", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "package_eighth", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "package_ninth", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "package_tenth", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "package_eleventh", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "package_twelveth", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "package_thirteenth", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "package_fourteenth", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "package_fifteenth", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "package_sixteenth", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "package_seventeenth", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "package_eighteenth", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "package_nineteenth", "automatic": true, "legacy": true, "orca": [{"region": "iad", "service_instance": "production"}]}, {"name": "staging", "automatic": true, "legacy": false, "orca": [{"region": "iad"}]}], {"name": "production", "automatic": true, "legacy": true, "orca": [{"region": "iad"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "testidl"}]}}, "version": "8ad1f4e025d61aafa49871ded4e29df119e09d53", "images": [{"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}}, "testk8sdeployintegration": {"name": "testk8sdeployintegration", "description": "A dummy service used to perform integration tests for k8sdeploy", "repository": "git@github.com:lyft/testk8sdeployintegration.git", "languages": ["go"], "image_type": "service", "slack": "#deploys-bots", "team_email": "deploys-team@lyft.com", "pagerduty_escalation_policy": "Deploys", "service_tier": 3, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igo:fa0c4921e2e8481015324ac1a2b841013a1a2fdf"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.b753187e52a65a5de012fa18783ffac9becc12fc", "sub_image": "precommit"}}]}}, "containers": [{"name": "interactive", "command": "/bin/bash"}, {"name": "run", "command": "testk8sdeployintegration", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}}, {"name": "job", "command": "testk8sdeployintegration -isjob"}], "tests": [{"name": "unit", "type": "jailed", "command": "go test -v -race -cover ./..."}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "testk8sdeployintegration.run", "type": "service", "forceDeployment": true, "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}}}}, {"name": "deploys", "member": "testk8sdeployintegration.run", "type": "service", "forceDeployment": true, "autoscaling": {"environment": {"staging": {"min_size": 3, "max_size": 3}}}}, {"name": "job", "member": "testk8sdeployintegration.job", "type": "job"}], "deploy": [{"name": "staging-deploys", "legacy": false, "automatic": true, "targets": [{"facet": "deploys"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}}, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "automatic": true, "targets": [{"facet": "main"}, {"facet": "job"}], "kubernetes": {"enabled": true}}, {"name": "production-deploys", "legacy": false, "automatic": true, "targets": [{"facet": "deploys"}], "kubernetes": {"enabled": true, "cluster_tolerations": {"cluster.lyft.net/restricted": "infra"}, "cluster_labels": {"cluster.lyft.net/role": ["deploys"]}}, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false, "automatic": true, "targets": [{"facet": "main"}, {"facet": "job"}], "kubernetes": {"enabled": true}}], "envoy": {"profile": "go", "settings": {"services": [{"name": "testk8sdeployintegration"}], "common_settings": {"internal_hosts": {"pyexample2": null}}}}, "version": "7f55bbadbb509fc6162e80a63bcba69d283c87ef", "images": [{"parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "b753187e52a65a5de012fa18783ffac9becc12fc", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}}, "testpricingrt": {"name": "testpricingrt", "description": "pricing streaming service", "repository": "git@github.com:lyft/testpricingrt.git", "credentials": true, "containers": [{"name": "service", "command": "/usr/local/s2i/flink-run local"}], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "testpricingrt.service", "lyftidl.server", "redis.dev"]}, {"name": "integration", "members": ["testpricingrt.dev", "users.dev", "locations.dev", "supply.dev", "demand.dev", "regions.dev", "dispatch.dev", "pricing.dev", "pricingdata.run", "testpricingrt.service"]}], "tests": [{"name": "startup", "type": "startup", "group": "testpricingrt.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure", "autotrigger": false}, {"name": "unit", "type": "jailed", "framework": "pytest", "coverage": false, "target": "tests/unit", "autotrigger": false}, {"name": "integration", "type": "execution", "framework": "pytest", "coverage": false, "group": "testpricingrt.dev", "container": "testpricingrt.service", "target": "tests/integration", "autotrigger": false}], "slack": "#pricing-adaptive-dep", "team_email": "adaptive-pricing@lyft.com", "pagerduty_escalation_policy": "Adaptive-Pricing", "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": false}, {"name": "production", "legacy": false, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": false}], "streamingplatform": {"kubernetes": true, "applications": ["testpricingrt"]}, "languages": ["bash", "python"], "python": {"py3k": {"linters": ["modernize", "pylint"]}, "mypy": {"python_versions": ["3.6"]}}, "image_type": "flinkjob", "service_tier": 3, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2ibeampython:7eb0a94d08ebd97c49cfb2b25f2cb1fa9ec0661d"}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "testpricingrt"}, {"name": "testpricingrttaskmanager"}, {"name": "testpricingrtjobmanager"}], "common_settings": {"local_service": {"enable_gzip": true}, "internal_hosts": {"users": null, "locations": null, "locationsregionsearch": null, "supply": null, "demand": null, "regions": null, "dispatch": null, "pricing": null}, "external_hosts": {"kinesis_iad": null, "firehose_iad": null}, "redis": {"testpricingrtmultiredis": {"port": 6379}}}}}, "version": "b23efa0913772acca165c73768341065b695f8ea", "images": [{"parent": {"name": "s2ibeampython", "version": "7eb0a94d08ebd97c49cfb2b25f2cb1fa9ec0661d", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ibeampython", "version": "7eb0a94d08ebd97c49cfb2b25f2cb1fa9ec0661d", "sub_image": null, "external": false}}, "testpricingrtdata": {"name": "testpricingrtdata", "description": "Runtime configuration data for testpricingrt", "repository": "git@github.com:lyft/testpricingrtdata.git", "image_type": "data", "service_tier": 2, "slack": "#pricing-adaptive-dep", "team_email": "adaptive-pricing@lyft.com", "pagerduty_escalation_policy": "devnull", "languages": ["bash", "python"], "builder": {"name": "s2i", "params": {"builder": "lyft/configsetbase:187ab110f9f7de79d98ef6b26a7bcdd3637956f6"}}, "credentials": false, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/testpricingrtdata"]}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "1438469d99210c7d1c16696e90e736fc21ac89cc", "images": [{"parent": {"name": "configsetbase", "version": "187ab110f9f7de79d98ef6b26a7bcdd3637956f6", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "configsetbase", "version": "187ab110f9f7de79d98ef6b26a7bcdd3637956f6", "sub_image": null, "external": false}}, "testrunner": {"name": "testrunner", "description": "integration test infra", "repository": "git@github.com:lyft/testrunner.git", "slack": "#ci-bots", "team_email": "test-frameworks@lyft.com", "pagerduty_escalation_policy": "Test Frameworks", "image_type": "service", "service_tier": 3, "credentials": true, "credentials_legacy": false, "docs": {"section": "Infrastructure"}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "healthyrevisions", "command": "service_venv python -m float_dependencies.healthy_revisions"}, {"name": "maintask", "command": "service_venv python -m testrunner.jenkins.master_shard", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "cli", "command": "service_venv python -m testrunner.cli", "mounts": ["/srv/workspace", "/srv/control", "/var/run/docker_sockets"]}, {"name": "watchunit", "command": "make test_watchunit"}, {"name": "mergefastforward", "command": "service_venv python -m testrunner.scripts.merge_fast_forward"}, {"name": "tools", "command": "service_venv python -m testrunner.tools", "mounts": ["/srv/control", "/var/run/docker_sockets"]}, {"name": "listflakytests", "command": "service_venv python -m testrunner.scripts.list_flaky_tests"}], "groups": [{"name": "dev", "members": ["control.dev", "team.dev", "testhistory.dev", "dynamodb.server", "testrunner.legacy"]}, {"name": "healthyrevisions_group", "members": ["control.dev", "testrunner.healthyrevisions"]}, {"name": "cli_group", "members": ["runtime.run", "testrunner.cli"]}], "tests": [{"name": "unit", "type": "jailed", "framework": "pytest", "targets": ["tests/unit", "testrunner/tests/unit"]}, {"name": "integration", "type": "execution", "group": "testrunner.dev", "container": "testrunner.legacy", "command": "make test_integration", "reports": {"junit": "build/integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "automatic": true, "legacy": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true}], "languages": ["python"], "envoy": {"profile": "python", "settings": {"services": [{"name": "testrunner"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}}}}, "notification_overrides": {"master_failure": {"slack": "#tf-core-team"}}, "version": "4a3b29e24d8401f0be6c6e1b52076753c6b3bcc0", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "testusermanager": {"name": "testusermanager", "description": "Application for managing test users in staging/development with API commands", "repository": "git@github.com:lyft/testusermanager.git", "image_type": "service", "languages": ["python"], "slack": "#testusermanager", "team_email": "client-resilience@lyft.com", "pagerduty_escalation_policy": "Testusermanager", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:36518650f40787ad43faa9717259a01880989029", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=1 -k aiohttp.worker.GunicornWebWorker -c /etc/gunicorn/gunicorn.conf --access-logformat='%a %l %u %t \"%r\" %s %b \"%{Referrer}i\" \"%{User-Agent}i\"'", "workdir": "/code/testusermanager", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["control.dev", "testusermanager.legacy"]}], "docs": {"autogen_modules": ["testusermanager"]}, "tests": [{"name": "startup", "type": "startup", "group": "testusermanager.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "command": "make test_lint", "reports": {"flake8": "build/flake8.txt", "pylint": "build/pylint.txt"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "testusermanager.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "automatic": true}], "service_tier": 3, "pulldeploy_components": {"data": ["regioncfgdata"]}, "configsets": ["atlantisdata"], "envoy": {"profile": "python", "settings": {"services": [{"name": "testusermanager"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"account": null, "ats": null, "legacyoauth": null, "enterprise": null, "locations": null, "publicapi": null, "karma": null, "supply": null, "users": null, "usergroups": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null, "stripe": null}}}}, "version": "fb883943f3ac1a8dd84550193ab68eaa52007346", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "testwatchdog": {"name": "testwatchdog", "description": "Tools for running unit tests in restricted mode", "repository": "git@github.com:lyft/containers.git:testwatchdog", "image_type": "tool", "slack": "#ci-bots", "team_email": "automation-team@lyft.com", "containers": [{"name": "passivedns", "command": "python3.6 /code/containers/testwatchdog/src/monitor/entrypoint.py passivedns", "network": "host", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "tcpdump", "command": "python3.6 /code/containers/testwatchdog/src/monitor/entrypoint.py tcpdump", "network": "host", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "passive", "command": "python3.6 /code/containers/testwatchdog/src/monitor/entrypoint.py passive", "network": "host", "mounts": ["/var/run/docker_sockets", "/srv/control"]}], "python": {"mypy": {"python_versions": ["3.6"]}}, "groups": [{"name": "dev", "members": ["control.dev"]}], "tests": [{"name": "lint", "type": "jailed", "command": "bash -c 'flake8 --exclude venv/ && isort --recursive --check-only src/ tests/'"}, {"name": "unit", "type": "jailed", "command": "env PYTHONPATH=\"src/:${PYTHONPATH}\" pytest tests/unit/"}], "pagerduty_escalation_policy": "CI and Deployments", "deploy": [{"name": "staging", "automatic": false, "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}, {"name": "production", "legacy": false, "orca": [{"orca_location": "ops", "region": "iad"}]}], "languages": ["python"], "version": "004fcb44a0e920d96a89337523eb3dbcbde5d2f4", "images": [{"parent": {"name": "python", "version": "b27288a168ca4afb15e4e85893948cdfac51b556", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "python", "version": "b27288a168ca4afb15e4e85893948cdfac51b556", "sub_image": null, "external": false}}, "threatexchange": {"name": "threatexchange", "description": "Lyft-hosted MISP threat exchange on k8s", "repository": "git@github.com:lyft/threatexchange.git", "slack": "#security", "team_email": "threat-intelligence@lyft.com", "pagerduty_escalation_policy": "Security", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "image_type": "service", "service_tier": 3, "languages": ["javascript"], "credentials": true, "builder": {"name": "docker_build"}, "containers": [{"name": "service", "limits": {"cpu": 1, "memory": "2048Mi"}, "start_time": 60, "exports": [{"name": "web", "port": 80}]}], "groups": [{"name": "dev", "members": ["control.dev", "threatexchange.service"]}], "facets": [{"name": "main", "member": "threatexchange.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls"], "sidecars": ["envoy"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "automatic": false, "orca": [{"region": "iad"}], "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}, {"name": "production", "automatic": false, "orca": [{"region": "iad"}], "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "envoy": {"profile": "go", "settings": {"services": [{"name": "threatexchange"}], "common_settings": {"internal_hosts": {"acl": null, "ats": null, "omnibot": null, "team": null, "vulndbmirror": null}, "local_service": {"hosts_url": "tcp://127.0.0.1:80"}}}}, "version": "2022df3267b3a8bd01b1ff2eaac056cf0d38b105", "images": [{"parent": {"name": "bionicbase", "version": "5fe8989bbb7b0c5bf937176f5293c25709d3233f", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "bionicbase", "version": "5fe8989bbb7b0c5bf937176f5293c25709d3233f", "sub_image": null, "external": false}}, "thryft": {"name": "thryft", "description": "Automated spend detection workflow service", "repository": "git@github.com:lyft/thryft.git", "slack": "#capacity", "team_email": "capacity@lyft.com", "pagerduty_escalation_policy": "Capacity", "image_type": "service", "service_tier": 3, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/thryft", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}, {"name": "dynamodetectors", "command": "dumb-init -- service_venv python manage.py dynamo-detectors", "workdir": "/code/thryft", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "dynamodetectorswithnotification", "command": "dumb-init -- service_venv python manage.py dynamo-detectors --notify-owners-live-run", "workdir": "/code/thryft", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "ec2analyticsdetectors", "command": "dumb-init -- service_venv python manage.py ec2-analytics-detectors", "workdir": "/code/thryft", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "ec2detectors", "command": "dumb-init -- service_venv python manage.py ec2-detectors", "workdir": "/code/thryft", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "ec2detectorswithnotification", "command": "dumb-init -- service_venv python manage.py ec2-detectors --asg-avg-lt-eq-min-exporter-live-run", "workdir": "/code/thryft", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "ec2instancedetectors", "command": "dumb-init -- service_venv python manage.py ec2-instance-detectors", "workdir": "/code/thryft", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "flytedetectors", "command": "dumb-init -- service_venv python manage.py flyte-detectors", "workdir": "/code/thryft", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "unattributeddetector", "command": "dumb-init -- service_venv python manage.py unattributed-detector", "workdir": "/code/thryft", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "2Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "thryft.legacy", "chargeback.dev", "jobscheduler.dev", "mailer.dev", "team.dev"]}, {"name": "service_group", "members": ["thryft.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "thryft.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "thryft.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "thryft.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}, {"name": "dynamodetectors", "member": "thryft.dynamodetectors", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 21 * * *"}, {"name": "dynamodetectorswithnotification", "member": "thryft.dynamodetectorswithnotification", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 8 * * 2"}, {"name": "ec2analyticsdetectors", "member": "thryft.ec2analyticsdetectors", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 16 * * *"}, {"name": "ec2detectors", "member": "thryft.ec2detectors", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 14 * * *"}, {"name": "ec2detectorswithnotification", "member": "thryft.ec2detectorswithnotification", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 7 * * 3"}, {"name": "ec2instancedetectors", "member": "thryft.ec2instancedetectors", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 13 * * *"}, {"name": "flytedetectors", "member": "thryft.flytedetectors", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 20 * * *"}, {"name": "unattributeddetector", "member": "thryft.unattributeddetector", "type": "cron", "concurrency_policy": "forbid", "schedule": "0 16 * * 1"}], "deploy": [{"name": "staging", "bake_time_minutes": 0, "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "bake_time_minutes": 0, "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production", "automatic": true, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "dynamodetectors"}, {"facet": "dynamodetectorswithnotification"}, {"facet": "ec2analyticsdetectors"}, {"facet": "ec2detectors"}, {"facet": "ec2detectorswithnotification"}, {"facet": "ec2instancedetectors"}, {"facet": "flytedetectors"}, {"facet": "unattributeddetector"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "thryft"}], "common_settings": {"internal_hosts": {"chargeback": null, "jobschedulerbulkweb": null, "team": null}}}}, "logging": {"thryft": {"fields": {"asg_name": "keyword", "aws_product_code": "keyword", "aws_region": "keyword", "detector_name": "keyword", "table_name": "keyword"}}}, "version": "76afaee3522700ae248810362de7ed47e74b8712", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "6e93d70407abe5a531d3d1d81ee9b9405f9e0992", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "thryftui": {"name": "thryftui", "description": "Frontend to Lyft's internal service for tracking spending anomalies", "repository": "git@github.com:lyft/thryftui.git", "slack": "#capacity", "team_email": "capacity-team@lyft.com", "pagerduty_escalation_policy": "Capacity", "image_type": "service", "service_tier": 3, "languages": ["javascript"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/s2inode:service.835f87582b1b091b3ef8895d577ba3439540abbe", "buildargs": ["ASSET_DIR=.dist/static", "CDN_PATH=_next/static"], "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "cdnupload", "command": "/code/thryftui/cdn-upload", "sub_image": "k8s"}, {"name": "service", "command": "dumb-init -- npm run prod", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "thryft.dev", "servicecatalog.dev", "chargeback.dev", "thryftui.legacy"]}, {"name": "service_group", "members": ["thryftui.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "thryftui.dev"}, {"name": "unit", "type": "jailed", "autotrigger": false, "command": "make test_unit"}], "facets": [{"name": "assets", "member": "thryftui.cdnupload", "type": "job"}, {"name": "main", "member": "thryftui.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "thryftui.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "thryftui"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null, "chargeback": null, "thryft": null, "servicecatalog": null, "team": null}}}}, "version": "80b743fdccc2207f44a506cdc8e11bc94341b3d5", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2inode", "version": "835f87582b1b091b3ef8895d577ba3439540abbe", "sub_image": "service", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "timecard": {"name": "timecard", "description": "jobscheduler handlers for driver hours worked, weekly feedback emails etc", "repository": "git@github.com:lyft/timecard.git", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "timecard.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "timecard.dev"}, {"name": "lint", "type": "execution", "group": "timecard.dev", "container": "timecard.legacy", "command": "make test_lint"}, {"name": "unit", "type": "execution", "group": "timecard.dev", "container": "timecard.legacy", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "timecard.dev", "container": "timecard.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#insurance", "team_email": "insurance-tech@lists.lyft.com", "pagerduty_escalation_policy": "Insurance", "slack_deploy_notification_environments": ["canary", "production"], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": true}, {"name": "production", "legacy": true}]], "service_tier": 2, "languages": ["python"], "image_type": "service", "pulldeploy_components": {"data": ["regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "timecard"}, {"name": "timecardbatch"}], "common_settings": {"internal_hosts": {"jobschedulerbulkweb": null, "jobschedulernormalweb": null, "locationsasync": null, "regions": null, "rides": null, "supply": null, "tcs": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "logging": {"timecard": {"fields": {"driver_shift": {"start_time_ms": "keyword", "driver_id": "keyword"}, "current_ride": "keyword", "next_ride": "keyword", "driver_id": "keyword", "start_time_ms": "date", "end_time_ms": "date", "shift_id": "keyword", "driver_shift_end_event": {"user_id": "keyword", "start_location": "keyword", "event_id": "keyword", "end_location": "keyword", "shift_id": "keyword", "end_time": "date", "start_time": "date"}, "operation": "keyword", "phase_data": {"phase": "long", "end_time": "date", "driver_id": "keyword", "start_time": "date", "event_id": "keyword", "shift_id": "keyword", "shift_type": "keyword", "end_location": "keyword", "start_location": "keyword"}, "distance": "long", "exception": "keyword", "event": {"start_location": "keyword", "start_time": "date", "user_id": "keyword", "shift_id": "keyword", "end_time": "date", "event_id": "keyword", "end_location": "keyword", "occurred_at": "date", "primary_driving_region": "keyword", "driver_lyft_id": "keyword"}, "shift_type": "keyword", "phase_object": {"end_location": "keyword", "driver_id": "keyword", "event_id": "keyword", "phase": "long", "end_time": "date", "shift_type": "keyword", "shift_id": "keyword", "start_time": "date", "start_location": "keyword"}, "error": "keyword", "memory_phase": {"driver_id": "keyword", "shift_id": "keyword", "end_lat": "float", "start_region": "keyword", "start_lat": "float", "event_id": "keyword", "start_time_ms": "keyword", "processing_state": "keyword", "phase": "long", "updated_at_ms": "keyword", "end_inside_region": "boolean", "end_lng": "float", "distance_meters": "keyword", "end_time_ms": "keyword", "end_region": "keyword", "distance_method": "keyword", "start_inside_region": "boolean", "duration_ms": "keyword", "start_lng": "float"}, "disk_phase": {"end_region": "keyword", "phase": "long", "end_time_ms": "keyword", "start_region": "keyword", "end_inside_region": "boolean", "driver_id": "keyword", "shift_id": "keyword", "end_lng": "float", "distance_meters": "keyword", "updated_at_ms": "keyword", "processing_state": "keyword", "event_id": "keyword", "start_lat": "float", "start_inside_region": "boolean", "start_time_ms": "keyword", "start_lng": "float", "end_lat": "float", "duration_ms": "keyword", "distance_method": "keyword"}, "get_rides_size": "long", "get_rides_discrepancy": "long"}}}, "version": "5fccedf7a5449c0a4b0eee6f53044cbb0175f510", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "tnwcommstrust": {"name": "tnwcommstrust", "description": "analytic for comms trust for trustnetworks processing", "repository": "git@github.com:lyft/tnw-analytics-comms-trust.git", "slack": "#tnw-bots", "image_type": "tool", "languages": ["go"], "builder": {"name": "s2i", "params": {"builder": "lyft/s2igocli:359c70999eadeb5d8dba93c841092d2df9d05867"}}, "deploy": [{"name": "development", "legacy": false}, {"name": "production", "automatic": false, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "team_email": "ahassall@lyft.com", "version": "aef082a4371b4d2a193c5648ff626a73c8b55f4f", "images": [{"parent": {"name": "s2igocli", "version": "359c70999eadeb5d8dba93c841092d2df9d05867", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "359c70999eadeb5d8dba93c841092d2df9d05867", "sub_image": null, "external": false}}, "tnwdetector": {"name": "tnwdetector", "description": "analytic for detector for trustnetworks processing", "repository": "git@github.com:lyft/tnw-analytics-detector.git", "slack": "#tnw-bots", "image_type": "tool", "languages": ["go"], "builder": {"name": "s2i", "params": {"builder": "lyft/s2igocli:6ef32d501eb63a638e3e54c628c5fcefd1d3b301"}}, "deploy": [{"name": "development", "legacy": false}, {"name": "production", "automatic": false, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "team_email": "ahassall@lyft.com", "version": "13cdcca11db198febf2c197465f37949a00c4ea1", "images": [{"parent": {"name": "s2igocli", "version": "6ef32d501eb63a638e3e54c628c5fcefd1d3b301", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "6ef32d501eb63a638e3e54c628c5fcefd1d3b301", "sub_image": null, "external": false}}, "tnwdynamicdetector": {"name": "tnwdynamicdetector", "description": "analytic for tnw dynamic detector for trustnetworks processing", "repository": "git@github.com:lyft/tnw-dynamic-detector.git", "slack": "#tnw-bots", "image_type": "tool", "languages": ["go"], "builder": {"name": "s2i", "params": {"builder": "lyft/s2igocli:359c70999eadeb5d8dba93c841092d2df9d05867"}}, "deploy": [{"name": "development", "legacy": false}, {"name": "production", "automatic": false, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "team_email": "ahassall@lyft.com", "version": "be17e0ae49da6f1c8b3c8411a13dec46c40ad062", "images": [{"parent": {"name": "s2igocli", "version": "359c70999eadeb5d8dba93c841092d2df9d05867", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "359c70999eadeb5d8dba93c841092d2df9d05867", "sub_image": null, "external": false}}, "tnwelasticsearch": {"name": "tnwelasticsearch", "description": "analytic for elasticsearch for trustnetworks processing", "repository": "git@github.com:lyft/tnw-analytics-elasticsearch.git", "slack": "#tnw-bots", "image_type": "tool", "languages": ["go"], "builder": {"name": "s2i", "params": {"builder": "lyft/s2igocli:359c70999eadeb5d8dba93c841092d2df9d05867"}}, "deploy": [{"name": "development", "legacy": false}, {"name": "production", "automatic": false, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "team_email": "ahassall@lyft.com", "version": "a48023ede2329900bfe7cf88a21bee46d9d33d3c", "images": [{"parent": {"name": "s2igocli", "version": "359c70999eadeb5d8dba93c841092d2df9d05867", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "359c70999eadeb5d8dba93c841092d2df9d05867", "sub_image": null, "external": false}}, "tnwgeoip": {"name": "tnwgeoip", "description": "analytic for geoip for trustnetworks processing", "repository": "git@github.com:lyft/tnw-analytics-geoip.git", "slack": "#tnw-bots", "image_type": "tool", "languages": ["go"], "builder": {"name": "s2iplus", "params": {"builder": "lyft/s2igocli:3b08835dca0af9aa06781c963b2577dfa5f3f0de", "sources": [{"name": "maxmind", "source": "deb http://ppa.launchpad.net/maxmind/ppa/ubuntu trusty main", "keyid": "F44B38CE3DB1BF64B61DBD28DE1997DCDE742AFA"}], "packages": ["geoipupdate"]}}, "deploy": [{"name": "development", "legacy": false}, {"name": "production", "automatic": false, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "team_email": "ahassall@lyft.com", "version": "04ec86ee99bfd981161b58a1975bc7934a57001e", "images": [{"parent": {"name": "s2igocli", "version": "3b08835dca0af9aa06781c963b2577dfa5f3f0de", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "3b08835dca0af9aa06781c963b2577dfa5f3f0de", "sub_image": null, "external": false}}, "tnwnetgraph": {"name": "tnwnetgraph", "description": "analytic for populating net graph for trustnetworks processing", "repository": "git@github.com:lyft/tnw-analytics-net-graph.git", "slack": "#tnw-bots", "image_type": "tool", "languages": ["go"], "builder": {"name": "s2i", "params": {"builder": "lyft/s2igocli:3b08835dca0af9aa06781c963b2577dfa5f3f0de"}}, "deploy": [{"name": "development", "legacy": false}, {"name": "production", "automatic": false, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "team_email": "ahassall@lyft.com", "version": "0285419db1ed5ebd4190cbf5a2af7298e11be172", "images": [{"parent": {"name": "s2igocli", "version": "3b08835dca0af9aa06781c963b2577dfa5f3f0de", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "3b08835dca0af9aa06781c963b2577dfa5f3f0de", "sub_image": null, "external": false}}, "tnwpayloadmetadata": {"name": "tnwpayloadmetadata", "description": "analytic for payload metadata extraction for trustnetworks processing", "repository": "git@github.com:lyft/tnw-analytics-payload-metadata.git", "slack": "#tnw-bots", "image_type": "tool", "languages": ["go"], "builder": {"name": "s2i", "params": {"builder": "lyft/s2igocli:359c70999eadeb5d8dba93c841092d2df9d05867"}}, "deploy": [{"name": "development", "legacy": false}, {"name": "production", "automatic": false, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "team_email": "ahassall@lyft.com", "version": "cbe1403e18fd90a9ba5099a881471e2d5b219451", "images": [{"parent": {"name": "s2igocli", "version": "359c70999eadeb5d8dba93c841092d2df9d05867", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "359c70999eadeb5d8dba93c841092d2df9d05867", "sub_image": null, "external": false}}, "tnwriskgraph": {"name": "tnwriskgraph", "description": "analytic for risk graph for trustnetworks processing", "repository": "git@github.com:lyft/tnw-analytics-risk-graph.git", "slack": "#tnw-bots", "image_type": "tool", "languages": ["go"], "builder": {"name": "s2i", "params": {"builder": "lyft/s2igocli:359c70999eadeb5d8dba93c841092d2df9d05867"}}, "deploy": [{"name": "development", "legacy": false}, {"name": "production", "automatic": false, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "team_email": "ahassall@lyft.com", "version": "dda35948f76d73893df19fd6092a5aa4c603250e", "images": [{"parent": {"name": "s2igocli", "version": "359c70999eadeb5d8dba93c841092d2df9d05867", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "359c70999eadeb5d8dba93c841092d2df9d05867", "sub_image": null, "external": false}}, "tnwthreatgraph": {"name": "tnwthreatgraph", "description": "analytic for threat graph for trustnetworks processing", "repository": "git@github.com:lyft/tnw-analytics-threat-graph.git", "slack": "#tnw-bots", "image_type": "tool", "languages": ["go"], "builder": {"name": "s2i", "params": {"builder": "lyft/s2igocli:359c70999eadeb5d8dba93c841092d2df9d05867"}}, "deploy": [{"name": "development", "legacy": false}, {"name": "production", "automatic": false, "legacy": false, "kubernetes": {"enabled": true, "cluster_labels": {"cluster.lyft.net/role": "trustnetwork"}, "cluster_tolerations": {"cluster.lyft.net/restricted": "trustnetwork"}}}], "team_email": "ahassall@lyft.com", "version": "87f87154ecf4ce96cf30237be2514e164b53134d", "images": [{"parent": {"name": "s2igocli", "version": "359c70999eadeb5d8dba93c841092d2df9d05867", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2igocli", "version": "359c70999eadeb5d8dba93c841092d2df9d05867", "sub_image": null, "external": false}}, "tolls": {"name": "tolls", "description": "tolls", "repository": "git@github.com:lyft/tolls.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 300, "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn -c /etc/gunicorn/gunicorn.conf  application.app:app --workers=2 --worker-class gevent --worker-connections=1000 --timeout=400", "workdir": "/code/tolls", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}], "facets": [{"name": "main", "member": "tolls.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 10}}}}, {"name": "canary", "member": "tolls.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "dsfeatures.dev", "mongodb.server", "sqs.server", "tolls.legacy", "redis.dev", "modelexec.dev"]}], "tests": [{"name": "start", "type": "startup", "group": "tolls.dev"}, {"name": "unit", "type": "execution", "group": "tolls.dev", "container": "tolls.legacy", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "tolls.dev", "container": "tolls.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#pricing-xp-public", "notification_overrides": {"deploy": {"slack": "#pricing-xp-bots"}, "deploy_failure": {"slack": "#pricing-xp-bots"}, "test_failure": {"slack": "#pricing-xp-bots"}, "master_failure": {"slack": "#pricing-xp-bots"}, "pr_merge": {"slack": "#pricing-xp-bots"}}, "team_email": "pricing-xp@lyft.com", "pagerduty_escalation_policy": "Pricing Experience", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "languages": ["javascript", "python"], "image_type": "service", "service_tier": 1, "envoy": {"profile": "python", "settings": {"services": [{"name": "tolls"}], "override_settings": [{"services": [{"name": "tolls"}], "settings": {"internal_hosts": {"dsfeatures": null, "dsfeatureswrites": null, "locationsmapmatch": null, "modelexectolls": null, "modelexectollsdyn": null, "regions": null, "rides": null, "routes": null, "supply": null, "tcs": null, "tolls": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "redis": {"tollsmultiredis": {"port": 6380, "op_timeout_ms": 100}}}}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s", "packages": ["mongodb-clients", "postgresql-client", "lbzip2", "libboost-python-dev", "libexpat1-dev", "zlib1g-dev", "libbz2-dev", "awscli"]}}]}}, "logging": {"tolls": {"fields": {"batch_size": "long", "structures": "keyword", "tollPointId": "keyword", "entry_toll_point": "keyword", "exit_toll_point": "keyword", "usage": "float", "ms": "float", "seconds": "long", "lyft_id": "keyword", "filename": "keyword", "data": {"structures": "keyword", "locations": "keyword"}, "route": "keyword", "ride": "keyword", "model_name": "keyword", "model_version": "keyword", "time": "float", "file": "keyword", "failed_record_count": "long", "attempt_num": "long"}}}, "version": "51a749a1ccc54abe52e1714eb5cab9bfafb6a383", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "tom": {"name": "tom", "description": "tools for operational management", "repository": "git@github.com:lyft/tom.git", "credentials": true, "slack": "#support-bots", "team_email": "support-tech@lyft.com", "pagerduty_escalation_policy": "Support Platform", "image_type": "service", "pulldeploy_components": {"data": ["regioncfgdata"]}, "languages": ["python"], "frontend": {"node_version": "10.14.1-1nodesource1"}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "frontend", "port": 9211}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 --forwarded-allow-ips=\"*\" -k gevent --worker-connections=1000 -c /etc/gunicorn/gunicorn.conf", "sub_image": "k8s", "limits": {"cpu": 8, "memory": "3Gi"}}, {"name": "cdnupload", "command": "dumb-init -- /bin/sh -c \"DIST_PATH_OVERRIDE=/code/tom/tom/dist /code/tom/cdn-upload\"", "sub_image": "k8s"}], "groups": [{"name": "dev", "members": ["control.dev", "tom.legacy"]}, {"name": "templates", "members": ["control.dev", "tom.dev", "www2.dev", "brochure.dev", "robocop.dev"]}, {"name": "integration", "members": ["control.dev", "envoy.server", "dynamodb.server", "elasticsearch.dev", "idl.server", "kafka.server", "kinesis.server", "lyftidl.server", "mongodb.server", "postgresql.server", "redis.server", "sqs.server", "eventingest.service", "featurebuilderdata.run", "featureconfigdata.run", "acl.legacy", "abacus.legacy", "account.legacy", "auth.legacy", "ats.qa_approve", "badcompanions.legacy", "cetconcessions.dev", "challenges.legacy", "coupons.legacy", "dbproxyauth.legacy", "dbproxyroutes.dev", "dispatch.legacy", "dispatchavailability.legacy", "drivermode.legacy", "drivestat.legacy", "dynamostreams.legacy", "etablender.legacy", "etaproxy.legacy", "fare.legacy", "green.legacy", "images.legacy", "jobscheduler.legacy", "karma.legacy", "ledger.legacy", "legacyapi.legacy", "legacyoauth.legacy", "legacyridetypes.legacy", "locations.legacy", "mailer.legacy", "matching.service", "matchingsolver.legacy", "notes.legacy", "payapi.legacy", "places.legacy", "pricing.legacy", "privacyaudit.legacy", "publicapi.legacy", "push.legacy", "pusher.service", "ratelimit.legacy", "ratings.legacy", "regions.legacy", "ridehistory.legacy", "rides.legacy", "ridesapi.legacy", "ridetimeestimator.legacy", "ridexppredictor.legacy", "roads.legacy", "routes.legacy", "routingengine.legacy", "streamingest.legacy", "supply.legacy", "supplypartners.legacy", "supplyrecords.service", "switchboard.legacy", "tcs.legacy", "tom.legacy", "tripsapi.legacy", "trips.dev", "usergroups.legacy", "userpreferences.legacy", "users.legacy", "venues.legacy", "viewport.legacy", "wallet.legacy", "walletapi.legacy", "ghostmatching.dev"]}], "tests": [{"name": "unitbe", "type": "jailed", "command": "make test_unit_be", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}, {"name": "unitfe", "type": "execution", "group": "tom.dev", "container": "tom.legacy", "command": "make test_unit_fe", "reports": {"junit": "test/results/karma-test-results.xml", "control_extract_hack_1": "test/results/karma-test-results.xml"}}, {"name": "integration", "type": "execution", "group": "tom.integration", "container": "tom.legacy", "command": "make test_integration_for browser=chrome", "reports": {"junit": "test/results/protractor-*.xml"}}, {"name": "lint", "type": "jailed", "command": "make test_lint", "reports": {"yamllint": "test/results/yamllint-results.txt", "pylint": "test/results/flake8-results.txt"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"legacy": false, "name": "production", "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "tom"}], "common_settings": {"internal_hosts": {"acl": null, "accidents": null, "acquisitionguarantees": null, "adtech": null, "adtechworkflows": null, "amp": null, "ats": {"tls_enabled": true}, "audience": null, "auth": null, "avarvideos": null, "avingest": null, "avstapling": null, "billingaggregator": null, "campaigns": null, "campaignstorage": null, "cancels": null, "cetconcessions": null, "challenges": null, "coupons": null, "courier": null, "dispatch": null, "driverearnings": null, "driverheatmaps": null, "drivermonitor": null, "drivestat": null, "declientapi": null, "destination": null, "dsfeatures": null, "enterprise": null, "enterpriseapiprovisioning": null, "etaproxy": null, "fare": null, "flexibleincentives": null, "green": {"tls_enabled": true}, "grow": null, "guardian": null, "helium": null, "imageryingest": null, "incentiveconfig": null, "incentiveshistory": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "karma": {"tls_enabled": true}, "lastmile": null, "leadplatform": null, "ledger": null, "legacyapi": null, "locations": null, "locationsmapmatch": null, "logistics": null, "loyaltypoints": null, "loyaltytiers": null, "mailer": null, "mapcuration": null, "mapelement": null, "marketevents": null, "marketweather": null, "martechscoring": null, "messaging": null, "matchingexecution": null, "multimodalrouting": null, "notes": null, "paxrewardsview": null, "payapi": null, "pickupcomms": null, "pickupoptimizer": null, "places": null, "ppzconfig": null, "privacyaudit": null, "publicapi": null, "push": null, "ratelimit": null, "regions": null, "regionsadmin": null, "regulatoryintegrations": {"tls_enabled": true}, "rentals": {"tls_enabled": true}, "halodriver": null, "ridechat": null, "ridehistory": null, "ridelocations": null, "ridepasses": null, "riderperks": null, "rides": null, "ridescheduler": null, "ridevalidations": null, "robocop": null, "routes": null, "routingengine": null, "supply": null, "supplypartners": null, "supplyrecords": {"tls_enabled": true}, "supportactions": null, "supportcontact": null, "switchboard": null, "tcs": null, "tcseditor": null, "tcsresults": null, "team": {"tls_enabled": true}, "trafiadministration": null, "trafichangesetsweb": null, "traficmprr": null, "trafidmpweb": null, "trafieventsweb": null, "trafifleetweb": null, "transit": null, "trips": null, "tripsapi": null, "txnhub": null, "usereligibilities": null, "userprivacyrights": null, "userpreferences": null, "users": {"tls_enabled": true}, "vehiclemetadata": null, "walletapi": null, "wwwratecardfe": null, "www2": null}, "external_hosts": {"kinesis_iad": null, "firehose_iad": null}}, "override_settings": [{"services": [{"name": "tom"}], "settings": {"internal_hosts": {"abacus": null, "account": null, "acceptancerate": null, "acquisitionguarantees": null, "autonomous": null, "backgroundcheck": {"tls_enabled": true}, "badcompanions": null, "driverloyalty": null, "drivermode": null, "enterprisedispatch": null, "flaggedtrips": null, "fleetlocations": null, "fleetmanagement": null, "flexibleincentives": null, "legacyoauth": null, "ratings": null, "ridesapi": null, "ridestreaks": null, "superset": null, "usergroups": null, "wallet": null}}}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:frontend.39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s", "packages": ["libfontconfig", "libkrb5-dev"]}}, {"name": "docker_build"}]}}, "logging": {"tom": {"fields": {"participant_id": "keyword", "reference": "keyword", "total": "long", "user": "keyword", "ride_id": "keyword", "envoy_headers": {"x-envoy-max-retries": "keyword", "x-envoy-retry-on": "keyword", "x-envoy-upstream-rq-timeout-ms": "keyword", "x-envoy-upstream-rq-per-try-timeout-ms": "keyword"}, "id": "keyword", "bad_response": {"text": "keyword", "code": "long"}, "user_id": "keyword", "lyft_id": "keyword", "docId": "keyword", "document_id": "keyword", "status": "keyword", "message": "keyword", "href": "keyword", "sending_service": "keyword", "stack": "keyword", "note": "keyword", "attributes": "keyword", "route_id": "keyword", "type": "keyword", "driver_id": "keyword", "region": "keyword", "location": {"dropoff": {"lat": "float", "lng": "float"}, "pickup": {"lat": "float", "lng": "float"}}, "commission_percentage": "long", "ride_type": "keyword", "duration": "long", "prime_time_percentage": "keyword", "body": "keyword", "scheduled_pickup_ms": "keyword", "admin_override": "boolean", "related_rental_id": "keyword", "vehicle_class": "keyword", "location_id": "keyword", "response": "keyword", "notified_driver_ids": "keyword", "error": "keyword", "redirect_url": "keyword", "url": "keyword", "actor": "keyword", "currency": "keyword", "content": "keyword", "status_code": "long", "concession_reason": "keyword", "agent_email": "keyword", "zendesk_ticket_id": "long", "amount_cents": "keyword", "reason": "keyword", "actionType": "keyword", "comment": "keyword", "coupon_value": {"type": "keyword", "amount": "long", "discount_type": "keyword", "currency": "keyword", "max_amount_per_ride": "long", "num_rides": "long", "discount_ratio": "float"}, "code": "keyword", "coupon_details_type": "keyword", "internal_note": "keyword", "can_edit_name": "boolean", "can_edit_phone": "boolean", "can_edit_email": "boolean", "vehicle_model": "keyword", "vehicle_make": "keyword", "start_ms": "keyword", "reservation_id": "keyword", "vehicle_info": {"year": "long", "seatbelts": "long", "vin": "keyword", "model": "keyword", "make": "keyword", "doors": "long", "license_plate": "keyword", "license_plate_state": "keyword", "color": "keyword", "odometer": "long"}, "hertz_ra_number": "keyword", "internalNote": "keyword", "disableActionError": "keyword", "gracePeriodDays": "long", "process_driver_photo": "long", "name": "keyword", "ordering": "long", "readOnly": "boolean", "documentType": "keyword", "title": "keyword", "required": "boolean", "form_data": {"form_data": "keyword"}, "dropoff_location_id": "keyword", "return_reason": "keyword", "should_create_reservation_on_end": "boolean", "vehicle_id": "keyword", "phoneNumber": "keyword", "bulletRequirementsHeaderText": "keyword", "bulletRequirements": "keyword", "is_admin": "boolean", "createdAt": "date", "lastTimeApprovalStatusUpdated": "date", "vehicleId": "keyword", "contentType": "keyword", "uploadedAt": "date", "lastUpdatedAgentEmail": "keyword", "samplePhotoUrl": "keyword", "charge_account_id": "keyword", "updated_data": "keyword", "expiration": "date", "helpCenterUrl": "keyword", "rejectionReasonStandalone": "keyword", "rejectionReasonContextual": "keyword", "rejectionReason": "keyword", "refType": "keyword", "instructions": "keyword", "searchText": "keyword", "pricing": {"insurance_surcharge": "long", "cost_per_distance_unit": "long", "cost_per_minute": "long", "cancel_penalty": "float", "distance_unit": "keyword", "cost_minimum": "long", "pickup_charge": "long", "max_donation_amount": "long"}, "inspection": {"roof": {"condition": "keyword", "notes": "keyword"}, "headliner": {"condition": "keyword", "notes": "keyword"}, "trade_dress_and_docs": {"condition": "keyword", "notes": "keyword"}, "trunk": {"condition": "keyword", "notes": "keyword"}, "passenger_side": {"condition": "keyword", "notes": "keyword"}, "front_seats": {"condition": "keyword", "notes": "keyword"}, "front_carpets": {"condition": "keyword", "notes": "keyword"}, "rear": {"condition": "keyword", "notes": "keyword"}, "driver_side": {"condition": "keyword", "notes": "keyword"}, "rear_seats": {"condition": "keyword", "notes": "keyword"}, "amp": {"condition": "keyword", "notes": "keyword"}, "rear_carpets": {"condition": "keyword", "notes": "keyword"}, "spare_tire": {"condition": "keyword", "notes": "keyword"}, "front": {"condition": "keyword", "notes": "keyword"}, "fuel": {"condition": "keyword", "notes": "keyword"}, "phone_mount": {"condition": "keyword", "notes": "keyword"}, "transponder": {"condition": "keyword"}}, "exponent": "long", "distance": "float", "vehicle_updates": {"status": "keyword", "odometer": "long"}, "instant_deposit_payback": "boolean", "phone_number": "keyword", "rideable_name": "keyword", "region_code": "keyword", "rideable_external_id": "keyword", "rideable_type": "keyword", "created_before_timestamp": "long", "created_after_timestamp": "long", "limit": "long", "signature": "keyword", "reservation_id_tuple": "keyword", "return_reason_details": "keyword", "plan_to_rejoin": "boolean", "compound_component_id": "keyword", "data": {"alarm_date": "keyword", "expiration_date_ms": "keyword", "days_early_to_alarm": "long", "pm_due_odometer": "long", "registration_expiration_date": "keyword", "alarm_odometer": "long"}, "origin_lng": "float", "destination_lat": "float", "destination_lng": "float", "origin_lat": "float", "itinerary_id": "keyword", "notes": "keyword", "coupon_code": "keyword", "request": {"ip": "keyword", "user_agent": "keyword"}, "granter": "keyword", "$resolved": "boolean", "replaceExisting": "boolean", "current_charge_amount": "long", "last_name": "keyword", "issued_at_ms": "keyword", "created_at": "date", "email": "keyword", "amount": "long", "tcs_response_code": "long", "is_automated": "boolean", "charge_id": "keyword", "amount_currency": "keyword", "concession_type": "keyword", "charge_adjustment_id": "keyword", "lyft_vehicle_id": "keyword", "return_reason_notes": "keyword", "fees": "keyword", "incentive_id": "keyword"}}}, "facets": [{"name": "main", "member": "tom.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 6}}}}, {"name": "canary", "member": "tom.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "assets", "member": "tom.cdnupload", "type": "job"}], "version": "484497bf5b46ef2f6ab2a323ebe39efc6f021ee8", "images": [{"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "frontend", "external": false}, "sub_image": "k8s"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "trafiadministration": {"name": "trafiadministration", "description": "Trafi service for administrating various transport service configuration options", "repository": "git@github.com:lyft/trafi-administration.git", "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitStaticPipeline", "credentials": true, "image_type": "service", "service_tier": 2, "languages": ["csharp", "javascript"], "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "containers": [{"name": "net", "command": "make start", "exports": [{"name": "api", "port": 8080}], "logging": {"format": "pythonkv"}}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "traficonfigapi.dev", "trafiadministration.net"]}], "facets": [{"name": "main", "type": "service", "member": "trafiadministration.net", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "canary", "type": "service", "member": "trafiadministration.net", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafiadministration"}], "common_settings": {"internal_hosts": {"trafistorageapi": null}}}}, "logging": {"trafiadministration": {"fields": {"user_id": "keyword"}}}, "version": "94bcde9335242236e1ffc9f0c13470331859bd51", "images": [{"parent": {"name": "dotnetbase", "version": "17b88ba64e260355b5ef3f0b4e6fb24448f7a262", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "17b88ba64e260355b5ef3f0b4e6fb24448f7a262", "sub_image": "sdk", "external": false}}, "trafiauthapi": {"name": "trafiauthapi", "description": "Trafi service for providing authorization for other Trafi services", "repository": "git@github.com:lyft/trafi-auth-api.git", "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitStaticPipeline", "credentials": true, "containers": [{"name": "net", "command": "dotnet /srv/trafi-auth-api/publish/Trafi.Auth.Api.dll", "exports": [{"name": "api", "port": 8080}]}], "image_type": "service", "service_tier": 2, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "trafiauthapi.net"]}], "facets": [{"name": "main", "type": "service", "member": "trafiauthapi.net", "sidecars": ["heka", "statsd", "envoy"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafiauthapi"}]}}, "languages": ["csharp"], "version": "005da73653ca0aea7988ead04216b6ef6bacf99b", "images": [{"parent": {"name": "dotnetbase", "version": "78853a7374bae9ca180d9c266cddb21a8ea51143", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "78853a7374bae9ca180d9c266cddb21a8ea51143", "sub_image": "sdk", "external": false}}, "trafichangesetsweb": {"name": "trafichangesetsweb", "description": "Trafi application for managing data changesets.", "repository": "git@github.com:lyft/trafi-changesets-web.git", "image_type": "service", "service_tier": 2, "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitStaticPipeline", "credentials": true, "languages": ["javascript", "bash"], "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "containers": [{"name": "web", "start_time": 600, "command": "dumb-init -- ./start.sh", "workdir": "/code/trafi-changesets-web", "exports": [{"name": "api", "port": 8080}], "logging": {"format": "pythonkv"}}], "groups": [{"name": "dev", "members": ["control.dev", "tom.dev", "trafistorageapi.dev", "trafidmpweb.dev", "trafichangesetsweb.web"]}], "tests": [{"name": "startup", "type": "startup", "group": "trafichangesetsweb.dev", "autotrigger": false}], "facets": [{"name": "main", "type": "service", "member": "trafichangesetsweb.web", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], "envoy": {"profile": "python", "settings": {"services": [{"name": "trafichangesetsweb"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"tom": null, "acl": null, "trafistorageapi": null, "trafidmpweb": null, "privacyaudit": null}}}}, "logging": {"trafichangesetsweb": {"fields": {"user_id": "keyword"}}}, "version": "6919f572624d54cbf7f44ae0ea06263b73744952", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "traficmprr": {"name": "traficmprr", "description": "Trafi application for comparing static data versions.", "repository": "git@github.com:lyft/trafi-cmprr.git", "image_type": "service", "service_tier": 2, "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitStaticPipeline", "credentials": true, "languages": ["javascript", "bash"], "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "containers": [{"name": "web", "start_time": 600, "command": "dumb-init -- ./start.sh", "workdir": "/code/trafi-cmprr", "exports": [{"name": "api", "port": 8080}], "logging": {"format": "pythonkv"}}], "groups": [{"name": "dev", "members": ["control.dev", "tom.dev", "trafistorageapi.dev", "trafidmpweb.dev", "traficmprr.web"]}], "tests": [{"name": "startup", "type": "startup", "group": "traficmprr.dev", "autotrigger": false}], "facets": [{"name": "main", "type": "service", "member": "traficmprr.web", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], "envoy": {"profile": "python", "settings": {"services": [{"name": "traficmprr"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"tom": null, "acl": null, "trafistorageapi": null, "trafidmpweb": null, "privacyaudit": null}}}}, "logging": {"traficmprr": {"fields": {"user_id": "keyword"}}}, "version": "46270ee0fecc831c1d694fb9079c3e55c400c63a", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "traficonfigapi": {"name": "traficonfigapi", "description": "Trafi service for providing transit agency and region configurations", "repository": "git@github.com:lyft/trafi-config-api.git", "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitStaticPipeline", "credentials": true, "image_type": "service", "service_tier": 1, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "containers": [{"name": "net", "command": "dumb-init -- bash \"start.sh\"", "workdir": "/code/trafi-config-api", "exports": [{"name": "api", "port": 8080}], "logging": {"format": "pythonkv"}}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "traficonfigapi.net"]}], "tests": [{"name": "start", "type": "startup", "group": "traficonfigapi.dev", "run_in_pr": true, "run_in_dev": true}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "run_in_pr": true, "run_in_dev": true}], "facets": [{"name": "main", "type": "service", "member": "traficonfigapi.net", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 1, "max_size": 4}}}}, {"name": "canary", "type": "service", "member": "traficonfigapi.net", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "traficonfigapi"}]}}, "languages": ["csharp"], "logging": {"traficonfigapi": {"fields": {"user_id": "keyword"}}}, "version": "9a268f78dd86287995b3e332c11b975ed189c604", "images": [{"parent": {"name": "dotnetbase", "version": "17b88ba64e260355b5ef3f0b4e6fb24448f7a262", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "17b88ba64e260355b5ef3f0b4e6fb24448f7a262", "sub_image": "sdk", "external": false}}, "trafideparturesapi": {"name": "trafideparturesapi", "description": "Trafi service for providing public transport departures", "repository": "git@github.com:lyft/trafi-departures-api.git", "slack": "#transit-rt-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitRTPipeline", "credentials": true, "containers": [{"name": "worker", "command": "dumb-init -- bash \"start-worker.sh\"", "workdir": "/code/trafi-departures-api", "logging": {"format": "pythonkv"}, "limits": {"cpu": 12, "memory": "10Gi"}}, {"name": "net", "command": "dumb-init -- bash \"start-server.sh\"", "workdir": "/code/trafi-departures-api", "exports": [{"name": "api", "port": 8080}], "limits": {"cpu": 6, "memory": "10Gi"}, "logging": {"format": "pythonkv"}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}}], "languages": ["csharp"], "image_type": "service", "service_tier": 1, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "groups": [{"name": "min", "members": ["control.dev", "redis.server", "kinesis.server", "dynamodb.server", "trafideparturesapi.net"]}, {"name": "dev", "members": ["control.dev", "redis.server", "kinesis.server", "dynamodb.server", "trafideparturesapi.worker", "trafideparturesapi.net", "trafivehiclesservice.dev", "trafirealtimeagents.dev", "traficonfigapi.dev", "trafischedulesapi.dev", "trafiextdeparturesapi.dev"]}], "tests": [{"name": "start", "type": "startup", "group": "trafideparturesapi.dev"}, {"name": "unit", "type": "execution", "command": "make test_unit", "group": "trafideparturesapi.dev", "container": "trafideparturesapi.net"}], "facets": [{"name": "main", "type": "service", "member": "trafideparturesapi.net", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 8, "max_size": 20}}}}, {"name": "maincanary", "type": "service", "member": "trafideparturesapi.net", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "worker", "type": "worker", "member": "trafideparturesapi.worker", "autoscaling": {"environment": {"staging": {"min_size": 3, "max_size": 3}, "production": {"min_size": 3, "max_size": 3}}}}, {"name": "workercanary", "type": "worker", "member": "trafideparturesapi.worker", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "worker"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "maincanary"}, {"facet": "workercanary"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "worker"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "worker"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafideparturesapi"}], "common_settings": {"internal_hosts": {"traficonfigapi": null, "trafischedulesapi": null, "trafiextdeparturesapi": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null}, "redis_clusters": {"trafidep": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "logging": {"trafideparturesapi": {"fields": {"app": "keyword"}}}, "version": "9bb7de31906bddf1b3dca19552e7c82229fe65e7", "images": [{"parent": {"name": "dotnetbase", "version": "ab83daa3891ebb6c4ad82ada34806306b13e15f5", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "ab83daa3891ebb6c4ad82ada34806306b13e15f5", "sub_image": "sdk", "external": false}}, "trafidmpdbcleanupworker": {"name": "trafidmpdbcleanupworker", "description": "Trafi service for removing old data from DMP DB", "repository": "git@github.com:lyft/trafidmpdbcleanupworker.git", "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitStaticPipeline", "credentials": true, "image_type": "service", "service_tier": 3, "languages": ["csharp"], "containers": [{"name": "net", "command": "dumb-init -- bash \"start.sh\"", "logging": {"format": "pythonkv"}}], "groups": [{"name": "dev", "members": ["control.dev", "trafischedulesapi.dev", "trafidmpdbcleanupworker.net"]}], "facets": [{"name": "main", "type": "worker", "member": "trafidmpdbcleanupworker.net", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafidmpdbcleanupworker"}], "common_settings": {"internal_hosts": {"trafischedulesapi": null}}}}, "logging": {"trafidmpdbcleanupworker": {"fields": {"user_id": "keyword"}}}, "version": "e2ac11d83d5ee66afedda1f6490581071046fa23", "images": [{"parent": {"name": "dotnetbase", "version": "17b88ba64e260355b5ef3f0b4e6fb24448f7a262", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "17b88ba64e260355b5ef3f0b4e6fb24448f7a262", "sub_image": "sdk", "external": false}}, "trafidmpmonitoring": {"name": "trafidmpmonitoring", "description": "Trafi DMP Monitoring", "repository": "git@github.com:lyft/trafi-dmp-monitoring.git", "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitStaticPipeline", "credentials": true, "containers": [{"name": "worker", "command": "dumb-init -- bash \"start-worker.sh\"", "logging": {"format": "pythonkv"}}], "image_type": "service", "service_tier": 3, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "groups": [{"name": "dev", "members": ["control.dev", "trafischedulesapi.dev", "trafistorageapi.dev", "trafidmpmonitoring.worker"]}], "facets": [{"name": "main", "type": "cron", "member": "trafidmpmonitoring.worker", "schedule": "0 14 * * *", "concurrency_policy": "replace"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafidmpmonitoring"}], "common_settings": {"internal_hosts": {"trafistorageapi": null, "trafischedulesapi": null}}}}, "languages": ["csharp"], "logging": {"trafidmpmonitoring": {"fields": {"user_id": "keyword"}}}, "version": "f0a6a29c2218ed891251c8a7b46e0c84176dc445", "images": [{"parent": {"name": "dotnetbase", "version": "ab83daa3891ebb6c4ad82ada34806306b13e15f5", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "ab83daa3891ebb6c4ad82ada34806306b13e15f5", "sub_image": "sdk", "external": false}}, "trafidmps3cacheworker": {"name": "trafidmps3cacheworker", "description": "Trafi service for caching DMP databases to S3", "repository": "git@github.com:lyft/trafidmps3cacheworker.git", "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "Transit", "credentials": true, "containers": [{"name": "net", "command": "dumb-init -- bash \"start.sh\"", "logging": {"format": "pythonkv"}, "limits": {"memory": "4Gi"}}], "image_type": "service", "service_tier": 3, "groups": [{"name": "dev", "members": ["control.dev", "trafistorageapi.dev", "trafidmps3cacheworker.net"]}], "facets": [{"name": "main", "type": "worker", "member": "trafidmps3cacheworker.net", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], "languages": ["csharp"], "version": "f199a7be9eaf0d1e15a3a06b59ee612fca10a04d", "images": [{"parent": {"name": "dotnetbase", "version": "17b88ba64e260355b5ef3f0b4e6fb24448f7a262", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "17b88ba64e260355b5ef3f0b4e6fb24448f7a262", "sub_image": "sdk", "external": false}}, "trafidmptaskrunner": {"name": "trafidmptaskrunner", "description": "Trafi DMP Task Runner", "repository": "git@github.com:lyft/trafi-dmp-task-runner.git", "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitStaticPipeline", "credentials": true, "image_type": "service", "service_tier": 2, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "containers": [{"name": "worker", "command": "dumb-init -- ./start-worker.sh", "workdir": "/code/trafi-dmp-task-runner", "limits": {"cpu": 16, "memory": "128Gi"}, "logging": {"format": "pythonkv"}}], "groups": [{"name": "dev", "members": ["control.dev", "sqs.server", "postgresql.server", "traficonfigapi.dev", "trafistorageapi.dev", "trafischedulesapi.dev", "trafidmptaskrunner.worker"]}], "tests": [{"name": "start", "type": "startup", "group": "trafidmptaskrunner.dev", "run_in_pr": true, "run_in_dev": true}, {"name": "unit", "type": "jailed", "command": "sbt test", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "run_in_pr": true, "run_in_dev": true}], "facets": [{"name": "main", "type": "worker", "member": "trafidmptaskrunner.worker", "autoscaling": {"environment": {"staging": {"min_size": 2, "max_size": 2}, "production": {"min_size": 3, "max_size": 6}}}}, {"name": "canary", "type": "worker", "member": "trafidmptaskrunner.worker", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafidmptaskrunner"}], "common_settings": {"external_hosts": {"sqs_iad": null, "sqs_pdx": null, "firehose_iad": null}, "internal_hosts": {"traficonfigapi": null, "trafischedulesapi": null, "trafistorageapi": null}}}}, "languages": ["scala"], "logging": {"trafidmptaskrunner": {"fields": {"user_id": "keyword"}}}, "version": "a2e88697438cdb2b0f308f70fa3cc41484fbfea1", "images": [{"parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}}, "trafidmptasks": {"name": "trafidmptasks", "description": "Repository of Trafi DMP Tasks", "repository": "git@github.com:lyft/trafi-dmp-tasks.git", "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitStaticPipeline", "credentials": true, "image_type": "service", "service_tier": 2, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit", "run_in_pr": true, "run_in_dev": true}], "deploy": [[{"name": "development_dotnet", "legacy": true, "automatic": true}, {"name": "development_scala", "legacy": true, "automatic": true}, {"name": "development_js", "legacy": true, "automatic": true}, {"name": "development_python", "legacy": true, "automatic": true}], [{"name": "staging_dotnet", "legacy": true, "automatic": true, "bake_time_minutes": 0}, {"name": "staging_scala", "legacy": true, "automatic": true, "bake_time_minutes": 0}, {"name": "staging_js", "legacy": true, "automatic": true, "bake_time_minutes": 0}, {"name": "staging_python", "legacy": true, "automatic": true, "bake_time_minutes": 0}], {"name": "staging", "legacy": true, "automatic": true, "bake_time_minutes": 0}, [{"name": "production_dotnet", "legacy": true}, {"name": "production_scala", "legacy": true}, {"name": "production_js", "legacy": true}, {"name": "production_python", "legacy": true}], {"name": "production", "legacy": true, "automatic": true}], "languages": ["csharp", "java", "javascript", "python", "scala"], "version": "972906717f6feaa75328fa3a690235ea9888fcd9", "images": [{"parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}}, "trafidmptaskschedulerapi": {"name": "trafidmptaskschedulerapi", "description": "Trafi Task Scheduler API", "repository": "git@github.com:lyft/trafi-dmp-task-scheduler-api.git", "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitStaticPipeline", "credentials": true, "image_type": "service", "service_tier": 2, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "containers": [{"name": "net", "command": "dumb-init -- bash \"start.sh\"", "exports": [{"name": "api", "port": 8080}], "logging": {"format": "pythonkv"}}], "groups": [{"name": "dev", "members": ["control.dev", "sqs.server", "postgresql.server", "redis.dev", "trafistorageapi.dev", "trafidmptaskrunner.dev", "trafidmptaskschedulerapi.net", "trafipricingapi.dev"]}], "tests": [{"name": "start", "type": "startup", "group": "trafidmptaskschedulerapi.dev", "run_in_pr": true, "run_in_dev": true}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "run_in_pr": true, "run_in_dev": true}], "facets": [{"name": "main", "type": "service", "member": "trafidmptaskschedulerapi.net", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 1, "max_size": 3}}}}, {"name": "canary", "type": "service", "member": "trafidmptaskschedulerapi.net", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafidmptaskschedulerapi"}], "common_settings": {"external_hosts": {"sqs_iad": null, "sqs_pdx": null}, "internal_hosts": {"trafistorageapi": null}, "redis_clusters": {"trafi": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "languages": ["csharp"], "logging": {"trafidmptaskschedulerapi": {"fields": {"user_id": "keyword", "db_id": "keyword", "pipeline_id": "long", "pipeline_name": "keyword", "pipeline_run_id": "long", "pipeline_status": "keyword", "task_id": "keyword", "task_name": "keyword", "task_run_id": "keyword", "task_run_result_type": "keyword", "next_task_id": "keyword", "next_task_name": "keyword", "next_task_run_id": "keyword", "host": "keyword"}}}, "version": "c1dd974dbce9c6acfeb24f420d6b34d5fc73b881", "images": [{"parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}}, "trafidmpweb": {"name": "trafidmpweb", "description": "Trafi Data Management web UI for managing transit data.", "repository": "git@github.com:lyft/trafi-dmp-web.git", "image_type": "service", "service_tier": 2, "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitStaticPipeline", "credentials": true, "languages": ["bash", "javascript"], "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "containers": [{"name": "web", "start_time": 600, "command": "dumb-init -- ./start.sh", "workdir": "/code/trafi-dmp-web", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "samlbridge.dev", "tom.dev", "trafidmptaskschedulerapi.dev", "trafistorageapi.dev", "trafidmpweb.web"]}], "tests": [{"name": "start", "type": "startup", "group": "trafidmpweb.dev", "autotrigger": false}, {"name": "unit", "type": "jailed", "command": "npm run test", "autotrigger": false}], "facets": [{"name": "main", "type": "service", "member": "trafidmpweb.web", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], "envoy": {"profile": "python", "settings": {"services": [{"name": "trafidmpweb"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"tom": null, "acl": null, "trafidmptaskschedulerapi": null, "trafistorageapi": null, "privacyaudit": null}}}}, "logging": {"trafidmpweb": {"fields": {"user_id": "keyword"}}}, "version": "4f3e8ba433e5d425c9bf8241336e6992f3aa759f", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "trafieventsagents": {"name": "trafieventsagents", "description": "Worker that imports transit service alerts", "repository": "git@github.com:lyft/trafi-events-agents.git", "slack": "#transit-rt-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitRTPipeline", "credentials": false, "image_type": "service", "service_tier": 1, "languages": ["csharp"], "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "containers": [{"name": "net", "command": "dumb-init -- ./start.sh", "exports": [{"name": "api", "port": 8080}], "logging": {"format": "pythonkv"}}], "groups": [{"name": "dev", "members": ["control.dev", "trafieventsapi.dev", "trafieventsagents.net"]}], "facets": [{"name": "main", "type": "service", "member": "trafieventsagents.net", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "canary", "type": "service", "member": "trafieventsagents.net", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafieventsagents"}], "common_settings": {"internal_hosts": {"trafieventsapi": null, "trafischedulesapi": null}}}}, "logging": {"trafieventsagents": {"fields": {"user_id": "keyword"}}}, "version": "4404aeeac6e1898130d498d0eb00023d8dc5a680", "images": [{"parent": {"name": "dotnetbase", "version": "17b88ba64e260355b5ef3f0b4e6fb24448f7a262", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "17b88ba64e260355b5ef3f0b4e6fb24448f7a262", "sub_image": "sdk", "external": false}}, "trafieventsapi": {"name": "trafieventsapi", "description": "Trafi service for managing transit events and disruptions", "repository": "git@github.com:lyft/trafi-events-api.git", "slack": "#transit-rt-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitRTPipeline", "credentials": true, "image_type": "service", "service_tier": 1, "languages": ["csharp"], "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "containers": [{"name": "net", "command": "dumb-init -- ./start-server.sh", "exports": [{"name": "api", "port": 8080}], "logging": {"format": "pythonkv"}}, {"name": "worker", "command": "dumb-init -- ./start-worker.sh", "logging": {"format": "pythonkv"}, "limits": {"memory": "8Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "traficonfigapi.dev", "trafischedulesapi.dev", "trafieventsapi.net"]}], "facets": [{"name": "main", "type": "service", "member": "trafieventsapi.net", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "canary", "type": "service", "member": "trafieventsapi.net", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}, {"name": "worker", "type": "worker", "member": "trafieventsapi.worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "canaryworker", "type": "worker", "member": "trafieventsapi.worker", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "worker"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "canaryworker"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "worker"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "worker"}, {"facet": "canary"}, {"facet": "canaryworker"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafieventsapi"}], "common_settings": {"internal_hosts": {"traficonfigapi": null, "trafischedulesapi": null}}}}, "logging": {"trafieventsapi": {"fields": {"user_id": "keyword"}}}, "version": "ddc7ebee0504ef18cde9bdbf59f52b864ad461d4", "images": [{"parent": {"name": "dotnetbase", "version": "a1e6477b8a831e13286c8fb24c477e44644f6d90", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "a1e6477b8a831e13286c8fb24c477e44644f6d90", "sub_image": "sdk", "external": false}}, "trafieventsweb": {"name": "trafieventsweb", "description": "Trafi UI for managing transit events and disruptions", "repository": "git@github.com:lyft/trafi-events-web.git", "slack": "#transit-rt-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitRTPipeline", "credentials": true, "image_type": "service", "service_tier": 3, "languages": ["javascript"], "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "containers": [{"name": "web", "command": "./start.sh", "exports": [{"name": "web", "port": 8080}], "logging": {"format": "pythonkv"}}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "trafieventsapi.dev", "trafieventsweb.web"]}], "facets": [{"name": "main", "type": "service", "member": "trafieventsweb.web", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafieventsweb"}], "common_settings": {"internal_hosts": {"trafieventsapi": null}}}}, "logging": {"trafieventsweb": {"fields": {"user_id": "keyword"}}}, "version": "1f66d524bfd828ba219c4b1b50a467f7096c0c34", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "trafiextdeparturesapi": {"name": "trafiextdeparturesapi", "description": "Trafi service for external departures api", "repository": "git@github.com:lyft/trafi-external-departures-api.git", "slack": "#transit-rt-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitRTPipeline", "credentials": true, "containers": [{"name": "highworker", "command": "dumb-init -- dotnet /srv/trafi-external-departures-api/publish/Trafi.External.Departures.Api.dll", "logging": {"format": "pythonkv"}, "limits": {"cpu": 8, "memory": "8Gi"}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}}, {"name": "worker", "command": "dumb-init -- dotnet /srv/trafi-external-departures-api/publish/Trafi.External.Departures.Api.dll", "logging": {"format": "pythonkv"}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}}, {"name": "net", "command": "dumb-init -- dotnet /srv/trafi-external-departures-api/publish/Trafi.External.Departures.Api.dll", "exports": [{"name": "api", "port": 8080}], "logging": {"format": "pythonkv"}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}}], "image_type": "service", "service_tier": 1, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "languages": ["csharp"], "groups": [{"name": "dev", "members": ["control.dev", "redis.server", "trafiextdeparturesapi.worker", "trafiextdeparturesapi.net", "traficonfigapi.dev", "trafischedulesapi.dev"]}], "tests": [{"name": "start", "type": "startup", "group": "trafiextdeparturesapi.dev"}, {"name": "unit", "type": "execution", "command": "make test_unit", "group": "trafiextdeparturesapi.dev", "container": "trafiextdeparturesapi.net"}], "facets": [{"name": "main", "type": "service", "member": "trafiextdeparturesapi.net", "envoy_service": "trafiextdeparturesapi", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/main.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 10}}}}, {"name": "maincanary", "type": "service", "member": "trafiextdeparturesapi.net", "canary": true, "envoy_service": "trafiextdeparturesapi", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/main.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "casfctcanary", "type": "worker", "envoy_service": "trafiextdeparturesapiworker", "member": "trafiextdeparturesapi.net", "canary": true, "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/casfct.sls"], "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "calalb", "type": "worker", "envoy_service": "trafiextdeparturesapiworker", "member": "trafiextdeparturesapi.worker", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/calalb.sls"]}, {"name": "casfb", "type": "worker", "envoy_service": "trafiextdeparturesapiworker", "member": "trafiextdeparturesapi.worker", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/casfb.sls"]}, {"name": "casfct", "type": "worker", "envoy_service": "trafiextdeparturesapiworker", "member": "trafiextdeparturesapi.worker", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/casfct.sls"]}, {"name": "mabomb", "type": "worker", "envoy_service": "trafiextdeparturesapiworker", "member": "trafiextdeparturesapi.highworker", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/mabomb.sls"]}, {"name": "nynyfe", "type": "worker", "envoy_service": "trafiextdeparturesapiworker", "member": "trafiextdeparturesapi.worker", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/nynyfe.sls"]}, {"name": "nynymt", "type": "worker", "envoy_service": "trafiextdeparturesapiworker", "member": "trafiextdeparturesapi.highworker", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/nynymt.sls"]}, {"name": "wasest", "type": "worker", "envoy_service": "trafiextdeparturesapiworker", "member": "trafiextdeparturesapi.worker", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/wasest.sls"]}, {"name": "nynymn", "type": "worker", "envoy_service": "trafiextdeparturesapiworker", "member": "trafiextdeparturesapi.worker", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/nynymn.sls"]}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": "core-staging-1"}}, "automatic": true, "targets": [{"facet": "main"}, {"facet": "calalb"}, {"facet": "casfb"}, {"facet": "casfct"}, {"facet": "mabomb"}, {"facet": "nynymn"}, {"facet": "nynymt"}, {"facet": "nynyfe"}, {"facet": "wasest"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": "core-prod-0"}}, "targets": [{"facet": "maincanary"}, {"facet": "casfctcanary"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": "core-prod-0"}}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": ["core-prod-0", "core-prod-3"]}}, "targets": [{"facet": "main"}, {"facet": "maincanary"}, {"facet": "casfctcanary"}, {"facet": "calalb"}, {"facet": "casfb"}, {"facet": "casfct"}, {"facet": "mabomb"}, {"facet": "nynymn"}, {"facet": "nynymt"}, {"facet": "nynyfe"}, {"facet": "wasest"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafiextdeparturesapi"}, {"name": "trafiextdeparturesapiworker", "traffic_type": "egress_only"}], "common_settings": {"internal_hosts": {"traficonfigapi": null, "trafischedulesapi": null}, "redis_clusters": {"trafidep": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "logging": {"trafiextdeparturesapi": {"fields": {"user_id": "keyword", "db_id": "keyword", "schedule_id": "keyword", "track_id": "keyword", "trip_id": "keyword", "gtfs_route_id": "keyword", "vehicle_id": "keyword", "stop_id": "keyword", "feed": "keyword"}}}, "version": "c167d5223144fe33bbb424e468fc9c4f7afdefd5", "images": [{"parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}}, "trafifleetapi": {"name": "trafifleetapi", "description": "Trafi service for providing fleet data", "repository": "git@github.com:lyft/trafi-fleet-api.git", "slack": "#transit-rt-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitRTPipeline", "credentials": true, "image_type": "service", "service_tier": 1, "languages": ["csharp"], "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "containers": [{"name": "net", "command": "dumb-init -- bash \"start-server.sh\"", "workdir": "/code/trafi-fleet-api", "exports": [{"name": "api", "port": 8080}], "logging": {"format": "pythonkv"}}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "trafifleetapi.net", "trafivehiclehistoryapi.dev", "trafivehiclesapi.dev", "traficonfigapi.dev", "trafischedulesapi.dev"]}], "facets": [{"name": "main", "type": "service", "member": "trafifleetapi.net"}, {"name": "canary", "type": "service", "member": "trafifleetapi.net", "canary": true}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafifleetapi"}], "common_settings": {"internal_hosts": {"traficonfigapi": null, "trafischedulesapi": null, "trafivehiclesapi": null, "trafivehiclehistoryapi": null}}}}, "logging": {"trafifleetapi": {"fields": {"user_id": "keyword"}}}, "version": "3f95968163598bbd1c0842f861bab39e3af76f4c", "images": [{"parent": {"name": "dotnetbase", "version": "17b88ba64e260355b5ef3f0b4e6fb24448f7a262", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "17b88ba64e260355b5ef3f0b4e6fb24448f7a262", "sub_image": "sdk", "external": false}}, "trafifleetweb": {"name": "trafifleetweb", "description": "Trafi Front end fleet management internal tool", "repository": "git@github.com:lyft/trafi-fleet-web.git", "image_type": "service", "service_tier": 2, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "slack": "#transit-rt-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitRTPipeline", "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "web", "start_time": 600, "command": "dumb-init -- ./start.sh", "exports": [{"name": "api", "port": 8080}], "logging": {"format": "pythonkv"}}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "groups": [{"name": "dev", "members": ["control.dev", "tom.dev", "trafifleetapi.dev", "trafifleetweb.web"]}], "tests": [{"name": "startup", "type": "startup", "group": "trafifleetweb.dev", "autotrigger": false}], "facets": [{"name": "main", "type": "service", "member": "trafifleetweb.web", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], "envoy": {"profile": "python", "settings": {"services": [{"name": "trafifleetweb"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"tom": null, "acl": null, "trafifleetapi": null, "privacyaudit": null}}}}, "logging": {"trafifleetweb": {"fields": {"user_id": "keyword"}}}, "version": "6468643ff80cd10b69abe6260280701d877ec7bd", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "trafigroundhogstreamer": {"name": "trafigroundhogstreamer", "description": "Trafi groundhog streamer", "repository": "git@github.com:lyft/trafi-groundhog-streamer.git", "slack": "#transit-rt-deploy", "team_email": "transit-tech@lyft.com", "pagerduty_escalation_policy": "TransitRTPipeline", "credentials": true, "containers": [{"name": "worker", "command": "dumb-init -- /code/trafi-groundhog-streamer/start.sh", "logging": {"format": "pythonkv"}}], "image_type": "service", "service_tier": 1, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "kinesis.server", "postgresql.server", "trafigroundhogstreamer.worker"]}], "facets": [{"name": "main", "type": "worker", "member": "trafigroundhogstreamer.worker", "autoscaling": {"environment": {"staging": {"min_size": 2, "max_size": 2}, "production": {"min_size": 3, "max_size": 3}}}}, {"name": "canary", "type": "worker", "member": "trafigroundhogstreamer.worker", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafigroundhogstreamer"}], "common_settings": {"internal_hosts": {"traficonfigapi": null, "trafischedulesapi": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null, "firehose_iad": null}}}}, "logging": {"trafigroundhogstreamer": {"fields": {"user_id": "keyword"}}}, "version": "5bd136bb2c756d38b39a2d8e9a457a07a6552c8b", "images": [{"parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}}, "trafigtfsexporter": {"name": "trafigtfsexporter", "description": "Trafi GTFS Exporter", "repository": "git@github.com:lyft/trafi-gtfs-exporter.git", "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitStaticPipeline", "credentials": false, "image_type": "service", "service_tier": 2, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "languages": ["csharp"], "containers": [{"name": "net", "command": "dumb-init -- bash \"start.sh\"", "exports": [{"name": "api", "port": 8080}], "limits": {"memory": "16Gi"}, "logging": {"format": "pythonkv"}}], "groups": [{"name": "dev", "members": ["control.dev", "trafischedulesapi.dev", "trafistorageapi.dev", "trafigtfsexporter.net"]}], "tests": [{"name": "start", "type": "startup", "group": "trafigtfsexporter.dev", "autotrigger": false}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "facets": [{"name": "main", "type": "cron", "schedule": "30 6 * * *", "concurrency_policy": "forbid", "member": "trafigtfsexporter.net", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafigtfsexporter"}], "common_settings": {"internal_hosts": {"traficonfigapi": null, "trafischedulesapi": null, "trafistorageapi": null}}}}, "version": "24a3cbc93ee80bfdf88eddab7e369a27cc28b296", "images": [{"parent": {"name": "dotnetbase", "version": "5c1ccb75473d2f6a60cf18171f279b7c13ec5efc", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "5c1ccb75473d2f6a60cf18171f279b7c13ec5efc", "sub_image": "sdk", "external": false}}, "trafijobs": {"name": "trafijobs", "description": "trafi cron jobs repository", "repository": "git@github.com:lyft/trafi-jobs.git", "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitStaticPipeline", "credentials": true, "image_type": "service", "service_tier": 2, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "languages": ["csharp", "scala"], "containers": [{"name": "durations", "command": "dumb-init -- ./dmp-realtime-processing/dmp-prepare-realtime-durations/run.sh", "logging": {"format": "pythonkv"}}, {"name": "shapes", "command": "dumb-init -- ./dmp-realtime-processing/Trafi.Dmp.Realtime.Shape.Builder/run.sh", "logging": {"format": "pythonkv"}}], "groups": [{"name": "dev", "members": ["control.dev", "traficonfigapi.dev", "trafijobs.durations", "trafijobs.shapes"]}], "facets": [{"name": "durations", "type": "cron", "member": "trafijobs.durations", "schedule": "* * * * *", "concurrency_policy": "Forbid"}, {"name": "shapes", "type": "cron", "member": "trafijobs.shapes", "schedule": "* * * * *", "concurrency_policy": "Forbid"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "automatic": true, "targets": [{"facet": "durations"}, {"facet": "shapes"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "durations"}, {"facet": "shapes"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafijobs"}], "common_settings": {"internal_hosts": {"traficonfigapi": null}}}}, "logging": {"trafijobs": {"fields": {"region": "keyword"}}}, "version": "ec2674ce7def79cb744bcf55fb614111d2089a1e", "images": [{"parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "3597f176ef3c1272d14d4f8afb63f3e5b65a31cf", "sub_image": null, "external": false}}, "trafinetcorelibs": {"name": "trafinetcorelibs", "description": "This repository is used to store common libraries used in .NET Core projects.", "repository": "git@github.com:lyft/trafi-netcore-libs.git", "image_type": "library", "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "credentials": false, "languages": ["csharp", "java"], "containers": [{"name": "test", "command": "/bin/true"}], "groups": [{"name": "dev", "members": ["trafinetcorelibs.test"]}], "tests": [{"name": "start", "type": "startup", "group": "trafinetcorelibs.dev", "autotrigger": false}, {"name": "unit", "type": "execution", "command": "make test_unit", "group": "trafinetcorelibs.dev", "container": "trafinetcorelibs.test", "autotrigger": false}], "deploy": [{"name": "production", "legacy": true, "automatic": true, "orca": [{"region": "iad", "service_instance": "production"}]}], "version": "842bf5bb55f4f4c4484b3c86da867aae4cf66510", "images": [{"parent": {"name": "dotnetbase", "version": "77405adc4b2987a5d1986294af21a135cd6b338e", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "77405adc4b2987a5d1986294af21a135cd6b338e", "sub_image": "sdk", "external": false}}, "trafiosmapi": {"name": "trafiosmapi", "description": "Trafi service for providing OSM backed walk paths", "repository": "git@github.com:lyft/trafi-osm-api.git", "slack": "#transit-trafi-deploy", "team_email": "transit-tech@lyft.com", "pagerduty_escalation_policy": "Trafi", "credentials": true, "image_type": "service", "service_tier": 3, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "containers": [{"name": "service", "command": "dumb-init -- /code/trafi-osm-api/run.sh", "limits": {"cpu": 6, "memory": "32Gi"}, "exports": [{"name": "api", "port": 8080}], "logging": {"format": "pythonkv"}}, {"name": "osmprocessor", "command": "dumb-init -- /code/trafi-osm-api/run-osmprocessor.sh", "limits": {"cpu": 6, "memory": "32Gi"}, "exports": [{"name": "osmprocessor", "port": 5000}], "logging": {"format": "pythonkv"}}], "groups": [{"name": "dev", "members": ["control.dev", "trafiosmapi.service"]}], "facets": [{"name": "main", "type": "service", "member": "trafiosmapi.service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "osmprocessor", "type": "cron", "member": "trafiosmapi.osmprocessor", "schedule": "*/5 * * * *", "concurrency_policy": "Forbid"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "osmprocessor"}], "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "osmprocessor"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafiosmapi"}]}}, "languages": ["java"], "logging": {"trafiosmapi": {"fields": {"user_id": "keyword"}}}, "version": "46c04af35f6b470da1087c0c7912a012e43be73e", "images": [{"parent": {"name": "java8", "version": "3a0ee9507cdad0759f69cf8758b134e1cee629cd", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "3a0ee9507cdad0759f69cf8758b134e1cee629cd", "sub_image": null, "external": false}}, "trafiosmcutter": {"name": "trafiosmcutter", "description": "Downloads OpenStreetMaps regions and saves to S3", "repository": "git@github.com:lyft/trafi-osm-cutter.git", "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitStaticPipeline", "credentials": false, "image_type": "service", "service_tier": 2, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "languages": ["csharp"], "containers": [{"name": "job", "command": "dumb-init -- bash \"start.sh\"", "workdir": "/code/trafi-osm-cutter", "exports": [{"name": "api", "port": 8080}], "logging": {"format": "pythonkv"}}], "groups": [{"name": "dev", "members": ["control.dev", "traficonfigapi.dev", "trafiosmcutter.job"]}], "facets": [{"name": "main", "type": "cron", "member": "trafiosmcutter.job", "schedule": "* * * * *", "concurrency_policy": "Forbid"}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafiosmcutter"}], "common_settings": {"internal_hosts": {"traficonfigapi": null}}}}, "logging": {"trafiosmcutter": {"fields": {"region": "keyword"}}}, "version": "964ce7f5134a8dc793e15d5ac3c6105df25f905e", "images": [{"parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}}, "trafipricingapi": {"name": "trafipricingapi", "description": "Trafi service for providing public transport fares", "repository": "git@github.com:lyft/trafi-pricing-api.git", "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitStaticPipeline", "credentials": true, "image_type": "service", "service_tier": 2, "languages": ["csharp"], "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "containers": [{"name": "net", "command": "dumb-init -- bash \"start.sh\"", "exports": [{"name": "api", "port": 8080}], "limits": {"cpu": 10, "memory": "10Gi"}, "logging": {"format": "pythonkv"}, "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 120, "timeout_seconds": 120}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 120, "timeout_seconds": 120}}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "trafipricingapi.net", "traficonfigapi.dev", "trafischedulesapi.dev"]}], "tests": [{"name": "start", "type": "startup", "group": "trafipricingapi.dev", "run_in_pr": true, "run_in_dev": true}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "run_in_pr": true, "run_in_dev": true}, {"name": "integration", "type": "execution", "group": "trafipricingapi.dev", "container": "trafipricingapi.net", "command": "make test_integration", "virtualenv": "service_venv", "reports": {"junit": "build/integration.xml"}}], "facets": [{"name": "main", "type": "service", "member": "trafipricingapi.net", "sidecars": ["heka", "fluentbit", "statsd", "envoy"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 2, "max_size": 10}}}}, {"name": "canary", "member": "trafipricingapi.net", "type": "service", "sidecars": ["heka", "fluentbit", "statsd", "envoy"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafipricingapi"}], "common_settings": {"internal_hosts": {"traficonfigapi": null, "trafischedulesapi": null}}}}, "logging": {"trafipricingapi": {"fields": {"user_id": "keyword", "region_id": "keyword"}}}, "version": "4d2a524e79dc6e5fc6d20d27a94d7f7360f6d30c", "images": [{"parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}}, "trafirealtimeagents": {"name": "trafirealtimeagents", "description": "Trafi service that fetches realtime feeds from external services and publishes to internal streams", "repository": "git@github.com:lyft/trafi-realtime-agents.git", "slack": "#transit-rt-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitRTPipeline", "credentials": true, "containers": [{"name": "net", "command": "dumb-init -- bash \"start.sh\"", "workdir": "/code/trafi-realtime-agents", "exports": [{"name": "api", "port": 8080}], "logging": {"format": "pythonkv"}, "limits": {"cpu": 8, "memory": "4Gi"}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}}], "languages": ["csharp", "python"], "image_type": "service", "service_tier": 1, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "postgresql.server", "traficonfigapi.dev", "trafischedulesapi.dev", "trafirealtimeagents.net", "kinesis.server"]}], "tests": [{"name": "start", "type": "startup", "group": "trafirealtimeagents.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "command": "make test_int", "group": "trafirealtimeagents.dev", "container": "trafirealtimeagents.net"}], "facets": [{"name": "sanfranciscomunicanary", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/sanfrancisco-muni.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "bostonmbta", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/boston-mbta.sls"]}, {"name": "bostonripta", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/boston-ripta.sls"]}, {"name": "chicagoctabus", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/chicago-ctabus.sls"]}, {"name": "chicagoctatrain", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/chicago-ctatrain.sls"]}, {"name": "chicagometra", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/chicago-metra.sls"]}, {"name": "chicagopace", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/chicago-pace.sls"]}, {"name": "chicagosouthshoreline", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/chicago-southshoreline.sls"]}, {"name": "denverrtd", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/denver-rtd.sls"]}, {"name": "losangelesbigbluebus", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/losangeles-bigbluebus.sls"]}, {"name": "losangelesfoothill", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/losangeles-foothill.sls"]}, {"name": "losangelesladot", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/losangeles-ladot.sls"]}, {"name": "losangeleslametro", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/losangeles-lametro.sls"]}, {"name": "losangeleslametrorail", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/losangeles-lametrorail.sls"]}, {"name": "losangeleslongbeach", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/losangeles-longbeach.sls"]}, {"name": "losangelesmetrolinktrains", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/losangeles-metrolinktrains.sls"]}, {"name": "losangelesocta", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/losangeles-octa.sls"]}, {"name": "nashvillemta", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/nashville-mta.sls"]}, {"name": "newyorkcttransit", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/newyork-cttransit.sls"]}, {"name": "newyorkmtabuses", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/newyork-mtabuses.sls"]}, {"name": "newyorknewarkairportexpress", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/newyork-newarkairportexpress.sls"]}, {"name": "newyorknjtransitbus", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/newyork-njtransitbus.sls"]}, {"name": "newyorknjtransittrains", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/newyork-njtransittrains.sls"]}, {"name": "newyorknycferry", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/newyork-nycferry.sls"]}, {"name": "philadelphiasepta", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/philadelphia-septa.sls"]}, {"name": "philadelphiaseptarail", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/philadelphia-septarail.sls"]}, {"name": "portlandtrimet", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/portland-trimet.sls"]}, {"name": "sanfranciscoactransit", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/sanfrancisco-actransit.sls"]}, {"name": "sanfranciscomuni", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/sanfrancisco-muni.sls"]}, {"name": "sanfranciscosonomacountytransit", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/sanfrancisco-sonomacounty-transit.sls"]}, {"name": "sanfranciscovta", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/sanfrancisco-vta.sls"]}, {"name": "sanfranciscovtabus", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/sanfrancisco-vtabus.sls"]}, {"name": "seattleintercitytransit", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/seattle-intercitytransit.sls"]}, {"name": "seattlekingcountymetro", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/seattle-kingcountymetro.sls"]}, {"name": "seattlepiercetransit", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/seattle-piercetransit.sls"]}, {"name": "seattlesoundtransit", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/seattle-soundtransit.sls"]}, {"name": "seattlestreetcar", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/seattle-streetcar.sls"]}, {"name": "seattlewashingtonferries", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/seattle-washingtonferries.sls"]}, {"name": "washingtondccirculator", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/washingtondc-circulator.sls"]}, {"name": "washingtondcdash", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/washingtondc-dash.sls"]}, {"name": "washingtondcfairfax", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/washingtondc-fairfax.sls"]}, {"name": "washingtondcprincegeorges", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/washingtondc-princegeorges.sls"]}, {"name": "washingtondcrideon", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/washingtondc-rideon.sls"]}, {"name": "washingtondcwmatametro", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/washingtondc-wmata-metro.sls"]}, {"name": "washingtondcwmata", "type": "worker", "member": "trafirealtimeagents.net", "environment_files": ["ops/orca/config/washingtondc-wmata.sls"]}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": "core-staging-0"}}, "automatic": true, "targets": [{"facet": "bostonmbta"}, {"facet": "bostonripta"}, {"facet": "chicagoctabus"}, {"facet": "chicagoctatrain"}, {"facet": "chicagometra"}, {"facet": "chicagopace"}, {"facet": "chicagosouthshoreline"}, {"facet": "denverrtd"}, {"facet": "losangelesbigbluebus"}, {"facet": "losangelesfoothill"}, {"facet": "losangelesladot"}, {"facet": "losangeleslametro"}, {"facet": "losangeleslametrorail"}, {"facet": "losangeleslongbeach"}, {"facet": "losangelesmetrolinktrains"}, {"facet": "losangelesocta"}, {"facet": "nashvillemta"}, {"facet": "newyorkcttransit"}, {"facet": "newyorkmtabuses"}, {"facet": "newyorknewarkairportexpress"}, {"facet": "newyorknjtransitbus"}, {"facet": "newyorknjtransittrains"}, {"facet": "newyorknycferry"}, {"facet": "philadelphiasepta"}, {"facet": "philadelphiaseptarail"}, {"facet": "portlandtrimet"}, {"facet": "sanfranciscoactransit"}, {"facet": "sanfranciscomuni"}, {"facet": "sanfranciscosonomacountytransit"}, {"facet": "sanfranciscovta"}, {"facet": "sanfranciscovtabus"}, {"facet": "seattleintercitytransit"}, {"facet": "seattlekingcountymetro"}, {"facet": "seattlepiercetransit"}, {"facet": "seattlesoundtransit"}, {"facet": "seattlestreetcar"}, {"facet": "seattlewashingtonferries"}, {"facet": "washingtondccirculator"}, {"facet": "washingtondcdash"}, {"facet": "washingtondcfairfax"}, {"facet": "washingtondcprincegeorges"}, {"facet": "washingtondcrideon"}, {"facet": "washingtondcwmatametro"}, {"facet": "washingtondcwmata"}]}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": "core-prod-0"}}, "targets": [{"facet": "sanfranciscomunicanary"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": "core-prod-0"}}, "targets": [{"facet": "bostonmbta"}, {"facet": "bostonripta"}, {"facet": "chicagoctabus"}, {"facet": "chicagoctatrain"}, {"facet": "chicagometra"}, {"facet": "chicagopace"}, {"facet": "chicagosouthshoreline"}, {"facet": "denverrtd"}, {"facet": "losangelesbigbluebus"}, {"facet": "losangelesfoothill"}, {"facet": "losangelesladot"}, {"facet": "losangeleslametro"}, {"facet": "losangeleslametrorail"}, {"facet": "losangeleslongbeach"}, {"facet": "losangelesmetrolinktrains"}, {"facet": "losangelesocta"}, {"facet": "nashvillemta"}, {"facet": "newyorkcttransit"}, {"facet": "newyorkmtabuses"}, {"facet": "newyorknewarkairportexpress"}, {"facet": "newyorknjtransitbus"}, {"facet": "newyorknjtransittrains"}, {"facet": "newyorknycferry"}, {"facet": "philadelphiasepta"}, {"facet": "philadelphiaseptarail"}, {"facet": "portlandtrimet"}, {"facet": "sanfranciscoactransit"}, {"facet": "sanfranciscomuni"}, {"facet": "sanfranciscosonomacountytransit"}, {"facet": "sanfranciscovta"}, {"facet": "sanfranciscovtabus"}, {"facet": "seattleintercitytransit"}, {"facet": "seattlekingcountymetro"}, {"facet": "seattlepiercetransit"}, {"facet": "seattlesoundtransit"}, {"facet": "seattlestreetcar"}, {"facet": "seattlewashingtonferries"}, {"facet": "washingtondccirculator"}, {"facet": "washingtondcdash"}, {"facet": "washingtondcfairfax"}, {"facet": "washingtondcprincegeorges"}, {"facet": "washingtondcrideon"}, {"facet": "washingtondcwmatametro"}, {"facet": "washingtondcwmata"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": ["core-prod-0", "core-prod-2"]}}, "targets": [{"facet": "bostonmbta"}, {"facet": "bostonripta"}, {"facet": "chicagoctabus"}, {"facet": "chicagoctatrain"}, {"facet": "chicagometra"}, {"facet": "chicagopace"}, {"facet": "chicagosouthshoreline"}, {"facet": "denverrtd"}, {"facet": "losangelesbigbluebus"}, {"facet": "losangelesfoothill"}, {"facet": "losangelesladot"}, {"facet": "losangeleslametro"}, {"facet": "losangeleslametrorail"}, {"facet": "losangeleslongbeach"}, {"facet": "losangelesmetrolinktrains"}, {"facet": "losangelesocta"}, {"facet": "nashvillemta"}, {"facet": "newyorkcttransit"}, {"facet": "newyorkmtabuses"}, {"facet": "newyorknewarkairportexpress"}, {"facet": "newyorknjtransitbus"}, {"facet": "newyorknjtransittrains"}, {"facet": "newyorknycferry"}, {"facet": "philadelphiasepta"}, {"facet": "philadelphiaseptarail"}, {"facet": "portlandtrimet"}, {"facet": "sanfranciscoactransit"}, {"facet": "sanfranciscomuni"}, {"facet": "sanfranciscosonomacountytransit"}, {"facet": "sanfranciscovta"}, {"facet": "sanfranciscovtabus"}, {"facet": "seattleintercitytransit"}, {"facet": "seattlekingcountymetro"}, {"facet": "seattlepiercetransit"}, {"facet": "seattlesoundtransit"}, {"facet": "seattlestreetcar"}, {"facet": "seattlewashingtonferries"}, {"facet": "washingtondccirculator"}, {"facet": "washingtondcdash"}, {"facet": "washingtondcfairfax"}, {"facet": "washingtondcprincegeorges"}, {"facet": "washingtondcrideon"}, {"facet": "washingtondcwmatametro"}, {"facet": "washingtondcwmata"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafirealtimeagents", "traffic_type": "egress_only"}], "common_settings": {"internal_hosts": {"trafischedulesapi": null}, "external_hosts": {"kinesis_iad": null, "firehose_iad": null}, "redis_clusters": {"trafi": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "logging": {"trafirealtimeagents": {"fields": {"user_id": "keyword"}}}, "version": "08d60e5200f098053ecba3eb57a0a527b4f58150", "images": [{"parent": {"name": "dotnetbase", "version": "ab83daa3891ebb6c4ad82ada34806306b13e15f5", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "ab83daa3891ebb6c4ad82ada34806306b13e15f5", "sub_image": "sdk", "external": false}}, "trafirealtimecollectapi": {"name": "trafirealtimecollectapi", "description": "Realtime collect api", "repository": "git@github.com:lyft/trafi-realtime-collect-api.git", "slack": "#transit-trafi-deploy", "team_email": "transit-tech@lyft.com", "pagerduty_escalation_policy": "Trafi", "credentials": false, "containers": [{"name": "net", "command": "dotnet /srv/trafi-realtime-collect-api/publish/Trafi.Realtime.Collect.Api.dll", "exports": [{"name": "api", "port": 8080}], "logging": {"format": "pythonkv"}}], "image_type": "service", "service_tier": 2, "groups": [{"name": "dev", "members": ["control.dev", "trafirealtimecollectapi.net"]}], "facets": [{"name": "main", "type": "service", "member": "trafirealtimecollectapi.net", "sidecars": ["heka", "statsd", "envoy"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 0, "max_size": 0}}}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafirealtimecollectapi"}], "common_settings": {"internal_hosts": {"traficonfigapi": null}}}}, "version": "c21fe4fe88621aad5f845d53041e95e421e8e21f", "images": [{"parent": {"name": "dotnetbase", "version": "0458f126e0fa27c7648c9c5583e8db77b78a27d3", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "0458f126e0fa27c7648c9c5583e8db77b78a27d3", "sub_image": "sdk", "external": false}}, "trafischedulesapi": {"name": "trafischedulesapi", "description": "Trafi service for providing static schedule data", "repository": "git@github.com:lyft/trafi-schedules.git", "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitStaticPipeline", "credentials": true, "image_type": "service", "service_tier": 1, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "containers": [{"name": "net", "command": "dumb-init -- bash \"start.sh\"", "limits": {"cpu": 8, "memory": "64Gi"}, "exports": [{"name": "api", "port": 8080}], "logging": {"format": "pythonkv"}}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "trafischedulesapi.net"]}], "tests": [{"name": "start", "type": "startup", "group": "trafischedulesapi.dev", "run_in_pr": true, "run_in_dev": true}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "run_in_pr": true, "run_in_dev": true}], "facets": [{"name": "main", "type": "service", "member": "trafischedulesapi.net", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 4}, "production": {"min_size": 8, "max_size": 8}}}}, {"name": "canary", "type": "service", "member": "trafischedulesapi.net", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafischedulesapi"}]}}, "languages": ["csharp"], "logging": {"trafischedulesapi": {"fields": {"user_id": "keyword", "ConnectionId": "keyword", "RequestId": "keyword", "RequestPath": "keyword", "SourceContext": "keyword"}}}, "version": "87ba7751050d9ba8ff6da4ffa5c0d4d6476e2b1d", "images": [{"parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}}, "trafistorageapi": {"name": "trafistorageapi", "description": "Trafi backend service for DMP", "repository": "git@github.com:lyft/trafi-dmp.git", "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitStaticPipeline", "credentials": true, "image_type": "service", "service_tier": 1, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "containers": [{"name": "net", "command": "dumb-init -- bash \"start.sh\"", "exports": [{"name": "api", "port": 8080}], "limits": {"cpu": 4, "memory": "2Gi"}, "logging": {"format": "pythonkv"}}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "traficonfigapi.dev", "trafischedulesapi.dev", "trafistorageapi.net", "trafiosmapi.dev"]}], "tests": [{"name": "start", "type": "startup", "group": "trafistorageapi.dev", "run_in_pr": true, "run_in_dev": true}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}, "run_in_pr": true, "run_in_dev": true}], "facets": [{"name": "main", "type": "service", "member": "trafistorageapi.net", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 5}}}}, {"name": "canary", "type": "service", "member": "trafistorageapi.net", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafistorageapi"}], "common_settings": {"internal_hosts": {"traficonfigapi": null, "trafischedulesapi": null, "trafiosmapi": null}}}}, "languages": ["csharp"], "logging": {"trafistorageapi": {"fields": {"user_id": "keyword"}}}, "version": "1a2489e1407595a94fdaeb0696f4b40d1dd038c8", "images": [{"parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}}, "trafiurlmonitoring": {"name": "trafiurlmonitoring", "description": "Trafi service for monitoring and scraping web pages for transit data", "repository": "git@github.com:lyft/trafi-url-monitoring.git", "slack": "#transit-static-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitStaticPipeline", "credentials": true, "image_type": "service", "service_tier": 3, "languages": ["csharp"], "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "containers": [{"name": "net", "command": "dumb-init -- dotnet /srv/trafi-url-monitoring/publish/Trafi.Url.Monitoring.Worker.dll", "logging": {"format": "pythonkv"}}], "groups": [{"name": "dev", "members": ["control.dev", "trafiadministration.dev", "trafiurlmonitoring.net"]}], "facets": [{"name": "main", "type": "service", "member": "trafiurlmonitoring.net", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "canary", "type": "service", "member": "trafiurlmonitoring.net", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "logging": {"trafiurlmonitoring": {"fields": {"user_id": "keyword"}}}, "version": "da60221edffc358848592632526ae788ad0fa4ad", "images": [{"parent": {"name": "dotnetbase", "version": "17b88ba64e260355b5ef3f0b4e6fb24448f7a262", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "17b88ba64e260355b5ef3f0b4e6fb24448f7a262", "sub_image": "sdk", "external": false}}, "trafivehiclehistoryapi": {"name": "trafivehiclehistoryapi", "description": "Trafi Vehicle History API", "repository": "git@github.com:lyft/trafi-vehicle-history-api.git", "slack": "#transit-rt-deploy", "team_email": "transit-tech@lyft.com", "pagerduty_escalation_policy": "TransitRTPipeline", "credentials": true, "containers": [{"name": "service", "command": "dumb-init -- /code/trafi-vehicle-history-api/start.sh", "exports": [{"name": "api", "port": 8080}], "logging": {"format": "pythonkv"}}], "image_type": "service", "service_tier": 1, "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "trafigroundhogstreamer.dev", "trafivehiclehistoryapi.service"]}], "facets": [{"name": "main", "type": "service", "member": "trafivehiclehistoryapi.service"}, {"name": "canary", "type": "service", "member": "trafivehiclehistoryapi.service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafivehiclehistoryapi"}], "common_settings": {"internal_hosts": {"traficonfigapi": null, "trafischedulesapi": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null, "firehose_iad": null}}}}, "logging": {"trafivehiclehistoryapi": {"fields": {"user_id": "keyword"}}}, "version": "ba105382743474e476db33c93bee663e87de928e", "images": [{"parent": {"name": "java8", "version": "e28fcd8af40bb682c6fdddd3032fbdf6a4585da9", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "e28fcd8af40bb682c6fdddd3032fbdf6a4585da9", "sub_image": null, "external": false}}, "trafivehiclesapi": {"name": "trafivehiclesapi", "description": "Vehicles API, that is reading information from vehicle-updates Kinesis stream", "repository": "git@github.com:lyft/trafi-vehicles-api.git", "slack": "#transit-rt-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitRTPipeline", "containers": [{"name": "net", "command": "dumb-init -- bash \"start-server.sh\"", "exports": [{"name": "api", "port": 8080}], "limits": {"cpu": 12, "memory": "4Gi"}, "logging": {"format": "pythonkv"}}], "languages": ["csharp"], "image_type": "service", "service_tier": 1, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "traficonfigapi.dev", "trafivehiclesapi.net"]}], "tests": [{"name": "start", "type": "startup", "group": "trafivehiclesapi.dev"}, {"name": "unit", "type": "execution", "command": "make test_unit", "group": "trafivehiclesapi.dev", "container": "trafivehiclesapi.net"}], "facets": [{"name": "main", "type": "service", "member": "trafivehiclesapi.net", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 10}}}}, {"name": "canary", "type": "service", "member": "trafivehiclesapi.net", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafivehiclesapi"}], "common_settings": {"internal_hosts": {"traficonfigapi": null}, "redis_clusters": {"trafidep": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "version": "7f4e26ffa4cb9072d0c8c85f47b61555394d8986", "images": [{"parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}}, "trafivehiclesbqlogger": {"name": "trafivehiclesbqlogger", "description": "Trafi Vehicles BigQuery logger", "repository": "git@github.com:lyft/trafi-vehicles-bq-logger.git", "slack": "#transit-rt-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitRTPipeline", "credentials": true, "containers": [{"name": "net", "command": "dumb-init -- bash \"start-worker.sh\"", "workdir": "/code/trafi-vehicles-bq-logger", "limits": {"cpu": 4, "memory": "4Gi"}, "logging": {"format": "pythonkv"}}], "image_type": "service", "service_tier": 2, "languages": ["csharp"], "groups": [{"name": "dev", "members": ["control.dev", "kinesis.server", "dynamodb.server", "trafivehiclesbqlogger.net"]}], "tests": [{"name": "start", "type": "startup", "group": "trafivehiclesbqlogger.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "facets": [{"name": "main", "type": "worker", "member": "trafivehiclesbqlogger.net", "autoscaling": {"environment": {"staging": {"min_size": 3, "max_size": 3}, "production": {"min_size": 3, "max_size": 3}}}}, {"name": "canary", "type": "worker", "member": "trafivehiclesbqlogger.net", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafivehiclesbqlogger"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "kinesis_iad": null}}}}, "version": "42e4c6298600c901413047296ce2a57d68277204", "images": [{"parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}}, "trafivehiclesservice": {"name": "trafivehiclesservice", "description": "Trafi service for vehicle information", "repository": "git@github.com:lyft/trafi-vehicles-service.git", "slack": "#transit-rt-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitRTPipeline", "credentials": true, "containers": [{"name": "net", "command": "dumb-init -- bash \"start-worker.sh\"", "workdir": "/code/trafi-vehicles-service", "limits": {"cpu": 16, "memory": "20Gi"}, "logging": {"format": "pythonkv"}}], "languages": ["csharp"], "image_type": "service", "service_tier": 1, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "groups": [{"name": "min", "members": ["control.dev", "dynamodb.server", "kafka.server", "kinesis.server", "trafivehiclesservice.net"]}, {"name": "dev", "members": ["control.dev", "dynamodb.server", "kafka.server", "kinesis.server", "trafirealtimeagents.dev", "traficonfigapi.dev", "trafischedulesapi.dev", "trafivehiclesservice.net"]}], "tests": [{"name": "start", "type": "startup", "group": "trafivehiclesservice.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "facets": [{"name": "main", "type": "worker", "member": "trafivehiclesservice.net", "autoscaling": {"environment": {"staging": {"min_size": 8, "max_size": 8}, "production": {"min_size": 8, "max_size": 8}}}}, {"name": "canary", "type": "worker", "member": "trafivehiclesservice.net", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafivehiclesservice"}], "common_settings": {"internal_hosts": {"traficonfigapi": null, "trafischedulesapi": null, "trafivelocityapi": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null}}}}, "version": "b9eba3912ebed70a65aa07d71206406b2f04ae57", "images": [{"parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "6d73bb4bf60fd74d44ee377e673df8d5fba4f467", "sub_image": "sdk", "external": false}}, "trafivelocityagg": {"name": "trafivelocityagg", "description": "Trafi Velocity Aggregation Job", "repository": "git@github.com:lyft/trafi-velocity-aggregation-job.git", "slack": "#transit-rt-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitRTPipeline", "credentials": true, "containers": [{"name": "net", "command": "dumb-init -- dotnet /srv/trafi-velocity-aggregation-job/publish/Trafi.VelocityAggregation.Job.dll", "logging": {"format": "pythonkv"}}], "image_type": "service", "service_tier": 1, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "groups": [{"name": "dev", "members": ["control.dev", "trafivelocityagg.net"]}], "tests": [{"name": "start", "type": "startup", "group": "trafivelocityagg.dev", "autotrigger": false}], "facets": [{"name": "main", "type": "worker", "member": "trafivelocityagg.net", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "canary", "type": "worker", "member": "trafivelocityagg.net", "canary": true, "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafivelocityagg"}], "common_settings": {"internal_hosts": {"traficonfigapi": null}}}}, "languages": ["csharp"], "logging": {"trafivelocityagg": {"fields": {"user_id": "keyword"}}}, "version": "12bd03428c82ad94730d5fd0d18f2a5746363ae6", "images": [{"parent": {"name": "dotnetbase", "version": "17b88ba64e260355b5ef3f0b4e6fb24448f7a262", "sub_image": "sdk", "external": false}, "sub_image": null}], "parent": {"name": "dotnetbase", "version": "17b88ba64e260355b5ef3f0b4e6fb24448f7a262", "sub_image": "sdk", "external": false}}, "trafivelocityapi": {"name": "trafivelocityapi", "description": "Trafi Velocity API", "repository": "git@github.com:lyft/trafi-velocity-api.git", "slack": "#transit-rt-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitRTPipeline", "credentials": true, "image_type": "service", "service_tier": 1, "deploy_settings": {"window_start": "09:00 Europe/Vilnius", "window_end": "16:00 America/Los_Angeles"}, "containers": [{"name": "worker", "command": "dumb-init -- /code/trafi-velocity-api/start-worker.sh", "workdir": "/code/trafi-velocity-api", "logging": {"format": "pythonkv"}, "limits": {"cpu": 16, "memory": "128Gi"}, "liveness_probe": {"http_get": {"path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 60, "period_seconds": 1, "failure_threshold": 1}}, {"name": "service", "command": "dumb-init -- /code/trafi-velocity-api/start-server.sh", "workdir": "/code/trafi-velocity-api", "exports": [{"name": "api", "port": 8080}], "limits": {"cpu": 16, "memory": "32Gi"}, "logging": {"format": "pythonkv"}, "liveness_probe": {"http_get": {"path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 60, "period_seconds": 1, "failure_threshold": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "redis.server", "kinesis.server", "traficonfigapi.dev", "trafischedulesapi.dev", "trafivelocityapi.service"]}], "facets": [{"name": "main", "type": "service", "member": "trafivelocityapi.service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 5}}}}, {"name": "worker", "type": "worker", "member": "trafivelocityapi.worker", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 5}}}}, {"name": "canary", "type": "service", "member": "trafivelocityapi.service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "canaryworker", "type": "worker", "member": "trafivelocityapi.worker", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "worker"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "canaryworker"}]}, {"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "worker"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}], "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "canaryworker"}, {"facet": "main"}, {"facet": "worker"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trafivelocityapi"}], "common_settings": {"internal_hosts": {"traficonfigapi": null, "trafischedulesapi": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null, "firehose_iad": null}, "redis": {"trafivelocityapimultiredis": {"port": 6380, "health_check": {"timeout_ms": 1000, "interval_ms": 5000}, "outlier_detection": {"consecutive_5xx": 100, "enforcing_success_rate": 0}}}}}}, "languages": ["scala"], "logging": {"trafivelocityapi": {"fields": {"user_id": "keyword"}}}, "version": "94b7e15f97e150a2446b7556129fb5c7ef03f248", "images": [{"parent": {"name": "java8", "version": "38357e66f665ddb48815a6a2f6d9745504ecd7e4", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "38357e66f665ddb48815a6a2f6d9745504ecd7e4", "sub_image": null, "external": false}}, "transit": {"name": "transit", "description": "Provide transits and multimodal routing", "service_tier": 1, "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "16:00 America/Los_Angeles"}, "repository": "git@github.com:lyft/transit.git", "slack": "#transit-deploy", "notification_overrides": {"pr_open": {"slack": "#transit-server-pr"}}, "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "Transit", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/transit", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi"}, "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}}, {"name": "populatetransitdatacron", "command": "dumb-init -- service_venv python run_cron.py python manage.py populate_transit_data", "workdir": "/code/transit", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "16Gi"}}, {"name": "loadaugmentedtransitdatafromtraficron", "command": "dumb-init -- service_venv python run_cron.py python manage.py load_augmented_transit_data_from_trafi --no-incremental", "workdir": "/code/transit", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "8Gi"}}, {"name": "checkstoperrorscron", "command": "dumb-init -- service_venv python run_cron.py python manage.py check_stop_errors", "workdir": "/code/transit", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "nearbymonitoringcron", "command": "dumb-init -- service_venv python run_cron.py python manage.py nearby_monitoring", "workdir": "/code/transit", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "createitinerarycomparisonjobscron", "command": "dumb-init -- service_venv python run_cron.py python manage.py create_itinerary_comparison_jobs", "workdir": "/code/transit", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "8Gi"}}, {"name": "runitinerarycomparisonjobcron", "command": "dumb-init -- service_venv python run_cron.py python manage.py run_itinerary_comparison_job", "workdir": "/code/transit", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "pushstopsforbasemapcron", "command": "dumb-init -- service_venv python run_cron.py python manage.py push_stops_for_basemap", "workdir": "/code/transit", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "faretestingcron", "command": "dumb-init -- service_venv python run_cron.py python manage.py test_pricing_api", "workdir": "/code/transit", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}], "facets": [{"name": "main", "member": "transit.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 20}}}}, {"name": "canary", "member": "transit.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls"], "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}, {"name": "populatetransitdatacron", "member": "transit.populatetransitdatacron", "type": "cron", "environment_files": ["ops/config/pillar/env.sls"], "schedule": "*/15 * * * *"}, {"name": "loadaugmentedtransitdatafromtraficron", "member": "transit.loadaugmentedtransitdatafromtraficron", "type": "cron", "environment_files": ["ops/config/pillar/env.sls"], "schedule": "*/20 * * * *"}, {"name": "checkstoperrorscron", "member": "transit.checkstoperrorscron", "environment_files": ["ops/config/pillar/env.sls"], "type": "cron", "schedule": "*/5 * * * *"}, {"name": "nearbymonitoringcron", "member": "transit.nearbymonitoringcron", "environment_files": ["ops/config/pillar/env.sls"], "type": "cron", "schedule": "*/5 * * * *"}, {"name": "createitinerarycomparisonjobscron", "member": "transit.createitinerarycomparisonjobscron", "environment_files": ["ops/config/pillar/env.sls"], "type": "cron", "schedule": "30 23 * * *"}, {"name": "runitinerarycomparisonjobcron", "member": "transit.runitinerarycomparisonjobcron", "environment_files": ["ops/config/pillar/env.sls"], "type": "cron", "schedule": "@hourly"}, {"name": "pushstopsforbasemapcron", "member": "transit.pushstopsforbasemapcron", "environment_files": ["ops/config/pillar/env.sls"], "type": "cron", "schedule": "1 12 * * *"}, {"name": "faretestingcron", "member": "transit.faretestingcron", "environment_files": ["ops/config/pillar/env.sls"], "type": "cron", "schedule": "* 16-23,0-1 * * *", "concurrency_policy": "Forbid"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "redis.dev", "transit.legacy"]}, {"name": "integration", "members": ["lyfttestlib.core", "places.dev", "tcs.dev", "trafideparturesapi.dev", "trafidmptaskschedulerapi.dev", "trafipricingapi.dev", "trafivehiclesapi.dev", "transit.dev", "transitdatadecorator.dev", "jobscheduler.dev", "tripsapi.dev"]}], "tests": [{"name": "start", "type": "startup", "group": "transit.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "transit.integration", "container": "transit.legacy", "command": "make test_integration", "virtualenv": "service_venv", "reports": {"junit": "build/integration.xml"}}, {"name": "e2e", "type": "sharded", "group": "transit.integration", "container": "transit.legacy", "target": "tests/e2e", "virtualenv": "integration_venv", "float_dependencies": "0 6-18 * * 1-5", "autotrigger": false, "skip_threshold": 999, "shard_at": "testcase", "reports": {"junit": "build/integration.xml"}}], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}, {"facet": "populatetransitdatacron"}, {"facet": "loadaugmentedtransitdatafromtraficron"}, {"facet": "checkstoperrorscron"}, {"facet": "nearbymonitoringcron"}, {"facet": "pushstopsforbasemapcron"}, {"facet": "faretestingcron"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "links": [{"text": "Deploying Transit Runbook", "url": "https://docs.lyft.net/eng/transit/runbook.html"}], "automatic": true}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}, {"facet": "main"}, {"facet": "populatetransitdatacron"}, {"facet": "loadaugmentedtransitdatafromtraficron"}, {"facet": "checkstoperrorscron"}, {"facet": "nearbymonitoringcron"}, {"facet": "createitinerarycomparisonjobscron"}, {"facet": "runitinerarycomparisonjobcron"}, {"facet": "pushstopsforbasemapcron"}, {"facet": "faretestingcron"}]}], "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "languages": ["python"], "image_type": "service", "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev", "zip", "unzip", "lbzip2", "cmake", "pkg-config"]}}]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "transit"}, {"name": "transitbatch"}], "common_settings": {"internal_hosts": {"dispatchavailability": null, "publicapi": null, "fare": null, "jobschedulernormalweb": null, "lastmile": null, "locations": null, "locationsingest": null, "places": null, "venues": null, "tcs": null, "legacyridetypes": null, "ratelimit": null, "usergroups": null, "users": null, "regions": null, "ridelocations": null, "passengerxpapi": null, "transit": null, "transitnearby": null, "multimodalrouting": null, "traficonfigapi": null, "trafischedulesapi": null, "trafipricingapi": null, "trafideparturesapi": null, "trafivehiclesapi": null, "userprivacyrights": null, "transitdatadecorator": null, "tripsapi": null}, "external_hosts": {"dynamodb_iad": null, "kinesis_iad": null, "firehose_iad": null, "google_maps_https": null, "moovit": null}, "local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "redis_clusters": {"transit": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}}}, "logging": {"transit": {"fields": {"trafi_region": "keyword", "user_id": "keyword", "lng": "float", "lat": "float", "lookup_method": "keyword", "origin_lng": "float", "origin_lat": "float", "origin_name": "keyword", "destination_lng": "float", "destination_lat": "float", "destination_name": "keyword", "schedule_id": "keyword", "track_id": "keyword", "stop_id": "keyword", "route_id": "keyword", "provider_name": "keyword", "max_arrival_time_ms": "keyword", "cache_key": "keyword", "cache_type": "keyword", "itinerary_id": "keyword", "leg_id": "keyword", "vehicle_id": "keyword", "method": "keyword", "path": "keyword", "code": "long", "response": "keyword", "agency_id": "keyword", "destination_stop_id": "keyword", "embark_stop_id": "keyword", "depart_since": "long", "transport_id": "keyword", "delay_ms": "long", "exception_class": "keyword", "skipped_reason": "keyword", "coordinate_lat": "float", "coordinate_lng": "float", "prev_coordinate_lat": "float", "prev_coordinate_lng": "float", "fare_test_id": "keyword"}}, "transitbatch": {"fields": {"stream_name": "keyword", "millis_behind_latest": "long", "origin_lat": "keyword", "origin_lng": "keyword", "trafi_region": "keyword", "provider": "keyword", "transport_id": "keyword", "destination_lat": "keyword", "destination_lng": "keyword", "probability": "keyword", "region": "keyword", "data_provider": "keyword", "cron_uuid": "keyword", "command": "keyword", "geohash_level": "long", "user_id": "keyword", "elapsed_ms": "long", "skipped_reason": "keyword", "route_id": "keyword", "direction": "long", "track_id": "keyword", "schedule_id": "keyword", "lat": "float", "lng": "float", "route": {"origin": "keyword", "destination": "keyword"}, "expires": "date", "max_arrival_time_ms": "keyword", "response": "keyword", "method": "keyword", "code": "long", "path": "keyword", "stop_id": "keyword", "cache_key": "keyword", "geohash": "keyword", "exception": "keyword", "error": "keyword", "user_pool": "keyword", "fare_test_id": "keyword"}}}, "version": "95929d5bcefe2e6d977cda781112201227832bb3", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "transitconfig": {"name": "transitconfig", "description": "Static data for transitconfig", "repository": "git@github.com:lyft/transitconfig.git", "image_type": "data", "service_tier": 0, "slack": "#transit-deploy", "team_email": "transit-server-team@lyft.com", "notification_overrides": {"pr_open": {"slack": "#transit-server-pr"}}, "pagerduty_escalation_policy": "Transit", "languages": ["bash"], "credentials": false, "containers": [{"name": "run", "command": "/code/transitconfig/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/transitconfig"]}, {"name": "service", "command": "/code/transitconfig/service_entrypoint.sh"}], "tests": [{"name": "lint", "type": "jailed", "sub_image": "precommit", "run_in_dev": false, "command": "pre-commit run --all-files --show-diff-on-failure"}], "docs": {"disable": true}, "deploy": [[{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}]], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "version": "0baaa4b8d4990227dd582fc4b66e605803a74ba8", "images": [{"parent": {"name": "imagebase", "version": "3d05522cd0526907149ca4c05273c28771c398bf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "imagebase", "version": "3d05522cd0526907149ca4c05273c28771c398bf", "sub_image": null, "external": false}}, "transitdata": {"name": "transitdata", "description": "Service for managing and presenting public transit data", "repository": "git@github.com:lyft/transitdata.git", "image_type": "service", "service_tier": 1, "deploy_settings": {"window_start": "09:00 America/New_York", "window_end": "16:00 America/Los_Angeles"}, "slack": "#transit-deploy", "notification_overrides": {"pr_open": {"slack": "#transit-server-pr"}}, "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitData", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "transit_rt_merger", "port": 8080}], "limits": {"memory": "16Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "kafka.server", "redis.dev", "transitdata.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "transitdata.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "transitdata.dev", "container": "transitdata.legacy", "command": "make test_integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true, "links": [{"text": "transitdata/TDS Runbook", "url": "https://docs.lyft.net/eng/transitdata/runbook.html"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}], {"name": "production", "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "transitdata"}, {"name": "transitdatabatch", "traffic_type": "egress_only"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"trafischedulesapi": null, "traficonfigapi": null}, "external_hosts": {"dynamodb_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": "precommit"}}]}}, "logging": {"transitdata": {"fields": {"stream_names": "keyword", "expires": "date"}}}, "version": "298d41feb1ab5fc12d951a3e608e6083b89d2441", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "4d97b9c3d4ebe6a6946baea81ba19afccbb6424e", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "transitdatadecorator": {"name": "transitdatadecorator", "repository": "git@github.com:lyft/transitdatadecorator.git", "description": "Provide users with public transit route information and departure data.", "service_tier": 1, "team_email": "transit-team@lyft.com", "pagerduty_escalation_policy": "Transit", "slack": "#transit-deploy", "slack_deploy_notification_environments": ["canary", "production"], "notification_overrides": {"pr_open": {"slack": "#transit-server-pr"}}, "image_type": "service", "languages": ["go"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- transitdatadecorator", "workdir": "/go/src/github.com/lyft/transitdatadecorator", "exports": [{"name": "api", "port": 8080}], "limits": {"cpu": 10, "memory": "20Gi"}, "sub_image": "k8s", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 120, "timeout_seconds": 5}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 120, "timeout_seconds": 5}, "start_time": 300}], "pulldeploy_components": {"data": ["transitconfig"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2iplus", "params": {"builder": "lyft/s2igocli:8ad0040e2e37145a4ff8cdfc6669f48462d32b14", "sub_image": "k8s", "sources": [{"name": "confluent", "source": "deb https://packages.confluent.io/deb/5.3 stable main", "keyid": 41468433}], "packages": ["vim", "librdkafka-dev", "pkg-config"]}}, {"name": "s2iplus", "params": {"sub_image": "precommit", "builder": "lyft/precommit:go.ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sources": [{"name": "confluent", "source": "deb https://packages.confluent.io/deb/5.3 stable main", "keyid": 41468433}], "packages": ["librdkafka-dev", "pkg-config"]}}]}}, "groups": [{"name": "dev", "members": ["control.dev", "kafka.server", "redis.server", "trafipricingapi.dev", "transitdatadecorator.legacy"]}, {"name": "int", "members": ["control.dev", "kafka.server", "redis.server", "trafipricingapi.dev", "etaproxy.dev", "transitdatadecorator.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "transitdatadecorator.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "transitdatadecorator.int", "container": "transitdatadecorator.legacy", "command": "make integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "transitdatadecorator.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 3, "max_size": 8}}}}, {"name": "canary", "member": "transitdatadecorator.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1b", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1b"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {"internal_hosts": {"trafipricingapi": null, "etaproxy": null}, "local_service": {"circuit_breakers": {"default": {"max_connections": 200}}, "hosts_url": "tcp://127.0.0.1:8080"}, "redis_clusters": {"transitdatdecor": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}}, "services": [{"name": "transitdatadecorator"}]}}, "logging": {"transitdatadecorator": {"fields": {"service": "keyword", "method": "keyword", "requestId": "keyword", "err": "keyword"}}}, "version": "3bf7beee895c9dfb1e151056a605e35773aed2df", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "8ad0040e2e37145a4ff8cdfc6669f48462d32b14", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "transitint": {"name": "transitint", "description": "Front end internal tool for transit", "repository": "git@github.com:lyft/transitint.git", "image_type": "service", "service_tier": 2, "slack": "#transit-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "Transit", "credentials": true, "languages": ["bash", "javascript"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "transitint.legacy", "transit.dev", "tom.dev"]}], "tests": [{"name": "start", "type": "startup", "group": "transitint.dev", "autotrigger": false}, {"name": "lint", "type": "jailed", "command": "make test_lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure", "autotrigger": false}, {"name": "unit", "type": "jailed", "command": "make test_unit", "autotrigger": false}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "transitint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"tom": null, "transit": null}}}}, "version": "de16e5c95f556d7587c6b5795d43e897572ccd58", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "transitmodels": {"name": "transitmodels", "description": "Models for transit team", "repository": "git@github.com:lyft/transit-models.git", "slack": "#transit-deploys", "team_email": "transit-server-team@lyft.com", "image_type": "tool", "pagerduty_escalation_policy": "Transit", "builder": {"name": "s2i", "params": {"builder": "lyft/lyftlearnnotebook:a1a8a74d49d77a868e849b542e60421abc2b1c85"}}, "containers": [{"name": "spin", "command": "sleep infinity"}], "deploy": [{"name": "production", "legacy": false, "automatic": true}], "lyftlearn": {}, "languages": ["python"], "version": "0a7ce182ed8e7b2a3c5d21d03cc5b6a1a48a79d1", "images": [{"parent": {"name": "lyftlearnnotebook", "version": "a1a8a74d49d77a868e849b542e60421abc2b1c85", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "lyftlearnnotebook", "version": "a1a8a74d49d77a868e849b542e60421abc2b1c85", "sub_image": null, "external": false}}, "transitnearby": {"name": "transitnearby", "repository": "git@github.com:lyft/transitnearby.git", "description": "Provide users with public transit route information and departure data.", "service_tier": 1, "team_email": "transit-team@lyft.com", "pagerduty_escalation_policy": "Transit", "slack": "#transit-deploy", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:8e738741d84a4e5507052068fa7dafe771cb111a", "sources": [{"name": "confluent", "source": "deb https://packages.confluent.io/deb/5.3 stable main", "keyid": 41468433}], "packages": ["librdkafka-dev", "pkg-config"]}}, {"name": "s2iplus", "params": {"sub_image": "k8s", "builder": "lyft/s2igocli:ab0c2d7e08a25456fad8c44ad7636283eedf04d9", "buildargs": ["GOLANGCI_LINT_VERSION=1.16.0"], "sources": [{"name": "confluent", "source": "deb https://packages.confluent.io/deb/5.3 stable main", "keyid": 41468433}], "packages": ["librdkafka-dev", "pkg-config"]}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- transitnearby", "workdir": "/code/transitnearby", "limits": {"cpu": 6, "memory": "18Gi"}, "sub_image": "k8s", "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "transitnearby.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "transitnearby.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "transitnearby.dev", "container": "transitnearby.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "k8s", "command": "make lint"}], "facets": [{"name": "main", "member": "transitnearby.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "transitnearby.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"common_settings": {}, "services": [{"name": "transitnearby"}]}}, "version": "4be2d8fa6af5af4e31003eea6d74d2b834d8dac7", "images": [{"parent": {"name": "opsbase", "version": "8e738741d84a4e5507052068fa7dafe771cb111a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "ab0c2d7e08a25456fad8c44ad7636283eedf04d9", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "8e738741d84a4e5507052068fa7dafe771cb111a", "sub_image": null, "external": false}}, "transitpayments": {"name": "transitpayments", "description": "A service for managing payments from riders for Public Transit", "repository": "git@github.com:lyft/transitpayments.git", "slack": "#transit-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitPayments", "image_type": "service", "service_tier": 2, "credentials": true, "languages": ["python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn transit_payments.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "redis.server", "transitpayments.legacy"]}, {"name": "integration", "members": ["users.dev", "transitpayments.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "transitpayments.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "transitpayments.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "transitpayments.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "transitpayments"}], "common_settings": {"internal_hosts": {"users": null}, "redis_clusters": {"transit": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 1000}}}}}, "logging": {"transitpayments": {"fields": {"user_id": "keyword"}}}, "version": "b8ddd83eb72dbe3b86c803dbd7204ba1bdd84e8e", "images": [{"parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "f0c4cb60eb89c3c362e2f5601f8e288930a4cc7a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9d2b2eee63d87498a44e0192b78609ba7518f41e", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "23e9e4a963cd4a661c6c2a500353a661b03bc3e1", "sub_image": null, "external": false}}, "transitrealtimeagents": {"name": "transitrealtimeagents", "repository": "git@github.com:lyft/transitrealtimeagents.git", "description": "Transit service that fetches realtime feeds from external services and publishes to internal streams", "service_tier": 1, "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "TransitRTPipeline", "slack": "#transit-rt-deploy", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:29de748f3075c63126ebbce1c0cd341012a69093"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:9da8e35dbaa78ac513f8934273bde2863ebe0c7c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- transitrealtimeagents", "limits": {"cpu": 4, "memory": "512Mi"}, "sub_image": "k8s", "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "transitrealtimeagents.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "transitrealtimeagents.dev"}, {"name": "unit", "type": "jailed", "framework": "go"}, {"name": "integration", "type": "execution", "group": "transitrealtimeagents.dev", "container": "transitrealtimeagents.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "transitrealtimeagents.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 1}}}}, {"name": "canary", "member": "transitrealtimeagents.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": "core-staging-0"}}, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": "core-prod-0"}}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": "core-prod-0"}}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true, "clusterLabels": {"cluster.lyft.net/cluster_name": ["core-prod-0"]}}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "go", "settings": {"services": [{"name": "transitrealtimeagents", "traffic_type": "egress_only"}], "common_settings": {"internal_hosts": {"trafischedulesapi": null}, "external_hosts": {"kinesis_iad": null, "firehose_iad": null}}}}, "version": "7c3c0d46d2732293a3734a7be5469a8ab9d431f5", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "9da8e35dbaa78ac513f8934273bde2863ebe0c7c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "transitrouting": {"name": "transitrouting", "repository": "git@github.com:lyft/transitrouting.git", "description": "Provides a public transit routing service", "service_tier": 1, "team_email": "transit-tech@lyft.com", "pagerduty_escalation_policy": "TransitRouting", "slack": "#transit-routing", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "transitrouting.legacy", "opentripplanner.dev", "places.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "transitrouting.dev"}, {"name": "unit", "type": "jailed", "command": "make unit"}, {"name": "integration", "type": "execution", "group": "transitrouting.dev", "container": "transitrouting.legacy", "command": "make integration"}, {"name": "lint", "type": "jailed", "command": "make lint"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1b", "legacy": true, "availability_zone": "us-east-1b"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production-us-east-1e", "legacy": true, "availability_zone": "us-east-1e"}, {"name": "production-us-east-1f", "legacy": true, "availability_zone": "us-east-1f"}], {"name": "production", "legacy": true}], "envoy": {"profile": "go", "settings": {"common_settings": {"internal_hosts": {"opentripplanner": null, "places": null, "transitrouting": null, "transit": null}, "local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080"}}, "services": [{"name": "transitrouting"}]}}, "logging": {"transitrouting": {"fields": {"service": "keyword", "method": "keyword", "requestId": "keyword", "err": "keyword", "numStops": "long", "numRoutes": "long", "destinationCoordLat": "float", "originCoordLon": "float", "destinationCoordLon": "float", "originCoordLat": "float", "routingDuration": "float", "Rounds": "long"}}}, "version": "bc5e6809c6f9eb23d1f4a9f9736ff28e387cacac", "images": [{"parent": {"name": "opsbase", "version": "89fa8b66419579eaf9b7422dc1c0bf43b005d183", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "89fa8b66419579eaf9b7422dc1c0bf43b005d183", "sub_image": null, "external": false}}, "transitsegment": {"name": "transitsegment", "description": "transitsegment", "repository": "git@github.com:lyft/transitsegment.git", "service_tier": 1, "slack": "#transit-deploy", "team_email": "transit-tech@lyft.com", "pagerduty_escalation_policy": "Transit", "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "transitsegment.legacy"]}, {"name": "integration", "members": ["control.dev", "dynamodb.server", "transitsegment.legacy"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:53e5ad724830e88bd80c26515cf054e9698b7167", "sub_image": "k8s", "buildargs": ["GOLANGCI_LINT_VERSION=1.16.0"]}}]}}, "tests": [{"name": "startup", "type": "startup", "group": "transitsegment.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "restricted", "group": "transitsegment.dev", "container": "transitsegment.legacy", "command": "make integration", "virtualenv": "service_venv", "whitelist": ["dynamodb-server.dev.lyft.net.", "dynamodb-development-iad-onebox.lyft.net.", "statsd-iad-onebox.lyft.net.", "transitsegment-development-iad-onebox.lyft.net.", "usergroups-development-iad-onebox.lyft.net.", "jobscheduler-development-iad-onebox.lyft.net.", "tcs-development-iad-onebox.lyft.net.", "googleusercontent.com.", "s3.amazonaws.com.", "s3-1.amazonaws.com.", "s3-1-w.amazonaws.com.", "172.30.0.0/24", "10.0.0.0/16"], "reports": {"junit": "build/integration.xml"}}, {"name": "coverage_files", "type": "jailed", "run_in_pr": false, "command": "make coverage_files", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "lint", "type": "jailed", "command": "golangci-lint run", "sub_image": "k8s"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "go", "settings": {"services": [{"name": "transitsegment"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 1000}}}, "internal_hosts": {"regions": null, "tcs": null}, "external_hosts": {"firehose_iad": null, "dynamodb_iad": null}}}}, "logging": {"transitsegment": {"fields": {"path": "keyword", "method": "keyword", "host": "keyword", "service": "keyword", "signal": "keyword"}}}, "version": "e0bb485e549a3c0aa78a7a3fe79a24af9620f829", "images": [{"parent": {"name": "opsbase", "version": "f277e5d166522ef6c701b73f22518e9de66acb50", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "53e5ad724830e88bd80c26515cf054e9698b7167", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "f277e5d166522ef6c701b73f22518e9de66acb50", "sub_image": null, "external": false}}, "transittoolsint": {"name": "transittoolsint", "description": "Web frontend for transit service to be accessed through TOM", "repository": "git@github.com:lyft/transittoolsint.git", "slack": "#transit-deploy", "team_email": "transit-server-team@lyft.com", "pagerduty_escalation_policy": "Transit", "image_type": "service", "service_tier": 2, "languages": ["javascript"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:a04fc44f9b70e4855109c2f52723601b9cb196eb"}}, {"name": "s2i", "params": {"builder": "lyft/s2inode:service.4e52b9c9ee57437462c5416c710d4e532dea73da", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "cdnupload", "command": "/code/transittoolsint/cdn-upload", "sub_image": "k8s"}, {"name": "service", "command": "dumb-init -- node /etc/lyft/master.js", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "transittoolsint.legacy", "transit.dev", "tom.dev"]}, {"name": "service_group", "members": ["transittoolsint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "transittoolsint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "facets": [{"name": "assets", "member": "feexample.cdnupload", "type": "job"}, {"name": "main", "member": "transittoolsint.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "transittoolsint.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging-cdn-upload", "automatic": true, "legacy": false, "targets": [{"facet": "assets"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "transittoolsint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null}}}}, "version": "73d69cd33528bde158767bc4c87ad0727d8d94bc", "images": [{"parent": {"name": "opsbase", "version": "a04fc44f9b70e4855109c2f52723601b9cb196eb", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2inode", "version": "4e52b9c9ee57437462c5416c710d4e532dea73da", "sub_image": "service", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "a04fc44f9b70e4855109c2f52723601b9cb196eb", "sub_image": null, "external": false}}, "transitworkflows": {"name": "transitworkflows", "description": "transitworkflows", "repository": "git@github.com:lyft/transitworkflows.git", "slack": "#transit-deploy", "team_email": "transit-team@lyft.com", "pagerduty_escalation_policy": "Transit", "image_type": "flyteworkflow", "languages": ["python"], "containers": [{"name": "spin", "command": "/bin/bash"}], "groups": [{"name": "dev", "members": ["control.dev", "transitworkflows.spin"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "workflow_registration", "type": "execution", "group": "transitworkflows.dev", "container": "transitworkflows.spin", "command": "make register_for_pr"}], "deploy": [{"name": "development", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "staging", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "orca": [{"region": "iad"}]}], "version": "5c59a471c6905a3cd5928cde4d5052c371b70dfe", "images": [{"parent": {"name": "flytebase", "version": "0849e7d3b296b36c5780dabaaa0575f1ebb65822", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "flytebase", "version": "0849e7d3b296b36c5780dabaaa0575f1ebb65822", "sub_image": null, "external": false}}, "translation": {"name": "translation", "description": "Extract English-language strings from services, translate them, and redistribute the translations.", "repository": "git@github.com:lyft/translation.git", "image_type": "service", "service_tier": 2, "slack": "#notifications-bots", "team_email": "notifications-eng@lyft.com", "pagerduty_escalation_policy": "Notifications", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "jobscheduler.dev", "mailer.dev", "appreleases.dev", "translation.legacy", "elasticsearch6.server", "gherepositories.dev"]}, {"name": "integration", "members": ["translation.dev", "ratelimit.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "translation.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml"}}, {"name": "integration", "type": "execution", "group": "translation.integration", "container": "translation.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "lint", "type": "jailed", "command": "make lint", "reports": {"pylint": "build/flake8.txt"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["translationdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "translation"}, {"name": "translationbatch"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 900}}}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "smartling": null}, "internal_hosts": {"ratelimit": null, "translation": null, "mailer": null, "jobschedulerbulkweb": null, "appreleases": null, "gherepositories": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "logging": {"translation": {"fields": {"language": "keyword", "file_type": "keyword", "file_name": "keyword", "originating_service": "keyword", "file_contents": "keyword", "payload": "keyword", "key": "keyword", "langauge": "keyword", "count": "long", "status": "keyword", "job": "keyword", "file": "keyword", "tags": "keyword", "file_uri": "keyword", "args": "keyword", "debug_token": "keyword", "repo_type": "keyword", "locale": "keyword", "list": "keyword", "keys": "keyword", "context": "keyword", "service": "keyword"}}, "translationbatch": {"fields": {"payload": "keyword", "job": "keyword", "key": "keyword", "langauge": "keyword", "lang": "keyword", "args": "keyword", "debug_token": "keyword", "name": "keyword", "is_dynamic": "boolean", "updated_at_ms": "keyword", "translation_content": {"original_string": "keyword", "tags": "keyword", "context": "keyword"}, "is_excluded": "boolean", "file_name": "keyword", "introduced_at_ms": "keyword", "service": "keyword", "language": "keyword", "sent_to_vendor_at_ms": "keyword", "md5_key": "keyword", "id": "keyword"}}}, "version": "72077f5a9abb50b25c497e6df1af54fa1fdb734e", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "translationdata": {"name": "translationdata", "description": "Store static translation files for distribution via data deploy.", "repository": "git@github.com:lyft/translationdata.git", "image_type": "data", "service_tier": 2, "slack": "#notifications-bots", "notification_overrides": {"pr_merge": {"disabled": true}, "deploy": {"disabled": true}, "test_failure": {"disabled": true}}, "team_email": "notifications-eng@lyft.com", "pagerduty_escalation_policy": "Notifications", "languages": ["bash", "python"], "credentials": false, "containers": [{"name": "run", "command": "/code/translationdata/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/translationdata"]}, {"name": "service", "command": "/code/translationdata/service_entrypoint.sh"}, {"name": "spin", "command": "sleep infinity"}], "groups": [{"name": "test_group", "members": ["control.dev", "translationdata.spin"]}], "tests": [{"name": "unit", "type": "jailed", "run_in_dev": false, "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "submit_queue": {"v3_auto_deploy": true}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": "precommit"}}]}}, "version": "1923cfb12f50cc9fc2abdfec5db303ea5885f9da", "images": [{"parent": {"name": "imagebase", "version": "3d05522cd0526907149ca4c05273c28771c398bf", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "imagebase", "version": "3d05522cd0526907149ca4c05273c28771c398bf", "sub_image": null, "external": false}}, "trips": {"name": "trips", "description": "trips", "repository": "git@github.com:lyft/trips.git", "team_email": "core-services@lyft.com", "pagerduty_escalation_policy": "API", "service_tier": 0, "slack": "#trips", "slack_deploy_notification_environments": ["staging", "canary", "production"], "image_type": "service", "languages": ["go"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.1de17b2c133a84a6096806ef9ba985a9ac009b54", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "dumb-init -- trips", "workdir": "/code/trips", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "512Mi"}, "readiness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 15, "timeout_seconds": 1, "period_seconds": 15}, "start_time": 600}], "groups": [{"name": "dev", "members": ["control.dev", "trips.legacy", "dbproxy.dev", "dbproxytrips.dev", "idl.server"]}], "tests": [{"name": "startup", "type": "startup", "group": "trips.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "go", "coverage_options": {"omit": "(main.go|internal/mockery|ops|_test|testhelpers|docs|script|manifest|codecov|glide|Makefile|OWNERS|trip_status|_service.go)"}}, {"name": "integration", "type": "execution", "run_in_pr": true, "group": "trips.dev", "container": "trips.legacy", "framework": "go", "coverage_options": {"omit": "(main.go|internal/mockery|ops|_test|testhelpers|docs|script|manifest|codecov|glide|Makefile|OWNERS|trip_status|_service.go)"}}], "facets": [{"name": "main", "member": "trips.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 9, "max_size": 30}}}}, {"name": "canary", "member": "trips.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}], "envoy": {"profile": "go", "settings": {"services": [{"name": "trips"}], "common_settings": {"authorization": {"permissions": {"trips": {"paths": ["/pb.lyft.trips.Trips/*"], "not_paths": ["/pb.lyft.trips.Trips/GetLegacyActiveTrips", "/pb.lyft.trips.Trips/GetActiveTrips", "/pb.lyft.trips.Trips/GetLegacyCurrentRideId"]}, "walks": {"paths": ["/pb.lyft.walks.Walks/*"]}, "get-legacy-active-trips": {"paths": ["/pb.lyft.trips.Trips/GetLegacyActiveTrips"], "methods": ["POST"]}, "get-active-trips": {"paths": ["/pb.lyft.trips.Trips/GetActiveTrips"], "methods": ["POST"]}, "get-legacy-current-ride-id": {"paths": ["/pb.lyft.trips.Trips/GetLegacyCurrentRideId"], "methods": ["POST"]}}, "bindings": {"*": ["trips", "walks"], "ridesapi": ["get-active-trips"], "tripsapi": ["get-legacy-active-trips", "get-legacy-current-ride-id", "get-active-trips"], "custodian": ["get-legacy-active-trips", "get-legacy-current-ride-id", "get-active-trips"], "walletapi": ["get-active-trips"], "tests": ["*"]}}, "internal_hosts": {"dbproxy": null, "dbproxytrips": null}}}}, "logging": {"trips": {"fields": {"grpcMethod": "keyword", "requestId": "keyword", "stackTrace": "keyword", "grpcStatusCode": "keyword", "userAgent": "keyword", "reqTripId": "keyword"}}}, "version": "c6c809b998ff2fae623faf5841113d6f62e3d1b4", "images": [{"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "1de17b2c133a84a6096806ef9ba985a9ac009b54", "sub_image": "go", "external": false}, "sub_image": "precommit"}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "tripsapi": {"name": "tripsapi", "description": "Compositional service used to interact with trips", "repository": "git@github.com:lyft/tripsapi.git", "slack": "#tripsapi", "team_email": "core-services@lyft.com", "pagerduty_escalation_policy": "API", "image_type": "service", "service_tier": 0, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/tripsapi", "limits": {"cpu": 5, "memory": "1.5Gi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "idl.server", "tripsapi.legacy"]}, {"name": "integration", "members": ["tripsapi.dev", "goldentests.integration", "trips.dev"]}, {"name": "service_group", "members": ["tripsapi.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "tripsapi.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "tripsapi.integration", "container": "tripsapi.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "tripsapi.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 2, "max_size": 5}, "production": {"min_size": 4, "max_size": 75}}}}, {"name": "canary", "member": "tripsapi.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "tripsapi"}], "common_settings": {"internal_hosts": {"jobschedulerbulkweb": null, "jobschedulernormalweb": null, "jobschedulerurgentweb": null, "lastmile": null, "rides": null, "transit": null, "trips": null, "users": null}, "external_hosts": {"firehose_iad": null}}}}, "logging": {"tripsapi": {"fields": {"ride_id": "keyword", "trip_id": "keyword", "action": "keyword", "downstream_cluster": "keyword", "rollout_name": "keyword", "source": "keyword", "shadow_source": "keyword", "mismatch_key": "keyword", "expected_type": "keyword", "expected": "keyword", "actual_type": "keyword", "actual": "keyword", "trip_created_at": "keyword", "ride_status": "long", "ride_created_at": "keyword", "trip_ids": "keyword", "rider_id": "keyword", "active_trips_plans": "keyword", "service_name": "keyword", "url": "keyword", "user_agent": "keyword", "status_code": "keyword", "bad_response": "keyword", "error_class": "keyword", "is_internal": "boolean", "major_app_version": "keyword", "message": "keyword", "client_type": "keyword", "os": "keyword", "error_code": "long", "endpoint": "keyword", "error": "keyword", "user_id": "keyword", "exception_class": "keyword", "riderId": "keyword", "segmentReference": {"rideReference": {"id": "keyword"}}, "attempt_num": "long", "failed_record_count": "long", "recommendedWalkingPickupV2": {"locationMetadata": {"staticMetadata": {"spot": {"navigation": {"wazeExternalNavigation": {"location": {"lngMicrodegrees": "long", "latMicrodegrees": "long"}}, "gmapsExternalNavigation": {"location": {"latMicrodegrees": "long", "lngMicrodegrees": "long"}}, "navigationMethod": {"location": {"lngMicrodegrees": "long", "latMicrodegrees": "long"}}}, "place": {"id": "keyword", "provider": "keyword"}, "name": "keyword"}}}, "portableLocationWithFeatures": {"portableLocation": {"location": {"latMicrodegrees": "long", "lngMicrodegrees": "long"}}}, "locationId": "keyword", "originalPickupLocationV2": {"locationMetadata": {"staticMetadata": {"spot": {"place": {"id": "keyword", "provider": "keyword"}, "navigation": {"navigationMethod": {"location": {"latMicrodegrees": "long", "lngMicrodegrees": "long"}, "wazeExternalNavigation": {"location": {"latMicrodegrees": "long", "lngMicrodegrees": "long"}}, "gmapsExternalNavigation": {"location": {"lngMicrodegrees": "long", "latMicrodegrees": "long"}}}}, "name": "keyword"}}}}, "lockPickup": "boolean", "destination": {"timestampMs": "keyword", "locationId": "keyword", "source": "keyword"}, "origin": {"timestampMs": "keyword", "locationId": "keyword", "source": "keyword"}, "riderNotificationChannels": "keyword", "riderApp": {"platform": "keyword", "platformVersion": {"majorVersion": "keyword", "version": "keyword", "revision": "keyword", "minorVersion": "keyword", "buildNumber": "keyword"}}, "appName": "keyword", "clientId": "keyword", "exception": {"message": "keyword", "class": "keyword"}}}}}, "version": "270ea992c71ba0a1abc09d562bb97c0146f11207", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "trufflehog": {"name": "trufflehog", "description": "Used to look for secrets in source code", "repository": "git@github.com:lyft/truffleHog.git", "image_type": "library", "languages": ["python"], "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:c421d769bbd8479005c5a72d3c46b1eac64cc89d"}}, "tests": [{"name": "unit", "type": "jailed", "command": "python test_all.py"}, {"name": "lint", "type": "jailed", "command": "flake8 ."}], "python": {"mypy": {"python_versions": ["3.6"]}}, "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy", "orca": [{"region": "iad"}]}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true, "orca": [{"region": "iad"}]}], "slack": "#security", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "team_email": "security-engineering@lyft.com", "version": "10c688fb4dde9d49bcb66d56e01ff9e0af6595d6", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "c421d769bbd8479005c5a72d3c46b1eac64cc89d", "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "c421d769bbd8479005c5a72d3c46b1eac64cc89d", "external": false}}, "trustedcontacts": {"name": "trustedcontacts", "description": "Service that manages a user's trusted contacts", "repository": "git@github.com:lyft/trustedcontacts.git", "slack": "#community-safety", "team_email": "community-safety-eng@lyft.com", "pagerduty_escalation_policy": "Community Safety", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/trustedcontacts", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "trustedcontacts.legacy"]}, {"name": "integration", "members": ["trustedcontacts.dev"]}, {"name": "service_group", "members": ["trustedcontacts.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "trustedcontacts.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "trustedcontacts.integration", "container": "trustedcontacts.legacy", "command": "service_venv pytest tests/integration --disable-fixture-analytics-plugin"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "trustedcontacts.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "trustedcontacts.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 50}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "trustedcontacts"}], "common_settings": {"internal_hosts": {"jobschedulernormalweb": null, "messaging": null}, "external_hosts": {"dynamodb_iad": null}, "authorization": {"permissions": {"public": {"paths": ["/v1/trusted-contacts/*"], "methods": ["POST"]}, "get_trusted_contacts_internal": {"paths": ["/v1/internal/trusted-contacts/get-all"], "methods": ["POST"]}, "urm": {"paths": ["/urm/*"], "methods": ["POST"]}}, "bindings": {"envoy": ["public"], "jobscheduler": ["urm"], "taskqueuebulk": ["urm"], "taskqueuemigration": ["urm"], "taskqueuenormal": ["urm"], "sharelocation": ["get_trusted_contacts_internal"]}}}}}, "pulldeploy_components": {"data": ["translationdata"]}, "version": "cf19bbb013b514914dad08d8f1726415e9573094", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "tsdbfilter": {"name": "tsdbfilter", "description": "tsdbfilter", "repository": "git@github.com:lyft/tsdbfilter.git", "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build", "params": {"dockerfile": "Dockerfile.blank"}}, {"name": "s2i", "params": {"builder": "lyft/s2igo:fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": "go"}}]}}, "team_email": "observability-visibility-team@lyft.com", "pagerduty_escalation_policy": "Observability Visibility", "slack": "#observabot", "notification_overrides": {"deploy": {"slack": "#observabot"}, "pr_merge": {"slack": "#observabot"}}, "deploy": [{"name": "staging", "legacy": false, "kubernetes": {"enabled": false}, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": false}, {"name": "production", "legacy": false, "kubernetes": {"enabled": false}, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}], "languages": ["go"], "image_type": "tool", "service_tier": 3, "version": "3296109af6f5bd85de8ebf5eb697281c9391c167", "images": [{"parent": {"name": "scratch", "version": "", "sub_image": null, "external": true}, "sub_image": null}, {"parent": {"name": "s2igo", "version": "fa0c4921e2e8481015324ac1a2b841013a1a2fdf", "sub_image": null, "external": false}, "sub_image": "go"}], "parent": {"name": "scratch", "version": "", "sub_image": null, "external": true}}, "txnhub": {"name": "txnhub", "description": "Payment transaction hub maintains transaction lifecycles.", "repository": "git@github.com:lyft/txnhub.git", "image_type": "service", "service_tier": 1, "languages": ["python", "bash"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "pulldeploy_components": {"data": ["regioncfgdata"]}, "groups": [{"name": "dev", "members": ["control.dev", "mongodb.server", "postgresql.server", "dynamodb.dev", "txnhub.legacy", "redis.dev"]}, {"name": "integration", "members": ["account.integration", "control.dev", "green.dev", "jobscheduler.dev", "taskqueue.dev", "ledger.dev", "paymentgateway.dev", "ratelimit.dev", "txnhub.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "txnhub.dev"}, {"name": "unit", "type": "execution", "group": "txnhub.dev", "container": "txnhub.legacy", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "txnhub.integration", "container": "txnhub.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}], {"legacy": true, "name": "production"}], "slack": "#pay-platform", "team_email": "pay-platform-eng@lists.lyft.com", "pagerduty_escalation_policy": "Pay Platform", "notification_overrides": {"pr_open": {"slack": "#pay-platform"}, "deploy": {"slack": "#pay-platform-deploys", "environments": ["production", "staging"]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "txnhub"}, {"name": "txnhubbatch"}, {"name": "txnhubworkers"}], "override_settings": [{"services": [{"name": "txnhubbatch"}], "settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"jobschedulermigrationweb": null, "jobschedulernormalweb": null, "txnhub": null, "txnhubworkers": null}}}], "common_settings": {"internal_hosts": {"green": null, "jobschedulermigrationweb": null, "jobschedulernormalweb": null, "taskqueuemigrationweb": null, "taskqueuenormalweb": null, "ledger": null, "paymentgateway": null, "wallet": null, "walletapi": null, "txnhub": null, "txnhubworkers": null, "tcs": null}, "external_hosts": {"dynamodb_iad": null}, "authorization": {"permissions": {"earnings_get": {"paths": ["/internal/earnings*"], "methods": ["GET"]}, "earnings_put": {"paths": ["/internal/earnings*"], "methods": ["PUT"]}, "earning_aggregations_get": {"paths": ["/internal/earning_aggregations*"], "methods": ["GET"]}, "earning_aggregation_get": {"paths": ["/internal/earning_aggregation*"], "methods": ["GET"]}, "charges_get": {"paths": ["/internal/charge*"], "methods": ["GET"]}, "charge_post": {"paths": ["/internal/charge*"], "methods": ["POST"]}, "authorizations_post": {"paths": ["/internal/authorizations*"], "methods": ["POST"]}, "charge_put": {"paths": ["/internal/charge*"], "methods": ["PUT"]}, "topup_post": {"paths": ["/internal/topup*"], "methods": ["POST"]}, "transaction_id_get": {"paths": ["/internal/transaction_id*"], "methods": ["GET"]}, "balance_endpoints": {"paths": ["/v1/balance*"], "methods": ["GET", "POST"]}, "debts_get": {"paths": ["/v1/get_debts*"], "methods": ["POST"]}, "receivable_debt_endpoints": {"paths": ["/v1/receivable_debt*"], "methods": ["GET", "POST"]}, "green_to_txn_ids": {"paths": ["/internal/green_to_txn_ids*"], "methods": ["GET"]}}, "bindings": {"billingaggregator": ["charges_get", "charge_post", "transaction_id_get", "receivable_debt_endpoints"], "billingaggregatorbatch": ["charges_get", "charge_post", "transaction_id_get", "receivable_debt_endpoints"], "cetconcessions": ["authorizations_post", "charges_get", "charge_post", "transaction_id_get"], "consumerrentalspay": ["charges_get", "transaction_id_get"], "enterprise": ["charges_get", "charge_put", "debts_get", "transaction_id_get"], "enterprisebatch": ["charges_get", "charge_put", "transaction_id_get"], "enterprisepayapi": ["charges_get", "charge_post", "debts_get", "transaction_id_get"], "enterpriseworkers": ["charges_get", "charge_put", "debts_get", "transaction_id_get"], "green": ["*"], "greenbatch": ["*"], "karma": ["charges_get", "transaction_id_get", "balance_endpoints", "receivable_debt_endpoints"], "ledger": ["charges_get", "charge_post", "charge_put", "earning_aggregations_get", "earnings_get", "earnings_put", "transaction_id_get", "authorizations_post", "topup_post"], "payapi": ["balance_endpoints", "charges_get", "earnings_get", "earning_aggregation_get", "earning_aggregations_get", "transaction_id_get", "charge_put", "charge_post", "authorizations_post"], "paymentgateway": ["green_to_txn_ids"], "jobscheduler": ["*"], "rentals": ["earning_aggregation_get"], "ridesapi": ["charges_get", "transaction_id_get"], "taskqueuemigration": ["*"], "taskqueuenormal": ["*"], "tests": ["*"], "tom": ["charges_get", "charge_post", "earning_aggregations_get", "earning_aggregation_get", "transaction_id_get", "balance_endpoints"], "txnhub": ["*"], "txnhubbatch": ["*"], "txnhubworkers": ["*"], "walletapi": ["balance_endpoints", "authorizations_post"]}}, "mongos": {"green": {"staging": {"ratelimit": true, "clusters": [{"port": 27037, "hosts": ["r143043-a0.mlab.com:27817"]}, {"port": 27038, "hosts": ["r143043-a1.mlab.com:27817"]}]}, "production": {"ratelimit": true, "clusters": [{"port": 27037, "hosts": ["r043119-90.mlab.com:27817"]}, {"port": 27038, "hosts": ["r043119-91.mlab.com:27817"]}, {"port": 27039, "hosts": ["r043119-92.mlab.com:27817"]}]}}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": "precommit"}}]}}, "logging": {"txnhub": {"fields": {"reference_time": "date", "payout_transaction_id": "keyword", "participant_id": "keyword", "reference_downstream_id": "keyword", "type": "keyword", "participant_domain": "keyword", "shadow_migration_participant_domain": "keyword", "shadow_migration_transaction_id": "keyword", "shadow_migration_participant_id": "keyword", "amount_currency": "keyword", "amount_amount": "keyword", "region": "keyword", "reference_id": "keyword", "sub_type": "keyword", "reference_sub_id": "keyword", "status": "keyword", "transaction_id": "keyword", "green_transaction_id": "keyword", "txnhub_transaction_id": "keyword", "shadow_migration_charge_id": "keyword", "update_shadow_migration_participant_id": "keyword", "update_shadow_migration_action": "keyword", "update_shadow_migration_participant_domain": "keyword", "pay_period": "date", "source_instrument_identifier": "keyword", "source_instrument_type": "keyword", "charge_id": "keyword", "shadow_migration_status": "keyword", "indebtable": "boolean", "reason": "keyword", "shadow_migration_auth_amount_adjustable": "boolean", "payout_id": "keyword", "destination_instrument_identifier": "keyword", "destination_instrument_type": "keyword", "shadow_migration_error_code": "keyword", "error_code": "keyword", "lyft_id": "keyword", "note": "keyword", "aurora_elapsed_time": "float", "payout_total": "long", "payouts_total": "long", "mongo_elapsed_time": "float", "update_shadow_migration_note": "keyword", "new_transaction_id": "keyword", "uuid": "keyword", "new_status": "keyword", "old_status": "keyword", "action": "keyword", "request": {"type": "keyword", "participant_id": "keyword", "participant_domain": "keyword", "start_date": "date", "end_date": "date", "pretend": "boolean", "charge_id": "keyword", "json": {"pretend": "boolean", "lyft_id": "keyword"}, "data": "keyword"}, "txn_id": "keyword", "downstream_ref_id": "keyword", "uri": "keyword", "name": "keyword", "shaow_write_id": "keyword", "new_id": "keyword", "error_msg": "keyword", "payout_transaction": "keyword", "green_payout_transaction_id": "keyword", "old_region": "keyword", "old_pay_period": "date", "new_region": "keyword", "prev_journal": {"reference_time": "date"}, "updated_journal": {"reference_time": "date"}, "parent_id": "keyword", "idempotent_key": "keyword", "a1": "keyword", "a2": "keyword", "pid": "keyword", "age": "keyword", "query": "keyword", "balance_type": "keyword"}}}, "version": "5848d4b84ce86b5356fc9825930f85f210028767", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "bf0faa209177ffa0d6e67d4974f7f2641857360a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "useracquisitionmodels": {"name": "useracquisitionmodels", "description": "user acquisition ML models for Symphony", "repository": "git@github.com:lyft/useracquisitionmodels.git", "image_type": "lambda", "slack": "#symphony-eng", "team_email": "symphony-team@lyft.com", "pagerduty_escalation_policy": "AdTech", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/lyftlearnnotebook:5e912ff1fd8e8eba7267f59a88133aff6cc67ad3"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "pytest -vvv /code/useracquisitionmodels/tests/unit/"}], "notification_overrides": {"pr_merge": {"disabled": true}}, "containers": [{"name": "spin", "command": "sleep infinity"}], "deploy": [{"name": "staging", "legacy": false, "automatic": false}, [{"name": "production", "legacy": false, "automatic": false}]], "lyftlearn": {}, "languages": ["python"], "version": "f39caa784f7b851d3fe2f705878dd232020c5437", "images": [{"parent": {"name": "lyftlearnnotebook", "version": "5e912ff1fd8e8eba7267f59a88133aff6cc67ad3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "lyftlearnnotebook", "version": "5e912ff1fd8e8eba7267f59a88133aff6cc67ad3", "sub_image": null, "external": false}}, "usereligibilities": {"name": "usereligibilities", "description": "Track offers, ride passes, campaigns a user is currently eligible for.", "repository": "git@github.com:lyft/usereligibilities.git", "image_type": "service", "service_tier": 1, "slack": "#memberships-bots", "team_email": "rider-memberships-eng@lyft.com", "pagerduty_escalation_policy": "Memberships", "languages": ["bash", "python"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/usereligibilities", "sub_image": "k8s", "limits": {"cpu": 2, "memory": "2Gi"}}], "facets": [{"name": "main", "member": "usereligibilities.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-usereligibilities-env.sls"], "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 40}}}}, {"name": "canary", "member": "usereligibilities.service", "type": "service", "environment_files": ["ops/config/pillar/env.sls", "ops/config/pillar/k8s-usereligibilities-env.sls"], "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "minimal", "members": ["control.dev", "dynamodb.dev", "usereligibilities.legacy"]}, {"name": "dev", "members": ["account.dev", "auth.dev", "usereligibilities.minimal"]}, {"name": "integration", "members": ["account.dev", "auth.dev", "usereligibilities.minimal"]}], "tests": [{"name": "startup", "type": "startup", "group": "usereligibilities.dev"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "usereligibilities.dev", "container": "usereligibilities.legacy", "command": "make test_integration", "reports": {"junit": "build/int.xml"}}], "deploy": [{"name": "staging", "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"availability_zone": "us-east-1a", "legacy": false, "name": "production-us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"availability_zone": "us-east-1d", "legacy": false, "name": "production-us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"legacy": false, "name": "production", "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}], "envoy": {"profile": "python", "settings": {"services": [{"name": "usereligibilities"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 700}}}, "internal_hosts": {"usereligibilities": null}, "external_hosts": {"firehose_iad": null, "dynamodb_iad": null}}}}, "logging": {"usereligibilities": {"fields": {"error_description": "keyword", "error_detail": "keyword", "error": "keyword"}}}, "version": "196e53eb98dff1205fe3a887bbbab9b16ea8d933", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "usergen": {"name": "usergen", "description": "usergen", "repository": "git@github.com:lyft/ops.git:usergen", "slack": "#security", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "team_email": "security-engineering@lyft.com", "pagerduty_escalation_policy": "Security Operations", "containers": [{"name": "run", "command": "/code/ops/usergen/entrypoint.sh", "once": true, "start_phase": "sequential_init"}, {"name": "k8sspin", "command": "/code/ops/usergen/k8s-spin.sh"}, {"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "usergen.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "usergen.dev"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"orca_location": "ops", "service_instance": "production", "subargs": "state.highstate test=True"}], "links": [{"text": "Deploying usergen README", "url": "https://github.com/lyft/ops/blob/master/usergen/README.md#deploying"}]}, {"name": "canary", "legacy": true, "orca": [{"orca_location": "ops"}], "links": [{"text": "Deploying usergen README", "url": "https://github.com/lyft/ops/blob/master/usergen/README.md#deploying"}]}, {"name": "production", "legacy": true, "links": [{"text": "Deploying usergen README", "url": "https://github.com/lyft/ops/blob/master/usergen/README.md#deploying"}]}], "languages": ["bash", "python"], "image_type": "service", "python": {"mypy": {"python_versions": ["3.6"]}}, "service_tier": 3, "version": "b41dedffd7fa497784311946faac0c4e1c6a2de7", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "usergroups": {"name": "usergroups", "description": "usergroups", "repository": "git@github.com:lyft/usergroups.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "workdir": "/go/src/github.com/lyft/usergroups", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "usergroups.legacy", "redis.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "usergroups.dev"}, {"name": "lint", "type": "jailed", "command": "make lint"}, {"name": "unit", "type": "execution", "group": "usergroups.dev", "container": "usergroups.legacy", "command": "make coverage", "test_logs": ["build/coverage.out", "build/coverage.html"], "reports": {"cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "usergroups.dev", "container": "usergroups.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#experimentation", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "experimentation@lyft.com", "pagerduty_escalation_policy": "Experimentation", "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "service_tier": 0, "languages": ["go", "python"], "image_type": "service", "envoy": {"profile": "go", "settings": {"services": [{"name": "usergroups"}], "common_settings": {"authorization": {"permissions": {"read": {"paths": ["/pb.lyft.usergroups.UserGroups/GetUserInGroup", "/pb.lyft.usergroups.UserGroups/GetUserGroups", "/pb.lyft.usergroups.UserGroups/GetUserGroup", "/pb.lyft.usergroups.UserGroups/GetUsersForGroup", "/pb.lyft.usergroups.UserGroups/GetValidGroupsForUser", "/pb.lyft.usergroups.UserGroups/GetAllGroups", "/pb.lyft.usergroups.UserGroups/GetLastAddedForMemberBeforeTimestamp"], "methods": ["POST"]}, "write_group": {"paths": ["/pb.lyft.usergroups.UserGroups/CreateGroup", "/pb.lyft.usergroups.UserGroups/UpdateGroup"], "methods": ["POST"]}, "write_group_member": {"paths": ["/pb.lyft.usergroups.UserGroups/AddUserToGroup", "/pb.lyft.usergroups.UserGroups/RemoveUserFromGroup"], "methods": ["POST"]}}, "bindings": {"account": ["read", "write_group", "write_group_member"], "adtechworkflows": ["read", "write_group", "write_group_member"], "amp": ["read", "write_group", "write_group_member"], "ats": ["read", "write_group_member"], "autonomous": ["read", "write_group", "write_group_member"], "banners": ["read"], "campaigns": ["read"], "compliance": ["read"], "consumerrentals": ["read", "write_group_member"], "coupons": ["read", "write_group", "write_group_member"], "couponsbatch": ["read", "write_group", "write_group_member"], "couponssearchworkers": ["read", "write_group", "write_group_member"], "couponsworker": ["read", "write_group", "write_group_member"], "discountoptimizationworker": ["read"], "dispatch": ["read"], "dispatchavailability": ["read"], "dispatchforesight": ["read"], "driverbonus": ["read"], "drivercomp": ["read"], "driverheatmaps": ["read"], "driverloyalty": ["read"], "drivermode": ["read", "write_group", "write_group_member"], "drivermonitor": ["read", "write_group", "write_group_member"], "drivernotification": ["read", "write_group", "write_group_member"], "driverprompts": ["read"], "engagementplatform": ["read"], "enterprisedispatch": ["read"], "etawatch": ["read"], "etl": ["read", "write_group", "write_group_member"], "etlairflowworker": ["read", "write_group", "write_group_member"], "etltars": ["read", "write_group", "write_group_member"], "experimentationadhoc": ["read", "write_group", "write_group_member"], "expressdrivefeapi": ["read"], "family": ["read"], "familybatch": ["read"], "fare": ["read"], "flexibleincentives": ["read"], "flexibleincentivesbatch": ["read"], "graphql": ["read", "write_group", "write_group_member"], "green": ["read", "write_group_member"], "greenbatch": ["read", "write_group_member"], "greenworkers": ["read"], "grow": ["read"], "guardian": ["read"], "help": ["read"], "hqproxy": ["read", "write_group_member"], "incentiveguarantees": ["read"], "incentiveguaranteesbatch": ["read"], "incentives": ["read"], "incentivesbatch": ["read"], "incentivesbulkweb": ["read"], "karma": ["read"], "karmabatch": ["read"], "karmaupdate": ["read"], "karmaworkers": ["read"], "lastmile": ["read", "write_group_member"], "ledger": ["read", "write_group", "write_group_member"], "legacyridescheduler": ["read"], "legacyridetypes": ["read"], "loyaltypoints": ["read"], "marketstate": ["read"], "matchingstate": ["read"], "messaging": ["read"], "nexus": ["read"], "nexusbatch": ["read"], "offerings": ["read"], "opstasks": ["read", "write_group", "write_group_member"], "payapi": ["read", "write_group", "write_group_member"], "publicapi": ["read"], "ridechallenges": ["read"], "ridechallengesbatch": ["read"], "ridehistory": ["read"], "ridemonitor": ["read"], "ridemonitorbatch": ["read"], "ridemonitorkcl": ["read"], "ridemonitorworkers": ["read"], "routesapi": ["read"], "sharedairflowworker": ["read", "write_group", "write_group_member"], "simulatedrides": ["read", "write_group", "write_group_member"], "simulatedridesbatch": ["read"], "switchboard": ["read"], "tcs": ["read"], "tcseditor": ["read", "write_group", "write_group_member"], "tcseditoroverseer": ["read", "write_group", "write_group_member"], "testusermanager": ["read", "write_group", "write_group_member"], "tom": ["read", "write_group", "write_group_member"], "transit": ["read"], "transitbatch": ["read"], "transitfare": ["read"], "userprivacyrights": ["read", "write_group_member"], "walletapi": ["read"], "www2": ["read"], "wwwbrochurefe": ["read"], "wwwdriverengagementfe": ["read"], "wwwdriverxpfe": ["read"], "wwwidentityfe": ["read"], "wwwpayxpfe": ["read"], "wwwsupportxpfe": ["read"], "wwwdriveronboardingfe": ["read"], "wwwratecardfe": ["read"], "tests": ["*"]}}, "local_service": {"circuit_breakers": {"default": {"max_connections": 900}}}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "redis": {"usergroupsmultiredis": {"port": 6380, "op_timeout_ms": 200, "health_check": {"timeout_ms": 1000, "interval_ms": 5000}, "outlier_detection": {"consecutive_5xx": 200, "enforcing_success_rate": 0}}}}, "override_settings": [{"services": [{"name": "usergroups", "service_instance": "development"}], "settings": {"authorization": {"bindings": {"dispatch": ["read", "write_group", "write_group_member"], "ridescheduler": ["read", "write_group", "write_group_member"]}}}}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": "precommit"}}]}}, "version": "fcf89f748308b9f9b6adb6028cfd795b7a6dcdf9", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "54eabb7fae87d1acd4c14dca38261e36aa8539fb", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "usergroupsint": {"name": "usergroupsint", "description": "Management of user groups", "repository": "git@github.com:lyft/usergroupsint.git", "slack": "#experimentation", "team_email": "experimentation@lyft.com", "pagerduty_escalation_policy": "Experimentation", "image_type": "service", "service_tier": 2, "languages": ["bash", "javascript"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "custom": {"frontend_service": true, "service_type": "nodejs", "internal_service": true}, "frontend": {"node_version": "10.14.1-1nodesource1"}, "groups": [{"name": "dev", "members": ["control.dev", "usergroupsint.legacy"]}, {"name": "service_group", "members": ["usergroupsint.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "usergroupsint.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "python", "settings": {"services": [{"name": "usergroupsint"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acl": null}}}}, "version": "d21a4b5be6a1e567cc07ddf5621761878a614951", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "userpredictions": {"name": "userpredictions", "description": "Service exposing LTV-related predictions for new users", "repository": "git@github.com:lyft/userpredictions.git", "slack": "#symphony-eng", "team_email": "symphony-team@lyft.com", "pagerduty_escalation_policy": "AdTech", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:36518650f40787ad43faa9717259a01880989029"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 --timeout 90 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/userpredictions", "limits": {"cpu": 2, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "metadataproxy.server", "userpredictions.legacy"]}, {"name": "service_group", "members": ["userpredictions.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "userpredictions.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "userpredictions.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 2, "max_size": 30, "criteria": {"cpu_target": 3}}}}}, {"name": "canary", "member": "userpredictions.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "userpredictions"}], "common_settings": {"internal_hosts": {"jobschedulermigrationweb": null}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}}}}, "logging": {"userpredictions": {"fields": {"applicant_id": "keyword"}}}, "version": "b20c38b8145192ec61c8439d7ef5acfb5654efaf", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "userpreferences": {"name": "userpreferences", "description": "CRUD service for user preferences and permissions", "repository": "git@github.com:lyft/userpreferences.git", "image_type": "service", "service_tier": 1, "slack": "#notifications-bots", "team_email": "notifications-eng@lyft.com", "pagerduty_escalation_policy": "Notifications", "languages": ["bash", "python"], "credentials": false, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2iplus", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/userpreferences", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "8Gi"}}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.dev", "jobscheduler.dev", "userpreferences.legacy"]}, {"name": "integration", "members": ["envoy.server", "dynamodb.dev", "switchboard.dev", "users.dev", "userpreferences.dev", "regions.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "userpreferences.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "pylint": "build/flake8.txt", "cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "sharded", "target": "tests/integration", "group": "userpreferences.integration", "virtualenv": "service_venv", "container": "userpreferences.legacy", "command": "make test_integration", "reports": {"junit": "build/integration.xml"}}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "facets": [{"name": "main", "member": "userpreferences.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}}}}], "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}], "automatic": true}, [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "staging-k8s", "legacy": false, "kubernetes": {"enabled": true, "acl": {"admin_policies": ["kubernetes-userpreferences"]}}, "automatic": true, "targets": [{"facet": "main"}]}], {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "userpreferences"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 200}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null}, "internal_hosts": {"jobschedulerbulkweb": null, "jobschedulernormalweb": null, "push": null, "regions": null, "ridelocations": null, "supply": null, "switchboard": null, "tcs": null, "userpreferences": null, "users": null}}}}, "logging": {"userpreferences": {"fields": {"user_id": "keyword", "app_type": "keyword", "current_permissions": {"push_enabled": "boolean", "sound_enabled": "boolean", "user_agent": "keyword", "alert_enabled": "boolean", "badge_enabled": "boolean", "location": "keyword", "device_id_bundle_id": "keyword", "last_updated_ms": "keyword", "user_id": "keyword", "ios_permissions_determined": "boolean", "androidPriority": "long"}, "http_code": "long", "badge_enabled": "boolean", "push_enabled": "boolean", "sound_enabled": "boolean", "alert_enabled": "boolean", "location": "keyword", "ios_permissions_determined": "boolean", "update_value": {"location": {"value": "keyword", "action": "keyword"}, "ios_permissions_determined": {"action": "keyword", "value": "boolean"}, "sound_enabled": {"action": "keyword", "value": "boolean"}, "alert_enabled": {"action": "keyword", "value": "boolean"}, "push_enabled": {"action": "keyword", "value": "boolean"}, "badge_enabled": {"action": "keyword", "value": "boolean"}, "androidPriority": {"value": "long", "action": "keyword"}}, "new_preferences": "keyword", "headers": "keyword", "androidPriority": "long", "preference": "keyword", "gevent_pause_detector": {"max_blocking_time": "float"}, "locationPermission": "keyword", "pushEnabled": "boolean", "badgeEnabled": "boolean", "$where": "keyword"}}}, "version": "d51fb9fa47ee237c82d9d571036d8045a3ba80cc", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "2d86fcec82e621dc5c55448575a1badb054126a3", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "userprivacyrights": {"name": "userprivacyrights", "description": "userprivacyrights", "repository": "git@github.com:lyft/userprivacyrights.git", "slack": "#upr-deploys", "team_email": "upr-team@lyft.com", "pagerduty_escalation_policy": "User Privacy Rights", "service_tier": 1, "slack_deploy_notification_environments": ["canary", "production"], "image_type": "service", "languages": ["go"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "generate", "command": "make generate-protoc"}, {"name": "service", "command": "userprivacyrights server", "workdir": "/code/userprivacyrights", "liveness_probe": {"http_get": {"scheme": "HTTP", "path": "/healthcheck", "port": 8080}, "initial_delay_seconds": 30, "timeout_seconds": 5}, "limits": {"cpu": 2, "memory": "2Gi"}, "sub_image": "k8s"}, {"name": "janitorworker", "command": "userprivacyrights janitorworker"}, {"name": "simulatedproductionrequests", "command": "userprivacyrights SimulatedProductionRequests 60 0.1"}, {"name": "simulatederasurerequests", "command": "userprivacyrights SimulatedErasureRequests 10 0.1"}, {"name": "uprcli", "command": "userprivacyrights"}], "facets": [{"name": "main", "member": "userprivacyrights.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 3, "max_size": 8}}}}, {"name": "canary", "member": "userprivacyrights.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "janitorworker", "member": "userprivacyrights.janitorworker", "type": "cron", "schedule": "7 */3 * * *"}, {"name": "simulatedproductionrequests", "member": "userprivacyrights.simulatedproductionrequests", "type": "cron", "schedule": "*/15 * * * *"}, {"name": "simulatederasurerequests", "member": "userprivacyrights.simulatederasurerequests", "type": "cron", "schedule": "0 * * * *"}, {"name": "uprcli", "member": "userprivacyrights.uprcli", "type": "batch"}], "groups": [{"name": "dev", "members": ["control.dev", "dbproxy.dev", "fanner.dev", "jobscheduler.dev", "messaging.dev", "minio.server", "routesapi.dev", "storagecatalog.dev", "taskqueue.dev", "tripsapi.dev", "userprivacyrights.legacy", "idl.server", "ratelimit.dev", "simulatedrides.dev", "users.dev", "usergroups.dev"]}, {"name": "complete", "members": ["control.dev", "dbproxy.dev", "fanner.dev", "jobscheduler.dev", "messaging.dev", "minio.server", "storagecatalog.dev", "taskqueue.dev", "userprivacyrights.legacy", "idl.server", "ratelimit.dev", "ats.dev", "enterprise.dev", "karma.dev", "payapi.dev", "rentals.dev", "routesapi.dev", "tripsapi.dev", "simulatedrides.dev", "users.dev", "usergroups.dev"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2iplus", "params": {"builder": "lyft/s2igocli:e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": "k8s", "packages": ["awscli"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "tests": [{"name": "startup", "type": "startup", "group": "userprivacyrights.dev"}, {"name": "unit", "type": "jailed", "command": "make tests"}, {"name": "dbint", "type": "execution", "group": "userprivacyrights.dev", "container": "userprivacyrights.legacy", "command": "make uprint", "reports": {"cobertura": "build/coverage.xml", "gocover": "build/coverage.html"}}, {"name": "e2e", "type": "execution", "group": "userprivacyrights.dev", "container": "userprivacyrights.legacy", "command": "make upre2e"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "bake_time_minutes": 15, "automatic": true, "targets": [{"facet": "main"}, {"facet": "simulatedproductionrequests"}, {"facet": "janitorworker"}, {"facet": "simulatederasurerequests"}, {"facet": "uprcli"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "bake_time_minutes": 10, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "bake_time_minutes": 10, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "bake_time_minutes": 10, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}], {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "janitorworker"}, {"facet": "uprcli"}], "kubernetes": {"enabled": true}}], "envoy": {"profile": "go", "settings": {"services": [{"name": "userprivacyrights"}], "common_settings": {"authorization": {"permissions": {"internal_http": {"paths": ["/internal/*"]}, "jobs_callbacks_http": {"paths": ["/api/v1/job/complete", "/api/v1/job/error"], "methods": ["PUT"]}, "account_cycling_callbacks_http": {"paths": ["/api/v1/driver/approve", "/api/v1/user/signup"], "methods": ["PUT"]}, "initiate_erasure_http": {"paths": ["/api/v1/user/erasure"], "methods": ["PUT"]}, "initiate_production_http": {"paths": ["/api/v1/user/production"], "methods": ["PUT"]}, "initiate_erasure_grpc": {"paths": ["/pb.lyft.userprivacyrights.UserPrivacyRights/InitializeDataErasureRequest"], "methods": ["POST"]}, "initiate_production_grpc": {"paths": ["/pb.lyft.userprivacyrights.UserPrivacyRights/InitializeDataProductionRequest"], "methods": ["POST"]}, "get_latest_data_url_grpc": {"paths": ["/pb.lyft.userprivacyrights.UserPrivacyRights/GetLatestDataURL"], "methods": ["POST"]}, "get_pending_requests_grpc": {"paths": ["/pb.lyft.userprivacyrights.UserPrivacyRights/GetUserPendingRequests"], "methods": ["POST"]}, "cancel_pending_request_grpc": {"paths": ["/pb.lyft.userprivacyrights.UserPrivacyRights/CancelRequest"], "methods": ["POST"]}, "jobs_callbacks_grpc": {"paths": ["/pb.lyft.userprivacyrights.UserPrivacyRights/CompleteJob", "/pb.lyft.userprivacyrights.UserPrivacyRights/RegisterJobError"], "methods": ["POST"]}, "complete_analytics_production_job_grpc": {"paths": ["/pb.lyft.userprivacyrights.UserPrivacyRights/CompleteAnalyticsProductionJob"], "methods": ["POST"]}}, "bindings": {"accountfrontend": ["get_latest_data_url_grpc", "get_pending_requests_grpc", "initiate_production_grpc", "initiate_erasure_grpc", "initiate_erasure_http", "initiate_production_http"], "tom": ["cancel_pending_request_grpc", "initiate_erasure_grpc", "initiate_erasure_http", "get_pending_requests_grpc"], "jobscheduler": ["jobs_callbacks_http", "account_cycling_callbacks_http", "internal_http", "jobs_callbacks_grpc"], "taskqueuebulk": ["jobs_callbacks_http", "account_cycling_callbacks_http", "internal_http", "jobs_callbacks_grpc"], "taskqueuemigration": ["jobs_callbacks_http", "account_cycling_callbacks_http", "internal_http", "jobs_callbacks_grpc"], "taskqueuenormal": ["jobs_callbacks_http", "account_cycling_callbacks_http", "internal_http", "jobs_callbacks_grpc"], "analyticsupr": ["complete_analytics_production_job_grpc"], "userprivacyrights": ["*"], "test": ["*"]}}, "internal_hosts": {"account": null, "analyticsupr": null, "ats": null, "badcompanions": null, "dbproxy": null, "enterprise": null, "jobschedulernormalweb": null, "karma": null, "messaging": null, "notes": null, "payapi": null, "ratelimit": null, "rentals": null, "rides": null, "routesapi": null, "taskqueuenormalweb": null, "tripsapi": null, "simulatedrides": null, "storagecatalog": null, "supply": null, "supplyrecords": null, "usergroups": null, "userprivacyrights": null, "users": null}, "external_hosts": {"onetrust": null}}}}, "docs": {"godoc_packages": ["github.com/lyft/idlcode/tree/master/go/pb/lyft/userprivacyrights", "github.com/lyft/idlcode/tree/master/go/pb/lyft/userrightsmanagement", "github.com/lyft/userprivacyrights", "github.com/lyft/userprivacyrights", "github.com/lyft/userprivacyrights/analytics", "github.com/lyft/userprivacyrights/cli", "github.com/lyft/userprivacyrights/clients", "github.com/lyft/userprivacyrights/clients/ats", "github.com/lyft/userprivacyrights/clients/enterprise", "github.com/lyft/userprivacyrights/clients/karma", "github.com/lyft/userprivacyrights/clients/notes", "github.com/lyft/userprivacyrights/clients/onetrust", "github.com/lyft/userprivacyrights/clients/payapi", "github.com/lyft/userprivacyrights/clients/rentals", "github.com/lyft/userprivacyrights/clients/storagecatalog", "github.com/lyft/userprivacyrights/clients/taskqueue", "github.com/lyft/userprivacyrights/config", "github.com/lyft/userprivacyrights/config/env", "github.com/lyft/userprivacyrights/services/constants", "github.com/lyft/userprivacyrights/services/errors", "github.com/lyft/userprivacyrights/services/user_privacy_rights", "github.com/lyft/userprivacyrights/services/user_privacy_rights/config", "github.com/lyft/userprivacyrights/services/user_privacy_rights/config/mock", "github.com/lyft/userprivacyrights/services/user_privacy_rights/grpc/handlers", "github.com/lyft/userprivacyrights/services/user_privacy_rights/http", "github.com/lyft/userprivacyrights/services/user_privacy_rights/http/handlers", "github.com/lyft/userprivacyrights/services/user_privacy_rights/http/handlers/internals", "github.com/lyft/userprivacyrights/services/user_privacy_rights/modules", "github.com/lyft/userprivacyrights/services/user_privacy_rights/modules/accountcycling", "github.com/lyft/userprivacyrights/services/user_privacy_rights/modules/accountcycling/mock", "github.com/lyft/userprivacyrights/services/user_privacy_rights/modules/fanout", "github.com/lyft/userprivacyrights/services/user_privacy_rights/modules/iface", "github.com/lyft/userprivacyrights/services/user_privacy_rights/modules/iface/mock", "github.com/lyft/userprivacyrights/services/user_privacy_rights/modules/jobtracking", "github.com/lyft/userprivacyrights/services/user_privacy_rights/modules/jobtracking/mock", "github.com/lyft/userprivacyrights/services/user_privacy_rights/modules/notifications", "github.com/lyft/userprivacyrights/services/user_privacy_rights/modules/preprocessing", "github.com/lyft/userprivacyrights/services/user_privacy_rights/modules/providers", "github.com/lyft/userprivacyrights/services/user_privacy_rights/modules/providers/mock", "github.com/lyft/userprivacyrights/services/user_privacy_rights/modules/providers/mock/factory", "github.com/lyft/userprivacyrights/services/user_privacy_rights/modules/reporting", "github.com/lyft/userprivacyrights/services/user_privacy_rights/modules/requesttracking", "github.com/lyft/userprivacyrights/services/user_privacy_rights/modules/requesttracking/mock", "github.com/lyft/userprivacyrights/services/user_privacy_rights/modules/userholds", "github.com/lyft/userprivacyrights/services/user_privacy_rights/utils"]}, "logging": {"userprivacyrights": {"fields": {"requestId": "keyword", "jobId": "keyword", "userId": "keyword", "service": "keyword", "request_id": "keyword", "job_id": "keyword", "code": "keyword", "downstream_cluster": "keyword", "error": "keyword", "endpoint": "keyword", "user_id": "keyword", "lyft_user_id": "keyword", "lyftUserId": "keyword", "downstreamCluster": "keyword", "protocol": "keyword", "panic": "boolean", "stack": "keyword", "urm_request_id": "keyword", "urmRequestId": "keyword", "user-agent": "keyword", "error_type": "keyword", "error_message": "keyword", "mode": "keyword", "operation": "keyword"}}}, "version": "1f6f90932ebce54ccfeaaf87d7376d1c1991a26a", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2igocli", "version": "e06a0fc69a5a9e83d27116c91ff2279fe357779c", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "go", "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "users": {"name": "users", "description": "users", "repository": "git@github.com:lyft/users.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "workdir": "/go/src/github.com/lyft/users", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- users", "workdir": "/code/users", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}}], "facets": [{"name": "main", "member": "users.service", "type": "service", "requirements": {"mongo": true}, "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 2, "max_size": 5}, "production": {"min_size": 2, "max_size": 160}}}}, {"name": "canary", "member": "users.service", "type": "service", "requirements": {"mongo": true}, "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "mongodb.server", "users.legacy", "redis.dev", "dbproxyusers.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "users.dev"}, {"name": "unit", "type": "execution", "group": "users.dev", "container": "users.legacy", "command": "make coverage", "test_logs": ["build/coverage.out", "build/coverage.html"], "reports": {"cobertura": "build/coverage.xml"}}, {"name": "integration", "type": "execution", "group": "users.dev", "container": "users.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#identity-eng", "slack_deploy_notification_environments": ["staging", "canary", "production"], "team_email": "identity-eng@lyft.com", "pagerduty_escalation_policy": "Identity Eng", "notification_overrides": {"pr_open": {"slack": "#identity-prs"}, "deploy": {"slack": "#identity-bots"}, "deploy_failure": {"slack": "#identity-bots"}, "test_failure": {"slack": "#identity-bots"}, "master_failure": {"slack": "#identity-bots"}, "pr_merge": {"slack": "#identity-bots"}, "behind_notifications": {"slack": "#identity-bots"}}, "deploy": [{"name": "staging", "bake_time_minutes": 15, "legacy": false, "automatic": true, "orca": [{"region": "iad"}], "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "bake_time_minutes": 15, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "bake_time_minutes": 15, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "bake_time_minutes": 15, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "bake_time_minutes": 15, "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "service_tier": 0, "languages": ["go"], "image_type": "service", "envoy": {"profile": "go", "settings": {"services": [{"name": "users"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 900}}}, "authorization": {"permissions": {"v2": {"paths": ["/pb.lyft.users.Users/*"], "not_paths": ["/pb.lyft.users.Users/GetShellPassenger", "/pb.lyft.users.Users/GetAllDevUsers", "/pb.lyft.users.Users/CreateShellPassenger", "/pb.lyft.users.Users/CreateShellDispatcher", "/pb.lyft.users.Users/DeactivatePhoneNumber", "/pb.lyft.users.Users/UpdatePhoneNumber", "/pb.lyft.users.Users/CreateUser", "/pb.lyft.users.Users/InitializeDisableUser", "/pb.lyft.users.Users/ReenableUser", "/pb.lyft.users.Users/FinalizeDisableUser", "/pb.lyft.users.Users/InitializeUserDeleted", "/pb.lyft.users.Users/CancelUserDeleted", "/pb.lyft.users.Users/FinalizeUserDeleted", "/pb.lyft.users.Users/GetHotcacheUserData", "/pb.lyft.users.Users/ClearCurrentRide", "/pb.lyft.users.Users/UpdateCurrentRide"], "methods": ["POST"]}, "drivers": {"paths": ["/pb.lyft.users.Drivers/*"], "not_paths": ["/pb.lyft.users.Drivers/UpdateCurrentRideId", "/pb.lyft.users.Drivers/AddQueuedRouteId", "/pb/lyft.users.Drivers/UpdateQueuedRouteIds"], "methods": ["POST"]}, "dev": {"paths": ["/pb.lyft.users.Users/GetAllDevUsers"], "methods": ["POST"]}, "shell-user": {"paths": ["/pb.lyft.users.Users/GetShellPassenger", "/pb.lyft.users.Users/CreateShellPassenger", "/pb.lyft.users.Users/CreateShellDispatcher"], "methods": ["POST"]}, "account-update": {"paths": ["/pb.lyft.users.Users/DeactivatePhoneNumber", "/pb.lyft.users.Users/UpdatePhoneNumber"], "methods": ["POST"]}, "account-create": {"paths": ["/pb.lyft.users.Users/CreateUser"], "methods": ["POST"]}, "user-disable": {"paths": ["/pb.lyft.users.Users/InitializeDisableUser", "/pb.lyft.users.Users/ReenableUser", "/pb.lyft.users.Users/FinalizeDisableUser"], "methods": ["POST"]}, "user-delete": {"paths": ["/pb.lyft.users.Users/InitializeUserDeleted", "/pb.lyft.users.Users/CancelUserDeleted", "/pb.lyft.users.Users/FinalizeUserDeleted"], "methods": ["POST"]}, "users-hotcache-data": {"paths": ["/pb.lyft.users.Users/GetHotcacheUsersData"], "methods": ["POST"]}, "user-hotcache-data": {"paths": ["/pb.lyft.users.Users/GetHotcacheUserData"], "methods": ["POST"]}, "user-clear-current-ride-id": {"paths": ["/pb.lyft.users.Users/ClearCurrentRide"], "methods": ["POST"]}, "user-update-current-ride-id": {"paths": ["/pb.lyft.users.Users/UpdateCurrentRide"], "methods": ["POST"]}, "user-update-rating": {"paths": ["/pb.lyft.users.Users/UpdatePassengerRating", "/pb.lyft.users.Drivers/UpdateDriverStatsRating"], "methods": ["POST"]}, "driver-update-current-ride-id": {"paths": ["/pb.lyft.users.Drivers/UpdateCurrentRideId"], "methods": ["POST"]}, "driver-add-queued-route-id": {"paths": ["/pb.lyft.users.Drivers/AddQueuedRouteId"], "methods": ["POST"]}, "driver-update-queued-route-ids": {"paths": ["/pb/lyft.users.Drivers/UpdateQueuedRouteIds"], "methods": ["POST"]}, "erased_user": {"paths": ["/pb/lyft.users.Users/GetUserIncludeErased"], "methods": ["POST"]}}, "bindings": {"*": ["v2", "drivers"], "simulatedridesplatform": ["v2", "dev"], "simulatedrides": ["v2", "dev"], "testusermanager": ["v2", "dev"], "account": ["shell-user", "account-update", "account-create", "user-delete"], "flaggedtrips": ["user-clear-current-ride-id"], "green": ["erased_user"], "karma": ["user-disable", "erased_user"], "karmaupdate": ["user-disable"], "karmabatch": ["user-disable"], "paydisputes": ["erased_user"], "ratings": ["user-update-rating"], "ridesapi": ["user-clear-current-ride-id", "user-update-current-ride-id"], "routesapi": ["user-hotcache-data", "users-hotcache-data", "user-update-current-ride-id", "driver-update-current-ride-id", "driver-add-queued-route-id", "driver-update-queued-route-ids"], "tests": ["*"], "tom": ["user-clear-current-ride-id"], "tripsapi": ["user-hotcache-data", "user-clear-current-ride-id"]}}, "mongos": {"users": {"production": {"local_ratelimit": {"fill_interval": "0.2s", "max_tokens": 30, "tokens_per_fill": 1}, "ratelimit": true, "clusters": [{"port": 27019, "hosts": ["r033197-10.mlab.com:27817", "r033197-11.mlab.com:27817", "r033197-12.mlab.com:27817", "r033197-13.mlab.com:27817", "r033197-14.mlab.com:27817", "r033197-15.mlab.com:27817", "r033197-16.mlab.com:27817", "r033197-17.mlab.com:27817", "r033197-18.mlab.com:27817", "r033197-19.mlab.com:27817", "r033197-20.mlab.com:27817", "r033197-21.mlab.com:27817", "r033197-22.mlab.com:27817", "r033197-23.mlab.com:27817", "r033197-24.mlab.com:27817", "r033197-25.mlab.com:27817", "r033197-26.mlab.com:27817", "r033197-27.mlab.com:27817", "r033197-28.mlab.com:27817", "r033197-29.mlab.com:27817", "r033197-30.mlab.com:27817", "r033197-31.mlab.com:27817", "r033197-32.mlab.com:27817", "r033197-33.mlab.com:27817", "r033197-34.mlab.com:27817", "r033197-35.mlab.com:27817", "r033197-36.mlab.com:27817", "r033197-37.mlab.com:27817", "r033197-38.mlab.com:27817", "r033197-39.mlab.com:27817", "r033197-40.mlab.com:27817", "r033197-41.mlab.com:27817", "r033197-42.mlab.com:27817", "r033197-43.mlab.com:27817", "r033197-44.mlab.com:27817", "r033197-45.mlab.com:27817", "r033197-46.mlab.com:27817", "r033197-47.mlab.com:27817", "r033197-48.mlab.com:27817", "r033197-49.mlab.com:27817"]}]}, "staging": {"local_ratelimit": {"fill_interval": "0.2s", "max_tokens": 30, "tokens_per_fill": 1}, "ratelimit": true, "clusters": [{"port": 27019, "hosts": ["r055605-a0.mlab.com:27817", "r055605-a1.mlab.com:27817"]}]}}}, "external_hosts": {"firehose_iad": null}, "internal_hosts": {"dbproxyusers": null}, "redis_clusters": {"users": {"aws_random_identifier": "vngjnv", "port": 6380, "read_policy": "PREFER_MASTER", "op_timeout_ms": 200, "health_check": {"timeout_ms": 200, "interval_ms": 5000}, "outlier_detection": {"consecutive_5xx": 200, "enforcing_success_rate": 0}}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:go.0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2igocli:e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": "k8s"}}]}}, "logging": {"users": {"fields": {"phoneNumber": "keyword", "phoneNumbers": "keyword", "responseMatches": "boolean", "errorMatches": "boolean", "error": "text", "method": "keyword", "codepath": "keyword", "id": "keyword"}}}, "version": "73913fc124cb096f16ce21b58d3c7f14d646f296", "images": [{"parent": {"name": "opsbase", "version": "458b2e30217d9d14e20befd527e5b98a44f43c19", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "0354713f9920346a505b0c133c02def7fb74cda9", "sub_image": "go", "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2igocli", "version": "e98be0623e3c452f371b835e9cb92c9e2479467f", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "458b2e30217d9d14e20befd527e5b98a44f43c19", "sub_image": null, "external": false}}, "vehicleinspection": {"name": "vehicleinspection", "description": "Conducts and stores information about (digital) vehicle inspections", "repository": "git@github.com:lyft/vehicleinspection.git", "image_type": "service", "service_tier": 2, "slack": "#do-eng-all", "team_email": "do-funnel@lyft.com", "pagerduty_escalation_policy": "Driver Applicant Onboarding", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- service_venv gunicorn app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/vehicleinspection", "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "limits": {"cpu": 1, "memory": "1Gi"}}], "facets": [{"name": "main", "member": "vehicleinspection.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "vehicleinspection.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "ats.dev", "dynamodb.dev", "supplyrecords.dev", "users.dev", "vehiclemetadata.legacy", "vehicleinspection.legacy", "chromeheadless.service"]}], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "tests": [{"name": "startup", "type": "startup", "group": "vehicleinspection.dev"}, {"name": "unit", "type": "execution", "group": "vehicleinspection.dev", "container": "vehicleinspection.legacy", "framework": "pytest"}, {"name": "integration", "type": "execution", "group": "vehicleinspection.dev", "container": "vehicleinspection.legacy", "command": "make test_integration"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "notification_overrides": {"behind_notifications": {"slack": "#do-funnel-bots"}, "pr_merge": {"slack": "#do-funnel-bots"}, "deploy": {"slack": "#do-funnel-bots"}, "deploy_failure": {"slack": "#do-funnel-bots"}}, "deploy": [{"name": "staging", "legacy": false, "orca": [{"region": "iad"}], "automatic": true, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "canary"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "vehicleinspection"}], "common_settings": {"internal_hosts": {"ats": {"tls_enabled": true}, "chromeheadless": null, "jobschedulernormalweb": null, "regions": null, "supplyrecords": {"tls_enabled": true}, "users": {"tls_enabled": true}, "userprivacyrights": null, "vehiclemetadata": {"tls_enabled": true}}, "external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "s3_iad": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:py37.39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "k8s", "packages": ["libgeos-dev", "libspatialindex-dev"]}}]}}, "version": "6c6432c70a96140c0bebea44609f84af0e814a53", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "39c99543ebf22b72bee9d51d7c68efee80afa5a0", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "vehiclemetadata": {"name": "vehiclemetadata", "description": "The vehiclemetadata service is the source of truth on vehicle makes and models.", "repository": "git@github.com:lyft/vehiclemetadata.git", "image_type": "service", "service_tier": 1, "slack": "#do-eng-all", "team_email": "do-funnel@lyft.com", "pagerduty_escalation_policy": "Driver Applicant Onboarding", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "dumb-init -- service_venv gunicorn wsgi:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/vehiclemetadata", "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "syncevoxcarselect", "command": "dumb-init -- service_venv python app/scripts/run_cron.py python manage.py sync_evox_carselect", "workdir": "/code/vehiclemetadata", "sub_image": "k8s"}, {"name": "syncevoxphotos", "command": "dumb-init -- service_venv python app/scripts/run_cron.py python manage.py sync_evox_photos", "workdir": "/code/vehiclemetadata", "sub_image": "k8s"}, {"name": "manage", "command": "dumb-init -- service_venv python manage.py", "workdir": "/code/vehiclemetadata", "sub_image": "k8s"}], "facets": [{"name": "main", "member": "vehiclemetadata.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 2, "max_size": 5}}}}, {"name": "canary", "member": "vehiclemetadata.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}, {"name": "syncevoxcarselect", "member": "vehiclemetadata.syncevoxcarselect", "type": "cron", "schedule": "0 20 * * 1,3,5", "concurrency_policy": "Forbid"}, {"name": "syncevoxphotos", "member": "vehiclemetadata.syncevoxphotos", "type": "cron", "schedule": "0 20 * * 2,4", "concurrency_policy": "Forbid"}, {"name": "manage", "member": "vehiclemetadata.manage", "type": "batch"}], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:3258c1df880d24734bd34f6704fc48e8ae774688", "sub_image": "k8s"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "dynamodb.server", "dynamostreams.dev", "vehiclemetadata.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "vehiclemetadata.dev"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy"}, {"name": "unit_legacy", "type": "execution", "container": "vehiclemetadata.legacy", "group": "vehiclemetadata.dev", "framework": "pytest", "coverage": false, "targets": ["tests/unit"], "virtualenv": "service_venv", "markers": "unit_legacy"}], "upstream_tests": {"on_commit": true, "test_set": {"ats": ["e2e"]}}, "notification_overrides": {"behind_notifications": {"slack": "#do-funnel-bots"}, "pr_merge": {"slack": "#do-funnel-bots"}, "deploy": {"slack": "#do-funnel-bots"}, "deploy_failure": {"slack": "#do-funnel-bots"}}, "deploy": [{"name": "staging", "legacy": false, "automatic": true, "targets": [{"facet": "main"}, {"facet": "manage"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "targets": [{"facet": "canary"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}, "availability_zone": "us-east-1d"}], {"name": "production", "targets": [{"facet": "main"}, {"facet": "canary"}, {"facet": "syncevoxcarselect"}, {"facet": "syncevoxphotos"}, {"facet": "manage"}], "kubernetes": {"enabled": true}, "legacy": false}], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "vehiclemetadata"}, {"name": "vehiclemetadatabatch"}], "common_settings": {"local_service": {"circuit_breakers": {"default": {"max_connections": 100}}, "hosts_url": "tcp://127.0.0.1:8080", "ingress_ports": [9211, 80]}, "internal_hosts": {"ats": {"tls_enabled": true}, "jobschedulerbulkweb": {"tls_enabled": true}, "jobschedulernormalweb": {"tls_enabled": true}, "regions": {"tls_enabled": true}, "supply": {"tls_enabled": true}, "tcs": {"tls_enabled": true}}, "external_hosts": {"dynamodb_iad": null, "nhtsa_api": null, "firehose_iad": null}, "redis": {"vehiclemetadatamultiredis": {"port": 6380}}}}}, "logging": {"vehiclemetadata": {"fields": {"lyft_id": "keyword", "carselect": {"vin": "keyword"}, "error": "keyword", "exception": "keyword", "prop": "keyword", "input_vin": "keyword", "year": "long", "make": "keyword", "model": "keyword", "count": "long", "url": "keyword", "status_code": "long", "value": "keyword"}}, "vehiclemetadatabatch": {"fields": {"command": "keyword", "cron_uuid": "keyword", "attempt": "long"}}}, "version": "10eaf72862c681b1b0cca4a9ef6a35b9df9df6b4", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "s2ipython3", "version": "3258c1df880d24734bd34f6704fc48e8ae774688", "sub_image": null, "external": false}, "sub_image": "k8s"}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "vehicleservicecenters": {"name": "vehicleservicecenters", "description": "Python backend service for supporting Lyft-owned vehicle service centers (VSCs)", "repository": "git@github.com:lyft/vehicleservicecenters.git", "slack": "#vs-hub", "team_email": "vsc-eng@lyft.com", "pagerduty_escalation_policy": "Fleet Management", "image_type": "service", "service_tier": 1, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "containers": [{"name": "customersjob", "command": "service_venv python manage.py shopware-ingest-customers", "workdir": "/code/vehicleservicecenters", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}, {"name": "inventoryjob", "command": "service_venv python manage.py shopware-ingest-inventory", "workdir": "/code/vehicleservicecenters", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}, {"name": "repairorderjob", "command": "service_venv python manage.py shopware-ingest-repair-orders", "workdir": "/code/vehicleservicecenters", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}, {"name": "stationtransferjob", "command": "service_venv python manage.py shopware-ingest-station-transfers", "workdir": "/code/vehicleservicecenters", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "0.25Gi"}}, {"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/vehicleservicecenters", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "vehicleservicecenters.legacy"]}, {"name": "integration", "members": ["chromeheadless.service", "fleetlocations.dev", "fleetmanagement.dev", "jobscheduler.dev", "supply.legacy", "users.dev", "vehicleservicecenters.dev"]}, {"name": "service_group", "members": ["vehicleservicecenters.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "vehicleservicecenters.dev"}, {"name": "component", "type": "execution", "group": "vehicleservicecenters.dev", "container": "vehicleservicecenters.legacy", "command": "make test_component", "target": "tests/component", "virtual_env": "service_venv", "run_in_pr": true, "run_in_dev": true, "skip_threshold": 10, "reports": {"junit": "build/component.xml"}}, {"name": "integration", "type": "sharded", "group": "vehicleservicecenters.dev", "container": "vehicleservicecenters.legacy", "target": "tests/integration/", "virtualenv": "integration_venv", "float_dependencies": "15,45 2-22 * * *", "skip_threshold": 15, "reports": {"junit": "build/integration.xml"}}, {"name": "unit", "type": "jailed", "run_in_pr": true, "run_in_dev": true, "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "vehicleservicecenters.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "vehicleservicecenters.service", "type": "service", "autoscaling": {"min_size": 1, "max_size": 1}, "canary": true}, {"name": "customercronjob", "member": "vehicleservicecenters.customersjob", "type": "cron", "schedule": "0,30 * * * *"}, {"name": "inventorycronjob", "member": "vehicleservicecenters.inventoryjob", "type": "cron", "schedule": "15 * * * *"}, {"name": "repairordercronjob", "member": "vehicleservicecenters.repairorderjob", "type": "cron", "schedule": "9,19,29,39,49,59 * * * *"}, {"name": "stationtransfercronjob", "member": "vehicleservicecenters.stationtransferjob", "type": "cron", "schedule": "0,10,20,30,40,50 * * * *"}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, {"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}, {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}, {"name": "production-cronjob", "kubernetes": {"enabled": true}, "legacy": false, "targets": [{"facet": "customercronjob"}, {"facet": "inventorycronjob"}, {"facet": "repairordercronjob"}, {"facet": "stationtransfercronjob"}]}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "vehicleservicecenters"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "shopware_prod": null, "shopware_sandbox": null}, "internal_hosts": {"abacus": null, "chromeheadless": null, "fleetlocations": null, "fleetmanagement": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "ledger": null, "messaging": null, "supply": null, "supplyrecords": {"tls_enabled": true}, "users": null, "vehiclemetadata": null, "wallet": null}}}}, "version": "db514e931199d52488bc57ca849c90582710161f", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "15d84b5569244a0e73007c54438fe0772ef8847c", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "venues": {"name": "venues", "description": "venues", "repository": "git@github.com:lyft/venues.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 --max-requests=100000 --forwarded-allow-ips=\"*\" -k gevent --worker-connections=1000 --limit-request-line 8190 -c /etc/gunicorn/gunicorn.conf --spawn-worker-sleep-time=10.0", "workdir": "/code/venues", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4480Mi"}}], "facets": [{"name": "main", "member": "venues.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 2}, "production": {"min_size": 4, "max_size": 30}}}}, {"name": "canary", "member": "venues.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "groups": [{"name": "dev", "members": ["control.dev", "redis.server", "venues.legacy", "regions.dev"]}, {"name": "integration", "members": ["venues.dev", "jobscheduler.dev", "enterprise.dev", "regions.dev"]}], "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "framework": "pytest", "virtualenv": "service_venv", "markers": "not unit_legacy"}, {"name": "integration", "type": "execution", "group": "venues.integration", "container": "venues.legacy", "command": "make test_integration"}, {"name": "unit_legacy", "type": "execution", "container": "venues.legacy", "group": "venues.dev", "framework": "pytest", "coverage": false, "targets": ["tests/unit"], "virtualenv": "service_venv", "markers": "unit_legacy"}], "upstream_tests": {"on_commit": false, "test_set": {"fare": ["integration"], "courier": ["integration"]}}, "slack": "#venues", "team_email": "venues-eng@lyft.com", "pagerduty_escalation_policy": "Airports and Venues", "deploy": [{"name": "staging", "legacy": false, "automatic": true, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}], "orca": [{"region": "iad"}]}, {"availability_zone": "us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}], "name": "production-us-east-1a"}, [{"availability_zone": "us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}], "name": "production-us-east-1d"}, {"legacy": false, "name": "production", "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}]], "languages": ["python"], "image_type": "service", "service_tier": 1, "pulldeploy_components": {"data": ["translationdata", "regioncfgdata", "marketplaceconfig"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "venues"}], "common_settings": {"external_hosts": {"firehose_iad": null, "kinesis_iad": null}, "internal_hosts": {"dispatch": null, "drivermode": null, "enterprise": null, "matchingstate": null, "messaging": null, "passengerqueues": null, "ratelimit": null, "regions": null, "rides": null, "ridesapi": null, "tcs": null, "venues": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": "k8s"}}]}}, "logging": {"venues": {"fields": {"error_id": "keyword", "field_value": "keyword", "field_name": "keyword", "error_msg": "keyword", "event_name": "keyword", "message": "keyword", "error_code": "long", "os": "keyword", "is_internal": "boolean", "client_type": "keyword", "major_app_version": "keyword", "endpoint": "keyword", "error_class": "keyword", "client_id": "keyword", "user_id": "keyword", "driver_id": "keyword", "error": {"error_code": "long", "major_app_version": "keyword", "is_internal": "boolean", "client_type": "keyword", "endpoint": "keyword", "message": {"error": "keyword", "error_description": "keyword"}, "os": "keyword", "error_class": "keyword", "user_id": "keyword", "client_id": "keyword"}, "nsq_num": "long", "nsq_topic": "keyword", "lat": "float", "lng": "float", "venue_name": "keyword", "venue_id": "keyword", "experiment_name": "keyword"}}}, "version": "22289fa54acdf5e89d68691993deed8ff82dc6d5", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "9486047ea0b6ba93bc464ac5334cab946de5454c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "venuesmodels": {"name": "venuesmodels", "description": "A repo for predictive models created by the Airports and Venues team", "repository": "git@github.com:lyft/venues_models.git", "image_type": "tool", "slack": "#venues", "team_email": "venues-eng@lyft.com", "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/lyftlearnnotebook:00c43d60b349d8488cf618bf8ec281537383e220"}}]}}, "deploy": [{"name": "production", "legacy": false}], "containers": [{"name": "spin", "command": "sleep infinity"}, {"name": "lyftlearn", "command": "sleep infinity", "mounts": ["/var/run/docker_sockets", "/srv/control"]}, {"name": "notebook", "command": "/code/venvs/venv/bin/jupyter lab --allow-root --NotebookApp.token='' --NotebookApp.password=''", "privileged": true, "exports": [{"name": "notebook", "port": 8888, "protocol": "http"}]}], "groups": [{"name": "lyftlearn_group", "members": ["venuesmodels.lyftlearn"]}], "tests": [{"name": "test-lyftlearn", "type": "execution", "container": "venuesmodels.lyftlearn", "group": "venuesmodels.lyftlearn_group", "command": "make test_lyftlearn"}], "lyftlearn": {}, "version": "f3da2f8c346d7f612cc708c22c15a5efde537b93", "images": [{"parent": {"name": "lyftlearnnotebook", "version": "00c43d60b349d8488cf618bf8ec281537383e220", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "lyftlearnnotebook", "version": "00c43d60b349d8488cf618bf8ec281537383e220", "sub_image": null, "external": false}}, "viewport": {"name": "viewport", "description": "viewport", "repository": "git@github.com:lyft/viewport.git", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "locations.dev", "viewport.legacy", "redis.dev"]}, {"name": "integration", "members": ["tcs.dev", "redis.dev", "locations.dev", "viewport.dev", "ratelimit.dev", "account.dev", "auth.dev", "green.dev", "jobscheduler.dev", "ledger.dev", "rides.dev", "ridesapi.dev", "routes.dev", "routesapi.dev", "users.dev", "wallet.dev", "walletapi.dev", "dispatch.dev", "legacyapi.dev", "drivermode.dev", "ats.dev", "compliance.dev", "supplyrecords.dev", "backgroundcheck.dev", "driverridesinfo.dev", "matchingexecution.dev", "tripsapi.dev", "trips.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "viewport.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy"}, {"name": "integration", "type": "execution", "group": "viewport.integration", "container": "viewport.legacy", "command": "make test_integration", "skip_threshold": 1, "reports": {"junit": "build/int.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "command": "make test_unit", "container": "viewport.legacy", "group": "viewport.dev", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml"}}], "slack": "#locations", "team_email": "locations@lyft.com", "pagerduty_escalation_policy": "Locations", "service_tier": 0, "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "test_logs": ["/var/log/lyft/viewport-web-access.log"], "languages": ["python"], "image_type": "service", "envoy": {"profile": "python", "settings": {"services": [{"name": "viewport"}], "common_settings": {"internal_hosts": {"auth": null, "locations": null, "locationsingest": null, "locationsregionsearch": null, "locationsrouteline": null, "places": null, "ratelimit": null, "regions": null, "rides": null, "routes": null, "routesapi": null, "supply": null, "tcs": null, "tripsapi": null, "users": null, "viewport": null}, "external_hosts": {"firehose_iad": null, "kinesis_iad": null}, "redis": {"viewportmultiredis": {"port": 6380, "op_timeout_ms": 1250, "outlier_detection": {"consecutive_5xx": 25, "enforcing_success_rate": 0}, "health_check": {"timeout_ms": 1000, "interval_ms": 2000}}}}, "override_settings": [{"services": [{"name": "viewport"}], "settings": {"authorization": {"permissions": {"ingestion_persist_locations": {"paths": ["/locations"], "methods": ["POST", "OPTIONS"]}, "routes_area_v2_search_area": {"paths": ["/v2/user_statuses/area/*"], "methods": ["GET"]}, "routes_area_update_user_status": {"paths": ["/user_statuses/*"], "methods": ["PUT"]}, "search_v1_search_users_by_ids": {"paths": ["/user_statuses/search_user_ids"], "methods": ["POST"]}, "viewport_get_navigation_routeline_data": {"paths": ["/v1/get_navigation_routeline_data"], "methods": ["POST"]}, "unmigrated": {"not_paths": ["/v1/get_navigation_routeline_data", "/locations", "/v2/user_statuses/area", "/user_statuses/*", "/user_statuses/search_user_ids"]}}, "bindings": {"dispatch": ["search_v1_search_users_by_ids", "routes_area_v2_search_area", "routes_area_update_user_status", "ingestion_persist_locations"], "dispatchdropoffsworkers": ["routes_area_v2_search_area"], "dispatchworkers": ["routes_area_v2_search_area"], "drivermode": ["routes_area_update_user_status"], "envoy": ["viewport_get_navigation_routeline_data", "ingestion_persist_locations"], "heliumnewworkers": ["routes_area_v2_search_area"], "shorttermforecaster": ["routes_area_v2_search_area"], "shorttermforecasterworkers": ["routes_area_v2_search_area"], "webclient": ["ingestion_persist_locations"], "www2": ["ingestion_persist_locations"], "integrationtest": ["*"], "*": ["unmigrated"]}}}}]}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "logging": {"viewport": {"fields": {"device_id": "keyword", "gevent_pause_detector": {"max_blocking_time": "float"}, "impl_method": "keyword", "locations": {"destination": {"lat": "float", "lng": "float"}, "client_app_info": "keyword", "index_attributes": {"in_ride": "boolean", "mode": "keyword", "ride_types": "keyword", "route_id": "keyword"}, "locations": "keyword"}, "locations_len": "long", "locations_request_body": {"client_app_info": "keyword", "locations": "keyword", "index_attributes": {"in_ride": "boolean", "mode": "keyword", "ride_types": "keyword", "route_id": "keyword"}}, "method": "keyword", "navigation_locations": "keyword", "navigation_routeline": "keyword", "num_locations": "long", "num_null_recorded_at": "long", "num_zero_recorded_at": "long", "request": "keyword", "response_code": "long", "ride_id": "keyword", "route_id": "keyword", "route_name": "keyword", "route_ref": "keyword", "user_agent": "keyword", "user_id": "keyword"}}}, "version": "363193e402111cc37e14216f6999af12cddf0fbf", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "vpn": {"name": "vpn", "description": "vpn", "repository": "git@github.com:lyft/ops.git:vpn", "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.testbed", "sub_image": "testbed"}}]}}, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 30, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "vpn.legacy"]}], "slack": "#security", "notification_overrides": {"deploy": {"slack": "#security-deploys"}, "pr_merge": {"slack": "#security-deploys"}}, "pagerduty_escalation_policy": "Security", "team_email": "security-engineering@lyft.com", "audit_blacklist": ["envoyAudit"], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "integration", "type": "execution", "group": "vpn.dev", "container": "vpn.legacy", "command": "make test_integration"}, {"name": "lua-syntax", "type": "jailed", "sub_image": "testbed", "command": "luac -p /etc/powerdns/recursor.lua"}, {"name": "pdns-recursor-config", "type": "jailed", "sub_image": "testbed", "command": "make test_lua"}, {"name": "orca_syntax", "autotrigger": false, "type": "execution", "group": "vpn.dev", "container": "vpn.legacy", "command": "make test_orca_syntax"}, {"name": "highstate", "type": "execution", "group": "vpn.dev", "container": "vpn.legacy", "command": "make test_highstate"}, {"name": "jslint", "type": "execution", "group": "vpn.dev", "container": "vpn.legacy", "command": "make test_jslint"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}]}, [{"name": "production-us-east-1a", "availability_zone": "us-east-1a", "legacy": true}, {"name": "production-us-east-1d", "availability_zone": "us-east-1d", "legacy": true}, {"name": "production", "legacy": true}]], "languages": ["bash", "javascript", "python"], "image_type": "service", "service_tier": 2, "envoy": {"profile": "python", "settings": {"services": [{"name": "vpn"}, {"name": "vpnauth"}], "common_settings": {"internal_hosts": {"team": null}}}}, "python": {"mypy": {"python_versions": ["3.6"]}}, "logging": {"vpn": {"fields": {"cert_auth": "boolean", "test_ping_target": "keyword", "test_vpn_domain": "keyword", "days_until_cert_expires": "long", "cert_path": "keyword"}}}, "version": "bb83e8ddfb263b0266b1fc9f90dba614e0252622", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": "testbed"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "vulndbmirror": {"name": "vulndbmirror", "description": "Mirror of the third-party VulnDB vulnerability database.", "repository": "git@github.com:lyft/vulndbmirror.git", "image_type": "service", "service_tier": 3, "slack": "#infraintelgraph", "team_email": "security-engineering@lyft.com", "pagerduty_escalation_policy": "Security", "languages": ["bash", "python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/vulndbmirror", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "256Mi"}}, {"name": "status", "command": "dumb-init -- service_venv python -m app.scripts.status", "workdir": "/code/vulndbmirror", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "128Mi"}}, {"name": "syncstatus", "command": "dumb-init -- service_venv python -m app.scripts.status_sync", "workdir": "/code/vulndbmirror", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "128Mi"}}, {"name": "pull", "command": "dumb-init -- service_venv python -m app.scripts.pull_updates", "workdir": "/code/vulndbmirror", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "1Gi"}}, {"name": "pulltoday", "command": "dumb-init -- service_venv python -m app.scripts.pull_updates -a 25", "workdir": "/code/vulndbmirror", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "256Mi"}}, {"name": "sync", "command": "dumb-init -- service_venv python -m app.scripts.sync", "workdir": "/code/vulndbmirror", "sub_image": "k8s", "limits": {"cpu": 1, "memory": "128Mi"}}], "facets": [{"name": "main", "member": "vulndbmirror.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 3}, "production": {"min_size": 1, "max_size": 3}}}}, {"name": "statuscron", "member": "vulndbmirror.status", "type": "cron", "schedule": "0 * * * *"}, {"name": "syncstatuscron", "member": "vulndbmirror.syncstatus", "type": "cron", "schedule": "* * * * *"}, {"name": "pullcron", "member": "vulndbmirror.pulltoday", "type": "cron", "schedule": "15 3 * * *"}, {"name": "synccron", "member": "vulndbmirror.sync", "type": "cron", "schedule": "45 4 * * *"}, {"name": "pullbatch", "member": "vulndbmirror.pull", "type": "batch"}], "groups": [{"name": "dev", "members": ["control.dev", "postgresql.server", "vulndbmirror.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "vulndbmirror.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "unit_slow", "type": "jailed", "command": "make test_unit_slow"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": false, "targets": [{"facet": "main"}, {"facet": "statuscron"}, {"facet": "syncstatuscron"}, {"facet": "pullcron"}, {"facet": "synccron"}, {"facet": "pullbatch"}], "kubernetes": {"enabled": true}, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": false, "orca": [{"region": "iad"}], "links": [{"text": "Runbook", "url": "https://docs.lyft.net/eng/vulndbmirror/runbook.html"}]}, [{"name": "production-us-east-1a", "legacy": false, "availability_zone": "us-east-1a", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production-us-east-1d", "legacy": false, "availability_zone": "us-east-1d", "targets": [{"facet": "main"}], "kubernetes": {"enabled": true}}, {"name": "production", "legacy": false, "targets": [{"facet": "main"}, {"facet": "statuscron"}, {"facet": "syncstatuscron"}, {"facet": "pullcron"}, {"facet": "synccron"}, {"facet": "pullbatch"}], "kubernetes": {"enabled": true}}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "vulndbmirror"}]}}, "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/opsbase:36518650f40787ad43faa9717259a01880989029"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": "k8s"}}]}}, "version": "e9ca12ce23ecdd0854818c1a2e804bbd46212892", "images": [{"parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "36518650f40787ad43faa9717259a01880989029", "sub_image": null, "external": false}}, "wallet": {"name": "wallet", "description": "wallet", "repository": "git@github.com:lyft/wallet.git", "image_type": "service", "service_tier": 0, "languages": ["go"], "credentials": false, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "redis.dev", "wallet.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "wallet.dev"}, {"name": "lint", "type": "execution", "group": "wallet.dev", "container": "wallet.legacy", "command": "make lint"}, {"name": "unit", "type": "execution", "group": "wallet.dev", "container": "wallet.legacy", "command": "make test_unit"}, {"name": "coverage", "type": "execution", "group": "wallet.dev", "container": "wallet.legacy", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}], "team_email": "pay-platform-eng@lists.lyft.com", "pagerduty_escalation_policy": "Pay Platform", "slack": "#pay-platform", "slack_deploy_notification_environments": ["canary", "production"], "notification_overrides": {"deploy": {"slack": "#pay-platform-deploys", "environments": ["production", "staging"]}, "pr_open": {"slack": "#pay-platform"}, "test_failure": {"slack": "#pay-platform-deploys", "environments": ["production"]}}, "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "envoy": {"profile": "go", "settings": {"services": [{"name": "wallet"}], "common_settings": {"external_hosts": {"dynamodb_iad": null}, "redis": {"walletmultiredis": {"port": 6380, "op_timeout_ms": 100, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}}}}, "logging": {"wallet": {"fields": {"requestId": "keyword", "userAgent": "keyword", "grpcMethod": "keyword", "chargeAccountId": "keyword", "grpcStatusCode": "keyword", "revision": "long", "awsMsg": "keyword", "service": "keyword", "request_id": "keyword", "error": "keyword", "lyft_user_id": "keyword", "downstream_cluster": "keyword", "code": "keyword", "endpoint": "keyword", "provider": "keyword", "path": "keyword", "method": "keyword", "businessDefault": "boolean", "authorizedAt": "long", "host": "keyword", "signal": "keyword", "key": "keyword", "caller": "keyword", "participantId": "keyword", "participantDomain": "keyword"}}}, "version": "cd74016a194fac65875e21107118a8c82bef67ff", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "walletapi": {"name": "walletapi", "description": "A tier0 service working as the API layer for charge account requests", "repository": "git@github.com:lyft/walletapi.git", "image_type": "service", "service_tier": 0, "slack": "#pay-platform", "team_email": "pay-platform-eng@lists.lyft.com", "pagerduty_escalation_policy": "Pay Platform", "languages": ["python"], "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "service", "command": "service_venv gunicorn wsgi:app --workers=4 -k gevent --worker-connections=1000 -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/walletapi", "sub_image": "k8s", "limits": {"cpu": 4, "memory": "4Gi"}}], "facets": [{"name": "main", "member": "walletapi.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 50}, "environment": {"staging": {"min_size": 1, "max_size": 3}}}}], "groups": [{"name": "dev", "members": ["control.dev", "envoy.server", "walletapi.legacy"]}, {"name": "integration", "members": ["account.integration", "ats.qa_approve", "dispatch.dev", "enterprise.dev", "green.dev", "idl.server", "jobscheduler.dev", "locations.dev", "messaging.dev", "redis.dev", "ridetimeestimator.dev", "routesapi.dev", "txnhub.dev", "usergroups.dev", "users.dev", "wallet.dev", "walletapi.dev"]}], "tests": [{"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"cobertura": "build/unit_coverage.xml", "junit": "build/unittests.xml"}}, {"name": "integration", "type": "execution", "group": "walletapi.integration", "container": "walletapi.legacy", "command": "make test_integration", "reports": {"junit": "build/integrationtests.xml", "cobertura": "build/integration_coverage.xml"}}, {"name": "coverage", "type": "execution", "group": "walletapi.dev", "container": "walletapi.legacy", "command": "make coverage", "reports": {"cobertura": "build/coverage.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}], "kubernetes": {"enabled": "true"}, "targets": {"facet": "main"}}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}], {"name": "production", "legacy": true}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}, {"name": "s2iplus", "params": {"builder": "lyft/s2ipython3:8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": "k8s", "packages": ["libpq-dev"]}}]}}, "pulldeploy_components": {"data": ["regioncfgdata", "translationdata"]}, "notification_overrides": {"deploy": {"slack": "#pay-platform-deploys", "environments": ["production", "staging"]}, "pr_open": {"slack": "#pay-platform"}, "test_failure": {"slack": "#pay-platform-deploys", "environments": ["production"]}}, "envoy": {"profile": "python", "settings": {"services": [{"name": "walletapi"}, {"name": "walletapibatch"}], "common_settings": {"internal_hosts": {"account": {"tls_enabled": true}, "enterprise": null, "enterprisepayapi": null, "green": null, "jobschedulerbulkweb": null, "jobschedulernormalweb": null, "karma": null, "messaging": null, "regions": null, "ridepasses": null, "ridesapi": null, "rides": null, "supply": null, "tcs": null, "trips": null, "tripsapi": null, "txnhub": null, "usergroups": null, "users": null, "wallet": null, "walletapi": null}, "external_hosts": {"firehose_iad": null}, "redis": {"walletapimultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}}}}, "version": "afe209f96a3888ec54e8b3f53e0334e43e34d955", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "wavefrontcli": {"name": "wavefrontcli", "description": "Tools for sending stats to Wavefront from development", "repository": "git@github.com:lyft/wavefrontcli.git", "image_type": "library", "slack": "#ci-bots", "team_email": "automation-team@lyft.com", "builder": {"name": "s2i", "params": {"builder": "lyft/s2ipythonlibrary:3ed8f324ff52b72202248c4373244fee4d6c4a78"}}, "containers": [{"name": "incr", "command": "python3 -m wavefrontcli.entrypoint"}, {"name": "test", "command": "sleep infinity"}], "python": {"mypy": {"python_versions": ["3.6"], "include": ["wavefrontcli/"]}}, "pagerduty_escalation_policy": "CI and Deployments", "deploy": [{"name": "staging", "legacy": true, "role": "lyftpypi-staging-iad-deploy"}, {"name": "production", "legacy": true, "role": "lyftpypi-production-iad-deploy", "automatic": true}], "languages": ["python"], "version": "311618ec858c3f4343038de6eedf1af49a77a008", "images": [{"parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "s2ipythonlibrary", "version": "3ed8f324ff52b72202248c4373244fee4d6c4a78", "sub_image": null, "external": false}}, "wavefrontproxy": {"name": "wavefrontproxy", "description": "wavefrontproxy", "repository": "git@github.com:lyft/wavefrontproxy.git", "credentials": true, "configsets": ["wavefrontproxydata"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build", "params": {"dockerfile": "Dockerfile.java", "sub_image": "java"}}, {"name": "s2i", "params": {"builder": "lyft/s2igo:b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6", "sub_image": "go"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile"}}]}}, "containers": [{"name": "java", "command": "dumb-init -- /run_wavefront_agent.sh", "sub_image": "java", "limits": {"cpu": 2, "memory": "4Gi"}}, {"name": "wfp", "command": "dumb-init -- wavefrontproxy", "sub_image": "go", "limits": {"cpu": 8, "memory": "48Gi"}}, {"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "service", "members": ["wavefrontproxy.java", "wavefrontproxy.wfp"]}, {"name": "dev", "members": ["control.dev", "wavefrontproxy.legacy"]}], "facets": [{"name": "main", "type": "service", "member": "wavefrontproxy.service", "autoscaling": {"min_size": 1, "max_size": 1}}], "tests": [{"name": "startup", "type": "startup", "group": "wavefrontproxy.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}], "team_email": "observability-visibility-team@lyft.com", "pagerduty_escalation_policy": "Observability Visibility", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#observabot"}, "pr_merge": {"slack": "#observabot"}}, "deploy": [[{"availability_zone": "us-east-1a", "legacy": true, "name": "staging-us-east-1a"}], [{"availability_zone": "us-east-1e", "legacy": true, "name": "staging-us-east-1e"}], {"name": "staging", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}, {"region": "sfo", "iam_role": "orca-admin"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad", "iam_role": "orca-admin"}, {"region": "sfo", "iam_role": "orca-admin"}]}, [{"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, {"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"availability_zone": "us-east-1e", "legacy": true, "name": "production-us-east-1e"}], {"name": "production", "legacy": true}], "languages": ["go"], "image_type": "service", "service_tier": 1, "envoy": {"profile": "go", "settings": {"services": [{"name": "wavefrontproxy"}, {"name": "wavefrontproxytest"}], "common_settings": {"redis": {"wavefrontproxymultiredis": {"port": 6380}}, "internal_hosts": {"ratelimit": null}}}}, "version": "62c4e5a858a089488b67c73efe72b2399043482f", "images": [{"parent": {"name": "bionicbase", "version": "fe75642fede446d1d6453d8e57b95ca57eaef0bd", "sub_image": null, "external": false}, "sub_image": "java"}, {"parent": {"name": "s2igo", "version": "b6eb3f756a8ffd68a7de89d2ef4114da6b54bad6", "sub_image": null, "external": false}, "sub_image": "go"}, {"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "wavefrontproxydata": {"name": "wavefrontproxydata", "description": "Runtime configuration data for wavefrontproxydata", "repository": "git@github.com:lyft/wavefrontproxydata.git", "image_type": "data", "service_tier": 2, "team_email": "observability-visibility-team@lyft.com", "pagerduty_escalation_policy": "Observability Visibility", "slack": "#observability", "notification_overrides": {"deploy": {"slack": "#observabot"}, "pr_merge": {"slack": "#observabot"}}, "languages": ["bash", "python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "credentials": false, "docs": {"disable": true}, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/wavefrontproxydata"]}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "configset", "type": "tool", "tool": "configsettest.test"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "af575d2ce251bed3459a9b0e37bde2d6fe28e81f", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "wavnotif": {"name": "wavnotif", "description": "WAV rides notifications (Slack, email, etc)", "repository": "git@github.com:lyft/wavnotif.git", "slack": "#wav-notif-dev", "team_email": "oshaked@lyft.com", "pagerduty_escalation_policy": "WAV Rides notifications", "image_type": "service", "service_tier": 2, "languages": ["bash", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:27b9eec6aba0a13b22fec8b1d4ef0afba2116508", "packages": ["libgeos-dev", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=1 -k gevent -c /etc/gunicorn/gunicorn.conf", "workdir": "/code/wavnotif", "limits": {"cpu": 1, "memory": "512Mi"}, "sub_image": "k8s", "liveness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 10, "initial_delay_seconds": 10}, "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 1, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "wavnotif.legacy"]}, {"name": "service_group", "members": ["wavnotif.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "wavnotif.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "wavnotif.service", "type": "service", "autoscaling": {"environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 5}}}}, {"name": "canary", "member": "wavnotif.service", "type": "service", "canary": true, "autoscaling": {"min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "wavnotif"}], "common_settings": {"external_hosts": {"dynamodb_iad": null, "firehose_iad": null, "kinesis_iad": null}, "internal_hosts": {"regions": null, "rides": null, "users": null}, "local_service": {"circuit_breakers": {"default": {"max_connections": 200}}}}}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "version": "dfd7bab29b47dcfd977f0d9620a79122db915a96", "images": [{"parent": {"name": "opsbase", "version": "27b9eec6aba0a13b22fec8b1d4ef0afba2116508", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ff8eec66f4039c26078547245da80197d7f32ac7", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "d4951b013fa4b105fabdc812d4485cbca62df50c", "sub_image": null, "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "27b9eec6aba0a13b22fec8b1d4ef0afba2116508", "sub_image": null, "external": false}}, "webclient": {"name": "webclient", "description": "frontend website", "repository": "git@github.com:lyft/lyft-web-client.git", "credentials": true, "custom": {"frontend_service": true}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}], "groups": [{"name": "dev", "members": ["control.dev", "www2.dev", "webclient.legacy"]}, {"name": "integration", "members": ["webclient.dev", "accountfrontend.dev", "ats.dev", "auth.dev", "coupons.dev", "courier.dev", "dispatch.dev", "etaproxy.dev", "fare.dev", "green.dev", "jobscheduler.dev", "karma.dev", "ledger.dev", "locations.dev", "pricing.dev", "publicapi.dev", "regions.dev", "ridelocations.dev", "rides.dev", "streets.dev", "switchboard.dev", "tcs.dev", "telegraph.dev", "tom.dev", "users.dev", "viewport.dev", "wallet.dev", "walletapi.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "webclient.dev"}, {"name": "unit", "type": "execution", "group": "webclient.dev", "container": "webclient.legacy", "command": "make test_unit"}, {"name": "lint", "type": "execution", "group": "webclient.dev", "container": "webclient.legacy", "command": "make test_lint", "reports": {"eslint": "test/results/eslint-results.xml"}}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "slack": "#m-lyft", "team_email": "frontend-platform@lyft.com", "pagerduty_escalation_policy": "Web UX", "pulldeploy_components": {"data": ["regioncfgdata"]}, "deploy": [{"name": "staging", "legacy": true, "automatic": true, "links": [{"text": "Health Metrics", "url": "https://grafana.lyft.net/dashboard/db/lyft-web-client-mlyft"}]}, {"name": "canary", "legacy": true}, {"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, [{"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "languages": ["javascript", "python"], "image_type": "service", "service_tier": 1, "envoy": {"profile": "python", "settings": {"services": [{"name": "webclient"}], "common_settings": {"internal_hosts": {"dispatchavailability": null, "fare": null, "publicapi": null, "regions": null, "ridelocations": null, "ridesapi": null, "supply": null, "tcs": null, "users": null, "viewport": null, "www2": null, "wwwbrochurefe": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "version": "327267e02a98353a2050148e8004be9b982733fe", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "wheelbuilder": {"name": "wheelbuilder", "description": "Tool to produce prebuilt python distributions for the next generation internal pypi.  go.lyft.com/wheelbuilder", "repository": "git@github.com:lyft/wheelbuilder.git", "slack": "#dev-environment", "team_email": "devx-team@lyft.com", "languages": ["python"], "image_type": "tool", "containers": [{"name": "spin", "command": "sleep infinity", "mounts": ["/srv/control", "/var/run/docker_sockets"]}, {"name": "deployspin", "command": "sleep infinity", "role": "wheelbuilder-production-iad", "mounts": ["/srv/control", "/var/run/docker_sockets"]}, {"name": "bumpversions", "command": "bin/bump-versions"}], "groups": [{"name": "dev", "members": ["metadataproxy.server", "wheelbuilder.spin"]}, {"name": "prod", "members": ["metadataproxy.server", "wheelbuilder.deployspin"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.trustybuilder", "sub_image": "trustybuilder"}}, {"name": "docker_build", "params": {"dockerfile": "Dockerfile.bionicbuilder", "sub_image": "bionicbuilder"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:31ede386a3aa6f65853ec1199aa1b5f34c3b115d", "sub_image": "precommit"}}]}}, "tests": [{"name": "unit", "type": "jailed", "command": "./bin/test"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "dryrun", "type": "execution", "container": "wheelbuilder.spin", "group": "wheelbuilder.dev", "command": "bin/mirror --dry-run", "timeout": 180}, {"name": "deploy", "type": "execution", "container": "wheelbuilder.deployspin", "group": "wheelbuilder.prod", "command": "bin/mirror", "timeout": 180, "run_in_pr": false, "run_in_dev": true}], "deploy": [{"name": "development", "legacy": false, "orca": [{"region": "iad"}]}, {"name": "production", "legacy": false, "orca": [{"region": "iad"}]}], "version": "e50d46159b0c7c9ee3479ad4162fb265e5fa5d64", "images": [{"parent": {"name": "bionicbase", "version": "c3382212118c3b3a62d4c82a7cf8ff7ea9cce056", "external": false}, "sub_image": null}, {"parent": {"name": "imagebase", "version": "bbbf836b899ec8345e03c2bd503200e5c3754dc0", "external": false}, "sub_image": "trustybuilder"}, {"parent": {"name": "bionicbase", "version": "c3382212118c3b3a62d4c82a7cf8ff7ea9cce056", "external": false}, "sub_image": "bionicbuilder"}, {"parent": {"name": "precommit", "version": "31ede386a3aa6f65853ec1199aa1b5f34c3b115d", "external": false}, "sub_image": "precommit"}], "parent": {"name": "bionicbase", "version": "c3382212118c3b3a62d4c82a7cf8ff7ea9cce056", "external": false}}, "workflowmonitor": {"name": "workflowmonitor", "description": "Monitor distributed workflows and provide options for corrective actions", "repository": "git@github.com:lyft/workflowmonitor.git", "slack": "#workflowmonitor-dev", "team_email": "enterprise-concierge-eng@lists.lyft.com", "pagerduty_escalation_policy": "Enterprise Concierge", "image_type": "service", "service_tier": 2, "languages": ["python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/opsbase:6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "packages": ["libxmlsec1-dev", "pkg-config", "libspatialindex-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": "precommit"}}, {"name": "s2i", "params": {"builder": "lyft/s2ipython3:py37.8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": "k8s"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh"}, {"name": "service", "command": "service_venv gunicorn app.flask_app:app --workers=2 -k gevent -c /etc/gunicorn/gunicorn.conf", "limits": {"cpu": 2, "memory": "1Gi"}, "sub_image": "k8s", "readiness_probe": {"exec_probe": {"command": ["gunicorn_healthcheck"]}, "period_seconds": 15, "initial_delay_seconds": 10}, "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "dynamodb.server", "redis.server", "workflowmonitor.legacy", "elasticsearch6.server"]}, {"name": "service_group", "members": ["workflowmonitor.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "workflowmonitor.dev"}, {"name": "unit", "type": "jailed", "framework": "pytest"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "facets": [{"name": "main", "member": "workflowmonitor.service", "type": "service", "autoscaling": {"criteria": {"cpu_target": 65}, "environment": {"staging": {"min_size": 1, "max_size": 1}, "production": {"min_size": 1, "max_size": 20}}}}, {"name": "canary", "member": "workflowmonitor.service", "type": "service", "canary": true, "autoscaling": {"criteria": {"cpu_target": 65}, "min_size": 1, "max_size": 1}}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}]}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "canary"}]}, [{"name": "production-us-east-1a", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}], "availability_zone": "us-east-1d"}], {"name": "production", "legacy": false, "kubernetes": {"enabled": true}, "targets": [{"facet": "main"}, {"facet": "canary"}]}], "envoy": {"profile": "python", "settings": {"services": [{"name": "workflowmonitor"}], "common_settings": {"redis_clusters": {"workflowmonitor": {"aws_random_identifier": "vngjnv", "port": 6380, "op_timeout_ms": 400}}, "external_hosts": {"dynamodb_iad": null}, "internal_hosts": {"jobschedulerbulkweb": null, "jobschedulernormalweb": null, "jobschedulermigrationweb": null, "rides": null}}}}, "version": "4c2e7ebaea8e2bf32aa25601271f68e128270a6a", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "ee9a72abaccc8ea0dbcc77d7052a253c5d5fdbbc", "sub_image": null, "external": false}, "sub_image": "precommit"}, {"parent": {"name": "s2ipython3", "version": "8e90ba19b7c96c81f88ac16ab912ac4aa41397f7", "sub_image": "py37", "external": false}, "sub_image": "k8s"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "www2": {"name": "www2", "description": "Enterprise & Legacy WWW2 Auth Resources", "repository": "git@github.com:lyft/lyft.com.git", "credentials": true, "pagerduty_escalation_policy": "Enterprise Concierge", "team_email": "enterprise-concierge-eng@lists.lyft.com", "slack": "#enterprise-deploy", "languages": ["python", "bash"], "image_type": "service", "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 9211}]}], "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "www2.legacy"]}, {"name": "site", "members": ["www2.dev", "accountfrontend.dev", "brandfe.dev", "brochure.dev"]}], "upstream_tests": {"on_commit": true, "test_set": {"wwwenterprisefe": ["e2e_chrome_work", "e2e_ie_dispatch_login"], "enterprisefrontend": ["e2e_chrome"], "accountfrontend": ["e2e_ie_auth", "e2e_chrome_oauth"], "brochure": ["e2e_chrome"]}}, "tests": [{"name": "unit", "type": "jailed", "framework": "pytest", "markers": "not unit_legacy", "virtualenv": "service_venv", "targets": ["test/unit"]}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit_legacy", "type": "execution", "framework": "pytest", "coverage": false, "markers": "unit_legacy", "container": "www2.legacy", "group": "www2.dev", "targets": ["test/unit"], "virtualenv": "service_venv"}], "test_logs": ["/var/log/lyft/www2-web-access.log", "/var/log/lyft/client_javascript_errors.log"], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"availability_zone": "us-east-1a", "legacy": true, "name": "production-us-east-1a"}, [{"availability_zone": "us-east-1d", "legacy": true, "name": "production-us-east-1d"}, {"legacy": true, "name": "production"}]], "service_tier": 1, "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "www2"}], "common_settings": {"external_hosts": {"kinesis_iad": null, "firehose_iad": null}, "internal_hosts": {"account": null, "api": null, "ats": {"tls_enabled": true}, "directorysync": null, "dispatchavailability": null, "enterprise": null, "enterprisecustomfields": null, "enterprisedispatch": null, "fare": null, "grow": null, "ledger": null, "legacyoauth": null, "legacyridetypes": null, "loyaltyprograms": null, "publicapi": null, "ratelimit": null, "regions": null, "ridelocations": null, "rideprograms": null, "rides": null, "ridesapi": null, "ridescheduler": null, "robocop": null, "supply": null, "switchboard": null, "tcs": null, "usergroups": null, "users": null, "venues": null, "viewport": null}, "redis": {"www2multiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}, "authorization": {"permissions": {"public": {"not_paths": ["/api/auth_backdoor", "/api/id_from_session"]}, "auth_backdoor": {"paths": ["/api/auth_backdoor"]}, "id_from_session": {"paths": ["/api/id_from_session"]}}, "bindings": {"*": ["public"], "coupons": ["id_from_session"], "driverloyalty": ["auth_backdoor", "id_from_session"], "expressdrivefeapi": ["auth_backdoor", "id_from_session"], "grow": ["auth_backdoor", "id_from_session"], "guardian": ["auth_backdoor", "id_from_session"], "loyaltytiers": ["id_from_session"], "ridehistory": ["auth_backdoor", "id_from_session"], "robocop": ["auth_backdoor", "id_from_session"], "tcs": ["id_from_session"], "help": ["auth_backdoor", "id_from_session"], "redirects": ["auth_backdoor"], "webclient": ["id_from_session"], "wwwbrochurefe": ["auth_backdoor", "id_from_session"], "wwwcommsplatformfe": ["auth_backdoor", "id_from_session"], "wwwdriverengagementfe": ["auth_backdoor", "id_from_session"], "wwwdriveronboardingfe": ["auth_backdoor", "id_from_session"], "wwwdriverrewardsfe": ["auth_backdoor", "id_from_session"], "wwwdriverxpfe": ["auth_backdoor", "id_from_session"], "wwwexpressdrivefe": ["auth_backdoor", "id_from_session"], "wwwidentityfe": ["auth_backdoor", "id_from_session"], "wwwpayxpfe": ["auth_backdoor", "id_from_session"], "wwwratecardfe": ["auth_backdoor", "id_from_session"], "wwwsupportxpfe": ["auth_backdoor", "id_from_session"]}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:28e39e6f597d94733f236de463dc9d18ad6af692", "sub_image": "precommit"}}]}}, "logging": {"www2": {"fields": {"placement": "keyword", "response_code": "long", "response_body": "keyword", "work_user_id": "keyword", "ride_id": "keyword", "org_id": "keyword", "query": "keyword", "request_url": "keyword", "request": "keyword", "num_results": "long", "slug": "keyword", "only_errors": "boolean", "user_ip": "keyword", "http_status_code": "long", "service": "keyword", "http_method": "keyword", "response": "keyword", "organization_id": "keyword", "subdomain": "keyword", "args": {"query": "keyword"}, "is_super_admin": "boolean", "data": {"require_expense_code": "boolean", "require_expense_note": "boolean", "name": "keyword", "bulk_scheduling_enabled": "boolean", "passenger_notification_enabled": "boolean", "domains": "keyword", "direct_billing_enabled": "boolean", "dispatch_enabled": "boolean", "size_estimate_min": "long", "size_estimate_max": "long", "ondemand_direct_billing_enabled": "boolean", "business_profile_coupon_codes": "keyword", "email": "keyword"}, "user_id": "keyword", "failed_record_count": "long", "attempt_num": "long"}}}, "version": "ab5683e3fea2157bea9979223edc1a00d884ab1d", "images": [{"parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "28e39e6f597d94733f236de463dc9d18ad6af692", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "6e3de64c33138f6aa0b19e79f23b1d35a89d6e6a", "sub_image": null, "external": false}}, "wwwbrochurefe": {"name": "wwwbrochurefe", "description": "www2 code in for security / terms / pricing", "repository": "git@github.com:lyft/wwwbrochurefe.git", "image_type": "service", "service_tier": 1, "slack": "#lyftcom", "team_email": "frontend-platform@lyft.com", "pagerduty_escalation_policy": "Web UX", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}], "groups": [{"name": "dev", "members": ["control.dev", "redis.dev", "wwwbrochurefe.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "wwwbrochurefe.dev"}, {"name": "unit", "type": "execution", "command": "make test_unit", "group": "wwwbrochurefe.dev", "container": "wwwbrochurefe.legacy"}, {"name": "lint", "type": "execution", "group": "wwwbrochurefe.dev", "container": "wwwbrochurefe.legacy", "command": "make test_lint", "reports": {"pylint": "test/results/flake8-results.txt"}, "skip_threshold": null}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "envoy": {"profile": "python", "settings": {"services": [{"name": "wwwbrochurefe"}], "common_settings": {"external_hosts": {"kinesis_iad": null, "firehose_iad": null}, "internal_hosts": {"ats": null, "enterprise": null, "fare": null, "grow": null, "places": null, "ratelimit": null, "regions": null, "robocop": null, "supply": null, "tcs": null, "usergroups": null, "users": null, "www2": null}}}}, "pulldeploy_components": {"data": ["regioncfgdata"]}, "languages": ["javascript", "python"], "logging": {"wwwbrochurefe": {"fields": {"request_url": "keyword", "user_ip": "keyword", "user_id": "keyword", "http_status_code": "long", "service": "keyword", "http_method": "keyword", "places_api_url": "keyword", "user_lyft_id": "keyword", "failed_record_count": "long", "attempt_num": "long", "error_id": "keyword", "error_msg": "keyword", "event_name": "keyword", "field_name": "keyword", "sending_service": "keyword", "origin_service": "keyword", "path": "keyword", "page": "keyword"}}}, "version": "ab76a7d4304f96077fb026bc685dad3c9d2242d0", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "wwwcommsplatformfe": {"name": "wwwcommsplatformfe", "description": "Communications Platform Angular frontend modules -- migrated from www2", "repository": "git@github.com:lyft/wwwcommsplatformfe.git", "slack": "#notifications-bots", "team_email": "notifications-eng@lyft.com", "pagerduty_escalation_policy": "Notifications", "image_type": "service", "service_tier": 1, "languages": ["bash", "javascript", "python"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}], "frontend": {"node_version": "6.9.1-1nodesource1~trusty1"}, "groups": [{"name": "dev", "members": ["control.dev", "wwwcommsplatformfe.legacy"]}, {"name": "service_group", "members": ["wwwcommsplatformfe.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "wwwcommsplatformfe.dev"}, {"name": "unit", "type": "execution", "group": "wwwcommsplatformfe.dev", "container": "wwwcommsplatformfe.legacy", "command": "make test_unit"}, {"name": "lint", "type": "execution", "group": "wwwcommsplatformfe.dev", "container": "wwwcommsplatformfe.legacy", "command": "make test_lint", "reports": {"pylint": "test/results/flake8-results.txt", "control_extract_hack_1": "test/results/eslint-results.txt", "control_extract_hack_2": "test/results/eslint-modern-results.txt"}, "skip_threshold": null}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "deploy": [{"name": "staging", "orca": [{"region": "iad"}], "legacy": true, "automatic": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "wwwcommsplatformfe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"www2": null, "mailer": null, "regions": null, "users": null, "tcs": null}}}}, "logging": {"wwwcommsplatformfe": {"fields": {"auth": {"guest_is_valid": "boolean", "guest_is_valid_from_exacttarget": "boolean", "is_valid": "boolean"}, "unsigned_url": "keyword", "url": "keyword", "success": "keyword", "is_signed_request": "boolean", "sig_url_params": {"_exp": "keyword", "_sig": "keyword", "_usr": "keyword"}, "expiration": "keyword"}}}, "version": "49bc0be8f89765542b4922e02f239a8771236bba", "images": [{"parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "deb42d25da0e6d5fe565c019883e458b4b31b696", "sub_image": null, "external": false}}, "wwwdriverengagementfe": {"name": "wwwdriverengagementfe", "description": "Driver Dashboard Angular (alerts, activities, stats and referrals) frontend modules -- migrated from www2", "repository": "git@github.com:lyft/wwwdriverengagementfe.git", "slack": "#dxp-backend", "team_email": "driver-xp-backend@lyft.com", "pagerduty_escalation_policy": "Driver Earnings XP", "image_type": "service", "service_tier": 1, "languages": ["bash", "javascript", "python"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}], "frontend": {"node_version": "6.9.1-1nodesource1~trusty1"}, "groups": [{"name": "dev", "members": ["control.dev", "wwwdriverengagementfe.legacy"]}, {"name": "service_group", "members": ["wwwdriverengagementfe.legacy"]}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "tests": [{"name": "startup", "type": "startup", "group": "wwwdriverengagementfe.dev"}, {"name": "unit", "type": "execution", "group": "wwwdriverengagementfe.dev", "container": "wwwdriverengagementfe.legacy", "command": "make test_unit"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "lint", "type": "execution", "group": "wwwdriverengagementfe.dev", "container": "wwwdriverengagementfe.legacy", "command": "make test_lint", "reports": {"pylint": "test/results/flake8-results.txt", "control_extract_hack_1": "test/results/eslint-results.txt", "control_extract_hack_2": "test/results/eslint-modern-results.txt"}, "skip_threshold": null}], "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "wwwdriverengagementfe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"acceptancerate": null, "ats": null, "declientapi": null, "drivestat": null, "enterprise": null, "grow": null, "www2": null, "regions": null, "ridestreaks": null, "supply": null, "usergroups": null, "users": null, "tcs": null}}}}, "logging": {"wwwdriverengagementfe": {"fields": {"signed_url": "keyword", "user_id": "keyword", "browser_language_header": "keyword", "lyft_display_language_header": "keyword", "signed_user": "keyword", "current_user": "keyword"}}}, "version": "fcba25f3a7757b56e2af1d6457a570afe08a95d2", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "wwwdriveronboardingfe": {"name": "wwwdriveronboardingfe", "description": "Driver Onboarding Angular frontend modules -- migrated from www2", "repository": "git@github.com:lyft/wwwdriveronboardingfe.git", "image_type": "service", "service_tier": 1, "slack": "#do-funnel-eng", "team_email": "do-funnel@lyft.com", "pagerduty_escalation_policy": "Driver Applicant Onboarding", "frontend": {"node_version": "6.9.1-1nodesource1~trusty1"}, "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}], "groups": [{"name": "dev", "members": ["control.dev", "driverfrontend.dev", "redis.dev", "wwwdriveronboardingfe.legacy"]}, {"name": "integration", "members": ["www2.dev", "brandfe.dev", "wwwdriverengagementfe.dev", "wwwdriveronboardingfe.dev", "wwwreferralsfe.dev", "brochure.dev", "tcs.dev", "accountfrontend.integration", "ats.qa_approve", "auth.dev", "expressdrivefeapi.dev", "grow.dev", "jobscheduler.dev", "karma.dev", "legacyapi.dev", "locations.dev", "publicapi.dev", "robocop.dev", "routesapi.legacy", "supply.dev", "switchboard.dev", "usergroups.dev", "users.dev", "viewport.dev", "acceptancerate.dev", "coupons.dev", "green.dev", "rides.dev", "vehiclemetadata.dev", "wwwbrochurefe.dev", "wwwidentityfe.dev"]}, {"name": "integration_onboarding", "members": ["www2.dev", "brandfe.dev", "wwwdriveronboardingfe.dev", "driverfrontend.integration"]}, {"name": "e2e", "members": ["e2etest.server", "wwwdriveronboardingfe.integration"]}, {"name": "e2e_onboarding", "members": ["e2etest.server", "wwwdriveronboardingfe.integration_onboarding"]}], "tests": [{"name": "startup", "type": "startup", "group": "wwwdriveronboardingfe.dev"}, {"name": "unit", "type": "execution", "group": "wwwdriveronboardingfe.dev", "container": "wwwdriveronboardingfe.legacy", "command": "make test_unit"}, {"name": "lint", "type": "execution", "group": "wwwdriveronboardingfe.dev", "container": "wwwdriveronboardingfe.legacy", "command": "make test_lint", "reports": {"control_extract_hack_1": "test/results/eslint-results.txt", "control_extract_hack_2": "test/results/eslint-modern-results.txt"}, "skip_threshold": null}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "wwwdriveronboardingfe"}], "common_settings": {"redis": {"wwwdriveronboardingmultiredis": {"port": 6380, "op_timeout_ms": 400, "ring_hash_lb_config": {"minimum_ring_size": 16384}}}, "local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"account": null, "acquisitionbonuses": null, "acquisitionguarantees": null, "ats": null, "coupons": null, "enterprise": null, "grow": null, "ratelimit": null, "regions": null, "rentals": null, "supply": null, "tcs": null, "usergroups": null, "users": null, "vehiclemetadata": null, "www2": null}}}}, "logging": {"wwwdriveronboardingfe": {"fields": {"signed_url": "keyword", "user_id": "keyword", "signed_user": "keyword", "current_user": "keyword"}}}, "languages": ["javascript", "python"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "version": "9268105d9df859cc3009c3b4a0f0fcf649ddb390", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "wwwdriverxpfe": {"name": "wwwdriverxpfe", "description": "Driver XP Angular frontend modules -- migrated from www2", "repository": "git@github.com:lyft/wwwdriverxpfe.git", "slack": "#driving-backend", "team_email": "driver-xp-backend@lyft.com", "pagerduty_escalation_policy": "Driver XP+PRO", "image_type": "service", "service_tier": 1, "languages": ["bash", "javascript", "python"], "credentials": true, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": "precommit"}}]}}, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}], "frontend": {"node_version": "6.9.1-1nodesource1~trusty1"}, "groups": [{"name": "dev", "members": ["control.dev", "wwwdriverxpfe.legacy"]}, {"name": "service_group", "members": ["wwwdriverxpfe.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "wwwdriverxpfe.dev"}, {"name": "unit", "type": "execution", "group": "wwwdriverxpfe.dev", "container": "wwwdriverxpfe.legacy", "command": "make test_unit"}, {"name": "lint", "type": "jailed", "command": "make test_lint"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "orca": [{"region": "iad"}], "legacy": true, "automatic": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "wwwdriverxpfe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"ats": null, "enterprise": null, "grow": null, "ledger": null, "publicapi": null, "regions": null, "rides": null, "supply": null, "tcs": null, "usergroups": null, "users": null, "www2": null}}}}, "logging": {"wwwdriverxpfe": {"fields": {"signed_url": "keyword", "user_id": "keyword", "signed_user": "keyword", "current_user": "keyword"}}}, "version": "fa05c8475510f1d5b4f73771798a4d1fea83d7cc", "images": [{"parent": {"name": "opsbase", "version": "7217bb50d71d786ef58610aafb6403846a9e518b", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "b7b1801745d00edf706f633e4fab04cef284d762", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "7217bb50d71d786ef58610aafb6403846a9e518b", "sub_image": null, "external": false}}, "wwwenterprisefe": {"name": "wwwenterprisefe", "description": "Enterprise Angular frontend modules -- migrated from www2", "repository": "git@github.com:lyft/wwwenterprisefe.git", "image_type": "service", "service_tier": 1, "pagerduty_escalation_policy": "Enterprise Concierge", "team_email": "enterprise-concierge-eng@lists.lyft.com", "slack": "#enterprise-deploy", "languages": ["javascript", "python"], "frontend": {"node_version": "6.9.1-1nodesource1~trusty1"}, "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}], "groups": [{"name": "dev", "members": ["control.dev", "wwwenterprisefe.legacy"]}, {"name": "integration", "members": ["tcs.dev", "www2.dev", "wwwbrochurefe.dev", "wwwenterprisefe.dev", "wwwidentityfe.dev", "accountfrontend.dev", "brochure.dev", "auth.dev", "jobscheduler.dev", "karma.dev", "legacyapi.dev", "locations.dev", "publicapi.dev", "supply.dev", "switchboard.dev", "usergroups.dev", "users.dev", "viewport.dev", "enterprise.integration", "enterprisefrontend.dev", "adtechworkflows.dev", "places.integration", "venues.dev", "brandfe.dev"]}, {"name": "integration_concierge", "members": ["wwwenterprisefe.integration", "ats.qa_approve", "dispatch.integration", "enterprisedispatch.integration", "fare.integration", "walletapi.integration"]}, {"name": "e2e", "members": ["e2etest.server", "wwwenterprisefe.integration"]}, {"name": "e2e_concierge", "members": ["wwwenterprisefe.e2e", "wwwenterprisefe.integration_concierge"]}, {"name": "e2e_work", "members": ["e2etest.server", "trips.dev", "tripsapi.dev", "enterprise.wwwenterprisefe", "accountfrontend.dev", "brandfe.dev", "www2.dev", "wwwbrochurefe.dev", "wwwenterprisefe.dev"]}], "tests": [{"name": "startup", "type": "startup", "group": "wwwenterprisefe.dev"}, {"name": "unit", "type": "jailed", "command": "make test_unit"}, {"name": "lint", "type": "execution", "group": "wwwenterprisefe.dev", "container": "wwwenterprisefe.legacy", "command": "make test_lint", "reports": {"pylint": "test/results/flake8-results.txt", "control_extract_hack_1": "test/results/eslint-results.txt", "control_extract_hack_2": "test/results/eslint-modern-results.txt"}, "skip_threshold": null}, {"name": "e2e_chrome_concierge", "type": "execution", "group": "wwwenterprisefe.e2e_concierge", "container": "wwwenterprisefe.legacy", "command": "make test_e2e browser=chrome suite=concierge", "reports": {"junit": "test/results/protractor-results-chrome.xml"}, "skip_threshold": null, "autotrigger": false}, {"name": "e2e_chrome_concierge_extended", "type": "execution", "group": "wwwenterprisefe.e2e_concierge", "container": "wwwenterprisefe.legacy", "command": "make test_e2e browser=chrome suite=conciergeExtended", "reports": {"junit": "test/results/protractor-results-chrome.xml"}, "skip_threshold": null, "autotrigger": false}, {"name": "e2e_ie_dispatch_login", "type": "execution", "group": "wwwenterprisefe.e2e", "container": "wwwenterprisefe.legacy", "command": "make test_e2e browser=ie suite=dispatchLogin", "reports": {"junit": "test/results/protractor-results-chrome.xml"}, "skip_threshold": null}, {"name": "e2e_chrome_work", "type": "execution", "group": "wwwenterprisefe.e2e_work", "container": "wwwenterprisefe.legacy", "command": "make test_e2e browser=chrome suite=work", "reports": {"junit": "test/results/protractor-results-chrome.xml"}, "skip_threshold": null}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "wwwenterprisefe"}], "common_settings": {"internal_hosts": {"regions": null, "ridesapi": null, "tcs": null, "www2": null, "users": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "version": "5fb2e83ddc1ee774e2ba6dedd3c94c1604942d4d", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "wwwexpressdrivefe": {"name": "wwwexpressdrivefe", "description": "Express Drive Angular frontend modules -- migrated from www2", "repository": "git@github.com:lyft/wwwexpressdrivefe.git", "slack": "#xd-hub", "team_email": "xd-eng@lyft.com", "pagerduty_escalation_policy": "XD Frontend", "image_type": "service", "service_tier": 1, "languages": ["bash", "javascript", "python"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}], "frontend": {"node_version": "6.9.1-1nodesource1~trusty1"}, "groups": [{"name": "dev", "members": ["control.dev", "wwwexpressdrivefe.legacy"]}, {"name": "service_group", "members": ["wwwexpressdrivefe.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "wwwexpressdrivefe.dev"}, {"name": "unit", "type": "execution", "group": "wwwexpressdrivefe.dev", "container": "wwwexpressdrivefe.legacy", "command": "make test_unit"}, {"name": "lint", "type": "execution", "group": "wwwexpressdrivefe.dev", "container": "wwwexpressdrivefe.legacy", "command": "make test_lint", "reports": {"pylint": "test/results/flake8-results.txt", "control_extract_hack_1": "test/results/eslint-results.txt", "control_extract_hack_2": "test/results/eslint-modern-results.txt"}, "skip_threshold": null}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "deploy": [{"name": "staging", "automatic": true, "orca": [{"region": "iad"}], "legacy": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "wwwexpressdrivefe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"www2": null, "regions": null, "users": null, "tcs": null}}}}, "logging": {"wwwexpressdrivefe": {"fields": {"signed_url": "keyword", "user_id": "keyword", "current_user": "keyword", "signed_user": "keyword"}}}, "version": "10d60d35f1c20145b6ac59ace959b9a1c2d9a6d8", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "wwwidentityfe": {"name": "wwwidentityfe", "description": "Identity Angular frontend modules -- migrated from www2", "repository": "git@github.com:lyft/wwwidentityfe.git", "image_type": "service", "service_tier": 1, "slack": "#identity-eng", "team_email": "identity-eng@lyft.com", "pagerduty_escalation_policy": "Identity Eng", "notification_overrides": {"pr_open": {"slack": "#identity-prs"}, "deploy": {"slack": "#identity-bots"}, "deploy_failure": {"slack": "#identity-bots"}, "test_failure": {"slack": "#identity-bots"}, "master_failure": {"slack": "#identity-bots"}, "pr_merge": {"slack": "#identity-bots"}, "behind_notifications": {"slack": "#identity-bots"}}, "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}], "frontend": {"node_version": "6.9.1-1nodesource1~trusty1"}, "groups": [{"name": "dev", "members": ["control.dev", "wwwidentityfe.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "wwwidentityfe.dev"}, {"name": "unit", "type": "execution", "group": "wwwidentityfe.dev", "container": "wwwidentityfe.legacy", "command": "make test_unit"}, {"name": "lint", "type": "execution", "group": "wwwidentityfe.dev", "container": "wwwidentityfe.legacy", "command": "make test_lint", "reports": {"pylint": "test/results/flake8-results.txt", "control_extract_hack_1": "test/results/eslint-results.txt", "control_extract_hack_2": "test/results/eslint-modern-results.txt"}, "skip_threshold": null}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "wwwidentityfe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"ats": null, "enterprise": null, "grow": null, "regions": null, "supply": null, "tcs": null, "usergroups": null, "users": null, "www2": null, "legacyoauth": null}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "languages": ["javascript", "python"], "version": "b3675820fd609bb02ec20963c157f9866c8d61a7", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "wwwpayxpfe": {"name": "wwwpayxpfe", "description": "Pay XP Angular frontend modules -- migrated from www2", "repository": "git@github.com:lyft/wwwpayxpfe.git", "image_type": "service", "service_tier": 1, "slack": "#pay-frontend", "team_email": "billing-platform@lyft.com", "pagerduty_escalation_policy": "Pay Frontend", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}], "frontend": {"node_version": "6.9.1-1nodesource1~trusty1"}, "groups": [{"name": "dev", "members": ["control.dev", "wwwpayxpfe.legacy"]}, {"name": "integration", "members": ["accountfrontend.integration", "ats.qa_approve", "auth.dev", "brochure.dev", "couponsfrontend.dev", "declientapi.dev", "drivestat.dev", "enterprise.dev", "expressdrivefeapi.dev", "green.dev", "jobscheduler.dev", "karma.dev", "legacyapi.dev", "locations.dev", "logistics.dev", "publicapi.dev", "ratelimit.dev", "regions.dev", "ridehistory.dev", "rides.dev", "routes.dev", "robocop.dev", "routesapi.legacy", "supply.dev", "switchboard.dev", "tcs.dev", "usergroups.dev", "users.dev", "www2.dev", "wwwbrochurefe.dev", "wwwdriverengagementfe.dev", "wwwdriveronboardingfe.dev", "wwwidentityfe.dev", "wwwpayxpfe.dev"]}, {"name": "e2e", "members": ["e2etest.server", "wwwpayxpfe.integration"]}], "tests": [{"name": "startup", "type": "startup", "group": "wwwpayxpfe.dev"}, {"name": "unit", "type": "execution", "group": "wwwpayxpfe.dev", "container": "wwwpayxpfe.legacy", "command": "make test_unit", "reports": {"junit": "*-results.xml", "cobertura": "*-coverage.xml", "control_extract_hack_1": "test/results/karma-test-results.xml", "control_extract_hack_2": "test/results/pytest-results.xml", "control_extract_hack_3": "test/results/python-coverage.xml", "control_extract_hack_4": "test/results/js-coverage.xml"}, "skip_threshold": null}, {"name": "lint", "type": "execution", "group": "wwwpayxpfe.dev", "container": "wwwpayxpfe.legacy", "command": "make test_lint", "reports": {"pylint": "test/results/flake8-results.txt", "control_extract_hack_1": "test/results/eslint-results.txt", "control_extract_hack_2": "test/results/eslint-modern-results.txt"}, "skip_threshold": null}, {"name": "external_js_dependencies", "type": "execution", "group": "wwwpayxpfe.dev", "container": "wwwpayxpfe.legacy", "command": "service_venv ./manage.py test_external_js"}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "wwwpayxpfe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "external_hosts": {"firehose_iad": null}, "internal_hosts": {"ats": {"tls_enabled": true}, "declientapi": {"tls_enabled": true}, "drivestat": {"tls_enabled": true}, "enterprise": {"tls_enabled": true}, "green": {"tls_enabled": true}, "grow": {"tls_enabled": true}, "ledger": {"tls_enabled": true}, "locations": {"tls_enabled": true}, "locationsmapmatch": {"tls_enabled": true}, "logistics": {"tls_enabled": true}, "payapi": {"tls_enabled": true}, "ratelimit": {"tls_enabled": true}, "regions": {"tls_enabled": true}, "ridehistory": {"tls_enabled": true}, "rides": {"tls_enabled": true}, "routes": {"tls_enabled": true}, "supply": {"tls_enabled": true}, "supplyrecords": {"tls_enabled": true}, "tcs": {"tls_enabled": true}, "timecard": {"tls_enabled": true}, "usergroups": {"tls_enabled": true}, "users": {"tls_enabled": true}, "www2": {"tls_enabled": true}}}}}, "logging": {"wwwpayxpfe": {"fields": {"signed_url": "keyword", "user_id": "keyword", "signed_user": "keyword", "current_user": "keyword", "expiration": "keyword", "envoy_ingress": {"uri_path": "keyword"}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "languages": ["javascript", "python"], "version": "6d1c9bd83c27be97f397310e8db0940bcd749d65", "images": [{"parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "aa7cdbe14c69fbc2e1ff95446a369ccc27a1acf3", "sub_image": null, "external": false}}, "wwwratecardfe": {"name": "wwwratecardfe", "description": "Driver Rate Card Angular frontend modules -- migrated from www2", "repository": "git@github.com:lyft/wwwratecardfe.git", "slack": "#dxp-backend", "team_email": "driver-xp-backend@lyft.com", "pagerduty_escalation_policy": "Driver Earnings XP", "image_type": "service", "service_tier": 1, "languages": ["bash", "javascript", "python"], "credentials": true, "containers": [{"name": "legacy", "start_time": 600, "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}], "frontend": {"node_version": "6.9.1-1nodesource1~trusty1"}, "groups": [{"name": "dev", "members": ["control.dev", "wwwratecardfe.legacy", "ratecards.dev"]}, {"name": "service_group", "members": ["wwwratecardfe.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "wwwratecardfe.dev"}, {"name": "unit", "type": "execution", "group": "wwwratecardfe.dev", "container": "wwwratecardfe.legacy", "command": "make test_unit"}, {"name": "lint", "type": "execution", "group": "wwwratecardfe.dev", "container": "wwwratecardfe.legacy", "command": "make test_lint", "reports": {"pylint": "test/results/flake8-results.txt", "control_extract_hack_1": "test/results/eslint-results.txt", "control_extract_hack_2": "test/results/eslint-modern-results.txt"}, "skip_threshold": null}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "orca": [{"region": "iad"}], "legacy": true, "automatic": true}, {"name": "canary", "orca": [{"region": "iad"}], "legacy": true}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "wwwratecardfe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"ats": null, "enterprise": null, "grow": null, "www2": null, "ratecards": null, "regions": null, "supply": null, "usergroups": null, "users": null, "tcs": null}, "authorization": {"permissions": {"public": {"not_paths": ["/internal/rate-card"]}, "internal_rate_card": {"paths": ["/internal/rate-card"]}}, "bindings": {"*": ["public"], "tom": ["internal_rate_card"]}}}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "logging": {"wwwratecardfe": {"fields": {"error": "keyword", "region_name": "keyword", "driver_id": "keyword", "lng": "float", "lat": "float"}}}, "version": "4772d03446d24c088ab1018263088bd9079010bb", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "wwwreferralsfe": {"name": "wwwreferralsfe", "description": "Angular service for Referrals", "repository": "git@github.com:lyft/wwwreferralsfe.git", "image_type": "service", "service_tier": 2, "slack": "#acq-incentives", "team_email": "acq-incentives-referrals@lyft.com", "pagerduty_escalation_policy": "Referrals Team", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}], "notification_overrides": {"deploy": {"slack": "#acq-incentives-bot", "environments": ["production", "canary", "staging"]}, "deploy_failure": {"slack": "#acq-incentives-bot"}, "test_failure": {"slack": "#acq-incentives-bot", "email": "acq-incentives-referrals@lyft.com", "environments": ["production"]}, "master_failure": {"slack": "#acq-incentives-bot"}, "pr_merge": {"slack": "#acq-incentives-bot"}, "pr_open": {"slack": "#acq-incentives-bot"}}, "frontend": {"node_version": "6.9.1-1nodesource1~trusty1"}, "groups": [{"name": "dev", "members": ["control.dev", "wwwreferralsfe.legacy"]}, {"name": "integration", "members": ["wwwreferralsfe.dev", "wwwidentityfe.dev", "wwwpayxpfe.dev", "tcs.dev", "www2.site", "accountfrontend.integration", "ats.qa_approve", "auth.dev", "brandfe.dev", "jobscheduler.dev", "karma.dev", "legacyapi.dev", "locations.dev", "publicapi.dev", "supply.dev", "switchboard.dev", "usergroups.dev", "users.dev", "viewport.dev"]}, {"name": "e2e", "members": ["e2etest.server", "wwwreferralsfe.integration"]}], "tests": [{"name": "startup", "type": "startup", "group": "wwwreferralsfe.dev"}, {"name": "unit", "type": "execution", "group": "wwwreferralsfe.dev", "container": "wwwreferralsfe.legacy", "command": "make test_unit"}, {"name": "lint", "type": "execution", "group": "wwwreferralsfe.dev", "container": "wwwreferralsfe.legacy", "command": "make test_lint", "reports": {"control_extract_hack_1": "test/results/eslint-results.txt", "control_extract_hack_2": "test/results/eslint-modern-results.txt"}, "skip_threshold": null}, {"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, [{"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, {"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "wwwreferralsfe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"www2": null, "regions": null, "users": null, "tcs": null, "grow": null}}}}, "languages": ["javascript", "python"], "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "logging": {"wwwreferralsfe": {"fields": {"attempt_num": "long", "traceback": "keyword", "exception": "keyword", "failed_record": "keyword"}}}, "version": "f3cd0c6b520d77cd0e0156298f2ce5ffc5948a26", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "wwwsupportxpfe": {"name": "wwwsupportxpfe", "description": "Support XP Angular frontend modules -- migrated from www2", "repository": "git@github.com:lyft/wwwsupportxpfe.git", "image_type": "service", "service_tier": 1, "slack": "#support-xp-eng", "team_email": "support-xp@lyft.com", "pagerduty_escalation_policy": "Support XP", "credentials": true, "containers": [{"name": "legacy", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "exports": [{"name": "api", "port": 8080}]}, {"name": "frontendi18n", "command": "make frontend_i18n"}], "frontend": {"node_version": "6.9.1-1nodesource1~trusty1"}, "groups": [{"name": "dev", "members": ["control.dev", "wwwsupportxpfe.legacy"]}, {"name": "service_group", "members": ["wwwsupportxpfe.legacy"]}], "tests": [{"name": "startup", "type": "startup", "group": "wwwsupportxpfe.dev"}, {"name": "unit", "type": "execution", "group": "wwwsupportxpfe.dev", "container": "wwwsupportxpfe.legacy", "command": "make test_unit"}, {"name": "lint", "type": "execution", "group": "wwwsupportxpfe.dev", "container": "wwwsupportxpfe.legacy", "command": "make test_lint", "reports": {"pylint": "test/results/flake8-results.txt", "control_extract_hack_1": "test/results/eslint-results.txt", "control_extract_hack_2": "test/results/eslint-modern-results.txt"}, "skip_threshold": null}, {"name": "py-lint", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure", "autotrigger": false}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": [{"region": "iad"}]}, {"name": "canary", "legacy": true, "orca": [{"region": "iad"}]}, {"name": "production-us-east-1a", "legacy": true, "availability_zone": "us-east-1a"}, [{"name": "production-us-east-1d", "legacy": true, "availability_zone": "us-east-1d"}, {"name": "production", "legacy": true}]], "pulldeploy_components": {"data": ["translationdata", "regioncfgdata"]}, "envoy": {"profile": "python", "settings": {"services": [{"name": "wwwsupportxpfe"}], "common_settings": {"local_service": {"hosts_url": "tcp://127.0.0.1:8080"}, "internal_hosts": {"ats": null, "drivestat": null, "enterprise": null, "grow": null, "guardian": null, "ledger": null, "www2": null, "regions": null, "rides": null, "supply": null, "usergroups": null, "users": null, "tcs": null}}}}, "logging": {"wwwsupportxpfe": {"fields": {"signed_url": "keyword", "user_id": "keyword", "current_user": "keyword", "signed_user": "keyword", "expiration": "keyword"}}}, "builder": {"name": "multi", "params": {"builders": [{"name": "docker_build"}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "languages": ["javascript", "python"], "version": "5a6f9693a7060f2852c173b2acb755f783c6410a", "images": [{"parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "opsbase", "version": "29de748f3075c63126ebbce1c0cd341012a69093", "sub_image": null, "external": false}}, "zippyconfigdata": {"name": "zippyconfigdata", "description": "Runtime config related to the zippy pipeline", "repository": "git@github.com:lyft/zippyconfigdata.git", "image_type": "data", "service_tier": 3, "slack": "#zippy-alerts", "team_email": "zippy-dev@lyft.com", "pagerduty_escalation_policy": "Zippy", "languages": ["bash", "python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2i", "params": {"builder": "lyft/configsetbase:1a98e7a46cb7cdceb43ff0e9a56d48c07215b163"}}, {"name": "s2i", "params": {"builder": "lyft/precommit:d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": "precommit"}}]}}, "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/zippyconfigdata"]}], "groups": [{"name": "test", "members": ["eventpersistflat.dev"]}], "tests": [{"name": "precommit", "type": "jailed", "sub_image": "precommit", "command": "pre-commit run --all-files --show-diff-on-failure"}, {"name": "unit", "type": "jailed", "command": "make test_unit", "reports": {"junit": "build/unit.xml", "cobertura": "build/coverage.xml", "coverage_html": "build/coverage_html"}}, {"name": "configset", "type": "tool", "tool": "configsettest.test"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "canary", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": true, "orca": []}], "version": "645a8ac534385f00e0100203f64173c7c05205cf", "images": [{"parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "d9242ea1d4a70199a8bb8cd0584739e8d37fb129", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "configsetbase", "version": "1a98e7a46cb7cdceb43ff0e9a56d48c07215b163", "sub_image": null, "external": false}}, "zippyworkflows": {"name": "zippyworkflows", "description": "Runtime configuration data for zippy ETL", "repository": "git@github.com:lyft/zippyworkflows.git", "image_type": "data", "service_tier": 1, "slack": "#zippy-alerts", "team_email": "zippy-dev@lyft.com", "pagerduty_escalation_policy": "Zippy", "languages": ["bash", "python"], "builder": {"name": "multi", "params": {"builders": [{"name": "s2iplus", "params": {"builder": "lyft/configsetbase:eeeb875bad52b92aae26c54ed29ebe6152ad322c", "packages": ["libsasl2-dev"]}}, {"name": "s2i", "params": {"builder": "lyft/precommit:6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": "precommit"}}]}}, "credentials": false, "groups": [{"name": "dev", "members": ["airflowinfra.dev"]}], "containers": [{"name": "run", "command": "/code/configset/base/entrypoint.sh", "once": true, "start_phase": "sequential_init", "mounts": ["/srv/configset/zippyworkflows"]}, {"name": "spin", "command": "sleep infinity"}], "tests": [{"name": "unit", "command": "make test_unit", "type": "jailed"}, {"name": "lint", "type": "jailed", "sub_image": "precommit", "command": "/bin/bash -c 'PYTHONPATH=data/ pre-commit run --all-files --show-diff-on-failure'"}, {"name": "dag_bag", "command": "service_venv python3 -m pytest /code/airflowinfra/tests/dag_bag/", "type": "execution", "group": "zippyworkflows.dev", "container": "airflowinfra.legacy"}], "deploy": [{"name": "staging", "legacy": true, "automatic": true, "orca": []}, {"name": "production", "legacy": true, "automatic": false, "orca": []}], "version": "391ee48f2d2525cf96ecd4c1b8399ebb0121d40e", "images": [{"parent": {"name": "configsetbase", "version": "eeeb875bad52b92aae26c54ed29ebe6152ad322c", "sub_image": null, "external": false}, "sub_image": null}, {"parent": {"name": "precommit", "version": "6244d7ac8f1c80ccc3b369ba23f8b3521675a54a", "sub_image": null, "external": false}, "sub_image": "precommit"}], "parent": {"name": "configsetbase", "version": "eeeb875bad52b92aae26c54ed29ebe6152ad322c", "sub_image": null, "external": false}}, "zookeeper": {"name": "zookeeper", "description": "Repository for provisoning apache zookeeper in lyft", "repository": "git@github.com:lyft/zookeeper-private.git", "credentials": false, "containers": [{"name": "server", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 120, "exports": [{"name": "zookeeper", "port": 2181}]}, {"name": "server1", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 120, "exports": [{"name": "zookeeper", "port": 2181}]}, {"name": "server2", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 120, "exports": [{"name": "zookeeper", "port": 2181}]}, {"name": "server3", "command": "/code/ops/base/entrypoint.sh", "provision": "/code/ops/base/starters/post_starters.sh", "start_time": 120, "exports": [{"name": "zookeeper", "port": 2181}]}], "groups": [{"name": "dev", "members": ["control.dev", "zookeeper.server1", "zookeeper.server2", "zookeeper.server3"]}], "tests": [{"name": "startup", "type": "startup", "group": "zookeeper.dev"}, {"name": "unittest", "type": "execution", "group": "zookeeper.dev", "container": "zookeeper.server1", "command": "./after_zk_up.sh mvn test surefire-report:report -Dcheckstyle.skip=true"}, {"name": "checkstyle", "type": "execution", "group": "zookeeper.dev", "container": "zookeeper.server1", "command": "./after_zk_up.sh mvn checkstyle:check", "reports": {"checkstyle": "target/checkstyle-report.txt"}}, {"name": "integration", "type": "execution", "group": "zookeeper.dev", "container": "zookeeper.server1", "command": "./after_zk_up.sh mvn failsafe:integration-test failsafe:verify"}], "slack": "#druid-dev-bot", "team_email": "druid-dev@lyft.com", "pagerduty_escalation_policy": "Data Infra Interactive", "deploy": [{"name": "staging", "legacy": true, "orca": [{"region": "iad"}], "automatic": true}, {"name": "production", "legacy": true, "orca": [{"iam_role": "orca-admin"}, {"region": "iad"}]}], "languages": ["java"], "image_type": "service", "service_tier": 3, "version": "d88d37605acd1f99dc7323cfe2784db435e012d8", "images": [{"parent": {"name": "java8", "version": "e9e63f36a6c9539f0c410ab92de2f55f242a45a3", "sub_image": null, "external": false}, "sub_image": null}], "parent": {"name": "java8", "version": "e9e63f36a6c9539f0c410ab92de2f55f242a45a3", "sub_image": null, "external": false}}}